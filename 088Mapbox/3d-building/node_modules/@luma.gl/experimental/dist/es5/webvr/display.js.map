{"version":3,"file":"display.js","names":["Display","animationLoop","options","width","height","params","viewport","scissor","scissorTest","renderFrame","views","getViews","gl","view","withParameters","onRender","submitFrame"],"sources":["../../../src/webvr/display.js"],"sourcesContent":["import {withParameters} from '@luma.gl/gltools';\n\nexport default class Display {\n  constructor() {\n    // TODO\n    this.animationLoop = null;\n  }\n\n  getViews(options) {\n    const {width, height} = options;\n    return [\n      {\n        params: {\n          viewport: [0, 0, width, height],\n          scissor: [0, 0, width, height],\n          scissorTest: true\n        }\n      }\n    ];\n  }\n\n  submitFrame() {\n    return true;\n  }\n\n  // return true if animation frame has been requested\n  requestAnimationFrame(renderFrame) {\n    return false;\n  }\n\n  delete() {}\n\n  // AnimationLoop calls this API\n  _renderFrame(options) {\n    const views = this.getViews(options);\n    if (!views) {\n      return false;\n    }\n\n    const {gl} = this.animationLoop;\n    for (const view of views) {\n      withParameters(gl, view.params, () => this.animationLoop.onRender({...options, ...view}));\n    }\n\n    this.submitFrame();\n    return true;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;IAEqBA,O;EACnB,mBAAc;IAAA;IAEZ,KAAKC,aAAL,GAAqB,IAArB;EACD;;;;WAED,kBAASC,OAAT,EAAkB;MAChB,IAAOC,KAAP,GAAwBD,OAAxB,CAAOC,KAAP;MAAA,IAAcC,MAAd,GAAwBF,OAAxB,CAAcE,MAAd;MACA,OAAO,CACL;QACEC,MAAM,EAAE;UACNC,QAAQ,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAOH,KAAP,EAAcC,MAAd,CADJ;UAENG,OAAO,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAOJ,KAAP,EAAcC,MAAd,CAFH;UAGNI,WAAW,EAAE;QAHP;MADV,CADK,CAAP;IASD;;;WAED,uBAAc;MACZ,OAAO,IAAP;IACD;;;WAGD,+BAAsBC,WAAtB,EAAmC;MACjC,OAAO,KAAP;IACD;;;WAED,mBAAS,CAAE;;;WAGX,sBAAaP,OAAb,EAAsB;MAAA;;MACpB,IAAMQ,KAAK,GAAG,KAAKC,QAAL,CAAcT,OAAd,CAAd;;MACA,IAAI,CAACQ,KAAL,EAAY;QACV,OAAO,KAAP;MACD;;MAED,IAAOE,EAAP,GAAa,KAAKX,aAAlB,CAAOW,EAAP;;MANoB,2CAODF,KAPC;MAAA;;MAAA;QAAA;UAAA,IAOTG,IAPS;UAQlB,IAAAC,uBAAA,EAAeF,EAAf,EAAmBC,IAAI,CAACR,MAAxB,EAAgC;YAAA,OAAM,KAAI,CAACJ,aAAL,CAAmBc,QAAnB,iCAAgCb,OAAhC,GAA4CW,IAA5C,EAAN;UAAA,CAAhC;QARkB;;QAOpB,oDAA0B;UAAA;QAEzB;MATmB;QAAA;MAAA;QAAA;MAAA;;MAWpB,KAAKG,WAAL;MACA,OAAO,IAAP;IACD"}