{
  "version": 3,
  "sources": ["../../../node_modules/@xmldom/xmldom/lib/conventions.js", "../../../node_modules/@xmldom/xmldom/lib/dom.js", "../../../node_modules/@xmldom/xmldom/lib/entities.js", "../../../node_modules/@xmldom/xmldom/lib/sax.js", "../../../node_modules/@xmldom/xmldom/lib/dom-parser.js", "../../../node_modules/@xmldom/xmldom/lib/index.js", "../../../node_modules/contentstream/node_modules/isarray/index.js", "../../../node_modules/core-util-is/lib/util.js", "../../../node_modules/inherits/inherits_browser.js", "../../../node_modules/inherits/inherits.js", "../../../node_modules/string_decoder/index.js", "../../../node_modules/contentstream/node_modules/readable-stream/lib/_stream_readable.js", "../../../node_modules/contentstream/node_modules/readable-stream/lib/_stream_duplex.js", "../../../node_modules/contentstream/node_modules/readable-stream/lib/_stream_writable.js", "../../../node_modules/contentstream/node_modules/readable-stream/lib/_stream_transform.js", "../../../node_modules/contentstream/node_modules/readable-stream/lib/_stream_passthrough.js", "../../../node_modules/contentstream/node_modules/readable-stream/readable.js", "../../../node_modules/contentstream/index.js", "../../../node_modules/gif-encoder/node_modules/isarray/index.js", "../../../node_modules/gif-encoder/node_modules/readable-stream/lib/_stream_writable.js", "../../../node_modules/gif-encoder/node_modules/readable-stream/lib/_stream_duplex.js", "../../../node_modules/gif-encoder/node_modules/readable-stream/lib/_stream_readable.js", "../../../node_modules/gif-encoder/node_modules/readable-stream/lib/_stream_transform.js", "../../../node_modules/gif-encoder/node_modules/readable-stream/lib/_stream_passthrough.js", "../../../node_modules/gif-encoder/node_modules/readable-stream/readable.js", "../../../node_modules/gif-encoder/lib/TypedNeuQuant.js", "../../../node_modules/gif-encoder/lib/LZWEncoder.js", "../../../node_modules/gif-encoder/lib/GIFEncoder.js", "../../../node_modules/jpeg-js/lib/encoder.js", "../../../node_modules/jpeg-js/lib/decoder.js", "../../../node_modules/jpeg-js/index.js", "../../../node_modules/pngjs-nozlib/lib/chunkstream.js", "../../../node_modules/pngjs-nozlib/lib/interlace.js", "../../../node_modules/pngjs-nozlib/lib/paeth-predictor.js", "../../../node_modules/pngjs-nozlib/lib/filter-parse.js", "../../../node_modules/pngjs-nozlib/lib/filter-parse-async.js", "../../../node_modules/pngjs-nozlib/lib/constants.js", "../../../node_modules/pngjs-nozlib/lib/crc.js", "../../../node_modules/pngjs-nozlib/lib/parser.js", "../../../node_modules/pngjs-nozlib/lib/bitmapper.js", "../../../node_modules/pngjs-nozlib/lib/format-normaliser.js", "../../../node_modules/pngjs-nozlib/lib/parser-async.js", "../../../node_modules/pngjs-nozlib/lib/bitpacker.js", "../../../node_modules/pngjs-nozlib/lib/filter-pack.js", "../../../node_modules/pngjs-nozlib/lib/packer.js", "../../../node_modules/pngjs-nozlib/lib/packer-async.js", "../../../node_modules/pngjs-nozlib/lib/sync-reader.js", "../../../node_modules/pngjs-nozlib/lib/filter-parse-sync.js", "../../../node_modules/pngjs-nozlib/lib/parser-sync.js", "../../../node_modules/pngjs-nozlib/lib/packer-sync.js", "../../../node_modules/pngjs-nozlib/lib/png-sync.js", "../../../node_modules/pngjs-nozlib/lib/png.js", "../../../node_modules/iota-array/iota.js", "../../../node_modules/is-buffer/index.js", "../../../node_modules/ndarray/ndarray.js", "../../../node_modules/uniq/uniq.js", "../../../node_modules/cwise-compiler/lib/compile.js", "../../../node_modules/cwise-compiler/lib/thunk.js", "../../../node_modules/cwise-compiler/compiler.js", "../../../node_modules/ndarray-ops/ndarray-ops.js", "../../../node_modules/through/index.js", "../../../node_modules/save-pixels/save-pixels.js", "../../../node_modules/pngjs/lib/chunkstream.js", "../../../node_modules/pngjs/lib/interlace.js", "../../../node_modules/pngjs/lib/paeth-predictor.js", "../../../node_modules/pngjs/lib/filter-parse.js", "../../../node_modules/pngjs/lib/filter-parse-async.js", "../../../node_modules/pngjs/lib/constants.js", "../../../node_modules/pngjs/lib/crc.js", "../../../node_modules/pngjs/lib/parser.js", "../../../node_modules/pngjs/lib/bitmapper.js", "../../../node_modules/pngjs/lib/format-normaliser.js", "../../../node_modules/pngjs/lib/parser-async.js", "../../../node_modules/pngjs/lib/bitpacker.js", "../../../node_modules/pngjs/lib/filter-pack.js", "../../../node_modules/pngjs/lib/packer.js", "../../../node_modules/pngjs/lib/packer-async.js", "../../../node_modules/pngjs/lib/sync-inflate.js", "../../../node_modules/pngjs/lib/sync-reader.js", "../../../node_modules/pngjs/lib/filter-parse-sync.js", "../../../node_modules/pngjs/lib/parser-sync.js", "../../../node_modules/pngjs/lib/packer-sync.js", "../../../node_modules/pngjs/lib/png-sync.js", "../../../node_modules/pngjs/lib/png.js", "../../../node_modules/get-pixels/node_modules/jpeg-js/lib/encoder.js", "../../../node_modules/get-pixels/node_modules/jpeg-js/lib/decoder.js", "../../../node_modules/get-pixels/node_modules/jpeg-js/index.js", "../../../node_modules/ndarray-pack/doConvert.js", "../../../node_modules/ndarray-pack/convert.js", "../../../node_modules/omggif/omggif.js", "../../../node_modules/node-bitmap/lib/bitmap.js", "../../../node_modules/node-bitmap/index.js", "../../../node_modules/extend/index.js", "../../../node_modules/psl/index.js", "../../../node_modules/tough-cookie/lib/pubsuffix-psl.js", "../../../node_modules/tough-cookie/lib/store.js", "../../../node_modules/tough-cookie/lib/permuteDomain.js", "../../../node_modules/tough-cookie/lib/pathMatch.js", "../../../node_modules/tough-cookie/lib/memstore.js", "../../../node_modules/tough-cookie/lib/version.js", "../../../node_modules/tough-cookie/lib/cookie.js", "../../../node_modules/request/lib/cookies.js", "../../../node_modules/json-stringify-safe/stringify.js", "../../../node_modules/safe-buffer/index.js", "../../../node_modules/request/lib/helpers.js", "../../../node_modules/aws-sign2/index.js", "../../../node_modules/aws4/lru.js", "../../../node_modules/aws4/aws4.js", "../../../node_modules/assert-plus/assert.js", "../../../node_modules/safer-buffer/safer.js", "../../../node_modules/sshpk/lib/algs.js", "../../../node_modules/sshpk/lib/errors.js", "../../../node_modules/asn1/lib/ber/errors.js", "../../../node_modules/asn1/lib/ber/types.js", "../../../node_modules/asn1/lib/ber/reader.js", "../../../node_modules/asn1/lib/ber/writer.js", "../../../node_modules/asn1/lib/ber/index.js", "../../../node_modules/asn1/lib/index.js", "../../../node_modules/jsbn/index.js", "../../../node_modules/ecc-jsbn/lib/ec.js", "../../../node_modules/tweetnacl/nacl-fast.js", "../../../node_modules/sshpk/lib/utils.js", "../../../node_modules/sshpk/lib/ssh-buffer.js", "../../../node_modules/sshpk/lib/signature.js", "../../../node_modules/ecc-jsbn/lib/sec.js", "../../../node_modules/ecc-jsbn/index.js", "../../../node_modules/sshpk/lib/dhe.js", "../../../node_modules/sshpk/lib/ed-compat.js", "../../../node_modules/sshpk/lib/formats/pkcs8.js", "../../../node_modules/sshpk/lib/formats/pkcs1.js", "../../../node_modules/sshpk/lib/formats/rfc4253.js", "../../../node_modules/bcrypt-pbkdf/index.js", "../../../node_modules/sshpk/lib/formats/ssh-private.js", "../../../node_modules/sshpk/lib/formats/pem.js", "../../../node_modules/sshpk/lib/formats/ssh.js", "../../../node_modules/sshpk/lib/formats/dnssec.js", "../../../node_modules/sshpk/lib/formats/putty.js", "../../../node_modules/sshpk/lib/formats/auto.js", "../../../node_modules/sshpk/lib/private-key.js", "../../../node_modules/sshpk/lib/identity.js", "../../../node_modules/sshpk/lib/formats/openssh-cert.js", "../../../node_modules/sshpk/lib/formats/x509.js", "../../../node_modules/sshpk/lib/formats/x509-pem.js", "../../../node_modules/sshpk/lib/certificate.js", "../../../node_modules/sshpk/lib/fingerprint.js", "../../../node_modules/sshpk/lib/key.js", "../../../node_modules/sshpk/lib/index.js", "../../../node_modules/http-signature/lib/utils.js", "../../../node_modules/http-signature/lib/parser.js", "../../../node_modules/extsprintf/lib/extsprintf.js", "../../../node_modules/verror/node_modules/extsprintf/lib/extsprintf.js", "../../../node_modules/verror/lib/verror.js", "../../../node_modules/json-schema/lib/validate.js", "../../../node_modules/jsprim/lib/jsprim.js", "../../../node_modules/http-signature/lib/signer.js", "../../../node_modules/http-signature/lib/verify.js", "../../../node_modules/http-signature/lib/index.js", "../../../node_modules/mime-db/index.js", "../../../node_modules/mime-types/index.js", "../../../node_modules/caseless/index.js", "../../../node_modules/forever-agent/index.js", "../../../node_modules/delayed-stream/lib/delayed_stream.js", "../../../node_modules/combined-stream/lib/combined_stream.js", "../../../node_modules/asynckit/lib/defer.js", "../../../node_modules/asynckit/lib/async.js", "../../../node_modules/asynckit/lib/abort.js", "../../../node_modules/asynckit/lib/iterate.js", "../../../node_modules/asynckit/lib/state.js", "../../../node_modules/asynckit/lib/terminator.js", "../../../node_modules/asynckit/parallel.js", "../../../node_modules/asynckit/serialOrdered.js", "../../../node_modules/asynckit/serial.js", "../../../node_modules/asynckit/index.js", "../../../node_modules/form-data/lib/populate.js", "../../../node_modules/form-data/lib/form_data.js", "../../../node_modules/isstream/isstream.js", "../../../node_modules/is-typedarray/index.js", "../../../node_modules/request/lib/getProxyFromURI.js", "../../../node_modules/qs/lib/utils.js", "../../../node_modules/qs/lib/formats.js", "../../../node_modules/qs/lib/stringify.js", "../../../node_modules/qs/lib/parse.js", "../../../node_modules/qs/lib/index.js", "../../../node_modules/request/lib/querystring.js", "../../../node_modules/uri-js/src/index.ts", "../../../node_modules/uri-js/src/schemes/urn-uuid.ts", "../../../node_modules/uri-js/src/schemes/urn.ts", "../../../node_modules/uri-js/src/schemes/mailto.ts", "../../../node_modules/uri-js/src/schemes/wss.ts", "../../../node_modules/uri-js/src/schemes/ws.ts", "../../../node_modules/uri-js/src/schemes/https.ts", "../../../node_modules/uri-js/src/schemes/http.ts", "../../../node_modules/uri-js/src/uri.ts", "../../../node_modules/uri-js/node_modules/punycode/punycode.es6.js", "../../../node_modules/uri-js/src/regexps-iri.ts", "../../../node_modules/uri-js/src/regexps-uri.ts", "../../../node_modules/uri-js/src/util.ts", "../../../node_modules/fast-deep-equal/index.js", "../../../node_modules/ajv/lib/compile/ucs2length.js", "../../../node_modules/ajv/lib/compile/util.js", "../../../node_modules/ajv/lib/compile/schema_obj.js", "../../../node_modules/json-schema-traverse/index.js", "../../../node_modules/ajv/lib/compile/resolve.js", "../../../node_modules/ajv/lib/compile/error_classes.js", "../../../node_modules/fast-json-stable-stringify/index.js", "../../../node_modules/ajv/lib/dotjs/validate.js", "../../../node_modules/ajv/lib/compile/index.js", "../../../node_modules/ajv/lib/cache.js", "../../../node_modules/ajv/lib/compile/formats.js", "../../../node_modules/ajv/lib/dotjs/ref.js", "../../../node_modules/ajv/lib/dotjs/allOf.js", "../../../node_modules/ajv/lib/dotjs/anyOf.js", "../../../node_modules/ajv/lib/dotjs/comment.js", "../../../node_modules/ajv/lib/dotjs/const.js", "../../../node_modules/ajv/lib/dotjs/contains.js", "../../../node_modules/ajv/lib/dotjs/dependencies.js", "../../../node_modules/ajv/lib/dotjs/enum.js", "../../../node_modules/ajv/lib/dotjs/format.js", "../../../node_modules/ajv/lib/dotjs/if.js", "../../../node_modules/ajv/lib/dotjs/items.js", "../../../node_modules/ajv/lib/dotjs/_limit.js", "../../../node_modules/ajv/lib/dotjs/_limitItems.js", "../../../node_modules/ajv/lib/dotjs/_limitLength.js", "../../../node_modules/ajv/lib/dotjs/_limitProperties.js", "../../../node_modules/ajv/lib/dotjs/multipleOf.js", "../../../node_modules/ajv/lib/dotjs/not.js", "../../../node_modules/ajv/lib/dotjs/oneOf.js", "../../../node_modules/ajv/lib/dotjs/pattern.js", "../../../node_modules/ajv/lib/dotjs/properties.js", "../../../node_modules/ajv/lib/dotjs/propertyNames.js", "../../../node_modules/ajv/lib/dotjs/required.js", "../../../node_modules/ajv/lib/dotjs/uniqueItems.js", "../../../node_modules/ajv/lib/dotjs/index.js", "../../../node_modules/ajv/lib/compile/rules.js", "../../../node_modules/ajv/lib/data.js", "../../../node_modules/ajv/lib/compile/async.js", "../../../node_modules/ajv/lib/dotjs/custom.js", "../../../node_modules/ajv/lib/definition_schema.js", "../../../node_modules/ajv/lib/keyword.js", "../../../node_modules/ajv/lib/ajv.js", "../../../node_modules/har-validator/lib/error.js", "../../../node_modules/har-schema/lib/index.js", "../../../node_modules/har-validator/lib/promise.js", "../../../node_modules/request/lib/har.js", "../../../node_modules/uuid/lib/rng.js", "../../../node_modules/uuid/lib/bytesToUuid.js", "../../../node_modules/uuid/v4.js", "../../../node_modules/request/lib/auth.js", "../../../node_modules/oauth-sign/index.js", "../../../node_modules/request/lib/oauth.js", "../../../node_modules/request/lib/hawk.js", "../../../node_modules/request/lib/multipart.js", "../../../node_modules/request/lib/redirect.js", "../../../node_modules/tunnel-agent/index.js", "../../../node_modules/request/lib/tunnel.js", "../../../node_modules/performance-now/lib/src/performance-now.coffee", "../../../node_modules/request/request.js", "../../../node_modules/request/index.js", "../../../node_modules/data-uri-to-buffer/index.js", "../../../node_modules/parse-data-uri/index.js", "../../../node_modules/get-pixels/node-pixels.js", "../../../node_modules/web-streams-polyfill/src/stub/symbol.ts", "../../../node_modules/web-streams-polyfill/src/utils.ts", "../../../node_modules/web-streams-polyfill/src/lib/helpers/miscellaneous.ts", "../../../node_modules/web-streams-polyfill/src/lib/helpers/webidl.ts", "../../../node_modules/web-streams-polyfill/src/lib/simple-queue.ts", "../../../node_modules/web-streams-polyfill/src/lib/readable-stream/generic-reader.ts", "../../../node_modules/web-streams-polyfill/src/lib/abstract-ops/internal-methods.ts", "../../../node_modules/web-streams-polyfill/src/stub/number-isfinite.ts", "../../../node_modules/web-streams-polyfill/src/stub/math-trunc.ts", "../../../node_modules/web-streams-polyfill/src/lib/validators/basic.ts", "../../../node_modules/web-streams-polyfill/src/lib/validators/readable-stream.ts", "../../../node_modules/web-streams-polyfill/src/lib/readable-stream/default-reader.ts", "../../../node_modules/web-streams-polyfill/src/target/es5/stub/async-iterator-prototype.ts", "../../../node_modules/web-streams-polyfill/src/lib/readable-stream/async-iterator.ts", "../../../node_modules/web-streams-polyfill/src/stub/number-isnan.ts", "../../../node_modules/web-streams-polyfill/src/lib/abstract-ops/miscellaneous.ts", "../../../node_modules/web-streams-polyfill/src/lib/abstract-ops/queue-with-sizes.ts", "../../../node_modules/web-streams-polyfill/src/lib/abstract-ops/ecmascript.ts", "../../../node_modules/web-streams-polyfill/src/lib/readable-stream/byte-stream-controller.ts", "../../../node_modules/web-streams-polyfill/src/lib/readable-stream/byob-reader.ts", "../../../node_modules/web-streams-polyfill/src/lib/abstract-ops/queuing-strategy.ts", "../../../node_modules/web-streams-polyfill/src/lib/validators/queuing-strategy.ts", "../../../node_modules/web-streams-polyfill/src/lib/validators/underlying-sink.ts", "../../../node_modules/web-streams-polyfill/src/lib/validators/writable-stream.ts", "../../../node_modules/web-streams-polyfill/src/lib/writable-stream.ts", "../../../node_modules/web-streams-polyfill/src/lib/abort-signal.ts", "../../../node_modules/web-streams-polyfill/src/stub/native.ts", "../../../node_modules/web-streams-polyfill/src/stub/dom-exception.ts", "../../../node_modules/web-streams-polyfill/src/lib/readable-stream/pipe.ts", "../../../node_modules/web-streams-polyfill/src/lib/readable-stream/default-controller.ts", "../../../node_modules/web-streams-polyfill/src/lib/readable-stream/tee.ts", "../../../node_modules/web-streams-polyfill/src/lib/validators/underlying-source.ts", "../../../node_modules/web-streams-polyfill/src/lib/validators/reader-options.ts", "../../../node_modules/web-streams-polyfill/src/lib/validators/iterator-options.ts", "../../../node_modules/web-streams-polyfill/src/lib/validators/pipe-options.ts", "../../../node_modules/web-streams-polyfill/src/lib/validators/readable-writable-pair.ts", "../../../node_modules/web-streams-polyfill/src/lib/readable-stream.ts", "../../../node_modules/web-streams-polyfill/src/lib/validators/queuing-strategy-init.ts", "../../../node_modules/web-streams-polyfill/src/lib/byte-length-queuing-strategy.ts", "../../../node_modules/web-streams-polyfill/src/lib/count-queuing-strategy.ts", "../../../node_modules/web-streams-polyfill/src/lib/validators/transformer.ts", "../../../node_modules/web-streams-polyfill/src/lib/transform-stream.ts", "../../../node_modules/web-streams-polyfill/src/polyfill.ts", "../../worker-utils/src/lib/env-utils/version.ts", "../../worker-utils/src/lib/env-utils/assert.ts", "../../worker-utils/src/lib/env-utils/globals.ts", "../../worker-utils/src/lib/worker-utils/get-transfer-list.ts", "../../worker-utils/src/lib/worker-farm/worker-body.ts", "../../worker-utils/src/lib/node/require-utils.node.ts", "../../worker-utils/src/lib/library-utils/library-utils.ts", "../../polyfills/src/index.ts", "../../polyfills/src/utils/globals.ts", "../../polyfills/src/lib/encoding-indexes.ts", "../../polyfills/src/lib/encoding.ts", "../../polyfills/src/promise/all-settled.ts", "../../polyfills/src/node/buffer/btoa.node.ts", "../../polyfills/src/node/fetch/headers.node.ts", "../../polyfills/src/utils/assert.ts", "../../polyfills/src/node/fetch/utils/stream-utils.node.ts", "../../polyfills/src/node/fetch/utils/decode-data-uri.node.ts", "../../polyfills/src/node/fetch/response.node.ts", "../../polyfills/src/node/fetch/fetch.node.ts", "../../polyfills/src/node/images/encode-image.node.ts", "../../polyfills/src/node/buffer/to-array-buffer.node.ts", "../../polyfills/src/node/images/parse-image.node.ts", "../../polyfills/src/node/file/readable-stream.ts", "../../polyfills/src/node/file/blob-stream-controller.ts", "../../polyfills/src/node/file/blob-stream.ts", "../../polyfills/src/node/file/blob.ts", "../../polyfills/src/node/file/file.ts", "../src/lib/draco-builder.ts", "../src/lib/draco-module-loader.ts", "../src/lib/utils/version.ts", "../src/draco-writer.ts", "../src/workers/draco-writer-nodejs-worker.ts"],
  "sourcesContent": ["'use strict'\n\n/**\n * \"Shallow freezes\" an object to render it immutable.\n * Uses `Object.freeze` if available,\n * otherwise the immutability is only in the type.\n *\n * Is used to create \"enum like\" objects.\n *\n * @template T\n * @param {T} object the object to freeze\n * @param {Pick<ObjectConstructor, 'freeze'> = Object} oc `Object` by default,\n * \t\t\t\tallows to inject custom object constructor for tests\n * @returns {Readonly<T>}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n */\nfunction freeze(object, oc) {\n\tif (oc === undefined) {\n\t\toc = Object\n\t}\n\treturn oc && typeof oc.freeze === 'function' ? oc.freeze(object) : object\n}\n\n/**\n * All mime types that are allowed as input to `DOMParser.parseFromString`\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString#Argument02 MDN\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparsersupportedtype WHATWG HTML Spec\n * @see DOMParser.prototype.parseFromString\n */\nvar MIME_TYPE = freeze({\n\t/**\n\t * `text/html`, the only mime type that triggers treating an XML document as HTML.\n\t *\n\t * @see DOMParser.SupportedType.isHTML\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring WHATWG HTML Spec\n\t */\n\tHTML: 'text/html',\n\n\t/**\n\t * Helper method to check a mime type if it indicates an HTML document\n\t *\n\t * @param {string} [value]\n\t * @returns {boolean}\n\t *\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring \t */\n\tisHTML: function (value) {\n\t\treturn value === MIME_TYPE.HTML\n\t},\n\n\t/**\n\t * `application/xml`, the standard mime type for XML documents.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xml IANA MimeType registration\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.1 RFC 7303\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_APPLICATION: 'application/xml',\n\n\t/**\n\t * `text/html`, an alias for `application/xml`.\n\t *\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.2 RFC 7303\n\t * @see https://www.iana.org/assignments/media-types/text/xml IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_TEXT: 'text/xml',\n\n\t/**\n\t * `application/xhtml+xml`, indicates an XML document that has the default HTML namespace,\n\t * but is parsed as an XML document.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xhtml+xml IANA MimeType registration\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument WHATWG DOM Spec\n\t * @see https://en.wikipedia.org/wiki/XHTML Wikipedia\n\t */\n\tXML_XHTML_APPLICATION: 'application/xhtml+xml',\n\n\t/**\n\t * `image/svg+xml`,\n\t *\n\t * @see https://www.iana.org/assignments/media-types/image/svg+xml IANA MimeType registration\n\t * @see https://www.w3.org/TR/SVG11/ W3C SVG 1.1\n\t * @see https://en.wikipedia.org/wiki/Scalable_Vector_Graphics Wikipedia\n\t */\n\tXML_SVG_IMAGE: 'image/svg+xml',\n})\n\n/**\n * Namespaces that are used in this code base.\n *\n * @see http://www.w3.org/TR/REC-xml-names\n */\nvar NAMESPACE = freeze({\n\t/**\n\t * The XHTML namespace.\n\t *\n\t * @see http://www.w3.org/1999/xhtml\n\t */\n\tHTML: 'http://www.w3.org/1999/xhtml',\n\n\t/**\n\t * Checks if `uri` equals `NAMESPACE.HTML`.\n\t *\n\t * @param {string} [uri]\n\t *\n\t * @see NAMESPACE.HTML\n\t */\n\tisHTML: function (uri) {\n\t\treturn uri === NAMESPACE.HTML\n\t},\n\n\t/**\n\t * The SVG namespace.\n\t *\n\t * @see http://www.w3.org/2000/svg\n\t */\n\tSVG: 'http://www.w3.org/2000/svg',\n\n\t/**\n\t * The `xml:` namespace.\n\t *\n\t * @see http://www.w3.org/XML/1998/namespace\n\t */\n\tXML: 'http://www.w3.org/XML/1998/namespace',\n\n\t/**\n\t * The `xmlns:` namespace\n\t *\n\t * @see https://www.w3.org/2000/xmlns/\n\t */\n\tXMLNS: 'http://www.w3.org/2000/xmlns/',\n})\n\nexports.freeze = freeze;\nexports.MIME_TYPE = MIME_TYPE;\nexports.NAMESPACE = NAMESPACE;\n", "var conventions = require(\"./conventions\");\n\nvar NAMESPACE = conventions.NAMESPACE;\n\n/**\n * A prerequisite for `[].filter`, to drop elements that are empty\n * @param {string} input\n * @returns {boolean}\n */\nfunction notEmptyString (input) {\n\treturn input !== ''\n}\n/**\n * @see https://infra.spec.whatwg.org/#split-on-ascii-whitespace\n * @see https://infra.spec.whatwg.org/#ascii-whitespace\n *\n * @param {string} input\n * @returns {string[]} (can be empty)\n */\nfunction splitOnASCIIWhitespace(input) {\n\t// U+0009 TAB, U+000A LF, U+000C FF, U+000D CR, U+0020 SPACE\n\treturn input ? input.split(/[\\t\\n\\f\\r ]+/).filter(notEmptyString) : []\n}\n\n/**\n * Adds element as a key to current if it is not already present.\n *\n * @param {Record<string, boolean | undefined>} current\n * @param {string} element\n * @returns {Record<string, boolean | undefined>}\n */\nfunction orderedSetReducer (current, element) {\n\tif (!current.hasOwnProperty(element)) {\n\t\tcurrent[element] = true;\n\t}\n\treturn current;\n}\n\n/**\n * @see https://infra.spec.whatwg.org/#ordered-set\n * @param {string} input\n * @returns {string[]}\n */\nfunction toOrderedSet(input) {\n\tif (!input) return [];\n\tvar list = splitOnASCIIWhitespace(input);\n\treturn Object.keys(list.reduce(orderedSetReducer, {}))\n}\n\n/**\n * Uses `list.indexOf` to implement something like `Array.prototype.includes`,\n * which we can not rely on being available.\n *\n * @param {any[]} list\n * @returns {function(any): boolean}\n */\nfunction arrayIncludes (list) {\n\treturn function(element) {\n\t\treturn list && list.indexOf(element) !== -1;\n\t}\n}\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tdest[p] = src[p];\n\t}\n}\n\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){};\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknown Class:\"+Class)\n\t\t}\n\t\tpt.constructor = Class\n\t}\n}\n\n// Node Types\nvar NodeType = {}\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {}\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n/**\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n */\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n};\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException)\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n};\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0, \n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long \n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index. \n\t */\n\titem: function(index) {\n\t\treturn this[index] || null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t}\n};\n\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif(list._inc != inc){\n\t\tvar ls = list._refresh(list._node);\n\t\t//console.log(ls.length)\n\t\t__set__(list,'length',ls.length);\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i];\n}\n\n_extends(LiveNodeList,NodeList);\n\n/**\n * Objects implementing the NamedNodeMap interface are used\n * to represent collections of nodes that can be accessed by name.\n * Note that NamedNodeMap does not inherit from NodeList;\n * NamedNodeMaps are not maintained in any particular order.\n * Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index,\n * but this is simply to allow convenient enumeration of the contents of a NamedNodeMap,\n * and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities \n */\nfunction NamedNodeMap() {\n};\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i]\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t\t\n\t\t\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\t\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n\n/**\n * The DOMImplementation interface represents an object providing methods\n * which are not dependent on any particular document.\n * Such an object is returned by the `Document.implementation` property.\n *\n * __The individual methods describe the differences compared to the specs.__\n *\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation MDN\n * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490 DOM Level 1 Core (Initial)\n * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-102161490 DOM Level 2 Core\n * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-102161490 DOM Level 3 Core\n * @see https://dom.spec.whatwg.org/#domimplementation DOM Living Standard\n */\nfunction DOMImplementation() {\n}\n\nDOMImplementation.prototype = {\n\t/**\n\t * The DOMImplementation.hasFeature() method returns a Boolean flag indicating if a given feature is supported.\n\t * The different implementations fairly diverged in what kind of features were reported.\n\t * The latest version of the spec settled to force this method to always return true, where the functionality was accurate and in use.\n\t *\n\t * @deprecated It is deprecated and modern browsers return true in all cases.\n\t *\n\t * @param {string} feature\n\t * @param {string} [version]\n\t * @returns {boolean} always true\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/hasFeature MDN\n\t * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-5CED94D7 DOM Level 1 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-hasfeature DOM Living Standard\n\t */\n\thasFeature: function(feature, version) {\n\t\t\treturn true;\n\t},\n\t/**\n\t * Creates an XML Document object of the specified type with its document element.\n\t *\n\t * __It behaves slightly different from the description in the living standard__:\n\t * - There is no interface/class `XMLDocument`, it returns a `Document` instance.\n\t * - `contentType`, `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string|null} namespaceURI\n\t * @param {string} qualifiedName\n\t * @param {DocumentType=null} doctype\n\t * @returns {Document}\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocument DOM Level 2 Core (initial)\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument  DOM Level 2 Core\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocument: function(namespaceURI,  qualifiedName, doctype){\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype || null;\n\t\tif (doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif (qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI, qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t/**\n\t * Returns a doctype, with the given `qualifiedName`, `publicId`, and `systemId`.\n\t *\n\t * __This behavior is slightly different from the in the specs__:\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string} qualifiedName\n\t * @param {string} [publicId]\n\t * @param {string} [systemId]\n\t * @returns {DocumentType} which can either be used with `DOMImplementation.createDocument` upon document creation\n\t * \t\t\t\t  or can be put into the document via methods like `Node.insertBefore()` or `Node.replaceChild()`\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocumentType MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocType DOM Level 2 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocumenttype DOM Living Standard\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocumentType: function(qualifiedName, publicId, systemId){\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId || '';\n\t\tnode.systemId = systemId || '';\n\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n};\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises \n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises \n\t\tthis.insertBefore(newChild,oldChild);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n\t/**\n\t * Look up the prefix associated to the given namespace URI, starting from this node.\n\t * **The default namespace declarations are ignored by this method.**\n\t * See Namespace Prefix Lookup for details on the algorithm used by this method.\n\t *\n\t * _Note: The implementation seems to be incomplete when compared to the algorithm described in the specs._\n\t *\n\t * @param {string | null} namespaceURI\n\t * @returns {string | null}\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespacePrefix\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/namespaces-algorithms.html#lookupNamespacePrefixAlgo\n\t * @see https://dom.spec.whatwg.org/#dom-node-lookupprefix\n\t * @see https://github.com/xmldom/xmldom/issues/322\n\t */\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n    \t\t\t\tif(map[n] == namespaceURI){\n    \t\t\t\t\treturn n;\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(prefix in map){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n}\n\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value\n\t}\n}\n\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:'']\n\t}\n}\n\nfunction _onUpdateChild(doc,el,newChild){\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif(newChild){\n\t\t\tcs[cs.length++] = newChild;\n\t\t}else{\n\t\t\t//console.log(1)\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile(child){\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild =child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t}\n\t}\n}\n\n/**\n * attributes;\n * children;\n * \n * writeable properties:\n * nodeValue,Attr:value,CharacterData:data\n * prefix\n */\nfunction _removeChild(parentNode,child){\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif(previous){\n\t\tprevious.nextSibling = next;\n\t}else{\n\t\tparentNode.firstChild = next\n\t}\n\tif(next){\n\t\tnext.previousSibling = previous;\n\t}else{\n\t\tparentNode.lastChild = previous;\n\t}\n\t_onUpdateChild(parentNode.ownerDocument,parentNode);\n\treturn child;\n}\n/**\n * preformance key(refChild == null)\n */\nfunction _insertBefore(parentNode,newChild,nextChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tcp.removeChild(newChild);//remove and update\n\t}\n\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = newChild.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn newChild;\n\t\t}\n\t\tvar newLast = newChild.lastChild;\n\t}else{\n\t\tnewFirst = newLast = newChild;\n\t}\n\tvar pre = nextChild ? nextChild.previousSibling : parentNode.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = nextChild;\n\t\n\t\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparentNode.firstChild = newFirst;\n\t}\n\tif(nextChild == null){\n\t\tparentNode.lastChild = newLast;\n\t}else{\n\t\tnextChild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parentNode;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parentNode.ownerDocument||parentNode,parentNode);\n\t//console.log(parentNode.lastChild.nextSibling == null)\n\tif (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnewChild.firstChild = newChild.lastChild = null;\n\t}\n\treturn newChild;\n}\nfunction _appendSingleChild(parentNode,newChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tvar pre = parentNode.lastChild;\n\t\tcp.removeChild(newChild);//remove and update\n\t\tvar pre = parentNode.lastChild;\n\t}\n\tvar pre = parentNode.lastChild;\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = pre;\n\tnewChild.nextSibling = null;\n\tif(pre){\n\t\tpre.nextSibling = newChild;\n\t}else{\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument,parentNode,newChild);\n\treturn newChild;\n\t//console.log(\"__aa\",parentNode.lastChild.nextSibling == null)\n}\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\t/**\n\t * The DocumentType node of the document.\n\t *\n\t * @readonly\n\t * @type DocumentType\n\t */\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\n\tinsertBefore :  function(newChild, refChild){//raises\n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\tif(this.documentElement == null && newChild.nodeType == ELEMENT_NODE){\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\n\t\treturn _insertBefore(this,newChild,refChild),(newChild.ownerDocument = this),newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn rtv;\n\t},\n\n\t/**\n\t * The `getElementsByClassName` method of `Document` interface returns an array-like object\n\t * of all child elements which have **all** of the given class name(s).\n\t *\n\t * Returns an empty list if `classeNames` is an empty string or only contains HTML white space characters.\n\t *\n\t *\n\t * Warning: This is a live LiveNodeList.\n\t * Changes in the DOM will reflect in the array as the changes occur.\n\t * If an element selected by this array no longer qualifies for the selector,\n\t * it will automatically be removed. Be aware of this for iteration purposes.\n\t *\n\t * @param {string} classNames is a string representing the class name(s) to match; multiple class names are separated by (ASCII-)whitespace\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n\t * @see https://dom.spec.whatwg.org/#concept-getelementsbyclassname\n\t */\n\tgetElementsByClassName: function(classNames) {\n\t\tvar classNamesSet = toOrderedSet(classNames)\n\t\treturn new LiveNodeList(this, function(base) {\n\t\t\tvar ls = [];\n\t\t\tif (classNamesSet.length > 0) {\n\t\t\t\t_visitNode(base.documentElement, function(node) {\n\t\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\tvar nodeClassNames = node.getAttribute('class')\n\t\t\t\t\t\t// can be null if the attribute does not exist\n\t\t\t\t\t\tif (nodeClassNames) {\n\t\t\t\t\t\t\t// before splitting and iterating just compare them for the most common case\n\t\t\t\t\t\t\tvar matches = classNames === nodeClassNames;\n\t\t\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\t\t\tvar nodeClassNamesSet = toOrderedSet(nodeClassNames)\n\t\t\t\t\t\t\t\tmatches = classNamesSet.every(arrayIncludes(nodeClassNamesSet))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(matches) {\n\t\t\t\t\t\t\t\tls.push(node);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn ls;\n\t\t});\n\t},\n\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.localName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.target = target;\n\t\tnode.nodeValue= node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n};\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name)\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\t\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\t\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\t\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t\t\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n};\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n};\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\t\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n}\n_extends(CharacterData,Node);\nfunction Text() {\n};\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n}\n_extends(Text,CharacterData);\nfunction Comment() {\n};\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n}\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n};\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n}\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n};\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n};\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n};\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n};\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n};\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n}\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9 && this.documentElement || this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\t\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null}\n\t\t\t//{namespace:uri,prefix:''}\n\t\t\t]\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\n\nfunction needNamespaceDefine(node, isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix || '';\n\tvar uri = node.namespaceURI;\n\t// According to [Namespaces in XML 1.0](https://www.w3.org/TR/REC-xml-names/#ns-using) ,\n\t// and more specifically https://www.w3.org/TR/REC-xml-names/#nsc-NoPrefixUndecl :\n\t// > In a namespace declaration for a prefix [...], the attribute value MUST NOT be empty.\n\t// in a similar manner [Namespaces in XML 1.1](https://www.w3.org/TR/xml-names11/#ns-using)\n\t// and more specifically https://www.w3.org/TR/xml-names11/#nsc-NSDeclared :\n\t// > [...] Furthermore, the attribute value [...] must not be an empty string.\n\t// so serializing empty namespace value like xmlns:ds=\"\" would produce an invalid XML document.\n\tif (!uri) {\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === NAMESPACE.XML || uri === NAMESPACE.XMLNS) {\n\t\treturn false;\n\t}\n\t\n\tvar i = visibleNamespaces.length \n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\tif (ns.prefix === prefix) {\n\t\t\treturn ns.namespace !== uri;\n\t\t}\n\t}\n\treturn true;\n}\n/**\n * Well-formed constraint: No < in Attribute Values\n * The replacement text of any entity referred to directly or indirectly in an attribute value must not contain a <.\n * @see https://www.w3.org/TR/xml/#CleanAttrVals\n * @see https://www.w3.org/TR/xml/#NT-AttValue\n */\nfunction addSerializedAttribute(buf, qualifiedName, value) {\n\tbuf.push(' ', qualifiedName, '=\"', value.replace(/[<&\"]/g,_xmlEncoder), '\"')\n}\n\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif (!visibleNamespaces) {\n\t\tvisibleNamespaces = [];\n\t}\n\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\t\t\n\t\tisHTML = NAMESPACE.isHTML(node.namespaceURI) || isHTML\n\n\t\tvar prefixedNodeName = nodeName\n\t\tif (!isHTML && !node.prefix && node.namespaceURI) {\n\t\t\tvar defaultNS\n\t\t\t// lookup current default ns from `xmlns` attribute\n\t\t\tfor (var ai = 0; ai < attrs.length; ai++) {\n\t\t\t\tif (attrs.item(ai).name === 'xmlns') {\n\t\t\t\t\tdefaultNS = attrs.item(ai).value\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!defaultNS) {\n\t\t\t\t// lookup current default ns in visibleNamespaces\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.prefix === '' && namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tdefaultNS = namespace.namespace\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (defaultNS !== node.namespaceURI) {\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tif (namespace.prefix) {\n\t\t\t\t\t\t\tprefixedNodeName = namespace.prefix + ':' + nodeName\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tbuf.push('<', prefixedNodeName);\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\n\t\t// add namespace for current node\t\t\n\t\tif (nodeName === prefixedNodeName && needNamespaceDefine(node, isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\t\t\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',prefixedNodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn addSerializedAttribute(buf, node.name, node.value);\n\tcase TEXT_NODE:\n\t\t/**\n\t\t * The ampersand character (&) and the left angle bracket (<) must not appear in their literal form,\n\t\t * except when used as markup delimiters, or within a comment, a processing instruction, or a CDATA section.\n\t\t * If they are needed elsewhere, they must be escaped using either numeric character references or the strings\n\t\t * `&amp;` and `&lt;` respectively.\n\t\t * The right angle bracket (>) may be represented using the string \" &gt; \", and must, for compatibility,\n\t\t * be escaped using either `&gt;` or a character reference when it appears in the string `]]>` in content,\n\t\t * when that string is not marking the end of a CDATA section.\n\t\t *\n\t\t * In the content of elements, character data is any string of characters\n\t\t * which does not contain the start-delimiter of any markup\n\t\t * and does not include the CDATA-section-close delimiter, `]]>`.\n\t\t *\n\t\t * @see https://www.w3.org/TR/xml/#NT-CharData\n\t\t */\n\t\treturn buf.push(node.data\n\t\t\t.replace(/[<&]/g,_xmlEncoder)\n\t\t\t.replace(/]]>/g, ']]&gt;')\n\t\t);\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC ', pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push(' ', sysid);\n\t\t\t}\n\t\t\tbuf.push('>');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM ', sysid, '>');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE\uFF1A\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor(var n in node){\n\t\tvar v = node[n];\n\t\tif(typeof v != 'object' ){\n\t\t\tif(v != node2[n]){\n\t\t\t\tnode2[n] = v;\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value\n\t\t}\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\texports.DocumentType = DocumentType;\n\texports.DOMException = DOMException;\n\texports.DOMImplementation = DOMImplementation;\n\texports.Element = Element;\n\texports.Node = Node;\n\texports.NodeList = NodeList;\n\texports.XMLSerializer = XMLSerializer;\n//}\n", "var freeze = require('./conventions').freeze;\n\n/**\n * The entities that are predefined in every XML document.\n *\n * @see https://www.w3.org/TR/2006/REC-xml11-20060816/#sec-predefined-ent W3C XML 1.1\n * @see https://www.w3.org/TR/2008/REC-xml-20081126/#sec-predefined-ent W3C XML 1.0\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML Wikipedia\n */\nexports.XML_ENTITIES = freeze({amp:'&', apos:\"'\", gt:'>', lt:'<', quot:'\"'})\n\n/**\n * A map of currently 241 entities that are detected in an HTML document.\n * They contain all entries from `XML_ENTITIES`.\n *\n * @see XML_ENTITIES\n * @see DOMParser.parseFromString\n * @see DOMImplementation.prototype.createHTMLDocument\n * @see https://html.spec.whatwg.org/#named-character-references WHATWG HTML(5) Spec\n * @see https://www.w3.org/TR/xml-entity-names/ W3C XML Entity Names\n * @see https://www.w3.org/TR/html4/sgml/entities.html W3C HTML4/SGML\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML Wikipedia (HTML)\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Entities_representing_special_characters_in_XHTML Wikpedia (XHTML)\n */\nexports.HTML_ENTITIES = freeze({\n       lt: '<',\n       gt: '>',\n       amp: '&',\n       quot: '\"',\n       apos: \"'\",\n       Agrave: \"\u00C0\",\n       Aacute: \"\u00C1\",\n       Acirc: \"\u00C2\",\n       Atilde: \"\u00C3\",\n       Auml: \"\u00C4\",\n       Aring: \"\u00C5\",\n       AElig: \"\u00C6\",\n       Ccedil: \"\u00C7\",\n       Egrave: \"\u00C8\",\n       Eacute: \"\u00C9\",\n       Ecirc: \"\u00CA\",\n       Euml: \"\u00CB\",\n       Igrave: \"\u00CC\",\n       Iacute: \"\u00CD\",\n       Icirc: \"\u00CE\",\n       Iuml: \"\u00CF\",\n       ETH: \"\u00D0\",\n       Ntilde: \"\u00D1\",\n       Ograve: \"\u00D2\",\n       Oacute: \"\u00D3\",\n       Ocirc: \"\u00D4\",\n       Otilde: \"\u00D5\",\n       Ouml: \"\u00D6\",\n       Oslash: \"\u00D8\",\n       Ugrave: \"\u00D9\",\n       Uacute: \"\u00DA\",\n       Ucirc: \"\u00DB\",\n       Uuml: \"\u00DC\",\n       Yacute: \"\u00DD\",\n       THORN: \"\u00DE\",\n       szlig: \"\u00DF\",\n       agrave: \"\u00E0\",\n       aacute: \"\u00E1\",\n       acirc: \"\u00E2\",\n       atilde: \"\u00E3\",\n       auml: \"\u00E4\",\n       aring: \"\u00E5\",\n       aelig: \"\u00E6\",\n       ccedil: \"\u00E7\",\n       egrave: \"\u00E8\",\n       eacute: \"\u00E9\",\n       ecirc: \"\u00EA\",\n       euml: \"\u00EB\",\n       igrave: \"\u00EC\",\n       iacute: \"\u00ED\",\n       icirc: \"\u00EE\",\n       iuml: \"\u00EF\",\n       eth: \"\u00F0\",\n       ntilde: \"\u00F1\",\n       ograve: \"\u00F2\",\n       oacute: \"\u00F3\",\n       ocirc: \"\u00F4\",\n       otilde: \"\u00F5\",\n       ouml: \"\u00F6\",\n       oslash: \"\u00F8\",\n       ugrave: \"\u00F9\",\n       uacute: \"\u00FA\",\n       ucirc: \"\u00FB\",\n       uuml: \"\u00FC\",\n       yacute: \"\u00FD\",\n       thorn: \"\u00FE\",\n       yuml: \"\u00FF\",\n       nbsp: \"\\u00a0\",\n       iexcl: \"\u00A1\",\n       cent: \"\u00A2\",\n       pound: \"\u00A3\",\n       curren: \"\u00A4\",\n       yen: \"\u00A5\",\n       brvbar: \"\u00A6\",\n       sect: \"\u00A7\",\n       uml: \"\u00A8\",\n       copy: \"\u00A9\",\n       ordf: \"\u00AA\",\n       laquo: \"\u00AB\",\n       not: \"\u00AC\",\n       shy: \"\u00AD\u00AD\",\n       reg: \"\u00AE\",\n       macr: \"\u00AF\",\n       deg: \"\u00B0\",\n       plusmn: \"\u00B1\",\n       sup2: \"\u00B2\",\n       sup3: \"\u00B3\",\n       acute: \"\u00B4\",\n       micro: \"\u00B5\",\n       para: \"\u00B6\",\n       middot: \"\u00B7\",\n       cedil: \"\u00B8\",\n       sup1: \"\u00B9\",\n       ordm: \"\u00BA\",\n       raquo: \"\u00BB\",\n       frac14: \"\u00BC\",\n       frac12: \"\u00BD\",\n       frac34: \"\u00BE\",\n       iquest: \"\u00BF\",\n       times: \"\u00D7\",\n       divide: \"\u00F7\",\n       forall: \"\u2200\",\n       part: \"\u2202\",\n       exist: \"\u2203\",\n       empty: \"\u2205\",\n       nabla: \"\u2207\",\n       isin: \"\u2208\",\n       notin: \"\u2209\",\n       ni: \"\u220B\",\n       prod: \"\u220F\",\n       sum: \"\u2211\",\n       minus: \"\u2212\",\n       lowast: \"\u2217\",\n       radic: \"\u221A\",\n       prop: \"\u221D\",\n       infin: \"\u221E\",\n       ang: \"\u2220\",\n       and: \"\u2227\",\n       or: \"\u2228\",\n       cap: \"\u2229\",\n       cup: \"\u222A\",\n       'int': \"\u222B\",\n       there4: \"\u2234\",\n       sim: \"\u223C\",\n       cong: \"\u2245\",\n       asymp: \"\u2248\",\n       ne: \"\u2260\",\n       equiv: \"\u2261\",\n       le: \"\u2264\",\n       ge: \"\u2265\",\n       sub: \"\u2282\",\n       sup: \"\u2283\",\n       nsub: \"\u2284\",\n       sube: \"\u2286\",\n       supe: \"\u2287\",\n       oplus: \"\u2295\",\n       otimes: \"\u2297\",\n       perp: \"\u22A5\",\n       sdot: \"\u22C5\",\n       Alpha: \"\u0391\",\n       Beta: \"\u0392\",\n       Gamma: \"\u0393\",\n       Delta: \"\u0394\",\n       Epsilon: \"\u0395\",\n       Zeta: \"\u0396\",\n       Eta: \"\u0397\",\n       Theta: \"\u0398\",\n       Iota: \"\u0399\",\n       Kappa: \"\u039A\",\n       Lambda: \"\u039B\",\n       Mu: \"\u039C\",\n       Nu: \"\u039D\",\n       Xi: \"\u039E\",\n       Omicron: \"\u039F\",\n       Pi: \"\u03A0\",\n       Rho: \"\u03A1\",\n       Sigma: \"\u03A3\",\n       Tau: \"\u03A4\",\n       Upsilon: \"\u03A5\",\n       Phi: \"\u03A6\",\n       Chi: \"\u03A7\",\n       Psi: \"\u03A8\",\n       Omega: \"\u03A9\",\n       alpha: \"\u03B1\",\n       beta: \"\u03B2\",\n       gamma: \"\u03B3\",\n       delta: \"\u03B4\",\n       epsilon: \"\u03B5\",\n       zeta: \"\u03B6\",\n       eta: \"\u03B7\",\n       theta: \"\u03B8\",\n       iota: \"\u03B9\",\n       kappa: \"\u03BA\",\n       lambda: \"\u03BB\",\n       mu: \"\u03BC\",\n       nu: \"\u03BD\",\n       xi: \"\u03BE\",\n       omicron: \"\u03BF\",\n       pi: \"\u03C0\",\n       rho: \"\u03C1\",\n       sigmaf: \"\u03C2\",\n       sigma: \"\u03C3\",\n       tau: \"\u03C4\",\n       upsilon: \"\u03C5\",\n       phi: \"\u03C6\",\n       chi: \"\u03C7\",\n       psi: \"\u03C8\",\n       omega: \"\u03C9\",\n       thetasym: \"\u03D1\",\n       upsih: \"\u03D2\",\n       piv: \"\u03D6\",\n       OElig: \"\u0152\",\n       oelig: \"\u0153\",\n       Scaron: \"\u0160\",\n       scaron: \"\u0161\",\n       Yuml: \"\u0178\",\n       fnof: \"\u0192\",\n       circ: \"\u02C6\",\n       tilde: \"\u02DC\",\n       ensp: \"\u2002\",\n       emsp: \"\u2003\",\n       thinsp: \"\u2009\",\n       zwnj: \"\u200C\",\n       zwj: \"\u200D\",\n       lrm: \"\u200E\",\n       rlm: \"\u200F\",\n       ndash: \"\u2013\",\n       mdash: \"\u2014\",\n       lsquo: \"\u2018\",\n       rsquo: \"\u2019\",\n       sbquo: \"\u201A\",\n       ldquo: \"\u201C\",\n       rdquo: \"\u201D\",\n       bdquo: \"\u201E\",\n       dagger: \"\u2020\",\n       Dagger: \"\u2021\",\n       bull: \"\u2022\",\n       hellip: \"\u2026\",\n       permil: \"\u2030\",\n       prime: \"\u2032\",\n       Prime: \"\u2033\",\n       lsaquo: \"\u2039\",\n       rsaquo: \"\u203A\",\n       oline: \"\u203E\",\n       euro: \"\u20AC\",\n       trade: \"\u2122\",\n       larr: \"\u2190\",\n       uarr: \"\u2191\",\n       rarr: \"\u2192\",\n       darr: \"\u2193\",\n       harr: \"\u2194\",\n       crarr: \"\u21B5\",\n       lceil: \"\u2308\",\n       rceil: \"\u2309\",\n       lfloor: \"\u230A\",\n       rfloor: \"\u230B\",\n       loz: \"\u25CA\",\n       spades: \"\u2660\",\n       clubs: \"\u2663\",\n       hearts: \"\u2665\",\n       diams: \"\u2666\"\n});\n\n/**\n * @deprecated use `HTML_ENTITIES` instead\n * @see HTML_ENTITIES\n */\nexports.entityMap = exports.HTML_ENTITIES\n", "var NAMESPACE = require(\"./conventions\").NAMESPACE;\n\n//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]///\\u10000-\\uEFFFF\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\nvar S_TAG = 0;//tag name offerring\nvar S_ATTR = 1;//attr name offerring \nvar S_ATTR_SPACE=2;//attr name end and space offer\nvar S_EQ = 3;//=space?\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\nvar S_TAG_CLOSE = 7;//closed el<el />\n\n/**\n * Creates an error that will not be caught by XMLReader aka the SAX parser.\n *\n * @param {string} message\n * @param {any?} locator Optional, can provide details about the location in the source\n * @constructor\n */\nfunction ParseError(message, locator) {\n\tthis.message = message\n\tthis.locator = locator\n\tif(Error.captureStackTrace) Error.captureStackTrace(this, ParseError);\n}\nParseError.prototype = new Error();\nParseError.prototype.name = ParseError.name\n\nfunction XMLReader(){\n\t\n}\n\nXMLReader.prototype = {\n\tparse:function(source,defaultNSMap,entityMap){\n\t\tvar domBuilder = this.domBuilder;\n\t\tdomBuilder.startDocument();\n\t\t_copy(defaultNSMap ,defaultNSMap = {})\n\t\tparse(source,defaultNSMap,entityMap,\n\t\t\t\tdomBuilder,this.errorHandler);\n\t\tdomBuilder.endDocument();\n\t}\n}\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\n\tfunction fixedFromCharCode(code) {\n\t\t// String.prototype.fromCharCode does not supports\n\t\t// > 2 bytes unicode chars directly\n\t\tif (code > 0xffff) {\n\t\t\tcode -= 0x10000;\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\n\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\n\t\t} else {\n\t\t\treturn String.fromCharCode(code);\n\t\t}\n\t}\n\tfunction entityReplacer(a){\n\t\tvar k = a.slice(1,-1);\n\t\tif(k in entityMap){\n\t\t\treturn entityMap[k]; \n\t\t}else if(k.charAt(0) === '#'){\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\n\t\t}else{\n\t\t\terrorHandler.error('entity not found:'+a);\n\t\t\treturn a;\n\t\t}\n\t}\n\tfunction appendText(end){//has some bugs\n\t\tif(end>start){\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\tlocator&&position(start);\n\t\t\tdomBuilder.characters(xt,0,end-start);\n\t\t\tstart = end\n\t\t}\n\t}\n\tfunction position(p,m){\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\n\t\t\tlineStart = m.index;\n\t\t\tlineEnd = lineStart + m[0].length;\n\t\t\tlocator.lineNumber++;\n\t\t\t//console.log('line++:',locator,startPos,endPos)\n\t\t}\n\t\tlocator.columnNumber = p-lineStart+1;\n\t}\n\tvar lineStart = 0;\n\tvar lineEnd = 0;\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g\n\tvar locator = domBuilder.locator;\n\t\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}]\n\tvar closeMap = {};\n\tvar start = 0;\n\twhile(true){\n\t\ttry{\n\t\t\tvar tagStart = source.indexOf('<',start);\n\t\t\tif(tagStart<0){\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\n\t\t\t\t\tvar doc = domBuilder.doc;\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\n\t    \t\t\tdoc.appendChild(text);\n\t    \t\t\tdomBuilder.currentElement = text;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(tagStart>start){\n\t\t\t\tappendText(tagStart);\n\t\t\t}\n\t\t\tswitch(source.charAt(tagStart+1)){\n\t\t\tcase '/':\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\n\t\t\t\tvar tagName = source.substring(tagStart + 2, end).replace(/[ \\t\\n\\r]+$/g, '');\n\t\t\t\tvar config = parseStack.pop();\n\t\t\t\tif(end<0){\n\t\t\t\t\t\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\n\t        \t\tend = tagStart+1+tagName.length;\n\t        \t}else if(tagName.match(/\\s</)){\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\n\t        \t\tend = tagStart+1+tagName.length;\n\t\t\t\t}\n\t\t\t\tvar localNSMap = config.localNSMap;\n\t\t\t\tvar endMatch = config.tagName == tagName;\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase()\n\t\t        if(endIgnoreCaseMach){\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\n\t\t\t\t\tif(localNSMap){\n\t\t\t\t\t\tfor(var prefix in localNSMap){\n\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix) ;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!endMatch){\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName ); // No known test case\n\t\t\t\t\t}\n\t\t        }else{\n\t\t        \tparseStack.push(config)\n\t\t        }\n\t\t\t\t\n\t\t\t\tend++;\n\t\t\t\tbreak;\n\t\t\t\t// end elment\n\t\t\tcase '?':// <?...?>\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\n\t\t\t\tbreak;\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tvar el = new ElementAttributes();\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\t\t\t\t//elStartEnd\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\n\t\t\t\tvar len = el.length;\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\n\t\t\t\t\tel.closed = true;\n\t\t\t\t\tif(!entityMap.nbsp){\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(locator && len){\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\n\t\t\t\t\t//try{//attribute position fixed\n\t\t\t\t\tfor(var i = 0;i<len;i++){\n\t\t\t\t\t\tvar a = el[i];\n\t\t\t\t\t\tposition(a.offset);\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator2\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator;\n\t\t\t\t}else{\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (NAMESPACE.isHTML(el.uri) && !el.closed) {\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)\n\t\t\t\t} else {\n\t\t\t\t\tend++;\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(e){\n\t\t\tif (e instanceof ParseError) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\terrorHandler.error('element parse error: '+e)\n\t\t\tend = -1;\n\t\t}\n\t\tif(end>start){\n\t\t\tstart = end;\n\t\t}else{\n\t\t\t//TODO: \u8FD9\u91CC\u6709\u53EF\u80FDsax\u56DE\u9000\uFF0C\u6709\u4F4D\u7F6E\u9519\u8BEF\u98CE\u9669\n\t\t\tappendText(Math.max(tagStart,start)+1);\n\t\t}\n\t}\n}\nfunction copyLocator(f,t){\n\tt.lineNumber = f.lineNumber;\n\tt.columnNumber = f.columnNumber;\n\treturn t;\n}\n\n/**\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\n */\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\n\n\t/**\n\t * @param {string} qname\n\t * @param {string} value\n\t * @param {number} startIndex\n\t */\n\tfunction addAttribute(qname, value, startIndex) {\n\t\tif (el.attributeNames.hasOwnProperty(qname)) {\n\t\t\terrorHandler.fatalError('Attribute ' + qname + ' redefined')\n\t\t}\n\t\tel.addValue(qname, value, startIndex)\n\t}\n\tvar attrName;\n\tvar value;\n\tvar p = ++start;\n\tvar s = S_TAG;//status\n\twhile(true){\n\t\tvar c = source.charAt(p);\n\t\tswitch(c){\n\t\tcase '=':\n\t\t\tif(s === S_ATTR){//attrName\n\t\t\t\tattrName = source.slice(start,p);\n\t\t\t\ts = S_EQ;\n\t\t\t}else if(s === S_ATTR_SPACE){\n\t\t\t\ts = S_EQ;\n\t\t\t}else{\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\n\t\t\t\tthrow new Error('attribute equal must after attrName'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '\\'':\n\t\tcase '\"':\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\n\t\t\t\t){//equal\n\t\t\t\tif(s === S_ATTR){\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"')\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t}\n\t\t\t\tstart = p+1;\n\t\t\t\tp = source.indexOf(c,start)\n\t\t\t\tif(p>0){\n\t\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\t\taddAttribute(attrName, value, start-1);\n\t\t\t\t\ts = S_ATTR_END;\n\t\t\t\t}else{\n\t\t\t\t\t//fatalError: no end quot match\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\n\t\t\t\t}\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\t//console.log(attrName,value,start,p)\n\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\t//console.dir(el)\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\n\t\t\t\tstart = p+1;\n\t\t\t\ts = S_ATTR_END\n\t\t\t}else{\n\t\t\t\t//fatalError: no equal before\n\t\t\t\tthrow new Error('attribute value must after \"=\"'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '/':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\ts =S_TAG_CLOSE;\n\t\t\t\tel.closed = true;\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\tcase S_ATTR:\n\t\t\tcase S_ATTR_SPACE:\n\t\t\t\tbreak;\n\t\t\t//case S_EQ:\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\") // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase ''://end document\n\t\t\terrorHandler.error('unexpected end of input');\n\t\t\tif(s == S_TAG){\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\t}\n\t\t\treturn p;\n\t\tcase '>':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\tbreak;//normal\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\n\t\t\tcase S_ATTR:\n\t\t\t\tvalue = source.slice(start,p);\n\t\t\t\tif(value.slice(-1) === '/'){\n\t\t\t\t\tel.closed  = true;\n\t\t\t\t\tvalue = value.slice(0,-1)\n\t\t\t\t}\n\t\t\tcase S_ATTR_SPACE:\n\t\t\t\tif(s === S_ATTR_SPACE){\n\t\t\t\t\tvalue = attrName;\n\t\t\t\t}\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!');\n\t\t\t\t\taddAttribute(attrName, value.replace(/&#?\\w+;/g,entityReplacer), start)\n\t\t\t\t}else{\n\t\t\t\t\tif(!NAMESPACE.isHTML(currentNSMap['']) || !value.match(/^(?:disabled|checked|selected)$/i)){\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(value, value, start)\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase S_EQ:\n\t\t\t\tthrow new Error('attribute value missed!!');\n\t\t\t}\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\n\t\t\treturn p;\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\n\t\tcase '\\u0080':\n\t\t\tc = ' ';\n\t\tdefault:\n\t\t\tif(c<= ' '){//space\n\t\t\t\tswitch(s){\n\t\t\t\tcase S_TAG:\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR:\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t\ts = S_ATTR_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\t\t\tvar value = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\t//case S_TAG_SPACE:\n\t\t\t\t//case S_EQ:\n\t\t\t\t//case S_ATTR_SPACE:\n\t\t\t\t//\tvoid();break;\n\t\t\t\t//case S_TAG_CLOSE:\n\t\t\t\t\t//ignore warning\n\t\t\t\t}\n\t\t\t}else{//not space\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n\t\t\t\tswitch(s){\n\t\t\t\t//case S_TAG:void();break;\n\t\t\t\t//case S_ATTR:void();break;\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tvar tagName =  el.tagName;\n\t\t\t\t\tif (!NAMESPACE.isHTML(currentNSMap['']) || !attrName.match(/^(?:disabled|checked|selected)$/i)) {\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(attrName, attrName, start);\n\t\t\t\t\tstart = p;\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!')\n\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_EQ:\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\n\t\t\t\t}\n\t\t\t}\n\t\t}//end outer switch\n\t\t//console.log('p++',p)\n\t\tp++;\n\t}\n}\n/**\n * @return true if has new namespace define\n */\nfunction appendElement(el,domBuilder,currentNSMap){\n\tvar tagName = el.tagName;\n\tvar localNSMap = null;\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\tvar i = el.length;\n\twhile(i--){\n\t\tvar a = el[i];\n\t\tvar qName = a.qName;\n\t\tvar value = a.value;\n\t\tvar nsp = qName.indexOf(':');\n\t\tif(nsp>0){\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\n\t\t\tvar localName = qName.slice(nsp+1);\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName\n\t\t}else{\n\t\t\tlocalName = qName;\n\t\t\tprefix = null\n\t\t\tnsPrefix = qName === 'xmlns' && ''\n\t\t}\n\t\t//can not set prefix,because prefix !== ''\n\t\ta.localName = localName ;\n\t\t//prefix == null for no ns prefix attribute \n\t\tif(nsPrefix !== false){//hack!!\n\t\t\tif(localNSMap == null){\n\t\t\t\tlocalNSMap = {}\n\t\t\t\t//console.log(currentNSMap,0)\n\t\t\t\t_copy(currentNSMap,currentNSMap={})\n\t\t\t\t//console.log(currentNSMap,1)\n\t\t\t}\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n\t\t\ta.uri = NAMESPACE.XMLNS\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value) \n\t\t}\n\t}\n\tvar i = el.length;\n\twhile(i--){\n\t\ta = el[i];\n\t\tvar prefix = a.prefix;\n\t\tif(prefix){//no prefix attribute has no namespace\n\t\t\tif(prefix === 'xml'){\n\t\t\t\ta.uri = NAMESPACE.XML;\n\t\t\t}if(prefix !== 'xmlns'){\n\t\t\t\ta.uri = currentNSMap[prefix || '']\n\t\t\t\t\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\n\t\t\t}\n\t\t}\n\t}\n\tvar nsp = tagName.indexOf(':');\n\tif(nsp>0){\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\n\t}else{\n\t\tprefix = null;//important!!\n\t\tlocalName = el.localName = tagName;\n\t}\n\t//no prefix element has default namespace\n\tvar ns = el.uri = currentNSMap[prefix || ''];\n\tdomBuilder.startElement(ns,localName,tagName,el);\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\n\t//localNSMap = null\n\tif(el.closed){\n\t\tdomBuilder.endElement(ns,localName,tagName);\n\t\tif(localNSMap){\n\t\t\tfor(prefix in localNSMap){\n\t\t\t\tdomBuilder.endPrefixMapping(prefix) \n\t\t\t}\n\t\t}\n\t}else{\n\t\tel.currentNSMap = currentNSMap;\n\t\tel.localNSMap = localNSMap;\n\t\t//parseStack.push(el);\n\t\treturn true;\n\t}\n}\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\n\tif(/^(?:script|textarea)$/i.test(tagName)){\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\n\t\tif(/[&<]/.test(text)){\n\t\t\tif(/^script$/i.test(tagName)){\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\n\t\t\t\t\t//lexHandler.startCDATA();\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\t\t//lexHandler.endCDATA();\n\t\t\t\t\treturn elEndStart;\n\t\t\t\t//}\n\t\t\t}//}else{//text area\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\treturn elEndStart;\n\t\t\t//}\n\t\t\t\n\t\t}\n\t}\n\treturn elStartEnd+1;\n}\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\n\t//if(tagName in closeMap){\n\tvar pos = closeMap[tagName];\n\tif(pos == null){\n\t\t//console.log(tagName)\n\t\tpos =  source.lastIndexOf('</'+tagName+'>')\n\t\tif(pos<elStartEnd){//\u5FD8\u8BB0\u95ED\u5408\n\t\t\tpos = source.lastIndexOf('</'+tagName)\n\t\t}\n\t\tcloseMap[tagName] =pos\n\t}\n\treturn pos<elStartEnd;\n\t//} \n}\nfunction _copy(source,target){\n\tfor(var n in source){target[n] = source[n]}\n}\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\n\tvar next= source.charAt(start+2)\n\tswitch(next){\n\tcase '-':\n\t\tif(source.charAt(start + 3) === '-'){\n\t\t\tvar end = source.indexOf('-->',start+4);\n\t\t\t//append comment source.substring(4,end)//<!--\n\t\t\tif(end>start){\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\n\t\t\t\treturn end+3;\n\t\t\t}else{\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}else{\n\t\t\t//error\n\t\t\treturn -1;\n\t\t}\n\tdefault:\n\t\tif(source.substr(start+3,6) == 'CDATA['){\n\t\t\tvar end = source.indexOf(']]>',start+9);\n\t\t\tdomBuilder.startCDATA();\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\n\t\t\tdomBuilder.endCDATA() \n\t\t\treturn end+3;\n\t\t}\n\t\t//<!DOCTYPE\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId) \n\t\tvar matchs = split(source,start);\n\t\tvar len = matchs.length;\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\n\t\t\tvar name = matchs[1][0];\n\t\t\tvar pubid = false;\n\t\t\tvar sysid = false;\n\t\t\tif(len>3){\n\t\t\t\tif(/^public$/i.test(matchs[2][0])){\n\t\t\t\t\tpubid = matchs[3][0];\n\t\t\t\t\tsysid = len>4 && matchs[4][0];\n\t\t\t\t}else if(/^system$/i.test(matchs[2][0])){\n\t\t\t\t\tsysid = matchs[3][0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar lastMatch = matchs[len-1]\n\t\t\tdomBuilder.startDTD(name, pubid, sysid);\n\t\t\tdomBuilder.endDTD();\n\t\t\t\n\t\t\treturn lastMatch.index+lastMatch[0].length\n\t\t}\n\t}\n\treturn -1;\n}\n\n\n\nfunction parseInstruction(source,start,domBuilder){\n\tvar end = source.indexOf('?>',start);\n\tif(end){\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\n\t\tif(match){\n\t\t\tvar len = match[0].length;\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\n\t\t\treturn end+2;\n\t\t}else{//error\n\t\t\treturn -1;\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction ElementAttributes(){\n\tthis.attributeNames = {}\n}\nElementAttributes.prototype = {\n\tsetTagName:function(tagName){\n\t\tif(!tagNamePattern.test(tagName)){\n\t\t\tthrow new Error('invalid tagName:'+tagName)\n\t\t}\n\t\tthis.tagName = tagName\n\t},\n\taddValue:function(qName, value, offset) {\n\t\tif(!tagNamePattern.test(qName)){\n\t\t\tthrow new Error('invalid attribute:'+qName)\n\t\t}\n\t\tthis.attributeNames[qName] = this.length;\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset}\n\t},\n\tlength:0,\n\tgetLocalName:function(i){return this[i].localName},\n\tgetLocator:function(i){return this[i].locator},\n\tgetQName:function(i){return this[i].qName},\n\tgetURI:function(i){return this[i].uri},\n\tgetValue:function(i){return this[i].value}\n//\t,getIndex:function(uri, localName)){\n//\t\tif(localName){\n//\t\t\t\n//\t\t}else{\n//\t\t\tvar qName = uri\n//\t\t}\n//\t},\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n//\tgetType:function(uri,localName){}\n//\tgetType:function(i){},\n}\n\n\n\nfunction split(source,start){\n\tvar match;\n\tvar buf = [];\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\n\treg.lastIndex = start;\n\treg.exec(source);//skip <\n\twhile(match = reg.exec(source)){\n\t\tbuf.push(match);\n\t\tif(match[1])return buf;\n\t}\n}\n\nexports.XMLReader = XMLReader;\nexports.ParseError = ParseError;\n", "var conventions = require(\"./conventions\");\nvar dom = require('./dom')\nvar entities = require('./entities');\nvar sax = require('./sax');\n\nvar DOMImplementation = dom.DOMImplementation;\n\nvar NAMESPACE = conventions.NAMESPACE;\n\nvar ParseError = sax.ParseError;\nvar XMLReader = sax.XMLReader;\n\nfunction DOMParser(options){\n\tthis.options = options ||{locator:{}};\n}\n\nDOMParser.prototype.parseFromString = function(source,mimeType){\n\tvar options = this.options;\n\tvar sax =  new XMLReader();\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\n\tvar errorHandler = options.errorHandler;\n\tvar locator = options.locator;\n\tvar defaultNSMap = options.xmlns||{};\n\tvar isHTML = /\\/x?html?$/.test(mimeType);//mimeType.toLowerCase().indexOf('html') > -1;\n  \tvar entityMap = isHTML ? entities.HTML_ENTITIES : entities.XML_ENTITIES;\n\tif(locator){\n\t\tdomBuilder.setDocumentLocator(locator)\n\t}\n\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\n\tsax.domBuilder = options.domBuilder || domBuilder;\n\tif(isHTML){\n\t\tdefaultNSMap[''] = NAMESPACE.HTML;\n\t}\n\tdefaultNSMap.xml = defaultNSMap.xml || NAMESPACE.XML;\n\tif(source && typeof source === 'string'){\n\t\tsax.parse(source,defaultNSMap,entityMap);\n\t}else{\n\t\tsax.errorHandler.error(\"invalid doc source\");\n\t}\n\treturn domBuilder.doc;\n}\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\n\tif(!errorImpl){\n\t\tif(domBuilder instanceof DOMHandler){\n\t\t\treturn domBuilder;\n\t\t}\n\t\terrorImpl = domBuilder ;\n\t}\n\tvar errorHandler = {}\n\tvar isCallback = errorImpl instanceof Function;\n\tlocator = locator||{}\n\tfunction build(key){\n\t\tvar fn = errorImpl[key];\n\t\tif(!fn && isCallback){\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\n\t\t}\n\t\terrorHandler[key] = fn && function(msg){\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\n\t\t}||function(){};\n\t}\n\tbuild('warning');\n\tbuild('error');\n\tbuild('fatalError');\n\treturn errorHandler;\n}\n\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\n/**\n * +ContentHandler+ErrorHandler\n * +LexicalHandler+EntityResolver2\n * -DeclHandler-DTDHandler\n *\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\n */\nfunction DOMHandler() {\n    this.cdata = false;\n}\nfunction position(locator,node){\n\tnode.lineNumber = locator.lineNumber;\n\tnode.columnNumber = locator.columnNumber;\n}\n/**\n * @see org.xml.sax.ContentHandler#startDocument\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\n */\nDOMHandler.prototype = {\n\tstartDocument : function() {\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\n    \tif (this.locator) {\n        \tthis.doc.documentURI = this.locator.systemId;\n    \t}\n\t},\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\n\t\tvar doc = this.doc;\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\n\t    var len = attrs.length;\n\t    appendElement(this, el);\n\t    this.currentElement = el;\n\n\t\tthis.locator && position(this.locator,el)\n\t    for (var i = 0 ; i < len; i++) {\n\t        var namespaceURI = attrs.getURI(i);\n\t        var value = attrs.getValue(i);\n\t        var qName = attrs.getQName(i);\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\n\t\t\tthis.locator &&position(attrs.getLocator(i),attr);\n\t\t\tattr.value = attr.nodeValue = value;\n\t\t\tel.setAttributeNode(attr)\n\t    }\n\t},\n\tendElement:function(namespaceURI, localName, qName) {\n\t\tvar current = this.currentElement\n\t\tvar tagName = current.tagName;\n\t\tthis.currentElement = current.parentNode;\n\t},\n\tstartPrefixMapping:function(prefix, uri) {\n\t},\n\tendPrefixMapping:function(prefix) {\n\t},\n\tprocessingInstruction:function(target, data) {\n\t    var ins = this.doc.createProcessingInstruction(target, data);\n\t    this.locator && position(this.locator,ins)\n\t    appendElement(this, ins);\n\t},\n\tignorableWhitespace:function(ch, start, length) {\n\t},\n\tcharacters:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t\t//console.log(chars)\n\t\tif(chars){\n\t\t\tif (this.cdata) {\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\n\t\t\t} else {\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\n\t\t\t}\n\t\t\tif(this.currentElement){\n\t\t\t\tthis.currentElement.appendChild(charNode);\n\t\t\t}else if(/^\\s*$/.test(chars)){\n\t\t\t\tthis.doc.appendChild(charNode);\n\t\t\t\t//process xml\n\t\t\t}\n\t\t\tthis.locator && position(this.locator,charNode)\n\t\t}\n\t},\n\tskippedEntity:function(name) {\n\t},\n\tendDocument:function() {\n\t\tthis.doc.normalize();\n\t},\n\tsetDocumentLocator:function (locator) {\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\n\t    \tlocator.lineNumber = 0;\n\t    }\n\t},\n\t//LexicalHandler\n\tcomment:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t    var comm = this.doc.createComment(chars);\n\t    this.locator && position(this.locator,comm)\n\t    appendElement(this, comm);\n\t},\n\n\tstartCDATA:function() {\n\t    //used in characters() methods\n\t    this.cdata = true;\n\t},\n\tendCDATA:function() {\n\t    this.cdata = false;\n\t},\n\n\tstartDTD:function(name, publicId, systemId) {\n\t\tvar impl = this.doc.implementation;\n\t    if (impl && impl.createDocumentType) {\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\n\t        this.locator && position(this.locator,dt)\n\t        appendElement(this, dt);\n\t\t\t\t\tthis.doc.doctype = dt;\n\t    }\n\t},\n\t/**\n\t * @see org.xml.sax.ErrorHandler\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\n\t */\n\twarning:function(error) {\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\n\t},\n\terror:function(error) {\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\n\t},\n\tfatalError:function(error) {\n\t\tthrow new ParseError(error, this.locator);\n\t}\n}\nfunction _locator(l){\n\tif(l){\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\n\t}\n}\nfunction _toString(chars,start,length){\n\tif(typeof chars == 'string'){\n\t\treturn chars.substr(start,length)\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\n\t\tif(chars.length >= start+length || start){\n\t\t\treturn new java.lang.String(chars,start,length)+'';\n\t\t}\n\t\treturn chars;\n\t}\n}\n\n/*\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\n * used method of org.xml.sax.ext.LexicalHandler:\n *  #comment(chars, start, length)\n *  #startCDATA()\n *  #endCDATA()\n *  #startDTD(name, publicId, systemId)\n *\n *\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\n *  #endDTD()\n *  #startEntity(name)\n *  #endEntity(name)\n *\n *\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\n * IGNORED method of org.xml.sax.ext.DeclHandler\n * \t#attributeDecl(eName, aName, type, mode, value)\n *  #elementDecl(name, model)\n *  #externalEntityDecl(name, publicId, systemId)\n *  #internalEntityDecl(name, value)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\n * IGNORED method of org.xml.sax.EntityResolver2\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\n *  #resolveEntity(publicId, systemId)\n *  #getExternalSubset(name, baseURI)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\n * IGNORED method of org.xml.sax.DTDHandler\n *  #notationDecl(name, publicId, systemId) {};\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\n */\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\n\tDOMHandler.prototype[key] = function(){return null}\n})\n\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\nfunction appendElement (hander,node) {\n    if (!hander.currentElement) {\n        hander.doc.appendChild(node);\n    } else {\n        hander.currentElement.appendChild(node);\n    }\n}//appendChild and setAttributeNS are preformance key\n\nexports.__DOMHandler = DOMHandler;\nexports.DOMParser = DOMParser;\n\n/**\n * @deprecated Import/require from main entry point instead\n */\nexports.DOMImplementation = dom.DOMImplementation;\n\n/**\n * @deprecated Import/require from main entry point instead\n */\nexports.XMLSerializer = dom.XMLSerializer;\n", "var dom = require('./dom')\nexports.DOMImplementation = dom.DOMImplementation\nexports.XMLSerializer = dom.XMLSerializer\nexports.DOMParser = require('./dom-parser').DOMParser\n", "module.exports = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n", "if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n", "try {\n  var util = require('util');\n  /* istanbul ignore next */\n  if (typeof util.inherits !== 'function') throw '';\n  module.exports = util.inherits;\n} catch (e) {\n  /* istanbul ignore next */\n  module.exports = require('./inherits_browser.js');\n}\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar Buffer = require('buffer').Buffer;\n\nvar isBufferEncoding = Buffer.isEncoding\n  || function(encoding) {\n       switch (encoding && encoding.toLowerCase()) {\n         case 'hex': case 'utf8': case 'utf-8': case 'ascii': case 'binary': case 'base64': case 'ucs2': case 'ucs-2': case 'utf16le': case 'utf-16le': case 'raw': return true;\n         default: return false;\n       }\n     }\n\n\nfunction assertEncoding(encoding) {\n  if (encoding && !isBufferEncoding(encoding)) {\n    throw new Error('Unknown encoding: ' + encoding);\n  }\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters. CESU-8 is handled as part of the UTF-8 encoding.\n//\n// @TODO Handling all encodings inside a single object makes it very difficult\n// to reason about this code, so it should be split up in the future.\n// @TODO There should be a utf8-strict encoding that rejects invalid UTF-8 code\n// points as used by CESU-8.\nvar StringDecoder = exports.StringDecoder = function(encoding) {\n  this.encoding = (encoding || 'utf8').toLowerCase().replace(/[-_]/, '');\n  assertEncoding(encoding);\n  switch (this.encoding) {\n    case 'utf8':\n      // CESU-8 represents each of Surrogate Pair by 3-bytes\n      this.surrogateSize = 3;\n      break;\n    case 'ucs2':\n    case 'utf16le':\n      // UTF-16 represents each of Surrogate Pair by 2-bytes\n      this.surrogateSize = 2;\n      this.detectIncompleteChar = utf16DetectIncompleteChar;\n      break;\n    case 'base64':\n      // Base-64 stores 3 bytes in 4 chars, and pads the remainder.\n      this.surrogateSize = 3;\n      this.detectIncompleteChar = base64DetectIncompleteChar;\n      break;\n    default:\n      this.write = passThroughWrite;\n      return;\n  }\n\n  // Enough space to store all bytes of a single character. UTF-8 needs 4\n  // bytes, but CESU-8 may require up to 6 (3 bytes per surrogate).\n  this.charBuffer = new Buffer(6);\n  // Number of bytes received for the current incomplete multi-byte character.\n  this.charReceived = 0;\n  // Number of bytes expected for the current incomplete multi-byte character.\n  this.charLength = 0;\n};\n\n\n// write decodes the given buffer and returns it as JS string that is\n// guaranteed to not contain any partial multi-byte characters. Any partial\n// character found at the end of the buffer is buffered up, and will be\n// returned when calling write again with the remaining bytes.\n//\n// Note: Converting a Buffer containing an orphan surrogate to a String\n// currently works, but converting a String to a Buffer (via `new Buffer`, or\n// Buffer#write) will replace incomplete surrogates with the unicode\n// replacement character. See https://codereview.chromium.org/121173009/ .\nStringDecoder.prototype.write = function(buffer) {\n  var charStr = '';\n  // if our last write ended with an incomplete multibyte character\n  while (this.charLength) {\n    // determine how many remaining bytes this buffer has to offer for this char\n    var available = (buffer.length >= this.charLength - this.charReceived) ?\n        this.charLength - this.charReceived :\n        buffer.length;\n\n    // add the new bytes to the char buffer\n    buffer.copy(this.charBuffer, this.charReceived, 0, available);\n    this.charReceived += available;\n\n    if (this.charReceived < this.charLength) {\n      // still not enough chars in this buffer? wait for more ...\n      return '';\n    }\n\n    // remove bytes belonging to the current character from the buffer\n    buffer = buffer.slice(available, buffer.length);\n\n    // get the character that was split\n    charStr = this.charBuffer.slice(0, this.charLength).toString(this.encoding);\n\n    // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n    var charCode = charStr.charCodeAt(charStr.length - 1);\n    if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n      this.charLength += this.surrogateSize;\n      charStr = '';\n      continue;\n    }\n    this.charReceived = this.charLength = 0;\n\n    // if there are no more bytes in this buffer, just emit our char\n    if (buffer.length === 0) {\n      return charStr;\n    }\n    break;\n  }\n\n  // determine and set charLength / charReceived\n  this.detectIncompleteChar(buffer);\n\n  var end = buffer.length;\n  if (this.charLength) {\n    // buffer the incomplete character bytes we got\n    buffer.copy(this.charBuffer, 0, buffer.length - this.charReceived, end);\n    end -= this.charReceived;\n  }\n\n  charStr += buffer.toString(this.encoding, 0, end);\n\n  var end = charStr.length - 1;\n  var charCode = charStr.charCodeAt(end);\n  // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n  if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n    var size = this.surrogateSize;\n    this.charLength += size;\n    this.charReceived += size;\n    this.charBuffer.copy(this.charBuffer, size, 0, size);\n    buffer.copy(this.charBuffer, 0, 0, size);\n    return charStr.substring(0, end);\n  }\n\n  // or just emit the charStr\n  return charStr;\n};\n\n// detectIncompleteChar determines if there is an incomplete UTF-8 character at\n// the end of the given buffer. If so, it sets this.charLength to the byte\n// length that character, and sets this.charReceived to the number of bytes\n// that are available for this character.\nStringDecoder.prototype.detectIncompleteChar = function(buffer) {\n  // determine how many bytes we have to check at the end of this buffer\n  var i = (buffer.length >= 3) ? 3 : buffer.length;\n\n  // Figure out if one of the last i bytes of our buffer announces an\n  // incomplete char.\n  for (; i > 0; i--) {\n    var c = buffer[buffer.length - i];\n\n    // See http://en.wikipedia.org/wiki/UTF-8#Description\n\n    // 110XXXXX\n    if (i == 1 && c >> 5 == 0x06) {\n      this.charLength = 2;\n      break;\n    }\n\n    // 1110XXXX\n    if (i <= 2 && c >> 4 == 0x0E) {\n      this.charLength = 3;\n      break;\n    }\n\n    // 11110XXX\n    if (i <= 3 && c >> 3 == 0x1E) {\n      this.charLength = 4;\n      break;\n    }\n  }\n  this.charReceived = i;\n};\n\nStringDecoder.prototype.end = function(buffer) {\n  var res = '';\n  if (buffer && buffer.length)\n    res = this.write(buffer);\n\n  if (this.charReceived) {\n    var cr = this.charReceived;\n    var buf = this.charBuffer;\n    var enc = this.encoding;\n    res += buf.slice(0, cr).toString(enc);\n  }\n\n  return res;\n};\n\nfunction passThroughWrite(buffer) {\n  return buffer.toString(this.encoding);\n}\n\nfunction utf16DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 2;\n  this.charLength = this.charReceived ? 2 : 0;\n}\n\nfunction base64DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 3;\n  this.charLength = this.charReceived ? 3 : 0;\n}\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n\n/*<replacement>*/\nvar Buffer = require('buffer').Buffer;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\nvar EE = require('events').EventEmitter;\n\n/*<replacement>*/\nif (!EE.listenerCount) EE.listenerCount = function(emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\nvar Stream = require('stream');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nfunction ReadableState(options, stream) {\n  options = options || {};\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  this.highWaterMark = (hwm || hwm === 0) ? hwm : 16 * 1024;\n\n  // cast to ints.\n  this.highWaterMark = ~~this.highWaterMark;\n\n  this.buffer = [];\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = false;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // In streams that never have any data, and do push(null) right away,\n  // the consumer can miss the 'end' event if they do some I/O before\n  // consuming the stream.  So, we don't emit('end') until some reading\n  // happens.\n  this.calledRead = false;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, becuase any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // when piping, we only care about 'readable' events that happen\n  // after read()ing all the bytes and not getting any pushback.\n  this.ranOut = false;\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder)\n      StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  if (!(this instanceof Readable))\n    return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  Stream.call(this);\n}\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function(chunk, encoding) {\n  var state = this._readableState;\n\n  if (typeof chunk === 'string' && !state.objectMode) {\n    encoding = encoding || state.defaultEncoding;\n    if (encoding !== state.encoding) {\n      chunk = new Buffer(chunk, encoding);\n      encoding = '';\n    }\n  }\n\n  return readableAddChunk(this, state, chunk, encoding, false);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function(chunk) {\n  var state = this._readableState;\n  return readableAddChunk(this, state, chunk, '', true);\n};\n\nfunction readableAddChunk(stream, state, chunk, encoding, addToFront) {\n  var er = chunkInvalid(state, chunk);\n  if (er) {\n    stream.emit('error', er);\n  } else if (chunk === null || chunk === undefined) {\n    state.reading = false;\n    if (!state.ended)\n      onEofChunk(stream, state);\n  } else if (state.objectMode || chunk && chunk.length > 0) {\n    if (state.ended && !addToFront) {\n      var e = new Error('stream.push() after EOF');\n      stream.emit('error', e);\n    } else if (state.endEmitted && addToFront) {\n      var e = new Error('stream.unshift() after end event');\n      stream.emit('error', e);\n    } else {\n      if (state.decoder && !addToFront && !encoding)\n        chunk = state.decoder.write(chunk);\n\n      // update the buffer info.\n      state.length += state.objectMode ? 1 : chunk.length;\n      if (addToFront) {\n        state.buffer.unshift(chunk);\n      } else {\n        state.reading = false;\n        state.buffer.push(chunk);\n      }\n\n      if (state.needReadable)\n        emitReadable(stream);\n\n      maybeReadMore(stream, state);\n    }\n  } else if (!addToFront) {\n    state.reading = false;\n  }\n\n  return needMoreData(state);\n}\n\n\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended &&\n         (state.needReadable ||\n          state.length < state.highWaterMark ||\n          state.length === 0);\n}\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function(enc) {\n  if (!StringDecoder)\n    StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n};\n\n// Don't raise the hwm > 128MB\nvar MAX_HWM = 0x800000;\nfunction roundUpToNextPowerOf2(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2\n    n--;\n    for (var p = 1; p < 32; p <<= 1) n |= n >> p;\n    n++;\n  }\n  return n;\n}\n\nfunction howMuchToRead(n, state) {\n  if (state.length === 0 && state.ended)\n    return 0;\n\n  if (state.objectMode)\n    return n === 0 ? 0 : 1;\n\n  if (n === null || isNaN(n)) {\n    // only flow one buffer at a time\n    if (state.flowing && state.buffer.length)\n      return state.buffer[0].length;\n    else\n      return state.length;\n  }\n\n  if (n <= 0)\n    return 0;\n\n  // If we're asking for more than the target buffer level,\n  // then raise the water mark.  Bump up to the next highest\n  // power of 2, to prevent increasing it excessively in tiny\n  // amounts.\n  if (n > state.highWaterMark)\n    state.highWaterMark = roundUpToNextPowerOf2(n);\n\n  // don't have that much.  return null, unless we've ended.\n  if (n > state.length) {\n    if (!state.ended) {\n      state.needReadable = true;\n      return 0;\n    } else\n      return state.length;\n  }\n\n  return n;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function(n) {\n  var state = this._readableState;\n  state.calledRead = true;\n  var nOrig = n;\n  var ret;\n\n  if (typeof n !== 'number' || n > 0)\n    state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 &&\n      state.needReadable &&\n      (state.length >= state.highWaterMark || state.ended)) {\n    emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    ret = null;\n\n    // In cases where the decoder did not receive enough data\n    // to produce a full chunk, then immediately received an\n    // EOF, state.buffer will contain [<Buffer >, <Buffer 00 ...>].\n    // howMuchToRead will see this and coerce the amount to\n    // read to zero (because it's looking at the length of the\n    // first <Buffer > in state.buffer), and we'll end up here.\n    //\n    // This can only happen via state.decoder -- no other venue\n    // exists for pushing a zero-length chunk into state.buffer\n    // and triggering this behavior. In this case, we return our\n    // remaining data and end the stream, if appropriate.\n    if (state.length > 0 && state.decoder) {\n      ret = fromList(n, state);\n      state.length -= ret.length;\n    }\n\n    if (state.length === 0)\n      endReadable(this);\n\n    return ret;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length - n <= state.highWaterMark)\n    doRead = true;\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading)\n    doRead = false;\n\n  if (doRead) {\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0)\n      state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n  }\n\n  // If _read called its callback synchronously, then `reading`\n  // will be false, and we need to re-evaluate how much data we\n  // can return to the user.\n  if (doRead && !state.reading)\n    n = howMuchToRead(nOrig, state);\n\n  if (n > 0)\n    ret = fromList(n, state);\n  else\n    ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  }\n\n  state.length -= n;\n\n  // If we have nothing in the buffer, then we want to know\n  // as soon as we *do* get something into the buffer.\n  if (state.length === 0 && !state.ended)\n    state.needReadable = true;\n\n  // If we happened to read() exactly the remaining amount in the\n  // buffer, and the EOF has been seen at this point, then make sure\n  // that we emit 'end' on the very next tick.\n  if (state.ended && !state.endEmitted && state.length === 0)\n    endReadable(this);\n\n  return ret;\n};\n\nfunction chunkInvalid(state, chunk) {\n  var er = null;\n  if (!Buffer.isBuffer(chunk) &&\n      'string' !== typeof chunk &&\n      chunk !== null &&\n      chunk !== undefined &&\n      !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n\nfunction onEofChunk(stream, state) {\n  if (state.decoder && !state.ended) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // if we've ended and we have some data left, then emit\n  // 'readable' now to make sure it gets picked up.\n  if (state.length > 0)\n    emitReadable(stream);\n  else\n    endReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (state.emittedReadable)\n    return;\n\n  state.emittedReadable = true;\n  if (state.sync)\n    process.nextTick(function() {\n      emitReadable_(stream);\n    });\n  else\n    emitReadable_(stream);\n}\n\nfunction emitReadable_(stream) {\n  stream.emit('readable');\n}\n\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    process.nextTick(function() {\n      maybeReadMore_(stream, state);\n    });\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended &&\n         state.length < state.highWaterMark) {\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;\n    else\n      len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function(n) {\n  this.emit('error', new Error('not implemented'));\n};\n\nReadable.prototype.pipe = function(dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) &&\n              dest !== process.stdout &&\n              dest !== process.stderr;\n\n  var endFn = doEnd ? onend : cleanup;\n  if (state.endEmitted)\n    process.nextTick(endFn);\n  else\n    src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable) {\n    if (readable !== src) return;\n    cleanup();\n  }\n\n  function onend() {\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  function cleanup() {\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', cleanup);\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (!dest._writableState || dest._writableState.needDrain)\n      ondrain();\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EE.listenerCount(dest, 'error') === 0)\n      dest.emit('error', er);\n  }\n  // This is a brutally ugly hack to make sure that our error handler\n  // is attached before any userland ones.  NEVER DO THIS.\n  if (!dest._events || !dest._events.error)\n    dest.on('error', onerror);\n  else if (isArray(dest._events.error))\n    dest._events.error.unshift(onerror);\n  else\n    dest._events.error = [onerror, dest._events.error];\n\n\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    // the handler that waits for readable events after all\n    // the data gets sucked out in flow.\n    // This would be easier to follow with a .once() handler\n    // in flow(), but that is too slow.\n    this.on('readable', pipeOnReadable);\n\n    state.flowing = true;\n    process.nextTick(function() {\n      flow(src);\n    });\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function() {\n    var dest = this;\n    var state = src._readableState;\n    state.awaitDrain--;\n    if (state.awaitDrain === 0)\n      flow(src);\n  };\n}\n\nfunction flow(src) {\n  var state = src._readableState;\n  var chunk;\n  state.awaitDrain = 0;\n\n  function write(dest, i, list) {\n    var written = dest.write(chunk);\n    if (false === written) {\n      state.awaitDrain++;\n    }\n  }\n\n  while (state.pipesCount && null !== (chunk = src.read())) {\n\n    if (state.pipesCount === 1)\n      write(state.pipes, 0, null);\n    else\n      forEach(state.pipes, write);\n\n    src.emit('data', chunk);\n\n    // if anyone needs a drain, then we have to wait for that.\n    if (state.awaitDrain > 0)\n      return;\n  }\n\n  // if every destination was unpiped, either before entering this\n  // function, or in the while loop, then stop flowing.\n  //\n  // NB: This is a pretty rare edge case.\n  if (state.pipesCount === 0) {\n    state.flowing = false;\n\n    // if there were data event listeners added, then switch to old mode.\n    if (EE.listenerCount(src, 'data') > 0)\n      emitDataEvents(src);\n    return;\n  }\n\n  // at this point, no one needed a drain, so we just ran out of data\n  // on the next readable event, start it over again.\n  state.ranOut = true;\n}\n\nfunction pipeOnReadable() {\n  if (this._readableState.ranOut) {\n    this._readableState.ranOut = false;\n    flow(this);\n  }\n}\n\n\nReadable.prototype.unpipe = function(dest) {\n  var state = this._readableState;\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0)\n    return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes)\n      return this;\n\n    if (!dest)\n      dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    this.removeListener('readable', pipeOnReadable);\n    state.flowing = false;\n    if (dest)\n      dest.emit('unpipe', this);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    this.removeListener('readable', pipeOnReadable);\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++)\n      dests[i].emit('unpipe', this);\n    return this;\n  }\n\n  // try to find the right one.\n  var i = indexOf(state.pipes, dest);\n  if (i === -1)\n    return this;\n\n  state.pipes.splice(i, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1)\n    state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function(ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data' && !this._readableState.flowing)\n    emitDataEvents(this);\n\n  if (ev === 'readable' && this.readable) {\n    var state = this._readableState;\n    if (!state.readableListening) {\n      state.readableListening = true;\n      state.emittedReadable = false;\n      state.needReadable = true;\n      if (!state.reading) {\n        this.read(0);\n      } else if (state.length) {\n        emitReadable(this, state);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function() {\n  emitDataEvents(this);\n  this.read(0);\n  this.emit('resume');\n};\n\nReadable.prototype.pause = function() {\n  emitDataEvents(this, true);\n  this.emit('pause');\n};\n\nfunction emitDataEvents(stream, startPaused) {\n  var state = stream._readableState;\n\n  if (state.flowing) {\n    // https://github.com/isaacs/readable-stream/issues/16\n    throw new Error('Cannot switch to old mode now.');\n  }\n\n  var paused = startPaused || false;\n  var readable = false;\n\n  // convert to an old-style stream.\n  stream.readable = true;\n  stream.pipe = Stream.prototype.pipe;\n  stream.on = stream.addListener = Stream.prototype.on;\n\n  stream.on('readable', function() {\n    readable = true;\n\n    var c;\n    while (!paused && (null !== (c = stream.read())))\n      stream.emit('data', c);\n\n    if (c === null) {\n      readable = false;\n      stream._readableState.needReadable = true;\n    }\n  });\n\n  stream.pause = function() {\n    paused = true;\n    this.emit('pause');\n  };\n\n  stream.resume = function() {\n    paused = false;\n    if (readable)\n      process.nextTick(function() {\n        stream.emit('readable');\n      });\n    else\n      this.read(0);\n    this.emit('resume');\n  };\n\n  // now make it start, just in case it hadn't already.\n  stream.emit('readable');\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function(stream) {\n  var state = this._readableState;\n  var paused = false;\n\n  var self = this;\n  stream.on('end', function() {\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length)\n        self.push(chunk);\n    }\n\n    self.push(null);\n  });\n\n  stream.on('data', function(chunk) {\n    if (state.decoder)\n      chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    //if (state.objectMode && util.isNullOrUndefined(chunk))\n    if (state.objectMode && (chunk === null || chunk === undefined))\n      return;\n    else if (!state.objectMode && (!chunk || !chunk.length))\n      return;\n\n    var ret = self.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (typeof stream[i] === 'function' &&\n        typeof this[i] === 'undefined') {\n      this[i] = function(method) { return function() {\n        return stream[method].apply(stream, arguments);\n      }}(i);\n    }\n  }\n\n  // proxy certain important events.\n  var events = ['error', 'close', 'destroy', 'pause', 'resume'];\n  forEach(events, function(ev) {\n    stream.on(ev, self.emit.bind(self, ev));\n  });\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  self._read = function(n) {\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return self;\n};\n\n\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\nfunction fromList(n, state) {\n  var list = state.buffer;\n  var length = state.length;\n  var stringMode = !!state.decoder;\n  var objectMode = !!state.objectMode;\n  var ret;\n\n  // nothing in the list, definitely empty.\n  if (list.length === 0)\n    return null;\n\n  if (length === 0)\n    ret = null;\n  else if (objectMode)\n    ret = list.shift();\n  else if (!n || n >= length) {\n    // read it all, truncate the array.\n    if (stringMode)\n      ret = list.join('');\n    else\n      ret = Buffer.concat(list, length);\n    list.length = 0;\n  } else {\n    // read just some of it.\n    if (n < list[0].length) {\n      // just take a part of the first list item.\n      // slice is the same for buffers and strings.\n      var buf = list[0];\n      ret = buf.slice(0, n);\n      list[0] = buf.slice(n);\n    } else if (n === list[0].length) {\n      // first list is a perfect match\n      ret = list.shift();\n    } else {\n      // complex case.\n      // we have enough to cover it, but it spans past the first buffer.\n      if (stringMode)\n        ret = '';\n      else\n        ret = new Buffer(n);\n\n      var c = 0;\n      for (var i = 0, l = list.length; i < l && c < n; i++) {\n        var buf = list[0];\n        var cpy = Math.min(n - c, buf.length);\n\n        if (stringMode)\n          ret += buf.slice(0, cpy);\n        else\n          buf.copy(ret, c, 0, cpy);\n\n        if (cpy < buf.length)\n          list[0] = buf.slice(cpy);\n        else\n          list.shift();\n\n        c += cpy;\n      }\n    }\n  }\n\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0)\n    throw new Error('endReadable called on non-empty stream');\n\n  if (!state.endEmitted && state.calledRead) {\n    state.ended = true;\n    process.nextTick(function() {\n      // Check that we didn't get one last unshift.\n      if (!state.endEmitted && state.length === 0) {\n        state.endEmitted = true;\n        stream.readable = false;\n        stream.emit('end');\n      }\n    });\n  }\n}\n\nfunction forEach (xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}\n\nfunction indexOf (xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n/*</replacement>*/\n\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\nforEach(objectKeys(Writable.prototype), function(method) {\n  if (!Duplex.prototype[method])\n    Duplex.prototype[method] = Writable.prototype[method];\n});\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex))\n    return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false)\n    this.readable = false;\n\n  if (options && options.writable === false)\n    this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false)\n    this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended)\n    return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  process.nextTick(this.end.bind(this));\n}\n\nfunction forEach (xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, cb), and it'll handle all\n// the drain event emission and buffering.\n\nmodule.exports = Writable;\n\n/*<replacement>*/\nvar Buffer = require('buffer').Buffer;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Stream = require('stream');\n\nutil.inherits(Writable, Stream);\n\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n}\n\nfunction WritableState(options, stream) {\n  options = options || {};\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  this.highWaterMark = (hwm || hwm === 0) ? hwm : 16 * 1024;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  // cast to ints.\n  this.highWaterMark = ~~this.highWaterMark;\n\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, becuase any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function(er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.buffer = [];\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n}\n\nfunction Writable(options) {\n  var Duplex = require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, though they're not\n  // instanceof Writable, they're instanceof Readable.\n  if (!(this instanceof Writable) && !(this instanceof Duplex))\n    return new Writable(options);\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function() {\n  this.emit('error', new Error('Cannot pipe. Not readable.'));\n};\n\n\nfunction writeAfterEnd(stream, state, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  process.nextTick(function() {\n    cb(er);\n  });\n}\n\n// If we get something that is not a buffer, string, null, or undefined,\n// and we're not in objectMode, then that's an error.\n// Otherwise stream chunks are all considered to be of length=1, and the\n// watermarks determine how many objects to keep in the buffer, rather than\n// how many bytes or characters.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  if (!Buffer.isBuffer(chunk) &&\n      'string' !== typeof chunk &&\n      chunk !== null &&\n      chunk !== undefined &&\n      !state.objectMode) {\n    var er = new TypeError('Invalid non-string/buffer chunk');\n    stream.emit('error', er);\n    process.nextTick(function() {\n      cb(er);\n    });\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function(chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (Buffer.isBuffer(chunk))\n    encoding = 'buffer';\n  else if (!encoding)\n    encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function')\n    cb = function() {};\n\n  if (state.ended)\n    writeAfterEnd(this, state, cb);\n  else if (validChunk(this, state, chunk, cb))\n    ret = writeOrBuffer(this, state, chunk, encoding, cb);\n\n  return ret;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode &&\n      state.decodeStrings !== false &&\n      typeof chunk === 'string') {\n    chunk = new Buffer(chunk, encoding);\n  }\n  return chunk;\n}\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, chunk, encoding, cb) {\n  chunk = decodeChunk(state, chunk, encoding);\n  if (Buffer.isBuffer(chunk))\n    encoding = 'buffer';\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret)\n    state.needDrain = true;\n\n  if (state.writing)\n    state.buffer.push(new WriteReq(chunk, encoding, cb));\n  else\n    doWrite(stream, state, len, chunk, encoding, cb);\n\n  return ret;\n}\n\nfunction doWrite(stream, state, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  if (sync)\n    process.nextTick(function() {\n      cb(er);\n    });\n  else\n    cb(er);\n\n  stream._writableState.errorEmitted = true;\n  stream.emit('error', er);\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er)\n    onwriteError(stream, state, sync, er, cb);\n  else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(stream, state);\n\n    if (!finished && !state.bufferProcessing && state.buffer.length)\n      clearBuffer(stream, state);\n\n    if (sync) {\n      process.nextTick(function() {\n        afterWrite(stream, state, finished, cb);\n      });\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished)\n    onwriteDrain(stream, state);\n  cb();\n  if (finished)\n    finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n\n  for (var c = 0; c < state.buffer.length; c++) {\n    var entry = state.buffer[c];\n    var chunk = entry.chunk;\n    var encoding = entry.encoding;\n    var cb = entry.callback;\n    var len = state.objectMode ? 1 : chunk.length;\n\n    doWrite(stream, state, len, chunk, encoding, cb);\n\n    // if we didn't call the onwrite immediately, then\n    // it means that we need to wait until it does.\n    // also, that means that the chunk and cb are currently\n    // being processed, so move the buffer counter past them.\n    if (state.writing) {\n      c++;\n      break;\n    }\n  }\n\n  state.bufferProcessing = false;\n  if (c < state.buffer.length)\n    state.buffer = state.buffer.slice(c);\n  else\n    state.buffer.length = 0;\n}\n\nWritable.prototype._write = function(chunk, encoding, cb) {\n  cb(new Error('not implemented'));\n};\n\nWritable.prototype.end = function(chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (typeof chunk !== 'undefined' && chunk !== null)\n    this.write(chunk, encoding);\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished)\n    endWritable(this, state, cb);\n};\n\n\nfunction needFinish(stream, state) {\n  return (state.ending &&\n          state.length === 0 &&\n          !state.finished &&\n          !state.writing);\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(stream, state);\n  if (need) {\n    state.finished = true;\n    stream.emit('finish');\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished)\n      process.nextTick(cb);\n    else\n      stream.once('finish', cb);\n  }\n  state.ended = true;\n}\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\n\nfunction TransformState(options, stream) {\n  this.afterTransform = function(er, data) {\n    return afterTransform(stream, er, data);\n  };\n\n  this.needTransform = false;\n  this.transforming = false;\n  this.writecb = null;\n  this.writechunk = null;\n}\n\nfunction afterTransform(stream, er, data) {\n  var ts = stream._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb)\n    return stream.emit('error', new Error('no writecb in Transform class'));\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data !== null && data !== undefined)\n    stream.push(data);\n\n  if (cb)\n    cb(er);\n\n  var rs = stream._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    stream._read(rs.highWaterMark);\n  }\n}\n\n\nfunction Transform(options) {\n  if (!(this instanceof Transform))\n    return new Transform(options);\n\n  Duplex.call(this, options);\n\n  var ts = this._transformState = new TransformState(options, this);\n\n  // when the writable side finishes, then flush out anything remaining.\n  var stream = this;\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  this.once('finish', function() {\n    if ('function' === typeof this._flush)\n      this._flush(function(er) {\n        done(stream, er);\n      });\n    else\n      done(stream);\n  });\n}\n\nTransform.prototype.push = function(chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function(chunk, encoding, cb) {\n  throw new Error('not implemented');\n};\n\nTransform.prototype._write = function(chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform ||\n        rs.needReadable ||\n        rs.length < rs.highWaterMark)\n      this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function(n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\n\nfunction done(stream, er) {\n  if (er)\n    return stream.emit('error', er);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  var ws = stream._writableState;\n  var rs = stream._readableState;\n  var ts = stream._transformState;\n\n  if (ws.length)\n    throw new Error('calling transform done when ws.length != 0');\n\n  if (ts.transforming)\n    throw new Error('calling transform done when still transforming');\n\n  return stream.push(null);\n}\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough))\n    return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function(chunk, encoding, cb) {\n  cb(null, chunk);\n};\n", "var Stream = require('stream'); // hack to fix a circular dependency issue when used with browserify\nexports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = Stream;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\nif (!process.browser && process.env.READABLE_STREAM === 'disable') {\n  module.exports = require('stream');\n}\n", "/**!\n * contentstream - index.js\n *\n * Copyright(c) fengmk2 and other contributors.\n * MIT Licensed\n *\n * Authors:\n *   fengmk2 <fengmk2@gmail.com> (http://fengmk2.github.com)\n */\n\n'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar Readable = require('readable-stream').Readable;\nvar util = require('util');\n\nmodule.exports = ContentStream;\n\nfunction ContentStream(obj, options) {\n  if (!(this instanceof ContentStream)) {\n    return new ContentStream(obj, options);\n  }\n  Readable.call(this, options);\n  if (obj === null || obj === undefined) {\n    obj = String(obj);\n  }\n  this._obj = obj;\n}\n\nutil.inherits(ContentStream, Readable);\n\nContentStream.prototype._read = function (n) {\n  var obj = this._obj;\n  if (typeof obj === 'string') {\n    this.push(new Buffer(obj));\n  } else if (Buffer.isBuffer(obj)) {\n    this.push(obj);\n  } else {\n    this.push(new Buffer(JSON.stringify(obj)));\n  }\n  this.push(null);\n};\n", "module.exports = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, cb), and it'll handle all\n// the drain event emission and buffering.\n\nmodule.exports = Writable;\n\n/*<replacement>*/\nvar Buffer = require('buffer').Buffer;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Stream = require('stream');\n\nutil.inherits(Writable, Stream);\n\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n}\n\nfunction WritableState(options, stream) {\n  var Duplex = require('./_stream_duplex');\n\n  options = options || {};\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var defaultHwm = options.objectMode ? 16 : 16 * 1024;\n  this.highWaterMark = (hwm || hwm === 0) ? hwm : defaultHwm;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (stream instanceof Duplex)\n    this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // cast to ints.\n  this.highWaterMark = ~~this.highWaterMark;\n\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function(er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.buffer = [];\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n}\n\nfunction Writable(options) {\n  var Duplex = require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, though they're not\n  // instanceof Writable, they're instanceof Readable.\n  if (!(this instanceof Writable) && !(this instanceof Duplex))\n    return new Writable(options);\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function() {\n  this.emit('error', new Error('Cannot pipe. Not readable.'));\n};\n\n\nfunction writeAfterEnd(stream, state, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  process.nextTick(function() {\n    cb(er);\n  });\n}\n\n// If we get something that is not a buffer, string, null, or undefined,\n// and we're not in objectMode, then that's an error.\n// Otherwise stream chunks are all considered to be of length=1, and the\n// watermarks determine how many objects to keep in the buffer, rather than\n// how many bytes or characters.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  if (!util.isBuffer(chunk) &&\n      !util.isString(chunk) &&\n      !util.isNullOrUndefined(chunk) &&\n      !state.objectMode) {\n    var er = new TypeError('Invalid non-string/buffer chunk');\n    stream.emit('error', er);\n    process.nextTick(function() {\n      cb(er);\n    });\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function(chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n\n  if (util.isFunction(encoding)) {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (util.isBuffer(chunk))\n    encoding = 'buffer';\n  else if (!encoding)\n    encoding = state.defaultEncoding;\n\n  if (!util.isFunction(cb))\n    cb = function() {};\n\n  if (state.ended)\n    writeAfterEnd(this, state, cb);\n  else if (validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function() {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function() {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing &&\n        !state.corked &&\n        !state.finished &&\n        !state.bufferProcessing &&\n        state.buffer.length)\n      clearBuffer(this, state);\n  }\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode &&\n      state.decodeStrings !== false &&\n      util.isString(chunk)) {\n    chunk = new Buffer(chunk, encoding);\n  }\n  return chunk;\n}\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, chunk, encoding, cb) {\n  chunk = decodeChunk(state, chunk, encoding);\n  if (util.isBuffer(chunk))\n    encoding = 'buffer';\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret)\n    state.needDrain = true;\n\n  if (state.writing || state.corked)\n    state.buffer.push(new WriteReq(chunk, encoding, cb));\n  else\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev)\n    stream._writev(chunk, state.onwrite);\n  else\n    stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  if (sync)\n    process.nextTick(function() {\n      state.pendingcb--;\n      cb(er);\n    });\n  else {\n    state.pendingcb--;\n    cb(er);\n  }\n\n  stream._writableState.errorEmitted = true;\n  stream.emit('error', er);\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er)\n    onwriteError(stream, state, sync, er, cb);\n  else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(stream, state);\n\n    if (!finished &&\n        !state.corked &&\n        !state.bufferProcessing &&\n        state.buffer.length) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      process.nextTick(function() {\n        afterWrite(stream, state, finished, cb);\n      });\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished)\n    onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n\n  if (stream._writev && state.buffer.length > 1) {\n    // Fast case, write everything using _writev()\n    var cbs = [];\n    for (var c = 0; c < state.buffer.length; c++)\n      cbs.push(state.buffer[c].callback);\n\n    // count the one we are adding, as well.\n    // TODO(isaacs) clean this up\n    state.pendingcb++;\n    doWrite(stream, state, true, state.length, state.buffer, '', function(err) {\n      for (var i = 0; i < cbs.length; i++) {\n        state.pendingcb--;\n        cbs[i](err);\n      }\n    });\n\n    // Clear buffer\n    state.buffer = [];\n  } else {\n    // Slow case, write chunks one-by-one\n    for (var c = 0; c < state.buffer.length; c++) {\n      var entry = state.buffer[c];\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        c++;\n        break;\n      }\n    }\n\n    if (c < state.buffer.length)\n      state.buffer = state.buffer.slice(c);\n    else\n      state.buffer.length = 0;\n  }\n\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function(chunk, encoding, cb) {\n  cb(new Error('not implemented'));\n\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function(chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (util.isFunction(chunk)) {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (util.isFunction(encoding)) {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (!util.isNullOrUndefined(chunk))\n    this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished)\n    endWritable(this, state, cb);\n};\n\n\nfunction needFinish(stream, state) {\n  return (state.ending &&\n          state.length === 0 &&\n          !state.finished &&\n          !state.writing);\n}\n\nfunction prefinish(stream, state) {\n  if (!state.prefinished) {\n    state.prefinished = true;\n    stream.emit('prefinish');\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(stream, state);\n  if (need) {\n    if (state.pendingcb === 0) {\n      prefinish(stream, state);\n      state.finished = true;\n      stream.emit('finish');\n    } else\n      prefinish(stream, state);\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished)\n      process.nextTick(cb);\n    else\n      stream.once('finish', cb);\n  }\n  state.ended = true;\n}\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n/*</replacement>*/\n\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\nforEach(objectKeys(Writable.prototype), function(method) {\n  if (!Duplex.prototype[method])\n    Duplex.prototype[method] = Writable.prototype[method];\n});\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex))\n    return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false)\n    this.readable = false;\n\n  if (options && options.writable === false)\n    this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false)\n    this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended)\n    return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  process.nextTick(this.end.bind(this));\n}\n\nfunction forEach (xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n\n/*<replacement>*/\nvar Buffer = require('buffer').Buffer;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\nvar EE = require('events').EventEmitter;\n\n/*<replacement>*/\nif (!EE.listenerCount) EE.listenerCount = function(emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\nvar Stream = require('stream');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar StringDecoder;\n\n\n/*<replacement>*/\nvar debug = require('util');\nif (debug && debug.debuglog) {\n  debug = debug.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\n\nutil.inherits(Readable, Stream);\n\nfunction ReadableState(options, stream) {\n  var Duplex = require('./_stream_duplex');\n\n  options = options || {};\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var defaultHwm = options.objectMode ? 16 : 16 * 1024;\n  this.highWaterMark = (hwm || hwm === 0) ? hwm : defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = ~~this.highWaterMark;\n\n  this.buffer = [];\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (stream instanceof Duplex)\n    this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // when piping, we only care about 'readable' events that happen\n  // after read()ing all the bytes and not getting any pushback.\n  this.ranOut = false;\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder)\n      StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  var Duplex = require('./_stream_duplex');\n\n  if (!(this instanceof Readable))\n    return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  Stream.call(this);\n}\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function(chunk, encoding) {\n  var state = this._readableState;\n\n  if (util.isString(chunk) && !state.objectMode) {\n    encoding = encoding || state.defaultEncoding;\n    if (encoding !== state.encoding) {\n      chunk = new Buffer(chunk, encoding);\n      encoding = '';\n    }\n  }\n\n  return readableAddChunk(this, state, chunk, encoding, false);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function(chunk) {\n  var state = this._readableState;\n  return readableAddChunk(this, state, chunk, '', true);\n};\n\nfunction readableAddChunk(stream, state, chunk, encoding, addToFront) {\n  var er = chunkInvalid(state, chunk);\n  if (er) {\n    stream.emit('error', er);\n  } else if (util.isNullOrUndefined(chunk)) {\n    state.reading = false;\n    if (!state.ended)\n      onEofChunk(stream, state);\n  } else if (state.objectMode || chunk && chunk.length > 0) {\n    if (state.ended && !addToFront) {\n      var e = new Error('stream.push() after EOF');\n      stream.emit('error', e);\n    } else if (state.endEmitted && addToFront) {\n      var e = new Error('stream.unshift() after end event');\n      stream.emit('error', e);\n    } else {\n      if (state.decoder && !addToFront && !encoding)\n        chunk = state.decoder.write(chunk);\n\n      if (!addToFront)\n        state.reading = false;\n\n      // if we want the data now, just emit it.\n      if (state.flowing && state.length === 0 && !state.sync) {\n        stream.emit('data', chunk);\n        stream.read(0);\n      } else {\n        // update the buffer info.\n        state.length += state.objectMode ? 1 : chunk.length;\n        if (addToFront)\n          state.buffer.unshift(chunk);\n        else\n          state.buffer.push(chunk);\n\n        if (state.needReadable)\n          emitReadable(stream);\n      }\n\n      maybeReadMore(stream, state);\n    }\n  } else if (!addToFront) {\n    state.reading = false;\n  }\n\n  return needMoreData(state);\n}\n\n\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended &&\n         (state.needReadable ||\n          state.length < state.highWaterMark ||\n          state.length === 0);\n}\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function(enc) {\n  if (!StringDecoder)\n    StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 128MB\nvar MAX_HWM = 0x800000;\nfunction roundUpToNextPowerOf2(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2\n    n--;\n    for (var p = 1; p < 32; p <<= 1) n |= n >> p;\n    n++;\n  }\n  return n;\n}\n\nfunction howMuchToRead(n, state) {\n  if (state.length === 0 && state.ended)\n    return 0;\n\n  if (state.objectMode)\n    return n === 0 ? 0 : 1;\n\n  if (isNaN(n) || util.isNull(n)) {\n    // only flow one buffer at a time\n    if (state.flowing && state.buffer.length)\n      return state.buffer[0].length;\n    else\n      return state.length;\n  }\n\n  if (n <= 0)\n    return 0;\n\n  // If we're asking for more than the target buffer level,\n  // then raise the water mark.  Bump up to the next highest\n  // power of 2, to prevent increasing it excessively in tiny\n  // amounts.\n  if (n > state.highWaterMark)\n    state.highWaterMark = roundUpToNextPowerOf2(n);\n\n  // don't have that much.  return null, unless we've ended.\n  if (n > state.length) {\n    if (!state.ended) {\n      state.needReadable = true;\n      return 0;\n    } else\n      return state.length;\n  }\n\n  return n;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function(n) {\n  debug('read', n);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (!util.isNumber(n) || n > 0)\n    state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 &&\n      state.needReadable &&\n      (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended)\n      endReadable(this);\n    else\n      emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0)\n      endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  }\n\n  if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0)\n      state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n  }\n\n  // If _read pushed data synchronously, then `reading` will be false,\n  // and we need to re-evaluate how much data we can return to the user.\n  if (doRead && !state.reading)\n    n = howMuchToRead(nOrig, state);\n\n  var ret;\n  if (n > 0)\n    ret = fromList(n, state);\n  else\n    ret = null;\n\n  if (util.isNull(ret)) {\n    state.needReadable = true;\n    n = 0;\n  }\n\n  state.length -= n;\n\n  // If we have nothing in the buffer, then we want to know\n  // as soon as we *do* get something into the buffer.\n  if (state.length === 0 && !state.ended)\n    state.needReadable = true;\n\n  // If we tried to read() past the EOF, then emit end on the next tick.\n  if (nOrig !== n && state.ended && state.length === 0)\n    endReadable(this);\n\n  if (!util.isNull(ret))\n    this.emit('data', ret);\n\n  return ret;\n};\n\nfunction chunkInvalid(state, chunk) {\n  var er = null;\n  if (!util.isBuffer(chunk) &&\n      !util.isString(chunk) &&\n      !util.isNullOrUndefined(chunk) &&\n      !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n\nfunction onEofChunk(stream, state) {\n  if (state.decoder && !state.ended) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync)\n      process.nextTick(function() {\n        emitReadable_(stream);\n      });\n    else\n      emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    process.nextTick(function() {\n      maybeReadMore_(stream, state);\n    });\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended &&\n         state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;\n    else\n      len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function(n) {\n  this.emit('error', new Error('not implemented'));\n};\n\nReadable.prototype.pipe = function(dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) &&\n              dest !== process.stdout &&\n              dest !== process.stderr;\n\n  var endFn = doEnd ? onend : cleanup;\n  if (state.endEmitted)\n    process.nextTick(endFn);\n  else\n    src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable) {\n    debug('onunpipe');\n    if (readable === src) {\n      cleanup();\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', cleanup);\n    src.removeListener('data', ondata);\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain &&\n        (!dest._writableState || dest._writableState.needDrain))\n      ondrain();\n  }\n\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    var ret = dest.write(chunk);\n    if (false === ret) {\n      debug('false write response, pause',\n            src._readableState.awaitDrain);\n      src._readableState.awaitDrain++;\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EE.listenerCount(dest, 'error') === 0)\n      dest.emit('error', er);\n  }\n  // This is a brutally ugly hack to make sure that our error handler\n  // is attached before any userland ones.  NEVER DO THIS.\n  if (!dest._events || !dest._events.error)\n    dest.on('error', onerror);\n  else if (isArray(dest._events.error))\n    dest._events.error.unshift(onerror);\n  else\n    dest._events.error = [onerror, dest._events.error];\n\n\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function() {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain)\n      state.awaitDrain--;\n    if (state.awaitDrain === 0 && EE.listenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\n\nReadable.prototype.unpipe = function(dest) {\n  var state = this._readableState;\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0)\n    return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes)\n      return this;\n\n    if (!dest)\n      dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest)\n      dest.emit('unpipe', this);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++)\n      dests[i].emit('unpipe', this);\n    return this;\n  }\n\n  // try to find the right one.\n  var i = indexOf(state.pipes, dest);\n  if (i === -1)\n    return this;\n\n  state.pipes.splice(i, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1)\n    state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function(ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  // If listening to data, and it has not explicitly been paused,\n  // then call resume to start the flow of data on the next tick.\n  if (ev === 'data' && false !== this._readableState.flowing) {\n    this.resume();\n  }\n\n  if (ev === 'readable' && this.readable) {\n    var state = this._readableState;\n    if (!state.readableListening) {\n      state.readableListening = true;\n      state.emittedReadable = false;\n      state.needReadable = true;\n      if (!state.reading) {\n        var self = this;\n        process.nextTick(function() {\n          debug('readable nexttick read 0');\n          self.read(0);\n        });\n      } else if (state.length) {\n        emitReadable(this, state);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function() {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    if (!state.reading) {\n      debug('resume read 0');\n      this.read(0);\n    }\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    process.nextTick(function() {\n      resume_(stream, state);\n    });\n  }\n}\n\nfunction resume_(stream, state) {\n  state.resumeScheduled = false;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading)\n    stream.read(0);\n}\n\nReadable.prototype.pause = function() {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  if (state.flowing) {\n    do {\n      var chunk = stream.read();\n    } while (null !== chunk && state.flowing);\n  }\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function(stream) {\n  var state = this._readableState;\n  var paused = false;\n\n  var self = this;\n  stream.on('end', function() {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length)\n        self.push(chunk);\n    }\n\n    self.push(null);\n  });\n\n  stream.on('data', function(chunk) {\n    debug('wrapped data');\n    if (state.decoder)\n      chunk = state.decoder.write(chunk);\n    if (!chunk || !state.objectMode && !chunk.length)\n      return;\n\n    var ret = self.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (util.isFunction(stream[i]) && util.isUndefined(this[i])) {\n      this[i] = function(method) { return function() {\n        return stream[method].apply(stream, arguments);\n      }}(i);\n    }\n  }\n\n  // proxy certain important events.\n  var events = ['error', 'close', 'destroy', 'pause', 'resume'];\n  forEach(events, function(ev) {\n    stream.on(ev, self.emit.bind(self, ev));\n  });\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  self._read = function(n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return self;\n};\n\n\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\nfunction fromList(n, state) {\n  var list = state.buffer;\n  var length = state.length;\n  var stringMode = !!state.decoder;\n  var objectMode = !!state.objectMode;\n  var ret;\n\n  // nothing in the list, definitely empty.\n  if (list.length === 0)\n    return null;\n\n  if (length === 0)\n    ret = null;\n  else if (objectMode)\n    ret = list.shift();\n  else if (!n || n >= length) {\n    // read it all, truncate the array.\n    if (stringMode)\n      ret = list.join('');\n    else\n      ret = Buffer.concat(list, length);\n    list.length = 0;\n  } else {\n    // read just some of it.\n    if (n < list[0].length) {\n      // just take a part of the first list item.\n      // slice is the same for buffers and strings.\n      var buf = list[0];\n      ret = buf.slice(0, n);\n      list[0] = buf.slice(n);\n    } else if (n === list[0].length) {\n      // first list is a perfect match\n      ret = list.shift();\n    } else {\n      // complex case.\n      // we have enough to cover it, but it spans past the first buffer.\n      if (stringMode)\n        ret = '';\n      else\n        ret = new Buffer(n);\n\n      var c = 0;\n      for (var i = 0, l = list.length; i < l && c < n; i++) {\n        var buf = list[0];\n        var cpy = Math.min(n - c, buf.length);\n\n        if (stringMode)\n          ret += buf.slice(0, cpy);\n        else\n          buf.copy(ret, c, 0, cpy);\n\n        if (cpy < buf.length)\n          list[0] = buf.slice(cpy);\n        else\n          list.shift();\n\n        c += cpy;\n      }\n    }\n  }\n\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0)\n    throw new Error('endReadable called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    process.nextTick(function() {\n      // Check that we didn't get one last unshift.\n      if (!state.endEmitted && state.length === 0) {\n        state.endEmitted = true;\n        stream.readable = false;\n        stream.emit('end');\n      }\n    });\n  }\n}\n\nfunction forEach (xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}\n\nfunction indexOf (xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\n\nfunction TransformState(options, stream) {\n  this.afterTransform = function(er, data) {\n    return afterTransform(stream, er, data);\n  };\n\n  this.needTransform = false;\n  this.transforming = false;\n  this.writecb = null;\n  this.writechunk = null;\n}\n\nfunction afterTransform(stream, er, data) {\n  var ts = stream._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb)\n    return stream.emit('error', new Error('no writecb in Transform class'));\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (!util.isNullOrUndefined(data))\n    stream.push(data);\n\n  if (cb)\n    cb(er);\n\n  var rs = stream._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    stream._read(rs.highWaterMark);\n  }\n}\n\n\nfunction Transform(options) {\n  if (!(this instanceof Transform))\n    return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = new TransformState(options, this);\n\n  // when the writable side finishes, then flush out anything remaining.\n  var stream = this;\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  this.once('prefinish', function() {\n    if (util.isFunction(this._flush))\n      this._flush(function(er) {\n        done(stream, er);\n      });\n    else\n      done(stream);\n  });\n}\n\nTransform.prototype.push = function(chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function(chunk, encoding, cb) {\n  throw new Error('not implemented');\n};\n\nTransform.prototype._write = function(chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform ||\n        rs.needReadable ||\n        rs.length < rs.highWaterMark)\n      this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function(n) {\n  var ts = this._transformState;\n\n  if (!util.isNull(ts.writechunk) && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\n\nfunction done(stream, er) {\n  if (er)\n    return stream.emit('error', er);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  var ws = stream._writableState;\n  var ts = stream._transformState;\n\n  if (ws.length)\n    throw new Error('calling transform done when ws.length != 0');\n\n  if (ts.transforming)\n    throw new Error('calling transform done when still transforming');\n\n  return stream.push(null);\n}\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough))\n    return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function(chunk, encoding, cb) {\n  cb(null, chunk);\n};\n", "exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = require('stream');\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\nif (!process.browser && process.env.READABLE_STREAM === 'disable') {\n  module.exports = require('stream');\n}\n", "/* NeuQuant Neural-Net Quantization Algorithm\n * ------------------------------------------\n *\n * Copyright (c) 1994 Anthony Dekker\n *\n * NEUQUANT Neural-Net quantization algorithm by Anthony Dekker, 1994.\n * See \"Kohonen neural networks for optimal colour quantization\"\n * in \"Network: Computation in Neural Systems\" Vol. 5 (1994) pp 351-367.\n * for a discussion of the algorithm.\n * See also  http://members.ozemail.com.au/~dekker/NEUQUANT.HTML\n *\n * Any party obtaining a copy of these files from the author, directly or\n * indirectly, is granted, free of charge, a full and unrestricted irrevocable,\n * world-wide, paid up, royalty-free, nonexclusive right and license to deal\n * in this software and documentation files (the \"Software\"), including without\n * limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons who receive\n * copies from any such party to do so, with the only requirement being\n * that this copyright notice remain intact.\n *\n * (JavaScript port 2012 by Johan Nordberg)\n */\n\nvar ncycles = 100; // number of learning cycles\nvar netsize = 256; // number of colors used\nvar maxnetpos = netsize - 1;\n\n// defs for freq and bias\nvar netbiasshift = 4; // bias for colour values\nvar intbiasshift = 16; // bias for fractions\nvar intbias = (1 << intbiasshift);\nvar gammashift = 10;\nvar gamma = (1 << gammashift);\nvar betashift = 10;\nvar beta = (intbias >> betashift); /* beta = 1/1024 */\nvar betagamma = (intbias << (gammashift - betashift));\n\n// defs for decreasing radius factor\nvar initrad = (netsize >> 3); // for 256 cols, radius starts\nvar radiusbiasshift = 6; // at 32.0 biased by 6 bits\nvar radiusbias = (1 << radiusbiasshift);\nvar initradius = (initrad * radiusbias); //and decreases by a\nvar radiusdec = 30; // factor of 1/30 each cycle\n\n// defs for decreasing alpha factor\nvar alphabiasshift = 10; // alpha starts at 1.0\nvar initalpha = (1 << alphabiasshift);\nvar alphadec; // biased by 10 bits\n\n/* radbias and alpharadbias used for radpower calculation */\nvar radbiasshift = 8;\nvar radbias = (1 << radbiasshift);\nvar alpharadbshift = (alphabiasshift + radbiasshift);\nvar alpharadbias = (1 << alpharadbshift);\n\n// four primes near 500 - assume no image has a length so large that it is\n// divisible by all four primes\nvar prime1 = 499;\nvar prime2 = 491;\nvar prime3 = 487;\nvar prime4 = 503;\nvar minpicturebytes = (3 * prime4);\n\n/*\n  Constructor: NeuQuant\n\n  Arguments:\n\n  pixels - array of pixels in RGB format\n  samplefac - sampling factor 1 to 30 where lower is better quality\n\n  >\n  > pixels = [r, g, b, r, g, b, r, g, b, ..]\n  >\n*/\nfunction NeuQuant(pixels, samplefac) {\n  var network; // int[netsize][4]\n  var netindex; // for network lookup - really 256\n\n  // bias and freq arrays for learning\n  var bias;\n  var freq;\n  var radpower;\n\n  /*\n    Private Method: init\n\n    sets up arrays\n  */\n  function init() {\n    network = [];\n    netindex = new Int32Array(256);\n    bias = new Int32Array(netsize);\n    freq = new Int32Array(netsize);\n    radpower = new Int32Array(netsize >> 3);\n\n    var i, v;\n    for (i = 0; i < netsize; i++) {\n      v = (i << (netbiasshift + 8)) / netsize;\n      network[i] = new Float64Array([v, v, v, 0]);\n      //network[i] = [v, v, v, 0]\n      freq[i] = intbias / netsize;\n      bias[i] = 0;\n    }\n  }\n\n  /*\n    Private Method: unbiasnet\n\n    unbiases network to give byte values 0..255 and record position i to prepare for sort\n  */\n  function unbiasnet() {\n    for (var i = 0; i < netsize; i++) {\n      network[i][0] >>= netbiasshift;\n      network[i][1] >>= netbiasshift;\n      network[i][2] >>= netbiasshift;\n      network[i][3] = i; // record color number\n    }\n  }\n\n  /*\n    Private Method: altersingle\n\n    moves neuron *i* towards biased (b,g,r) by factor *alpha*\n  */\n  function altersingle(alpha, i, b, g, r) {\n    network[i][0] -= (alpha * (network[i][0] - b)) / initalpha;\n    network[i][1] -= (alpha * (network[i][1] - g)) / initalpha;\n    network[i][2] -= (alpha * (network[i][2] - r)) / initalpha;\n  }\n\n  /*\n    Private Method: alterneigh\n\n    moves neurons in *radius* around index *i* towards biased (b,g,r) by factor *alpha*\n  */\n  function alterneigh(radius, i, b, g, r) {\n    var lo = Math.abs(i - radius);\n    var hi = Math.min(i + radius, netsize);\n\n    var j = i + 1;\n    var k = i - 1;\n    var m = 1;\n\n    var p, a;\n    while ((j < hi) || (k > lo)) {\n      a = radpower[m++];\n\n      if (j < hi) {\n        p = network[j++];\n        p[0] -= (a * (p[0] - b)) / alpharadbias;\n        p[1] -= (a * (p[1] - g)) / alpharadbias;\n        p[2] -= (a * (p[2] - r)) / alpharadbias;\n      }\n\n      if (k > lo) {\n        p = network[k--];\n        p[0] -= (a * (p[0] - b)) / alpharadbias;\n        p[1] -= (a * (p[1] - g)) / alpharadbias;\n        p[2] -= (a * (p[2] - r)) / alpharadbias;\n      }\n    }\n  }\n\n  /*\n    Private Method: contest\n\n    searches for biased BGR values\n  */\n  function contest(b, g, r) {\n    /*\n      finds closest neuron (min dist) and updates freq\n      finds best neuron (min dist-bias) and returns position\n      for frequently chosen neurons, freq[i] is high and bias[i] is negative\n      bias[i] = gamma * ((1 / netsize) - freq[i])\n    */\n\n    var bestd = ~(1 << 31);\n    var bestbiasd = bestd;\n    var bestpos = -1;\n    var bestbiaspos = bestpos;\n\n    var i, n, dist, biasdist, betafreq;\n    for (i = 0; i < netsize; i++) {\n      n = network[i];\n\n      dist = Math.abs(n[0] - b) + Math.abs(n[1] - g) + Math.abs(n[2] - r);\n      if (dist < bestd) {\n        bestd = dist;\n        bestpos = i;\n      }\n\n      biasdist = dist - ((bias[i]) >> (intbiasshift - netbiasshift));\n      if (biasdist < bestbiasd) {\n        bestbiasd = biasdist;\n        bestbiaspos = i;\n      }\n\n      betafreq = (freq[i] >> betashift);\n      freq[i] -= betafreq;\n      bias[i] += (betafreq << gammashift);\n    }\n\n    freq[bestpos] += beta;\n    bias[bestpos] -= betagamma;\n\n    return bestbiaspos;\n  }\n\n  /*\n    Private Method: inxbuild\n\n    sorts network and builds netindex[0..255]\n  */\n  function inxbuild() {\n    var i, j, p, q, smallpos, smallval, previouscol = 0, startpos = 0;\n    for (i = 0; i < netsize; i++) {\n      p = network[i];\n      smallpos = i;\n      smallval = p[1]; // index on g\n      // find smallest in i..netsize-1\n      for (j = i + 1; j < netsize; j++) {\n        q = network[j];\n        if (q[1] < smallval) { // index on g\n          smallpos = j;\n          smallval = q[1]; // index on g\n        }\n      }\n      q = network[smallpos];\n      // swap p (i) and q (smallpos) entries\n      if (i != smallpos) {\n        j = q[0];   q[0] = p[0];   p[0] = j;\n        j = q[1];   q[1] = p[1];   p[1] = j;\n        j = q[2];   q[2] = p[2];   p[2] = j;\n        j = q[3];   q[3] = p[3];   p[3] = j;\n      }\n      // smallval entry is now in position i\n\n      if (smallval != previouscol) {\n        netindex[previouscol] = (startpos + i) >> 1;\n        for (j = previouscol + 1; j < smallval; j++)\n          netindex[j] = i;\n        previouscol = smallval;\n        startpos = i;\n      }\n    }\n    netindex[previouscol] = (startpos + maxnetpos) >> 1;\n    for (j = previouscol + 1; j < 256; j++)\n      netindex[j] = maxnetpos; // really 256\n  }\n\n  /*\n    Private Method: inxsearch\n\n    searches for BGR values 0..255 and returns a color index\n  */\n  function inxsearch(b, g, r) {\n    var a, p, dist;\n\n    var bestd = 1000; // biggest possible dist is 256*3\n    var best = -1;\n\n    var i = netindex[g]; // index on g\n    var j = i - 1; // start at netindex[g] and work outwards\n\n    while ((i < netsize) || (j >= 0)) {\n      if (i < netsize) {\n        p = network[i];\n        dist = p[1] - g; // inx key\n        if (dist >= bestd) i = netsize; // stop iter\n        else {\n          i++;\n          if (dist < 0) dist = -dist;\n          a = p[0] - b; if (a < 0) a = -a;\n          dist += a;\n          if (dist < bestd) {\n            a = p[2] - r; if (a < 0) a = -a;\n            dist += a;\n            if (dist < bestd) {\n              bestd = dist;\n              best = p[3];\n            }\n          }\n        }\n      }\n      if (j >= 0) {\n        p = network[j];\n        dist = g - p[1]; // inx key - reverse dif\n        if (dist >= bestd) j = -1; // stop iter\n        else {\n          j--;\n          if (dist < 0) dist = -dist;\n          a = p[0] - b; if (a < 0) a = -a;\n          dist += a;\n          if (dist < bestd) {\n            a = p[2] - r; if (a < 0) a = -a;\n            dist += a;\n            if (dist < bestd) {\n              bestd = dist;\n              best = p[3];\n            }\n          }\n        }\n      }\n    }\n\n    return best;\n  }\n\n  /*\n    Private Method: learn\n\n    \"Main Learning Loop\"\n  */\n  function learn() {\n    var i;\n\n    var lengthcount = pixels.length;\n    var alphadec = 30 + ((samplefac - 1) / 3);\n    var samplepixels = lengthcount / (3 * samplefac);\n    var delta = ~~(samplepixels / ncycles);\n    var alpha = initalpha;\n    var radius = initradius;\n\n    var rad = radius >> radiusbiasshift;\n\n    if (rad <= 1) rad = 0;\n    for (i = 0; i < rad; i++)\n      radpower[i] = alpha * (((rad * rad - i * i) * radbias) / (rad * rad));\n\n    var step;\n    if (lengthcount < minpicturebytes) {\n      samplefac = 1;\n      step = 3;\n    } else if ((lengthcount % prime1) !== 0) {\n      step = 3 * prime1;\n    } else if ((lengthcount % prime2) !== 0) {\n      step = 3 * prime2;\n    } else if ((lengthcount % prime3) !== 0)  {\n      step = 3 * prime3;\n    } else {\n      step = 3 * prime4;\n    }\n\n    var b, g, r, j;\n    var pix = 0; // current pixel\n\n    i = 0;\n    while (i < samplepixels) {\n      b = (pixels[pix] & 0xff) << netbiasshift;\n      g = (pixels[pix + 1] & 0xff) << netbiasshift;\n      r = (pixels[pix + 2] & 0xff) << netbiasshift;\n\n      j = contest(b, g, r);\n\n      altersingle(alpha, j, b, g, r);\n      if (rad !== 0) alterneigh(rad, j, b, g, r); // alter neighbours\n\n      pix += step;\n      if (pix >= lengthcount) pix -= lengthcount;\n\n      i++;\n\n      if (delta === 0) delta = 1;\n      if (i % delta === 0) {\n        alpha -= alpha / alphadec;\n        radius -= radius / radiusdec;\n        rad = radius >> radiusbiasshift;\n\n        if (rad <= 1) rad = 0;\n        for (j = 0; j < rad; j++)\n          radpower[j] = alpha * (((rad * rad - j * j) * radbias) / (rad * rad));\n      }\n    }\n  }\n\n  /*\n    Method: buildColormap\n\n    1. initializes network\n    2. trains it\n    3. removes misconceptions\n    4. builds colorindex\n  */\n  function buildColormap() {\n    init();\n    learn();\n    unbiasnet();\n    inxbuild();\n  }\n  this.buildColormap = buildColormap;\n\n  /*\n    Method: getColormap\n\n    builds colormap from the index\n\n    returns array in the format:\n\n    >\n    > [r, g, b, r, g, b, r, g, b, ..]\n    >\n  */\n  function getColormap() {\n    var map = [];\n    var index = [];\n\n    for (var i = 0; i < netsize; i++)\n      index[network[i][3]] = i;\n\n    var k = 0;\n    for (var l = 0; l < netsize; l++) {\n      var j = index[l];\n      map[k++] = (network[j][0]);\n      map[k++] = (network[j][1]);\n      map[k++] = (network[j][2]);\n    }\n    return map;\n  }\n  this.getColormap = getColormap;\n\n  /*\n    Method: lookupRGB\n\n    looks for the closest *r*, *g*, *b* color in the map and\n    returns its index\n  */\n  this.lookupRGB = inxsearch;\n}\n\nmodule.exports = NeuQuant;\n", "/*\n  LZWEncoder.js\n\n  Authors\n  Kevin Weiner (original Java version - kweiner@fmsware.com)\n  Thibault Imbert (AS3 version - bytearray.org)\n  Johan Nordberg (JS version - code@johan-nordberg.com)\n\n  Acknowledgements\n  GIFCOMPR.C - GIF Image compression routines\n  Lempel-Ziv compression based on 'compress'. GIF modifications by\n  David Rowley (mgardi@watdcsu.waterloo.edu)\n  GIF Image compression - modified 'compress'\n  Based on: compress.c - File compression ala IEEE Computer, June 1984.\n  By Authors: Spencer W. Thomas (decvax!harpo!utah-cs!utah-gr!thomas)\n  Jim McKie (decvax!mcvax!jim)\n  Steve Davies (decvax!vax135!petsd!peora!srd)\n  Ken Turkowski (decvax!decwrl!turtlevax!ken)\n  James A. Woods (decvax!ihnp4!ames!jaw)\n  Joe Orost (decvax!vax135!petsd!joe)\n*/\n\nvar EOF = -1;\nvar BITS = 12;\nvar HSIZE = 5003; // 80% occupancy\nvar masks = [0x0000, 0x0001, 0x0003, 0x0007, 0x000F, 0x001F,\n             0x003F, 0x007F, 0x00FF, 0x01FF, 0x03FF, 0x07FF,\n             0x0FFF, 0x1FFF, 0x3FFF, 0x7FFF, 0xFFFF];\n\nfunction LZWEncoder(width, height, pixels, colorDepth) {\n  var initCodeSize = Math.max(2, colorDepth);\n\n  var accum = new Uint8Array(256);\n  var htab = new Int32Array(HSIZE);\n  var codetab = new Int32Array(HSIZE);\n\n  var cur_accum, cur_bits = 0;\n  var a_count;\n  var free_ent = 0; // first unused entry\n  var maxcode;\n  var remaining;\n  var curPixel;\n  var n_bits;\n\n  // block compression parameters -- after all codes are used up,\n  // and compression rate changes, start over.\n  var clear_flg = false;\n\n  // Algorithm: use open addressing double hashing (no chaining) on the\n  // prefix code / next character combination. We do a variant of Knuth's\n  // algorithm D (vol. 3, sec. 6.4) along with G. Knott's relatively-prime\n  // secondary probe. Here, the modular division first probe is gives way\n  // to a faster exclusive-or manipulation. Also do block compression with\n  // an adaptive reset, whereby the code table is cleared when the compression\n  // ratio decreases, but after the table fills. The variable-length output\n  // codes are re-sized at this point, and a special CLEAR code is generated\n  // for the decompressor. Late addition: construct the table according to\n  // file size for noticeable speed improvement on small files. Please direct\n  // questions about this implementation to ames!jaw.\n  var g_init_bits, ClearCode, EOFCode;\n\n  // Add a character to the end of the current packet, and if it is 254\n  // characters, flush the packet to disk.\n  function char_out(c, outs) {\n    accum[a_count++] = c;\n    if (a_count >= 254) flush_char(outs);\n  }\n\n  // Clear out the hash table\n  // table clear for block compress\n  function cl_block(outs) {\n    cl_hash(HSIZE);\n    free_ent = ClearCode + 2;\n    clear_flg = true;\n    output(ClearCode, outs);\n  }\n\n  // Reset code table\n  function cl_hash(hsize) {\n    for (var i = 0; i < hsize; ++i) htab[i] = -1;\n  }\n\n  function compress(init_bits, outs) {\n    var fcode, c, i, ent, disp, hsize_reg, hshift;\n\n    // Set up the globals: g_init_bits - initial number of bits\n    g_init_bits = init_bits;\n\n    // Set up the necessary values\n    clear_flg = false;\n    n_bits = g_init_bits;\n    maxcode = MAXCODE(n_bits);\n\n    ClearCode = 1 << (init_bits - 1);\n    EOFCode = ClearCode + 1;\n    free_ent = ClearCode + 2;\n\n    a_count = 0; // clear packet\n\n    ent = nextPixel();\n\n    hshift = 0;\n    for (fcode = HSIZE; fcode < 65536; fcode *= 2) ++hshift;\n    hshift = 8 - hshift; // set hash code range bound\n    hsize_reg = HSIZE;\n    cl_hash(hsize_reg); // clear hash table\n\n    output(ClearCode, outs);\n\n    outer_loop: while ((c = nextPixel()) != EOF) {\n      fcode = (c << BITS) + ent;\n      i = (c << hshift) ^ ent; // xor hashing\n      if (htab[i] === fcode) {\n        ent = codetab[i];\n        continue;\n      } else if (htab[i] >= 0) { // non-empty slot\n        disp = hsize_reg - i; // secondary hash (after G. Knott)\n        if (i === 0) disp = 1;\n        do {\n          if ((i -= disp) < 0) i += hsize_reg;\n          if (htab[i] === fcode) {\n            ent = codetab[i];\n            continue outer_loop;\n          }\n        } while (htab[i] >= 0);\n      }\n      output(ent, outs);\n      ent = c;\n      if (free_ent < 1 << BITS) {\n        codetab[i] = free_ent++; // code -> hashtable\n        htab[i] = fcode;\n      } else {\n        cl_block(outs);\n      }\n    }\n\n    // Put out the final code.\n    output(ent, outs);\n    output(EOFCode, outs);\n  }\n\n  function encode(outs) {\n    outs.writeByte(initCodeSize); // write \"initial code size\" byte\n    remaining = width * height; // reset navigation variables\n    curPixel = 0;\n    compress(initCodeSize + 1, outs); // compress and write the pixel data\n    outs.writeByte(0); // write block terminator\n  }\n\n  // Flush the packet to disk, and reset the accumulator\n  function flush_char(outs) {\n    if (a_count > 0) {\n      outs.writeByte(a_count);\n      outs.writeBytes(accum, 0, a_count);\n      a_count = 0;\n    }\n  }\n\n  function MAXCODE(n_bits) {\n    return (1 << n_bits) - 1;\n  }\n\n  // Return the next pixel from the image\n  function nextPixel() {\n    if (remaining === 0) return EOF;\n    --remaining;\n    var pix = pixels[curPixel++];\n    return pix & 0xff;\n  }\n\n  function output(code, outs) {\n    cur_accum &= masks[cur_bits];\n\n    if (cur_bits > 0) cur_accum |= (code << cur_bits);\n    else cur_accum = code;\n\n    cur_bits += n_bits;\n\n    while (cur_bits >= 8) {\n      char_out((cur_accum & 0xff), outs);\n      cur_accum >>= 8;\n      cur_bits -= 8;\n    }\n\n    // If the next entry is going to be too big for the code size,\n    // then increase it, if possible.\n    if (free_ent > maxcode || clear_flg) {\n      if (clear_flg) {\n        maxcode = MAXCODE(n_bits = g_init_bits);\n        clear_flg = false;\n      } else {\n        ++n_bits;\n        if (n_bits == BITS) maxcode = 1 << BITS;\n        else maxcode = MAXCODE(n_bits);\n      }\n    }\n\n    if (code == EOFCode) {\n      // At EOF, write the rest of the buffer.\n      while (cur_bits > 0) {\n        char_out((cur_accum & 0xff), outs);\n        cur_accum >>= 8;\n        cur_bits -= 8;\n      }\n      flush_char(outs);\n    }\n  }\n\n  this.encode = encode;\n}\n\nmodule.exports = LZWEncoder;\n", "/*\n  GIFEncoder.js\n\n  Authors\n  Kevin Weiner (original Java version - kweiner@fmsware.com)\n  Thibault Imbert (AS3 version - bytearray.org)\n  Johan Nordberg (JS version - code@johan-nordberg.com)\n  Todd Wolfson (Implemented streams - todd@twolfson.com)\n*/\n\nvar assert = require('assert');\nvar EventEmitter = require('events').EventEmitter;\nvar ReadableStream = require('readable-stream');\nvar util = require('util');\n\nvar NeuQuant = require('./TypedNeuQuant.js');\nvar LZWEncoder = require('./LZWEncoder.js');\n\n// DEV: By using a capacitor, we prevent creating a data event for every byte written\nfunction ByteCapacitor(options) {\n  // Inherit from ReadableStream\n  ReadableStream.call(this, options);\n\n  // Start with an empty buffer and allow writes\n  this.okayToPush = true;\n  this.resetData();\n}\nutil.inherits(ByteCapacitor, ReadableStream);\n\nByteCapacitor.prototype._read = function () {\n  // The output is controlled by the input provided by methods.\n  // If we exceed the highwater mark, we will raise an error.\n  this.okayToPush = true;\n};\n\nByteCapacitor.prototype.resetData = function () {\n  this.data = [];\n};\n\nByteCapacitor.prototype.flushData = function () {\n  // If we are not okay to push, emit an error\n  if (!this.okayToPush) {\n    var err = new Error('GIF memory limit exceeded. Please `read` from GIF before writing additional frames/information.');\n    return this.emit('error', err);\n  }\n\n  // Otherwise, push out the new buffer\n  var buff = new Buffer(this.data);\n  this.resetData();\n  this.okayToPush = this.push(buff);\n};\n\nByteCapacitor.prototype.writeByte = function (val) {\n  this.data.push(val);\n};\n\nByteCapacitor.prototype.writeUTFBytes = function (string) {\n  for (var l = string.length, i = 0; i < l; i++) {\n    this.writeByte(string.charCodeAt(i));\n  }\n};\n\nByteCapacitor.prototype.writeBytes = function (array, offset, length) {\n  for (var l = length || array.length, i = offset || 0; i < l; i++) {\n    this.writeByte(array[i]);\n  }\n};\n\nfunction GIFEncoder(width, height, options) {\n  // Fallback options\n  options = options || {};\n\n  // Inherit from ByteCapacitor immediately\n  // https://github.com/isaacs/readable-stream/blob/v1.1.9/lib/_stream_readable.js#L60-L63\n  var hwm = options.highWaterMark;\n  ByteCapacitor.call(this, {\n    // Allow for up to 64kB of GIFfy-goodness\n    highWaterMark: (hwm || hwm === 0) ? hwm : 64 * 1024\n  });\n\n  // image size\n  this.width = ~~width;\n  this.height = ~~height;\n\n  // transparent color if given\n  this.transparent = null;\n\n  // transparent index in color table\n  this.transIndex = 0;\n\n  // -1 = no repeat, 0 = forever. anything else is repeat count\n  this.repeat = -1;\n\n  // frame delay (hundredths)\n  this.delay = 0;\n\n  this.pixels = null; // BGR byte array from frame\n  this.indexedPixels = null; // converted frame indexed to palette\n  this.colorDepth = null; // number of bit planes\n  this.colorTab = null; // RGB palette\n  this.usedEntry = []; // active palette entries\n  this.palSize = 7; // color table size (bits-1)\n  this.dispose = -1; // disposal code (-1 = use default)\n  this.firstFrame = true;\n  this.sample = 10; // default sample interval for quantizer\n\n  // When we encounter a header, new frame, or stop, emit data\n  var that = this;\n  function flushData() {\n    that.flushData();\n  }\n  this.on('writeHeader#stop', flushData);\n  this.on('frame#stop', flushData);\n  this.on('finish#stop', function finishGif () {\n    // Flush the data\n    flushData();\n\n    // Close the gif\n    that.push(null);\n  });\n}\nutil.inherits(GIFEncoder, ByteCapacitor);\n\n/*\n  Sets the delay time between each frame, or changes it for subsequent frames\n  (applies to last frame added)\n*/\nGIFEncoder.prototype.setDelay = function(milliseconds) {\n  this.delay = Math.round(milliseconds / 10);\n};\n\n/*\n  Sets frame rate in frames per second.\n*/\nGIFEncoder.prototype.setFrameRate = function(fps) {\n  this.delay = Math.round(100 / fps);\n};\n\n/*\n  Sets the GIF frame disposal code for the last added frame and any\n  subsequent frames.\n\n  Default is 0 if no transparent color has been set, otherwise 2.\n*/\nGIFEncoder.prototype.setDispose = function(disposalCode) {\n  if (disposalCode >= 0) this.dispose = disposalCode;\n};\n\n/*\n  Sets the number of times the set of GIF frames should be played.\n\n  -1 = play once\n  0 = repeat indefinitely\n\n  Default is -1\n\n  Must be invoked before the first image is added\n*/\n\nGIFEncoder.prototype.setRepeat = function(repeat) {\n  this.repeat = repeat;\n};\n\n/*\n  Sets the transparent color for the last added frame and any subsequent\n  frames. Since all colors are subject to modification in the quantization\n  process, the color in the final palette for each frame closest to the given\n  color becomes the transparent color for that frame. May be set to null to\n  indicate no transparent color.\n*/\nGIFEncoder.prototype.setTransparent = function(color) {\n  this.transparent = color;\n};\n\n// Custom methods for performance hacks around streaming GIF data pieces without re-analyzing/loading\nGIFEncoder.prototype.analyzeImage = function (imageData) {\n  // convert to correct format if necessary\n  this.setImagePixels(this.removeAlphaChannel(imageData));\n  this.analyzePixels(); // build color table & map pixels\n};\n\nGIFEncoder.prototype.writeImageInfo = function () {\n  if (this.firstFrame) {\n    this.writeLSD(); // logical screen descriptior\n    this.writePalette(); // global color table\n    if (this.repeat >= 0) {\n      // use NS app extension to indicate reps\n      this.writeNetscapeExt();\n    }\n  }\n\n  this.writeGraphicCtrlExt(); // write graphic control extension\n  this.writeImageDesc(); // image descriptor\n  if (!this.firstFrame) this.writePalette(); // local color table\n\n  // DEV: This was originally after outputImage but it does not affect order it seems\n  this.firstFrame = false;\n};\n\nGIFEncoder.prototype.outputImage = function () {\n  this.writePixels(); // encode and write pixel data\n};\n\n/*\n  Adds next GIF frame. The frame is not written immediately, but is\n  actually deferred until the next frame is received so that timing\n  data can be inserted.  Invoking finish() flushes all frames.\n*/\nGIFEncoder.prototype.addFrame = function(imageData) {\n  this.emit('frame#start');\n\n  this.analyzeImage(imageData);\n  this.writeImageInfo();\n  this.outputImage();\n\n  this.emit('frame#stop');\n};\n\n/*\n  Adds final trailer to the GIF stream, if you don't call the finish method\n  the GIF stream will not be valid.\n*/\nGIFEncoder.prototype.finish = function() {\n  this.emit('finish#start');\n  this.writeByte(0x3b); // gif trailer\n  this.emit('finish#stop');\n};\n\n/*\n  Sets quality of color quantization (conversion of images to the maximum 256\n  colors allowed by the GIF specification). Lower values (minimum = 1)\n  produce better colors, but slow processing significantly. 10 is the\n  default, and produces good color mapping at reasonable speeds. Values\n  greater than 20 do not yield significant improvements in speed.\n*/\nGIFEncoder.prototype.setQuality = function(quality) {\n  if (quality < 1) quality = 1;\n  this.sample = quality;\n};\n\n/*\n  Writes GIF file header\n*/\nGIFEncoder.prototype.writeHeader = function() {\n  this.emit('writeHeader#start');\n  this.writeUTFBytes(\"GIF89a\");\n  this.emit('writeHeader#stop');\n};\n\n/*\n  Analyzes current frame colors and creates color map.\n*/\nGIFEncoder.prototype.analyzePixels = function() {\n  var len = this.pixels.length;\n  var nPix = len / 3;\n\n  // TODO: Re-use indexedPixels\n  this.indexedPixels = new Uint8Array(nPix);\n\n  var imgq = new NeuQuant(this.pixels, this.sample);\n  imgq.buildColormap(); // create reduced palette\n  this.colorTab = imgq.getColormap();\n\n  // map image pixels to new palette\n  var k = 0;\n  for (var j = 0; j < nPix; j++) {\n    var index = imgq.lookupRGB(\n      this.pixels[k++] & 0xff,\n      this.pixels[k++] & 0xff,\n      this.pixels[k++] & 0xff\n    );\n    this.usedEntry[index] = true;\n    this.indexedPixels[j] = index;\n  }\n\n  this.pixels = null;\n  this.colorDepth = 8;\n  this.palSize = 7;\n\n  // get closest match to transparent color if specified\n  if (this.transparent !== null) {\n    this.transIndex = this.findClosest(this.transparent);\n  }\n};\n\n/*\n  Returns index of palette color closest to c\n*/\nGIFEncoder.prototype.findClosest = function(c) {\n  if (this.colorTab === null) return -1;\n\n  var r = (c & 0xFF0000) >> 16;\n  var g = (c & 0x00FF00) >> 8;\n  var b = (c & 0x0000FF);\n  var minpos = 0;\n  var dmin = 256 * 256 * 256;\n  var len = this.colorTab.length;\n\n  for (var i = 0; i < len;) {\n    var dr = r - (this.colorTab[i++] & 0xff);\n    var dg = g - (this.colorTab[i++] & 0xff);\n    var db = b - (this.colorTab[i] & 0xff);\n    var d = dr * dr + dg * dg + db * db;\n    var index = i / 3;\n    if (this.usedEntry[index] && (d < dmin)) {\n      dmin = d;\n      minpos = index;\n    }\n    i++;\n  }\n\n  return minpos;\n};\n\n/*\n  Extracts image pixels into byte array pixels\n  (removes alphachannel from canvas imagedata)\n*/\nGIFEncoder.prototype.removeAlphaChannel = function (data) {\n  var w = this.width;\n  var h = this.height;\n  var pixels = new Uint8Array(w * h * 3);\n\n  var count = 0;\n\n  for (var i = 0; i < h; i++) {\n    for (var j = 0; j < w; j++) {\n      var b = (i * w * 4) + j * 4;\n      pixels[count++] = data[b];\n      pixels[count++] = data[b+1];\n      pixels[count++] = data[b+2];\n    }\n  }\n\n  return pixels;\n};\n\nGIFEncoder.prototype.setImagePixels = function(pixels) {\n  this.pixels = pixels;\n};\n\n/*\n  Writes Graphic Control Extension\n*/\nGIFEncoder.prototype.writeGraphicCtrlExt = function() {\n  this.writeByte(0x21); // extension introducer\n  this.writeByte(0xf9); // GCE label\n  this.writeByte(4); // data block size\n\n  var transp, disp;\n  if (this.transparent === null) {\n    transp = 0;\n    disp = 0; // dispose = no action\n  } else {\n    transp = 1;\n    disp = 2; // force clear if using transparent color\n  }\n\n  if (this.dispose >= 0) {\n    disp = dispose & 7; // user override\n  }\n  disp <<= 2;\n\n  // packed fields\n  this.writeByte(\n    0 | // 1:3 reserved\n    disp | // 4:6 disposal\n    0 | // 7 user input - 0 = none\n    transp // 8 transparency flag\n  );\n\n  this.writeShort(this.delay); // delay x 1/100 sec\n  this.writeByte(this.transIndex); // transparent color index\n  this.writeByte(0); // block terminator\n};\n\n/*\n  Writes Image Descriptor\n*/\nGIFEncoder.prototype.writeImageDesc = function() {\n  this.writeByte(0x2c); // image separator\n  this.writeShort(0); // image position x,y = 0,0\n  this.writeShort(0);\n  this.writeShort(this.width); // image size\n  this.writeShort(this.height);\n\n  // packed fields\n  if (this.firstFrame) {\n    // no LCT - GCT is used for first (or only) frame\n    this.writeByte(0);\n  } else {\n    // specify normal LCT\n    this.writeByte(\n      0x80 | // 1 local color table 1=yes\n      0 | // 2 interlace - 0=no\n      0 | // 3 sorted - 0=no\n      0 | // 4-5 reserved\n      this.palSize // 6-8 size of color table\n    );\n  }\n};\n\n/*\n  Writes Logical Screen Descriptor\n*/\nGIFEncoder.prototype.writeLSD = function() {\n  // logical screen size\n  this.writeShort(this.width);\n  this.writeShort(this.height);\n\n  // packed fields\n  this.writeByte(\n    0x80 | // 1 : global color table flag = 1 (gct used)\n    0x70 | // 2-4 : color resolution = 7\n    0x00 | // 5 : gct sort flag = 0\n    this.palSize // 6-8 : gct size\n  );\n\n  this.writeByte(0); // background color index\n  this.writeByte(0); // pixel aspect ratio - assume 1:1\n};\n\n/*\n  Writes Netscape application extension to define repeat count.\n*/\nGIFEncoder.prototype.writeNetscapeExt = function() {\n  this.writeByte(0x21); // extension introducer\n  this.writeByte(0xff); // app extension label\n  this.writeByte(11); // block size\n  this.writeUTFBytes('NETSCAPE2.0'); // app id + auth code\n  this.writeByte(3); // sub-block size\n  this.writeByte(1); // loop sub-block id\n  this.writeShort(this.repeat); // loop count (extra iterations, 0=repeat forever)\n  this.writeByte(0); // block terminator\n};\n\n/*\n  Writes color table\n*/\nGIFEncoder.prototype.writePalette = function() {\n  this.writeBytes(this.colorTab);\n  var n = (3 * 256) - this.colorTab.length;\n  for (var i = 0; i < n; i++)\n    this.writeByte(0);\n};\n\nGIFEncoder.prototype.writeShort = function(pValue) {\n  this.writeByte(pValue & 0xFF);\n  this.writeByte((pValue >> 8) & 0xFF);\n};\n\n/*\n  Encodes and writes pixel data\n*/\nGIFEncoder.prototype.writePixels = function() {\n  var enc = new LZWEncoder(this.width, this.height, this.indexedPixels, this.colorDepth);\n  enc.encode(this);\n};\n\n/*\n  Retrieves the GIF stream\n*/\nGIFEncoder.prototype.stream = function() {\n  return this;\n};\n\nGIFEncoder.ByteCapacitor = ByteCapacitor;\n\nmodule.exports = GIFEncoder;\n", "/*\n  Copyright (c) 2008, Adobe Systems Incorporated\n  All rights reserved.\n\n  Redistribution and use in source and binary forms, with or without \n  modification, are permitted provided that the following conditions are\n  met:\n\n  * Redistributions of source code must retain the above copyright notice, \n    this list of conditions and the following disclaimer.\n  \n  * Redistributions in binary form must reproduce the above copyright\n    notice, this list of conditions and the following disclaimer in the \n    documentation and/or other materials provided with the distribution.\n  \n  * Neither the name of Adobe Systems Incorporated nor the names of its \n    contributors may be used to endorse or promote products derived from \n    this software without specific prior written permission.\n\n  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS\n  IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,\n  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR \n  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n/*\nJPEG encoder ported to JavaScript and optimized by Andreas Ritter, www.bytestrom.eu, 11/2009\n\nBasic GUI blocking jpeg encoder\n*/\n\nvar btoa = btoa || function(buf) {\n  return new Buffer(buf).toString('base64');\n};\n\nfunction JPEGEncoder(quality) {\n  var self = this;\n\tvar fround = Math.round;\n\tvar ffloor = Math.floor;\n\tvar YTable = new Array(64);\n\tvar UVTable = new Array(64);\n\tvar fdtbl_Y = new Array(64);\n\tvar fdtbl_UV = new Array(64);\n\tvar YDC_HT;\n\tvar UVDC_HT;\n\tvar YAC_HT;\n\tvar UVAC_HT;\n\t\n\tvar bitcode = new Array(65535);\n\tvar category = new Array(65535);\n\tvar outputfDCTQuant = new Array(64);\n\tvar DU = new Array(64);\n\tvar byteout = [];\n\tvar bytenew = 0;\n\tvar bytepos = 7;\n\t\n\tvar YDU = new Array(64);\n\tvar UDU = new Array(64);\n\tvar VDU = new Array(64);\n\tvar clt = new Array(256);\n\tvar RGB_YUV_TABLE = new Array(2048);\n\tvar currentQuality;\n\t\n\tvar ZigZag = [\n\t\t\t 0, 1, 5, 6,14,15,27,28,\n\t\t\t 2, 4, 7,13,16,26,29,42,\n\t\t\t 3, 8,12,17,25,30,41,43,\n\t\t\t 9,11,18,24,31,40,44,53,\n\t\t\t10,19,23,32,39,45,52,54,\n\t\t\t20,22,33,38,46,51,55,60,\n\t\t\t21,34,37,47,50,56,59,61,\n\t\t\t35,36,48,49,57,58,62,63\n\t\t];\n\t\n\tvar std_dc_luminance_nrcodes = [0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0];\n\tvar std_dc_luminance_values = [0,1,2,3,4,5,6,7,8,9,10,11];\n\tvar std_ac_luminance_nrcodes = [0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,0x7d];\n\tvar std_ac_luminance_values = [\n\t\t\t0x01,0x02,0x03,0x00,0x04,0x11,0x05,0x12,\n\t\t\t0x21,0x31,0x41,0x06,0x13,0x51,0x61,0x07,\n\t\t\t0x22,0x71,0x14,0x32,0x81,0x91,0xa1,0x08,\n\t\t\t0x23,0x42,0xb1,0xc1,0x15,0x52,0xd1,0xf0,\n\t\t\t0x24,0x33,0x62,0x72,0x82,0x09,0x0a,0x16,\n\t\t\t0x17,0x18,0x19,0x1a,0x25,0x26,0x27,0x28,\n\t\t\t0x29,0x2a,0x34,0x35,0x36,0x37,0x38,0x39,\n\t\t\t0x3a,0x43,0x44,0x45,0x46,0x47,0x48,0x49,\n\t\t\t0x4a,0x53,0x54,0x55,0x56,0x57,0x58,0x59,\n\t\t\t0x5a,0x63,0x64,0x65,0x66,0x67,0x68,0x69,\n\t\t\t0x6a,0x73,0x74,0x75,0x76,0x77,0x78,0x79,\n\t\t\t0x7a,0x83,0x84,0x85,0x86,0x87,0x88,0x89,\n\t\t\t0x8a,0x92,0x93,0x94,0x95,0x96,0x97,0x98,\n\t\t\t0x99,0x9a,0xa2,0xa3,0xa4,0xa5,0xa6,0xa7,\n\t\t\t0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,0xb5,0xb6,\n\t\t\t0xb7,0xb8,0xb9,0xba,0xc2,0xc3,0xc4,0xc5,\n\t\t\t0xc6,0xc7,0xc8,0xc9,0xca,0xd2,0xd3,0xd4,\n\t\t\t0xd5,0xd6,0xd7,0xd8,0xd9,0xda,0xe1,0xe2,\n\t\t\t0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,0xea,\n\t\t\t0xf1,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,\n\t\t\t0xf9,0xfa\n\t\t];\n\t\n\tvar std_dc_chrominance_nrcodes = [0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0];\n\tvar std_dc_chrominance_values = [0,1,2,3,4,5,6,7,8,9,10,11];\n\tvar std_ac_chrominance_nrcodes = [0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,0x77];\n\tvar std_ac_chrominance_values = [\n\t\t\t0x00,0x01,0x02,0x03,0x11,0x04,0x05,0x21,\n\t\t\t0x31,0x06,0x12,0x41,0x51,0x07,0x61,0x71,\n\t\t\t0x13,0x22,0x32,0x81,0x08,0x14,0x42,0x91,\n\t\t\t0xa1,0xb1,0xc1,0x09,0x23,0x33,0x52,0xf0,\n\t\t\t0x15,0x62,0x72,0xd1,0x0a,0x16,0x24,0x34,\n\t\t\t0xe1,0x25,0xf1,0x17,0x18,0x19,0x1a,0x26,\n\t\t\t0x27,0x28,0x29,0x2a,0x35,0x36,0x37,0x38,\n\t\t\t0x39,0x3a,0x43,0x44,0x45,0x46,0x47,0x48,\n\t\t\t0x49,0x4a,0x53,0x54,0x55,0x56,0x57,0x58,\n\t\t\t0x59,0x5a,0x63,0x64,0x65,0x66,0x67,0x68,\n\t\t\t0x69,0x6a,0x73,0x74,0x75,0x76,0x77,0x78,\n\t\t\t0x79,0x7a,0x82,0x83,0x84,0x85,0x86,0x87,\n\t\t\t0x88,0x89,0x8a,0x92,0x93,0x94,0x95,0x96,\n\t\t\t0x97,0x98,0x99,0x9a,0xa2,0xa3,0xa4,0xa5,\n\t\t\t0xa6,0xa7,0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,\n\t\t\t0xb5,0xb6,0xb7,0xb8,0xb9,0xba,0xc2,0xc3,\n\t\t\t0xc4,0xc5,0xc6,0xc7,0xc8,0xc9,0xca,0xd2,\n\t\t\t0xd3,0xd4,0xd5,0xd6,0xd7,0xd8,0xd9,0xda,\n\t\t\t0xe2,0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,\n\t\t\t0xea,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,\n\t\t\t0xf9,0xfa\n\t\t];\n\t\n\tfunction initQuantTables(sf){\n\t\t\tvar YQT = [\n\t\t\t\t16, 11, 10, 16, 24, 40, 51, 61,\n\t\t\t\t12, 12, 14, 19, 26, 58, 60, 55,\n\t\t\t\t14, 13, 16, 24, 40, 57, 69, 56,\n\t\t\t\t14, 17, 22, 29, 51, 87, 80, 62,\n\t\t\t\t18, 22, 37, 56, 68,109,103, 77,\n\t\t\t\t24, 35, 55, 64, 81,104,113, 92,\n\t\t\t\t49, 64, 78, 87,103,121,120,101,\n\t\t\t\t72, 92, 95, 98,112,100,103, 99\n\t\t\t];\n\t\t\t\n\t\t\tfor (var i = 0; i < 64; i++) {\n\t\t\t\tvar t = ffloor((YQT[i]*sf+50)/100);\n\t\t\t\tif (t < 1) {\n\t\t\t\t\tt = 1;\n\t\t\t\t} else if (t > 255) {\n\t\t\t\t\tt = 255;\n\t\t\t\t}\n\t\t\t\tYTable[ZigZag[i]] = t;\n\t\t\t}\n\t\t\tvar UVQT = [\n\t\t\t\t17, 18, 24, 47, 99, 99, 99, 99,\n\t\t\t\t18, 21, 26, 66, 99, 99, 99, 99,\n\t\t\t\t24, 26, 56, 99, 99, 99, 99, 99,\n\t\t\t\t47, 66, 99, 99, 99, 99, 99, 99,\n\t\t\t\t99, 99, 99, 99, 99, 99, 99, 99,\n\t\t\t\t99, 99, 99, 99, 99, 99, 99, 99,\n\t\t\t\t99, 99, 99, 99, 99, 99, 99, 99,\n\t\t\t\t99, 99, 99, 99, 99, 99, 99, 99\n\t\t\t];\n\t\t\tfor (var j = 0; j < 64; j++) {\n\t\t\t\tvar u = ffloor((UVQT[j]*sf+50)/100);\n\t\t\t\tif (u < 1) {\n\t\t\t\t\tu = 1;\n\t\t\t\t} else if (u > 255) {\n\t\t\t\t\tu = 255;\n\t\t\t\t}\n\t\t\t\tUVTable[ZigZag[j]] = u;\n\t\t\t}\n\t\t\tvar aasf = [\n\t\t\t\t1.0, 1.387039845, 1.306562965, 1.175875602,\n\t\t\t\t1.0, 0.785694958, 0.541196100, 0.275899379\n\t\t\t];\n\t\t\tvar k = 0;\n\t\t\tfor (var row = 0; row < 8; row++)\n\t\t\t{\n\t\t\t\tfor (var col = 0; col < 8; col++)\n\t\t\t\t{\n\t\t\t\t\tfdtbl_Y[k]  = (1.0 / (YTable [ZigZag[k]] * aasf[row] * aasf[col] * 8.0));\n\t\t\t\t\tfdtbl_UV[k] = (1.0 / (UVTable[ZigZag[k]] * aasf[row] * aasf[col] * 8.0));\n\t\t\t\t\tk++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction computeHuffmanTbl(nrcodes, std_table){\n\t\t\tvar codevalue = 0;\n\t\t\tvar pos_in_table = 0;\n\t\t\tvar HT = new Array();\n\t\t\tfor (var k = 1; k <= 16; k++) {\n\t\t\t\tfor (var j = 1; j <= nrcodes[k]; j++) {\n\t\t\t\t\tHT[std_table[pos_in_table]] = [];\n\t\t\t\t\tHT[std_table[pos_in_table]][0] = codevalue;\n\t\t\t\t\tHT[std_table[pos_in_table]][1] = k;\n\t\t\t\t\tpos_in_table++;\n\t\t\t\t\tcodevalue++;\n\t\t\t\t}\n\t\t\t\tcodevalue*=2;\n\t\t\t}\n\t\t\treturn HT;\n\t\t}\n\t\t\n\t\tfunction initHuffmanTbl()\n\t\t{\n\t\t\tYDC_HT = computeHuffmanTbl(std_dc_luminance_nrcodes,std_dc_luminance_values);\n\t\t\tUVDC_HT = computeHuffmanTbl(std_dc_chrominance_nrcodes,std_dc_chrominance_values);\n\t\t\tYAC_HT = computeHuffmanTbl(std_ac_luminance_nrcodes,std_ac_luminance_values);\n\t\t\tUVAC_HT = computeHuffmanTbl(std_ac_chrominance_nrcodes,std_ac_chrominance_values);\n\t\t}\n\t\n\t\tfunction initCategoryNumber()\n\t\t{\n\t\t\tvar nrlower = 1;\n\t\t\tvar nrupper = 2;\n\t\t\tfor (var cat = 1; cat <= 15; cat++) {\n\t\t\t\t//Positive numbers\n\t\t\t\tfor (var nr = nrlower; nr<nrupper; nr++) {\n\t\t\t\t\tcategory[32767+nr] = cat;\n\t\t\t\t\tbitcode[32767+nr] = [];\n\t\t\t\t\tbitcode[32767+nr][1] = cat;\n\t\t\t\t\tbitcode[32767+nr][0] = nr;\n\t\t\t\t}\n\t\t\t\t//Negative numbers\n\t\t\t\tfor (var nrneg =-(nrupper-1); nrneg<=-nrlower; nrneg++) {\n\t\t\t\t\tcategory[32767+nrneg] = cat;\n\t\t\t\t\tbitcode[32767+nrneg] = [];\n\t\t\t\t\tbitcode[32767+nrneg][1] = cat;\n\t\t\t\t\tbitcode[32767+nrneg][0] = nrupper-1+nrneg;\n\t\t\t\t}\n\t\t\t\tnrlower <<= 1;\n\t\t\t\tnrupper <<= 1;\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction initRGBYUVTable() {\n\t\t\tfor(var i = 0; i < 256;i++) {\n\t\t\t\tRGB_YUV_TABLE[i]      \t\t=  19595 * i;\n\t\t\t\tRGB_YUV_TABLE[(i+ 256)>>0] \t=  38470 * i;\n\t\t\t\tRGB_YUV_TABLE[(i+ 512)>>0] \t=   7471 * i + 0x8000;\n\t\t\t\tRGB_YUV_TABLE[(i+ 768)>>0] \t= -11059 * i;\n\t\t\t\tRGB_YUV_TABLE[(i+1024)>>0] \t= -21709 * i;\n\t\t\t\tRGB_YUV_TABLE[(i+1280)>>0] \t=  32768 * i + 0x807FFF;\n\t\t\t\tRGB_YUV_TABLE[(i+1536)>>0] \t= -27439 * i;\n\t\t\t\tRGB_YUV_TABLE[(i+1792)>>0] \t= - 5329 * i;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// IO functions\n\t\tfunction writeBits(bs)\n\t\t{\n\t\t\tvar value = bs[0];\n\t\t\tvar posval = bs[1]-1;\n\t\t\twhile ( posval >= 0 ) {\n\t\t\t\tif (value & (1 << posval) ) {\n\t\t\t\t\tbytenew |= (1 << bytepos);\n\t\t\t\t}\n\t\t\t\tposval--;\n\t\t\t\tbytepos--;\n\t\t\t\tif (bytepos < 0) {\n\t\t\t\t\tif (bytenew == 0xFF) {\n\t\t\t\t\t\twriteByte(0xFF);\n\t\t\t\t\t\twriteByte(0);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\twriteByte(bytenew);\n\t\t\t\t\t}\n\t\t\t\t\tbytepos=7;\n\t\t\t\t\tbytenew=0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tfunction writeByte(value)\n\t\t{\n\t\t\t//byteout.push(clt[value]); // write char directly instead of converting later\n      byteout.push(value);\n\t\t}\n\t\n\t\tfunction writeWord(value)\n\t\t{\n\t\t\twriteByte((value>>8)&0xFF);\n\t\t\twriteByte((value   )&0xFF);\n\t\t}\n\t\t\n\t\t// DCT & quantization core\n\t\tfunction fDCTQuant(data, fdtbl)\n\t\t{\n\t\t\tvar d0, d1, d2, d3, d4, d5, d6, d7;\n\t\t\t/* Pass 1: process rows. */\n\t\t\tvar dataOff=0;\n\t\t\tvar i;\n\t\t\tconst I8 = 8;\n\t\t\tconst I64 = 64;\n\t\t\tfor (i=0; i<I8; ++i)\n\t\t\t{\n\t\t\t\td0 = data[dataOff];\n\t\t\t\td1 = data[dataOff+1];\n\t\t\t\td2 = data[dataOff+2];\n\t\t\t\td3 = data[dataOff+3];\n\t\t\t\td4 = data[dataOff+4];\n\t\t\t\td5 = data[dataOff+5];\n\t\t\t\td6 = data[dataOff+6];\n\t\t\t\td7 = data[dataOff+7];\n\t\t\t\t\n\t\t\t\tvar tmp0 = d0 + d7;\n\t\t\t\tvar tmp7 = d0 - d7;\n\t\t\t\tvar tmp1 = d1 + d6;\n\t\t\t\tvar tmp6 = d1 - d6;\n\t\t\t\tvar tmp2 = d2 + d5;\n\t\t\t\tvar tmp5 = d2 - d5;\n\t\t\t\tvar tmp3 = d3 + d4;\n\t\t\t\tvar tmp4 = d3 - d4;\n\t\n\t\t\t\t/* Even part */\n\t\t\t\tvar tmp10 = tmp0 + tmp3;\t/* phase 2 */\n\t\t\t\tvar tmp13 = tmp0 - tmp3;\n\t\t\t\tvar tmp11 = tmp1 + tmp2;\n\t\t\t\tvar tmp12 = tmp1 - tmp2;\n\t\n\t\t\t\tdata[dataOff] = tmp10 + tmp11; /* phase 3 */\n\t\t\t\tdata[dataOff+4] = tmp10 - tmp11;\n\t\n\t\t\t\tvar z1 = (tmp12 + tmp13) * 0.707106781; /* c4 */\n\t\t\t\tdata[dataOff+2] = tmp13 + z1; /* phase 5 */\n\t\t\t\tdata[dataOff+6] = tmp13 - z1;\n\t\n\t\t\t\t/* Odd part */\n\t\t\t\ttmp10 = tmp4 + tmp5; /* phase 2 */\n\t\t\t\ttmp11 = tmp5 + tmp6;\n\t\t\t\ttmp12 = tmp6 + tmp7;\n\t\n\t\t\t\t/* The rotator is modified from fig 4-8 to avoid extra negations. */\n\t\t\t\tvar z5 = (tmp10 - tmp12) * 0.382683433; /* c6 */\n\t\t\t\tvar z2 = 0.541196100 * tmp10 + z5; /* c2-c6 */\n\t\t\t\tvar z4 = 1.306562965 * tmp12 + z5; /* c2+c6 */\n\t\t\t\tvar z3 = tmp11 * 0.707106781; /* c4 */\n\t\n\t\t\t\tvar z11 = tmp7 + z3;\t/* phase 5 */\n\t\t\t\tvar z13 = tmp7 - z3;\n\t\n\t\t\t\tdata[dataOff+5] = z13 + z2;\t/* phase 6 */\n\t\t\t\tdata[dataOff+3] = z13 - z2;\n\t\t\t\tdata[dataOff+1] = z11 + z4;\n\t\t\t\tdata[dataOff+7] = z11 - z4;\n\t\n\t\t\t\tdataOff += 8; /* advance pointer to next row */\n\t\t\t}\n\t\n\t\t\t/* Pass 2: process columns. */\n\t\t\tdataOff = 0;\n\t\t\tfor (i=0; i<I8; ++i)\n\t\t\t{\n\t\t\t\td0 = data[dataOff];\n\t\t\t\td1 = data[dataOff + 8];\n\t\t\t\td2 = data[dataOff + 16];\n\t\t\t\td3 = data[dataOff + 24];\n\t\t\t\td4 = data[dataOff + 32];\n\t\t\t\td5 = data[dataOff + 40];\n\t\t\t\td6 = data[dataOff + 48];\n\t\t\t\td7 = data[dataOff + 56];\n\t\t\t\t\n\t\t\t\tvar tmp0p2 = d0 + d7;\n\t\t\t\tvar tmp7p2 = d0 - d7;\n\t\t\t\tvar tmp1p2 = d1 + d6;\n\t\t\t\tvar tmp6p2 = d1 - d6;\n\t\t\t\tvar tmp2p2 = d2 + d5;\n\t\t\t\tvar tmp5p2 = d2 - d5;\n\t\t\t\tvar tmp3p2 = d3 + d4;\n\t\t\t\tvar tmp4p2 = d3 - d4;\n\t\n\t\t\t\t/* Even part */\n\t\t\t\tvar tmp10p2 = tmp0p2 + tmp3p2;\t/* phase 2 */\n\t\t\t\tvar tmp13p2 = tmp0p2 - tmp3p2;\n\t\t\t\tvar tmp11p2 = tmp1p2 + tmp2p2;\n\t\t\t\tvar tmp12p2 = tmp1p2 - tmp2p2;\n\t\n\t\t\t\tdata[dataOff] = tmp10p2 + tmp11p2; /* phase 3 */\n\t\t\t\tdata[dataOff+32] = tmp10p2 - tmp11p2;\n\t\n\t\t\t\tvar z1p2 = (tmp12p2 + tmp13p2) * 0.707106781; /* c4 */\n\t\t\t\tdata[dataOff+16] = tmp13p2 + z1p2; /* phase 5 */\n\t\t\t\tdata[dataOff+48] = tmp13p2 - z1p2;\n\t\n\t\t\t\t/* Odd part */\n\t\t\t\ttmp10p2 = tmp4p2 + tmp5p2; /* phase 2 */\n\t\t\t\ttmp11p2 = tmp5p2 + tmp6p2;\n\t\t\t\ttmp12p2 = tmp6p2 + tmp7p2;\n\t\n\t\t\t\t/* The rotator is modified from fig 4-8 to avoid extra negations. */\n\t\t\t\tvar z5p2 = (tmp10p2 - tmp12p2) * 0.382683433; /* c6 */\n\t\t\t\tvar z2p2 = 0.541196100 * tmp10p2 + z5p2; /* c2-c6 */\n\t\t\t\tvar z4p2 = 1.306562965 * tmp12p2 + z5p2; /* c2+c6 */\n\t\t\t\tvar z3p2 = tmp11p2 * 0.707106781; /* c4 */\n\t\n\t\t\t\tvar z11p2 = tmp7p2 + z3p2;\t/* phase 5 */\n\t\t\t\tvar z13p2 = tmp7p2 - z3p2;\n\t\n\t\t\t\tdata[dataOff+40] = z13p2 + z2p2; /* phase 6 */\n\t\t\t\tdata[dataOff+24] = z13p2 - z2p2;\n\t\t\t\tdata[dataOff+ 8] = z11p2 + z4p2;\n\t\t\t\tdata[dataOff+56] = z11p2 - z4p2;\n\t\n\t\t\t\tdataOff++; /* advance pointer to next column */\n\t\t\t}\n\t\n\t\t\t// Quantize/descale the coefficients\n\t\t\tvar fDCTQuant;\n\t\t\tfor (i=0; i<I64; ++i)\n\t\t\t{\n\t\t\t\t// Apply the quantization and scaling factor & Round to nearest integer\n\t\t\t\tfDCTQuant = data[i]*fdtbl[i];\n\t\t\t\toutputfDCTQuant[i] = (fDCTQuant > 0.0) ? ((fDCTQuant + 0.5)|0) : ((fDCTQuant - 0.5)|0);\n\t\t\t\t//outputfDCTQuant[i] = fround(fDCTQuant);\n\n\t\t\t}\n\t\t\treturn outputfDCTQuant;\n\t\t}\n\t\t\n\t\tfunction writeAPP0()\n\t\t{\n\t\t\twriteWord(0xFFE0); // marker\n\t\t\twriteWord(16); // length\n\t\t\twriteByte(0x4A); // J\n\t\t\twriteByte(0x46); // F\n\t\t\twriteByte(0x49); // I\n\t\t\twriteByte(0x46); // F\n\t\t\twriteByte(0); // = \"JFIF\",'\\0'\n\t\t\twriteByte(1); // versionhi\n\t\t\twriteByte(1); // versionlo\n\t\t\twriteByte(0); // xyunits\n\t\t\twriteWord(1); // xdensity\n\t\t\twriteWord(1); // ydensity\n\t\t\twriteByte(0); // thumbnwidth\n\t\t\twriteByte(0); // thumbnheight\n\t\t}\n\t\n\t\tfunction writeSOF0(width, height)\n\t\t{\n\t\t\twriteWord(0xFFC0); // marker\n\t\t\twriteWord(17);   // length, truecolor YUV JPG\n\t\t\twriteByte(8);    // precision\n\t\t\twriteWord(height);\n\t\t\twriteWord(width);\n\t\t\twriteByte(3);    // nrofcomponents\n\t\t\twriteByte(1);    // IdY\n\t\t\twriteByte(0x11); // HVY\n\t\t\twriteByte(0);    // QTY\n\t\t\twriteByte(2);    // IdU\n\t\t\twriteByte(0x11); // HVU\n\t\t\twriteByte(1);    // QTU\n\t\t\twriteByte(3);    // IdV\n\t\t\twriteByte(0x11); // HVV\n\t\t\twriteByte(1);    // QTV\n\t\t}\n\t\n\t\tfunction writeDQT()\n\t\t{\n\t\t\twriteWord(0xFFDB); // marker\n\t\t\twriteWord(132);\t   // length\n\t\t\twriteByte(0);\n\t\t\tfor (var i=0; i<64; i++) {\n\t\t\t\twriteByte(YTable[i]);\n\t\t\t}\n\t\t\twriteByte(1);\n\t\t\tfor (var j=0; j<64; j++) {\n\t\t\t\twriteByte(UVTable[j]);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction writeDHT()\n\t\t{\n\t\t\twriteWord(0xFFC4); // marker\n\t\t\twriteWord(0x01A2); // length\n\t\n\t\t\twriteByte(0); // HTYDCinfo\n\t\t\tfor (var i=0; i<16; i++) {\n\t\t\t\twriteByte(std_dc_luminance_nrcodes[i+1]);\n\t\t\t}\n\t\t\tfor (var j=0; j<=11; j++) {\n\t\t\t\twriteByte(std_dc_luminance_values[j]);\n\t\t\t}\n\t\n\t\t\twriteByte(0x10); // HTYACinfo\n\t\t\tfor (var k=0; k<16; k++) {\n\t\t\t\twriteByte(std_ac_luminance_nrcodes[k+1]);\n\t\t\t}\n\t\t\tfor (var l=0; l<=161; l++) {\n\t\t\t\twriteByte(std_ac_luminance_values[l]);\n\t\t\t}\n\t\n\t\t\twriteByte(1); // HTUDCinfo\n\t\t\tfor (var m=0; m<16; m++) {\n\t\t\t\twriteByte(std_dc_chrominance_nrcodes[m+1]);\n\t\t\t}\n\t\t\tfor (var n=0; n<=11; n++) {\n\t\t\t\twriteByte(std_dc_chrominance_values[n]);\n\t\t\t}\n\t\n\t\t\twriteByte(0x11); // HTUACinfo\n\t\t\tfor (var o=0; o<16; o++) {\n\t\t\t\twriteByte(std_ac_chrominance_nrcodes[o+1]);\n\t\t\t}\n\t\t\tfor (var p=0; p<=161; p++) {\n\t\t\t\twriteByte(std_ac_chrominance_values[p]);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction writeSOS()\n\t\t{\n\t\t\twriteWord(0xFFDA); // marker\n\t\t\twriteWord(12); // length\n\t\t\twriteByte(3); // nrofcomponents\n\t\t\twriteByte(1); // IdY\n\t\t\twriteByte(0); // HTY\n\t\t\twriteByte(2); // IdU\n\t\t\twriteByte(0x11); // HTU\n\t\t\twriteByte(3); // IdV\n\t\t\twriteByte(0x11); // HTV\n\t\t\twriteByte(0); // Ss\n\t\t\twriteByte(0x3f); // Se\n\t\t\twriteByte(0); // Bf\n\t\t}\n\t\t\n\t\tfunction processDU(CDU, fdtbl, DC, HTDC, HTAC){\n\t\t\tvar EOB = HTAC[0x00];\n\t\t\tvar M16zeroes = HTAC[0xF0];\n\t\t\tvar pos;\n\t\t\tconst I16 = 16;\n\t\t\tconst I63 = 63;\n\t\t\tconst I64 = 64;\n\t\t\tvar DU_DCT = fDCTQuant(CDU, fdtbl);\n\t\t\t//ZigZag reorder\n\t\t\tfor (var j=0;j<I64;++j) {\n\t\t\t\tDU[ZigZag[j]]=DU_DCT[j];\n\t\t\t}\n\t\t\tvar Diff = DU[0] - DC; DC = DU[0];\n\t\t\t//Encode DC\n\t\t\tif (Diff==0) {\n\t\t\t\twriteBits(HTDC[0]); // Diff might be 0\n\t\t\t} else {\n\t\t\t\tpos = 32767+Diff;\n\t\t\t\twriteBits(HTDC[category[pos]]);\n\t\t\t\twriteBits(bitcode[pos]);\n\t\t\t}\n\t\t\t//Encode ACs\n\t\t\tvar end0pos = 63; // was const... which is crazy\n\t\t\tfor (; (end0pos>0)&&(DU[end0pos]==0); end0pos--) {};\n\t\t\t//end0pos = first element in reverse order !=0\n\t\t\tif ( end0pos == 0) {\n\t\t\t\twriteBits(EOB);\n\t\t\t\treturn DC;\n\t\t\t}\n\t\t\tvar i = 1;\n\t\t\tvar lng;\n\t\t\twhile ( i <= end0pos ) {\n\t\t\t\tvar startpos = i;\n\t\t\t\tfor (; (DU[i]==0) && (i<=end0pos); ++i) {}\n\t\t\t\tvar nrzeroes = i-startpos;\n\t\t\t\tif ( nrzeroes >= I16 ) {\n\t\t\t\t\tlng = nrzeroes>>4;\n\t\t\t\t\tfor (var nrmarker=1; nrmarker <= lng; ++nrmarker)\n\t\t\t\t\t\twriteBits(M16zeroes);\n\t\t\t\t\tnrzeroes = nrzeroes&0xF;\n\t\t\t\t}\n\t\t\t\tpos = 32767+DU[i];\n\t\t\t\twriteBits(HTAC[(nrzeroes<<4)+category[pos]]);\n\t\t\t\twriteBits(bitcode[pos]);\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tif ( end0pos != I63 ) {\n\t\t\t\twriteBits(EOB);\n\t\t\t}\n\t\t\treturn DC;\n\t\t}\n\n\t\tfunction initCharLookupTable(){\n\t\t\tvar sfcc = String.fromCharCode;\n\t\t\tfor(var i=0; i < 256; i++){ ///// ACHTUNG // 255\n\t\t\t\tclt[i] = sfcc(i);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.encode = function(image,quality) // image data object\n\t\t{\n\t\t\tvar time_start = new Date().getTime();\n\t\t\t\n\t\t\tif(quality) setQuality(quality);\n\t\t\t\n\t\t\t// Initialize bit writer\n\t\t\tbyteout = new Array();\n\t\t\tbytenew=0;\n\t\t\tbytepos=7;\n\t\n\t\t\t// Add JPEG headers\n\t\t\twriteWord(0xFFD8); // SOI\n\t\t\twriteAPP0();\n\t\t\twriteDQT();\n\t\t\twriteSOF0(image.width,image.height);\n\t\t\twriteDHT();\n\t\t\twriteSOS();\n\n\t\n\t\t\t// Encode 8x8 macroblocks\n\t\t\tvar DCY=0;\n\t\t\tvar DCU=0;\n\t\t\tvar DCV=0;\n\t\t\t\n\t\t\tbytenew=0;\n\t\t\tbytepos=7;\n\t\t\t\n\t\t\t\n\t\t\tthis.encode.displayName = \"_encode_\";\n\n\t\t\tvar imageData = image.data;\n\t\t\tvar width = image.width;\n\t\t\tvar height = image.height;\n\n\t\t\tvar quadWidth = width*4;\n\t\t\tvar tripleWidth = width*3;\n\t\t\t\n\t\t\tvar x, y = 0;\n\t\t\tvar r, g, b;\n\t\t\tvar start,p, col,row,pos;\n\t\t\twhile(y < height){\n\t\t\t\tx = 0;\n\t\t\t\twhile(x < quadWidth){\n\t\t\t\tstart = quadWidth * y + x;\n\t\t\t\tp = start;\n\t\t\t\tcol = -1;\n\t\t\t\trow = 0;\n\t\t\t\t\n\t\t\t\tfor(pos=0; pos < 64; pos++){\n\t\t\t\t\trow = pos >> 3;// /8\n\t\t\t\t\tcol = ( pos & 7 ) * 4; // %8\n\t\t\t\t\tp = start + ( row * quadWidth ) + col;\t\t\n\t\t\t\t\t\n\t\t\t\t\tif(y+row >= height){ // padding bottom\n\t\t\t\t\t\tp-= (quadWidth*(y+1+row-height));\n\t\t\t\t\t}\n\n\t\t\t\t\tif(x+col >= quadWidth){ // padding right\t\n\t\t\t\t\t\tp-= ((x+col) - quadWidth +4)\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tr = imageData[ p++ ];\n\t\t\t\t\tg = imageData[ p++ ];\n\t\t\t\t\tb = imageData[ p++ ];\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t/* // calculate YUV values dynamically\n\t\t\t\t\tYDU[pos]=((( 0.29900)*r+( 0.58700)*g+( 0.11400)*b))-128; //-0x80\n\t\t\t\t\tUDU[pos]=(((-0.16874)*r+(-0.33126)*g+( 0.50000)*b));\n\t\t\t\t\tVDU[pos]=((( 0.50000)*r+(-0.41869)*g+(-0.08131)*b));\n\t\t\t\t\t*/\n\t\t\t\t\t\n\t\t\t\t\t// use lookup table (slightly faster)\n\t\t\t\t\tYDU[pos] = ((RGB_YUV_TABLE[r]             + RGB_YUV_TABLE[(g +  256)>>0] + RGB_YUV_TABLE[(b +  512)>>0]) >> 16)-128;\n\t\t\t\t\tUDU[pos] = ((RGB_YUV_TABLE[(r +  768)>>0] + RGB_YUV_TABLE[(g + 1024)>>0] + RGB_YUV_TABLE[(b + 1280)>>0]) >> 16)-128;\n\t\t\t\t\tVDU[pos] = ((RGB_YUV_TABLE[(r + 1280)>>0] + RGB_YUV_TABLE[(g + 1536)>>0] + RGB_YUV_TABLE[(b + 1792)>>0]) >> 16)-128;\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tDCY = processDU(YDU, fdtbl_Y, DCY, YDC_HT, YAC_HT);\n\t\t\t\tDCU = processDU(UDU, fdtbl_UV, DCU, UVDC_HT, UVAC_HT);\n\t\t\t\tDCV = processDU(VDU, fdtbl_UV, DCV, UVDC_HT, UVAC_HT);\n\t\t\t\tx+=32;\n\t\t\t\t}\n\t\t\t\ty+=8;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t////////////////////////////////////////////////////////////////\n\t\n\t\t\t// Do the bit alignment of the EOI marker\n\t\t\tif ( bytepos >= 0 ) {\n\t\t\t\tvar fillbits = [];\n\t\t\t\tfillbits[1] = bytepos+1;\n\t\t\t\tfillbits[0] = (1<<(bytepos+1))-1;\n\t\t\t\twriteBits(fillbits);\n\t\t\t}\n\t\n\t\t\twriteWord(0xFFD9); //EOI\n\n      //return new Uint8Array(byteout);\n      return new Buffer(byteout);\n\n\t\t\tvar jpegDataUri = 'data:image/jpeg;base64,' + btoa(byteout.join(''));\n\t\t\t\n\t\t\tbyteout = [];\n\t\t\t\n\t\t\t// benchmarking\n\t\t\tvar duration = new Date().getTime() - time_start;\n    \t\t//console.log('Encoding time: '+ duration + 'ms');\n    \t\t//\n\t\t\t\n\t\t\treturn jpegDataUri\t\t\t\n\t}\n\t\n\tfunction setQuality(quality){\n\t\tif (quality <= 0) {\n\t\t\tquality = 1;\n\t\t}\n\t\tif (quality > 100) {\n\t\t\tquality = 100;\n\t\t}\n\t\t\n\t\tif(currentQuality == quality) return // don't recalc if unchanged\n\t\t\n\t\tvar sf = 0;\n\t\tif (quality < 50) {\n\t\t\tsf = Math.floor(5000 / quality);\n\t\t} else {\n\t\t\tsf = Math.floor(200 - quality*2);\n\t\t}\n\t\t\n\t\tinitQuantTables(sf);\n\t\tcurrentQuality = quality;\n\t\t//console.log('Quality set to: '+quality +'%');\n\t}\n\t\n\tfunction init(){\n\t\tvar time_start = new Date().getTime();\n\t\tif(!quality) quality = 50;\n\t\t// Create tables\n\t\tinitCharLookupTable()\n\t\tinitHuffmanTbl();\n\t\tinitCategoryNumber();\n\t\tinitRGBYUVTable();\n\t\t\n\t\tsetQuality(quality);\n\t\tvar duration = new Date().getTime() - time_start;\n    \t//console.log('Initialization '+ duration + 'ms');\n\t}\n\t\n\tinit();\n\t\n};\nmodule.exports = encode;\n\nfunction encode(imgData, qu) {\n  if (typeof qu === 'undefined') qu = 50;\n  var encoder = new JPEGEncoder(qu);\n\tvar data = encoder.encode(imgData, qu);\n  return {\n    data: data,\n    width: imgData.width,\n    height: imgData.height\n  };\n}\n\n// helper function to get the imageData of an existing image on the current page.\nfunction getImageDataFromImage(idOrElement){\n\tvar theImg = (typeof(idOrElement)=='string')? document.getElementById(idOrElement):idOrElement;\n\tvar cvs = document.createElement('canvas');\n\tcvs.width = theImg.width;\n\tcvs.height = theImg.height;\n\tvar ctx = cvs.getContext(\"2d\");\n\tctx.drawImage(theImg,0,0);\n\t\n\treturn (ctx.getImageData(0, 0, cvs.width, cvs.height));\n}\n", "/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- /\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\n/*\n   Copyright 2011 notmasteryet\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\n// - The JPEG specification can be found in the ITU CCITT Recommendation T.81\n//   (www.w3.org/Graphics/JPEG/itu-t81.pdf)\n// - The JFIF specification can be found in the JPEG File Interchange Format\n//   (www.w3.org/Graphics/JPEG/jfif3.pdf)\n// - The Adobe Application-Specific JPEG markers in the Supporting the DCT Filters\n//   in PostScript Level 2, Technical Note #5116\n//   (partners.adobe.com/public/developer/en/ps/sdk/5116.DCT_Filter.pdf)\n\nvar JpegImage = (function jpegImage() {\n  \"use strict\";\n  var dctZigZag = new Int32Array([\n     0,\n     1,  8,\n    16,  9,  2,\n     3, 10, 17, 24,\n    32, 25, 18, 11, 4,\n     5, 12, 19, 26, 33, 40,\n    48, 41, 34, 27, 20, 13,  6,\n     7, 14, 21, 28, 35, 42, 49, 56,\n    57, 50, 43, 36, 29, 22, 15,\n    23, 30, 37, 44, 51, 58,\n    59, 52, 45, 38, 31,\n    39, 46, 53, 60,\n    61, 54, 47,\n    55, 62,\n    63\n  ]);\n\n  var dctCos1  =  4017   // cos(pi/16)\n  var dctSin1  =   799   // sin(pi/16)\n  var dctCos3  =  3406   // cos(3*pi/16)\n  var dctSin3  =  2276   // sin(3*pi/16)\n  var dctCos6  =  1567   // cos(6*pi/16)\n  var dctSin6  =  3784   // sin(6*pi/16)\n  var dctSqrt2 =  5793   // sqrt(2)\n  var dctSqrt1d2 = 2896  // sqrt(2) / 2\n\n  function constructor() {\n  }\n\n  function buildHuffmanTable(codeLengths, values) {\n    var k = 0, code = [], i, j, length = 16;\n    while (length > 0 && !codeLengths[length - 1])\n      length--;\n    code.push({children: [], index: 0});\n    var p = code[0], q;\n    for (i = 0; i < length; i++) {\n      for (j = 0; j < codeLengths[i]; j++) {\n        p = code.pop();\n        p.children[p.index] = values[k];\n        while (p.index > 0) {\n          p = code.pop();\n        }\n        p.index++;\n        code.push(p);\n        while (code.length <= i) {\n          code.push(q = {children: [], index: 0});\n          p.children[p.index] = q.children;\n          p = q;\n        }\n        k++;\n      }\n      if (i + 1 < length) {\n        // p here points to last code\n        code.push(q = {children: [], index: 0});\n        p.children[p.index] = q.children;\n        p = q;\n      }\n    }\n    return code[0].children;\n  }\n\n  function decodeScan(data, offset,\n                      frame, components, resetInterval,\n                      spectralStart, spectralEnd,\n                      successivePrev, successive) {\n    var precision = frame.precision;\n    var samplesPerLine = frame.samplesPerLine;\n    var scanLines = frame.scanLines;\n    var mcusPerLine = frame.mcusPerLine;\n    var progressive = frame.progressive;\n    var maxH = frame.maxH, maxV = frame.maxV;\n\n    var startOffset = offset, bitsData = 0, bitsCount = 0;\n    function readBit() {\n      if (bitsCount > 0) {\n        bitsCount--;\n        return (bitsData >> bitsCount) & 1;\n      }\n      bitsData = data[offset++];\n      if (bitsData == 0xFF) {\n        var nextByte = data[offset++];\n        if (nextByte) {\n          throw \"unexpected marker: \" + ((bitsData << 8) | nextByte).toString(16);\n        }\n        // unstuff 0\n      }\n      bitsCount = 7;\n      return bitsData >>> 7;\n    }\n    function decodeHuffman(tree) {\n      var node = tree, bit;\n      while ((bit = readBit()) !== null) {\n        node = node[bit];\n        if (typeof node === 'number')\n          return node;\n        if (typeof node !== 'object')\n          throw \"invalid huffman sequence\";\n      }\n      return null;\n    }\n    function receive(length) {\n      var n = 0;\n      while (length > 0) {\n        var bit = readBit();\n        if (bit === null) return;\n        n = (n << 1) | bit;\n        length--;\n      }\n      return n;\n    }\n    function receiveAndExtend(length) {\n      var n = receive(length);\n      if (n >= 1 << (length - 1))\n        return n;\n      return n + (-1 << length) + 1;\n    }\n    function decodeBaseline(component, zz) {\n      var t = decodeHuffman(component.huffmanTableDC);\n      var diff = t === 0 ? 0 : receiveAndExtend(t);\n      zz[0]= (component.pred += diff);\n      var k = 1;\n      while (k < 64) {\n        var rs = decodeHuffman(component.huffmanTableAC);\n        var s = rs & 15, r = rs >> 4;\n        if (s === 0) {\n          if (r < 15)\n            break;\n          k += 16;\n          continue;\n        }\n        k += r;\n        var z = dctZigZag[k];\n        zz[z] = receiveAndExtend(s);\n        k++;\n      }\n    }\n    function decodeDCFirst(component, zz) {\n      var t = decodeHuffman(component.huffmanTableDC);\n      var diff = t === 0 ? 0 : (receiveAndExtend(t) << successive);\n      zz[0] = (component.pred += diff);\n    }\n    function decodeDCSuccessive(component, zz) {\n      zz[0] |= readBit() << successive;\n    }\n    var eobrun = 0;\n    function decodeACFirst(component, zz) {\n      if (eobrun > 0) {\n        eobrun--;\n        return;\n      }\n      var k = spectralStart, e = spectralEnd;\n      while (k <= e) {\n        var rs = decodeHuffman(component.huffmanTableAC);\n        var s = rs & 15, r = rs >> 4;\n        if (s === 0) {\n          if (r < 15) {\n            eobrun = receive(r) + (1 << r) - 1;\n            break;\n          }\n          k += 16;\n          continue;\n        }\n        k += r;\n        var z = dctZigZag[k];\n        zz[z] = receiveAndExtend(s) * (1 << successive);\n        k++;\n      }\n    }\n    var successiveACState = 0, successiveACNextValue;\n    function decodeACSuccessive(component, zz) {\n      var k = spectralStart, e = spectralEnd, r = 0;\n      while (k <= e) {\n        var z = dctZigZag[k];\n        switch (successiveACState) {\n        case 0: // initial state\n          var rs = decodeHuffman(component.huffmanTableAC);\n          var s = rs & 15, r = rs >> 4;\n          if (s === 0) {\n            if (r < 15) {\n              eobrun = receive(r) + (1 << r);\n              successiveACState = 4;\n            } else {\n              r = 16;\n              successiveACState = 1;\n            }\n          } else {\n            if (s !== 1)\n              throw \"invalid ACn encoding\";\n            successiveACNextValue = receiveAndExtend(s);\n            successiveACState = r ? 2 : 3;\n          }\n          continue;\n        case 1: // skipping r zero items\n        case 2:\n          if (zz[z])\n            zz[z] += (readBit() << successive);\n          else {\n            r--;\n            if (r === 0)\n              successiveACState = successiveACState == 2 ? 3 : 0;\n          }\n          break;\n        case 3: // set value for a zero item\n          if (zz[z])\n            zz[z] += (readBit() << successive);\n          else {\n            zz[z] = successiveACNextValue << successive;\n            successiveACState = 0;\n          }\n          break;\n        case 4: // eob\n          if (zz[z])\n            zz[z] += (readBit() << successive);\n          break;\n        }\n        k++;\n      }\n      if (successiveACState === 4) {\n        eobrun--;\n        if (eobrun === 0)\n          successiveACState = 0;\n      }\n    }\n    function decodeMcu(component, decode, mcu, row, col) {\n      var mcuRow = (mcu / mcusPerLine) | 0;\n      var mcuCol = mcu % mcusPerLine;\n      var blockRow = mcuRow * component.v + row;\n      var blockCol = mcuCol * component.h + col;\n      decode(component, component.blocks[blockRow][blockCol]);\n    }\n    function decodeBlock(component, decode, mcu) {\n      var blockRow = (mcu / component.blocksPerLine) | 0;\n      var blockCol = mcu % component.blocksPerLine;\n      decode(component, component.blocks[blockRow][blockCol]);\n    }\n\n    var componentsLength = components.length;\n    var component, i, j, k, n;\n    var decodeFn;\n    if (progressive) {\n      if (spectralStart === 0)\n        decodeFn = successivePrev === 0 ? decodeDCFirst : decodeDCSuccessive;\n      else\n        decodeFn = successivePrev === 0 ? decodeACFirst : decodeACSuccessive;\n    } else {\n      decodeFn = decodeBaseline;\n    }\n\n    var mcu = 0, marker;\n    var mcuExpected;\n    if (componentsLength == 1) {\n      mcuExpected = components[0].blocksPerLine * components[0].blocksPerColumn;\n    } else {\n      mcuExpected = mcusPerLine * frame.mcusPerColumn;\n    }\n    if (!resetInterval) resetInterval = mcuExpected;\n\n    var h, v;\n    while (mcu < mcuExpected) {\n      // reset interval stuff\n      for (i = 0; i < componentsLength; i++)\n        components[i].pred = 0;\n      eobrun = 0;\n\n      if (componentsLength == 1) {\n        component = components[0];\n        for (n = 0; n < resetInterval; n++) {\n          decodeBlock(component, decodeFn, mcu);\n          mcu++;\n        }\n      } else {\n        for (n = 0; n < resetInterval; n++) {\n          for (i = 0; i < componentsLength; i++) {\n            component = components[i];\n            h = component.h;\n            v = component.v;\n            for (j = 0; j < v; j++) {\n              for (k = 0; k < h; k++) {\n                decodeMcu(component, decodeFn, mcu, j, k);\n              }\n            }\n          }\n          mcu++;\n\n          // If we've reached our expected MCU's, stop decoding\n          if (mcu === mcuExpected) break;\n        }\n      }\n\n      // find marker\n      bitsCount = 0;\n      marker = (data[offset] << 8) | data[offset + 1];\n      if (marker < 0xFF00) {\n        throw \"marker was not found\";\n      }\n\n      if (marker >= 0xFFD0 && marker <= 0xFFD7) { // RSTx\n        offset += 2;\n      }\n      else\n        break;\n    }\n\n    return offset - startOffset;\n  }\n\n  function buildComponentData(frame, component) {\n    var lines = [];\n    var blocksPerLine = component.blocksPerLine;\n    var blocksPerColumn = component.blocksPerColumn;\n    var samplesPerLine = blocksPerLine << 3;\n    var R = new Int32Array(64), r = new Uint8Array(64);\n\n    // A port of poppler's IDCT method which in turn is taken from:\n    //   Christoph Loeffler, Adriaan Ligtenberg, George S. Moschytz,\n    //   \"Practical Fast 1-D DCT Algorithms with 11 Multiplications\",\n    //   IEEE Intl. Conf. on Acoustics, Speech & Signal Processing, 1989,\n    //   988-991.\n    function quantizeAndInverse(zz, dataOut, dataIn) {\n      var qt = component.quantizationTable;\n      var v0, v1, v2, v3, v4, v5, v6, v7, t;\n      var p = dataIn;\n      var i;\n\n      // dequant\n      for (i = 0; i < 64; i++)\n        p[i] = zz[i] * qt[i];\n\n      // inverse DCT on rows\n      for (i = 0; i < 8; ++i) {\n        var row = 8 * i;\n\n        // check for all-zero AC coefficients\n        if (p[1 + row] == 0 && p[2 + row] == 0 && p[3 + row] == 0 &&\n            p[4 + row] == 0 && p[5 + row] == 0 && p[6 + row] == 0 &&\n            p[7 + row] == 0) {\n          t = (dctSqrt2 * p[0 + row] + 512) >> 10;\n          p[0 + row] = t;\n          p[1 + row] = t;\n          p[2 + row] = t;\n          p[3 + row] = t;\n          p[4 + row] = t;\n          p[5 + row] = t;\n          p[6 + row] = t;\n          p[7 + row] = t;\n          continue;\n        }\n\n        // stage 4\n        v0 = (dctSqrt2 * p[0 + row] + 128) >> 8;\n        v1 = (dctSqrt2 * p[4 + row] + 128) >> 8;\n        v2 = p[2 + row];\n        v3 = p[6 + row];\n        v4 = (dctSqrt1d2 * (p[1 + row] - p[7 + row]) + 128) >> 8;\n        v7 = (dctSqrt1d2 * (p[1 + row] + p[7 + row]) + 128) >> 8;\n        v5 = p[3 + row] << 4;\n        v6 = p[5 + row] << 4;\n\n        // stage 3\n        t = (v0 - v1+ 1) >> 1;\n        v0 = (v0 + v1 + 1) >> 1;\n        v1 = t;\n        t = (v2 * dctSin6 + v3 * dctCos6 + 128) >> 8;\n        v2 = (v2 * dctCos6 - v3 * dctSin6 + 128) >> 8;\n        v3 = t;\n        t = (v4 - v6 + 1) >> 1;\n        v4 = (v4 + v6 + 1) >> 1;\n        v6 = t;\n        t = (v7 + v5 + 1) >> 1;\n        v5 = (v7 - v5 + 1) >> 1;\n        v7 = t;\n\n        // stage 2\n        t = (v0 - v3 + 1) >> 1;\n        v0 = (v0 + v3 + 1) >> 1;\n        v3 = t;\n        t = (v1 - v2 + 1) >> 1;\n        v1 = (v1 + v2 + 1) >> 1;\n        v2 = t;\n        t = (v4 * dctSin3 + v7 * dctCos3 + 2048) >> 12;\n        v4 = (v4 * dctCos3 - v7 * dctSin3 + 2048) >> 12;\n        v7 = t;\n        t = (v5 * dctSin1 + v6 * dctCos1 + 2048) >> 12;\n        v5 = (v5 * dctCos1 - v6 * dctSin1 + 2048) >> 12;\n        v6 = t;\n\n        // stage 1\n        p[0 + row] = v0 + v7;\n        p[7 + row] = v0 - v7;\n        p[1 + row] = v1 + v6;\n        p[6 + row] = v1 - v6;\n        p[2 + row] = v2 + v5;\n        p[5 + row] = v2 - v5;\n        p[3 + row] = v3 + v4;\n        p[4 + row] = v3 - v4;\n      }\n\n      // inverse DCT on columns\n      for (i = 0; i < 8; ++i) {\n        var col = i;\n\n        // check for all-zero AC coefficients\n        if (p[1*8 + col] == 0 && p[2*8 + col] == 0 && p[3*8 + col] == 0 &&\n            p[4*8 + col] == 0 && p[5*8 + col] == 0 && p[6*8 + col] == 0 &&\n            p[7*8 + col] == 0) {\n          t = (dctSqrt2 * dataIn[i+0] + 8192) >> 14;\n          p[0*8 + col] = t;\n          p[1*8 + col] = t;\n          p[2*8 + col] = t;\n          p[3*8 + col] = t;\n          p[4*8 + col] = t;\n          p[5*8 + col] = t;\n          p[6*8 + col] = t;\n          p[7*8 + col] = t;\n          continue;\n        }\n\n        // stage 4\n        v0 = (dctSqrt2 * p[0*8 + col] + 2048) >> 12;\n        v1 = (dctSqrt2 * p[4*8 + col] + 2048) >> 12;\n        v2 = p[2*8 + col];\n        v3 = p[6*8 + col];\n        v4 = (dctSqrt1d2 * (p[1*8 + col] - p[7*8 + col]) + 2048) >> 12;\n        v7 = (dctSqrt1d2 * (p[1*8 + col] + p[7*8 + col]) + 2048) >> 12;\n        v5 = p[3*8 + col];\n        v6 = p[5*8 + col];\n\n        // stage 3\n        t = (v0 - v1 + 1) >> 1;\n        v0 = (v0 + v1 + 1) >> 1;\n        v1 = t;\n        t = (v2 * dctSin6 + v3 * dctCos6 + 2048) >> 12;\n        v2 = (v2 * dctCos6 - v3 * dctSin6 + 2048) >> 12;\n        v3 = t;\n        t = (v4 - v6 + 1) >> 1;\n        v4 = (v4 + v6 + 1) >> 1;\n        v6 = t;\n        t = (v7 + v5 + 1) >> 1;\n        v5 = (v7 - v5 + 1) >> 1;\n        v7 = t;\n\n        // stage 2\n        t = (v0 - v3 + 1) >> 1;\n        v0 = (v0 + v3 + 1) >> 1;\n        v3 = t;\n        t = (v1 - v2 + 1) >> 1;\n        v1 = (v1 + v2 + 1) >> 1;\n        v2 = t;\n        t = (v4 * dctSin3 + v7 * dctCos3 + 2048) >> 12;\n        v4 = (v4 * dctCos3 - v7 * dctSin3 + 2048) >> 12;\n        v7 = t;\n        t = (v5 * dctSin1 + v6 * dctCos1 + 2048) >> 12;\n        v5 = (v5 * dctCos1 - v6 * dctSin1 + 2048) >> 12;\n        v6 = t;\n\n        // stage 1\n        p[0*8 + col] = v0 + v7;\n        p[7*8 + col] = v0 - v7;\n        p[1*8 + col] = v1 + v6;\n        p[6*8 + col] = v1 - v6;\n        p[2*8 + col] = v2 + v5;\n        p[5*8 + col] = v2 - v5;\n        p[3*8 + col] = v3 + v4;\n        p[4*8 + col] = v3 - v4;\n      }\n\n      // convert to 8-bit integers\n      for (i = 0; i < 64; ++i) {\n        var sample = 128 + ((p[i] + 8) >> 4);\n        dataOut[i] = sample < 0 ? 0 : sample > 0xFF ? 0xFF : sample;\n      }\n    }\n\n    var i, j;\n    for (var blockRow = 0; blockRow < blocksPerColumn; blockRow++) {\n      var scanLine = blockRow << 3;\n      for (i = 0; i < 8; i++)\n        lines.push(new Uint8Array(samplesPerLine));\n      for (var blockCol = 0; blockCol < blocksPerLine; blockCol++) {\n        quantizeAndInverse(component.blocks[blockRow][blockCol], r, R);\n\n        var offset = 0, sample = blockCol << 3;\n        for (j = 0; j < 8; j++) {\n          var line = lines[scanLine + j];\n          for (i = 0; i < 8; i++)\n            line[sample + i] = r[offset++];\n        }\n      }\n    }\n    return lines;\n  }\n\n  function clampTo8bit(a) {\n    return a < 0 ? 0 : a > 255 ? 255 : a;\n  }\n\n  constructor.prototype = {\n    load: function load(path) {\n      var xhr = new XMLHttpRequest();\n      xhr.open(\"GET\", path, true);\n      xhr.responseType = \"arraybuffer\";\n      xhr.onload = (function() {\n        // TODO catch parse error\n        var data = new Uint8Array(xhr.response || xhr.mozResponseArrayBuffer);\n        this.parse(data);\n        if (this.onload)\n          this.onload();\n      }).bind(this);\n      xhr.send(null);\n    },\n    parse: function parse(data) {\n      var offset = 0, length = data.length;\n      function readUint16() {\n        var value = (data[offset] << 8) | data[offset + 1];\n        offset += 2;\n        return value;\n      }\n      function readDataBlock() {\n        var length = readUint16();\n        var array = data.subarray(offset, offset + length - 2);\n        offset += array.length;\n        return array;\n      }\n      function prepareComponents(frame) {\n        var maxH = 0, maxV = 0;\n        var component, componentId;\n        for (componentId in frame.components) {\n          if (frame.components.hasOwnProperty(componentId)) {\n            component = frame.components[componentId];\n            if (maxH < component.h) maxH = component.h;\n            if (maxV < component.v) maxV = component.v;\n          }\n        }\n        var mcusPerLine = Math.ceil(frame.samplesPerLine / 8 / maxH);\n        var mcusPerColumn = Math.ceil(frame.scanLines / 8 / maxV);\n        for (componentId in frame.components) {\n          if (frame.components.hasOwnProperty(componentId)) {\n            component = frame.components[componentId];\n            var blocksPerLine = Math.ceil(Math.ceil(frame.samplesPerLine / 8) * component.h / maxH);\n            var blocksPerColumn = Math.ceil(Math.ceil(frame.scanLines  / 8) * component.v / maxV);\n            var blocksPerLineForMcu = mcusPerLine * component.h;\n            var blocksPerColumnForMcu = mcusPerColumn * component.v;\n            var blocks = [];\n            for (var i = 0; i < blocksPerColumnForMcu; i++) {\n              var row = [];\n              for (var j = 0; j < blocksPerLineForMcu; j++)\n                row.push(new Int32Array(64));\n              blocks.push(row);\n            }\n            component.blocksPerLine = blocksPerLine;\n            component.blocksPerColumn = blocksPerColumn;\n            component.blocks = blocks;\n          }\n        }\n        frame.maxH = maxH;\n        frame.maxV = maxV;\n        frame.mcusPerLine = mcusPerLine;\n        frame.mcusPerColumn = mcusPerColumn;\n      }\n      var jfif = null;\n      var adobe = null;\n      var pixels = null;\n      var frame, resetInterval;\n      var quantizationTables = [], frames = [];\n      var huffmanTablesAC = [], huffmanTablesDC = [];\n      var fileMarker = readUint16();\n      if (fileMarker != 0xFFD8) { // SOI (Start of Image)\n        throw \"SOI not found\";\n      }\n\n      fileMarker = readUint16();\n      while (fileMarker != 0xFFD9) { // EOI (End of image)\n        var i, j, l;\n        switch(fileMarker) {\n          case 0xFF00: break;\n          case 0xFFE0: // APP0 (Application Specific)\n          case 0xFFE1: // APP1\n          case 0xFFE2: // APP2\n          case 0xFFE3: // APP3\n          case 0xFFE4: // APP4\n          case 0xFFE5: // APP5\n          case 0xFFE6: // APP6\n          case 0xFFE7: // APP7\n          case 0xFFE8: // APP8\n          case 0xFFE9: // APP9\n          case 0xFFEA: // APP10\n          case 0xFFEB: // APP11\n          case 0xFFEC: // APP12\n          case 0xFFED: // APP13\n          case 0xFFEE: // APP14\n          case 0xFFEF: // APP15\n          case 0xFFFE: // COM (Comment)\n            var appData = readDataBlock();\n\n            if (fileMarker === 0xFFE0) {\n              if (appData[0] === 0x4A && appData[1] === 0x46 && appData[2] === 0x49 &&\n                appData[3] === 0x46 && appData[4] === 0) { // 'JFIF\\x00'\n                jfif = {\n                  version: { major: appData[5], minor: appData[6] },\n                  densityUnits: appData[7],\n                  xDensity: (appData[8] << 8) | appData[9],\n                  yDensity: (appData[10] << 8) | appData[11],\n                  thumbWidth: appData[12],\n                  thumbHeight: appData[13],\n                  thumbData: appData.subarray(14, 14 + 3 * appData[12] * appData[13])\n                };\n              }\n            }\n            // TODO APP1 - Exif\n            if (fileMarker === 0xFFEE) {\n              if (appData[0] === 0x41 && appData[1] === 0x64 && appData[2] === 0x6F &&\n                appData[3] === 0x62 && appData[4] === 0x65 && appData[5] === 0) { // 'Adobe\\x00'\n                adobe = {\n                  version: appData[6],\n                  flags0: (appData[7] << 8) | appData[8],\n                  flags1: (appData[9] << 8) | appData[10],\n                  transformCode: appData[11]\n                };\n              }\n            }\n            break;\n\n          case 0xFFDB: // DQT (Define Quantization Tables)\n            var quantizationTablesLength = readUint16();\n            var quantizationTablesEnd = quantizationTablesLength + offset - 2;\n            while (offset < quantizationTablesEnd) {\n              var quantizationTableSpec = data[offset++];\n              var tableData = new Int32Array(64);\n              if ((quantizationTableSpec >> 4) === 0) { // 8 bit values\n                for (j = 0; j < 64; j++) {\n                  var z = dctZigZag[j];\n                  tableData[z] = data[offset++];\n                }\n              } else if ((quantizationTableSpec >> 4) === 1) { //16 bit\n                for (j = 0; j < 64; j++) {\n                  var z = dctZigZag[j];\n                  tableData[z] = readUint16();\n                }\n              } else\n                throw \"DQT: invalid table spec\";\n              quantizationTables[quantizationTableSpec & 15] = tableData;\n            }\n            break;\n\n          case 0xFFC0: // SOF0 (Start of Frame, Baseline DCT)\n          case 0xFFC1: // SOF1 (Start of Frame, Extended DCT)\n          case 0xFFC2: // SOF2 (Start of Frame, Progressive DCT)\n            readUint16(); // skip data length\n            frame = {};\n            frame.extended = (fileMarker === 0xFFC1);\n            frame.progressive = (fileMarker === 0xFFC2);\n            frame.precision = data[offset++];\n            frame.scanLines = readUint16();\n            frame.samplesPerLine = readUint16();\n            frame.components = {};\n            frame.componentsOrder = [];\n            var componentsCount = data[offset++], componentId;\n            var maxH = 0, maxV = 0;\n            for (i = 0; i < componentsCount; i++) {\n              componentId = data[offset];\n              var h = data[offset + 1] >> 4;\n              var v = data[offset + 1] & 15;\n              var qId = data[offset + 2];\n              frame.componentsOrder.push(componentId);\n              frame.components[componentId] = {\n                h: h,\n                v: v,\n                quantizationTable: quantizationTables[qId]\n              };\n              offset += 3;\n            }\n            prepareComponents(frame);\n            frames.push(frame);\n            break;\n\n          case 0xFFC4: // DHT (Define Huffman Tables)\n            var huffmanLength = readUint16();\n            for (i = 2; i < huffmanLength;) {\n              var huffmanTableSpec = data[offset++];\n              var codeLengths = new Uint8Array(16);\n              var codeLengthSum = 0;\n              for (j = 0; j < 16; j++, offset++)\n                codeLengthSum += (codeLengths[j] = data[offset]);\n              var huffmanValues = new Uint8Array(codeLengthSum);\n              for (j = 0; j < codeLengthSum; j++, offset++)\n                huffmanValues[j] = data[offset];\n              i += 17 + codeLengthSum;\n\n              ((huffmanTableSpec >> 4) === 0 ? \n                huffmanTablesDC : huffmanTablesAC)[huffmanTableSpec & 15] =\n                buildHuffmanTable(codeLengths, huffmanValues);\n            }\n            break;\n\n          case 0xFFDD: // DRI (Define Restart Interval)\n            readUint16(); // skip data length\n            resetInterval = readUint16();\n            break;\n\n          case 0xFFDA: // SOS (Start of Scan)\n            var scanLength = readUint16();\n            var selectorsCount = data[offset++];\n            var components = [], component;\n            for (i = 0; i < selectorsCount; i++) {\n              component = frame.components[data[offset++]];\n              var tableSpec = data[offset++];\n              component.huffmanTableDC = huffmanTablesDC[tableSpec >> 4];\n              component.huffmanTableAC = huffmanTablesAC[tableSpec & 15];\n              components.push(component);\n            }\n            var spectralStart = data[offset++];\n            var spectralEnd = data[offset++];\n            var successiveApproximation = data[offset++];\n            var processed = decodeScan(data, offset,\n              frame, components, resetInterval,\n              spectralStart, spectralEnd,\n              successiveApproximation >> 4, successiveApproximation & 15);\n            offset += processed;\n            break;\n          default:\n            if (data[offset - 3] == 0xFF &&\n                data[offset - 2] >= 0xC0 && data[offset - 2] <= 0xFE) {\n              // could be incorrect encoding -- last 0xFF byte of the previous\n              // block was eaten by the encoder\n              offset -= 3;\n              break;\n            }\n            throw \"unknown JPEG marker \" + fileMarker.toString(16);\n        }\n        fileMarker = readUint16();\n      }\n      if (frames.length != 1)\n        throw \"only single frame JPEGs supported\";\n\n      this.width = frame.samplesPerLine;\n      this.height = frame.scanLines;\n      this.jfif = jfif;\n      this.adobe = adobe;\n      this.components = [];\n      for (var i = 0; i < frame.componentsOrder.length; i++) {\n        var component = frame.components[frame.componentsOrder[i]];\n        this.components.push({\n          lines: buildComponentData(frame, component),\n          scaleX: component.h / frame.maxH,\n          scaleY: component.v / frame.maxV\n        });\n      }\n    },\n    getData: function getData(width, height) {\n      var scaleX = this.width / width, scaleY = this.height / height;\n\n      var component1, component2, component3, component4;\n      var component1Line, component2Line, component3Line, component4Line;\n      var x, y;\n      var offset = 0;\n      var Y, Cb, Cr, K, C, M, Ye, R, G, B;\n      var colorTransform;\n      var dataLength = width * height * this.components.length;\n      var data = new Uint8Array(dataLength);\n      switch (this.components.length) {\n        case 1:\n          component1 = this.components[0];\n          for (y = 0; y < height; y++) {\n            component1Line = component1.lines[0 | (y * component1.scaleY * scaleY)];\n            for (x = 0; x < width; x++) {\n              Y = component1Line[0 | (x * component1.scaleX * scaleX)];\n\n              data[offset++] = Y;\n            }\n          }\n          break;\n        case 2:\n          // PDF might compress two component data in custom colorspace\n          component1 = this.components[0];\n          component2 = this.components[1];\n          for (y = 0; y < height; y++) {\n            component1Line = component1.lines[0 | (y * component1.scaleY * scaleY)];\n            component2Line = component2.lines[0 | (y * component2.scaleY * scaleY)];\n            for (x = 0; x < width; x++) {\n              Y = component1Line[0 | (x * component1.scaleX * scaleX)];\n              data[offset++] = Y;\n              Y = component2Line[0 | (x * component2.scaleX * scaleX)];\n              data[offset++] = Y;\n            }\n          }\n          break;\n        case 3:\n          // The default transform for three components is true\n          colorTransform = true;\n          // The adobe transform marker overrides any previous setting\n          if (this.adobe && this.adobe.transformCode)\n            colorTransform = true;\n          else if (typeof this.colorTransform !== 'undefined')\n            colorTransform = !!this.colorTransform;\n\n          component1 = this.components[0];\n          component2 = this.components[1];\n          component3 = this.components[2];\n          for (y = 0; y < height; y++) {\n            component1Line = component1.lines[0 | (y * component1.scaleY * scaleY)];\n            component2Line = component2.lines[0 | (y * component2.scaleY * scaleY)];\n            component3Line = component3.lines[0 | (y * component3.scaleY * scaleY)];\n            for (x = 0; x < width; x++) {\n              if (!colorTransform) {\n                R = component1Line[0 | (x * component1.scaleX * scaleX)];\n                G = component2Line[0 | (x * component2.scaleX * scaleX)];\n                B = component3Line[0 | (x * component3.scaleX * scaleX)];\n              } else {\n                Y = component1Line[0 | (x * component1.scaleX * scaleX)];\n                Cb = component2Line[0 | (x * component2.scaleX * scaleX)];\n                Cr = component3Line[0 | (x * component3.scaleX * scaleX)];\n\n                R = clampTo8bit(Y + 1.402 * (Cr - 128));\n                G = clampTo8bit(Y - 0.3441363 * (Cb - 128) - 0.71413636 * (Cr - 128));\n                B = clampTo8bit(Y + 1.772 * (Cb - 128));\n              }\n\n              data[offset++] = R;\n              data[offset++] = G;\n              data[offset++] = B;\n            }\n          }\n          break;\n        case 4:\n          if (!this.adobe)\n            throw 'Unsupported color mode (4 components)';\n          // The default transform for four components is false\n          colorTransform = false;\n          // The adobe transform marker overrides any previous setting\n          if (this.adobe && this.adobe.transformCode)\n            colorTransform = true;\n          else if (typeof this.colorTransform !== 'undefined')\n            colorTransform = !!this.colorTransform;\n\n          component1 = this.components[0];\n          component2 = this.components[1];\n          component3 = this.components[2];\n          component4 = this.components[3];\n          for (y = 0; y < height; y++) {\n            component1Line = component1.lines[0 | (y * component1.scaleY * scaleY)];\n            component2Line = component2.lines[0 | (y * component2.scaleY * scaleY)];\n            component3Line = component3.lines[0 | (y * component3.scaleY * scaleY)];\n            component4Line = component4.lines[0 | (y * component4.scaleY * scaleY)];\n            for (x = 0; x < width; x++) {\n              if (!colorTransform) {\n                C = component1Line[0 | (x * component1.scaleX * scaleX)];\n                M = component2Line[0 | (x * component2.scaleX * scaleX)];\n                Ye = component3Line[0 | (x * component3.scaleX * scaleX)];\n                K = component4Line[0 | (x * component4.scaleX * scaleX)];\n              } else {\n                Y = component1Line[0 | (x * component1.scaleX * scaleX)];\n                Cb = component2Line[0 | (x * component2.scaleX * scaleX)];\n                Cr = component3Line[0 | (x * component3.scaleX * scaleX)];\n                K = component4Line[0 | (x * component4.scaleX * scaleX)];\n\n                C = 255 - clampTo8bit(Y + 1.402 * (Cr - 128));\n                M = 255 - clampTo8bit(Y - 0.3441363 * (Cb - 128) - 0.71413636 * (Cr - 128));\n                Ye = 255 - clampTo8bit(Y + 1.772 * (Cb - 128));\n              }\n              data[offset++] = C;\n              data[offset++] = M;\n              data[offset++] = Ye;\n              data[offset++] = K;\n            }\n          }\n          break;\n        default:\n          throw 'Unsupported color mode';\n      }\n      return data;\n    },\n    copyToImageData: function copyToImageData(imageData) {\n      var width = imageData.width, height = imageData.height;\n      var imageDataArray = imageData.data;\n      var data = this.getData(width, height);\n      var i = 0, j = 0, x, y;\n      var Y, K, C, M, R, G, B;\n      switch (this.components.length) {\n        case 1:\n          for (y = 0; y < height; y++) {\n            for (x = 0; x < width; x++) {\n              Y = data[i++];\n\n              imageDataArray[j++] = Y;\n              imageDataArray[j++] = Y;\n              imageDataArray[j++] = Y;\n              imageDataArray[j++] = 255;\n            }\n          }\n          break;\n        case 3:\n          for (y = 0; y < height; y++) {\n            for (x = 0; x < width; x++) {\n              R = data[i++];\n              G = data[i++];\n              B = data[i++];\n\n              imageDataArray[j++] = R;\n              imageDataArray[j++] = G;\n              imageDataArray[j++] = B;\n              imageDataArray[j++] = 255;\n            }\n          }\n          break;\n        case 4:\n          for (y = 0; y < height; y++) {\n            for (x = 0; x < width; x++) {\n              C = data[i++];\n              M = data[i++];\n              Y = data[i++];\n              K = data[i++];\n\n              R = 255 - clampTo8bit(C * (1 - K / 255) + K);\n              G = 255 - clampTo8bit(M * (1 - K / 255) + K);\n              B = 255 - clampTo8bit(Y * (1 - K / 255) + K);\n\n              imageDataArray[j++] = R;\n              imageDataArray[j++] = G;\n              imageDataArray[j++] = B;\n              imageDataArray[j++] = 255;\n            }\n          }\n          break;\n        default:\n          throw 'Unsupported color mode';\n      }\n    }\n  };\n\n  return constructor;\n})();\nmodule.exports = decode;\n\nfunction decode(jpegData) {\n  var arr = new Uint8Array(jpegData);\n  var decoder = new JpegImage();\n  decoder.parse(arr);\n  var data =  decoder.getData(decoder.width, decoder.height);\n  var buf = new Buffer(decoder.width * decoder.height * 4);\n  var n = 0;\n  for (var i = 0; i < buf.length; i++) {\n    buf[i + (i/3 | 0)] = data[n++];\n    if (i % 4 == 3) buf[i] = 255;\n  }\n  return {\n    data: buf,\n    width: decoder.width,\n    height: decoder.height\n  };\n}\n", "var encode = require('./lib/encoder'),\n    decode = require('./lib/decoder');\n\nmodule.exports = {\n  encode: encode,\n  decode: decode\n};\n", "'use strict';\n\n\nvar util = require('util');\nvar Stream = require('stream');\n\n\nvar ChunkStream = module.exports = function() {\n  Stream.call(this);\n\n  this._buffers = [];\n  this._buffered = 0;\n\n  this._reads = [];\n  this._paused = false;\n\n  this._encoding = 'utf8';\n  this.writable = true;\n};\nutil.inherits(ChunkStream, Stream);\n\n\nChunkStream.prototype.read = function(length, callback) {\n\n  this._reads.push({\n    length: Math.abs(length),  // if length < 0 then at most this length\n    allowLess: length < 0,\n    func: callback\n  });\n\n  process.nextTick(function() {\n    this._process();\n\n    // its paused and there is not enought data then ask for more\n    if (this._paused && this._reads.length > 0) {\n      this._paused = false;\n\n      this.emit('drain');\n    }\n  }.bind(this));\n};\n\nChunkStream.prototype.write = function(data, encoding) {\n\n  if (!this.writable) {\n    this.emit('error', new Error('Stream not writable'));\n    return false;\n  }\n\n  var dataBuffer;\n  if (Buffer.isBuffer(data)) {\n    dataBuffer = data;\n  }\n  else {\n    dataBuffer = new Buffer(data, encoding || this._encoding);\n  }\n\n  this._buffers.push(dataBuffer);\n  this._buffered += dataBuffer.length;\n\n  this._process();\n\n  // ok if there are no more read requests\n  if (this._reads && this._reads.length === 0) {\n    this._paused = true;\n  }\n\n  return this.writable && !this._paused;\n};\n\nChunkStream.prototype.end = function(data, encoding) {\n\n  if (data) {\n    this.write(data, encoding);\n  }\n\n  this.writable = false;\n\n  // already destroyed\n  if (!this._buffers) {\n    return;\n  }\n\n  // enqueue or handle end\n  if (this._buffers.length === 0) {\n    this._end();\n  }\n  else {\n    this._buffers.push(null);\n    this._process();\n  }\n};\n\nChunkStream.prototype.destroySoon = ChunkStream.prototype.end;\n\nChunkStream.prototype._end = function() {\n\n  if (this._reads.length > 0) {\n    this.emit('error',\n      new Error('There are some read requests waitng on finished stream')\n    );\n  }\n\n  this.destroy();\n};\n\nChunkStream.prototype.destroy = function() {\n\n  if (!this._buffers) {\n    return;\n  }\n\n  this.writable = false;\n  this._reads = null;\n  this._buffers = null;\n\n  this.emit('close');\n};\n\nChunkStream.prototype._processReadAllowingLess = function(read) {\n  // ok there is any data so that we can satisfy this request\n  this._reads.shift(); // == read\n\n  // first we need to peek into first buffer\n  var smallerBuf = this._buffers[0];\n\n  // ok there is more data than we need\n  if (smallerBuf.length > read.length) {\n\n    this._buffered -= read.length;\n    this._buffers[0] = smallerBuf.slice(read.length);\n\n    read.func.call(this, smallerBuf.slice(0, read.length));\n\n  }\n  else {\n    // ok this is less than maximum length so use it all\n    this._buffered -= smallerBuf.length;\n    this._buffers.shift(); // == smallerBuf\n\n    read.func.call(this, smallerBuf);\n  }\n};\n\nChunkStream.prototype._processRead = function(read) {\n  this._reads.shift(); // == read\n\n  var pos = 0;\n  var count = 0;\n  var data = new Buffer(read.length);\n\n  // create buffer for all data\n  while (pos < read.length) {\n\n    var buf = this._buffers[count++];\n    var len = Math.min(buf.length, read.length - pos);\n\n    buf.copy(data, pos, 0, len);\n    pos += len;\n\n    // last buffer wasn't used all so just slice it and leave\n    if (len !== buf.length) {\n      this._buffers[--count] = buf.slice(len);\n    }\n  }\n\n  // remove all used buffers\n  if (count > 0) {\n    this._buffers.splice(0, count);\n  }\n\n  this._buffered -= read.length;\n\n  read.func.call(this, data);\n};\n\nChunkStream.prototype._process = function() {\n\n  try {\n    // as long as there is any data and read requests\n    while (this._buffered > 0 && this._reads && this._reads.length > 0) {\n\n      var read = this._reads[0];\n\n      // read any data (but no more than length)\n      if (read.allowLess) {\n        this._processReadAllowingLess(read);\n\n      }\n      else if (this._buffered >= read.length) {\n        // ok we can meet some expectations\n\n        this._processRead(read);\n      }\n      else {\n        // not enought data to satisfy first request in queue\n        // so we need to wait for more\n        break;\n      }\n    }\n\n    if (this._buffers && this._buffers.length > 0 && this._buffers[0] === null) {\n      this._end();\n    }\n  }\n  catch (ex) {\n    this.emit('error', ex);\n  }\n};\n", "'use strict';\n\n// Adam 7\n//   0 1 2 3 4 5 6 7\n// 0 x 6 4 6 x 6 4 6\n// 1 7 7 7 7 7 7 7 7\n// 2 5 6 5 6 5 6 5 6\n// 3 7 7 7 7 7 7 7 7\n// 4 3 6 4 6 3 6 4 6\n// 5 7 7 7 7 7 7 7 7\n// 6 5 6 5 6 5 6 5 6\n// 7 7 7 7 7 7 7 7 7\n\n\nvar imagePasses = [\n  { // pass 1 - 1px\n    x: [0],\n    y: [0]\n  },\n  { // pass 2 - 1px\n    x: [4],\n    y: [0]\n  },\n  { // pass 3 - 2px\n    x: [0, 4],\n    y: [4]\n  },\n  { // pass 4 - 4px\n    x: [2, 6],\n    y: [0, 4]\n  },\n  { // pass 5 - 8px\n    x: [0, 2, 4, 6],\n    y: [2, 6]\n  },\n  { // pass 6 - 16px\n    x: [1, 3, 5, 7],\n    y: [0, 2, 4, 6]\n  },\n  { // pass 7 - 32px\n    x: [0, 1, 2, 3, 4, 5, 6, 7],\n    y: [1, 3, 5, 7]\n  }\n];\n\nexports.getImagePasses = function(width, height) {\n  var images = [];\n  var xLeftOver = width % 8;\n  var yLeftOver = height % 8;\n  var xRepeats = (width - xLeftOver) / 8;\n  var yRepeats = (height - yLeftOver) / 8;\n  for (var i = 0; i < imagePasses.length; i++) {\n    var pass = imagePasses[i];\n    var passWidth = xRepeats * pass.x.length;\n    var passHeight = yRepeats * pass.y.length;\n    for (var j = 0; j < pass.x.length; j++) {\n      if (pass.x[j] < xLeftOver) {\n        passWidth++;\n      }\n      else {\n        break;\n      }\n    }\n    for (j = 0; j < pass.y.length; j++) {\n      if (pass.y[j] < yLeftOver) {\n        passHeight++;\n      }\n      else {\n        break;\n      }\n    }\n    if (passWidth > 0 && passHeight > 0) {\n      images.push({ width: passWidth, height: passHeight, index: i });\n    }\n  }\n  return images;\n};\n\nexports.getInterlaceIterator = function(width) {\n  return function(x, y, pass) {\n    var outerXLeftOver = x % imagePasses[pass].x.length;\n    var outerX = (((x - outerXLeftOver) / imagePasses[pass].x.length) * 8) + imagePasses[pass].x[outerXLeftOver];\n    var outerYLeftOver = y % imagePasses[pass].y.length;\n    var outerY = (((y - outerYLeftOver) / imagePasses[pass].y.length) * 8) + imagePasses[pass].y[outerYLeftOver];\n    return (outerX * 4) + (outerY * width * 4);\n  };\n};", "'use strict';\r\n\r\nmodule.exports = function paethPredictor(left, above, upLeft) {\r\n\r\n  var paeth = left + above - upLeft;\r\n  var pLeft = Math.abs(paeth - left);\r\n  var pAbove = Math.abs(paeth - above);\r\n  var pUpLeft = Math.abs(paeth - upLeft);\r\n\r\n  if (pLeft <= pAbove && pLeft <= pUpLeft) {\r\n    return left;\r\n  }\r\n  if (pAbove <= pUpLeft) {\r\n    return above;\r\n  }\r\n  return upLeft;\r\n};", "'use strict';\n\nvar interlaceUtils = require('./interlace');\nvar paethPredictor = require('./paeth-predictor');\n\nfunction getByteWidth(width, bpp, depth) {\n  var byteWidth = width * bpp;\n  if (depth !== 8) {\n    byteWidth = Math.ceil(byteWidth / (8 / depth));\n  }\n  return byteWidth;\n}\n\nvar Filter = module.exports = function(bitmapInfo, dependencies) {\n\n  var width = bitmapInfo.width;\n  var height = bitmapInfo.height;\n  var interlace = bitmapInfo.interlace;\n  var bpp = bitmapInfo.bpp;\n  var depth = bitmapInfo.depth;\n\n  this.read = dependencies.read;\n  this.write = dependencies.write;\n  this.complete = dependencies.complete;\n\n  this._imageIndex = 0;\n  this._images = [];\n  if (interlace) {\n    var passes = interlaceUtils.getImagePasses(width, height);\n    for (var i = 0; i < passes.length; i++) {\n      this._images.push({\n        byteWidth: getByteWidth(passes[i].width, bpp, depth),\n        height: passes[i].height,\n        lineIndex: 0\n      });\n    }\n  }\n  else {\n    this._images.push({\n      byteWidth: getByteWidth(width, bpp, depth),\n      height: height,\n      lineIndex: 0\n    });\n  }\n\n  // when filtering the line we look at the pixel to the left\n  // the spec also says it is done on a byte level regardless of the number of pixels\n  // so if the depth is byte compatible (8 or 16) we subtract the bpp in order to compare back\n  // a pixel rather than just a different byte part. However if we are sub byte, we ignore.\n  if (depth === 8) {\n    this._xComparison = bpp;\n  }\n  else if (depth === 16) {\n    this._xComparison = bpp * 2;\n  }\n  else {\n    this._xComparison = 1;\n  }\n};\n\nFilter.prototype.start = function() {\n  this.read(this._images[this._imageIndex].byteWidth + 1, this._reverseFilterLine.bind(this));\n};\n\nFilter.prototype._unFilterType1 = function(rawData, unfilteredLine, byteWidth) {\n\n  var xComparison = this._xComparison;\n  var xBiggerThan = xComparison - 1;\n\n  for (var x = 0; x < byteWidth; x++) {\n    var rawByte = rawData[1 + x];\n    var f1Left = x > xBiggerThan ? unfilteredLine[x - xComparison] : 0;\n    unfilteredLine[x] = rawByte + f1Left;\n  }\n};\n\nFilter.prototype._unFilterType2 = function(rawData, unfilteredLine, byteWidth) {\n\n  var lastLine = this._lastLine;\n\n  for (var x = 0; x < byteWidth; x++) {\n    var rawByte = rawData[1 + x];\n    var f2Up = lastLine ? lastLine[x] : 0;\n    unfilteredLine[x] = rawByte + f2Up;\n  }\n};\n\nFilter.prototype._unFilterType3 = function(rawData, unfilteredLine, byteWidth) {\n\n  var xComparison = this._xComparison;\n  var xBiggerThan = xComparison - 1;\n  var lastLine = this._lastLine;\n\n  for (var x = 0; x < byteWidth; x++) {\n    var rawByte = rawData[1 + x];\n    var f3Up = lastLine ? lastLine[x] : 0;\n    var f3Left = x > xBiggerThan ? unfilteredLine[x - xComparison] : 0;\n    var f3Add = Math.floor((f3Left + f3Up) / 2);\n    unfilteredLine[x] = rawByte + f3Add;\n  }\n};\n\nFilter.prototype._unFilterType4 = function(rawData, unfilteredLine, byteWidth) {\n\n  var xComparison = this._xComparison;\n  var xBiggerThan = xComparison - 1;\n  var lastLine = this._lastLine;\n\n  for (var x = 0; x < byteWidth; x++) {\n    var rawByte = rawData[1 + x];\n    var f4Up = lastLine ? lastLine[x] : 0;\n    var f4Left = x > xBiggerThan ? unfilteredLine[x - xComparison] : 0;\n    var f4UpLeft = x > xBiggerThan && lastLine ? lastLine[x - xComparison] : 0;\n    var f4Add = paethPredictor(f4Left, f4Up, f4UpLeft);\n    unfilteredLine[x] = rawByte + f4Add;\n  }\n};\n\nFilter.prototype._reverseFilterLine = function(rawData) {\n\n  var filter = rawData[0];\n  var unfilteredLine;\n  var currentImage = this._images[this._imageIndex];\n  var byteWidth = currentImage.byteWidth;\n\n  if (filter === 0) {\n    unfilteredLine = rawData.slice(1, byteWidth + 1);\n  }\n  else {\n\n    unfilteredLine = new Buffer(byteWidth);\n\n    switch (filter) {\n      case 1:\n        this._unFilterType1(rawData, unfilteredLine, byteWidth);\n        break;\n      case 2:\n        this._unFilterType2(rawData, unfilteredLine, byteWidth);\n        break;\n      case 3:\n        this._unFilterType3(rawData, unfilteredLine, byteWidth);\n        break;\n      case 4:\n        this._unFilterType4(rawData, unfilteredLine, byteWidth);\n        break;\n      default:\n        throw new Error('Unrecognised filter type - ' + filter);\n    }\n  }\n\n  this.write(unfilteredLine);\n\n  currentImage.lineIndex++;\n  if (currentImage.lineIndex >= currentImage.height) {\n    this._lastLine = null;\n    this._imageIndex++;\n    currentImage = this._images[this._imageIndex];\n  }\n  else {\n    this._lastLine = unfilteredLine;\n  }\n\n  if (currentImage) {\n    // read, using the byte width that may be from the new current image\n    this.read(currentImage.byteWidth + 1, this._reverseFilterLine.bind(this));\n  }\n  else {\n    this._lastLine = null;\n    this.complete();\n  }\n};\n", "'use strict';\n\nvar util = require('util');\nvar ChunkStream = require('./chunkstream');\nvar Filter = require('./filter-parse');\n\n\nvar FilterAsync = module.exports = function(bitmapInfo) {\n  ChunkStream.call(this);\n\n  var buffers = [];\n  var that = this;\n  this._filter = new Filter(bitmapInfo, {\n    read: this.read.bind(this),\n    write: function(buffer) {\n      buffers.push(buffer);\n    },\n    complete: function() {\n      that.emit('complete', Buffer.concat(buffers));\n    }\n  });\n\n  this._filter.start();\n};\nutil.inherits(FilterAsync, ChunkStream);\n", "'use strict';\n\n\nmodule.exports = {\n\n  PNG_SIGNATURE: [0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a],\n\n  TYPE_IHDR: 0x49484452,\n  TYPE_IEND: 0x49454e44,\n  TYPE_IDAT: 0x49444154,\n  TYPE_PLTE: 0x504c5445,\n  TYPE_tRNS: 0x74524e53, // eslint-disable-line camelcase\n  TYPE_gAMA: 0x67414d41, // eslint-disable-line camelcase\n\n  // color-type bits\n  COLORTYPE_GRAYSCALE: 0,\n  COLORTYPE_PALETTE: 1,\n  COLORTYPE_COLOR: 2,\n  COLORTYPE_ALPHA: 4, // e.g. grayscale and alpha\n\n  // color-type combinations\n  COLORTYPE_PALETTE_COLOR: 3,\n  COLORTYPE_COLOR_ALPHA: 6,\n\n  COLORTYPE_TO_BPP_MAP: {\n    0: 1,\n    2: 3,\n    3: 1,\n    4: 2,\n    6: 4\n  },\n\n  GAMMA_DIVISION: 100000\n};\n", "'use strict';\n\nvar crcTable = [];\n\n(function() {\n  for (var i = 0; i < 256; i++) {\n    var currentCrc = i;\n    for (var j = 0; j < 8; j++) {\n      if (currentCrc & 1) {\n        currentCrc = 0xedb88320 ^ (currentCrc >>> 1);\n      }\n      else {\n        currentCrc = currentCrc >>> 1;\n      }\n    }\n    crcTable[i] = currentCrc;\n  }\n}());\n\nvar CrcCalculator = module.exports = function() {\n  this._crc = -1;\n};\n\nCrcCalculator.prototype.write = function(data) {\n\n  for (var i = 0; i < data.length; i++) {\n    this._crc = crcTable[(this._crc ^ data[i]) & 0xff] ^ (this._crc >>> 8);\n  }\n  return true;\n};\n\nCrcCalculator.prototype.crc32 = function() {\n  return this._crc ^ -1;\n};\n\n\nCrcCalculator.crc32 = function(buf) {\n\n  var crc = -1;\n  for (var i = 0; i < buf.length; i++) {\n    crc = crcTable[(crc ^ buf[i]) & 0xff] ^ (crc >>> 8);\n  }\n  return crc ^ -1;\n};\n", "'use strict';\n\nvar constants = require('./constants');\nvar CrcCalculator = require('./crc');\n\n\nvar Parser = module.exports = function(options, dependencies) {\n\n  this._options = options;\n  options.checkCRC = options.checkCRC !== false;\n\n  this._hasIHDR = false;\n  this._hasIEND = false;\n\n  // input flags/metadata\n  this._palette = [];\n  this._colorType = 0;\n\n  this._chunks = {};\n  this._chunks[constants.TYPE_IHDR] = this._handleIHDR.bind(this);\n  this._chunks[constants.TYPE_IEND] = this._handleIEND.bind(this);\n  this._chunks[constants.TYPE_IDAT] = this._handleIDAT.bind(this);\n  this._chunks[constants.TYPE_PLTE] = this._handlePLTE.bind(this);\n  this._chunks[constants.TYPE_tRNS] = this._handleTRNS.bind(this);\n  this._chunks[constants.TYPE_gAMA] = this._handleGAMA.bind(this);\n\n  this.read = dependencies.read;\n  this.error = dependencies.error;\n  this.metadata = dependencies.metadata;\n  this.gamma = dependencies.gamma;\n  this.transColor = dependencies.transColor;\n  this.palette = dependencies.palette;\n  this.parsed = dependencies.parsed;\n  this.inflateData = dependencies.inflateData;\n  this.inflateData = dependencies.inflateData;\n  this.finished = dependencies.finished;\n};\n\nParser.prototype.start = function() {\n  this.read(constants.PNG_SIGNATURE.length,\n    this._parseSignature.bind(this)\n  );\n};\n\nParser.prototype._parseSignature = function(data) {\n\n  var signature = constants.PNG_SIGNATURE;\n\n  for (var i = 0; i < signature.length; i++) {\n    if (data[i] !== signature[i]) {\n      this.error(new Error('Invalid file signature'));\n      return;\n    }\n  }\n  this.read(8, this._parseChunkBegin.bind(this));\n};\n\nParser.prototype._parseChunkBegin = function(data) {\n\n  // chunk content length\n  var length = data.readUInt32BE(0);\n\n  // chunk type\n  var type = data.readUInt32BE(4);\n  var name = '';\n  for (var i = 4; i < 8; i++) {\n    name += String.fromCharCode(data[i]);\n  }\n\n  //console.log('chunk ', name, length);\n\n  // chunk flags\n  var ancillary = Boolean(data[4] & 0x20); // or critical\n//    priv = Boolean(data[5] & 0x20), // or public\n//    safeToCopy = Boolean(data[7] & 0x20); // or unsafe\n\n  if (!this._hasIHDR && type !== constants.TYPE_IHDR) {\n    this.error(new Error('Expected IHDR on beggining'));\n    return;\n  }\n\n  this._crc = new CrcCalculator();\n  this._crc.write(new Buffer(name));\n\n  if (this._chunks[type]) {\n    return this._chunks[type](length);\n  }\n\n  if (!ancillary) {\n    this.error(new Error('Unsupported critical chunk type ' + name));\n    return;\n  }\n\n  this.read(length + 4, this._skipChunk.bind(this));\n};\n\nParser.prototype._skipChunk = function(/*data*/) {\n  this.read(8, this._parseChunkBegin.bind(this));\n};\n\nParser.prototype._handleChunkEnd = function() {\n  this.read(4, this._parseChunkEnd.bind(this));\n};\n\nParser.prototype._parseChunkEnd = function(data) {\n\n  var fileCrc = data.readInt32BE(0);\n  var calcCrc = this._crc.crc32();\n\n  // check CRC\n  if (this._options.checkCRC && calcCrc !== fileCrc) {\n    this.error(new Error('Crc error - ' + fileCrc + ' - ' + calcCrc));\n    return;\n  }\n\n  if (!this._hasIEND) {\n    this.read(8, this._parseChunkBegin.bind(this));\n  }\n};\n\nParser.prototype._handleIHDR = function(length) {\n  this.read(length, this._parseIHDR.bind(this));\n};\nParser.prototype._parseIHDR = function(data) {\n\n  this._crc.write(data);\n\n  var width = data.readUInt32BE(0);\n  var height = data.readUInt32BE(4);\n  var depth = data[8];\n  var colorType = data[9]; // bits: 1 palette, 2 color, 4 alpha\n  var compr = data[10];\n  var filter = data[11];\n  var interlace = data[12];\n\n  // console.log('    width', width, 'height', height,\n  //     'depth', depth, 'colorType', colorType,\n  //     'compr', compr, 'filter', filter, 'interlace', interlace\n  // );\n\n  if (depth !== 8 && depth !== 4 && depth !== 2 && depth !== 1 && depth !== 16) {\n    this.error(new Error('Unsupported bit depth ' + depth));\n    return;\n  }\n  if (!(colorType in constants.COLORTYPE_TO_BPP_MAP)) {\n    this.error(new Error('Unsupported color type'));\n    return;\n  }\n  if (compr !== 0) {\n    this.error(new Error('Unsupported compression method'));\n    return;\n  }\n  if (filter !== 0) {\n    this.error(new Error('Unsupported filter method'));\n    return;\n  }\n  if (interlace !== 0 && interlace !== 1) {\n    this.error(new Error('Unsupported interlace method'));\n    return;\n  }\n\n  this._colorType = colorType;\n\n  var bpp = constants.COLORTYPE_TO_BPP_MAP[this._colorType];\n\n  this._hasIHDR = true;\n\n  this.metadata({\n    width: width,\n    height: height,\n    depth: depth,\n    interlace: Boolean(interlace),\n    palette: Boolean(colorType & constants.COLORTYPE_PALETTE),\n    color: Boolean(colorType & constants.COLORTYPE_COLOR),\n    alpha: Boolean(colorType & constants.COLORTYPE_ALPHA),\n    bpp: bpp,\n    colorType: colorType\n  });\n\n  this._handleChunkEnd();\n};\n\n\nParser.prototype._handlePLTE = function(length) {\n  this.read(length, this._parsePLTE.bind(this));\n};\nParser.prototype._parsePLTE = function(data) {\n\n  this._crc.write(data);\n\n  var entries = Math.floor(data.length / 3);\n  // console.log('Palette:', entries);\n\n  for (var i = 0; i < entries; i++) {\n    this._palette.push([\n      data[i * 3],\n      data[i * 3 + 1],\n      data[i * 3 + 2],\n      0xff\n    ]);\n  }\n\n  this.palette(this._palette);\n\n  this._handleChunkEnd();\n};\n\nParser.prototype._handleTRNS = function(length) {\n  this.read(length, this._parseTRNS.bind(this));\n};\nParser.prototype._parseTRNS = function(data) {\n\n  this._crc.write(data);\n\n  // palette\n  if (this._colorType === constants.COLORTYPE_PALETTE_COLOR) {\n    if (this._palette.length === 0) {\n      this.error(new Error('Transparency chunk must be after palette'));\n      return;\n    }\n    if (data.length > this._palette.length) {\n      this.error(new Error('More transparent colors than palette size'));\n      return;\n    }\n    for (var i = 0; i < data.length; i++) {\n      this._palette[i][3] = data[i];\n    }\n    this.palette(this._palette);\n  }\n\n  // for colorType 0 (grayscale) and 2 (rgb)\n  // there might be one gray/color defined as transparent\n  if (this._colorType === constants.COLORTYPE_GRAYSCALE) {\n    // grey, 2 bytes\n    this.transColor([data.readUInt16BE(0)]);\n  }\n  if (this._colorType === constants.COLORTYPE_COLOR) {\n    this.transColor([data.readUInt16BE(0), data.readUInt16BE(2), data.readUInt16BE(4)]);\n  }\n\n  this._handleChunkEnd();\n};\n\nParser.prototype._handleGAMA = function(length) {\n  this.read(length, this._parseGAMA.bind(this));\n};\nParser.prototype._parseGAMA = function(data) {\n\n  this._crc.write(data);\n  this.gamma(data.readUInt32BE(0) / constants.GAMMA_DIVISION);\n\n  this._handleChunkEnd();\n};\n\nParser.prototype._handleIDAT = function(length) {\n  this.read(-length, this._parseIDAT.bind(this, length));\n};\nParser.prototype._parseIDAT = function(length, data) {\n\n  this._crc.write(data);\n\n  if (this._colorType === constants.COLORTYPE_PALETTE_COLOR && this._palette.length === 0) {\n    throw new Error('Expected palette not found');\n  }\n\n  this.inflateData(data);\n  var leftOverLength = length - data.length;\n\n  if (leftOverLength > 0) {\n    this._handleIDAT(leftOverLength);\n  }\n  else {\n    this._handleChunkEnd();\n  }\n};\n\nParser.prototype._handleIEND = function(length) {\n  this.read(length, this._parseIEND.bind(this));\n};\nParser.prototype._parseIEND = function(data) {\n\n  this._crc.write(data);\n\n  this._hasIEND = true;\n  this._handleChunkEnd();\n\n  if (this.finished) {\n    this.finished();\n  }\n};\n", "'use strict';\n\nvar interlaceUtils = require('./interlace');\n\nvar pixelBppMap = {\n  1: { // L\n    0: 0,\n    1: 0,\n    2: 0,\n    3: 0xff\n  },\n  2: { // LA\n    0: 0,\n    1: 0,\n    2: 0,\n    3: 1\n  },\n  3: { // RGB\n    0: 0,\n    1: 1,\n    2: 2,\n    3: 0xff\n  },\n  4: { // RGBA\n    0: 0,\n    1: 1,\n    2: 2,\n    3: 3\n  }\n};\n\nfunction bitRetriever(data, depth) {\n\n  var leftOver = [];\n  var i = 0;\n\n  function split() {\n    if (i === data.length) {\n      throw new Error('Ran out of data');\n    }\n    var byte = data[i];\n    i++;\n    var byte8, byte7, byte6, byte5, byte4, byte3, byte2, byte1;\n    switch (depth) {\n      default:\n        throw new Error('unrecognised depth');\n      case 16:\n        byte2 = data[i];\n        i++;\n        leftOver.push(((byte << 8) + byte2));\n        break;\n      case 4:\n        byte2 = byte & 0x0f;\n        byte1 = byte >> 4;\n        leftOver.push(byte1, byte2);\n        break;\n      case 2:\n        byte4 = byte & 3;\n        byte3 = byte >> 2 & 3;\n        byte2 = byte >> 4 & 3;\n        byte1 = byte >> 6 & 3;\n        leftOver.push(byte1, byte2, byte3, byte4);\n        break;\n      case 1:\n        byte8 = byte & 1;\n        byte7 = byte >> 1 & 1;\n        byte6 = byte >> 2 & 1;\n        byte5 = byte >> 3 & 1;\n        byte4 = byte >> 4 & 1;\n        byte3 = byte >> 5 & 1;\n        byte2 = byte >> 6 & 1;\n        byte1 = byte >> 7 & 1;\n        leftOver.push(byte1, byte2, byte3, byte4, byte5, byte6, byte7, byte8);\n        break;\n    }\n  }\n\n  return {\n    get: function(count) {\n      while (leftOver.length < count) {\n        split();\n      }\n      var returner = leftOver.slice(0, count);\n      leftOver = leftOver.slice(count);\n      return returner;\n    },\n    resetAfterLine: function() {\n      leftOver.length = 0;\n    },\n    end: function() {\n      if (i !== data.length) {\n        throw new Error('extra data found');\n      }\n    }\n  };\n}\n\nfunction mapImage8Bit(image, pxData, getPxPos, bpp, data, rawPos) { // eslint-disable-line max-params\n  var imageWidth = image.width;\n  var imageHeight = image.height;\n  var imagePass = image.index;\n  for (var y = 0; y < imageHeight; y++) {\n    for (var x = 0; x < imageWidth; x++) {\n      var pxPos = getPxPos(x, y, imagePass);\n\n      for (var i = 0; i < 4; i++) {\n        var idx = pixelBppMap[bpp][i];\n        if (i === data.length) {\n          throw new Error('Ran out of data');\n        }\n        pxData[pxPos + i] = idx !== 0xff ? data[idx + rawPos] : 0xff;\n      }\n      rawPos += bpp; //eslint-disable-line no-param-reassign\n    }\n  }\n  return rawPos;\n}\n\nfunction mapImageCustomBit(image, pxData, getPxPos, bpp, bits, maxBit) { // eslint-disable-line max-params\n  var imageWidth = image.width;\n  var imageHeight = image.height;\n  var imagePass = image.index;\n  for (var y = 0; y < imageHeight; y++) {\n    for (var x = 0; x < imageWidth; x++) {\n      var pixelData = bits.get(bpp);\n      var pxPos = getPxPos(x, y, imagePass);\n\n      for (var i = 0; i < 4; i++) {\n        var idx = pixelBppMap[bpp][i];\n        pxData[pxPos + i] = idx !== 0xff ? pixelData[idx] : maxBit;\n      }\n    }\n    bits.resetAfterLine();\n  }\n}\n\nexports.dataToBitMap = function(data, bitmapInfo) {\n\n  var width = bitmapInfo.width;\n  var height = bitmapInfo.height;\n  var depth = bitmapInfo.depth;\n  var bpp = bitmapInfo.bpp;\n  var interlace = bitmapInfo.interlace;\n\n  if (depth !== 8) {\n    var bits = bitRetriever(data, depth);\n  }\n  var pxData;\n  if (depth <= 8) {\n    pxData = new Buffer(width * height * 4);\n  }\n  else {\n    pxData = new Uint16Array(width * height * 4);\n  }\n  var maxBit = Math.pow(2, depth) - 1;\n  var rawPos = 0;\n  var images;\n  var getPxPos;\n\n  if (interlace) {\n    images = interlaceUtils.getImagePasses(width, height);\n    getPxPos = interlaceUtils.getInterlaceIterator(width, height);\n  }\n  else {\n    var nonInterlacedPxPos = 0;\n    getPxPos = function() {\n      var returner = nonInterlacedPxPos;\n      nonInterlacedPxPos += 4;\n      return returner;\n    };\n    images = [{ width: width, height: height }];\n  }\n\n  for (var imageIndex = 0; imageIndex < images.length; imageIndex++) {\n    if (depth === 8) {\n      rawPos = mapImage8Bit(images[imageIndex], pxData, getPxPos, bpp, data, rawPos);\n    }\n    else {\n      mapImageCustomBit(images[imageIndex], pxData, getPxPos, bpp, bits, maxBit);\n    }\n  }\n  if (depth === 8) {\n    if (rawPos !== data.length) {\n      throw new Error('extra data found');\n    }\n  }\n  else {\n    bits.end();\n  }\n\n  return pxData;\n};\n", "'use strict';\n\nfunction dePalette(indata, outdata, width, height, palette) {\n  var pxPos = 0;\n  // use values from palette\n  for (var y = 0; y < height; y++) {\n    for (var x = 0; x < width; x++) {\n      var color = palette[indata[pxPos]];\n\n      if (!color) {\n        throw new Error('index ' + indata[pxPos] + ' not in palette');\n      }\n\n      for (var i = 0; i < 4; i++) {\n        outdata[pxPos + i] = color[i];\n      }\n      pxPos += 4;\n    }\n  }\n}\n\nfunction replaceTransparentColor(indata, outdata, width, height, transColor) {\n  var pxPos = 0;\n  for (var y = 0; y < height; y++) {\n    for (var x = 0; x < width; x++) {\n      var makeTrans = false;\n\n      if (transColor.length === 1) {\n        if (transColor[0] === indata[pxPos]) {\n          makeTrans = true;\n        }\n      }\n      else if (transColor[0] === indata[pxPos] && transColor[1] === indata[pxPos + 1] && transColor[2] === indata[pxPos + 2]) {\n        makeTrans = true;\n      }\n      if (makeTrans) {\n        for (var i = 0; i < 4; i++) {\n          outdata[pxPos + i] = 0;\n        }\n      }\n      pxPos += 4;\n    }\n  }\n}\n\nfunction scaleDepth(indata, outdata, width, height, depth) {\n  var maxOutSample = 255;\n  var maxInSample = Math.pow(2, depth) - 1;\n  var pxPos = 0;\n\n  for (var y = 0; y < height; y++) {\n    for (var x = 0; x < width; x++) {\n      for (var i = 0; i < 4; i++) {\n        outdata[pxPos + i] = Math.floor((indata[pxPos + i] * maxOutSample) / maxInSample + 0.5);\n      }\n      pxPos += 4;\n    }\n  }\n}\n\nmodule.exports = function(indata, imageData) {\n\n  var depth = imageData.depth;\n  var width = imageData.width;\n  var height = imageData.height;\n  var colorType = imageData.colorType;\n  var transColor = imageData.transColor;\n  var palette = imageData.palette;\n\n  var outdata = indata; // only different for 16 bits\n\n  if (colorType === 3) { // paletted\n    dePalette(indata, outdata, width, height, palette);\n  }\n  else {\n    if (transColor) {\n      replaceTransparentColor(indata, outdata, width, height, transColor);\n    }\n    // if it needs scaling\n    if (depth !== 8) {\n      // if we need to change the buffer size\n      if (depth === 16) {\n        outdata = new Buffer(width * height * 4);\n      }\n      scaleDepth(indata, outdata, width, height, depth);\n    }\n  }\n  return outdata;\n};\n", "'use strict';\n\nvar util = require('util');\nvar zlib = require('zlib');\nvar ChunkStream = require('./chunkstream');\nvar FilterAsync = require('./filter-parse-async');\nvar Parser = require('./parser');\nvar bitmapper = require('./bitmapper');\nvar formatNormaliser = require('./format-normaliser');\n\nvar ParserAsync = module.exports = function(options) {\n  ChunkStream.call(this);\n\n  this._parser = new Parser(options, {\n    read: this.read.bind(this),\n    error: this._handleError.bind(this),\n    metadata: this._handleMetaData.bind(this),\n    gamma: this.emit.bind(this, 'gamma'),\n    palette: this._handlePalette.bind(this),\n    transColor: this._handleTransColor.bind(this),\n    finished: this._finished.bind(this),\n    inflateData: this._inflateData.bind(this)\n  });\n  this._options = options;\n  this.writable = true;\n\n  this._parser.start();\n};\nutil.inherits(ParserAsync, ChunkStream);\n\n\nParserAsync.prototype._handleError = function(err) {\n\n  this.emit('error', err);\n\n  this.writable = false;\n\n  this.destroy();\n\n  if (this._inflate && this._inflate.destroy) {\n    this._inflate.destroy();\n  }\n\n  this.errord = true;\n};\n\nParserAsync.prototype._inflateData = function(data) {\n  if (!this._inflate) {\n    this._inflate = zlib.createInflate();\n\n    this._inflate.on('error', this.emit.bind(this, 'error'));\n    this._filter.on('complete', this._complete.bind(this));\n\n    this._inflate.pipe(this._filter);\n  }\n  this._inflate.write(data);\n};\n\nParserAsync.prototype._handleMetaData = function(metaData) {\n\n  this.emit('metadata', metaData);\n\n  this._bitmapInfo = Object.create(metaData);\n\n  this._filter = new FilterAsync(this._bitmapInfo);\n};\n\nParserAsync.prototype._handleTransColor = function(transColor) {\n  this._bitmapInfo.transColor = transColor;\n};\n\nParserAsync.prototype._handlePalette = function(palette) {\n  this._bitmapInfo.palette = palette;\n};\n\n\nParserAsync.prototype._finished = function() {\n  if (this.errord) {\n    return;\n  }\n\n  if (!this._inflate) {\n    this.emit('error', 'No Inflate block');\n  }\n  else {\n    // no more data to inflate\n    this._inflate.end();\n  }\n  this.destroySoon();\n};\n\nParserAsync.prototype._complete = function(filteredData) {\n\n  if (this.errord) {\n    return;\n  }\n\n  try {\n    var bitmapData = bitmapper.dataToBitMap(filteredData, this._bitmapInfo);\n\n    var normalisedBitmapData = formatNormaliser(bitmapData, this._bitmapInfo);\n    bitmapData = null;\n  }\n  catch (ex) {\n    this._handleError(ex);\n    return;\n  }\n\n  this.emit('parsed', normalisedBitmapData);\n};\n", "'use strict';\n\nvar constants = require('./constants');\n\nmodule.exports = function(data, width, height, options) {\n  var outHasAlpha = options.colorType === constants.COLORTYPE_COLOR_ALPHA;\n  if (options.inputHasAlpha && outHasAlpha) {\n    return data;\n  }\n  if (!options.inputHasAlpha && !outHasAlpha) {\n    return data;\n  }\n\n  var outBpp = outHasAlpha ? 4 : 3;\n  var outData = new Buffer(width * height * outBpp);\n  var inBpp = options.inputHasAlpha ? 4 : 3;\n  var inIndex = 0;\n  var outIndex = 0;\n\n  var bgColor = options.bgColor || {};\n  if (bgColor.red === undefined) {\n    bgColor.red = 255;\n  }\n  if (bgColor.green === undefined) {\n    bgColor.green = 255;\n  }\n  if (bgColor.blue === undefined) {\n    bgColor.blue = 255;\n  }\n\n  for (var y = 0; y < height; y++) {\n    for (var x = 0; x < width; x++) {\n      var red = data[inIndex];\n      var green = data[inIndex + 1];\n      var blue = data[inIndex + 2];\n\n      var alpha;\n      if (options.inputHasAlpha) {\n        alpha = data[inIndex + 3];\n        if (!outHasAlpha) {\n          alpha /= 255;\n          red = Math.min(Math.max(Math.round((1 - alpha) * bgColor.red + alpha * red), 0), 255);\n          green = Math.min(Math.max(Math.round((1 - alpha) * bgColor.green + alpha * green), 0), 255);\n          blue = Math.min(Math.max(Math.round((1 - alpha) * bgColor.blue + alpha * blue), 0), 255);\n        }\n      }\n      else {\n        alpha = 255;\n      }\n\n      outData[outIndex] = red;\n      outData[outIndex + 1] = green;\n      outData[outIndex + 2] = blue;\n      if (outHasAlpha) {\n        outData[outIndex + 3] = alpha;\n      }\n\n      inIndex += inBpp;\n      outIndex += outBpp;\n    }\n  }\n\n  return outData;\n};\n", "'use strict';\n\nvar paethPredictor = require('./paeth-predictor');\n\nfunction filterNone(pxData, pxPos, byteWidth, rawData, rawPos) {\n  pxData.copy(rawData, rawPos, pxPos, pxPos + byteWidth);\n}\n\nfunction filterSumNone(pxData, pxPos, byteWidth) {\n\n  var sum = 0;\n  var length = pxPos + byteWidth;\n\n  for (var i = pxPos; i < length; i++) {\n    sum += Math.abs(pxData[i]);\n  }\n  return sum;\n}\n\nfunction filterSub(pxData, pxPos, byteWidth, rawData, rawPos, bpp) {\n\n  for (var x = 0; x < byteWidth; x++) {\n\n    var left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    var val = pxData[pxPos + x] - left;\n\n    rawData[rawPos + x] = val;\n  }\n}\n\nfunction filterSumSub(pxData, pxPos, byteWidth, bpp) {\n\n  var sum = 0;\n  for (var x = 0; x < byteWidth; x++) {\n\n    var left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    var val = pxData[pxPos + x] - left;\n\n    sum += Math.abs(val);\n  }\n\n  return sum;\n}\n\nfunction filterUp(pxData, pxPos, byteWidth, rawData, rawPos) {\n\n  for (var x = 0; x < byteWidth; x++) {\n\n    var up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    var val = pxData[pxPos + x] - up;\n\n    rawData[rawPos + x] = val;\n  }\n}\n\nfunction filterSumUp(pxData, pxPos, byteWidth) {\n\n  var sum = 0;\n  var length = pxPos + byteWidth;\n  for (var x = pxPos; x < length; x++) {\n\n    var up = pxPos > 0 ? pxData[x - byteWidth] : 0;\n    var val = pxData[x] - up;\n\n    sum += Math.abs(val);\n  }\n\n  return sum;\n}\n\nfunction filterAvg(pxData, pxPos, byteWidth, rawData, rawPos, bpp) {\n\n  for (var x = 0; x < byteWidth; x++) {\n\n    var left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    var up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    var val = pxData[pxPos + x] - ((left + up) >> 1);\n\n    rawData[rawPos + x] = val;\n  }\n}\n\nfunction filterSumAvg(pxData, pxPos, byteWidth, bpp) {\n\n  var sum = 0;\n  for (var x = 0; x < byteWidth; x++) {\n\n    var left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    var up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    var val = pxData[pxPos + x] - ((left + up) >> 1);\n\n    sum += Math.abs(val);\n  }\n\n  return sum;\n}\n\nfunction filterPaeth(pxData, pxPos, byteWidth, rawData, rawPos, bpp) {\n\n  for (var x = 0; x < byteWidth; x++) {\n\n    var left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    var up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    var upleft = pxPos > 0 && x >= bpp ? pxData[pxPos + x - (byteWidth + bpp)] : 0;\n    var val = pxData[pxPos + x] - paethPredictor(left, up, upleft);\n\n    rawData[rawPos + x] = val;\n  }\n}\n\nfunction filterSumPaeth(pxData, pxPos, byteWidth, bpp) {\n  var sum = 0;\n  for (var x = 0; x < byteWidth; x++) {\n\n    var left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    var up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    var upleft = pxPos > 0 && x >= bpp ? pxData[pxPos + x - (byteWidth + bpp)] : 0;\n    var val = pxData[pxPos + x] - paethPredictor(left, up, upleft);\n\n    sum += Math.abs(val);\n  }\n\n  return sum;\n}\n\nvar filters = {\n  0: filterNone,\n  1: filterSub,\n  2: filterUp,\n  3: filterAvg,\n  4: filterPaeth\n};\n\nvar filterSums = {\n  0: filterSumNone,\n  1: filterSumSub,\n  2: filterSumUp,\n  3: filterSumAvg,\n  4: filterSumPaeth\n};\n\nmodule.exports = function(pxData, width, height, options, bpp) {\n\n  var filterTypes;\n  if (!('filterType' in options) || options.filterType === -1) {\n    filterTypes = [0, 1, 2, 3, 4];\n  }\n  else if (typeof options.filterType === 'number') {\n    filterTypes = [options.filterType];\n  }\n  else {\n    throw new Error('unrecognised filter types');\n  }\n\n  var byteWidth = width * bpp;\n  var rawPos = 0;\n  var pxPos = 0;\n  var rawData = new Buffer((byteWidth + 1) * height);\n  var sel = filterTypes[0];\n\n  for (var y = 0; y < height; y++) {\n\n    if (filterTypes.length > 1) {\n      // find best filter for this line (with lowest sum of values)\n      var min = Infinity;\n\n      for (var i = 0; i < filterTypes.length; i++) {\n        var sum = filterSums[filterTypes[i]](pxData, pxPos, byteWidth, bpp);\n        if (sum < min) {\n          sel = filterTypes[i];\n          min = sum;\n        }\n      }\n    }\n\n    rawData[rawPos] = sel;\n    rawPos++;\n    filters[sel](pxData, pxPos, byteWidth, rawData, rawPos, bpp);\n    rawPos += byteWidth;\n    pxPos += byteWidth;\n  }\n  return rawData;\n};\n", "'use strict';\n\nvar constants = require('./constants');\nvar CrcStream = require('./crc');\nvar bitPacker = require('./bitpacker');\nvar filter = require('./filter-pack');\nvar zlib = require('zlib');\n\nvar Packer = module.exports = function(options) {\n  this._options = options;\n\n  options.deflateChunkSize = options.deflateChunkSize || 32 * 1024;\n  options.deflateLevel = options.deflateLevel != null ? options.deflateLevel : 9;\n  options.deflateStrategy = options.deflateStrategy != null ? options.deflateStrategy : 3;\n  options.inputHasAlpha = options.inputHasAlpha != null ? options.inputHasAlpha : true;\n  options.deflateFactory = options.deflateFactory || zlib.createDeflate;\n  options.bitDepth = options.bitDepth || 8;\n  options.colorType = (typeof options.colorType === 'number') ? options.colorType : constants.COLORTYPE_COLOR_ALPHA;\n\n  if (options.colorType !== constants.COLORTYPE_COLOR && options.colorType !== constants.COLORTYPE_COLOR_ALPHA) {\n    throw new Error('option color type:' + options.colorType + ' is not supported at present');\n  }\n  if (options.bitDepth !== 8) {\n    throw new Error('option bit depth:' + options.bitDepth + ' is not supported at present');\n  }\n};\n\nPacker.prototype.getDeflateOptions = function() {\n  return {\n    chunkSize: this._options.deflateChunkSize,\n    level: this._options.deflateLevel,\n    strategy: this._options.deflateStrategy\n  };\n};\n\nPacker.prototype.createDeflate = function() {\n  return this._options.deflateFactory(this.getDeflateOptions());\n};\n\nPacker.prototype.filterData = function(data, width, height) {\n  // convert to correct format for filtering (e.g. right bpp and bit depth)\n  var packedData = bitPacker(data, width, height, this._options);\n\n  // filter pixel data\n  var bpp = constants.COLORTYPE_TO_BPP_MAP[this._options.colorType];\n  var filteredData = filter(packedData, width, height, this._options, bpp);\n  return filteredData;\n};\n\nPacker.prototype._packChunk = function(type, data) {\n\n  var len = (data ? data.length : 0);\n  var buf = new Buffer(len + 12);\n\n  buf.writeUInt32BE(len, 0);\n  buf.writeUInt32BE(type, 4);\n\n  if (data) {\n    data.copy(buf, 8);\n  }\n\n  buf.writeInt32BE(CrcStream.crc32(buf.slice(4, buf.length - 4)), buf.length - 4);\n  return buf;\n};\n\nPacker.prototype.packGAMA = function(gamma) {\n  var buf = new Buffer(4);\n  buf.writeUInt32BE(Math.floor(gamma * constants.GAMMA_DIVISION), 0);\n  return this._packChunk(constants.TYPE_gAMA, buf);\n};\n\nPacker.prototype.packIHDR = function(width, height) {\n\n  var buf = new Buffer(13);\n  buf.writeUInt32BE(width, 0);\n  buf.writeUInt32BE(height, 4);\n  buf[8] = this._options.bitDepth;  // Bit depth\n  buf[9] = this._options.colorType; // colorType\n  buf[10] = 0; // compression\n  buf[11] = 0; // filter\n  buf[12] = 0; // interlace\n\n  return this._packChunk(constants.TYPE_IHDR, buf);\n};\n\nPacker.prototype.packIDAT = function(data) {\n  return this._packChunk(constants.TYPE_IDAT, data);\n};\n\nPacker.prototype.packIEND = function() {\n  return this._packChunk(constants.TYPE_IEND, null);\n};", "'use strict';\n\nvar util = require('util');\nvar Stream = require('stream');\nvar constants = require('./constants');\nvar Packer = require('./packer');\n\nvar PackerAsync = module.exports = function(opt) {\n  Stream.call(this);\n\n  var options = opt || {};\n\n  this._packer = new Packer(options);\n  this._deflate = this._packer.createDeflate();\n\n  this.readable = true;\n};\nutil.inherits(PackerAsync, Stream);\n\n\nPackerAsync.prototype.pack = function(data, width, height, gamma) {\n  // Signature\n  this.emit('data', new Buffer(constants.PNG_SIGNATURE));\n  this.emit('data', this._packer.packIHDR(width, height));\n\n  if (gamma) {\n    this.emit('data', this._packer.packGAMA(gamma));\n  }\n\n  var filteredData = this._packer.filterData(data, width, height);\n\n  // compress it\n  this._deflate.on('error', this.emit.bind(this, 'error'));\n\n  this._deflate.on('data', function(compressedData) {\n    this.emit('data', this._packer.packIDAT(compressedData));\n  }.bind(this));\n\n  this._deflate.on('end', function() {\n    this.emit('data', this._packer.packIEND());\n    this.emit('end');\n  }.bind(this));\n\n  this._deflate.end(filteredData);\n};\n", "'use strict';\n\nvar SyncReader = module.exports = function(buffer) {\n\n  this._buffer = buffer;\n  this._reads = [];\n};\n\nSyncReader.prototype.read = function(length, callback) {\n\n  this._reads.push({\n    length: Math.abs(length),  // if length < 0 then at most this length\n    allowLess: length < 0,\n    func: callback\n  });\n};\n\nSyncReader.prototype.process = function() {\n\n  // as long as there is any data and read requests\n  while (this._reads.length > 0 && this._buffer.length) {\n\n    var read = this._reads[0];\n\n    if (this._buffer.length && (this._buffer.length >= read.length || read.allowLess)) {\n\n      // ok there is any data so that we can satisfy this request\n      this._reads.shift(); // == read\n\n      var buf = this._buffer;\n\n      this._buffer = buf.slice(read.length);\n\n      read.func.call(this, buf.slice(0, read.length));\n\n    }\n    else {\n      break;\n    }\n\n  }\n\n  if (this._reads.length > 0) {\n    return new Error('There are some read requests waitng on finished stream');\n  }\n\n  if (this._buffer.length > 0) {\n    return new Error('unrecognised content at end of stream');\n  }\n\n};\n", "'use strict';\n\nvar SyncReader = require('./sync-reader');\nvar Filter = require('./filter-parse');\n\n\nexports.process = function(inBuffer, bitmapInfo) {\n\n  var outBuffers = [];\n  var reader = new SyncReader(inBuffer);\n  var filter = new Filter(bitmapInfo, {\n    read: reader.read.bind(reader),\n    write: function(bufferPart) {\n      outBuffers.push(bufferPart);\n    },\n    complete: function() {\n    }\n  });\n\n  filter.start();\n  reader.process();\n\n  return Buffer.concat(outBuffers);\n};", "'use strict';\n\nvar hasSyncZlib = true;\nvar zlib = require('zlib');\nif (!zlib.deflateSync) {\n  hasSyncZlib = false;\n}\nvar SyncReader = require('./sync-reader');\nvar FilterSync = require('./filter-parse-sync');\nvar Parser = require('./parser');\nvar bitmapper = require('./bitmapper');\nvar formatNormaliser = require('./format-normaliser');\n\n\nmodule.exports = function(buffer, options) {\n\n  if (!hasSyncZlib) {\n    throw new Error('To use the sync capability of this library in old node versions, please also add a dependency on node-zlb-backport');\n  }\n\n  var err;\n  function handleError(_err_) {\n    err = _err_;\n  }\n\n  var metaData;\n  function handleMetaData(_metaData_) {\n    metaData = _metaData_;\n  }\n\n  function handleTransColor(transColor) {\n    metaData.transColor = transColor;\n  }\n\n  function handlePalette(palette) {\n    metaData.palette = palette;\n  }\n\n  var gamma;\n  function handleGamma(_gamma_) {\n    gamma = _gamma_;\n  }\n\n  var inflateDataList = [];\n  function handleInflateData(inflatedData) {\n    inflateDataList.push(inflatedData);\n  }\n\n  var reader = new SyncReader(buffer);\n\n  var parser = new Parser(options, {\n    read: reader.read.bind(reader),\n    error: handleError,\n    metadata: handleMetaData,\n    gamma: handleGamma,\n    palette: handlePalette,\n    transColor: handleTransColor,\n    inflateData: handleInflateData\n  });\n\n  parser.start();\n  reader.process();\n\n  if (err) {\n    throw err;\n  }\n\n  //join together the inflate datas\n  var inflateData = Buffer.concat(inflateDataList);\n  inflateDataList.length = 0;\n\n  var inflatedData = zlib.inflateSync(inflateData);\n  inflateData = null;\n\n  if (!inflatedData || !inflatedData.length) {\n    throw new Error('bad png - invalid inflate data response');\n  }\n\n  var unfilteredData = FilterSync.process(inflatedData, metaData);\n  inflateData = null;\n\n  var bitmapData = bitmapper.dataToBitMap(unfilteredData, metaData);\n  unfilteredData = null;\n\n  var normalisedBitmapData = formatNormaliser(bitmapData, metaData);\n\n  metaData.data = normalisedBitmapData;\n  metaData.gamma = gamma || 0;\n\n  return metaData;\n};\n", "'use strict';\n\nvar hasSyncZlib = true;\nvar zlib = require('zlib');\nif (!zlib.deflateSync) {\n  hasSyncZlib = false;\n}\nvar constants = require('./constants');\nvar Packer = require('./packer');\n\nmodule.exports = function(metaData, opt) {\n\n  if (!hasSyncZlib) {\n    throw new Error('To use the sync capability of this library in old node versions, please also add a dependency on node-zlb-backport');\n  }\n\n  var options = opt || {};\n\n  var packer = new Packer(options);\n\n  var chunks = [];\n\n  // Signature\n  chunks.push(new Buffer(constants.PNG_SIGNATURE));\n\n  // Header\n  chunks.push(packer.packIHDR(metaData.width, metaData.height));\n\n  if (metaData.gamma) {\n    chunks.push(packer.packGAMA(metaData.gamma));\n  }\n\n  var filteredData = packer.filterData(metaData.data, metaData.width, metaData.height);\n\n  // compress it\n  var compressedData = zlib.deflateSync(filteredData, packer.getDeflateOptions());\n  filteredData = null;\n\n  if (!compressedData || !compressedData.length) {\n    throw new Error('bad png - invalid compressed data response');\n  }\n  chunks.push(packer.packIDAT(compressedData));\n\n  // End\n  chunks.push(packer.packIEND());\n\n  return Buffer.concat(chunks);\n};\n", "'use strict';\n\n\nvar parse = require('./parser-sync');\nvar pack = require('./packer-sync');\n\n\nexports.read = function(buffer, options) {\n\n  return parse(buffer, options || {});\n};\n\nexports.write = function(png) {\n\n  return pack(png);\n};\n", "'use strict';\n\nvar util = require('util');\nvar Stream = require('stream');\nvar Parser = require('./parser-async');\nvar Packer = require('./packer-async');\nvar PNGSync = require('./png-sync');\n\n\nvar PNG = exports.PNG = function(options) {\n  Stream.call(this);\n\n  options = options || {}; // eslint-disable-line no-param-reassign\n\n  this.width = options.width || 0;\n  this.height = options.height || 0;\n\n  this.data = this.width > 0 && this.height > 0 ?\n    new Buffer(4 * this.width * this.height) : null;\n\n  if (options.fill && this.data) {\n    this.data.fill(0);\n  }\n\n  this.gamma = 0;\n  this.readable = this.writable = true;\n\n  this._parser = new Parser(options);\n\n  this._parser.on('error', this.emit.bind(this, 'error'));\n  this._parser.on('close', this._handleClose.bind(this));\n  this._parser.on('metadata', this._metadata.bind(this));\n  this._parser.on('gamma', this._gamma.bind(this));\n  this._parser.on('parsed', function(data) {\n    this.data = data;\n    this.emit('parsed', data);\n  }.bind(this));\n\n  this._packer = new Packer(options);\n  this._packer.on('data', this.emit.bind(this, 'data'));\n  this._packer.on('end', this.emit.bind(this, 'end'));\n  this._parser.on('close', this._handleClose.bind(this));\n  this._packer.on('error', this.emit.bind(this, 'error'));\n\n};\nutil.inherits(PNG, Stream);\n\nPNG.sync = PNGSync;\n\nPNG.prototype.pack = function() {\n\n  if (!this.data || !this.data.length) {\n    this.emit('error', 'No data provided');\n    return this;\n  }\n\n  process.nextTick(function() {\n    this._packer.pack(this.data, this.width, this.height, this.gamma);\n  }.bind(this));\n\n  return this;\n};\n\n\nPNG.prototype.parse = function(data, callback) {\n\n  if (callback) {\n    var onParsed, onError;\n\n    onParsed = function(parsedData) {\n      this.removeListener('error', onError);\n\n      this.data = parsedData;\n      callback(null, this);\n    }.bind(this);\n\n    onError = function(err) {\n      this.removeListener('parsed', onParsed);\n\n      callback(err, null);\n    }.bind(this);\n\n    this.once('parsed', onParsed);\n    this.once('error', onError);\n  }\n\n  this.end(data);\n  return this;\n};\n\nPNG.prototype.write = function(data) {\n  this._parser.write(data);\n  return true;\n};\n\nPNG.prototype.end = function(data) {\n  this._parser.end(data);\n};\n\nPNG.prototype._metadata = function(metadata) {\n  this.width = metadata.width;\n  this.height = metadata.height;\n\n  this.emit('metadata', metadata);\n};\n\nPNG.prototype._gamma = function(gamma) {\n  this.gamma = gamma;\n};\n\nPNG.prototype._handleClose = function() {\n  if (!this._parser.writable && !this._packer.readable) {\n    this.emit('close');\n  }\n};\n\n\nPNG.bitblt = function(src, dst, srcX, srcY, width, height, deltaX, deltaY) { // eslint-disable-line max-params\n\n  if (srcX > src.width || srcY > src.height || srcX + width > src.width || srcY + height > src.height) {\n    throw new Error('bitblt reading outside image');\n  }\n\n  if (deltaX > dst.width || deltaY > dst.height || deltaX + width > dst.width || deltaY + height > dst.height) {\n    throw new Error('bitblt writing outside image');\n  }\n\n  for (var y = 0; y < height; y++) {\n    src.data.copy(dst.data,\n      ((deltaY + y) * dst.width + deltaX) << 2,\n      ((srcY + y) * src.width + srcX) << 2,\n      ((srcY + y) * src.width + srcX + width) << 2\n    );\n  }\n};\n\n\nPNG.prototype.bitblt = function(dst, srcX, srcY, width, height, deltaX, deltaY) { // eslint-disable-line max-params\n\n  PNG.bitblt(this, dst, srcX, srcY, width, height, deltaX, deltaY);\n  return this;\n};\n\nPNG.adjustGamma = function(src) {\n  if (src.gamma) {\n    for (var y = 0; y < src.height; y++) {\n      for (var x = 0; x < src.width; x++) {\n        var idx = (src.width * y + x) << 2;\n\n        for (var i = 0; i < 3; i++) {\n          var sample = src.data[idx + i] / 255;\n          sample = Math.pow(sample, 1 / 2.2 / src.gamma);\n          src.data[idx + i] = Math.round(sample * 255);\n        }\n      }\n    }\n    src.gamma = 0;\n  }\n};\n\nPNG.prototype.adjustGamma = function() {\n  PNG.adjustGamma(this);\n};\n", "\"use strict\"\n\nfunction iota(n) {\n  var result = new Array(n)\n  for(var i=0; i<n; ++i) {\n    result[i] = i\n  }\n  return result\n}\n\nmodule.exports = iota", "/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n", "var iota = require(\"iota-array\")\nvar isBuffer = require(\"is-buffer\")\n\nvar hasTypedArrays  = ((typeof Float64Array) !== \"undefined\")\n\nfunction compare1st(a, b) {\n  return a[0] - b[0]\n}\n\nfunction order() {\n  var stride = this.stride\n  var terms = new Array(stride.length)\n  var i\n  for(i=0; i<terms.length; ++i) {\n    terms[i] = [Math.abs(stride[i]), i]\n  }\n  terms.sort(compare1st)\n  var result = new Array(terms.length)\n  for(i=0; i<result.length; ++i) {\n    result[i] = terms[i][1]\n  }\n  return result\n}\n\nfunction compileConstructor(dtype, dimension) {\n  var className = [\"View\", dimension, \"d\", dtype].join(\"\")\n  if(dimension < 0) {\n    className = \"View_Nil\" + dtype\n  }\n  var useGetters = (dtype === \"generic\")\n\n  if(dimension === -1) {\n    //Special case for trivial arrays\n    var code =\n      \"function \"+className+\"(a){this.data=a;};\\\nvar proto=\"+className+\".prototype;\\\nproto.dtype='\"+dtype+\"';\\\nproto.index=function(){return -1};\\\nproto.size=0;\\\nproto.dimension=-1;\\\nproto.shape=proto.stride=proto.order=[];\\\nproto.lo=proto.hi=proto.transpose=proto.step=\\\nfunction(){return new \"+className+\"(this.data);};\\\nproto.get=proto.set=function(){};\\\nproto.pick=function(){return null};\\\nreturn function construct_\"+className+\"(a){return new \"+className+\"(a);}\"\n    var procedure = new Function(code)\n    return procedure()\n  } else if(dimension === 0) {\n    //Special case for 0d arrays\n    var code =\n      \"function \"+className+\"(a,d) {\\\nthis.data = a;\\\nthis.offset = d\\\n};\\\nvar proto=\"+className+\".prototype;\\\nproto.dtype='\"+dtype+\"';\\\nproto.index=function(){return this.offset};\\\nproto.dimension=0;\\\nproto.size=1;\\\nproto.shape=\\\nproto.stride=\\\nproto.order=[];\\\nproto.lo=\\\nproto.hi=\\\nproto.transpose=\\\nproto.step=function \"+className+\"_copy() {\\\nreturn new \"+className+\"(this.data,this.offset)\\\n};\\\nproto.pick=function \"+className+\"_pick(){\\\nreturn TrivialArray(this.data);\\\n};\\\nproto.valueOf=proto.get=function \"+className+\"_get(){\\\nreturn \"+(useGetters ? \"this.data.get(this.offset)\" : \"this.data[this.offset]\")+\n\"};\\\nproto.set=function \"+className+\"_set(v){\\\nreturn \"+(useGetters ? \"this.data.set(this.offset,v)\" : \"this.data[this.offset]=v\")+\"\\\n};\\\nreturn function construct_\"+className+\"(a,b,c,d){return new \"+className+\"(a,d)}\"\n    var procedure = new Function(\"TrivialArray\", code)\n    return procedure(CACHED_CONSTRUCTORS[dtype][0])\n  }\n\n  var code = [\"'use strict'\"]\n\n  //Create constructor for view\n  var indices = iota(dimension)\n  var args = indices.map(function(i) { return \"i\"+i })\n  var index_str = \"this.offset+\" + indices.map(function(i) {\n        return \"this.stride[\" + i + \"]*i\" + i\n      }).join(\"+\")\n  var shapeArg = indices.map(function(i) {\n      return \"b\"+i\n    }).join(\",\")\n  var strideArg = indices.map(function(i) {\n      return \"c\"+i\n    }).join(\",\")\n  code.push(\n    \"function \"+className+\"(a,\" + shapeArg + \",\" + strideArg + \",d){this.data=a\",\n      \"this.shape=[\" + shapeArg + \"]\",\n      \"this.stride=[\" + strideArg + \"]\",\n      \"this.offset=d|0}\",\n    \"var proto=\"+className+\".prototype\",\n    \"proto.dtype='\"+dtype+\"'\",\n    \"proto.dimension=\"+dimension)\n\n  //view.size:\n  code.push(\"Object.defineProperty(proto,'size',{get:function \"+className+\"_size(){\\\nreturn \"+indices.map(function(i) { return \"this.shape[\"+i+\"]\" }).join(\"*\"),\n\"}})\")\n\n  //view.order:\n  if(dimension === 1) {\n    code.push(\"proto.order=[0]\")\n  } else {\n    code.push(\"Object.defineProperty(proto,'order',{get:\")\n    if(dimension < 4) {\n      code.push(\"function \"+className+\"_order(){\")\n      if(dimension === 2) {\n        code.push(\"return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})\")\n      } else if(dimension === 3) {\n        code.push(\n\"var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);\\\nif(s0>s1){\\\nif(s1>s2){\\\nreturn [2,1,0];\\\n}else if(s0>s2){\\\nreturn [1,2,0];\\\n}else{\\\nreturn [1,0,2];\\\n}\\\n}else if(s0>s2){\\\nreturn [2,0,1];\\\n}else if(s2>s1){\\\nreturn [0,1,2];\\\n}else{\\\nreturn [0,2,1];\\\n}}})\")\n      }\n    } else {\n      code.push(\"ORDER})\")\n    }\n  }\n\n  //view.set(i0, ..., v):\n  code.push(\n\"proto.set=function \"+className+\"_set(\"+args.join(\",\")+\",v){\")\n  if(useGetters) {\n    code.push(\"return this.data.set(\"+index_str+\",v)}\")\n  } else {\n    code.push(\"return this.data[\"+index_str+\"]=v}\")\n  }\n\n  //view.get(i0, ...):\n  code.push(\"proto.get=function \"+className+\"_get(\"+args.join(\",\")+\"){\")\n  if(useGetters) {\n    code.push(\"return this.data.get(\"+index_str+\")}\")\n  } else {\n    code.push(\"return this.data[\"+index_str+\"]}\")\n  }\n\n  //view.index:\n  code.push(\n    \"proto.index=function \"+className+\"_index(\", args.join(), \"){return \"+index_str+\"}\")\n\n  //view.hi():\n  code.push(\"proto.hi=function \"+className+\"_hi(\"+args.join(\",\")+\"){return new \"+className+\"(this.data,\"+\n    indices.map(function(i) {\n      return [\"(typeof i\",i,\"!=='number'||i\",i,\"<0)?this.shape[\", i, \"]:i\", i,\"|0\"].join(\"\")\n    }).join(\",\")+\",\"+\n    indices.map(function(i) {\n      return \"this.stride[\"+i + \"]\"\n    }).join(\",\")+\",this.offset)}\")\n\n  //view.lo():\n  var a_vars = indices.map(function(i) { return \"a\"+i+\"=this.shape[\"+i+\"]\" })\n  var c_vars = indices.map(function(i) { return \"c\"+i+\"=this.stride[\"+i+\"]\" })\n  code.push(\"proto.lo=function \"+className+\"_lo(\"+args.join(\",\")+\"){var b=this.offset,d=0,\"+a_vars.join(\",\")+\",\"+c_vars.join(\",\"))\n  for(var i=0; i<dimension; ++i) {\n    code.push(\n\"if(typeof i\"+i+\"==='number'&&i\"+i+\">=0){\\\nd=i\"+i+\"|0;\\\nb+=c\"+i+\"*d;\\\na\"+i+\"-=d}\")\n  }\n  code.push(\"return new \"+className+\"(this.data,\"+\n    indices.map(function(i) {\n      return \"a\"+i\n    }).join(\",\")+\",\"+\n    indices.map(function(i) {\n      return \"c\"+i\n    }).join(\",\")+\",b)}\")\n\n  //view.step():\n  code.push(\"proto.step=function \"+className+\"_step(\"+args.join(\",\")+\"){var \"+\n    indices.map(function(i) {\n      return \"a\"+i+\"=this.shape[\"+i+\"]\"\n    }).join(\",\")+\",\"+\n    indices.map(function(i) {\n      return \"b\"+i+\"=this.stride[\"+i+\"]\"\n    }).join(\",\")+\",c=this.offset,d=0,ceil=Math.ceil\")\n  for(var i=0; i<dimension; ++i) {\n    code.push(\n\"if(typeof i\"+i+\"==='number'){\\\nd=i\"+i+\"|0;\\\nif(d<0){\\\nc+=b\"+i+\"*(a\"+i+\"-1);\\\na\"+i+\"=ceil(-a\"+i+\"/d)\\\n}else{\\\na\"+i+\"=ceil(a\"+i+\"/d)\\\n}\\\nb\"+i+\"*=d\\\n}\")\n  }\n  code.push(\"return new \"+className+\"(this.data,\"+\n    indices.map(function(i) {\n      return \"a\" + i\n    }).join(\",\")+\",\"+\n    indices.map(function(i) {\n      return \"b\" + i\n    }).join(\",\")+\",c)}\")\n\n  //view.transpose():\n  var tShape = new Array(dimension)\n  var tStride = new Array(dimension)\n  for(var i=0; i<dimension; ++i) {\n    tShape[i] = \"a[i\"+i+\"]\"\n    tStride[i] = \"b[i\"+i+\"]\"\n  }\n  code.push(\"proto.transpose=function \"+className+\"_transpose(\"+args+\"){\"+\n    args.map(function(n,idx) { return n + \"=(\" + n + \"===undefined?\" + idx + \":\" + n + \"|0)\"}).join(\";\"),\n    \"var a=this.shape,b=this.stride;return new \"+className+\"(this.data,\"+tShape.join(\",\")+\",\"+tStride.join(\",\")+\",this.offset)}\")\n\n  //view.pick():\n  code.push(\"proto.pick=function \"+className+\"_pick(\"+args+\"){var a=[],b=[],c=this.offset\")\n  for(var i=0; i<dimension; ++i) {\n    code.push(\"if(typeof i\"+i+\"==='number'&&i\"+i+\">=0){c=(c+this.stride[\"+i+\"]*i\"+i+\")|0}else{a.push(this.shape[\"+i+\"]);b.push(this.stride[\"+i+\"])}\")\n  }\n  code.push(\"var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}\")\n\n  //Add return statement\n  code.push(\"return function construct_\"+className+\"(data,shape,stride,offset){return new \"+className+\"(data,\"+\n    indices.map(function(i) {\n      return \"shape[\"+i+\"]\"\n    }).join(\",\")+\",\"+\n    indices.map(function(i) {\n      return \"stride[\"+i+\"]\"\n    }).join(\",\")+\",offset)}\")\n\n  //Compile procedure\n  var procedure = new Function(\"CTOR_LIST\", \"ORDER\", code.join(\"\\n\"))\n  return procedure(CACHED_CONSTRUCTORS[dtype], order)\n}\n\nfunction arrayDType(data) {\n  if(isBuffer(data)) {\n    return \"buffer\"\n  }\n  if(hasTypedArrays) {\n    switch(Object.prototype.toString.call(data)) {\n      case \"[object Float64Array]\":\n        return \"float64\"\n      case \"[object Float32Array]\":\n        return \"float32\"\n      case \"[object Int8Array]\":\n        return \"int8\"\n      case \"[object Int16Array]\":\n        return \"int16\"\n      case \"[object Int32Array]\":\n        return \"int32\"\n      case \"[object Uint8Array]\":\n        return \"uint8\"\n      case \"[object Uint16Array]\":\n        return \"uint16\"\n      case \"[object Uint32Array]\":\n        return \"uint32\"\n      case \"[object Uint8ClampedArray]\":\n        return \"uint8_clamped\"\n      case \"[object BigInt64Array]\":\n        return \"bigint64\"\n      case \"[object BigUint64Array]\":\n        return \"biguint64\"\n    }\n  }\n  if(Array.isArray(data)) {\n    return \"array\"\n  }\n  return \"generic\"\n}\n\nvar CACHED_CONSTRUCTORS = {\n  \"float32\":[],\n  \"float64\":[],\n  \"int8\":[],\n  \"int16\":[],\n  \"int32\":[],\n  \"uint8\":[],\n  \"uint16\":[],\n  \"uint32\":[],\n  \"array\":[],\n  \"uint8_clamped\":[],\n  \"bigint64\": [],\n  \"biguint64\": [],\n  \"buffer\":[],\n  \"generic\":[]\n}\n\n;(function() {\n  for(var id in CACHED_CONSTRUCTORS) {\n    CACHED_CONSTRUCTORS[id].push(compileConstructor(id, -1))\n  }\n});\n\nfunction wrappedNDArrayCtor(data, shape, stride, offset) {\n  if(data === undefined) {\n    var ctor = CACHED_CONSTRUCTORS.array[0]\n    return ctor([])\n  } else if(typeof data === \"number\") {\n    data = [data]\n  }\n  if(shape === undefined) {\n    shape = [ data.length ]\n  }\n  var d = shape.length\n  if(stride === undefined) {\n    stride = new Array(d)\n    for(var i=d-1, sz=1; i>=0; --i) {\n      stride[i] = sz\n      sz *= shape[i]\n    }\n  }\n  if(offset === undefined) {\n    offset = 0\n    for(var i=0; i<d; ++i) {\n      if(stride[i] < 0) {\n        offset -= (shape[i]-1)*stride[i]\n      }\n    }\n  }\n  var dtype = arrayDType(data)\n  var ctor_list = CACHED_CONSTRUCTORS[dtype]\n  while(ctor_list.length <= d+1) {\n    ctor_list.push(compileConstructor(dtype, ctor_list.length-1))\n  }\n  var ctor = ctor_list[d+1]\n  return ctor(data, shape, stride, offset)\n}\n\nmodule.exports = wrappedNDArrayCtor\n", "\"use strict\"\n\nfunction unique_pred(list, compare) {\n  var ptr = 1\n    , len = list.length\n    , a=list[0], b=list[0]\n  for(var i=1; i<len; ++i) {\n    b = a\n    a = list[i]\n    if(compare(a, b)) {\n      if(i === ptr) {\n        ptr++\n        continue\n      }\n      list[ptr++] = a\n    }\n  }\n  list.length = ptr\n  return list\n}\n\nfunction unique_eq(list) {\n  var ptr = 1\n    , len = list.length\n    , a=list[0], b = list[0]\n  for(var i=1; i<len; ++i, b=a) {\n    b = a\n    a = list[i]\n    if(a !== b) {\n      if(i === ptr) {\n        ptr++\n        continue\n      }\n      list[ptr++] = a\n    }\n  }\n  list.length = ptr\n  return list\n}\n\nfunction unique(list, compare, sorted) {\n  if(list.length === 0) {\n    return list\n  }\n  if(compare) {\n    if(!sorted) {\n      list.sort(compare)\n    }\n    return unique_pred(list, compare)\n  }\n  if(!sorted) {\n    list.sort()\n  }\n  return unique_eq(list)\n}\n\nmodule.exports = unique\n", "\"use strict\"\n\nvar uniq = require(\"uniq\")\n\n// This function generates very simple loops analogous to how you typically traverse arrays (the outermost loop corresponds to the slowest changing index, the innermost loop to the fastest changing index)\n// TODO: If two arrays have the same strides (and offsets) there is potential for decreasing the number of \"pointers\" and related variables. The drawback is that the type signature would become more specific and that there would thus be less potential for caching, but it might still be worth it, especially when dealing with large numbers of arguments.\nfunction innerFill(order, proc, body) {\n  var dimension = order.length\n    , nargs = proc.arrayArgs.length\n    , has_index = proc.indexArgs.length>0\n    , code = []\n    , vars = []\n    , idx=0, pidx=0, i, j\n  for(i=0; i<dimension; ++i) { // Iteration variables\n    vars.push([\"i\",i,\"=0\"].join(\"\"))\n  }\n  //Compute scan deltas\n  for(j=0; j<nargs; ++j) {\n    for(i=0; i<dimension; ++i) {\n      pidx = idx\n      idx = order[i]\n      if(i === 0) { // The innermost/fastest dimension's delta is simply its stride\n        vars.push([\"d\",j,\"s\",i,\"=t\",j,\"p\",idx].join(\"\"))\n      } else { // For other dimensions the delta is basically the stride minus something which essentially \"rewinds\" the previous (more inner) dimension\n        vars.push([\"d\",j,\"s\",i,\"=(t\",j,\"p\",idx,\"-s\",pidx,\"*t\",j,\"p\",pidx,\")\"].join(\"\"))\n      }\n    }\n  }\n  if (vars.length > 0) {\n    code.push(\"var \" + vars.join(\",\"))\n  }  \n  //Scan loop\n  for(i=dimension-1; i>=0; --i) { // Start at largest stride and work your way inwards\n    idx = order[i]\n    code.push([\"for(i\",i,\"=0;i\",i,\"<s\",idx,\";++i\",i,\"){\"].join(\"\"))\n  }\n  //Push body of inner loop\n  code.push(body)\n  //Advance scan pointers\n  for(i=0; i<dimension; ++i) {\n    pidx = idx\n    idx = order[i]\n    for(j=0; j<nargs; ++j) {\n      code.push([\"p\",j,\"+=d\",j,\"s\",i].join(\"\"))\n    }\n    if(has_index) {\n      if(i > 0) {\n        code.push([\"index[\",pidx,\"]-=s\",pidx].join(\"\"))\n      }\n      code.push([\"++index[\",idx,\"]\"].join(\"\"))\n    }\n    code.push(\"}\")\n  }\n  return code.join(\"\\n\")\n}\n\n// Generate \"outer\" loops that loop over blocks of data, applying \"inner\" loops to the blocks by manipulating the local variables in such a way that the inner loop only \"sees\" the current block.\n// TODO: If this is used, then the previous declaration (done by generateCwiseOp) of s* is essentially unnecessary.\n//       I believe the s* are not used elsewhere (in particular, I don't think they're used in the pre/post parts and \"shape\" is defined independently), so it would be possible to make defining the s* dependent on what loop method is being used.\nfunction outerFill(matched, order, proc, body) {\n  var dimension = order.length\n    , nargs = proc.arrayArgs.length\n    , blockSize = proc.blockSize\n    , has_index = proc.indexArgs.length > 0\n    , code = []\n  for(var i=0; i<nargs; ++i) {\n    code.push([\"var offset\",i,\"=p\",i].join(\"\"))\n  }\n  //Generate loops for unmatched dimensions\n  // The order in which these dimensions are traversed is fairly arbitrary (from small stride to large stride, for the first argument)\n  // TODO: It would be nice if the order in which these loops are placed would also be somehow \"optimal\" (at the very least we should check that it really doesn't hurt us if they're not).\n  for(var i=matched; i<dimension; ++i) {\n    code.push([\"for(var j\"+i+\"=SS[\", order[i], \"]|0;j\", i, \">0;){\"].join(\"\")) // Iterate back to front\n    code.push([\"if(j\",i,\"<\",blockSize,\"){\"].join(\"\")) // Either decrease j by blockSize (s = blockSize), or set it to zero (after setting s = j).\n    code.push([\"s\",order[i],\"=j\",i].join(\"\"))\n    code.push([\"j\",i,\"=0\"].join(\"\"))\n    code.push([\"}else{s\",order[i],\"=\",blockSize].join(\"\"))\n    code.push([\"j\",i,\"-=\",blockSize,\"}\"].join(\"\"))\n    if(has_index) {\n      code.push([\"index[\",order[i],\"]=j\",i].join(\"\"))\n    }\n  }\n  for(var i=0; i<nargs; ++i) {\n    var indexStr = [\"offset\"+i]\n    for(var j=matched; j<dimension; ++j) {\n      indexStr.push([\"j\",j,\"*t\",i,\"p\",order[j]].join(\"\"))\n    }\n    code.push([\"p\",i,\"=(\",indexStr.join(\"+\"),\")\"].join(\"\"))\n  }\n  code.push(innerFill(order, proc, body))\n  for(var i=matched; i<dimension; ++i) {\n    code.push(\"}\")\n  }\n  return code.join(\"\\n\")\n}\n\n//Count the number of compatible inner orders\n// This is the length of the longest common prefix of the arrays in orders.\n// Each array in orders lists the dimensions of the correspond ndarray in order of increasing stride.\n// This is thus the maximum number of dimensions that can be efficiently traversed by simple nested loops for all arrays.\nfunction countMatches(orders) {\n  var matched = 0, dimension = orders[0].length\n  while(matched < dimension) {\n    for(var j=1; j<orders.length; ++j) {\n      if(orders[j][matched] !== orders[0][matched]) {\n        return matched\n      }\n    }\n    ++matched\n  }\n  return matched\n}\n\n//Processes a block according to the given data types\n// Replaces variable names by different ones, either \"local\" ones (that are then ferried in and out of the given array) or ones matching the arguments that the function performing the ultimate loop will accept.\nfunction processBlock(block, proc, dtypes) {\n  var code = block.body\n  var pre = []\n  var post = []\n  for(var i=0; i<block.args.length; ++i) {\n    var carg = block.args[i]\n    if(carg.count <= 0) {\n      continue\n    }\n    var re = new RegExp(carg.name, \"g\")\n    var ptrStr = \"\"\n    var arrNum = proc.arrayArgs.indexOf(i)\n    switch(proc.argTypes[i]) {\n      case \"offset\":\n        var offArgIndex = proc.offsetArgIndex.indexOf(i)\n        var offArg = proc.offsetArgs[offArgIndex]\n        arrNum = offArg.array\n        ptrStr = \"+q\" + offArgIndex // Adds offset to the \"pointer\" in the array\n      case \"array\":\n        ptrStr = \"p\" + arrNum + ptrStr\n        var localStr = \"l\" + i\n        var arrStr = \"a\" + arrNum\n        if (proc.arrayBlockIndices[arrNum] === 0) { // Argument to body is just a single value from this array\n          if(carg.count === 1) { // Argument/array used only once(?)\n            if(dtypes[arrNum] === \"generic\") {\n              if(carg.lvalue) {\n                pre.push([\"var \", localStr, \"=\", arrStr, \".get(\", ptrStr, \")\"].join(\"\")) // Is this necessary if the argument is ONLY used as an lvalue? (keep in mind that we can have a += something, so we would actually need to check carg.rvalue)\n                code = code.replace(re, localStr)\n                post.push([arrStr, \".set(\", ptrStr, \",\", localStr,\")\"].join(\"\"))\n              } else {\n                code = code.replace(re, [arrStr, \".get(\", ptrStr, \")\"].join(\"\"))\n              }\n            } else {\n              code = code.replace(re, [arrStr, \"[\", ptrStr, \"]\"].join(\"\"))\n            }\n          } else if(dtypes[arrNum] === \"generic\") {\n            pre.push([\"var \", localStr, \"=\", arrStr, \".get(\", ptrStr, \")\"].join(\"\")) // TODO: Could we optimize by checking for carg.rvalue?\n            code = code.replace(re, localStr)\n            if(carg.lvalue) {\n              post.push([arrStr, \".set(\", ptrStr, \",\", localStr,\")\"].join(\"\"))\n            }\n          } else {\n            pre.push([\"var \", localStr, \"=\", arrStr, \"[\", ptrStr, \"]\"].join(\"\")) // TODO: Could we optimize by checking for carg.rvalue?\n            code = code.replace(re, localStr)\n            if(carg.lvalue) {\n              post.push([arrStr, \"[\", ptrStr, \"]=\", localStr].join(\"\"))\n            }\n          }\n        } else { // Argument to body is a \"block\"\n          var reStrArr = [carg.name], ptrStrArr = [ptrStr]\n          for(var j=0; j<Math.abs(proc.arrayBlockIndices[arrNum]); j++) {\n            reStrArr.push(\"\\\\s*\\\\[([^\\\\]]+)\\\\]\")\n            ptrStrArr.push(\"$\" + (j+1) + \"*t\" + arrNum + \"b\" + j) // Matched index times stride\n          }\n          re = new RegExp(reStrArr.join(\"\"), \"g\")\n          ptrStr = ptrStrArr.join(\"+\")\n          if(dtypes[arrNum] === \"generic\") {\n            /*if(carg.lvalue) {\n              pre.push([\"var \", localStr, \"=\", arrStr, \".get(\", ptrStr, \")\"].join(\"\")) // Is this necessary if the argument is ONLY used as an lvalue? (keep in mind that we can have a += something, so we would actually need to check carg.rvalue)\n              code = code.replace(re, localStr)\n              post.push([arrStr, \".set(\", ptrStr, \",\", localStr,\")\"].join(\"\"))\n            } else {\n              code = code.replace(re, [arrStr, \".get(\", ptrStr, \")\"].join(\"\"))\n            }*/\n            throw new Error(\"cwise: Generic arrays not supported in combination with blocks!\")\n          } else {\n            // This does not produce any local variables, even if variables are used multiple times. It would be possible to do so, but it would complicate things quite a bit.\n            code = code.replace(re, [arrStr, \"[\", ptrStr, \"]\"].join(\"\"))\n          }\n        }\n      break\n      case \"scalar\":\n        code = code.replace(re, \"Y\" + proc.scalarArgs.indexOf(i))\n      break\n      case \"index\":\n        code = code.replace(re, \"index\")\n      break\n      case \"shape\":\n        code = code.replace(re, \"shape\")\n      break\n    }\n  }\n  return [pre.join(\"\\n\"), code, post.join(\"\\n\")].join(\"\\n\").trim()\n}\n\nfunction typeSummary(dtypes) {\n  var summary = new Array(dtypes.length)\n  var allEqual = true\n  for(var i=0; i<dtypes.length; ++i) {\n    var t = dtypes[i]\n    var digits = t.match(/\\d+/)\n    if(!digits) {\n      digits = \"\"\n    } else {\n      digits = digits[0]\n    }\n    if(t.charAt(0) === 0) {\n      summary[i] = \"u\" + t.charAt(1) + digits\n    } else {\n      summary[i] = t.charAt(0) + digits\n    }\n    if(i > 0) {\n      allEqual = allEqual && summary[i] === summary[i-1]\n    }\n  }\n  if(allEqual) {\n    return summary[0]\n  }\n  return summary.join(\"\")\n}\n\n//Generates a cwise operator\nfunction generateCWiseOp(proc, typesig) {\n\n  //Compute dimension\n  // Arrays get put first in typesig, and there are two entries per array (dtype and order), so this gets the number of dimensions in the first array arg.\n  var dimension = (typesig[1].length - Math.abs(proc.arrayBlockIndices[0]))|0\n  var orders = new Array(proc.arrayArgs.length)\n  var dtypes = new Array(proc.arrayArgs.length)\n  for(var i=0; i<proc.arrayArgs.length; ++i) {\n    dtypes[i] = typesig[2*i]\n    orders[i] = typesig[2*i+1]\n  }\n  \n  //Determine where block and loop indices start and end\n  var blockBegin = [], blockEnd = [] // These indices are exposed as blocks\n  var loopBegin = [], loopEnd = [] // These indices are iterated over\n  var loopOrders = [] // orders restricted to the loop indices\n  for(var i=0; i<proc.arrayArgs.length; ++i) {\n    if (proc.arrayBlockIndices[i]<0) {\n      loopBegin.push(0)\n      loopEnd.push(dimension)\n      blockBegin.push(dimension)\n      blockEnd.push(dimension+proc.arrayBlockIndices[i])\n    } else {\n      loopBegin.push(proc.arrayBlockIndices[i]) // Non-negative\n      loopEnd.push(proc.arrayBlockIndices[i]+dimension)\n      blockBegin.push(0)\n      blockEnd.push(proc.arrayBlockIndices[i])\n    }\n    var newOrder = []\n    for(var j=0; j<orders[i].length; j++) {\n      if (loopBegin[i]<=orders[i][j] && orders[i][j]<loopEnd[i]) {\n        newOrder.push(orders[i][j]-loopBegin[i]) // If this is a loop index, put it in newOrder, subtracting loopBegin, to make sure that all loopOrders are using a common set of indices.\n      }\n    }\n    loopOrders.push(newOrder)\n  }\n\n  //First create arguments for procedure\n  var arglist = [\"SS\"] // SS is the overall shape over which we iterate\n  var code = [\"'use strict'\"]\n  var vars = []\n  \n  for(var j=0; j<dimension; ++j) {\n    vars.push([\"s\", j, \"=SS[\", j, \"]\"].join(\"\")) // The limits for each dimension.\n  }\n  for(var i=0; i<proc.arrayArgs.length; ++i) {\n    arglist.push(\"a\"+i) // Actual data array\n    arglist.push(\"t\"+i) // Strides\n    arglist.push(\"p\"+i) // Offset in the array at which the data starts (also used for iterating over the data)\n    \n    for(var j=0; j<dimension; ++j) { // Unpack the strides into vars for looping\n      vars.push([\"t\",i,\"p\",j,\"=t\",i,\"[\",loopBegin[i]+j,\"]\"].join(\"\"))\n    }\n    \n    for(var j=0; j<Math.abs(proc.arrayBlockIndices[i]); ++j) { // Unpack the strides into vars for block iteration\n      vars.push([\"t\",i,\"b\",j,\"=t\",i,\"[\",blockBegin[i]+j,\"]\"].join(\"\"))\n    }\n  }\n  for(var i=0; i<proc.scalarArgs.length; ++i) {\n    arglist.push(\"Y\" + i)\n  }\n  if(proc.shapeArgs.length > 0) {\n    vars.push(\"shape=SS.slice(0)\") // Makes the shape over which we iterate available to the user defined functions (so you can use width/height for example)\n  }\n  if(proc.indexArgs.length > 0) {\n    // Prepare an array to keep track of the (logical) indices, initialized to dimension zeroes.\n    var zeros = new Array(dimension)\n    for(var i=0; i<dimension; ++i) {\n      zeros[i] = \"0\"\n    }\n    vars.push([\"index=[\", zeros.join(\",\"), \"]\"].join(\"\"))\n  }\n  for(var i=0; i<proc.offsetArgs.length; ++i) { // Offset arguments used for stencil operations\n    var off_arg = proc.offsetArgs[i]\n    var init_string = []\n    for(var j=0; j<off_arg.offset.length; ++j) {\n      if(off_arg.offset[j] === 0) {\n        continue\n      } else if(off_arg.offset[j] === 1) {\n        init_string.push([\"t\", off_arg.array, \"p\", j].join(\"\"))      \n      } else {\n        init_string.push([off_arg.offset[j], \"*t\", off_arg.array, \"p\", j].join(\"\"))\n      }\n    }\n    if(init_string.length === 0) {\n      vars.push(\"q\" + i + \"=0\")\n    } else {\n      vars.push([\"q\", i, \"=\", init_string.join(\"+\")].join(\"\"))\n    }\n  }\n\n  //Prepare this variables\n  var thisVars = uniq([].concat(proc.pre.thisVars)\n                      .concat(proc.body.thisVars)\n                      .concat(proc.post.thisVars))\n  vars = vars.concat(thisVars)\n  if (vars.length > 0) {\n    code.push(\"var \" + vars.join(\",\"))\n  }\n  for(var i=0; i<proc.arrayArgs.length; ++i) {\n    code.push(\"p\"+i+\"|=0\")\n  }\n  \n  //Inline prelude\n  if(proc.pre.body.length > 3) {\n    code.push(processBlock(proc.pre, proc, dtypes))\n  }\n\n  //Process body\n  var body = processBlock(proc.body, proc, dtypes)\n  var matched = countMatches(loopOrders)\n  if(matched < dimension) {\n    code.push(outerFill(matched, loopOrders[0], proc, body)) // TODO: Rather than passing loopOrders[0], it might be interesting to look at passing an order that represents the majority of the arguments for example.\n  } else {\n    code.push(innerFill(loopOrders[0], proc, body))\n  }\n\n  //Inline epilog\n  if(proc.post.body.length > 3) {\n    code.push(processBlock(proc.post, proc, dtypes))\n  }\n  \n  if(proc.debug) {\n    console.log(\"-----Generated cwise routine for \", typesig, \":\\n\" + code.join(\"\\n\") + \"\\n----------\")\n  }\n  \n  var loopName = [(proc.funcName||\"unnamed\"), \"_cwise_loop_\", orders[0].join(\"s\"),\"m\",matched,typeSummary(dtypes)].join(\"\")\n  var f = new Function([\"function \",loopName,\"(\", arglist.join(\",\"),\"){\", code.join(\"\\n\"),\"} return \", loopName].join(\"\"))\n  return f()\n}\nmodule.exports = generateCWiseOp\n", "\"use strict\"\n\n// The function below is called when constructing a cwise function object, and does the following:\n// A function object is constructed which accepts as argument a compilation function and returns another function.\n// It is this other function that is eventually returned by createThunk, and this function is the one that actually\n// checks whether a certain pattern of arguments has already been used before and compiles new loops as needed.\n// The compilation passed to the first function object is used for compiling new functions.\n// Once this function object is created, it is called with compile as argument, where the first argument of compile\n// is bound to \"proc\" (essentially containing a preprocessed version of the user arguments to cwise).\n// So createThunk roughly works like this:\n// function createThunk(proc) {\n//   var thunk = function(compileBound) {\n//     var CACHED = {}\n//     return function(arrays and scalars) {\n//       if (dtype and order of arrays in CACHED) {\n//         var func = CACHED[dtype and order of arrays]\n//       } else {\n//         var func = CACHED[dtype and order of arrays] = compileBound(dtype and order of arrays)\n//       }\n//       return func(arrays and scalars)\n//     }\n//   }\n//   return thunk(compile.bind1(proc))\n// }\n\nvar compile = require(\"./compile.js\")\n\nfunction createThunk(proc) {\n  var code = [\"'use strict'\", \"var CACHED={}\"]\n  var vars = []\n  var thunkName = proc.funcName + \"_cwise_thunk\"\n  \n  //Build thunk\n  code.push([\"return function \", thunkName, \"(\", proc.shimArgs.join(\",\"), \"){\"].join(\"\"))\n  var typesig = []\n  var string_typesig = []\n  var proc_args = [[\"array\",proc.arrayArgs[0],\".shape.slice(\", // Slice shape so that we only retain the shape over which we iterate (which gets passed to the cwise operator as SS).\n                    Math.max(0,proc.arrayBlockIndices[0]),proc.arrayBlockIndices[0]<0?(\",\"+proc.arrayBlockIndices[0]+\")\"):\")\"].join(\"\")]\n  var shapeLengthConditions = [], shapeConditions = []\n  // Process array arguments\n  for(var i=0; i<proc.arrayArgs.length; ++i) {\n    var j = proc.arrayArgs[i]\n    vars.push([\"t\", j, \"=array\", j, \".dtype,\",\n               \"r\", j, \"=array\", j, \".order\"].join(\"\"))\n    typesig.push(\"t\" + j)\n    typesig.push(\"r\" + j)\n    string_typesig.push(\"t\"+j)\n    string_typesig.push(\"r\"+j+\".join()\")\n    proc_args.push(\"array\" + j + \".data\")\n    proc_args.push(\"array\" + j + \".stride\")\n    proc_args.push(\"array\" + j + \".offset|0\")\n    if (i>0) { // Gather conditions to check for shape equality (ignoring block indices)\n      shapeLengthConditions.push(\"array\" + proc.arrayArgs[0] + \".shape.length===array\" + j + \".shape.length+\" + (Math.abs(proc.arrayBlockIndices[0])-Math.abs(proc.arrayBlockIndices[i])))\n      shapeConditions.push(\"array\" + proc.arrayArgs[0] + \".shape[shapeIndex+\" + Math.max(0,proc.arrayBlockIndices[0]) + \"]===array\" + j + \".shape[shapeIndex+\" + Math.max(0,proc.arrayBlockIndices[i]) + \"]\")\n    }\n  }\n  // Check for shape equality\n  if (proc.arrayArgs.length > 1) {\n    code.push(\"if (!(\" + shapeLengthConditions.join(\" && \") + \")) throw new Error('cwise: Arrays do not all have the same dimensionality!')\")\n    code.push(\"for(var shapeIndex=array\" + proc.arrayArgs[0] + \".shape.length-\" + Math.abs(proc.arrayBlockIndices[0]) + \"; shapeIndex-->0;) {\")\n    code.push(\"if (!(\" + shapeConditions.join(\" && \") + \")) throw new Error('cwise: Arrays do not all have the same shape!')\")\n    code.push(\"}\")\n  }\n  // Process scalar arguments\n  for(var i=0; i<proc.scalarArgs.length; ++i) {\n    proc_args.push(\"scalar\" + proc.scalarArgs[i])\n  }\n  // Check for cached function (and if not present, generate it)\n  vars.push([\"type=[\", string_typesig.join(\",\"), \"].join()\"].join(\"\"))\n  vars.push(\"proc=CACHED[type]\")\n  code.push(\"var \" + vars.join(\",\"))\n  \n  code.push([\"if(!proc){\",\n             \"CACHED[type]=proc=compile([\", typesig.join(\",\"), \"])}\",\n             \"return proc(\", proc_args.join(\",\"), \")}\"].join(\"\"))\n\n  if(proc.debug) {\n    console.log(\"-----Generated thunk:\\n\" + code.join(\"\\n\") + \"\\n----------\")\n  }\n  \n  //Compile thunk\n  var thunk = new Function(\"compile\", code.join(\"\\n\"))\n  return thunk(compile.bind(undefined, proc))\n}\n\nmodule.exports = createThunk\n", "\"use strict\"\n\nvar createThunk = require(\"./lib/thunk.js\")\n\nfunction Procedure() {\n  this.argTypes = []\n  this.shimArgs = []\n  this.arrayArgs = []\n  this.arrayBlockIndices = []\n  this.scalarArgs = []\n  this.offsetArgs = []\n  this.offsetArgIndex = []\n  this.indexArgs = []\n  this.shapeArgs = []\n  this.funcName = \"\"\n  this.pre = null\n  this.body = null\n  this.post = null\n  this.debug = false\n}\n\nfunction compileCwise(user_args) {\n  //Create procedure\n  var proc = new Procedure()\n  \n  //Parse blocks\n  proc.pre    = user_args.pre\n  proc.body   = user_args.body\n  proc.post   = user_args.post\n\n  //Parse arguments\n  var proc_args = user_args.args.slice(0)\n  proc.argTypes = proc_args\n  for(var i=0; i<proc_args.length; ++i) {\n    var arg_type = proc_args[i]\n    if(arg_type === \"array\" || (typeof arg_type === \"object\" && arg_type.blockIndices)) {\n      proc.argTypes[i] = \"array\"\n      proc.arrayArgs.push(i)\n      proc.arrayBlockIndices.push(arg_type.blockIndices ? arg_type.blockIndices : 0)\n      proc.shimArgs.push(\"array\" + i)\n      if(i < proc.pre.args.length && proc.pre.args[i].count>0) {\n        throw new Error(\"cwise: pre() block may not reference array args\")\n      }\n      if(i < proc.post.args.length && proc.post.args[i].count>0) {\n        throw new Error(\"cwise: post() block may not reference array args\")\n      }\n    } else if(arg_type === \"scalar\") {\n      proc.scalarArgs.push(i)\n      proc.shimArgs.push(\"scalar\" + i)\n    } else if(arg_type === \"index\") {\n      proc.indexArgs.push(i)\n      if(i < proc.pre.args.length && proc.pre.args[i].count > 0) {\n        throw new Error(\"cwise: pre() block may not reference array index\")\n      }\n      if(i < proc.body.args.length && proc.body.args[i].lvalue) {\n        throw new Error(\"cwise: body() block may not write to array index\")\n      }\n      if(i < proc.post.args.length && proc.post.args[i].count > 0) {\n        throw new Error(\"cwise: post() block may not reference array index\")\n      }\n    } else if(arg_type === \"shape\") {\n      proc.shapeArgs.push(i)\n      if(i < proc.pre.args.length && proc.pre.args[i].lvalue) {\n        throw new Error(\"cwise: pre() block may not write to array shape\")\n      }\n      if(i < proc.body.args.length && proc.body.args[i].lvalue) {\n        throw new Error(\"cwise: body() block may not write to array shape\")\n      }\n      if(i < proc.post.args.length && proc.post.args[i].lvalue) {\n        throw new Error(\"cwise: post() block may not write to array shape\")\n      }\n    } else if(typeof arg_type === \"object\" && arg_type.offset) {\n      proc.argTypes[i] = \"offset\"\n      proc.offsetArgs.push({ array: arg_type.array, offset:arg_type.offset })\n      proc.offsetArgIndex.push(i)\n    } else {\n      throw new Error(\"cwise: Unknown argument type \" + proc_args[i])\n    }\n  }\n  \n  //Make sure at least one array argument was specified\n  if(proc.arrayArgs.length <= 0) {\n    throw new Error(\"cwise: No array arguments specified\")\n  }\n  \n  //Make sure arguments are correct\n  if(proc.pre.args.length > proc_args.length) {\n    throw new Error(\"cwise: Too many arguments in pre() block\")\n  }\n  if(proc.body.args.length > proc_args.length) {\n    throw new Error(\"cwise: Too many arguments in body() block\")\n  }\n  if(proc.post.args.length > proc_args.length) {\n    throw new Error(\"cwise: Too many arguments in post() block\")\n  }\n\n  //Check debug flag\n  proc.debug = !!user_args.printCode || !!user_args.debug\n  \n  //Retrieve name\n  proc.funcName = user_args.funcName || \"cwise\"\n  \n  //Read in block size\n  proc.blockSize = user_args.blockSize || 64\n\n  return createThunk(proc)\n}\n\nmodule.exports = compileCwise\n", "\"use strict\"\n\nvar compile = require(\"cwise-compiler\")\n\nvar EmptyProc = {\n  body: \"\",\n  args: [],\n  thisVars: [],\n  localVars: []\n}\n\nfunction fixup(x) {\n  if(!x) {\n    return EmptyProc\n  }\n  for(var i=0; i<x.args.length; ++i) {\n    var a = x.args[i]\n    if(i === 0) {\n      x.args[i] = {name: a, lvalue:true, rvalue: !!x.rvalue, count:x.count||1 }\n    } else {\n      x.args[i] = {name: a, lvalue:false, rvalue:true, count: 1}\n    }\n  }\n  if(!x.thisVars) {\n    x.thisVars = []\n  }\n  if(!x.localVars) {\n    x.localVars = []\n  }\n  return x\n}\n\nfunction pcompile(user_args) {\n  return compile({\n    args:     user_args.args,\n    pre:      fixup(user_args.pre),\n    body:     fixup(user_args.body),\n    post:     fixup(user_args.proc),\n    funcName: user_args.funcName\n  })\n}\n\nfunction makeOp(user_args) {\n  var args = []\n  for(var i=0; i<user_args.args.length; ++i) {\n    args.push(\"a\"+i)\n  }\n  var wrapper = new Function(\"P\", [\n    \"return function \", user_args.funcName, \"_ndarrayops(\", args.join(\",\"), \") {P(\", args.join(\",\"), \");return a0}\"\n  ].join(\"\"))\n  return wrapper(pcompile(user_args))\n}\n\nvar assign_ops = {\n  add:  \"+\",\n  sub:  \"-\",\n  mul:  \"*\",\n  div:  \"/\",\n  mod:  \"%\",\n  band: \"&\",\n  bor:  \"|\",\n  bxor: \"^\",\n  lshift: \"<<\",\n  rshift: \">>\",\n  rrshift: \">>>\"\n}\n;(function(){\n  for(var id in assign_ops) {\n    var op = assign_ops[id]\n    exports[id] = makeOp({\n      args: [\"array\",\"array\",\"array\"],\n      body: {args:[\"a\",\"b\",\"c\"],\n             body: \"a=b\"+op+\"c\"},\n      funcName: id\n    })\n    exports[id+\"eq\"] = makeOp({\n      args: [\"array\",\"array\"],\n      body: {args:[\"a\",\"b\"],\n             body:\"a\"+op+\"=b\"},\n      rvalue: true,\n      funcName: id+\"eq\"\n    })\n    exports[id+\"s\"] = makeOp({\n      args: [\"array\", \"array\", \"scalar\"],\n      body: {args:[\"a\",\"b\",\"s\"],\n             body:\"a=b\"+op+\"s\"},\n      funcName: id+\"s\"\n    })\n    exports[id+\"seq\"] = makeOp({\n      args: [\"array\",\"scalar\"],\n      body: {args:[\"a\",\"s\"],\n             body:\"a\"+op+\"=s\"},\n      rvalue: true,\n      funcName: id+\"seq\"\n    })\n  }\n})();\n\nvar unary_ops = {\n  not: \"!\",\n  bnot: \"~\",\n  neg: \"-\",\n  recip: \"1.0/\"\n}\n;(function(){\n  for(var id in unary_ops) {\n    var op = unary_ops[id]\n    exports[id] = makeOp({\n      args: [\"array\", \"array\"],\n      body: {args:[\"a\",\"b\"],\n             body:\"a=\"+op+\"b\"},\n      funcName: id\n    })\n    exports[id+\"eq\"] = makeOp({\n      args: [\"array\"],\n      body: {args:[\"a\"],\n             body:\"a=\"+op+\"a\"},\n      rvalue: true,\n      count: 2,\n      funcName: id+\"eq\"\n    })\n  }\n})();\n\nvar binary_ops = {\n  and: \"&&\",\n  or: \"||\",\n  eq: \"===\",\n  neq: \"!==\",\n  lt: \"<\",\n  gt: \">\",\n  leq: \"<=\",\n  geq: \">=\"\n}\n;(function() {\n  for(var id in binary_ops) {\n    var op = binary_ops[id]\n    exports[id] = makeOp({\n      args: [\"array\",\"array\",\"array\"],\n      body: {args:[\"a\", \"b\", \"c\"],\n             body:\"a=b\"+op+\"c\"},\n      funcName: id\n    })\n    exports[id+\"s\"] = makeOp({\n      args: [\"array\",\"array\",\"scalar\"],\n      body: {args:[\"a\", \"b\", \"s\"],\n             body:\"a=b\"+op+\"s\"},\n      funcName: id+\"s\"\n    })\n    exports[id+\"eq\"] = makeOp({\n      args: [\"array\", \"array\"],\n      body: {args:[\"a\", \"b\"],\n             body:\"a=a\"+op+\"b\"},\n      rvalue:true,\n      count:2,\n      funcName: id+\"eq\"\n    })\n    exports[id+\"seq\"] = makeOp({\n      args: [\"array\", \"scalar\"],\n      body: {args:[\"a\",\"s\"],\n             body:\"a=a\"+op+\"s\"},\n      rvalue:true,\n      count:2,\n      funcName: id+\"seq\"\n    })\n  }\n})();\n\nvar math_unary = [\n  \"abs\",\n  \"acos\",\n  \"asin\",\n  \"atan\",\n  \"ceil\",\n  \"cos\",\n  \"exp\",\n  \"floor\",\n  \"log\",\n  \"round\",\n  \"sin\",\n  \"sqrt\",\n  \"tan\"\n]\n;(function() {\n  for(var i=0; i<math_unary.length; ++i) {\n    var f = math_unary[i]\n    exports[f] = makeOp({\n                    args: [\"array\", \"array\"],\n                    pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                    body: {args:[\"a\",\"b\"], body:\"a=this_f(b)\", thisVars:[\"this_f\"]},\n                    funcName: f\n                  })\n    exports[f+\"eq\"] = makeOp({\n                      args: [\"array\"],\n                      pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                      body: {args: [\"a\"], body:\"a=this_f(a)\", thisVars:[\"this_f\"]},\n                      rvalue: true,\n                      count: 2,\n                      funcName: f+\"eq\"\n                    })\n  }\n})();\n\nvar math_comm = [\n  \"max\",\n  \"min\",\n  \"atan2\",\n  \"pow\"\n]\n;(function(){\n  for(var i=0; i<math_comm.length; ++i) {\n    var f= math_comm[i]\n    exports[f] = makeOp({\n                  args:[\"array\", \"array\", \"array\"],\n                  pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                  body: {args:[\"a\",\"b\",\"c\"], body:\"a=this_f(b,c)\", thisVars:[\"this_f\"]},\n                  funcName: f\n                })\n    exports[f+\"s\"] = makeOp({\n                  args:[\"array\", \"array\", \"scalar\"],\n                  pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                  body: {args:[\"a\",\"b\",\"c\"], body:\"a=this_f(b,c)\", thisVars:[\"this_f\"]},\n                  funcName: f+\"s\"\n                  })\n    exports[f+\"eq\"] = makeOp({ args:[\"array\", \"array\"],\n                  pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                  body: {args:[\"a\",\"b\"], body:\"a=this_f(a,b)\", thisVars:[\"this_f\"]},\n                  rvalue: true,\n                  count: 2,\n                  funcName: f+\"eq\"\n                  })\n    exports[f+\"seq\"] = makeOp({ args:[\"array\", \"scalar\"],\n                  pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                  body: {args:[\"a\",\"b\"], body:\"a=this_f(a,b)\", thisVars:[\"this_f\"]},\n                  rvalue:true,\n                  count:2,\n                  funcName: f+\"seq\"\n                  })\n  }\n})();\n\nvar math_noncomm = [\n  \"atan2\",\n  \"pow\"\n]\n;(function(){\n  for(var i=0; i<math_noncomm.length; ++i) {\n    var f= math_noncomm[i]\n    exports[f+\"op\"] = makeOp({\n                  args:[\"array\", \"array\", \"array\"],\n                  pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                  body: {args:[\"a\",\"b\",\"c\"], body:\"a=this_f(c,b)\", thisVars:[\"this_f\"]},\n                  funcName: f+\"op\"\n                })\n    exports[f+\"ops\"] = makeOp({\n                  args:[\"array\", \"array\", \"scalar\"],\n                  pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                  body: {args:[\"a\",\"b\",\"c\"], body:\"a=this_f(c,b)\", thisVars:[\"this_f\"]},\n                  funcName: f+\"ops\"\n                  })\n    exports[f+\"opeq\"] = makeOp({ args:[\"array\", \"array\"],\n                  pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                  body: {args:[\"a\",\"b\"], body:\"a=this_f(b,a)\", thisVars:[\"this_f\"]},\n                  rvalue: true,\n                  count: 2,\n                  funcName: f+\"opeq\"\n                  })\n    exports[f+\"opseq\"] = makeOp({ args:[\"array\", \"scalar\"],\n                  pre: {args:[], body:\"this_f=Math.\"+f, thisVars:[\"this_f\"]},\n                  body: {args:[\"a\",\"b\"], body:\"a=this_f(b,a)\", thisVars:[\"this_f\"]},\n                  rvalue:true,\n                  count:2,\n                  funcName: f+\"opseq\"\n                  })\n  }\n})();\n\nexports.any = compile({\n  args:[\"array\"],\n  pre: EmptyProc,\n  body: {args:[{name:\"a\", lvalue:false, rvalue:true, count:1}], body: \"if(a){return true}\", localVars: [], thisVars: []},\n  post: {args:[], localVars:[], thisVars:[], body:\"return false\"},\n  funcName: \"any\"\n})\n\nexports.all = compile({\n  args:[\"array\"],\n  pre: EmptyProc,\n  body: {args:[{name:\"x\", lvalue:false, rvalue:true, count:1}], body: \"if(!x){return false}\", localVars: [], thisVars: []},\n  post: {args:[], localVars:[], thisVars:[], body:\"return true\"},\n  funcName: \"all\"\n})\n\nexports.sum = compile({\n  args:[\"array\"],\n  pre: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"this_s=0\"},\n  body: {args:[{name:\"a\", lvalue:false, rvalue:true, count:1}], body: \"this_s+=a\", localVars: [], thisVars: [\"this_s\"]},\n  post: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"return this_s\"},\n  funcName: \"sum\"\n})\n\nexports.prod = compile({\n  args:[\"array\"],\n  pre: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"this_s=1\"},\n  body: {args:[{name:\"a\", lvalue:false, rvalue:true, count:1}], body: \"this_s*=a\", localVars: [], thisVars: [\"this_s\"]},\n  post: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"return this_s\"},\n  funcName: \"prod\"\n})\n\nexports.norm2squared = compile({\n  args:[\"array\"],\n  pre: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"this_s=0\"},\n  body: {args:[{name:\"a\", lvalue:false, rvalue:true, count:2}], body: \"this_s+=a*a\", localVars: [], thisVars: [\"this_s\"]},\n  post: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"return this_s\"},\n  funcName: \"norm2squared\"\n})\n  \nexports.norm2 = compile({\n  args:[\"array\"],\n  pre: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"this_s=0\"},\n  body: {args:[{name:\"a\", lvalue:false, rvalue:true, count:2}], body: \"this_s+=a*a\", localVars: [], thisVars: [\"this_s\"]},\n  post: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"return Math.sqrt(this_s)\"},\n  funcName: \"norm2\"\n})\n  \n\nexports.norminf = compile({\n  args:[\"array\"],\n  pre: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"this_s=0\"},\n  body: {args:[{name:\"a\", lvalue:false, rvalue:true, count:4}], body:\"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}\", localVars: [], thisVars: [\"this_s\"]},\n  post: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"return this_s\"},\n  funcName: \"norminf\"\n})\n\nexports.norm1 = compile({\n  args:[\"array\"],\n  pre: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"this_s=0\"},\n  body: {args:[{name:\"a\", lvalue:false, rvalue:true, count:3}], body: \"this_s+=a<0?-a:a\", localVars: [], thisVars: [\"this_s\"]},\n  post: {args:[], localVars:[], thisVars:[\"this_s\"], body:\"return this_s\"},\n  funcName: \"norm1\"\n})\n\nexports.sup = compile({\n  args: [ \"array\" ],\n  pre:\n   { body: \"this_h=-Infinity\",\n     args: [],\n     thisVars: [ \"this_h\" ],\n     localVars: [] },\n  body:\n   { body: \"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_\",\n     args: [{\"name\":\"_inline_1_arg0_\",\"lvalue\":false,\"rvalue\":true,\"count\":2} ],\n     thisVars: [ \"this_h\" ],\n     localVars: [] },\n  post:\n   { body: \"return this_h\",\n     args: [],\n     thisVars: [ \"this_h\" ],\n     localVars: [] }\n })\n\nexports.inf = compile({\n  args: [ \"array\" ],\n  pre:\n   { body: \"this_h=Infinity\",\n     args: [],\n     thisVars: [ \"this_h\" ],\n     localVars: [] },\n  body:\n   { body: \"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_\",\n     args: [{\"name\":\"_inline_1_arg0_\",\"lvalue\":false,\"rvalue\":true,\"count\":2} ],\n     thisVars: [ \"this_h\" ],\n     localVars: [] },\n  post:\n   { body: \"return this_h\",\n     args: [],\n     thisVars: [ \"this_h\" ],\n     localVars: [] }\n })\n\nexports.argmin = compile({\n  args:[\"index\",\"array\",\"shape\"],\n  pre:{\n    body:\"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}\",\n    args:[\n      {name:\"_inline_0_arg0_\",lvalue:false,rvalue:false,count:0},\n      {name:\"_inline_0_arg1_\",lvalue:false,rvalue:false,count:0},\n      {name:\"_inline_0_arg2_\",lvalue:false,rvalue:true,count:1}\n      ],\n    thisVars:[\"this_i\",\"this_v\"],\n    localVars:[]},\n  body:{\n    body:\"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}\",\n    args:[\n      {name:\"_inline_1_arg0_\",lvalue:false,rvalue:true,count:2},\n      {name:\"_inline_1_arg1_\",lvalue:false,rvalue:true,count:2}],\n    thisVars:[\"this_i\",\"this_v\"],\n    localVars:[\"_inline_1_k\"]},\n  post:{\n    body:\"{return this_i}\",\n    args:[],\n    thisVars:[\"this_i\"],\n    localVars:[]}\n})\n\nexports.argmax = compile({\n  args:[\"index\",\"array\",\"shape\"],\n  pre:{\n    body:\"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}\",\n    args:[\n      {name:\"_inline_0_arg0_\",lvalue:false,rvalue:false,count:0},\n      {name:\"_inline_0_arg1_\",lvalue:false,rvalue:false,count:0},\n      {name:\"_inline_0_arg2_\",lvalue:false,rvalue:true,count:1}\n      ],\n    thisVars:[\"this_i\",\"this_v\"],\n    localVars:[]},\n  body:{\n    body:\"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}\",\n    args:[\n      {name:\"_inline_1_arg0_\",lvalue:false,rvalue:true,count:2},\n      {name:\"_inline_1_arg1_\",lvalue:false,rvalue:true,count:2}],\n    thisVars:[\"this_i\",\"this_v\"],\n    localVars:[\"_inline_1_k\"]},\n  post:{\n    body:\"{return this_i}\",\n    args:[],\n    thisVars:[\"this_i\"],\n    localVars:[]}\n})  \n\nexports.random = makeOp({\n  args: [\"array\"],\n  pre: {args:[], body:\"this_f=Math.random\", thisVars:[\"this_f\"]},\n  body: {args: [\"a\"], body:\"a=this_f()\", thisVars:[\"this_f\"]},\n  funcName: \"random\"\n})\n\nexports.assign = makeOp({\n  args:[\"array\", \"array\"],\n  body: {args:[\"a\", \"b\"], body:\"a=b\"},\n  funcName: \"assign\" })\n\nexports.assigns = makeOp({\n  args:[\"array\", \"scalar\"],\n  body: {args:[\"a\", \"b\"], body:\"a=b\"},\n  funcName: \"assigns\" })\n\n\nexports.equals = compile({\n  args:[\"array\", \"array\"],\n  pre: EmptyProc,\n  body: {args:[{name:\"x\", lvalue:false, rvalue:true, count:1},\n               {name:\"y\", lvalue:false, rvalue:true, count:1}], \n        body: \"if(x!==y){return false}\", \n        localVars: [], \n        thisVars: []},\n  post: {args:[], localVars:[], thisVars:[], body:\"return true\"},\n  funcName: \"equals\"\n})\n\n\n", "var Stream = require('stream')\n\n// through\n//\n// a stream that does nothing but re-emit the input.\n// useful for aggregating a series of changing but not ending streams into one stream)\n\nexports = module.exports = through\nthrough.through = through\n\n//create a readable writable stream.\n\nfunction through (write, end, opts) {\n  write = write || function (data) { this.queue(data) }\n  end = end || function () { this.queue(null) }\n\n  var ended = false, destroyed = false, buffer = [], _ended = false\n  var stream = new Stream()\n  stream.readable = stream.writable = true\n  stream.paused = false\n\n//  stream.autoPause   = !(opts && opts.autoPause   === false)\n  stream.autoDestroy = !(opts && opts.autoDestroy === false)\n\n  stream.write = function (data) {\n    write.call(this, data)\n    return !stream.paused\n  }\n\n  function drain() {\n    while(buffer.length && !stream.paused) {\n      var data = buffer.shift()\n      if(null === data)\n        return stream.emit('end')\n      else\n        stream.emit('data', data)\n    }\n  }\n\n  stream.queue = stream.push = function (data) {\n//    console.error(ended)\n    if(_ended) return stream\n    if(data === null) _ended = true\n    buffer.push(data)\n    drain()\n    return stream\n  }\n\n  //this will be registered as the first 'end' listener\n  //must call destroy next tick, to make sure we're after any\n  //stream piped from here.\n  //this is only a problem if end is not emitted synchronously.\n  //a nicer way to do this is to make sure this is the last listener for 'end'\n\n  stream.on('end', function () {\n    stream.readable = false\n    if(!stream.writable && stream.autoDestroy)\n      process.nextTick(function () {\n        stream.destroy()\n      })\n  })\n\n  function _end () {\n    stream.writable = false\n    end.call(stream)\n    if(!stream.readable && stream.autoDestroy)\n      stream.destroy()\n  }\n\n  stream.end = function (data) {\n    if(ended) return\n    ended = true\n    if(arguments.length) stream.write(data)\n    _end() // will emit or queue\n    return stream\n  }\n\n  stream.destroy = function () {\n    if(destroyed) return\n    destroyed = true\n    ended = true\n    buffer.length = 0\n    stream.writable = stream.readable = false\n    stream.emit('close')\n    return stream\n  }\n\n  stream.pause = function () {\n    if(stream.paused) return\n    stream.paused = true\n    return stream\n  }\n\n  stream.resume = function () {\n    if(stream.paused) {\n      stream.paused = false\n      stream.emit('resume')\n    }\n    drain()\n    //may have become paused again,\n    //as drain emits 'data'.\n    if(!stream.paused)\n      stream.emit('drain')\n    return stream\n  }\n  return stream\n}\n\n", "'use strict'\r\n\r\nvar ContentStream = require('contentstream')\r\nvar GifEncoder = require('gif-encoder')\r\nvar jpegJs = require('jpeg-js')\r\nvar PNG = require('pngjs-nozlib').PNG\r\nvar ndarray = require('ndarray')\r\nvar ops = require('ndarray-ops')\r\nvar through = require('through')\r\n\r\nfunction handleData (array, data, frame) {\r\n  var i, j, ptr = 0, c\r\n  if (array.shape.length === 4) {\r\n    return handleData(array.pick(frame), data, 0)\r\n  } else if (array.shape.length === 3) {\r\n    if (array.shape[2] === 3) {\r\n      ops.assign(\r\n        ndarray(data,\r\n          [array.shape[0], array.shape[1], 3],\r\n          [4, 4 * array.shape[0], 1]),\r\n        array)\r\n      ops.assigns(\r\n        ndarray(data,\r\n          [array.shape[0] * array.shape[1]],\r\n          [4],\r\n          3),\r\n        255)\r\n    } else if (array.shape[2] === 4) {\r\n      ops.assign(\r\n        ndarray(data,\r\n          [array.shape[0], array.shape[1], 4],\r\n          [4, array.shape[0] * 4, 1]),\r\n        array)\r\n    } else if (array.shape[2] === 1) {\r\n      ops.assign(\r\n        ndarray(data,\r\n          [array.shape[0], array.shape[1], 3],\r\n          [4, 4 * array.shape[0], 1]),\r\n        ndarray(array.data,\r\n          [array.shape[0], array.shape[1], 3],\r\n          [array.stride[0], array.stride[1], 0],\r\n          array.offset))\r\n      ops.assigns(\r\n        ndarray(data,\r\n          [array.shape[0] * array.shape[1]],\r\n          [4],\r\n          3),\r\n        255)\r\n    } else {\r\n      return new Error('Incompatible array shape')\r\n    }\r\n  } else if (array.shape.length === 2) {\r\n    ops.assign(\r\n      ndarray(data,\r\n        [array.shape[0], array.shape[1], 3],\r\n        [4, 4 * array.shape[0], 1]),\r\n      ndarray(array.data,\r\n        [array.shape[0], array.shape[1], 3],\r\n        [array.stride[0], array.stride[1], 0],\r\n        array.offset))\r\n    ops.assigns(\r\n      ndarray(data,\r\n        [array.shape[0] * array.shape[1]],\r\n        [4],\r\n        3),\r\n      255)\r\n  } else {\r\n    return new Error('Incompatible array shape')\r\n  }\r\n  return data\r\n}\r\n\r\nfunction haderror (err) {\r\n  var result = through()\r\n  result.emit('error', err)\r\n  return result\r\n}\r\n\r\nmodule.exports = function savePixels (array, type, options) {\r\n  options = options || {}\r\n  switch (type.toUpperCase()) {\r\n    case 'JPG':\r\n    case '.JPG':\r\n    case 'JPEG':\r\n    case '.JPEG':\r\n    case 'JPE':\r\n    case '.JPE':\r\n      var width = array.shape[0]\r\n      var height = array.shape[1]\r\n      var data = new Buffer(width * height * 4)\r\n      data = handleData(array, data)\r\n      var rawImageData = {\r\n        data: data,\r\n        width: width,\r\n        height: height\r\n      }\r\n      var jpegImageData = jpegJs.encode(rawImageData, options.quality)\r\n      return new ContentStream(jpegImageData.data)\r\n\r\n    case 'GIF':\r\n    case '.GIF':\r\n      var frames = array.shape.length === 4 ? array.shape[0] : 1\r\n      var width = array.shape.length === 4 ? array.shape[1] : array.shape[0]\r\n      var height = array.shape.length === 4 ? array.shape[2] : array.shape[1]\r\n      var data = new Buffer(width * height * 4)\r\n      var gif = new GifEncoder(width, height)\r\n      gif.writeHeader()\r\n      for (var i = 0; i < frames; i++) {\r\n        data = handleData(array, data, i)\r\n        gif.addFrame(data)\r\n      }\r\n      gif.finish()\r\n      return gif\r\n\r\n    case 'PNG':\r\n    case '.PNG':\r\n      var png = new PNG({\r\n        width: array.shape[0],\r\n        height: array.shape[1]\r\n      })\r\n      var data = handleData(array, png.data)\r\n      if (typeof data === 'Error') return haderror(data)\r\n      png.data = data\r\n      return png.pack()\r\n\r\n    case 'CANVAS':\r\n      var canvas = document.createElement('canvas')\r\n      var context = canvas.getContext('2d')\r\n      canvas.width = array.shape[0]\r\n      canvas.height = array.shape[1]\r\n      var imageData = context.getImageData(0, 0, canvas.width, canvas.height)\r\n      var data = imageData.data\r\n      data = handleData(array, data)\r\n      if (typeof data === 'Error') return haderror(data)\r\n      context.putImageData(imageData, 0, 0)\r\n      return canvas\r\n\r\n    default:\r\n      return haderror(new Error('Unsupported file type: ' + type))\r\n  }\r\n}\r\n", "'use strict';\n\n\nvar util = require('util');\nvar Stream = require('stream');\n\n\nvar ChunkStream = module.exports = function() {\n  Stream.call(this);\n\n  this._buffers = [];\n  this._buffered = 0;\n\n  this._reads = [];\n  this._paused = false;\n\n  this._encoding = 'utf8';\n  this.writable = true;\n};\nutil.inherits(ChunkStream, Stream);\n\n\nChunkStream.prototype.read = function(length, callback) {\n\n  this._reads.push({\n    length: Math.abs(length), // if length < 0 then at most this length\n    allowLess: length < 0,\n    func: callback\n  });\n\n  process.nextTick(function() {\n    this._process();\n\n    // its paused and there is not enought data then ask for more\n    if (this._paused && this._reads.length > 0) {\n      this._paused = false;\n\n      this.emit('drain');\n    }\n  }.bind(this));\n};\n\nChunkStream.prototype.write = function(data, encoding) {\n\n  if (!this.writable) {\n    this.emit('error', new Error('Stream not writable'));\n    return false;\n  }\n\n  var dataBuffer;\n  if (Buffer.isBuffer(data)) {\n    dataBuffer = data;\n  }\n  else {\n    dataBuffer = new Buffer(data, encoding || this._encoding);\n  }\n\n  this._buffers.push(dataBuffer);\n  this._buffered += dataBuffer.length;\n\n  this._process();\n\n  // ok if there are no more read requests\n  if (this._reads && this._reads.length === 0) {\n    this._paused = true;\n  }\n\n  return this.writable && !this._paused;\n};\n\nChunkStream.prototype.end = function(data, encoding) {\n\n  if (data) {\n    this.write(data, encoding);\n  }\n\n  this.writable = false;\n\n  // already destroyed\n  if (!this._buffers) {\n    return;\n  }\n\n  // enqueue or handle end\n  if (this._buffers.length === 0) {\n    this._end();\n  }\n  else {\n    this._buffers.push(null);\n    this._process();\n  }\n};\n\nChunkStream.prototype.destroySoon = ChunkStream.prototype.end;\n\nChunkStream.prototype._end = function() {\n\n  if (this._reads.length > 0) {\n    this.emit('error',\n      new Error('Unexpected end of input')\n    );\n  }\n\n  this.destroy();\n};\n\nChunkStream.prototype.destroy = function() {\n\n  if (!this._buffers) {\n    return;\n  }\n\n  this.writable = false;\n  this._reads = null;\n  this._buffers = null;\n\n  this.emit('close');\n};\n\nChunkStream.prototype._processReadAllowingLess = function(read) {\n  // ok there is any data so that we can satisfy this request\n  this._reads.shift(); // == read\n\n  // first we need to peek into first buffer\n  var smallerBuf = this._buffers[0];\n\n  // ok there is more data than we need\n  if (smallerBuf.length > read.length) {\n\n    this._buffered -= read.length;\n    this._buffers[0] = smallerBuf.slice(read.length);\n\n    read.func.call(this, smallerBuf.slice(0, read.length));\n\n  }\n  else {\n    // ok this is less than maximum length so use it all\n    this._buffered -= smallerBuf.length;\n    this._buffers.shift(); // == smallerBuf\n\n    read.func.call(this, smallerBuf);\n  }\n};\n\nChunkStream.prototype._processRead = function(read) {\n  this._reads.shift(); // == read\n\n  var pos = 0;\n  var count = 0;\n  var data = new Buffer(read.length);\n\n  // create buffer for all data\n  while (pos < read.length) {\n\n    var buf = this._buffers[count++];\n    var len = Math.min(buf.length, read.length - pos);\n\n    buf.copy(data, pos, 0, len);\n    pos += len;\n\n    // last buffer wasn't used all so just slice it and leave\n    if (len !== buf.length) {\n      this._buffers[--count] = buf.slice(len);\n    }\n  }\n\n  // remove all used buffers\n  if (count > 0) {\n    this._buffers.splice(0, count);\n  }\n\n  this._buffered -= read.length;\n\n  read.func.call(this, data);\n};\n\nChunkStream.prototype._process = function() {\n\n  try {\n    // as long as there is any data and read requests\n    while (this._buffered > 0 && this._reads && this._reads.length > 0) {\n\n      var read = this._reads[0];\n\n      // read any data (but no more than length)\n      if (read.allowLess) {\n        this._processReadAllowingLess(read);\n\n      }\n      else if (this._buffered >= read.length) {\n        // ok we can meet some expectations\n\n        this._processRead(read);\n      }\n      else {\n        // not enought data to satisfy first request in queue\n        // so we need to wait for more\n        break;\n      }\n    }\n\n    if (this._buffers && !this.writable) {\n      this._end();\n    }\n  }\n  catch (ex) {\n    this.emit('error', ex);\n  }\n};\n", "'use strict';\n\n// Adam 7\n//   0 1 2 3 4 5 6 7\n// 0 x 6 4 6 x 6 4 6\n// 1 7 7 7 7 7 7 7 7\n// 2 5 6 5 6 5 6 5 6\n// 3 7 7 7 7 7 7 7 7\n// 4 3 6 4 6 3 6 4 6\n// 5 7 7 7 7 7 7 7 7\n// 6 5 6 5 6 5 6 5 6\n// 7 7 7 7 7 7 7 7 7\n\n\nvar imagePasses = [\n  { // pass 1 - 1px\n    x: [0],\n    y: [0]\n  },\n  { // pass 2 - 1px\n    x: [4],\n    y: [0]\n  },\n  { // pass 3 - 2px\n    x: [0, 4],\n    y: [4]\n  },\n  { // pass 4 - 4px\n    x: [2, 6],\n    y: [0, 4]\n  },\n  { // pass 5 - 8px\n    x: [0, 2, 4, 6],\n    y: [2, 6]\n  },\n  { // pass 6 - 16px\n    x: [1, 3, 5, 7],\n    y: [0, 2, 4, 6]\n  },\n  { // pass 7 - 32px\n    x: [0, 1, 2, 3, 4, 5, 6, 7],\n    y: [1, 3, 5, 7]\n  }\n];\n\nexports.getImagePasses = function(width, height) {\n  var images = [];\n  var xLeftOver = width % 8;\n  var yLeftOver = height % 8;\n  var xRepeats = (width - xLeftOver) / 8;\n  var yRepeats = (height - yLeftOver) / 8;\n  for (var i = 0; i < imagePasses.length; i++) {\n    var pass = imagePasses[i];\n    var passWidth = xRepeats * pass.x.length;\n    var passHeight = yRepeats * pass.y.length;\n    for (var j = 0; j < pass.x.length; j++) {\n      if (pass.x[j] < xLeftOver) {\n        passWidth++;\n      }\n      else {\n        break;\n      }\n    }\n    for (j = 0; j < pass.y.length; j++) {\n      if (pass.y[j] < yLeftOver) {\n        passHeight++;\n      }\n      else {\n        break;\n      }\n    }\n    if (passWidth > 0 && passHeight > 0) {\n      images.push({ width: passWidth, height: passHeight, index: i });\n    }\n  }\n  return images;\n};\n\nexports.getInterlaceIterator = function(width) {\n  return function(x, y, pass) {\n    var outerXLeftOver = x % imagePasses[pass].x.length;\n    var outerX = (((x - outerXLeftOver) / imagePasses[pass].x.length) * 8) + imagePasses[pass].x[outerXLeftOver];\n    var outerYLeftOver = y % imagePasses[pass].y.length;\n    var outerY = (((y - outerYLeftOver) / imagePasses[pass].y.length) * 8) + imagePasses[pass].y[outerYLeftOver];\n    return (outerX * 4) + (outerY * width * 4);\n  };\n};", "'use strict';\r\n\r\nmodule.exports = function paethPredictor(left, above, upLeft) {\r\n\r\n  var paeth = left + above - upLeft;\r\n  var pLeft = Math.abs(paeth - left);\r\n  var pAbove = Math.abs(paeth - above);\r\n  var pUpLeft = Math.abs(paeth - upLeft);\r\n\r\n  if (pLeft <= pAbove && pLeft <= pUpLeft) {\r\n    return left;\r\n  }\r\n  if (pAbove <= pUpLeft) {\r\n    return above;\r\n  }\r\n  return upLeft;\r\n};", "'use strict';\n\nvar interlaceUtils = require('./interlace');\nvar paethPredictor = require('./paeth-predictor');\n\nfunction getByteWidth(width, bpp, depth) {\n  var byteWidth = width * bpp;\n  if (depth !== 8) {\n    byteWidth = Math.ceil(byteWidth / (8 / depth));\n  }\n  return byteWidth;\n}\n\nvar Filter = module.exports = function(bitmapInfo, dependencies) {\n\n  var width = bitmapInfo.width;\n  var height = bitmapInfo.height;\n  var interlace = bitmapInfo.interlace;\n  var bpp = bitmapInfo.bpp;\n  var depth = bitmapInfo.depth;\n\n  this.read = dependencies.read;\n  this.write = dependencies.write;\n  this.complete = dependencies.complete;\n\n  this._imageIndex = 0;\n  this._images = [];\n  if (interlace) {\n    var passes = interlaceUtils.getImagePasses(width, height);\n    for (var i = 0; i < passes.length; i++) {\n      this._images.push({\n        byteWidth: getByteWidth(passes[i].width, bpp, depth),\n        height: passes[i].height,\n        lineIndex: 0\n      });\n    }\n  }\n  else {\n    this._images.push({\n      byteWidth: getByteWidth(width, bpp, depth),\n      height: height,\n      lineIndex: 0\n    });\n  }\n\n  // when filtering the line we look at the pixel to the left\n  // the spec also says it is done on a byte level regardless of the number of pixels\n  // so if the depth is byte compatible (8 or 16) we subtract the bpp in order to compare back\n  // a pixel rather than just a different byte part. However if we are sub byte, we ignore.\n  if (depth === 8) {\n    this._xComparison = bpp;\n  }\n  else if (depth === 16) {\n    this._xComparison = bpp * 2;\n  }\n  else {\n    this._xComparison = 1;\n  }\n};\n\nFilter.prototype.start = function() {\n  this.read(this._images[this._imageIndex].byteWidth + 1, this._reverseFilterLine.bind(this));\n};\n\nFilter.prototype._unFilterType1 = function(rawData, unfilteredLine, byteWidth) {\n\n  var xComparison = this._xComparison;\n  var xBiggerThan = xComparison - 1;\n\n  for (var x = 0; x < byteWidth; x++) {\n    var rawByte = rawData[1 + x];\n    var f1Left = x > xBiggerThan ? unfilteredLine[x - xComparison] : 0;\n    unfilteredLine[x] = rawByte + f1Left;\n  }\n};\n\nFilter.prototype._unFilterType2 = function(rawData, unfilteredLine, byteWidth) {\n\n  var lastLine = this._lastLine;\n\n  for (var x = 0; x < byteWidth; x++) {\n    var rawByte = rawData[1 + x];\n    var f2Up = lastLine ? lastLine[x] : 0;\n    unfilteredLine[x] = rawByte + f2Up;\n  }\n};\n\nFilter.prototype._unFilterType3 = function(rawData, unfilteredLine, byteWidth) {\n\n  var xComparison = this._xComparison;\n  var xBiggerThan = xComparison - 1;\n  var lastLine = this._lastLine;\n\n  for (var x = 0; x < byteWidth; x++) {\n    var rawByte = rawData[1 + x];\n    var f3Up = lastLine ? lastLine[x] : 0;\n    var f3Left = x > xBiggerThan ? unfilteredLine[x - xComparison] : 0;\n    var f3Add = Math.floor((f3Left + f3Up) / 2);\n    unfilteredLine[x] = rawByte + f3Add;\n  }\n};\n\nFilter.prototype._unFilterType4 = function(rawData, unfilteredLine, byteWidth) {\n\n  var xComparison = this._xComparison;\n  var xBiggerThan = xComparison - 1;\n  var lastLine = this._lastLine;\n\n  for (var x = 0; x < byteWidth; x++) {\n    var rawByte = rawData[1 + x];\n    var f4Up = lastLine ? lastLine[x] : 0;\n    var f4Left = x > xBiggerThan ? unfilteredLine[x - xComparison] : 0;\n    var f4UpLeft = x > xBiggerThan && lastLine ? lastLine[x - xComparison] : 0;\n    var f4Add = paethPredictor(f4Left, f4Up, f4UpLeft);\n    unfilteredLine[x] = rawByte + f4Add;\n  }\n};\n\nFilter.prototype._reverseFilterLine = function(rawData) {\n\n  var filter = rawData[0];\n  var unfilteredLine;\n  var currentImage = this._images[this._imageIndex];\n  var byteWidth = currentImage.byteWidth;\n\n  if (filter === 0) {\n    unfilteredLine = rawData.slice(1, byteWidth + 1);\n  }\n  else {\n\n    unfilteredLine = new Buffer(byteWidth);\n\n    switch (filter) {\n      case 1:\n        this._unFilterType1(rawData, unfilteredLine, byteWidth);\n        break;\n      case 2:\n        this._unFilterType2(rawData, unfilteredLine, byteWidth);\n        break;\n      case 3:\n        this._unFilterType3(rawData, unfilteredLine, byteWidth);\n        break;\n      case 4:\n        this._unFilterType4(rawData, unfilteredLine, byteWidth);\n        break;\n      default:\n        throw new Error('Unrecognised filter type - ' + filter);\n    }\n  }\n\n  this.write(unfilteredLine);\n\n  currentImage.lineIndex++;\n  if (currentImage.lineIndex >= currentImage.height) {\n    this._lastLine = null;\n    this._imageIndex++;\n    currentImage = this._images[this._imageIndex];\n  }\n  else {\n    this._lastLine = unfilteredLine;\n  }\n\n  if (currentImage) {\n    // read, using the byte width that may be from the new current image\n    this.read(currentImage.byteWidth + 1, this._reverseFilterLine.bind(this));\n  }\n  else {\n    this._lastLine = null;\n    this.complete();\n  }\n};\n", "'use strict';\n\nvar util = require('util');\nvar ChunkStream = require('./chunkstream');\nvar Filter = require('./filter-parse');\n\n\nvar FilterAsync = module.exports = function(bitmapInfo) {\n  ChunkStream.call(this);\n\n  var buffers = [];\n  var that = this;\n  this._filter = new Filter(bitmapInfo, {\n    read: this.read.bind(this),\n    write: function(buffer) {\n      buffers.push(buffer);\n    },\n    complete: function() {\n      that.emit('complete', Buffer.concat(buffers));\n    }\n  });\n\n  this._filter.start();\n};\nutil.inherits(FilterAsync, ChunkStream);\n", "'use strict';\n\n\nmodule.exports = {\n\n  PNG_SIGNATURE: [0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a],\n\n  TYPE_IHDR: 0x49484452,\n  TYPE_IEND: 0x49454e44,\n  TYPE_IDAT: 0x49444154,\n  TYPE_PLTE: 0x504c5445,\n  TYPE_tRNS: 0x74524e53, // eslint-disable-line camelcase\n  TYPE_gAMA: 0x67414d41, // eslint-disable-line camelcase\n\n  // color-type bits\n  COLORTYPE_GRAYSCALE: 0,\n  COLORTYPE_PALETTE: 1,\n  COLORTYPE_COLOR: 2,\n  COLORTYPE_ALPHA: 4, // e.g. grayscale and alpha\n\n  // color-type combinations\n  COLORTYPE_PALETTE_COLOR: 3,\n  COLORTYPE_COLOR_ALPHA: 6,\n\n  COLORTYPE_TO_BPP_MAP: {\n    0: 1,\n    2: 3,\n    3: 1,\n    4: 2,\n    6: 4\n  },\n\n  GAMMA_DIVISION: 100000\n};\n", "'use strict';\n\nvar crcTable = [];\n\n(function() {\n  for (var i = 0; i < 256; i++) {\n    var currentCrc = i;\n    for (var j = 0; j < 8; j++) {\n      if (currentCrc & 1) {\n        currentCrc = 0xedb88320 ^ (currentCrc >>> 1);\n      }\n      else {\n        currentCrc = currentCrc >>> 1;\n      }\n    }\n    crcTable[i] = currentCrc;\n  }\n}());\n\nvar CrcCalculator = module.exports = function() {\n  this._crc = -1;\n};\n\nCrcCalculator.prototype.write = function(data) {\n\n  for (var i = 0; i < data.length; i++) {\n    this._crc = crcTable[(this._crc ^ data[i]) & 0xff] ^ (this._crc >>> 8);\n  }\n  return true;\n};\n\nCrcCalculator.prototype.crc32 = function() {\n  return this._crc ^ -1;\n};\n\n\nCrcCalculator.crc32 = function(buf) {\n\n  var crc = -1;\n  for (var i = 0; i < buf.length; i++) {\n    crc = crcTable[(crc ^ buf[i]) & 0xff] ^ (crc >>> 8);\n  }\n  return crc ^ -1;\n};\n", "'use strict';\n\nvar constants = require('./constants');\nvar CrcCalculator = require('./crc');\n\n\nvar Parser = module.exports = function(options, dependencies) {\n\n  this._options = options;\n  options.checkCRC = options.checkCRC !== false;\n\n  this._hasIHDR = false;\n  this._hasIEND = false;\n  this._emittedHeadersFinished = false;\n\n  // input flags/metadata\n  this._palette = [];\n  this._colorType = 0;\n\n  this._chunks = {};\n  this._chunks[constants.TYPE_IHDR] = this._handleIHDR.bind(this);\n  this._chunks[constants.TYPE_IEND] = this._handleIEND.bind(this);\n  this._chunks[constants.TYPE_IDAT] = this._handleIDAT.bind(this);\n  this._chunks[constants.TYPE_PLTE] = this._handlePLTE.bind(this);\n  this._chunks[constants.TYPE_tRNS] = this._handleTRNS.bind(this);\n  this._chunks[constants.TYPE_gAMA] = this._handleGAMA.bind(this);\n\n  this.read = dependencies.read;\n  this.error = dependencies.error;\n  this.metadata = dependencies.metadata;\n  this.gamma = dependencies.gamma;\n  this.transColor = dependencies.transColor;\n  this.palette = dependencies.palette;\n  this.parsed = dependencies.parsed;\n  this.inflateData = dependencies.inflateData;\n  this.finished = dependencies.finished;\n  this.simpleTransparency = dependencies.simpleTransparency;\n  this.headersFinished = dependencies.headersFinished || function() {};\n};\n\nParser.prototype.start = function() {\n  this.read(constants.PNG_SIGNATURE.length,\n    this._parseSignature.bind(this)\n  );\n};\n\nParser.prototype._parseSignature = function(data) {\n\n  var signature = constants.PNG_SIGNATURE;\n\n  for (var i = 0; i < signature.length; i++) {\n    if (data[i] !== signature[i]) {\n      this.error(new Error('Invalid file signature'));\n      return;\n    }\n  }\n  this.read(8, this._parseChunkBegin.bind(this));\n};\n\nParser.prototype._parseChunkBegin = function(data) {\n\n  // chunk content length\n  var length = data.readUInt32BE(0);\n\n  // chunk type\n  var type = data.readUInt32BE(4);\n  var name = '';\n  for (var i = 4; i < 8; i++) {\n    name += String.fromCharCode(data[i]);\n  }\n\n  //console.log('chunk ', name, length);\n\n  // chunk flags\n  var ancillary = Boolean(data[4] & 0x20); // or critical\n  //    priv = Boolean(data[5] & 0x20), // or public\n  //    safeToCopy = Boolean(data[7] & 0x20); // or unsafe\n\n  if (!this._hasIHDR && type !== constants.TYPE_IHDR) {\n    this.error(new Error('Expected IHDR on beggining'));\n    return;\n  }\n\n  this._crc = new CrcCalculator();\n  this._crc.write(new Buffer(name));\n\n  if (this._chunks[type]) {\n    return this._chunks[type](length);\n  }\n\n  if (!ancillary) {\n    this.error(new Error('Unsupported critical chunk type ' + name));\n    return;\n  }\n\n  this.read(length + 4, this._skipChunk.bind(this));\n};\n\nParser.prototype._skipChunk = function(/*data*/) {\n  this.read(8, this._parseChunkBegin.bind(this));\n};\n\nParser.prototype._handleChunkEnd = function() {\n  this.read(4, this._parseChunkEnd.bind(this));\n};\n\nParser.prototype._parseChunkEnd = function(data) {\n\n  var fileCrc = data.readInt32BE(0);\n  var calcCrc = this._crc.crc32();\n\n  // check CRC\n  if (this._options.checkCRC && calcCrc !== fileCrc) {\n    this.error(new Error('Crc error - ' + fileCrc + ' - ' + calcCrc));\n    return;\n  }\n\n  if (!this._hasIEND) {\n    this.read(8, this._parseChunkBegin.bind(this));\n  }\n};\n\nParser.prototype._handleIHDR = function(length) {\n  this.read(length, this._parseIHDR.bind(this));\n};\nParser.prototype._parseIHDR = function(data) {\n\n  this._crc.write(data);\n\n  var width = data.readUInt32BE(0);\n  var height = data.readUInt32BE(4);\n  var depth = data[8];\n  var colorType = data[9]; // bits: 1 palette, 2 color, 4 alpha\n  var compr = data[10];\n  var filter = data[11];\n  var interlace = data[12];\n\n  // console.log('    width', width, 'height', height,\n  //     'depth', depth, 'colorType', colorType,\n  //     'compr', compr, 'filter', filter, 'interlace', interlace\n  // );\n\n  if (depth !== 8 && depth !== 4 && depth !== 2 && depth !== 1 && depth !== 16) {\n    this.error(new Error('Unsupported bit depth ' + depth));\n    return;\n  }\n  if (!(colorType in constants.COLORTYPE_TO_BPP_MAP)) {\n    this.error(new Error('Unsupported color type'));\n    return;\n  }\n  if (compr !== 0) {\n    this.error(new Error('Unsupported compression method'));\n    return;\n  }\n  if (filter !== 0) {\n    this.error(new Error('Unsupported filter method'));\n    return;\n  }\n  if (interlace !== 0 && interlace !== 1) {\n    this.error(new Error('Unsupported interlace method'));\n    return;\n  }\n\n  this._colorType = colorType;\n\n  var bpp = constants.COLORTYPE_TO_BPP_MAP[this._colorType];\n\n  this._hasIHDR = true;\n\n  this.metadata({\n    width: width,\n    height: height,\n    depth: depth,\n    interlace: Boolean(interlace),\n    palette: Boolean(colorType & constants.COLORTYPE_PALETTE),\n    color: Boolean(colorType & constants.COLORTYPE_COLOR),\n    alpha: Boolean(colorType & constants.COLORTYPE_ALPHA),\n    bpp: bpp,\n    colorType: colorType\n  });\n\n  this._handleChunkEnd();\n};\n\n\nParser.prototype._handlePLTE = function(length) {\n  this.read(length, this._parsePLTE.bind(this));\n};\nParser.prototype._parsePLTE = function(data) {\n\n  this._crc.write(data);\n\n  var entries = Math.floor(data.length / 3);\n  // console.log('Palette:', entries);\n\n  for (var i = 0; i < entries; i++) {\n    this._palette.push([\n      data[i * 3],\n      data[i * 3 + 1],\n      data[i * 3 + 2],\n      0xff\n    ]);\n  }\n\n  this.palette(this._palette);\n\n  this._handleChunkEnd();\n};\n\nParser.prototype._handleTRNS = function(length) {\n  this.simpleTransparency();\n  this.read(length, this._parseTRNS.bind(this));\n};\nParser.prototype._parseTRNS = function(data) {\n\n  this._crc.write(data);\n\n  // palette\n  if (this._colorType === constants.COLORTYPE_PALETTE_COLOR) {\n    if (this._palette.length === 0) {\n      this.error(new Error('Transparency chunk must be after palette'));\n      return;\n    }\n    if (data.length > this._palette.length) {\n      this.error(new Error('More transparent colors than palette size'));\n      return;\n    }\n    for (var i = 0; i < data.length; i++) {\n      this._palette[i][3] = data[i];\n    }\n    this.palette(this._palette);\n  }\n\n  // for colorType 0 (grayscale) and 2 (rgb)\n  // there might be one gray/color defined as transparent\n  if (this._colorType === constants.COLORTYPE_GRAYSCALE) {\n    // grey, 2 bytes\n    this.transColor([data.readUInt16BE(0)]);\n  }\n  if (this._colorType === constants.COLORTYPE_COLOR) {\n    this.transColor([data.readUInt16BE(0), data.readUInt16BE(2), data.readUInt16BE(4)]);\n  }\n\n  this._handleChunkEnd();\n};\n\nParser.prototype._handleGAMA = function(length) {\n  this.read(length, this._parseGAMA.bind(this));\n};\nParser.prototype._parseGAMA = function(data) {\n\n  this._crc.write(data);\n  this.gamma(data.readUInt32BE(0) / constants.GAMMA_DIVISION);\n\n  this._handleChunkEnd();\n};\n\nParser.prototype._handleIDAT = function(length) {\n  if (!this._emittedHeadersFinished) {\n    this._emittedHeadersFinished = true;\n    this.headersFinished();\n  }\n  this.read(-length, this._parseIDAT.bind(this, length));\n};\nParser.prototype._parseIDAT = function(length, data) {\n\n  this._crc.write(data);\n\n  if (this._colorType === constants.COLORTYPE_PALETTE_COLOR && this._palette.length === 0) {\n    throw new Error('Expected palette not found');\n  }\n\n  this.inflateData(data);\n  var leftOverLength = length - data.length;\n\n  if (leftOverLength > 0) {\n    this._handleIDAT(leftOverLength);\n  }\n  else {\n    this._handleChunkEnd();\n  }\n};\n\nParser.prototype._handleIEND = function(length) {\n  this.read(length, this._parseIEND.bind(this));\n};\nParser.prototype._parseIEND = function(data) {\n\n  this._crc.write(data);\n\n  this._hasIEND = true;\n  this._handleChunkEnd();\n\n  if (this.finished) {\n    this.finished();\n  }\n};\n", "'use strict';\n\nvar interlaceUtils = require('./interlace');\n\nvar pixelBppMapper = [\n  // 0 - dummy entry\n  function() {},\n\n  // 1 - L\n  // 0: 0, 1: 0, 2: 0, 3: 0xff\n  function(pxData, data, pxPos, rawPos) {\n    if (rawPos === data.length) {\n      throw new Error('Ran out of data');\n    }\n\n    var pixel = data[rawPos];\n    pxData[pxPos] = pixel;\n    pxData[pxPos + 1] = pixel;\n    pxData[pxPos + 2] = pixel;\n    pxData[pxPos + 3] = 0xff;\n  },\n\n  // 2 - LA\n  // 0: 0, 1: 0, 2: 0, 3: 1\n  function(pxData, data, pxPos, rawPos) {\n    if (rawPos + 1 >= data.length) {\n      throw new Error('Ran out of data');\n    }\n\n    var pixel = data[rawPos];\n    pxData[pxPos] = pixel;\n    pxData[pxPos + 1] = pixel;\n    pxData[pxPos + 2] = pixel;\n    pxData[pxPos + 3] = data[rawPos + 1];\n  },\n\n  // 3 - RGB\n  // 0: 0, 1: 1, 2: 2, 3: 0xff\n  function(pxData, data, pxPos, rawPos) {\n    if (rawPos + 2 >= data.length) {\n      throw new Error('Ran out of data');\n    }\n\n    pxData[pxPos] = data[rawPos];\n    pxData[pxPos + 1] = data[rawPos + 1];\n    pxData[pxPos + 2] = data[rawPos + 2];\n    pxData[pxPos + 3] = 0xff;\n  },\n\n  // 4 - RGBA\n  // 0: 0, 1: 1, 2: 2, 3: 3\n  function(pxData, data, pxPos, rawPos) {\n    if (rawPos + 3 >= data.length) {\n      throw new Error('Ran out of data');\n    }\n\n    pxData[pxPos] = data[rawPos];\n    pxData[pxPos + 1] = data[rawPos + 1];\n    pxData[pxPos + 2] = data[rawPos + 2];\n    pxData[pxPos + 3] = data[rawPos + 3];\n  }\n];\n\nvar pixelBppCustomMapper = [\n  // 0 - dummy entry\n  function() {},\n\n  // 1 - L\n  // 0: 0, 1: 0, 2: 0, 3: 0xff\n  function(pxData, pixelData, pxPos, maxBit) {\n    var pixel = pixelData[0];\n    pxData[pxPos] = pixel;\n    pxData[pxPos + 1] = pixel;\n    pxData[pxPos + 2] = pixel;\n    pxData[pxPos + 3] = maxBit;\n  },\n\n  // 2 - LA\n  // 0: 0, 1: 0, 2: 0, 3: 1\n  function(pxData, pixelData, pxPos) {\n    var pixel = pixelData[0];\n    pxData[pxPos] = pixel;\n    pxData[pxPos + 1] = pixel;\n    pxData[pxPos + 2] = pixel;\n    pxData[pxPos + 3] = pixelData[1];\n  },\n\n  // 3 - RGB\n  // 0: 0, 1: 1, 2: 2, 3: 0xff\n  function(pxData, pixelData, pxPos, maxBit) {\n    pxData[pxPos] = pixelData[0];\n    pxData[pxPos + 1] = pixelData[1];\n    pxData[pxPos + 2] = pixelData[2];\n    pxData[pxPos + 3] = maxBit;\n  },\n\n  // 4 - RGBA\n  // 0: 0, 1: 1, 2: 2, 3: 3\n  function(pxData, pixelData, pxPos) {\n    pxData[pxPos] = pixelData[0];\n    pxData[pxPos + 1] = pixelData[1];\n    pxData[pxPos + 2] = pixelData[2];\n    pxData[pxPos + 3] = pixelData[3];\n  }\n];\n\nfunction bitRetriever(data, depth) {\n\n  var leftOver = [];\n  var i = 0;\n\n  function split() {\n    if (i === data.length) {\n      throw new Error('Ran out of data');\n    }\n    var byte = data[i];\n    i++;\n    var byte8, byte7, byte6, byte5, byte4, byte3, byte2, byte1;\n    switch (depth) {\n      default:\n        throw new Error('unrecognised depth');\n      case 16:\n        byte2 = data[i];\n        i++;\n        leftOver.push(((byte << 8) + byte2));\n        break;\n      case 4:\n        byte2 = byte & 0x0f;\n        byte1 = byte >> 4;\n        leftOver.push(byte1, byte2);\n        break;\n      case 2:\n        byte4 = byte & 3;\n        byte3 = byte >> 2 & 3;\n        byte2 = byte >> 4 & 3;\n        byte1 = byte >> 6 & 3;\n        leftOver.push(byte1, byte2, byte3, byte4);\n        break;\n      case 1:\n        byte8 = byte & 1;\n        byte7 = byte >> 1 & 1;\n        byte6 = byte >> 2 & 1;\n        byte5 = byte >> 3 & 1;\n        byte4 = byte >> 4 & 1;\n        byte3 = byte >> 5 & 1;\n        byte2 = byte >> 6 & 1;\n        byte1 = byte >> 7 & 1;\n        leftOver.push(byte1, byte2, byte3, byte4, byte5, byte6, byte7, byte8);\n        break;\n    }\n  }\n\n  return {\n    get: function(count) {\n      while (leftOver.length < count) {\n        split();\n      }\n      var returner = leftOver.slice(0, count);\n      leftOver = leftOver.slice(count);\n      return returner;\n    },\n    resetAfterLine: function() {\n      leftOver.length = 0;\n    },\n    end: function() {\n      if (i !== data.length) {\n        throw new Error('extra data found');\n      }\n    }\n  };\n}\n\nfunction mapImage8Bit(image, pxData, getPxPos, bpp, data, rawPos) { // eslint-disable-line max-params\n  var imageWidth = image.width;\n  var imageHeight = image.height;\n  var imagePass = image.index;\n  for (var y = 0; y < imageHeight; y++) {\n    for (var x = 0; x < imageWidth; x++) {\n      var pxPos = getPxPos(x, y, imagePass);\n      pixelBppMapper[bpp](pxData, data, pxPos, rawPos);\n      rawPos += bpp; //eslint-disable-line no-param-reassign\n    }\n  }\n  return rawPos;\n}\n\nfunction mapImageCustomBit(image, pxData, getPxPos, bpp, bits, maxBit) { // eslint-disable-line max-params\n  var imageWidth = image.width;\n  var imageHeight = image.height;\n  var imagePass = image.index;\n  for (var y = 0; y < imageHeight; y++) {\n    for (var x = 0; x < imageWidth; x++) {\n      var pixelData = bits.get(bpp);\n      var pxPos = getPxPos(x, y, imagePass);\n      pixelBppCustomMapper[bpp](pxData, pixelData, pxPos, maxBit);\n    }\n    bits.resetAfterLine();\n  }\n}\n\nexports.dataToBitMap = function(data, bitmapInfo) {\n\n  var width = bitmapInfo.width;\n  var height = bitmapInfo.height;\n  var depth = bitmapInfo.depth;\n  var bpp = bitmapInfo.bpp;\n  var interlace = bitmapInfo.interlace;\n\n  if (depth !== 8) {\n    var bits = bitRetriever(data, depth);\n  }\n  var pxData;\n  if (depth <= 8) {\n    pxData = new Buffer(width * height * 4);\n  }\n  else {\n    pxData = new Uint16Array(width * height * 4);\n  }\n  var maxBit = Math.pow(2, depth) - 1;\n  var rawPos = 0;\n  var images;\n  var getPxPos;\n\n  if (interlace) {\n    images = interlaceUtils.getImagePasses(width, height);\n    getPxPos = interlaceUtils.getInterlaceIterator(width, height);\n  }\n  else {\n    var nonInterlacedPxPos = 0;\n    getPxPos = function() {\n      var returner = nonInterlacedPxPos;\n      nonInterlacedPxPos += 4;\n      return returner;\n    };\n    images = [{ width: width, height: height }];\n  }\n\n  for (var imageIndex = 0; imageIndex < images.length; imageIndex++) {\n    if (depth === 8) {\n      rawPos = mapImage8Bit(images[imageIndex], pxData, getPxPos, bpp, data, rawPos);\n    }\n    else {\n      mapImageCustomBit(images[imageIndex], pxData, getPxPos, bpp, bits, maxBit);\n    }\n  }\n  if (depth === 8) {\n    if (rawPos !== data.length) {\n      throw new Error('extra data found');\n    }\n  }\n  else {\n    bits.end();\n  }\n\n  return pxData;\n};\n", "'use strict';\n\nfunction dePalette(indata, outdata, width, height, palette) {\n  var pxPos = 0;\n  // use values from palette\n  for (var y = 0; y < height; y++) {\n    for (var x = 0; x < width; x++) {\n      var color = palette[indata[pxPos]];\n\n      if (!color) {\n        throw new Error('index ' + indata[pxPos] + ' not in palette');\n      }\n\n      for (var i = 0; i < 4; i++) {\n        outdata[pxPos + i] = color[i];\n      }\n      pxPos += 4;\n    }\n  }\n}\n\nfunction replaceTransparentColor(indata, outdata, width, height, transColor) {\n  var pxPos = 0;\n  for (var y = 0; y < height; y++) {\n    for (var x = 0; x < width; x++) {\n      var makeTrans = false;\n\n      if (transColor.length === 1) {\n        if (transColor[0] === indata[pxPos]) {\n          makeTrans = true;\n        }\n      }\n      else if (transColor[0] === indata[pxPos] && transColor[1] === indata[pxPos + 1] && transColor[2] === indata[pxPos + 2]) {\n        makeTrans = true;\n      }\n      if (makeTrans) {\n        for (var i = 0; i < 4; i++) {\n          outdata[pxPos + i] = 0;\n        }\n      }\n      pxPos += 4;\n    }\n  }\n}\n\nfunction scaleDepth(indata, outdata, width, height, depth) {\n  var maxOutSample = 255;\n  var maxInSample = Math.pow(2, depth) - 1;\n  var pxPos = 0;\n\n  for (var y = 0; y < height; y++) {\n    for (var x = 0; x < width; x++) {\n      for (var i = 0; i < 4; i++) {\n        outdata[pxPos + i] = Math.floor((indata[pxPos + i] * maxOutSample) / maxInSample + 0.5);\n      }\n      pxPos += 4;\n    }\n  }\n}\n\nmodule.exports = function(indata, imageData) {\n\n  var depth = imageData.depth;\n  var width = imageData.width;\n  var height = imageData.height;\n  var colorType = imageData.colorType;\n  var transColor = imageData.transColor;\n  var palette = imageData.palette;\n\n  var outdata = indata; // only different for 16 bits\n\n  if (colorType === 3) { // paletted\n    dePalette(indata, outdata, width, height, palette);\n  }\n  else {\n    if (transColor) {\n      replaceTransparentColor(indata, outdata, width, height, transColor);\n    }\n    // if it needs scaling\n    if (depth !== 8) {\n      // if we need to change the buffer size\n      if (depth === 16) {\n        outdata = new Buffer(width * height * 4);\n      }\n      scaleDepth(indata, outdata, width, height, depth);\n    }\n  }\n  return outdata;\n};\n", "'use strict';\n\nvar util = require('util');\nvar zlib = require('zlib');\nvar ChunkStream = require('./chunkstream');\nvar FilterAsync = require('./filter-parse-async');\nvar Parser = require('./parser');\nvar bitmapper = require('./bitmapper');\nvar formatNormaliser = require('./format-normaliser');\n\nvar ParserAsync = module.exports = function(options) {\n  ChunkStream.call(this);\n\n  this._parser = new Parser(options, {\n    read: this.read.bind(this),\n    error: this._handleError.bind(this),\n    metadata: this._handleMetaData.bind(this),\n    gamma: this.emit.bind(this, 'gamma'),\n    palette: this._handlePalette.bind(this),\n    transColor: this._handleTransColor.bind(this),\n    finished: this._finished.bind(this),\n    inflateData: this._inflateData.bind(this),\n    simpleTransparency: this._simpleTransparency.bind(this),\n    headersFinished: this._headersFinished.bind(this)\n  });\n  this._options = options;\n  this.writable = true;\n\n  this._parser.start();\n};\nutil.inherits(ParserAsync, ChunkStream);\n\n\nParserAsync.prototype._handleError = function(err) {\n\n  this.emit('error', err);\n\n  this.writable = false;\n\n  this.destroy();\n\n  if (this._inflate && this._inflate.destroy) {\n    this._inflate.destroy();\n  }\n\n  if (this._filter) {\n    this._filter.destroy();\n    // For backward compatibility with Node 7 and below.\n    // Suppress errors due to _inflate calling write() even after\n    // it's destroy()'ed.\n    this._filter.on('error', function() {});\n  }\n\n  this.errord = true;\n};\n\nParserAsync.prototype._inflateData = function(data) {\n  if (!this._inflate) {\n    if (this._bitmapInfo.interlace) {\n      this._inflate = zlib.createInflate();\n\n      this._inflate.on('error', this.emit.bind(this, 'error'));\n      this._filter.on('complete', this._complete.bind(this));\n\n      this._inflate.pipe(this._filter);\n    }\n    else {\n      var rowSize = ((this._bitmapInfo.width * this._bitmapInfo.bpp * this._bitmapInfo.depth + 7) >> 3) + 1;\n      var imageSize = rowSize * this._bitmapInfo.height;\n      var chunkSize = Math.max(imageSize, zlib.Z_MIN_CHUNK);\n\n      this._inflate = zlib.createInflate({ chunkSize: chunkSize });\n      var leftToInflate = imageSize;\n\n      var emitError = this.emit.bind(this, 'error');\n      this._inflate.on('error', function(err) {\n        if (!leftToInflate) {\n          return;\n        }\n\n        emitError(err);\n      });\n      this._filter.on('complete', this._complete.bind(this));\n\n      var filterWrite = this._filter.write.bind(this._filter);\n      this._inflate.on('data', function(chunk) {\n        if (!leftToInflate) {\n          return;\n        }\n\n        if (chunk.length > leftToInflate) {\n          chunk = chunk.slice(0, leftToInflate);\n        }\n\n        leftToInflate -= chunk.length;\n\n        filterWrite(chunk);\n      });\n\n      this._inflate.on('end', this._filter.end.bind(this._filter));\n    }\n  }\n  this._inflate.write(data);\n};\n\nParserAsync.prototype._handleMetaData = function(metaData) {\n  this._metaData = metaData;\n  this._bitmapInfo = Object.create(metaData);\n\n  this._filter = new FilterAsync(this._bitmapInfo);\n};\n\nParserAsync.prototype._handleTransColor = function(transColor) {\n  this._bitmapInfo.transColor = transColor;\n};\n\nParserAsync.prototype._handlePalette = function(palette) {\n  this._bitmapInfo.palette = palette;\n};\n\nParserAsync.prototype._simpleTransparency = function() {\n  this._metaData.alpha = true;\n};\n\nParserAsync.prototype._headersFinished = function() {\n  // Up until this point, we don't know if we have a tRNS chunk (alpha)\n  // so we can't emit metadata any earlier\n  this.emit('metadata', this._metaData);\n};\n\nParserAsync.prototype._finished = function() {\n  if (this.errord) {\n    return;\n  }\n\n  if (!this._inflate) {\n    this.emit('error', 'No Inflate block');\n  }\n  else {\n    // no more data to inflate\n    this._inflate.end();\n  }\n  this.destroySoon();\n};\n\nParserAsync.prototype._complete = function(filteredData) {\n\n  if (this.errord) {\n    return;\n  }\n\n  try {\n    var bitmapData = bitmapper.dataToBitMap(filteredData, this._bitmapInfo);\n\n    var normalisedBitmapData = formatNormaliser(bitmapData, this._bitmapInfo);\n    bitmapData = null;\n  }\n  catch (ex) {\n    this._handleError(ex);\n    return;\n  }\n\n  this.emit('parsed', normalisedBitmapData);\n};\n", "'use strict';\n\nvar constants = require('./constants');\n\nmodule.exports = function(dataIn, width, height, options) {\n  var outHasAlpha = [constants.COLORTYPE_COLOR_ALPHA, constants.COLORTYPE_ALPHA].indexOf(options.colorType) !== -1;\n  if (options.colorType === options.inputColorType) {\n    var bigEndian = (function() {\n      var buffer = new ArrayBuffer(2);\n      new DataView(buffer).setInt16(0, 256, true /* littleEndian */);\n      // Int16Array uses the platform's endianness.\n      return new Int16Array(buffer)[0] !== 256;\n    })();\n    // If no need to convert to grayscale and alpha is present/absent in both, take a fast route\n    if (options.bitDepth === 8 || (options.bitDepth === 16 && bigEndian)) {\n      return dataIn;\n    }\n  }\n\n  // map to a UInt16 array if data is 16bit, fix endianness below\n  var data = options.bitDepth !== 16 ? dataIn : new Uint16Array(dataIn.buffer);\n\n  var maxValue = 255;\n  var inBpp = constants.COLORTYPE_TO_BPP_MAP[options.inputColorType];\n  if (inBpp === 4 && !options.inputHasAlpha) {\n    inBpp = 3;\n  }\n  var outBpp = constants.COLORTYPE_TO_BPP_MAP[options.colorType];\n  if (options.bitDepth === 16) {\n    maxValue = 65535;\n    outBpp *= 2;\n  }\n  var outData = new Buffer(width * height * outBpp);\n\n  var inIndex = 0;\n  var outIndex = 0;\n\n  var bgColor = options.bgColor || {};\n  if (bgColor.red === undefined) {\n    bgColor.red = maxValue;\n  }\n  if (bgColor.green === undefined) {\n    bgColor.green = maxValue;\n  }\n  if (bgColor.blue === undefined) {\n    bgColor.blue = maxValue;\n  }\n\n  function getRGBA() {\n    var red;\n    var green;\n    var blue;\n    var alpha = maxValue;\n    switch (options.inputColorType) {\n      case constants.COLORTYPE_COLOR_ALPHA:\n        alpha = data[inIndex + 3];\n        red = data[inIndex];\n        green = data[inIndex + 1];\n        blue = data[inIndex + 2];\n        break;\n      case constants.COLORTYPE_COLOR:\n        red = data[inIndex];\n        green = data[inIndex + 1];\n        blue = data[inIndex + 2];\n        break;\n      case constants.COLORTYPE_ALPHA:\n        alpha = data[inIndex + 1];\n        red = data[inIndex];\n        green = red;\n        blue = red;\n        break;\n      case constants.COLORTYPE_GRAYSCALE:\n        red = data[inIndex];\n        green = red;\n        blue = red;\n        break;\n      default:\n        throw new Error('input color type:' + options.inputColorType + ' is not supported at present');\n    }\n\n    if (options.inputHasAlpha) {\n      if (!outHasAlpha) {\n        alpha /= maxValue;\n        red = Math.min(Math.max(Math.round((1 - alpha) * bgColor.red + alpha * red), 0), maxValue);\n        green = Math.min(Math.max(Math.round((1 - alpha) * bgColor.green + alpha * green), 0), maxValue);\n        blue = Math.min(Math.max(Math.round((1 - alpha) * bgColor.blue + alpha * blue), 0), maxValue);\n      }\n    }\n    return { red: red, green: green, blue: blue, alpha: alpha };\n  }\n\n  for (var y = 0; y < height; y++) {\n    for (var x = 0; x < width; x++) {\n      var rgba = getRGBA(data, inIndex);\n\n      switch (options.colorType) {\n        case constants.COLORTYPE_COLOR_ALPHA:\n        case constants.COLORTYPE_COLOR:\n          if (options.bitDepth === 8) {\n            outData[outIndex] = rgba.red;\n            outData[outIndex + 1] = rgba.green;\n            outData[outIndex + 2] = rgba.blue;\n            if (outHasAlpha) {\n              outData[outIndex + 3] = rgba.alpha;\n            }\n          }\n          else {\n            outData.writeUInt16BE(rgba.red, outIndex);\n            outData.writeUInt16BE(rgba.green, outIndex + 2);\n            outData.writeUInt16BE(rgba.blue, outIndex + 4);\n            if (outHasAlpha) {\n              outData.writeUInt16BE(rgba.alpha, outIndex + 6);\n            }\n          }\n          break;\n        case constants.COLORTYPE_ALPHA:\n        case constants.COLORTYPE_GRAYSCALE:\n          // Convert to grayscale and alpha\n          var grayscale = (rgba.red + rgba.green + rgba.blue) / 3;\n          if (options.bitDepth === 8) {\n            outData[outIndex] = grayscale;\n            if (outHasAlpha) {\n              outData[outIndex + 1] = rgba.alpha;\n            }\n          }\n          else {\n            outData.writeUInt16BE(grayscale, outIndex);\n            if (outHasAlpha) {\n              outData.writeUInt16BE(rgba.alpha, outIndex + 2);\n            }\n          }\n          break;\n        default:\n          throw new Error('unrecognised color Type ' + options.colorType);\n      }\n\n      inIndex += inBpp;\n      outIndex += outBpp;\n    }\n  }\n\n  return outData;\n};\n", "'use strict';\n\nvar paethPredictor = require('./paeth-predictor');\n\nfunction filterNone(pxData, pxPos, byteWidth, rawData, rawPos) {\n\n  for (var x = 0; x < byteWidth; x++) {\n    rawData[rawPos + x] = pxData[pxPos + x];\n  }\n}\n\nfunction filterSumNone(pxData, pxPos, byteWidth) {\n\n  var sum = 0;\n  var length = pxPos + byteWidth;\n\n  for (var i = pxPos; i < length; i++) {\n    sum += Math.abs(pxData[i]);\n  }\n  return sum;\n}\n\nfunction filterSub(pxData, pxPos, byteWidth, rawData, rawPos, bpp) {\n\n  for (var x = 0; x < byteWidth; x++) {\n\n    var left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    var val = pxData[pxPos + x] - left;\n\n    rawData[rawPos + x] = val;\n  }\n}\n\nfunction filterSumSub(pxData, pxPos, byteWidth, bpp) {\n\n  var sum = 0;\n  for (var x = 0; x < byteWidth; x++) {\n\n    var left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    var val = pxData[pxPos + x] - left;\n\n    sum += Math.abs(val);\n  }\n\n  return sum;\n}\n\nfunction filterUp(pxData, pxPos, byteWidth, rawData, rawPos) {\n\n  for (var x = 0; x < byteWidth; x++) {\n\n    var up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    var val = pxData[pxPos + x] - up;\n\n    rawData[rawPos + x] = val;\n  }\n}\n\nfunction filterSumUp(pxData, pxPos, byteWidth) {\n\n  var sum = 0;\n  var length = pxPos + byteWidth;\n  for (var x = pxPos; x < length; x++) {\n\n    var up = pxPos > 0 ? pxData[x - byteWidth] : 0;\n    var val = pxData[x] - up;\n\n    sum += Math.abs(val);\n  }\n\n  return sum;\n}\n\nfunction filterAvg(pxData, pxPos, byteWidth, rawData, rawPos, bpp) {\n\n  for (var x = 0; x < byteWidth; x++) {\n\n    var left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    var up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    var val = pxData[pxPos + x] - ((left + up) >> 1);\n\n    rawData[rawPos + x] = val;\n  }\n}\n\nfunction filterSumAvg(pxData, pxPos, byteWidth, bpp) {\n\n  var sum = 0;\n  for (var x = 0; x < byteWidth; x++) {\n\n    var left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    var up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    var val = pxData[pxPos + x] - ((left + up) >> 1);\n\n    sum += Math.abs(val);\n  }\n\n  return sum;\n}\n\nfunction filterPaeth(pxData, pxPos, byteWidth, rawData, rawPos, bpp) {\n\n  for (var x = 0; x < byteWidth; x++) {\n\n    var left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    var up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    var upleft = pxPos > 0 && x >= bpp ? pxData[pxPos + x - (byteWidth + bpp)] : 0;\n    var val = pxData[pxPos + x] - paethPredictor(left, up, upleft);\n\n    rawData[rawPos + x] = val;\n  }\n}\n\nfunction filterSumPaeth(pxData, pxPos, byteWidth, bpp) {\n  var sum = 0;\n  for (var x = 0; x < byteWidth; x++) {\n\n    var left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    var up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    var upleft = pxPos > 0 && x >= bpp ? pxData[pxPos + x - (byteWidth + bpp)] : 0;\n    var val = pxData[pxPos + x] - paethPredictor(left, up, upleft);\n\n    sum += Math.abs(val);\n  }\n\n  return sum;\n}\n\nvar filters = {\n  0: filterNone,\n  1: filterSub,\n  2: filterUp,\n  3: filterAvg,\n  4: filterPaeth\n};\n\nvar filterSums = {\n  0: filterSumNone,\n  1: filterSumSub,\n  2: filterSumUp,\n  3: filterSumAvg,\n  4: filterSumPaeth\n};\n\nmodule.exports = function(pxData, width, height, options, bpp) {\n\n  var filterTypes;\n  if (!('filterType' in options) || options.filterType === -1) {\n    filterTypes = [0, 1, 2, 3, 4];\n  }\n  else if (typeof options.filterType === 'number') {\n    filterTypes = [options.filterType];\n  }\n  else {\n    throw new Error('unrecognised filter types');\n  }\n\n  if (options.bitDepth === 16) {\n    bpp *= 2;\n  }\n  var byteWidth = width * bpp;\n  var rawPos = 0;\n  var pxPos = 0;\n  var rawData = new Buffer((byteWidth + 1) * height);\n\n  var sel = filterTypes[0];\n\n  for (var y = 0; y < height; y++) {\n\n    if (filterTypes.length > 1) {\n      // find best filter for this line (with lowest sum of values)\n      var min = Infinity;\n\n      for (var i = 0; i < filterTypes.length; i++) {\n        var sum = filterSums[filterTypes[i]](pxData, pxPos, byteWidth, bpp);\n        if (sum < min) {\n          sel = filterTypes[i];\n          min = sum;\n        }\n      }\n    }\n\n    rawData[rawPos] = sel;\n    rawPos++;\n    filters[sel](pxData, pxPos, byteWidth, rawData, rawPos, bpp);\n    rawPos += byteWidth;\n    pxPos += byteWidth;\n  }\n  return rawData;\n};\n", "'use strict';\n\nvar constants = require('./constants');\nvar CrcStream = require('./crc');\nvar bitPacker = require('./bitpacker');\nvar filter = require('./filter-pack');\nvar zlib = require('zlib');\n\nvar Packer = module.exports = function(options) {\n  this._options = options;\n\n  options.deflateChunkSize = options.deflateChunkSize || 32 * 1024;\n  options.deflateLevel = options.deflateLevel != null ? options.deflateLevel : 9;\n  options.deflateStrategy = options.deflateStrategy != null ? options.deflateStrategy : 3;\n  options.inputHasAlpha = options.inputHasAlpha != null ? options.inputHasAlpha : true;\n  options.deflateFactory = options.deflateFactory || zlib.createDeflate;\n  options.bitDepth = options.bitDepth || 8;\n  // This is outputColorType\n  options.colorType = (typeof options.colorType === 'number') ? options.colorType : constants.COLORTYPE_COLOR_ALPHA;\n  options.inputColorType = (typeof options.inputColorType === 'number') ? options.inputColorType : constants.COLORTYPE_COLOR_ALPHA;\n\n  if ([\n    constants.COLORTYPE_GRAYSCALE,\n    constants.COLORTYPE_COLOR,\n    constants.COLORTYPE_COLOR_ALPHA,\n    constants.COLORTYPE_ALPHA\n  ].indexOf(options.colorType) === -1) {\n    throw new Error('option color type:' + options.colorType + ' is not supported at present');\n  }\n  if ([\n    constants.COLORTYPE_GRAYSCALE,\n    constants.COLORTYPE_COLOR,\n    constants.COLORTYPE_COLOR_ALPHA,\n    constants.COLORTYPE_ALPHA\n  ].indexOf(options.inputColorType) === -1) {\n    throw new Error('option input color type:' + options.inputColorType + ' is not supported at present');\n  }\n  if (options.bitDepth !== 8 && options.bitDepth !== 16) {\n    throw new Error('option bit depth:' + options.bitDepth + ' is not supported at present');\n  }\n};\n\nPacker.prototype.getDeflateOptions = function() {\n  return {\n    chunkSize: this._options.deflateChunkSize,\n    level: this._options.deflateLevel,\n    strategy: this._options.deflateStrategy\n  };\n};\n\nPacker.prototype.createDeflate = function() {\n  return this._options.deflateFactory(this.getDeflateOptions());\n};\n\nPacker.prototype.filterData = function(data, width, height) {\n  // convert to correct format for filtering (e.g. right bpp and bit depth)\n  var packedData = bitPacker(data, width, height, this._options);\n\n  // filter pixel data\n  var bpp = constants.COLORTYPE_TO_BPP_MAP[this._options.colorType];\n  var filteredData = filter(packedData, width, height, this._options, bpp);\n  return filteredData;\n};\n\nPacker.prototype._packChunk = function(type, data) {\n\n  var len = (data ? data.length : 0);\n  var buf = new Buffer(len + 12);\n\n  buf.writeUInt32BE(len, 0);\n  buf.writeUInt32BE(type, 4);\n\n  if (data) {\n    data.copy(buf, 8);\n  }\n\n  buf.writeInt32BE(CrcStream.crc32(buf.slice(4, buf.length - 4)), buf.length - 4);\n  return buf;\n};\n\nPacker.prototype.packGAMA = function(gamma) {\n  var buf = new Buffer(4);\n  buf.writeUInt32BE(Math.floor(gamma * constants.GAMMA_DIVISION), 0);\n  return this._packChunk(constants.TYPE_gAMA, buf);\n};\n\nPacker.prototype.packIHDR = function(width, height) {\n\n  var buf = new Buffer(13);\n  buf.writeUInt32BE(width, 0);\n  buf.writeUInt32BE(height, 4);\n  buf[8] = this._options.bitDepth; // Bit depth\n  buf[9] = this._options.colorType; // colorType\n  buf[10] = 0; // compression\n  buf[11] = 0; // filter\n  buf[12] = 0; // interlace\n\n  return this._packChunk(constants.TYPE_IHDR, buf);\n};\n\nPacker.prototype.packIDAT = function(data) {\n  return this._packChunk(constants.TYPE_IDAT, data);\n};\n\nPacker.prototype.packIEND = function() {\n  return this._packChunk(constants.TYPE_IEND, null);\n};\n", "'use strict';\n\nvar util = require('util');\nvar Stream = require('stream');\nvar constants = require('./constants');\nvar Packer = require('./packer');\n\nvar PackerAsync = module.exports = function(opt) {\n  Stream.call(this);\n\n  var options = opt || {};\n\n  this._packer = new Packer(options);\n  this._deflate = this._packer.createDeflate();\n\n  this.readable = true;\n};\nutil.inherits(PackerAsync, Stream);\n\n\nPackerAsync.prototype.pack = function(data, width, height, gamma) {\n  // Signature\n  this.emit('data', new Buffer(constants.PNG_SIGNATURE));\n  this.emit('data', this._packer.packIHDR(width, height));\n\n  if (gamma) {\n    this.emit('data', this._packer.packGAMA(gamma));\n  }\n\n  var filteredData = this._packer.filterData(data, width, height);\n\n  // compress it\n  this._deflate.on('error', this.emit.bind(this, 'error'));\n\n  this._deflate.on('data', function(compressedData) {\n    this.emit('data', this._packer.packIDAT(compressedData));\n  }.bind(this));\n\n  this._deflate.on('end', function() {\n    this.emit('data', this._packer.packIEND());\n    this.emit('end');\n  }.bind(this));\n\n  this._deflate.end(filteredData);\n};\n", "'use strict';\n\nvar assert = require('assert').ok;\nvar zlib = require('zlib');\nvar util = require('util');\n\nvar kMaxLength = require('buffer').kMaxLength;\n\nfunction Inflate(opts) {\n  if (!(this instanceof Inflate)) {\n    return new Inflate(opts);\n  }\n\n  if (opts && opts.chunkSize < zlib.Z_MIN_CHUNK) {\n    opts.chunkSize = zlib.Z_MIN_CHUNK;\n  }\n\n  zlib.Inflate.call(this, opts);\n\n  // Node 8 --> 9 compatibility check\n  this._offset = this._offset === undefined ? this._outOffset : this._offset;\n  this._buffer = this._buffer || this._outBuffer;\n\n  if (opts && opts.maxLength != null) {\n    this._maxLength = opts.maxLength;\n  }\n}\n\nfunction createInflate(opts) {\n  return new Inflate(opts);\n}\n\nfunction _close(engine, callback) {\n  if (callback) {\n    process.nextTick(callback);\n  }\n\n  // Caller may invoke .close after a zlib error (which will null _handle).\n  if (!engine._handle) {\n    return;\n  }\n\n  engine._handle.close();\n  engine._handle = null;\n}\n\nInflate.prototype._processChunk = function(chunk, flushFlag, asyncCb) {\n  if (typeof asyncCb === 'function') {\n    return zlib.Inflate._processChunk.call(this, chunk, flushFlag, asyncCb);\n  }\n\n  var self = this;\n\n  var availInBefore = chunk && chunk.length;\n  var availOutBefore = this._chunkSize - this._offset;\n  var leftToInflate = this._maxLength;\n  var inOff = 0;\n\n  var buffers = [];\n  var nread = 0;\n\n  var error;\n  this.on('error', function(err) {\n    error = err;\n  });\n\n  function handleChunk(availInAfter, availOutAfter) {\n    if (self._hadError) {\n      return;\n    }\n\n    var have = availOutBefore - availOutAfter;\n    assert(have >= 0, 'have should not go down');\n\n    if (have > 0) {\n      var out = self._buffer.slice(self._offset, self._offset + have);\n      self._offset += have;\n\n      if (out.length > leftToInflate) {\n        out = out.slice(0, leftToInflate);\n      }\n\n      buffers.push(out);\n      nread += out.length;\n      leftToInflate -= out.length;\n\n      if (leftToInflate === 0) {\n        return false;\n      }\n    }\n\n    if (availOutAfter === 0 || self._offset >= self._chunkSize) {\n      availOutBefore = self._chunkSize;\n      self._offset = 0;\n      self._buffer = Buffer.allocUnsafe(self._chunkSize);\n    }\n\n    if (availOutAfter === 0) {\n      inOff += (availInBefore - availInAfter);\n      availInBefore = availInAfter;\n\n      return true;\n    }\n\n    return false;\n  }\n\n  assert(this._handle, 'zlib binding closed');\n  do {\n    var res = this._handle.writeSync(flushFlag,\n      chunk, // in\n      inOff, // in_off\n      availInBefore, // in_len\n      this._buffer, // out\n      this._offset, //out_off\n      availOutBefore); // out_len\n    // Node 8 --> 9 compatibility check\n    res = res || this._writeState;\n  } while (!this._hadError && handleChunk(res[0], res[1]));\n\n  if (this._hadError) {\n    throw error;\n  }\n\n  if (nread >= kMaxLength) {\n    _close(this);\n    throw new RangeError('Cannot create final Buffer. It would be larger than 0x' + kMaxLength.toString(16) + ' bytes');\n  }\n\n  var buf = Buffer.concat(buffers, nread);\n  _close(this);\n\n  return buf;\n};\n\nutil.inherits(Inflate, zlib.Inflate);\n\nfunction zlibBufferSync(engine, buffer) {\n  if (typeof buffer === 'string') {\n    buffer = Buffer.from(buffer);\n  }\n  if (!(buffer instanceof Buffer)) {\n    throw new TypeError('Not a string or buffer');\n  }\n\n  var flushFlag = engine._finishFlushFlag;\n  if (flushFlag == null) {\n    flushFlag = zlib.Z_FINISH;\n  }\n\n  return engine._processChunk(buffer, flushFlag);\n}\n\nfunction inflateSync(buffer, opts) {\n  return zlibBufferSync(new Inflate(opts), buffer);\n}\n\nmodule.exports = exports = inflateSync;\nexports.Inflate = Inflate;\nexports.createInflate = createInflate;\nexports.inflateSync = inflateSync;\n", "'use strict';\n\nvar SyncReader = module.exports = function(buffer) {\n\n  this._buffer = buffer;\n  this._reads = [];\n};\n\nSyncReader.prototype.read = function(length, callback) {\n\n  this._reads.push({\n    length: Math.abs(length), // if length < 0 then at most this length\n    allowLess: length < 0,\n    func: callback\n  });\n};\n\nSyncReader.prototype.process = function() {\n\n  // as long as there is any data and read requests\n  while (this._reads.length > 0 && this._buffer.length) {\n\n    var read = this._reads[0];\n\n    if (this._buffer.length && (this._buffer.length >= read.length || read.allowLess)) {\n\n      // ok there is any data so that we can satisfy this request\n      this._reads.shift(); // == read\n\n      var buf = this._buffer;\n\n      this._buffer = buf.slice(read.length);\n\n      read.func.call(this, buf.slice(0, read.length));\n\n    }\n    else {\n      break;\n    }\n\n  }\n\n  if (this._reads.length > 0) {\n    return new Error('There are some read requests waitng on finished stream');\n  }\n\n  if (this._buffer.length > 0) {\n    return new Error('unrecognised content at end of stream');\n  }\n\n};\n", "'use strict';\n\nvar SyncReader = require('./sync-reader');\nvar Filter = require('./filter-parse');\n\n\nexports.process = function(inBuffer, bitmapInfo) {\n\n  var outBuffers = [];\n  var reader = new SyncReader(inBuffer);\n  var filter = new Filter(bitmapInfo, {\n    read: reader.read.bind(reader),\n    write: function(bufferPart) {\n      outBuffers.push(bufferPart);\n    },\n    complete: function() {\n    }\n  });\n\n  filter.start();\n  reader.process();\n\n  return Buffer.concat(outBuffers);\n};", "'use strict';\n\nvar hasSyncZlib = true;\nvar zlib = require('zlib');\nvar inflateSync = require('./sync-inflate');\nif (!zlib.deflateSync) {\n  hasSyncZlib = false;\n}\nvar SyncReader = require('./sync-reader');\nvar FilterSync = require('./filter-parse-sync');\nvar Parser = require('./parser');\nvar bitmapper = require('./bitmapper');\nvar formatNormaliser = require('./format-normaliser');\n\n\nmodule.exports = function(buffer, options) {\n\n  if (!hasSyncZlib) {\n    throw new Error('To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0');\n  }\n\n  var err;\n  function handleError(_err_) {\n    err = _err_;\n  }\n\n  var metaData;\n  function handleMetaData(_metaData_) {\n    metaData = _metaData_;\n  }\n\n  function handleTransColor(transColor) {\n    metaData.transColor = transColor;\n  }\n\n  function handlePalette(palette) {\n    metaData.palette = palette;\n  }\n\n  function handleSimpleTransparency() {\n    metaData.alpha = true;\n  }\n\n  var gamma;\n  function handleGamma(_gamma_) {\n    gamma = _gamma_;\n  }\n\n  var inflateDataList = [];\n  function handleInflateData(inflatedData) {\n    inflateDataList.push(inflatedData);\n  }\n\n  var reader = new SyncReader(buffer);\n\n  var parser = new Parser(options, {\n    read: reader.read.bind(reader),\n    error: handleError,\n    metadata: handleMetaData,\n    gamma: handleGamma,\n    palette: handlePalette,\n    transColor: handleTransColor,\n    inflateData: handleInflateData,\n    simpleTransparency: handleSimpleTransparency\n  });\n\n  parser.start();\n  reader.process();\n\n  if (err) {\n    throw err;\n  }\n\n  //join together the inflate datas\n  var inflateData = Buffer.concat(inflateDataList);\n  inflateDataList.length = 0;\n\n  var inflatedData;\n  if (metaData.interlace) {\n    inflatedData = zlib.inflateSync(inflateData);\n  }\n  else {\n    var rowSize = ((metaData.width * metaData.bpp * metaData.depth + 7) >> 3) + 1;\n    var imageSize = rowSize * metaData.height;\n    inflatedData = inflateSync(inflateData, { chunkSize: imageSize, maxLength: imageSize });\n  }\n  inflateData = null;\n\n  if (!inflatedData || !inflatedData.length) {\n    throw new Error('bad png - invalid inflate data response');\n  }\n\n  var unfilteredData = FilterSync.process(inflatedData, metaData);\n  inflateData = null;\n\n  var bitmapData = bitmapper.dataToBitMap(unfilteredData, metaData);\n  unfilteredData = null;\n\n  var normalisedBitmapData = formatNormaliser(bitmapData, metaData);\n\n  metaData.data = normalisedBitmapData;\n  metaData.gamma = gamma || 0;\n\n  return metaData;\n};\n", "'use strict';\n\nvar hasSyncZlib = true;\nvar zlib = require('zlib');\nif (!zlib.deflateSync) {\n  hasSyncZlib = false;\n}\nvar constants = require('./constants');\nvar Packer = require('./packer');\n\nmodule.exports = function(metaData, opt) {\n\n  if (!hasSyncZlib) {\n    throw new Error('To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0');\n  }\n\n  var options = opt || {};\n\n  var packer = new Packer(options);\n\n  var chunks = [];\n\n  // Signature\n  chunks.push(new Buffer(constants.PNG_SIGNATURE));\n\n  // Header\n  chunks.push(packer.packIHDR(metaData.width, metaData.height));\n\n  if (metaData.gamma) {\n    chunks.push(packer.packGAMA(metaData.gamma));\n  }\n\n  var filteredData = packer.filterData(metaData.data, metaData.width, metaData.height);\n\n  // compress it\n  var compressedData = zlib.deflateSync(filteredData, packer.getDeflateOptions());\n  filteredData = null;\n\n  if (!compressedData || !compressedData.length) {\n    throw new Error('bad png - invalid compressed data response');\n  }\n  chunks.push(packer.packIDAT(compressedData));\n\n  // End\n  chunks.push(packer.packIEND());\n\n  return Buffer.concat(chunks);\n};\n", "'use strict';\n\n\nvar parse = require('./parser-sync');\nvar pack = require('./packer-sync');\n\n\nexports.read = function(buffer, options) {\n\n  return parse(buffer, options || {});\n};\n\nexports.write = function(png, options) {\n\n  return pack(png, options);\n};\n", "'use strict';\n\nvar util = require('util');\nvar Stream = require('stream');\nvar Parser = require('./parser-async');\nvar Packer = require('./packer-async');\nvar PNGSync = require('./png-sync');\n\n\nvar PNG = exports.PNG = function(options) {\n  Stream.call(this);\n\n  options = options || {}; // eslint-disable-line no-param-reassign\n\n  // coerce pixel dimensions to integers (also coerces undefined -> 0):\n  this.width = options.width | 0;\n  this.height = options.height | 0;\n\n  this.data = this.width > 0 && this.height > 0 ?\n    new Buffer(4 * this.width * this.height) : null;\n\n  if (options.fill && this.data) {\n    this.data.fill(0);\n  }\n\n  this.gamma = 0;\n  this.readable = this.writable = true;\n\n  this._parser = new Parser(options);\n\n  this._parser.on('error', this.emit.bind(this, 'error'));\n  this._parser.on('close', this._handleClose.bind(this));\n  this._parser.on('metadata', this._metadata.bind(this));\n  this._parser.on('gamma', this._gamma.bind(this));\n  this._parser.on('parsed', function(data) {\n    this.data = data;\n    this.emit('parsed', data);\n  }.bind(this));\n\n  this._packer = new Packer(options);\n  this._packer.on('data', this.emit.bind(this, 'data'));\n  this._packer.on('end', this.emit.bind(this, 'end'));\n  this._parser.on('close', this._handleClose.bind(this));\n  this._packer.on('error', this.emit.bind(this, 'error'));\n\n};\nutil.inherits(PNG, Stream);\n\nPNG.sync = PNGSync;\n\nPNG.prototype.pack = function() {\n\n  if (!this.data || !this.data.length) {\n    this.emit('error', 'No data provided');\n    return this;\n  }\n\n  process.nextTick(function() {\n    this._packer.pack(this.data, this.width, this.height, this.gamma);\n  }.bind(this));\n\n  return this;\n};\n\n\nPNG.prototype.parse = function(data, callback) {\n\n  if (callback) {\n    var onParsed, onError;\n\n    onParsed = function(parsedData) {\n      this.removeListener('error', onError);\n\n      this.data = parsedData;\n      callback(null, this);\n    }.bind(this);\n\n    onError = function(err) {\n      this.removeListener('parsed', onParsed);\n\n      callback(err, null);\n    }.bind(this);\n\n    this.once('parsed', onParsed);\n    this.once('error', onError);\n  }\n\n  this.end(data);\n  return this;\n};\n\nPNG.prototype.write = function(data) {\n  this._parser.write(data);\n  return true;\n};\n\nPNG.prototype.end = function(data) {\n  this._parser.end(data);\n};\n\nPNG.prototype._metadata = function(metadata) {\n  this.width = metadata.width;\n  this.height = metadata.height;\n\n  this.emit('metadata', metadata);\n};\n\nPNG.prototype._gamma = function(gamma) {\n  this.gamma = gamma;\n};\n\nPNG.prototype._handleClose = function() {\n  if (!this._parser.writable && !this._packer.readable) {\n    this.emit('close');\n  }\n};\n\n\nPNG.bitblt = function(src, dst, srcX, srcY, width, height, deltaX, deltaY) { // eslint-disable-line max-params\n  // coerce pixel dimensions to integers (also coerces undefined -> 0):\n  /* eslint-disable no-param-reassign */\n  srcX |= 0;\n  srcY |= 0;\n  width |= 0;\n  height |= 0;\n  deltaX |= 0;\n  deltaY |= 0;\n  /* eslint-enable no-param-reassign */\n\n  if (srcX > src.width || srcY > src.height || srcX + width > src.width || srcY + height > src.height) {\n    throw new Error('bitblt reading outside image');\n  }\n\n  if (deltaX > dst.width || deltaY > dst.height || deltaX + width > dst.width || deltaY + height > dst.height) {\n    throw new Error('bitblt writing outside image');\n  }\n\n  for (var y = 0; y < height; y++) {\n    src.data.copy(dst.data,\n      ((deltaY + y) * dst.width + deltaX) << 2,\n      ((srcY + y) * src.width + srcX) << 2,\n      ((srcY + y) * src.width + srcX + width) << 2\n    );\n  }\n};\n\n\nPNG.prototype.bitblt = function(dst, srcX, srcY, width, height, deltaX, deltaY) { // eslint-disable-line max-params\n\n  PNG.bitblt(this, dst, srcX, srcY, width, height, deltaX, deltaY);\n  return this;\n};\n\nPNG.adjustGamma = function(src) {\n  if (src.gamma) {\n    for (var y = 0; y < src.height; y++) {\n      for (var x = 0; x < src.width; x++) {\n        var idx = (src.width * y + x) << 2;\n\n        for (var i = 0; i < 3; i++) {\n          var sample = src.data[idx + i] / 255;\n          sample = Math.pow(sample, 1 / 2.2 / src.gamma);\n          src.data[idx + i] = Math.round(sample * 255);\n        }\n      }\n    }\n    src.gamma = 0;\n  }\n};\n\nPNG.prototype.adjustGamma = function() {\n  PNG.adjustGamma(this);\n};\n", "/*\n  Copyright (c) 2008, Adobe Systems Incorporated\n  All rights reserved.\n\n  Redistribution and use in source and binary forms, with or without \n  modification, are permitted provided that the following conditions are\n  met:\n\n  * Redistributions of source code must retain the above copyright notice, \n    this list of conditions and the following disclaimer.\n  \n  * Redistributions in binary form must reproduce the above copyright\n    notice, this list of conditions and the following disclaimer in the \n    documentation and/or other materials provided with the distribution.\n  \n  * Neither the name of Adobe Systems Incorporated nor the names of its \n    contributors may be used to endorse or promote products derived from \n    this software without specific prior written permission.\n\n  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS\n  IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,\n  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR \n  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n/*\nJPEG encoder ported to JavaScript and optimized by Andreas Ritter, www.bytestrom.eu, 11/2009\n\nBasic GUI blocking jpeg encoder\n*/\n\nvar btoa = btoa || function(buf) {\n  return new Buffer(buf).toString('base64');\n};\n\nfunction JPEGEncoder(quality) {\n  var self = this;\n\tvar fround = Math.round;\n\tvar ffloor = Math.floor;\n\tvar YTable = new Array(64);\n\tvar UVTable = new Array(64);\n\tvar fdtbl_Y = new Array(64);\n\tvar fdtbl_UV = new Array(64);\n\tvar YDC_HT;\n\tvar UVDC_HT;\n\tvar YAC_HT;\n\tvar UVAC_HT;\n\t\n\tvar bitcode = new Array(65535);\n\tvar category = new Array(65535);\n\tvar outputfDCTQuant = new Array(64);\n\tvar DU = new Array(64);\n\tvar byteout = [];\n\tvar bytenew = 0;\n\tvar bytepos = 7;\n\t\n\tvar YDU = new Array(64);\n\tvar UDU = new Array(64);\n\tvar VDU = new Array(64);\n\tvar clt = new Array(256);\n\tvar RGB_YUV_TABLE = new Array(2048);\n\tvar currentQuality;\n\t\n\tvar ZigZag = [\n\t\t\t 0, 1, 5, 6,14,15,27,28,\n\t\t\t 2, 4, 7,13,16,26,29,42,\n\t\t\t 3, 8,12,17,25,30,41,43,\n\t\t\t 9,11,18,24,31,40,44,53,\n\t\t\t10,19,23,32,39,45,52,54,\n\t\t\t20,22,33,38,46,51,55,60,\n\t\t\t21,34,37,47,50,56,59,61,\n\t\t\t35,36,48,49,57,58,62,63\n\t\t];\n\t\n\tvar std_dc_luminance_nrcodes = [0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0];\n\tvar std_dc_luminance_values = [0,1,2,3,4,5,6,7,8,9,10,11];\n\tvar std_ac_luminance_nrcodes = [0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,0x7d];\n\tvar std_ac_luminance_values = [\n\t\t\t0x01,0x02,0x03,0x00,0x04,0x11,0x05,0x12,\n\t\t\t0x21,0x31,0x41,0x06,0x13,0x51,0x61,0x07,\n\t\t\t0x22,0x71,0x14,0x32,0x81,0x91,0xa1,0x08,\n\t\t\t0x23,0x42,0xb1,0xc1,0x15,0x52,0xd1,0xf0,\n\t\t\t0x24,0x33,0x62,0x72,0x82,0x09,0x0a,0x16,\n\t\t\t0x17,0x18,0x19,0x1a,0x25,0x26,0x27,0x28,\n\t\t\t0x29,0x2a,0x34,0x35,0x36,0x37,0x38,0x39,\n\t\t\t0x3a,0x43,0x44,0x45,0x46,0x47,0x48,0x49,\n\t\t\t0x4a,0x53,0x54,0x55,0x56,0x57,0x58,0x59,\n\t\t\t0x5a,0x63,0x64,0x65,0x66,0x67,0x68,0x69,\n\t\t\t0x6a,0x73,0x74,0x75,0x76,0x77,0x78,0x79,\n\t\t\t0x7a,0x83,0x84,0x85,0x86,0x87,0x88,0x89,\n\t\t\t0x8a,0x92,0x93,0x94,0x95,0x96,0x97,0x98,\n\t\t\t0x99,0x9a,0xa2,0xa3,0xa4,0xa5,0xa6,0xa7,\n\t\t\t0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,0xb5,0xb6,\n\t\t\t0xb7,0xb8,0xb9,0xba,0xc2,0xc3,0xc4,0xc5,\n\t\t\t0xc6,0xc7,0xc8,0xc9,0xca,0xd2,0xd3,0xd4,\n\t\t\t0xd5,0xd6,0xd7,0xd8,0xd9,0xda,0xe1,0xe2,\n\t\t\t0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,0xea,\n\t\t\t0xf1,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,\n\t\t\t0xf9,0xfa\n\t\t];\n\t\n\tvar std_dc_chrominance_nrcodes = [0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0];\n\tvar std_dc_chrominance_values = [0,1,2,3,4,5,6,7,8,9,10,11];\n\tvar std_ac_chrominance_nrcodes = [0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,0x77];\n\tvar std_ac_chrominance_values = [\n\t\t\t0x00,0x01,0x02,0x03,0x11,0x04,0x05,0x21,\n\t\t\t0x31,0x06,0x12,0x41,0x51,0x07,0x61,0x71,\n\t\t\t0x13,0x22,0x32,0x81,0x08,0x14,0x42,0x91,\n\t\t\t0xa1,0xb1,0xc1,0x09,0x23,0x33,0x52,0xf0,\n\t\t\t0x15,0x62,0x72,0xd1,0x0a,0x16,0x24,0x34,\n\t\t\t0xe1,0x25,0xf1,0x17,0x18,0x19,0x1a,0x26,\n\t\t\t0x27,0x28,0x29,0x2a,0x35,0x36,0x37,0x38,\n\t\t\t0x39,0x3a,0x43,0x44,0x45,0x46,0x47,0x48,\n\t\t\t0x49,0x4a,0x53,0x54,0x55,0x56,0x57,0x58,\n\t\t\t0x59,0x5a,0x63,0x64,0x65,0x66,0x67,0x68,\n\t\t\t0x69,0x6a,0x73,0x74,0x75,0x76,0x77,0x78,\n\t\t\t0x79,0x7a,0x82,0x83,0x84,0x85,0x86,0x87,\n\t\t\t0x88,0x89,0x8a,0x92,0x93,0x94,0x95,0x96,\n\t\t\t0x97,0x98,0x99,0x9a,0xa2,0xa3,0xa4,0xa5,\n\t\t\t0xa6,0xa7,0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,\n\t\t\t0xb5,0xb6,0xb7,0xb8,0xb9,0xba,0xc2,0xc3,\n\t\t\t0xc4,0xc5,0xc6,0xc7,0xc8,0xc9,0xca,0xd2,\n\t\t\t0xd3,0xd4,0xd5,0xd6,0xd7,0xd8,0xd9,0xda,\n\t\t\t0xe2,0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,\n\t\t\t0xea,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,\n\t\t\t0xf9,0xfa\n\t\t];\n\t\n\tfunction initQuantTables(sf){\n\t\t\tvar YQT = [\n\t\t\t\t16, 11, 10, 16, 24, 40, 51, 61,\n\t\t\t\t12, 12, 14, 19, 26, 58, 60, 55,\n\t\t\t\t14, 13, 16, 24, 40, 57, 69, 56,\n\t\t\t\t14, 17, 22, 29, 51, 87, 80, 62,\n\t\t\t\t18, 22, 37, 56, 68,109,103, 77,\n\t\t\t\t24, 35, 55, 64, 81,104,113, 92,\n\t\t\t\t49, 64, 78, 87,103,121,120,101,\n\t\t\t\t72, 92, 95, 98,112,100,103, 99\n\t\t\t];\n\t\t\t\n\t\t\tfor (var i = 0; i < 64; i++) {\n\t\t\t\tvar t = ffloor((YQT[i]*sf+50)/100);\n\t\t\t\tif (t < 1) {\n\t\t\t\t\tt = 1;\n\t\t\t\t} else if (t > 255) {\n\t\t\t\t\tt = 255;\n\t\t\t\t}\n\t\t\t\tYTable[ZigZag[i]] = t;\n\t\t\t}\n\t\t\tvar UVQT = [\n\t\t\t\t17, 18, 24, 47, 99, 99, 99, 99,\n\t\t\t\t18, 21, 26, 66, 99, 99, 99, 99,\n\t\t\t\t24, 26, 56, 99, 99, 99, 99, 99,\n\t\t\t\t47, 66, 99, 99, 99, 99, 99, 99,\n\t\t\t\t99, 99, 99, 99, 99, 99, 99, 99,\n\t\t\t\t99, 99, 99, 99, 99, 99, 99, 99,\n\t\t\t\t99, 99, 99, 99, 99, 99, 99, 99,\n\t\t\t\t99, 99, 99, 99, 99, 99, 99, 99\n\t\t\t];\n\t\t\tfor (var j = 0; j < 64; j++) {\n\t\t\t\tvar u = ffloor((UVQT[j]*sf+50)/100);\n\t\t\t\tif (u < 1) {\n\t\t\t\t\tu = 1;\n\t\t\t\t} else if (u > 255) {\n\t\t\t\t\tu = 255;\n\t\t\t\t}\n\t\t\t\tUVTable[ZigZag[j]] = u;\n\t\t\t}\n\t\t\tvar aasf = [\n\t\t\t\t1.0, 1.387039845, 1.306562965, 1.175875602,\n\t\t\t\t1.0, 0.785694958, 0.541196100, 0.275899379\n\t\t\t];\n\t\t\tvar k = 0;\n\t\t\tfor (var row = 0; row < 8; row++)\n\t\t\t{\n\t\t\t\tfor (var col = 0; col < 8; col++)\n\t\t\t\t{\n\t\t\t\t\tfdtbl_Y[k]  = (1.0 / (YTable [ZigZag[k]] * aasf[row] * aasf[col] * 8.0));\n\t\t\t\t\tfdtbl_UV[k] = (1.0 / (UVTable[ZigZag[k]] * aasf[row] * aasf[col] * 8.0));\n\t\t\t\t\tk++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction computeHuffmanTbl(nrcodes, std_table){\n\t\t\tvar codevalue = 0;\n\t\t\tvar pos_in_table = 0;\n\t\t\tvar HT = new Array();\n\t\t\tfor (var k = 1; k <= 16; k++) {\n\t\t\t\tfor (var j = 1; j <= nrcodes[k]; j++) {\n\t\t\t\t\tHT[std_table[pos_in_table]] = [];\n\t\t\t\t\tHT[std_table[pos_in_table]][0] = codevalue;\n\t\t\t\t\tHT[std_table[pos_in_table]][1] = k;\n\t\t\t\t\tpos_in_table++;\n\t\t\t\t\tcodevalue++;\n\t\t\t\t}\n\t\t\t\tcodevalue*=2;\n\t\t\t}\n\t\t\treturn HT;\n\t\t}\n\t\t\n\t\tfunction initHuffmanTbl()\n\t\t{\n\t\t\tYDC_HT = computeHuffmanTbl(std_dc_luminance_nrcodes,std_dc_luminance_values);\n\t\t\tUVDC_HT = computeHuffmanTbl(std_dc_chrominance_nrcodes,std_dc_chrominance_values);\n\t\t\tYAC_HT = computeHuffmanTbl(std_ac_luminance_nrcodes,std_ac_luminance_values);\n\t\t\tUVAC_HT = computeHuffmanTbl(std_ac_chrominance_nrcodes,std_ac_chrominance_values);\n\t\t}\n\t\n\t\tfunction initCategoryNumber()\n\t\t{\n\t\t\tvar nrlower = 1;\n\t\t\tvar nrupper = 2;\n\t\t\tfor (var cat = 1; cat <= 15; cat++) {\n\t\t\t\t//Positive numbers\n\t\t\t\tfor (var nr = nrlower; nr<nrupper; nr++) {\n\t\t\t\t\tcategory[32767+nr] = cat;\n\t\t\t\t\tbitcode[32767+nr] = [];\n\t\t\t\t\tbitcode[32767+nr][1] = cat;\n\t\t\t\t\tbitcode[32767+nr][0] = nr;\n\t\t\t\t}\n\t\t\t\t//Negative numbers\n\t\t\t\tfor (var nrneg =-(nrupper-1); nrneg<=-nrlower; nrneg++) {\n\t\t\t\t\tcategory[32767+nrneg] = cat;\n\t\t\t\t\tbitcode[32767+nrneg] = [];\n\t\t\t\t\tbitcode[32767+nrneg][1] = cat;\n\t\t\t\t\tbitcode[32767+nrneg][0] = nrupper-1+nrneg;\n\t\t\t\t}\n\t\t\t\tnrlower <<= 1;\n\t\t\t\tnrupper <<= 1;\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction initRGBYUVTable() {\n\t\t\tfor(var i = 0; i < 256;i++) {\n\t\t\t\tRGB_YUV_TABLE[i]      \t\t=  19595 * i;\n\t\t\t\tRGB_YUV_TABLE[(i+ 256)>>0] \t=  38470 * i;\n\t\t\t\tRGB_YUV_TABLE[(i+ 512)>>0] \t=   7471 * i + 0x8000;\n\t\t\t\tRGB_YUV_TABLE[(i+ 768)>>0] \t= -11059 * i;\n\t\t\t\tRGB_YUV_TABLE[(i+1024)>>0] \t= -21709 * i;\n\t\t\t\tRGB_YUV_TABLE[(i+1280)>>0] \t=  32768 * i + 0x807FFF;\n\t\t\t\tRGB_YUV_TABLE[(i+1536)>>0] \t= -27439 * i;\n\t\t\t\tRGB_YUV_TABLE[(i+1792)>>0] \t= - 5329 * i;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// IO functions\n\t\tfunction writeBits(bs)\n\t\t{\n\t\t\tvar value = bs[0];\n\t\t\tvar posval = bs[1]-1;\n\t\t\twhile ( posval >= 0 ) {\n\t\t\t\tif (value & (1 << posval) ) {\n\t\t\t\t\tbytenew |= (1 << bytepos);\n\t\t\t\t}\n\t\t\t\tposval--;\n\t\t\t\tbytepos--;\n\t\t\t\tif (bytepos < 0) {\n\t\t\t\t\tif (bytenew == 0xFF) {\n\t\t\t\t\t\twriteByte(0xFF);\n\t\t\t\t\t\twriteByte(0);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\twriteByte(bytenew);\n\t\t\t\t\t}\n\t\t\t\t\tbytepos=7;\n\t\t\t\t\tbytenew=0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tfunction writeByte(value)\n\t\t{\n\t\t\t//byteout.push(clt[value]); // write char directly instead of converting later\n      byteout.push(value);\n\t\t}\n\t\n\t\tfunction writeWord(value)\n\t\t{\n\t\t\twriteByte((value>>8)&0xFF);\n\t\t\twriteByte((value   )&0xFF);\n\t\t}\n\t\t\n\t\t// DCT & quantization core\n\t\tfunction fDCTQuant(data, fdtbl)\n\t\t{\n\t\t\tvar d0, d1, d2, d3, d4, d5, d6, d7;\n\t\t\t/* Pass 1: process rows. */\n\t\t\tvar dataOff=0;\n\t\t\tvar i;\n\t\t\tvar I8 = 8;\n\t\t\tvar I64 = 64;\n\t\t\tfor (i=0; i<I8; ++i)\n\t\t\t{\n\t\t\t\td0 = data[dataOff];\n\t\t\t\td1 = data[dataOff+1];\n\t\t\t\td2 = data[dataOff+2];\n\t\t\t\td3 = data[dataOff+3];\n\t\t\t\td4 = data[dataOff+4];\n\t\t\t\td5 = data[dataOff+5];\n\t\t\t\td6 = data[dataOff+6];\n\t\t\t\td7 = data[dataOff+7];\n\t\t\t\t\n\t\t\t\tvar tmp0 = d0 + d7;\n\t\t\t\tvar tmp7 = d0 - d7;\n\t\t\t\tvar tmp1 = d1 + d6;\n\t\t\t\tvar tmp6 = d1 - d6;\n\t\t\t\tvar tmp2 = d2 + d5;\n\t\t\t\tvar tmp5 = d2 - d5;\n\t\t\t\tvar tmp3 = d3 + d4;\n\t\t\t\tvar tmp4 = d3 - d4;\n\t\n\t\t\t\t/* Even part */\n\t\t\t\tvar tmp10 = tmp0 + tmp3;\t/* phase 2 */\n\t\t\t\tvar tmp13 = tmp0 - tmp3;\n\t\t\t\tvar tmp11 = tmp1 + tmp2;\n\t\t\t\tvar tmp12 = tmp1 - tmp2;\n\t\n\t\t\t\tdata[dataOff] = tmp10 + tmp11; /* phase 3 */\n\t\t\t\tdata[dataOff+4] = tmp10 - tmp11;\n\t\n\t\t\t\tvar z1 = (tmp12 + tmp13) * 0.707106781; /* c4 */\n\t\t\t\tdata[dataOff+2] = tmp13 + z1; /* phase 5 */\n\t\t\t\tdata[dataOff+6] = tmp13 - z1;\n\t\n\t\t\t\t/* Odd part */\n\t\t\t\ttmp10 = tmp4 + tmp5; /* phase 2 */\n\t\t\t\ttmp11 = tmp5 + tmp6;\n\t\t\t\ttmp12 = tmp6 + tmp7;\n\t\n\t\t\t\t/* The rotator is modified from fig 4-8 to avoid extra negations. */\n\t\t\t\tvar z5 = (tmp10 - tmp12) * 0.382683433; /* c6 */\n\t\t\t\tvar z2 = 0.541196100 * tmp10 + z5; /* c2-c6 */\n\t\t\t\tvar z4 = 1.306562965 * tmp12 + z5; /* c2+c6 */\n\t\t\t\tvar z3 = tmp11 * 0.707106781; /* c4 */\n\t\n\t\t\t\tvar z11 = tmp7 + z3;\t/* phase 5 */\n\t\t\t\tvar z13 = tmp7 - z3;\n\t\n\t\t\t\tdata[dataOff+5] = z13 + z2;\t/* phase 6 */\n\t\t\t\tdata[dataOff+3] = z13 - z2;\n\t\t\t\tdata[dataOff+1] = z11 + z4;\n\t\t\t\tdata[dataOff+7] = z11 - z4;\n\t\n\t\t\t\tdataOff += 8; /* advance pointer to next row */\n\t\t\t}\n\t\n\t\t\t/* Pass 2: process columns. */\n\t\t\tdataOff = 0;\n\t\t\tfor (i=0; i<I8; ++i)\n\t\t\t{\n\t\t\t\td0 = data[dataOff];\n\t\t\t\td1 = data[dataOff + 8];\n\t\t\t\td2 = data[dataOff + 16];\n\t\t\t\td3 = data[dataOff + 24];\n\t\t\t\td4 = data[dataOff + 32];\n\t\t\t\td5 = data[dataOff + 40];\n\t\t\t\td6 = data[dataOff + 48];\n\t\t\t\td7 = data[dataOff + 56];\n\t\t\t\t\n\t\t\t\tvar tmp0p2 = d0 + d7;\n\t\t\t\tvar tmp7p2 = d0 - d7;\n\t\t\t\tvar tmp1p2 = d1 + d6;\n\t\t\t\tvar tmp6p2 = d1 - d6;\n\t\t\t\tvar tmp2p2 = d2 + d5;\n\t\t\t\tvar tmp5p2 = d2 - d5;\n\t\t\t\tvar tmp3p2 = d3 + d4;\n\t\t\t\tvar tmp4p2 = d3 - d4;\n\t\n\t\t\t\t/* Even part */\n\t\t\t\tvar tmp10p2 = tmp0p2 + tmp3p2;\t/* phase 2 */\n\t\t\t\tvar tmp13p2 = tmp0p2 - tmp3p2;\n\t\t\t\tvar tmp11p2 = tmp1p2 + tmp2p2;\n\t\t\t\tvar tmp12p2 = tmp1p2 - tmp2p2;\n\t\n\t\t\t\tdata[dataOff] = tmp10p2 + tmp11p2; /* phase 3 */\n\t\t\t\tdata[dataOff+32] = tmp10p2 - tmp11p2;\n\t\n\t\t\t\tvar z1p2 = (tmp12p2 + tmp13p2) * 0.707106781; /* c4 */\n\t\t\t\tdata[dataOff+16] = tmp13p2 + z1p2; /* phase 5 */\n\t\t\t\tdata[dataOff+48] = tmp13p2 - z1p2;\n\t\n\t\t\t\t/* Odd part */\n\t\t\t\ttmp10p2 = tmp4p2 + tmp5p2; /* phase 2 */\n\t\t\t\ttmp11p2 = tmp5p2 + tmp6p2;\n\t\t\t\ttmp12p2 = tmp6p2 + tmp7p2;\n\t\n\t\t\t\t/* The rotator is modified from fig 4-8 to avoid extra negations. */\n\t\t\t\tvar z5p2 = (tmp10p2 - tmp12p2) * 0.382683433; /* c6 */\n\t\t\t\tvar z2p2 = 0.541196100 * tmp10p2 + z5p2; /* c2-c6 */\n\t\t\t\tvar z4p2 = 1.306562965 * tmp12p2 + z5p2; /* c2+c6 */\n\t\t\t\tvar z3p2 = tmp11p2 * 0.707106781; /* c4 */\n\t\n\t\t\t\tvar z11p2 = tmp7p2 + z3p2;\t/* phase 5 */\n\t\t\t\tvar z13p2 = tmp7p2 - z3p2;\n\t\n\t\t\t\tdata[dataOff+40] = z13p2 + z2p2; /* phase 6 */\n\t\t\t\tdata[dataOff+24] = z13p2 - z2p2;\n\t\t\t\tdata[dataOff+ 8] = z11p2 + z4p2;\n\t\t\t\tdata[dataOff+56] = z11p2 - z4p2;\n\t\n\t\t\t\tdataOff++; /* advance pointer to next column */\n\t\t\t}\n\t\n\t\t\t// Quantize/descale the coefficients\n\t\t\tvar fDCTQuant;\n\t\t\tfor (i=0; i<I64; ++i)\n\t\t\t{\n\t\t\t\t// Apply the quantization and scaling factor & Round to nearest integer\n\t\t\t\tfDCTQuant = data[i]*fdtbl[i];\n\t\t\t\toutputfDCTQuant[i] = (fDCTQuant > 0.0) ? ((fDCTQuant + 0.5)|0) : ((fDCTQuant - 0.5)|0);\n\t\t\t\t//outputfDCTQuant[i] = fround(fDCTQuant);\n\n\t\t\t}\n\t\t\treturn outputfDCTQuant;\n\t\t}\n\t\t\n\t\tfunction writeAPP0()\n\t\t{\n\t\t\twriteWord(0xFFE0); // marker\n\t\t\twriteWord(16); // length\n\t\t\twriteByte(0x4A); // J\n\t\t\twriteByte(0x46); // F\n\t\t\twriteByte(0x49); // I\n\t\t\twriteByte(0x46); // F\n\t\t\twriteByte(0); // = \"JFIF\",'\\0'\n\t\t\twriteByte(1); // versionhi\n\t\t\twriteByte(1); // versionlo\n\t\t\twriteByte(0); // xyunits\n\t\t\twriteWord(1); // xdensity\n\t\t\twriteWord(1); // ydensity\n\t\t\twriteByte(0); // thumbnwidth\n\t\t\twriteByte(0); // thumbnheight\n\t\t}\n\t\n\t\tfunction writeSOF0(width, height)\n\t\t{\n\t\t\twriteWord(0xFFC0); // marker\n\t\t\twriteWord(17);   // length, truecolor YUV JPG\n\t\t\twriteByte(8);    // precision\n\t\t\twriteWord(height);\n\t\t\twriteWord(width);\n\t\t\twriteByte(3);    // nrofcomponents\n\t\t\twriteByte(1);    // IdY\n\t\t\twriteByte(0x11); // HVY\n\t\t\twriteByte(0);    // QTY\n\t\t\twriteByte(2);    // IdU\n\t\t\twriteByte(0x11); // HVU\n\t\t\twriteByte(1);    // QTU\n\t\t\twriteByte(3);    // IdV\n\t\t\twriteByte(0x11); // HVV\n\t\t\twriteByte(1);    // QTV\n\t\t}\n\t\n\t\tfunction writeDQT()\n\t\t{\n\t\t\twriteWord(0xFFDB); // marker\n\t\t\twriteWord(132);\t   // length\n\t\t\twriteByte(0);\n\t\t\tfor (var i=0; i<64; i++) {\n\t\t\t\twriteByte(YTable[i]);\n\t\t\t}\n\t\t\twriteByte(1);\n\t\t\tfor (var j=0; j<64; j++) {\n\t\t\t\twriteByte(UVTable[j]);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction writeDHT()\n\t\t{\n\t\t\twriteWord(0xFFC4); // marker\n\t\t\twriteWord(0x01A2); // length\n\t\n\t\t\twriteByte(0); // HTYDCinfo\n\t\t\tfor (var i=0; i<16; i++) {\n\t\t\t\twriteByte(std_dc_luminance_nrcodes[i+1]);\n\t\t\t}\n\t\t\tfor (var j=0; j<=11; j++) {\n\t\t\t\twriteByte(std_dc_luminance_values[j]);\n\t\t\t}\n\t\n\t\t\twriteByte(0x10); // HTYACinfo\n\t\t\tfor (var k=0; k<16; k++) {\n\t\t\t\twriteByte(std_ac_luminance_nrcodes[k+1]);\n\t\t\t}\n\t\t\tfor (var l=0; l<=161; l++) {\n\t\t\t\twriteByte(std_ac_luminance_values[l]);\n\t\t\t}\n\t\n\t\t\twriteByte(1); // HTUDCinfo\n\t\t\tfor (var m=0; m<16; m++) {\n\t\t\t\twriteByte(std_dc_chrominance_nrcodes[m+1]);\n\t\t\t}\n\t\t\tfor (var n=0; n<=11; n++) {\n\t\t\t\twriteByte(std_dc_chrominance_values[n]);\n\t\t\t}\n\t\n\t\t\twriteByte(0x11); // HTUACinfo\n\t\t\tfor (var o=0; o<16; o++) {\n\t\t\t\twriteByte(std_ac_chrominance_nrcodes[o+1]);\n\t\t\t}\n\t\t\tfor (var p=0; p<=161; p++) {\n\t\t\t\twriteByte(std_ac_chrominance_values[p]);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction writeSOS()\n\t\t{\n\t\t\twriteWord(0xFFDA); // marker\n\t\t\twriteWord(12); // length\n\t\t\twriteByte(3); // nrofcomponents\n\t\t\twriteByte(1); // IdY\n\t\t\twriteByte(0); // HTY\n\t\t\twriteByte(2); // IdU\n\t\t\twriteByte(0x11); // HTU\n\t\t\twriteByte(3); // IdV\n\t\t\twriteByte(0x11); // HTV\n\t\t\twriteByte(0); // Ss\n\t\t\twriteByte(0x3f); // Se\n\t\t\twriteByte(0); // Bf\n\t\t}\n\t\t\n\t\tfunction processDU(CDU, fdtbl, DC, HTDC, HTAC){\n\t\t\tvar EOB = HTAC[0x00];\n\t\t\tvar M16zeroes = HTAC[0xF0];\n\t\t\tvar pos;\n\t\t\tvar I16 = 16;\n\t\t\tvar I63 = 63;\n\t\t\tvar I64 = 64;\n\t\t\tvar DU_DCT = fDCTQuant(CDU, fdtbl);\n\t\t\t//ZigZag reorder\n\t\t\tfor (var j=0;j<I64;++j) {\n\t\t\t\tDU[ZigZag[j]]=DU_DCT[j];\n\t\t\t}\n\t\t\tvar Diff = DU[0] - DC; DC = DU[0];\n\t\t\t//Encode DC\n\t\t\tif (Diff==0) {\n\t\t\t\twriteBits(HTDC[0]); // Diff might be 0\n\t\t\t} else {\n\t\t\t\tpos = 32767+Diff;\n\t\t\t\twriteBits(HTDC[category[pos]]);\n\t\t\t\twriteBits(bitcode[pos]);\n\t\t\t}\n\t\t\t//Encode ACs\n\t\t\tvar end0pos = 63; // was const... which is crazy\n\t\t\tfor (; (end0pos>0)&&(DU[end0pos]==0); end0pos--) {};\n\t\t\t//end0pos = first element in reverse order !=0\n\t\t\tif ( end0pos == 0) {\n\t\t\t\twriteBits(EOB);\n\t\t\t\treturn DC;\n\t\t\t}\n\t\t\tvar i = 1;\n\t\t\tvar lng;\n\t\t\twhile ( i <= end0pos ) {\n\t\t\t\tvar startpos = i;\n\t\t\t\tfor (; (DU[i]==0) && (i<=end0pos); ++i) {}\n\t\t\t\tvar nrzeroes = i-startpos;\n\t\t\t\tif ( nrzeroes >= I16 ) {\n\t\t\t\t\tlng = nrzeroes>>4;\n\t\t\t\t\tfor (var nrmarker=1; nrmarker <= lng; ++nrmarker)\n\t\t\t\t\t\twriteBits(M16zeroes);\n\t\t\t\t\tnrzeroes = nrzeroes&0xF;\n\t\t\t\t}\n\t\t\t\tpos = 32767+DU[i];\n\t\t\t\twriteBits(HTAC[(nrzeroes<<4)+category[pos]]);\n\t\t\t\twriteBits(bitcode[pos]);\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tif ( end0pos != I63 ) {\n\t\t\t\twriteBits(EOB);\n\t\t\t}\n\t\t\treturn DC;\n\t\t}\n\n\t\tfunction initCharLookupTable(){\n\t\t\tvar sfcc = String.fromCharCode;\n\t\t\tfor(var i=0; i < 256; i++){ ///// ACHTUNG // 255\n\t\t\t\tclt[i] = sfcc(i);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.encode = function(image,quality) // image data object\n\t\t{\n\t\t\tvar time_start = new Date().getTime();\n\t\t\t\n\t\t\tif(quality) setQuality(quality);\n\t\t\t\n\t\t\t// Initialize bit writer\n\t\t\tbyteout = new Array();\n\t\t\tbytenew=0;\n\t\t\tbytepos=7;\n\t\n\t\t\t// Add JPEG headers\n\t\t\twriteWord(0xFFD8); // SOI\n\t\t\twriteAPP0();\n\t\t\twriteDQT();\n\t\t\twriteSOF0(image.width,image.height);\n\t\t\twriteDHT();\n\t\t\twriteSOS();\n\n\t\n\t\t\t// Encode 8x8 macroblocks\n\t\t\tvar DCY=0;\n\t\t\tvar DCU=0;\n\t\t\tvar DCV=0;\n\t\t\t\n\t\t\tbytenew=0;\n\t\t\tbytepos=7;\n\t\t\t\n\t\t\t\n\t\t\tthis.encode.displayName = \"_encode_\";\n\n\t\t\tvar imageData = image.data;\n\t\t\tvar width = image.width;\n\t\t\tvar height = image.height;\n\n\t\t\tvar quadWidth = width*4;\n\t\t\tvar tripleWidth = width*3;\n\t\t\t\n\t\t\tvar x, y = 0;\n\t\t\tvar r, g, b;\n\t\t\tvar start,p, col,row,pos;\n\t\t\twhile(y < height){\n\t\t\t\tx = 0;\n\t\t\t\twhile(x < quadWidth){\n\t\t\t\tstart = quadWidth * y + x;\n\t\t\t\tp = start;\n\t\t\t\tcol = -1;\n\t\t\t\trow = 0;\n\t\t\t\t\n\t\t\t\tfor(pos=0; pos < 64; pos++){\n\t\t\t\t\trow = pos >> 3;// /8\n\t\t\t\t\tcol = ( pos & 7 ) * 4; // %8\n\t\t\t\t\tp = start + ( row * quadWidth ) + col;\t\t\n\t\t\t\t\t\n\t\t\t\t\tif(y+row >= height){ // padding bottom\n\t\t\t\t\t\tp-= (quadWidth*(y+1+row-height));\n\t\t\t\t\t}\n\n\t\t\t\t\tif(x+col >= quadWidth){ // padding right\t\n\t\t\t\t\t\tp-= ((x+col) - quadWidth +4)\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tr = imageData[ p++ ];\n\t\t\t\t\tg = imageData[ p++ ];\n\t\t\t\t\tb = imageData[ p++ ];\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t/* // calculate YUV values dynamically\n\t\t\t\t\tYDU[pos]=((( 0.29900)*r+( 0.58700)*g+( 0.11400)*b))-128; //-0x80\n\t\t\t\t\tUDU[pos]=(((-0.16874)*r+(-0.33126)*g+( 0.50000)*b));\n\t\t\t\t\tVDU[pos]=((( 0.50000)*r+(-0.41869)*g+(-0.08131)*b));\n\t\t\t\t\t*/\n\t\t\t\t\t\n\t\t\t\t\t// use lookup table (slightly faster)\n\t\t\t\t\tYDU[pos] = ((RGB_YUV_TABLE[r]             + RGB_YUV_TABLE[(g +  256)>>0] + RGB_YUV_TABLE[(b +  512)>>0]) >> 16)-128;\n\t\t\t\t\tUDU[pos] = ((RGB_YUV_TABLE[(r +  768)>>0] + RGB_YUV_TABLE[(g + 1024)>>0] + RGB_YUV_TABLE[(b + 1280)>>0]) >> 16)-128;\n\t\t\t\t\tVDU[pos] = ((RGB_YUV_TABLE[(r + 1280)>>0] + RGB_YUV_TABLE[(g + 1536)>>0] + RGB_YUV_TABLE[(b + 1792)>>0]) >> 16)-128;\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tDCY = processDU(YDU, fdtbl_Y, DCY, YDC_HT, YAC_HT);\n\t\t\t\tDCU = processDU(UDU, fdtbl_UV, DCU, UVDC_HT, UVAC_HT);\n\t\t\t\tDCV = processDU(VDU, fdtbl_UV, DCV, UVDC_HT, UVAC_HT);\n\t\t\t\tx+=32;\n\t\t\t\t}\n\t\t\t\ty+=8;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t////////////////////////////////////////////////////////////////\n\t\n\t\t\t// Do the bit alignment of the EOI marker\n\t\t\tif ( bytepos >= 0 ) {\n\t\t\t\tvar fillbits = [];\n\t\t\t\tfillbits[1] = bytepos+1;\n\t\t\t\tfillbits[0] = (1<<(bytepos+1))-1;\n\t\t\t\twriteBits(fillbits);\n\t\t\t}\n\t\n\t\t\twriteWord(0xFFD9); //EOI\n\n      //return new Uint8Array(byteout);\n      return new Buffer(byteout);\n\n\t\t\tvar jpegDataUri = 'data:image/jpeg;base64,' + btoa(byteout.join(''));\n\t\t\t\n\t\t\tbyteout = [];\n\t\t\t\n\t\t\t// benchmarking\n\t\t\tvar duration = new Date().getTime() - time_start;\n    \t\t//console.log('Encoding time: '+ duration + 'ms');\n    \t\t//\n\t\t\t\n\t\t\treturn jpegDataUri\t\t\t\n\t}\n\t\n\tfunction setQuality(quality){\n\t\tif (quality <= 0) {\n\t\t\tquality = 1;\n\t\t}\n\t\tif (quality > 100) {\n\t\t\tquality = 100;\n\t\t}\n\t\t\n\t\tif(currentQuality == quality) return // don't recalc if unchanged\n\t\t\n\t\tvar sf = 0;\n\t\tif (quality < 50) {\n\t\t\tsf = Math.floor(5000 / quality);\n\t\t} else {\n\t\t\tsf = Math.floor(200 - quality*2);\n\t\t}\n\t\t\n\t\tinitQuantTables(sf);\n\t\tcurrentQuality = quality;\n\t\t//console.log('Quality set to: '+quality +'%');\n\t}\n\t\n\tfunction init(){\n\t\tvar time_start = new Date().getTime();\n\t\tif(!quality) quality = 50;\n\t\t// Create tables\n\t\tinitCharLookupTable()\n\t\tinitHuffmanTbl();\n\t\tinitCategoryNumber();\n\t\tinitRGBYUVTable();\n\t\t\n\t\tsetQuality(quality);\n\t\tvar duration = new Date().getTime() - time_start;\n    \t//console.log('Initialization '+ duration + 'ms');\n\t}\n\t\n\tinit();\n\t\n};\nif (typeof module !== undefined) {\n\tmodule.exports = encode;\n}\n\nfunction encode(imgData, qu) {\n  if (typeof qu === 'undefined') qu = 50;\n  var encoder = new JPEGEncoder(qu);\n\tvar data = encoder.encode(imgData, qu);\n  return {\n    data: data,\n    width: imgData.width,\n    height: imgData.height\n  };\n}\n\n// helper function to get the imageData of an existing image on the current page.\nfunction getImageDataFromImage(idOrElement){\n\tvar theImg = (typeof(idOrElement)=='string')? document.getElementById(idOrElement):idOrElement;\n\tvar cvs = document.createElement('canvas');\n\tcvs.width = theImg.width;\n\tcvs.height = theImg.height;\n\tvar ctx = cvs.getContext(\"2d\");\n\tctx.drawImage(theImg,0,0);\n\t\n\treturn (ctx.getImageData(0, 0, cvs.width, cvs.height));\n}\n", "/* -*- tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- /\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\n/*\n   Copyright 2011 notmasteryet\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\n// - The JPEG specification can be found in the ITU CCITT Recommendation T.81\n//   (www.w3.org/Graphics/JPEG/itu-t81.pdf)\n// - The JFIF specification can be found in the JPEG File Interchange Format\n//   (www.w3.org/Graphics/JPEG/jfif3.pdf)\n// - The Adobe Application-Specific JPEG markers in the Supporting the DCT Filters\n//   in PostScript Level 2, Technical Note #5116\n//   (partners.adobe.com/public/developer/en/ps/sdk/5116.DCT_Filter.pdf)\n\nvar JpegImage = (function jpegImage() {\n  \"use strict\";\n  var dctZigZag = new Int32Array([\n     0,\n     1,  8,\n    16,  9,  2,\n     3, 10, 17, 24,\n    32, 25, 18, 11, 4,\n     5, 12, 19, 26, 33, 40,\n    48, 41, 34, 27, 20, 13,  6,\n     7, 14, 21, 28, 35, 42, 49, 56,\n    57, 50, 43, 36, 29, 22, 15,\n    23, 30, 37, 44, 51, 58,\n    59, 52, 45, 38, 31,\n    39, 46, 53, 60,\n    61, 54, 47,\n    55, 62,\n    63\n  ]);\n\n  var dctCos1  =  4017   // cos(pi/16)\n  var dctSin1  =   799   // sin(pi/16)\n  var dctCos3  =  3406   // cos(3*pi/16)\n  var dctSin3  =  2276   // sin(3*pi/16)\n  var dctCos6  =  1567   // cos(6*pi/16)\n  var dctSin6  =  3784   // sin(6*pi/16)\n  var dctSqrt2 =  5793   // sqrt(2)\n  var dctSqrt1d2 = 2896  // sqrt(2) / 2\n\n  function constructor() {\n  }\n\n  function buildHuffmanTable(codeLengths, values) {\n    var k = 0, code = [], i, j, length = 16;\n    while (length > 0 && !codeLengths[length - 1])\n      length--;\n    code.push({children: [], index: 0});\n    var p = code[0], q;\n    for (i = 0; i < length; i++) {\n      for (j = 0; j < codeLengths[i]; j++) {\n        p = code.pop();\n        p.children[p.index] = values[k];\n        while (p.index > 0) {\n          if (code.length === 0)\n            throw new Error('Could not recreate Huffman Table');\n          p = code.pop();\n        }\n        p.index++;\n        code.push(p);\n        while (code.length <= i) {\n          code.push(q = {children: [], index: 0});\n          p.children[p.index] = q.children;\n          p = q;\n        }\n        k++;\n      }\n      if (i + 1 < length) {\n        // p here points to last code\n        code.push(q = {children: [], index: 0});\n        p.children[p.index] = q.children;\n        p = q;\n      }\n    }\n    return code[0].children;\n  }\n\n  function decodeScan(data, offset,\n                      frame, components, resetInterval,\n                      spectralStart, spectralEnd,\n                      successivePrev, successive) {\n    var precision = frame.precision;\n    var samplesPerLine = frame.samplesPerLine;\n    var scanLines = frame.scanLines;\n    var mcusPerLine = frame.mcusPerLine;\n    var progressive = frame.progressive;\n    var maxH = frame.maxH, maxV = frame.maxV;\n\n    var startOffset = offset, bitsData = 0, bitsCount = 0;\n    function readBit() {\n      if (bitsCount > 0) {\n        bitsCount--;\n        return (bitsData >> bitsCount) & 1;\n      }\n      bitsData = data[offset++];\n      if (bitsData == 0xFF) {\n        var nextByte = data[offset++];\n        if (nextByte) {\n          throw new Error(\"unexpected marker: \" + ((bitsData << 8) | nextByte).toString(16));\n        }\n        // unstuff 0\n      }\n      bitsCount = 7;\n      return bitsData >>> 7;\n    }\n    function decodeHuffman(tree) {\n      var node = tree, bit;\n      while ((bit = readBit()) !== null) {\n        node = node[bit];\n        if (typeof node === 'number')\n          return node;\n        if (typeof node !== 'object')\n          throw new Error(\"invalid huffman sequence\");\n      }\n      return null;\n    }\n    function receive(length) {\n      var n = 0;\n      while (length > 0) {\n        var bit = readBit();\n        if (bit === null) return;\n        n = (n << 1) | bit;\n        length--;\n      }\n      return n;\n    }\n    function receiveAndExtend(length) {\n      var n = receive(length);\n      if (n >= 1 << (length - 1))\n        return n;\n      return n + (-1 << length) + 1;\n    }\n    function decodeBaseline(component, zz) {\n      var t = decodeHuffman(component.huffmanTableDC);\n      var diff = t === 0 ? 0 : receiveAndExtend(t);\n      zz[0]= (component.pred += diff);\n      var k = 1;\n      while (k < 64) {\n        var rs = decodeHuffman(component.huffmanTableAC);\n        var s = rs & 15, r = rs >> 4;\n        if (s === 0) {\n          if (r < 15)\n            break;\n          k += 16;\n          continue;\n        }\n        k += r;\n        var z = dctZigZag[k];\n        zz[z] = receiveAndExtend(s);\n        k++;\n      }\n    }\n    function decodeDCFirst(component, zz) {\n      var t = decodeHuffman(component.huffmanTableDC);\n      var diff = t === 0 ? 0 : (receiveAndExtend(t) << successive);\n      zz[0] = (component.pred += diff);\n    }\n    function decodeDCSuccessive(component, zz) {\n      zz[0] |= readBit() << successive;\n    }\n    var eobrun = 0;\n    function decodeACFirst(component, zz) {\n      if (eobrun > 0) {\n        eobrun--;\n        return;\n      }\n      var k = spectralStart, e = spectralEnd;\n      while (k <= e) {\n        var rs = decodeHuffman(component.huffmanTableAC);\n        var s = rs & 15, r = rs >> 4;\n        if (s === 0) {\n          if (r < 15) {\n            eobrun = receive(r) + (1 << r) - 1;\n            break;\n          }\n          k += 16;\n          continue;\n        }\n        k += r;\n        var z = dctZigZag[k];\n        zz[z] = receiveAndExtend(s) * (1 << successive);\n        k++;\n      }\n    }\n    var successiveACState = 0, successiveACNextValue;\n    function decodeACSuccessive(component, zz) {\n      var k = spectralStart, e = spectralEnd, r = 0;\n      while (k <= e) {\n        var z = dctZigZag[k];\n        var direction = zz[z] < 0 ? -1 : 1;\n        switch (successiveACState) {\n        case 0: // initial state\n          var rs = decodeHuffman(component.huffmanTableAC);\n          var s = rs & 15, r = rs >> 4;\n          if (s === 0) {\n            if (r < 15) {\n              eobrun = receive(r) + (1 << r);\n              successiveACState = 4;\n            } else {\n              r = 16;\n              successiveACState = 1;\n            }\n          } else {\n            if (s !== 1)\n              throw new Error(\"invalid ACn encoding\");\n            successiveACNextValue = receiveAndExtend(s);\n            successiveACState = r ? 2 : 3;\n          }\n          continue;\n        case 1: // skipping r zero items\n        case 2:\n          if (zz[z])\n            zz[z] += (readBit() << successive) * direction;\n          else {\n            r--;\n            if (r === 0)\n              successiveACState = successiveACState == 2 ? 3 : 0;\n          }\n          break;\n        case 3: // set value for a zero item\n          if (zz[z])\n            zz[z] += (readBit() << successive) * direction;\n          else {\n            zz[z] = successiveACNextValue << successive;\n            successiveACState = 0;\n          }\n          break;\n        case 4: // eob\n          if (zz[z])\n            zz[z] += (readBit() << successive) * direction;\n          break;\n        }\n        k++;\n      }\n      if (successiveACState === 4) {\n        eobrun--;\n        if (eobrun === 0)\n          successiveACState = 0;\n      }\n    }\n    function decodeMcu(component, decode, mcu, row, col) {\n      var mcuRow = (mcu / mcusPerLine) | 0;\n      var mcuCol = mcu % mcusPerLine;\n      var blockRow = mcuRow * component.v + row;\n      var blockCol = mcuCol * component.h + col;\n      decode(component, component.blocks[blockRow][blockCol]);\n    }\n    function decodeBlock(component, decode, mcu) {\n      var blockRow = (mcu / component.blocksPerLine) | 0;\n      var blockCol = mcu % component.blocksPerLine;\n      decode(component, component.blocks[blockRow][blockCol]);\n    }\n\n    var componentsLength = components.length;\n    var component, i, j, k, n;\n    var decodeFn;\n    if (progressive) {\n      if (spectralStart === 0)\n        decodeFn = successivePrev === 0 ? decodeDCFirst : decodeDCSuccessive;\n      else\n        decodeFn = successivePrev === 0 ? decodeACFirst : decodeACSuccessive;\n    } else {\n      decodeFn = decodeBaseline;\n    }\n\n    var mcu = 0, marker;\n    var mcuExpected;\n    if (componentsLength == 1) {\n      mcuExpected = components[0].blocksPerLine * components[0].blocksPerColumn;\n    } else {\n      mcuExpected = mcusPerLine * frame.mcusPerColumn;\n    }\n    if (!resetInterval) resetInterval = mcuExpected;\n\n    var h, v;\n    while (mcu < mcuExpected) {\n      // reset interval stuff\n      for (i = 0; i < componentsLength; i++)\n        components[i].pred = 0;\n      eobrun = 0;\n\n      if (componentsLength == 1) {\n        component = components[0];\n        for (n = 0; n < resetInterval; n++) {\n          decodeBlock(component, decodeFn, mcu);\n          mcu++;\n        }\n      } else {\n        for (n = 0; n < resetInterval; n++) {\n          for (i = 0; i < componentsLength; i++) {\n            component = components[i];\n            h = component.h;\n            v = component.v;\n            for (j = 0; j < v; j++) {\n              for (k = 0; k < h; k++) {\n                decodeMcu(component, decodeFn, mcu, j, k);\n              }\n            }\n          }\n          mcu++;\n\n          // If we've reached our expected MCU's, stop decoding\n          if (mcu === mcuExpected) break;\n        }\n      }\n\n      // find marker\n      bitsCount = 0;\n      marker = (data[offset] << 8) | data[offset + 1];\n      if (marker < 0xFF00) {\n        throw new Error(\"marker was not found\");\n      }\n\n      if (marker >= 0xFFD0 && marker <= 0xFFD7) { // RSTx\n        offset += 2;\n      }\n      else\n        break;\n    }\n\n    return offset - startOffset;\n  }\n\n  function buildComponentData(frame, component) {\n    var lines = [];\n    var blocksPerLine = component.blocksPerLine;\n    var blocksPerColumn = component.blocksPerColumn;\n    var samplesPerLine = blocksPerLine << 3;\n    var R = new Int32Array(64), r = new Uint8Array(64);\n\n    // A port of poppler's IDCT method which in turn is taken from:\n    //   Christoph Loeffler, Adriaan Ligtenberg, George S. Moschytz,\n    //   \"Practical Fast 1-D DCT Algorithms with 11 Multiplications\",\n    //   IEEE Intl. Conf. on Acoustics, Speech & Signal Processing, 1989,\n    //   988-991.\n    function quantizeAndInverse(zz, dataOut, dataIn) {\n      var qt = component.quantizationTable;\n      var v0, v1, v2, v3, v4, v5, v6, v7, t;\n      var p = dataIn;\n      var i;\n\n      // dequant\n      for (i = 0; i < 64; i++)\n        p[i] = zz[i] * qt[i];\n\n      // inverse DCT on rows\n      for (i = 0; i < 8; ++i) {\n        var row = 8 * i;\n\n        // check for all-zero AC coefficients\n        if (p[1 + row] == 0 && p[2 + row] == 0 && p[3 + row] == 0 &&\n            p[4 + row] == 0 && p[5 + row] == 0 && p[6 + row] == 0 &&\n            p[7 + row] == 0) {\n          t = (dctSqrt2 * p[0 + row] + 512) >> 10;\n          p[0 + row] = t;\n          p[1 + row] = t;\n          p[2 + row] = t;\n          p[3 + row] = t;\n          p[4 + row] = t;\n          p[5 + row] = t;\n          p[6 + row] = t;\n          p[7 + row] = t;\n          continue;\n        }\n\n        // stage 4\n        v0 = (dctSqrt2 * p[0 + row] + 128) >> 8;\n        v1 = (dctSqrt2 * p[4 + row] + 128) >> 8;\n        v2 = p[2 + row];\n        v3 = p[6 + row];\n        v4 = (dctSqrt1d2 * (p[1 + row] - p[7 + row]) + 128) >> 8;\n        v7 = (dctSqrt1d2 * (p[1 + row] + p[7 + row]) + 128) >> 8;\n        v5 = p[3 + row] << 4;\n        v6 = p[5 + row] << 4;\n\n        // stage 3\n        t = (v0 - v1+ 1) >> 1;\n        v0 = (v0 + v1 + 1) >> 1;\n        v1 = t;\n        t = (v2 * dctSin6 + v3 * dctCos6 + 128) >> 8;\n        v2 = (v2 * dctCos6 - v3 * dctSin6 + 128) >> 8;\n        v3 = t;\n        t = (v4 - v6 + 1) >> 1;\n        v4 = (v4 + v6 + 1) >> 1;\n        v6 = t;\n        t = (v7 + v5 + 1) >> 1;\n        v5 = (v7 - v5 + 1) >> 1;\n        v7 = t;\n\n        // stage 2\n        t = (v0 - v3 + 1) >> 1;\n        v0 = (v0 + v3 + 1) >> 1;\n        v3 = t;\n        t = (v1 - v2 + 1) >> 1;\n        v1 = (v1 + v2 + 1) >> 1;\n        v2 = t;\n        t = (v4 * dctSin3 + v7 * dctCos3 + 2048) >> 12;\n        v4 = (v4 * dctCos3 - v7 * dctSin3 + 2048) >> 12;\n        v7 = t;\n        t = (v5 * dctSin1 + v6 * dctCos1 + 2048) >> 12;\n        v5 = (v5 * dctCos1 - v6 * dctSin1 + 2048) >> 12;\n        v6 = t;\n\n        // stage 1\n        p[0 + row] = v0 + v7;\n        p[7 + row] = v0 - v7;\n        p[1 + row] = v1 + v6;\n        p[6 + row] = v1 - v6;\n        p[2 + row] = v2 + v5;\n        p[5 + row] = v2 - v5;\n        p[3 + row] = v3 + v4;\n        p[4 + row] = v3 - v4;\n      }\n\n      // inverse DCT on columns\n      for (i = 0; i < 8; ++i) {\n        var col = i;\n\n        // check for all-zero AC coefficients\n        if (p[1*8 + col] == 0 && p[2*8 + col] == 0 && p[3*8 + col] == 0 &&\n            p[4*8 + col] == 0 && p[5*8 + col] == 0 && p[6*8 + col] == 0 &&\n            p[7*8 + col] == 0) {\n          t = (dctSqrt2 * dataIn[i+0] + 8192) >> 14;\n          p[0*8 + col] = t;\n          p[1*8 + col] = t;\n          p[2*8 + col] = t;\n          p[3*8 + col] = t;\n          p[4*8 + col] = t;\n          p[5*8 + col] = t;\n          p[6*8 + col] = t;\n          p[7*8 + col] = t;\n          continue;\n        }\n\n        // stage 4\n        v0 = (dctSqrt2 * p[0*8 + col] + 2048) >> 12;\n        v1 = (dctSqrt2 * p[4*8 + col] + 2048) >> 12;\n        v2 = p[2*8 + col];\n        v3 = p[6*8 + col];\n        v4 = (dctSqrt1d2 * (p[1*8 + col] - p[7*8 + col]) + 2048) >> 12;\n        v7 = (dctSqrt1d2 * (p[1*8 + col] + p[7*8 + col]) + 2048) >> 12;\n        v5 = p[3*8 + col];\n        v6 = p[5*8 + col];\n\n        // stage 3\n        t = (v0 - v1 + 1) >> 1;\n        v0 = (v0 + v1 + 1) >> 1;\n        v1 = t;\n        t = (v2 * dctSin6 + v3 * dctCos6 + 2048) >> 12;\n        v2 = (v2 * dctCos6 - v3 * dctSin6 + 2048) >> 12;\n        v3 = t;\n        t = (v4 - v6 + 1) >> 1;\n        v4 = (v4 + v6 + 1) >> 1;\n        v6 = t;\n        t = (v7 + v5 + 1) >> 1;\n        v5 = (v7 - v5 + 1) >> 1;\n        v7 = t;\n\n        // stage 2\n        t = (v0 - v3 + 1) >> 1;\n        v0 = (v0 + v3 + 1) >> 1;\n        v3 = t;\n        t = (v1 - v2 + 1) >> 1;\n        v1 = (v1 + v2 + 1) >> 1;\n        v2 = t;\n        t = (v4 * dctSin3 + v7 * dctCos3 + 2048) >> 12;\n        v4 = (v4 * dctCos3 - v7 * dctSin3 + 2048) >> 12;\n        v7 = t;\n        t = (v5 * dctSin1 + v6 * dctCos1 + 2048) >> 12;\n        v5 = (v5 * dctCos1 - v6 * dctSin1 + 2048) >> 12;\n        v6 = t;\n\n        // stage 1\n        p[0*8 + col] = v0 + v7;\n        p[7*8 + col] = v0 - v7;\n        p[1*8 + col] = v1 + v6;\n        p[6*8 + col] = v1 - v6;\n        p[2*8 + col] = v2 + v5;\n        p[5*8 + col] = v2 - v5;\n        p[3*8 + col] = v3 + v4;\n        p[4*8 + col] = v3 - v4;\n      }\n\n      // convert to 8-bit integers\n      for (i = 0; i < 64; ++i) {\n        var sample = 128 + ((p[i] + 8) >> 4);\n        dataOut[i] = sample < 0 ? 0 : sample > 0xFF ? 0xFF : sample;\n      }\n    }\n\n    var i, j;\n    for (var blockRow = 0; blockRow < blocksPerColumn; blockRow++) {\n      var scanLine = blockRow << 3;\n      for (i = 0; i < 8; i++)\n        lines.push(new Uint8Array(samplesPerLine));\n      for (var blockCol = 0; blockCol < blocksPerLine; blockCol++) {\n        quantizeAndInverse(component.blocks[blockRow][blockCol], r, R);\n\n        var offset = 0, sample = blockCol << 3;\n        for (j = 0; j < 8; j++) {\n          var line = lines[scanLine + j];\n          for (i = 0; i < 8; i++)\n            line[sample + i] = r[offset++];\n        }\n      }\n    }\n    return lines;\n  }\n\n  function clampTo8bit(a) {\n    return a < 0 ? 0 : a > 255 ? 255 : a;\n  }\n\n  constructor.prototype = {\n    load: function load(path) {\n      var xhr = new XMLHttpRequest();\n      xhr.open(\"GET\", path, true);\n      xhr.responseType = \"arraybuffer\";\n      xhr.onload = (function() {\n        // TODO catch parse error\n        var data = new Uint8Array(xhr.response || xhr.mozResponseArrayBuffer);\n        this.parse(data);\n        if (this.onload)\n          this.onload();\n      }).bind(this);\n      xhr.send(null);\n    },\n    parse: function parse(data) {\n      var offset = 0, length = data.length;\n      function readUint16() {\n        var value = (data[offset] << 8) | data[offset + 1];\n        offset += 2;\n        return value;\n      }\n      function readDataBlock() {\n        var length = readUint16();\n        var array = data.subarray(offset, offset + length - 2);\n        offset += array.length;\n        return array;\n      }\n      function prepareComponents(frame) {\n        var maxH = 0, maxV = 0;\n        var component, componentId;\n        for (componentId in frame.components) {\n          if (frame.components.hasOwnProperty(componentId)) {\n            component = frame.components[componentId];\n            if (maxH < component.h) maxH = component.h;\n            if (maxV < component.v) maxV = component.v;\n          }\n        }\n        var mcusPerLine = Math.ceil(frame.samplesPerLine / 8 / maxH);\n        var mcusPerColumn = Math.ceil(frame.scanLines / 8 / maxV);\n        for (componentId in frame.components) {\n          if (frame.components.hasOwnProperty(componentId)) {\n            component = frame.components[componentId];\n            var blocksPerLine = Math.ceil(Math.ceil(frame.samplesPerLine / 8) * component.h / maxH);\n            var blocksPerColumn = Math.ceil(Math.ceil(frame.scanLines  / 8) * component.v / maxV);\n            var blocksPerLineForMcu = mcusPerLine * component.h;\n            var blocksPerColumnForMcu = mcusPerColumn * component.v;\n            var blocks = [];\n            for (var i = 0; i < blocksPerColumnForMcu; i++) {\n              var row = [];\n              for (var j = 0; j < blocksPerLineForMcu; j++)\n                row.push(new Int32Array(64));\n              blocks.push(row);\n            }\n            component.blocksPerLine = blocksPerLine;\n            component.blocksPerColumn = blocksPerColumn;\n            component.blocks = blocks;\n          }\n        }\n        frame.maxH = maxH;\n        frame.maxV = maxV;\n        frame.mcusPerLine = mcusPerLine;\n        frame.mcusPerColumn = mcusPerColumn;\n      }\n      var jfif = null;\n      var adobe = null;\n      var pixels = null;\n      var frame, resetInterval;\n      var quantizationTables = [], frames = [];\n      var huffmanTablesAC = [], huffmanTablesDC = [];\n      var fileMarker = readUint16();\n      if (fileMarker != 0xFFD8) { // SOI (Start of Image)\n        throw new Error(\"SOI not found\");\n      }\n\n      fileMarker = readUint16();\n      while (fileMarker != 0xFFD9) { // EOI (End of image)\n        var i, j, l;\n        switch(fileMarker) {\n          case 0xFF00: break;\n          case 0xFFE0: // APP0 (Application Specific)\n          case 0xFFE1: // APP1\n          case 0xFFE2: // APP2\n          case 0xFFE3: // APP3\n          case 0xFFE4: // APP4\n          case 0xFFE5: // APP5\n          case 0xFFE6: // APP6\n          case 0xFFE7: // APP7\n          case 0xFFE8: // APP8\n          case 0xFFE9: // APP9\n          case 0xFFEA: // APP10\n          case 0xFFEB: // APP11\n          case 0xFFEC: // APP12\n          case 0xFFED: // APP13\n          case 0xFFEE: // APP14\n          case 0xFFEF: // APP15\n          case 0xFFFE: // COM (Comment)\n            var appData = readDataBlock();\n\n            if (fileMarker === 0xFFE0) {\n              if (appData[0] === 0x4A && appData[1] === 0x46 && appData[2] === 0x49 &&\n                appData[3] === 0x46 && appData[4] === 0) { // 'JFIF\\x00'\n                jfif = {\n                  version: { major: appData[5], minor: appData[6] },\n                  densityUnits: appData[7],\n                  xDensity: (appData[8] << 8) | appData[9],\n                  yDensity: (appData[10] << 8) | appData[11],\n                  thumbWidth: appData[12],\n                  thumbHeight: appData[13],\n                  thumbData: appData.subarray(14, 14 + 3 * appData[12] * appData[13])\n                };\n              }\n            }\n            // TODO APP1 - Exif\n            if (fileMarker === 0xFFEE) {\n              if (appData[0] === 0x41 && appData[1] === 0x64 && appData[2] === 0x6F &&\n                appData[3] === 0x62 && appData[4] === 0x65 && appData[5] === 0) { // 'Adobe\\x00'\n                adobe = {\n                  version: appData[6],\n                  flags0: (appData[7] << 8) | appData[8],\n                  flags1: (appData[9] << 8) | appData[10],\n                  transformCode: appData[11]\n                };\n              }\n            }\n            break;\n\n          case 0xFFDB: // DQT (Define Quantization Tables)\n            var quantizationTablesLength = readUint16();\n            var quantizationTablesEnd = quantizationTablesLength + offset - 2;\n            while (offset < quantizationTablesEnd) {\n              var quantizationTableSpec = data[offset++];\n              var tableData = new Int32Array(64);\n              if ((quantizationTableSpec >> 4) === 0) { // 8 bit values\n                for (j = 0; j < 64; j++) {\n                  var z = dctZigZag[j];\n                  tableData[z] = data[offset++];\n                }\n              } else if ((quantizationTableSpec >> 4) === 1) { //16 bit\n                for (j = 0; j < 64; j++) {\n                  var z = dctZigZag[j];\n                  tableData[z] = readUint16();\n                }\n              } else\n                throw new Error(\"DQT: invalid table spec\");\n              quantizationTables[quantizationTableSpec & 15] = tableData;\n            }\n            break;\n\n          case 0xFFC0: // SOF0 (Start of Frame, Baseline DCT)\n          case 0xFFC1: // SOF1 (Start of Frame, Extended DCT)\n          case 0xFFC2: // SOF2 (Start of Frame, Progressive DCT)\n            readUint16(); // skip data length\n            frame = {};\n            frame.extended = (fileMarker === 0xFFC1);\n            frame.progressive = (fileMarker === 0xFFC2);\n            frame.precision = data[offset++];\n            frame.scanLines = readUint16();\n            frame.samplesPerLine = readUint16();\n            frame.components = {};\n            frame.componentsOrder = [];\n            var componentsCount = data[offset++], componentId;\n            var maxH = 0, maxV = 0;\n            for (i = 0; i < componentsCount; i++) {\n              componentId = data[offset];\n              var h = data[offset + 1] >> 4;\n              var v = data[offset + 1] & 15;\n              var qId = data[offset + 2];\n              frame.componentsOrder.push(componentId);\n              frame.components[componentId] = {\n                h: h,\n                v: v,\n                quantizationIdx: qId\n              };\n              offset += 3;\n            }\n            prepareComponents(frame);\n            frames.push(frame);\n            break;\n\n          case 0xFFC4: // DHT (Define Huffman Tables)\n            var huffmanLength = readUint16();\n            for (i = 2; i < huffmanLength;) {\n              var huffmanTableSpec = data[offset++];\n              var codeLengths = new Uint8Array(16);\n              var codeLengthSum = 0;\n              for (j = 0; j < 16; j++, offset++)\n                codeLengthSum += (codeLengths[j] = data[offset]);\n              var huffmanValues = new Uint8Array(codeLengthSum);\n              for (j = 0; j < codeLengthSum; j++, offset++)\n                huffmanValues[j] = data[offset];\n              i += 17 + codeLengthSum;\n\n              ((huffmanTableSpec >> 4) === 0 ?\n                huffmanTablesDC : huffmanTablesAC)[huffmanTableSpec & 15] =\n                buildHuffmanTable(codeLengths, huffmanValues);\n            }\n            break;\n\n          case 0xFFDD: // DRI (Define Restart Interval)\n            readUint16(); // skip data length\n            resetInterval = readUint16();\n            break;\n\n          case 0xFFDA: // SOS (Start of Scan)\n            var scanLength = readUint16();\n            var selectorsCount = data[offset++];\n            var components = [], component;\n            for (i = 0; i < selectorsCount; i++) {\n              component = frame.components[data[offset++]];\n              var tableSpec = data[offset++];\n              component.huffmanTableDC = huffmanTablesDC[tableSpec >> 4];\n              component.huffmanTableAC = huffmanTablesAC[tableSpec & 15];\n              components.push(component);\n            }\n            var spectralStart = data[offset++];\n            var spectralEnd = data[offset++];\n            var successiveApproximation = data[offset++];\n            var processed = decodeScan(data, offset,\n              frame, components, resetInterval,\n              spectralStart, spectralEnd,\n              successiveApproximation >> 4, successiveApproximation & 15);\n            offset += processed;\n            break;\n\n          case 0xFFFF: // Fill bytes\n            if (data[offset] !== 0xFF) { // Avoid skipping a valid marker.\n              offset--;\n            }\n            break;\n\n          default:\n            if (data[offset - 3] == 0xFF &&\n                data[offset - 2] >= 0xC0 && data[offset - 2] <= 0xFE) {\n              // could be incorrect encoding -- last 0xFF byte of the previous\n              // block was eaten by the encoder\n              offset -= 3;\n              break;\n            }\n            throw new Error(\"unknown JPEG marker \" + fileMarker.toString(16));\n        }\n        fileMarker = readUint16();\n      }\n      if (frames.length != 1)\n        throw new Error(\"only single frame JPEGs supported\");\n\n      // set each frame's components quantization table\n      for (var i = 0; i < frames.length; i++) {\n        var cp = frames[i].components;\n        for (var j in cp) {\n          cp[j].quantizationTable = quantizationTables[cp[j].quantizationIdx];\n          delete cp[j].quantizationIdx;\n        }\n      }\n\n      this.width = frame.samplesPerLine;\n      this.height = frame.scanLines;\n      this.jfif = jfif;\n      this.adobe = adobe;\n      this.components = [];\n      for (var i = 0; i < frame.componentsOrder.length; i++) {\n        var component = frame.components[frame.componentsOrder[i]];\n        this.components.push({\n          lines: buildComponentData(frame, component),\n          scaleX: component.h / frame.maxH,\n          scaleY: component.v / frame.maxV\n        });\n      }\n    },\n    getData: function getData(width, height) {\n      var scaleX = this.width / width, scaleY = this.height / height;\n\n      var component1, component2, component3, component4;\n      var component1Line, component2Line, component3Line, component4Line;\n      var x, y;\n      var offset = 0;\n      var Y, Cb, Cr, K, C, M, Ye, R, G, B;\n      var colorTransform;\n      var dataLength = width * height * this.components.length;\n      var data = new Uint8Array(dataLength);\n      switch (this.components.length) {\n        case 1:\n          component1 = this.components[0];\n          for (y = 0; y < height; y++) {\n            component1Line = component1.lines[0 | (y * component1.scaleY * scaleY)];\n            for (x = 0; x < width; x++) {\n              Y = component1Line[0 | (x * component1.scaleX * scaleX)];\n\n              data[offset++] = Y;\n            }\n          }\n          break;\n        case 2:\n          // PDF might compress two component data in custom colorspace\n          component1 = this.components[0];\n          component2 = this.components[1];\n          for (y = 0; y < height; y++) {\n            component1Line = component1.lines[0 | (y * component1.scaleY * scaleY)];\n            component2Line = component2.lines[0 | (y * component2.scaleY * scaleY)];\n            for (x = 0; x < width; x++) {\n              Y = component1Line[0 | (x * component1.scaleX * scaleX)];\n              data[offset++] = Y;\n              Y = component2Line[0 | (x * component2.scaleX * scaleX)];\n              data[offset++] = Y;\n            }\n          }\n          break;\n        case 3:\n          // The default transform for three components is true\n          colorTransform = true;\n          // The adobe transform marker overrides any previous setting\n          if (this.adobe && this.adobe.transformCode)\n            colorTransform = true;\n          else if (typeof this.colorTransform !== 'undefined')\n            colorTransform = !!this.colorTransform;\n\n          component1 = this.components[0];\n          component2 = this.components[1];\n          component3 = this.components[2];\n          for (y = 0; y < height; y++) {\n            component1Line = component1.lines[0 | (y * component1.scaleY * scaleY)];\n            component2Line = component2.lines[0 | (y * component2.scaleY * scaleY)];\n            component3Line = component3.lines[0 | (y * component3.scaleY * scaleY)];\n            for (x = 0; x < width; x++) {\n              if (!colorTransform) {\n                R = component1Line[0 | (x * component1.scaleX * scaleX)];\n                G = component2Line[0 | (x * component2.scaleX * scaleX)];\n                B = component3Line[0 | (x * component3.scaleX * scaleX)];\n              } else {\n                Y = component1Line[0 | (x * component1.scaleX * scaleX)];\n                Cb = component2Line[0 | (x * component2.scaleX * scaleX)];\n                Cr = component3Line[0 | (x * component3.scaleX * scaleX)];\n\n                R = clampTo8bit(Y + 1.402 * (Cr - 128));\n                G = clampTo8bit(Y - 0.3441363 * (Cb - 128) - 0.71413636 * (Cr - 128));\n                B = clampTo8bit(Y + 1.772 * (Cb - 128));\n              }\n\n              data[offset++] = R;\n              data[offset++] = G;\n              data[offset++] = B;\n            }\n          }\n          break;\n        case 4:\n          if (!this.adobe)\n            throw new Error('Unsupported color mode (4 components)');\n          // The default transform for four components is false\n          colorTransform = false;\n          // The adobe transform marker overrides any previous setting\n          if (this.adobe && this.adobe.transformCode)\n            colorTransform = true;\n          else if (typeof this.colorTransform !== 'undefined')\n            colorTransform = !!this.colorTransform;\n\n          component1 = this.components[0];\n          component2 = this.components[1];\n          component3 = this.components[2];\n          component4 = this.components[3];\n          for (y = 0; y < height; y++) {\n            component1Line = component1.lines[0 | (y * component1.scaleY * scaleY)];\n            component2Line = component2.lines[0 | (y * component2.scaleY * scaleY)];\n            component3Line = component3.lines[0 | (y * component3.scaleY * scaleY)];\n            component4Line = component4.lines[0 | (y * component4.scaleY * scaleY)];\n            for (x = 0; x < width; x++) {\n              if (!colorTransform) {\n                C = component1Line[0 | (x * component1.scaleX * scaleX)];\n                M = component2Line[0 | (x * component2.scaleX * scaleX)];\n                Ye = component3Line[0 | (x * component3.scaleX * scaleX)];\n                K = component4Line[0 | (x * component4.scaleX * scaleX)];\n              } else {\n                Y = component1Line[0 | (x * component1.scaleX * scaleX)];\n                Cb = component2Line[0 | (x * component2.scaleX * scaleX)];\n                Cr = component3Line[0 | (x * component3.scaleX * scaleX)];\n                K = component4Line[0 | (x * component4.scaleX * scaleX)];\n\n                C = 255 - clampTo8bit(Y + 1.402 * (Cr - 128));\n                M = 255 - clampTo8bit(Y - 0.3441363 * (Cb - 128) - 0.71413636 * (Cr - 128));\n                Ye = 255 - clampTo8bit(Y + 1.772 * (Cb - 128));\n              }\n              data[offset++] = 255-C;\n              data[offset++] = 255-M;\n              data[offset++] = 255-Ye;\n              data[offset++] = 255-K;\n            }\n          }\n          break;\n        default:\n          throw new Error('Unsupported color mode');\n      }\n      return data;\n    },\n    copyToImageData: function copyToImageData(imageData, formatAsRGBA) {\n      var width = imageData.width, height = imageData.height;\n      var imageDataArray = imageData.data;\n      var data = this.getData(width, height);\n      var i = 0, j = 0, x, y;\n      var Y, K, C, M, R, G, B;\n      switch (this.components.length) {\n        case 1:\n          for (y = 0; y < height; y++) {\n            for (x = 0; x < width; x++) {\n              Y = data[i++];\n\n              imageDataArray[j++] = Y;\n              imageDataArray[j++] = Y;\n              imageDataArray[j++] = Y;\n              if (formatAsRGBA) {\n                imageDataArray[j++] = 255;\n              }\n            }\n          }\n          break;\n        case 3:\n          for (y = 0; y < height; y++) {\n            for (x = 0; x < width; x++) {\n              R = data[i++];\n              G = data[i++];\n              B = data[i++];\n\n              imageDataArray[j++] = R;\n              imageDataArray[j++] = G;\n              imageDataArray[j++] = B;\n              if (formatAsRGBA) {\n                imageDataArray[j++] = 255;\n              }\n            }\n          }\n          break;\n        case 4:\n          for (y = 0; y < height; y++) {\n            for (x = 0; x < width; x++) {\n              C = data[i++];\n              M = data[i++];\n              Y = data[i++];\n              K = data[i++];\n\n              R = 255 - clampTo8bit(C * (1 - K / 255) + K);\n              G = 255 - clampTo8bit(M * (1 - K / 255) + K);\n              B = 255 - clampTo8bit(Y * (1 - K / 255) + K);\n\n              imageDataArray[j++] = R;\n              imageDataArray[j++] = G;\n              imageDataArray[j++] = B;\n              if (formatAsRGBA) {\n                imageDataArray[j++] = 255;\n              }\n            }\n          }\n          break;\n        default:\n          throw new Error('Unsupported color mode');\n      }\n    }\n  };\n\n  return constructor;\n})();\nmodule.exports = decode;\n\nfunction decode(jpegData, opts) {\n  var defaultOpts = {\n    useTArray: false,\n    // \"undefined\" means \"Choose whether to transform colors based on the image\u2019s color model.\"\n    colorTransform: undefined,\n    formatAsRGBA: true\n  };\n  if (opts) {\n    if (typeof opts === 'object') {\n      opts = {\n        useTArray: (typeof opts.useTArray === 'undefined' ?\n                    defaultOpts.useTArray : opts.useTArray),\n        colorTransform: (typeof opts.colorTransform === 'undefined' ?\n                         defaultOpts.colorTransform : opts.colorTransform),\n        formatAsRGBA: (typeof opts.formatAsRGBA === 'undefined' ?\n                         defaultOpts.formatAsRGBA : opts.formatAsRGBA)\n      };\n    } else {\n      // backwards compatiblity, before 0.3.5, we only had the useTArray param\n      opts = defaultOpts;\n      opts.useTArray = true;\n    }\n  } else {\n    opts = defaultOpts;\n  }\n\n  var arr = new Uint8Array(jpegData);\n  var decoder = new JpegImage();\n  decoder.parse(arr);\n  decoder.colorTransform = opts.colorTransform;\n\n  var channels = (opts.formatAsRGBA) ? 4 : 3;\n  var bytesNeeded = decoder.width * decoder.height * channels;\n  try {\n    var image = {\n      width: decoder.width,\n      height: decoder.height,\n      data: opts.useTArray ?\n        new Uint8Array(bytesNeeded) :\n        new Buffer(bytesNeeded)\n    };\n  } catch (err){\n    if (err instanceof RangeError){\n      throw new Error(\"Could not allocate enough memory for the image. \" +\n                      \"Required: \" + bytesNeeded);\n    } else {\n      throw err;\n    }\n  }\n\n  decoder.copyToImageData(image, opts.formatAsRGBA);\n\n  return image;\n}\n", "var encode = require('./lib/encoder'),\n    decode = require('./lib/decoder');\n\nmodule.exports = {\n  encode: encode,\n  decode: decode\n};\n", "module.exports=require('cwise-compiler')({\"args\":[\"array\",\"scalar\",\"index\"],\"pre\":{\"body\":\"{}\",\"args\":[],\"thisVars\":[],\"localVars\":[]},\"body\":{\"body\":\"{\\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\\n}\\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\\n}\",\"args\":[{\"name\":\"_inline_1_arg0_\",\"lvalue\":true,\"rvalue\":false,\"count\":1},{\"name\":\"_inline_1_arg1_\",\"lvalue\":false,\"rvalue\":true,\"count\":1},{\"name\":\"_inline_1_arg2_\",\"lvalue\":false,\"rvalue\":true,\"count\":4}],\"thisVars\":[],\"localVars\":[\"_inline_1_i\",\"_inline_1_v\"]},\"post\":{\"body\":\"{}\",\"args\":[],\"thisVars\":[],\"localVars\":[]},\"funcName\":\"convert\",\"blockSize\":64})\n", "\"use strict\"\n\nvar ndarray = require(\"ndarray\")\nvar do_convert = require(\"./doConvert.js\")\n\nmodule.exports = function convert(arr, result) {\n  var shape = [], c = arr, sz = 1\n  while(Array.isArray(c)) {\n    shape.push(c.length)\n    sz *= c.length\n    c = c[0]\n  }\n  if(shape.length === 0) {\n    return ndarray()\n  }\n  if(!result) {\n    result = ndarray(new Float64Array(sz), shape)\n  }\n  do_convert(result, arr)\n  return result\n}\n", "// (c) Dean McNamee <dean@gmail.com>, 2013.\n//\n// https://github.com/deanm/omggif\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n// IN THE SOFTWARE.\n//\n// omggif is a JavaScript implementation of a GIF 89a encoder and decoder,\n// including animation and compression.  It does not rely on any specific\n// underlying system, so should run in the browser, Node, or Plask.\n\n\"use strict\";\n\nfunction GifWriter(buf, width, height, gopts) {\n  var p = 0;\n\n  var gopts = gopts === undefined ? { } : gopts;\n  var loop_count = gopts.loop === undefined ? null : gopts.loop;\n  var global_palette = gopts.palette === undefined ? null : gopts.palette;\n\n  if (width <= 0 || height <= 0 || width > 65535 || height > 65535)\n    throw new Error(\"Width/Height invalid.\");\n\n  function check_palette_and_num_colors(palette) {\n    var num_colors = palette.length;\n    if (num_colors < 2 || num_colors > 256 ||  num_colors & (num_colors-1)) {\n      throw new Error(\n          \"Invalid code/color length, must be power of 2 and 2 .. 256.\");\n    }\n    return num_colors;\n  }\n\n  // - Header.\n  buf[p++] = 0x47; buf[p++] = 0x49; buf[p++] = 0x46;  // GIF\n  buf[p++] = 0x38; buf[p++] = 0x39; buf[p++] = 0x61;  // 89a\n\n  // Handling of Global Color Table (palette) and background index.\n  var gp_num_colors_pow2 = 0;\n  var background = 0;\n  if (global_palette !== null) {\n    var gp_num_colors = check_palette_and_num_colors(global_palette);\n    while (gp_num_colors >>= 1) ++gp_num_colors_pow2;\n    gp_num_colors = 1 << gp_num_colors_pow2;\n    --gp_num_colors_pow2;\n    if (gopts.background !== undefined) {\n      background = gopts.background;\n      if (background >= gp_num_colors)\n        throw new Error(\"Background index out of range.\");\n      // The GIF spec states that a background index of 0 should be ignored, so\n      // this is probably a mistake and you really want to set it to another\n      // slot in the palette.  But actually in the end most browsers, etc end\n      // up ignoring this almost completely (including for dispose background).\n      if (background === 0)\n        throw new Error(\"Background index explicitly passed as 0.\");\n    }\n  }\n\n  // - Logical Screen Descriptor.\n  // NOTE(deanm): w/h apparently ignored by implementations, but set anyway.\n  buf[p++] = width & 0xff; buf[p++] = width >> 8 & 0xff;\n  buf[p++] = height & 0xff; buf[p++] = height >> 8 & 0xff;\n  // NOTE: Indicates 0-bpp original color resolution (unused?).\n  buf[p++] = (global_palette !== null ? 0x80 : 0) |  // Global Color Table Flag.\n             gp_num_colors_pow2;  // NOTE: No sort flag (unused?).\n  buf[p++] = background;  // Background Color Index.\n  buf[p++] = 0;  // Pixel aspect ratio (unused?).\n\n  // - Global Color Table\n  if (global_palette !== null) {\n    for (var i = 0, il = global_palette.length; i < il; ++i) {\n      var rgb = global_palette[i];\n      buf[p++] = rgb >> 16 & 0xff;\n      buf[p++] = rgb >> 8 & 0xff;\n      buf[p++] = rgb & 0xff;\n    }\n  }\n\n  if (loop_count !== null) {  // Netscape block for looping.\n    if (loop_count < 0 || loop_count > 65535)\n      throw new Error(\"Loop count invalid.\")\n    // Extension code, label, and length.\n    buf[p++] = 0x21; buf[p++] = 0xff; buf[p++] = 0x0b;\n    // NETSCAPE2.0\n    buf[p++] = 0x4e; buf[p++] = 0x45; buf[p++] = 0x54; buf[p++] = 0x53;\n    buf[p++] = 0x43; buf[p++] = 0x41; buf[p++] = 0x50; buf[p++] = 0x45;\n    buf[p++] = 0x32; buf[p++] = 0x2e; buf[p++] = 0x30;\n    // Sub-block\n    buf[p++] = 0x03; buf[p++] = 0x01;\n    buf[p++] = loop_count & 0xff; buf[p++] = loop_count >> 8 & 0xff;\n    buf[p++] = 0x00;  // Terminator.\n  }\n\n\n  var ended = false;\n\n  this.addFrame = function(x, y, w, h, indexed_pixels, opts) {\n    if (ended === true) { --p; ended = false; }  // Un-end.\n\n    opts = opts === undefined ? { } : opts;\n\n    // TODO(deanm): Bounds check x, y.  Do they need to be within the virtual\n    // canvas width/height, I imagine?\n    if (x < 0 || y < 0 || x > 65535 || y > 65535)\n      throw new Error(\"x/y invalid.\")\n\n    if (w <= 0 || h <= 0 || w > 65535 || h > 65535)\n      throw new Error(\"Width/Height invalid.\")\n\n    if (indexed_pixels.length < w * h)\n      throw new Error(\"Not enough pixels for the frame size.\");\n\n    var using_local_palette = true;\n    var palette = opts.palette;\n    if (palette === undefined || palette === null) {\n      using_local_palette = false;\n      palette = global_palette;\n    }\n\n    if (palette === undefined || palette === null)\n      throw new Error(\"Must supply either a local or global palette.\");\n\n    var num_colors = check_palette_and_num_colors(palette);\n\n    // Compute the min_code_size (power of 2), destroying num_colors.\n    var min_code_size = 0;\n    while (num_colors >>= 1) ++min_code_size;\n    num_colors = 1 << min_code_size;  // Now we can easily get it back.\n\n    var delay = opts.delay === undefined ? 0 : opts.delay;\n\n    // From the spec:\n    //     0 -   No disposal specified. The decoder is\n    //           not required to take any action.\n    //     1 -   Do not dispose. The graphic is to be left\n    //           in place.\n    //     2 -   Restore to background color. The area used by the\n    //           graphic must be restored to the background color.\n    //     3 -   Restore to previous. The decoder is required to\n    //           restore the area overwritten by the graphic with\n    //           what was there prior to rendering the graphic.\n    //  4-7 -    To be defined.\n    // NOTE(deanm): Dispose background doesn't really work, apparently most\n    // browsers ignore the background palette index and clear to transparency.\n    var disposal = opts.disposal === undefined ? 0 : opts.disposal;\n    if (disposal < 0 || disposal > 3)  // 4-7 is reserved.\n      throw new Error(\"Disposal out of range.\");\n\n    var use_transparency = false;\n    var transparent_index = 0;\n    if (opts.transparent !== undefined && opts.transparent !== null) {\n      use_transparency = true;\n      transparent_index = opts.transparent;\n      if (transparent_index < 0 || transparent_index >= num_colors)\n        throw new Error(\"Transparent color index.\");\n    }\n\n    if (disposal !== 0 || use_transparency || delay !== 0) {\n      // - Graphics Control Extension\n      buf[p++] = 0x21; buf[p++] = 0xf9;  // Extension / Label.\n      buf[p++] = 4;  // Byte size.\n\n      buf[p++] = disposal << 2 | (use_transparency === true ? 1 : 0);\n      buf[p++] = delay & 0xff; buf[p++] = delay >> 8 & 0xff;\n      buf[p++] = transparent_index;  // Transparent color index.\n      buf[p++] = 0;  // Block Terminator.\n    }\n\n    // - Image Descriptor\n    buf[p++] = 0x2c;  // Image Seperator.\n    buf[p++] = x & 0xff; buf[p++] = x >> 8 & 0xff;  // Left.\n    buf[p++] = y & 0xff; buf[p++] = y >> 8 & 0xff;  // Top.\n    buf[p++] = w & 0xff; buf[p++] = w >> 8 & 0xff;\n    buf[p++] = h & 0xff; buf[p++] = h >> 8 & 0xff;\n    // NOTE: No sort flag (unused?).\n    // TODO(deanm): Support interlace.\n    buf[p++] = using_local_palette === true ? (0x80 | (min_code_size-1)) : 0;\n\n    // - Local Color Table\n    if (using_local_palette === true) {\n      for (var i = 0, il = palette.length; i < il; ++i) {\n        var rgb = palette[i];\n        buf[p++] = rgb >> 16 & 0xff;\n        buf[p++] = rgb >> 8 & 0xff;\n        buf[p++] = rgb & 0xff;\n      }\n    }\n\n    p = GifWriterOutputLZWCodeStream(\n            buf, p, min_code_size < 2 ? 2 : min_code_size, indexed_pixels);\n\n    return p;\n  };\n\n  this.end = function() {\n    if (ended === false) {\n      buf[p++] = 0x3b;  // Trailer.\n      ended = true;\n    }\n    return p;\n  };\n\n  this.getOutputBuffer = function() { return buf; };\n  this.setOutputBuffer = function(v) { buf = v; };\n  this.getOutputBufferPosition = function() { return p; };\n  this.setOutputBufferPosition = function(v) { p = v; };\n}\n\n// Main compression routine, palette indexes -> LZW code stream.\n// |index_stream| must have at least one entry.\nfunction GifWriterOutputLZWCodeStream(buf, p, min_code_size, index_stream) {\n  buf[p++] = min_code_size;\n  var cur_subblock = p++;  // Pointing at the length field.\n\n  var clear_code = 1 << min_code_size;\n  var code_mask = clear_code - 1;\n  var eoi_code = clear_code + 1;\n  var next_code = eoi_code + 1;\n\n  var cur_code_size = min_code_size + 1;  // Number of bits per code.\n  var cur_shift = 0;\n  // We have at most 12-bit codes, so we should have to hold a max of 19\n  // bits here (and then we would write out).\n  var cur = 0;\n\n  function emit_bytes_to_buffer(bit_block_size) {\n    while (cur_shift >= bit_block_size) {\n      buf[p++] = cur & 0xff;\n      cur >>= 8; cur_shift -= 8;\n      if (p === cur_subblock + 256) {  // Finished a subblock.\n        buf[cur_subblock] = 255;\n        cur_subblock = p++;\n      }\n    }\n  }\n\n  function emit_code(c) {\n    cur |= c << cur_shift;\n    cur_shift += cur_code_size;\n    emit_bytes_to_buffer(8);\n  }\n\n  // I am not an expert on the topic, and I don't want to write a thesis.\n  // However, it is good to outline here the basic algorithm and the few data\n  // structures and optimizations here that make this implementation fast.\n  // The basic idea behind LZW is to build a table of previously seen runs\n  // addressed by a short id (herein called output code).  All data is\n  // referenced by a code, which represents one or more values from the\n  // original input stream.  All input bytes can be referenced as the same\n  // value as an output code.  So if you didn't want any compression, you\n  // could more or less just output the original bytes as codes (there are\n  // some details to this, but it is the idea).  In order to achieve\n  // compression, values greater then the input range (codes can be up to\n  // 12-bit while input only 8-bit) represent a sequence of previously seen\n  // inputs.  The decompressor is able to build the same mapping while\n  // decoding, so there is always a shared common knowledge between the\n  // encoding and decoder, which is also important for \"timing\" aspects like\n  // how to handle variable bit width code encoding.\n  //\n  // One obvious but very important consequence of the table system is there\n  // is always a unique id (at most 12-bits) to map the runs.  'A' might be\n  // 4, then 'AA' might be 10, 'AAA' 11, 'AAAA' 12, etc.  This relationship\n  // can be used for an effecient lookup strategy for the code mapping.  We\n  // need to know if a run has been seen before, and be able to map that run\n  // to the output code.  Since we start with known unique ids (input bytes),\n  // and then from those build more unique ids (table entries), we can\n  // continue this chain (almost like a linked list) to always have small\n  // integer values that represent the current byte chains in the encoder.\n  // This means instead of tracking the input bytes (AAAABCD) to know our\n  // current state, we can track the table entry for AAAABC (it is guaranteed\n  // to exist by the nature of the algorithm) and the next character D.\n  // Therefor the tuple of (table_entry, byte) is guaranteed to also be\n  // unique.  This allows us to create a simple lookup key for mapping input\n  // sequences to codes (table indices) without having to store or search\n  // any of the code sequences.  So if 'AAAA' has a table entry of 12, the\n  // tuple of ('AAAA', K) for any input byte K will be unique, and can be our\n  // key.  This leads to a integer value at most 20-bits, which can always\n  // fit in an SMI value and be used as a fast sparse array / object key.\n\n  // Output code for the current contents of the index buffer.\n  var ib_code = index_stream[0] & code_mask;  // Load first input index.\n  var code_table = { };  // Key'd on our 20-bit \"tuple\".\n\n  emit_code(clear_code);  // Spec says first code should be a clear code.\n\n  // First index already loaded, process the rest of the stream.\n  for (var i = 1, il = index_stream.length; i < il; ++i) {\n    var k = index_stream[i] & code_mask;\n    var cur_key = ib_code << 8 | k;  // (prev, k) unique tuple.\n    var cur_code = code_table[cur_key];  // buffer + k.\n\n    // Check if we have to create a new code table entry.\n    if (cur_code === undefined) {  // We don't have buffer + k.\n      // Emit index buffer (without k).\n      // This is an inline version of emit_code, because this is the core\n      // writing routine of the compressor (and V8 cannot inline emit_code\n      // because it is a closure here in a different context).  Additionally\n      // we can call emit_byte_to_buffer less often, because we can have\n      // 30-bits (from our 31-bit signed SMI), and we know our codes will only\n      // be 12-bits, so can safely have 18-bits there without overflow.\n      // emit_code(ib_code);\n      cur |= ib_code << cur_shift;\n      cur_shift += cur_code_size;\n      while (cur_shift >= 8) {\n        buf[p++] = cur & 0xff;\n        cur >>= 8; cur_shift -= 8;\n        if (p === cur_subblock + 256) {  // Finished a subblock.\n          buf[cur_subblock] = 255;\n          cur_subblock = p++;\n        }\n      }\n\n      if (next_code === 4096) {  // Table full, need a clear.\n        emit_code(clear_code);\n        next_code = eoi_code + 1;\n        cur_code_size = min_code_size + 1;\n        code_table = { };\n      } else {  // Table not full, insert a new entry.\n        // Increase our variable bit code sizes if necessary.  This is a bit\n        // tricky as it is based on \"timing\" between the encoding and\n        // decoder.  From the encoders perspective this should happen after\n        // we've already emitted the index buffer and are about to create the\n        // first table entry that would overflow our current code bit size.\n        if (next_code >= (1 << cur_code_size)) ++cur_code_size;\n        code_table[cur_key] = next_code++;  // Insert into code table.\n      }\n\n      ib_code = k;  // Index buffer to single input k.\n    } else {\n      ib_code = cur_code;  // Index buffer to sequence in code table.\n    }\n  }\n\n  emit_code(ib_code);  // There will still be something in the index buffer.\n  emit_code(eoi_code);  // End Of Information.\n\n  // Flush / finalize the sub-blocks stream to the buffer.\n  emit_bytes_to_buffer(1);\n\n  // Finish the sub-blocks, writing out any unfinished lengths and\n  // terminating with a sub-block of length 0.  If we have already started\n  // but not yet used a sub-block it can just become the terminator.\n  if (cur_subblock + 1 === p) {  // Started but unused.\n    buf[cur_subblock] = 0;\n  } else {  // Started and used, write length and additional terminator block.\n    buf[cur_subblock] = p - cur_subblock - 1;\n    buf[p++] = 0;\n  }\n  return p;\n}\n\nfunction GifReader(buf) {\n  var p = 0;\n\n  // - Header (GIF87a or GIF89a).\n  if (buf[p++] !== 0x47 ||            buf[p++] !== 0x49 || buf[p++] !== 0x46 ||\n      buf[p++] !== 0x38 || (buf[p++]+1 & 0xfd) !== 0x38 || buf[p++] !== 0x61) {\n    throw new Error(\"Invalid GIF 87a/89a header.\");\n  }\n\n  // - Logical Screen Descriptor.\n  var width = buf[p++] | buf[p++] << 8;\n  var height = buf[p++] | buf[p++] << 8;\n  var pf0 = buf[p++];  // <Packed Fields>.\n  var global_palette_flag = pf0 >> 7;\n  var num_global_colors_pow2 = pf0 & 0x7;\n  var num_global_colors = 1 << (num_global_colors_pow2 + 1);\n  var background = buf[p++];\n  buf[p++];  // Pixel aspect ratio (unused?).\n\n  var global_palette_offset = null;\n  var global_palette_size   = null;\n\n  if (global_palette_flag) {\n    global_palette_offset = p;\n    global_palette_size = num_global_colors;\n    p += num_global_colors * 3;  // Seek past palette.\n  }\n\n  var no_eof = true;\n\n  var frames = [ ];\n\n  var delay = 0;\n  var transparent_index = null;\n  var disposal = 0;  // 0 - No disposal specified.\n  var loop_count = null;\n\n  this.width = width;\n  this.height = height;\n\n  while (no_eof && p < buf.length) {\n    switch (buf[p++]) {\n      case 0x21:  // Graphics Control Extension Block\n        switch (buf[p++]) {\n          case 0xff:  // Application specific block\n            // Try if it's a Netscape block (with animation loop counter).\n            if (buf[p   ] !== 0x0b ||  // 21 FF already read, check block size.\n                // NETSCAPE2.0\n                buf[p+1 ] == 0x4e && buf[p+2 ] == 0x45 && buf[p+3 ] == 0x54 &&\n                buf[p+4 ] == 0x53 && buf[p+5 ] == 0x43 && buf[p+6 ] == 0x41 &&\n                buf[p+7 ] == 0x50 && buf[p+8 ] == 0x45 && buf[p+9 ] == 0x32 &&\n                buf[p+10] == 0x2e && buf[p+11] == 0x30 &&\n                // Sub-block\n                buf[p+12] == 0x03 && buf[p+13] == 0x01 && buf[p+16] == 0) {\n              p += 14;\n              loop_count = buf[p++] | buf[p++] << 8;\n              p++;  // Skip terminator.\n            } else {  // We don't know what it is, just try to get past it.\n              p += 12;\n              while (true) {  // Seek through subblocks.\n                var block_size = buf[p++];\n                // Bad block size (ex: undefined from an out of bounds read).\n                if (!(block_size >= 0)) throw Error(\"Invalid block size\");\n                if (block_size === 0) break;  // 0 size is terminator\n                p += block_size;\n              }\n            }\n            break;\n\n          case 0xf9:  // Graphics Control Extension\n            if (buf[p++] !== 0x4 || buf[p+4] !== 0)\n              throw new Error(\"Invalid graphics extension block.\");\n            var pf1 = buf[p++];\n            delay = buf[p++] | buf[p++] << 8;\n            transparent_index = buf[p++];\n            if ((pf1 & 1) === 0) transparent_index = null;\n            disposal = pf1 >> 2 & 0x7;\n            p++;  // Skip terminator.\n            break;\n\n          case 0xfe:  // Comment Extension.\n            while (true) {  // Seek through subblocks.\n              var block_size = buf[p++];\n              // Bad block size (ex: undefined from an out of bounds read).\n              if (!(block_size >= 0)) throw Error(\"Invalid block size\");\n              if (block_size === 0) break;  // 0 size is terminator\n              // console.log(buf.slice(p, p+block_size).toString('ascii'));\n              p += block_size;\n            }\n            break;\n\n          default:\n            throw new Error(\n                \"Unknown graphic control label: 0x\" + buf[p-1].toString(16));\n        }\n        break;\n\n      case 0x2c:  // Image Descriptor.\n        var x = buf[p++] | buf[p++] << 8;\n        var y = buf[p++] | buf[p++] << 8;\n        var w = buf[p++] | buf[p++] << 8;\n        var h = buf[p++] | buf[p++] << 8;\n        var pf2 = buf[p++];\n        var local_palette_flag = pf2 >> 7;\n        var interlace_flag = pf2 >> 6 & 1;\n        var num_local_colors_pow2 = pf2 & 0x7;\n        var num_local_colors = 1 << (num_local_colors_pow2 + 1);\n        var palette_offset = global_palette_offset;\n        var palette_size = global_palette_size;\n        var has_local_palette = false;\n        if (local_palette_flag) {\n          var has_local_palette = true;\n          palette_offset = p;  // Override with local palette.\n          palette_size = num_local_colors;\n          p += num_local_colors * 3;  // Seek past palette.\n        }\n\n        var data_offset = p;\n\n        p++;  // codesize\n        while (true) {\n          var block_size = buf[p++];\n          // Bad block size (ex: undefined from an out of bounds read).\n          if (!(block_size >= 0)) throw Error(\"Invalid block size\");\n          if (block_size === 0) break;  // 0 size is terminator\n          p += block_size;\n        }\n\n        frames.push({x: x, y: y, width: w, height: h,\n                     has_local_palette: has_local_palette,\n                     palette_offset: palette_offset,\n                     palette_size: palette_size,\n                     data_offset: data_offset,\n                     data_length: p - data_offset,\n                     transparent_index: transparent_index,\n                     interlaced: !!interlace_flag,\n                     delay: delay,\n                     disposal: disposal});\n        break;\n\n      case 0x3b:  // Trailer Marker (end of file).\n        no_eof = false;\n        break;\n\n      default:\n        throw new Error(\"Unknown gif block: 0x\" + buf[p-1].toString(16));\n        break;\n    }\n  }\n\n  this.numFrames = function() {\n    return frames.length;\n  };\n\n  this.loopCount = function() {\n    return loop_count;\n  };\n\n  this.frameInfo = function(frame_num) {\n    if (frame_num < 0 || frame_num >= frames.length)\n      throw new Error(\"Frame index out of range.\");\n    return frames[frame_num];\n  }\n\n  this.decodeAndBlitFrameBGRA = function(frame_num, pixels) {\n    var frame = this.frameInfo(frame_num);\n    var num_pixels = frame.width * frame.height;\n    var index_stream = new Uint8Array(num_pixels);  // At most 8-bit indices.\n    GifReaderLZWOutputIndexStream(\n        buf, frame.data_offset, index_stream, num_pixels);\n    var palette_offset = frame.palette_offset;\n\n    // NOTE(deanm): It seems to be much faster to compare index to 256 than\n    // to === null.  Not sure why, but CompareStub_EQ_STRICT shows up high in\n    // the profile, not sure if it's related to using a Uint8Array.\n    var trans = frame.transparent_index;\n    if (trans === null) trans = 256;\n\n    // We are possibly just blitting to a portion of the entire frame.\n    // That is a subrect within the framerect, so the additional pixels\n    // must be skipped over after we finished a scanline.\n    var framewidth  = frame.width;\n    var framestride = width - framewidth;\n    var xleft       = framewidth;  // Number of subrect pixels left in scanline.\n\n    // Output indicies of the top left and bottom right corners of the subrect.\n    var opbeg = ((frame.y * width) + frame.x) * 4;\n    var opend = ((frame.y + frame.height) * width + frame.x) * 4;\n    var op    = opbeg;\n\n    var scanstride = framestride * 4;\n\n    // Use scanstride to skip past the rows when interlacing.  This is skipping\n    // 7 rows for the first two passes, then 3 then 1.\n    if (frame.interlaced === true) {\n      scanstride += width * 4 * 7;  // Pass 1.\n    }\n\n    var interlaceskip = 8;  // Tracking the row interval in the current pass.\n\n    for (var i = 0, il = index_stream.length; i < il; ++i) {\n      var index = index_stream[i];\n\n      if (xleft === 0) {  // Beginning of new scan line\n        op += scanstride;\n        xleft = framewidth;\n        if (op >= opend) { // Catch the wrap to switch passes when interlacing.\n          scanstride = framestride * 4 + width * 4 * (interlaceskip-1);\n          // interlaceskip / 2 * 4 is interlaceskip << 1.\n          op = opbeg + (framewidth + framestride) * (interlaceskip << 1);\n          interlaceskip >>= 1;\n        }\n      }\n\n      if (index === trans) {\n        op += 4;\n      } else {\n        var r = buf[palette_offset + index * 3];\n        var g = buf[palette_offset + index * 3 + 1];\n        var b = buf[palette_offset + index * 3 + 2];\n        pixels[op++] = b;\n        pixels[op++] = g;\n        pixels[op++] = r;\n        pixels[op++] = 255;\n      }\n      --xleft;\n    }\n  };\n\n  // I will go to copy and paste hell one day...\n  this.decodeAndBlitFrameRGBA = function(frame_num, pixels) {\n    var frame = this.frameInfo(frame_num);\n    var num_pixels = frame.width * frame.height;\n    var index_stream = new Uint8Array(num_pixels);  // At most 8-bit indices.\n    GifReaderLZWOutputIndexStream(\n        buf, frame.data_offset, index_stream, num_pixels);\n    var palette_offset = frame.palette_offset;\n\n    // NOTE(deanm): It seems to be much faster to compare index to 256 than\n    // to === null.  Not sure why, but CompareStub_EQ_STRICT shows up high in\n    // the profile, not sure if it's related to using a Uint8Array.\n    var trans = frame.transparent_index;\n    if (trans === null) trans = 256;\n\n    // We are possibly just blitting to a portion of the entire frame.\n    // That is a subrect within the framerect, so the additional pixels\n    // must be skipped over after we finished a scanline.\n    var framewidth  = frame.width;\n    var framestride = width - framewidth;\n    var xleft       = framewidth;  // Number of subrect pixels left in scanline.\n\n    // Output indicies of the top left and bottom right corners of the subrect.\n    var opbeg = ((frame.y * width) + frame.x) * 4;\n    var opend = ((frame.y + frame.height) * width + frame.x) * 4;\n    var op    = opbeg;\n\n    var scanstride = framestride * 4;\n\n    // Use scanstride to skip past the rows when interlacing.  This is skipping\n    // 7 rows for the first two passes, then 3 then 1.\n    if (frame.interlaced === true) {\n      scanstride += width * 4 * 7;  // Pass 1.\n    }\n\n    var interlaceskip = 8;  // Tracking the row interval in the current pass.\n\n    for (var i = 0, il = index_stream.length; i < il; ++i) {\n      var index = index_stream[i];\n\n      if (xleft === 0) {  // Beginning of new scan line\n        op += scanstride;\n        xleft = framewidth;\n        if (op >= opend) { // Catch the wrap to switch passes when interlacing.\n          scanstride = framestride * 4 + width * 4 * (interlaceskip-1);\n          // interlaceskip / 2 * 4 is interlaceskip << 1.\n          op = opbeg + (framewidth + framestride) * (interlaceskip << 1);\n          interlaceskip >>= 1;\n        }\n      }\n\n      if (index === trans) {\n        op += 4;\n      } else {\n        var r = buf[palette_offset + index * 3];\n        var g = buf[palette_offset + index * 3 + 1];\n        var b = buf[palette_offset + index * 3 + 2];\n        pixels[op++] = r;\n        pixels[op++] = g;\n        pixels[op++] = b;\n        pixels[op++] = 255;\n      }\n      --xleft;\n    }\n  };\n}\n\nfunction GifReaderLZWOutputIndexStream(code_stream, p, output, output_length) {\n  var min_code_size = code_stream[p++];\n\n  var clear_code = 1 << min_code_size;\n  var eoi_code = clear_code + 1;\n  var next_code = eoi_code + 1;\n\n  var cur_code_size = min_code_size + 1;  // Number of bits per code.\n  // NOTE: This shares the same name as the encoder, but has a different\n  // meaning here.  Here this masks each code coming from the code stream.\n  var code_mask = (1 << cur_code_size) - 1;\n  var cur_shift = 0;\n  var cur = 0;\n\n  var op = 0;  // Output pointer.\n\n  var subblock_size = code_stream[p++];\n\n  // TODO(deanm): Would using a TypedArray be any faster?  At least it would\n  // solve the fast mode / backing store uncertainty.\n  // var code_table = Array(4096);\n  var code_table = new Int32Array(4096);  // Can be signed, we only use 20 bits.\n\n  var prev_code = null;  // Track code-1.\n\n  while (true) {\n    // Read up to two bytes, making sure we always 12-bits for max sized code.\n    while (cur_shift < 16) {\n      if (subblock_size === 0) break;  // No more data to be read.\n\n      cur |= code_stream[p++] << cur_shift;\n      cur_shift += 8;\n\n      if (subblock_size === 1) {  // Never let it get to 0 to hold logic above.\n        subblock_size = code_stream[p++];  // Next subblock.\n      } else {\n        --subblock_size;\n      }\n    }\n\n    // TODO(deanm): We should never really get here, we should have received\n    // and EOI.\n    if (cur_shift < cur_code_size)\n      break;\n\n    var code = cur & code_mask;\n    cur >>= cur_code_size;\n    cur_shift -= cur_code_size;\n\n    // TODO(deanm): Maybe should check that the first code was a clear code,\n    // at least this is what you're supposed to do.  But actually our encoder\n    // now doesn't emit a clear code first anyway.\n    if (code === clear_code) {\n      // We don't actually have to clear the table.  This could be a good idea\n      // for greater error checking, but we don't really do any anyway.  We\n      // will just track it with next_code and overwrite old entries.\n\n      next_code = eoi_code + 1;\n      cur_code_size = min_code_size + 1;\n      code_mask = (1 << cur_code_size) - 1;\n\n      // Don't update prev_code ?\n      prev_code = null;\n      continue;\n    } else if (code === eoi_code) {\n      break;\n    }\n\n    // We have a similar situation as the decoder, where we want to store\n    // variable length entries (code table entries), but we want to do in a\n    // faster manner than an array of arrays.  The code below stores sort of a\n    // linked list within the code table, and then \"chases\" through it to\n    // construct the dictionary entries.  When a new entry is created, just the\n    // last byte is stored, and the rest (prefix) of the entry is only\n    // referenced by its table entry.  Then the code chases through the\n    // prefixes until it reaches a single byte code.  We have to chase twice,\n    // first to compute the length, and then to actually copy the data to the\n    // output (backwards, since we know the length).  The alternative would be\n    // storing something in an intermediate stack, but that doesn't make any\n    // more sense.  I implemented an approach where it also stored the length\n    // in the code table, although it's a bit tricky because you run out of\n    // bits (12 + 12 + 8), but I didn't measure much improvements (the table\n    // entries are generally not the long).  Even when I created benchmarks for\n    // very long table entries the complexity did not seem worth it.\n    // The code table stores the prefix entry in 12 bits and then the suffix\n    // byte in 8 bits, so each entry is 20 bits.\n\n    var chase_code = code < next_code ? code : prev_code;\n\n    // Chase what we will output, either {CODE} or {CODE-1}.\n    var chase_length = 0;\n    var chase = chase_code;\n    while (chase > clear_code) {\n      chase = code_table[chase] >> 8;\n      ++chase_length;\n    }\n\n    var k = chase;\n\n    var op_end = op + chase_length + (chase_code !== code ? 1 : 0);\n    if (op_end > output_length) {\n      console.log(\"Warning, gif stream longer than expected.\");\n      return;\n    }\n\n    // Already have the first byte from the chase, might as well write it fast.\n    output[op++] = k;\n\n    op += chase_length;\n    var b = op;  // Track pointer, writing backwards.\n\n    if (chase_code !== code)  // The case of emitting {CODE-1} + k.\n      output[op++] = k;\n\n    chase = chase_code;\n    while (chase_length--) {\n      chase = code_table[chase];\n      output[--b] = chase & 0xff;  // Write backwards.\n      chase >>= 8;  // Pull down to the prefix code.\n    }\n\n    if (prev_code !== null && next_code < 4096) {\n      code_table[next_code++] = prev_code << 8 | k;\n      // TODO(deanm): Figure out this clearing vs code growth logic better.  I\n      // have an feeling that it should just happen somewhere else, for now it\n      // is awkward between when we grow past the max and then hit a clear code.\n      // For now just check if we hit the max 12-bits (then a clear code should\n      // follow, also of course encoded in 12-bits).\n      if (next_code >= code_mask+1 && cur_code_size < 12) {\n        ++cur_code_size;\n        code_mask = code_mask << 1 | 1;\n      }\n    }\n\n    prev_code = code;\n  }\n\n  if (op !== output_length) {\n    console.log(\"Warning, gif stream shorter than expected.\");\n  }\n\n  return output;\n}\n\n// CommonJS.\ntry { exports.GifWriter = GifWriter; exports.GifReader = GifReader } catch(e) {}\n", "var Bitmap = module.exports = exports = function(buffer){\n  this.buffer = buffer;\n  this.initialized = false;\n\n  this.fileHeader = null;\n  this.infoHeader = null;\n  this.coreHeader = null;\n  this.colorPalette = null;\n  this.dataPos = -1;\n};\nBitmap.prototype.CORE_TYPE_WINDOWS_V3 = 40;\nBitmap.prototype.CORE_TYPE_WINDOWS_V4 = 108;\nBitmap.prototype.CORE_TYPE_WINDOWS_V5 = 124;\nBitmap.prototype.CORE_TYPE_OS2_V1 = 12;\nBitmap.prototype.CORE_TYPE_OS2_V2 = 64;\nBitmap.prototype.BITMAPCOREHEADER = Bitmap.prototype.CORE_TYPE_OS2_V1;\nBitmap.prototype.BITMAPINFOHEADER = Bitmap.prototype.CORE_TYPE_WINDOWS_V3;\nBitmap.prototype.BITMAPINFOHEADER2 = Bitmap.prototype.CORE_TYPE_OS2_V2;\nBitmap.prototype.BITMAPV4HEADER = Bitmap.prototype.CORE_TYPE_WINDOWS_V4;\nBitmap.prototype.BITMAPV5HEADER = Bitmap.prototype.CORE_TYPE_WINDOWS_V5;\nBitmap.prototype.COMPRESSION_BI_RGB = 0;\nBitmap.prototype.COMPRESSION_BI_RLE8 = 1;\nBitmap.prototype.COMPRESSION_BI_RLE4 = 2;\nBitmap.prototype.COMPRESSION_BI_BITFIELDS = 3;\nBitmap.prototype.COMPRESSION_BI_JPEG = 4;\nBitmap.prototype.COMPRESSION_BI_PNG = 5;\nBitmap.prototype.BITCOUNT_2 = 1;\nBitmap.prototype.BITCOUNT_16 = 4;\nBitmap.prototype.BITCOUNT_256 = 8;\nBitmap.prototype.BITCOUNT_16bit = 16;\nBitmap.prototype.BITCOUNT_24bit = 24;\nBitmap.prototype.BITCOUNT_32bit = 32;\nBitmap.prototype.init = function(){\n  this.readFileHeader();\n  this.readInfoHeader();\n  this.readCoreHeader();\n  this.readColorPalette();\n\n  this.initDataPos();\n  this.initialized = true;\n};\nBitmap.prototype.checkInit = function (){\n  if(!this.initialized){\n    throw new Error('not initialized');\n  }\n  /* nop */\n};\nBitmap.prototype.isBitmap = function(){\n  this.checkInit();\n\n  if('BM' == this.fileHeader.bfType){\n    return true;\n  }\n  return false;\n};\nBitmap.prototype.getData = function (){\n  this.checkInit();\n\n  if(this.COMPRESSION_BI_RGB !== this.coreHeader.__copmression__){\n    throw new Error('not supported compression: ' + this.coreHeader.__copmression__);\n  }\n\n  var bitCount = this.coreHeader.__bitCount__;\n  var width = this.getWidth();\n  var height = this.getHeight();\n\n  var line = (width * bitCount) / 8;\n  if(0 != (line % 4)){\n    line = ((line / 4) + 1) * 4;\n  }\n\n  var rgbaData = [];\n  var dataPos = this.dataPos;\n  for(var i = 0; i < height; ++i) {\n    var pos = dataPos + (line * (height - (i + 1)));\n    var buf = this.buffer.slice(pos, pos + line);\n    var color = this.mapColor(buf, bitCount);\n    rgbaData.push(color);\n  }\n  return rgbaData;\n};\nBitmap.prototype.getWidth = function (){\n  this.checkInit();\n\n  return this.coreHeader.__width__;\n};\nBitmap.prototype.getHeight = function (){\n  this.checkInit();\n\n  return this.coreHeader.__height__;\n};\nBitmap.prototype.read = function(buf, offset, limit){\n  var read = [];\n  for(var i = offset, len = offset + limit; i < len; ++i){\n    read.push(buf.readInt8(i));\n  }\n  return new Buffer(read);\n};\nBitmap.prototype.readFileHeader = function(){\n  var bfType = this.read(this.buffer, 0, 2);\n  var bfSize = this.read(this.buffer, 2, 4);\n  var bfReserved1 = this.read(this.buffer, 6, 2);\n  var bfReserved2 = this.read(this.buffer, 8, 2);\n  var bfOffBits = this.read(this.buffer, 10, 4);\n\n  this.fileHeader = {\n    bfType: bfType.toString('ascii'),\n    _bfType: bfType,\n    bfSize: bfSize.readUInt16LE(0),\n    _bfSize: bfSize,\n    bfReserved1: 0,\n    bfReserved2: 0,\n    bfOffBits: bfOffBits.readUInt16LE(0),\n    _bfOffBits: bfOffBits\n  };\n};\nBitmap.prototype.readInfoHeader = function (){\n  this.infoHeader = this.read(this.buffer, 14, 4);\n};\nBitmap.prototype.readCoreHeader = function (){\n  var coreType = this.infoHeader.readUInt16LE(0);\n  switch(coreType){\n  case this.BITMAPCOREHEADER:\n    return this.readCoreHeaderOS2_V1();\n  case this.BITMAPINFOHEADER2:\n    return this.readCoreHeaderOS2_V2();\n  case this.BITMAPV4HEADER:\n    return this.readCoreHeaderWINDOWS_V4();\n  case this.BITMAPV5HEADER:\n    return this.readCoreHeaderWINDOWS_V5();\n  case this.BITMAPINFOHEADER:\n    return this.readCoreHeaderWINDOWS_V3();\n  default:\n    throw new Error('unknown coreType: ' + coreType);\n  }\n};\nBitmap.prototype.readCoreHeaderWINDOWS_V3 = function (){\n  var biWidth = this.read(this.buffer, 0x12, 4);\n  var biHeight = this.read(this.buffer, 0x16, 4);\n  var biPlanes = this.read(this.buffer, 0x1a, 2);\n  var biBitCount = this.read(this.buffer, 0x1c, 2);\n  var biCopmression = this.read(this.buffer, 0x1e, 4);\n  var biSizeImage = this.read(this.buffer, 0x22, 4);\n  var biXPixPerMeter = this.read(this.buffer, 0x26, 4);\n  var biYPixPerMeter = this.read(this.buffer, 0x2a, 4);\n  var biClrUsed = this.read(this.buffer, 0x2e, 4);\n  var biCirImportant = this.read(this.buffer, 0x32, 4);\n\n  this.coreHeader = {\n    __copmression__: biCopmression.readUInt16LE(0),\n    __bitCount__: biBitCount.readUInt8(0),\n    __width__: biWidth.readUInt16LE(0),\n    __height__: biHeight.readUInt16LE(0),\n    biWidth: biWidth.readUInt16LE(0),\n    _biWidth: biWidth,\n    biHeight: biHeight.readUInt16LE(0),\n    _biHeight: biHeight,\n    biPlanes: biPlanes.readUInt8(0),\n    _biPlanes: biPlanes,\n    biBitCount: biBitCount.readUInt8(0),\n    _biBitCount: biBitCount,\n    biCopmression: biCopmression.readUInt16LE(0),\n    _biCopmression: biCopmression,\n    biSizeImage: biSizeImage.readUInt16LE(0),\n    _biSizeImage: biSizeImage,\n    biXPixPerMeter: biXPixPerMeter.readUInt16LE(0),\n    _biXPixPerMeter: biXPixPerMeter,\n    biYPixPerMeter: biYPixPerMeter.readUInt16LE(0),\n    _biYPixPerMeter: biYPixPerMeter,\n    biClrUsed: biClrUsed.readUInt16LE(0),\n    _biClrUsed: biClrUsed,\n    biCirImportant: biCirImportant.readUInt16LE(0),\n    _biCirImportant: biCirImportant\n  };\n};\nBitmap.prototype.readCoreHeaderWINDOWS_V4 = function (){\n  throw new Error('not yet impl');\n  \n  var bV4Width = this.read(this.buffer, 0x12, 4);\n  var bV4Height = this.read(this.buffer, 0x16, 4);\n  var bV4Planes = this.read(this.buffer, 0x1a, 2);\n  var bV4BitCount = this.read(this.buffer, 0x1c, 2);\n  var bV4Compression = this.read(this.buffer, 0x1e, 4);\n  var bV4SizeImage = this.read(this.buffer, 0x22, 4);\n  var bV4XPelsPerMeter = this.read(this.buffer, 0x26, 4);\n  var bV4YPelsPerMeter = this.read(this.buffer, 0x2a, 4);\n  var bV4ClrUsed = this.read(this.buffer, 0x2e, 4);\n  var bV4ClrImportant = this.read(this.buffer, 0x32, 4);\n  var bV4RedMask = this.read(this.buffer, 0x36, 4);\n  var bV4GreenMask = this.read(this.buffer, 0x3a, 4);\n  var bV4BlueMask = this.read(this.buffer, 0x3e, 4);\n  var bV4AlphaMask = this.read(this.buffer, 0x42, 4);\n  var bV4CSType = this.read(this.buffer, 0x46, 4);\n  var bV4Endpoints = this.read(this.buffer, 0x6a, 36);\n  var bV4GammaRed = this.read(this.buffer, 0x6e, 4);\n  var bV4GammaGreen = this.read(this.buffer, 0x72, 4);\n  var bV4GammaBlue = this.read(this.buffer, 0x76, 4);\n\n  this.coreHeader = {\n    __compression__: bV4Compression.readUInt16LE(0),\n    __bitCount__: bV4BitCount.readUInt8(0),\n    __width__: bV4Width.readUInt16LE(0),\n    __height__: bV4Height.readUInt16LE(0),\n    bV4Width: bV4Width.readUInt16LE(0),\n    _bV4Width: bV4Width,\n    bV4Height: bV4Height.readUInt16LE(0),\n    _bV4Height: bV4Height,\n    bV4Planes: bV4Planes.readUInt8(0),\n    _bV4Planes: bV4Planes,\n    bV4BitCount: bV4BitCount.readUInt8(0),\n    _bV4BitCount: bV4BitCount,\n    bV4Compression: bV4Compression.readUInt16LE(0),\n    _bV4Compression: bV4Compression,\n    bV4SizeImage: bV4SizeImage.readUInt16LE(0),\n    _bV4SizeImage: bV4SizeImage,\n    bV4XPelsPerMeter: bV4XPelsPerMeter.readUInt16LE(0),\n    _bV4XPelsPerMeter: bV4XPelsPerMeter,\n    bV4YPelsPerMeter: bV4YPelsPerMeter.readUInt16LE(0),\n    _bV4YPelsPerMeter: bV4YPelsPerMeter,\n    bV4ClrUsed: bV4ClrUsed.readUInt16LE(0),\n    _bV4ClrUsed: bV4ClrUsed,\n    bV4ClrImportant: bV4ClrImportant.readUInt16LE(0),\n    _bV4ClrImportant: bV4ClrImportant,\n    bV4RedMask: bV4RedMask.readUInt16LE(0),\n    _bV4RedMask: bV4RedMask,\n    bV4GreenMask: bV4GreenMask.readUInt16LE(0),\n    _bV4GreenMask: bV4GreenMask,\n    bV4BlueMask: bV4BlueMask.readUInt16LE(0),\n    _bV4BlueMask: bV4BlueMask,\n    bV4AlphaMask: bV4AlphaMask.readUInt16LE(0),\n    _bV4AlphaMask: bV4AlphaMask,\n    bV4CSType: bV4CSType.readUInt16LE(0),\n    _bV4CSType: bV4CSType,\n    bV4Endpoints: null,\n    _bV4Endpoints: bV4Endpoints,\n    bV4GammaRed: bV4GammaRed.readUInt16LE(0),\n    _bV4GammaRed: bV4GammaRed,\n    bV4GammaGreen: bV4GammaGreen.readUInt16LE(0),\n    _bV4GammaGreen: bV4GammaGreen,\n    bV4GammaBlue: bV4GammaBlue.readUInt16LE(0),\n    _bV4GammaBlue: bV4GammaBlue\n  };\n};\nBitmap.prototype.readCoreHeaderWINDOWS_V5 = function (){\n  throw new Error('not yet impl');\n\n  var bV5Width = this.read(this.buffer, 0x12, 4);\n  var bV5Height = this.read(this.buffer, 0x16, 4);\n  var bV5Planes = this.read(this.buffer, 0x1a, 2);\n  var bV5BitCount = this.read(this.buffer, 0x1c, 2);\n  var bV5Compression = this.read(this.buffer, 0x1e, 4);\n  var bV5SizeImage = this.read(this.buffer, 0x22, 4);\n  var bV5XPelsPerMeter = this.read(this.buffer, 0x26, 4);\n  var bV5YPelsPerMeter = this.read(this.buffer, 0x2a, 4);\n  var bV5ClrUsed = this.read(this.buffer, 0x2e, 4);\n  var bV5ClrImportant = this.read(this.buffer, 0x32, 4);\n  var bV5RedMask = this.read(this.buffer, 0x36, 4);\n  var bV5GreenMask = this.read(this.buffer, 0x3a, 4);\n  var bV5BlueMask = this.read(this.buffer, 0x3e, 4);\n  var bV5AlphaMask = this.read(this.buffer, 0x42, 4);\n  var bV5CSType = this.read(this.buffer, 0x46, 4);\n  var bV5Endpoints = this.read(this.buffer, 0x6a, 36);\n  var bV5GammaRed = this.read(this.buffer, 0x6e, 4);\n  var bV5GammaGreen = this.read(this.buffer, 0x72, 4);\n  var bV5GammaBlue = this.read(this.buffer, 0x76, 4);\n  var bV5Intent = this.read(this.buffer, 0x7a, 4);\n  var bV5ProfileData = this.read(this.buffer, 0x7e, 4);\n  var bV5ProfileSize = this.read(this.buffer, 0x82, 4);\n  var bV5Reserved = this.read(this.buffer, 0x86, 4);\n\n  this.coreHeader = {\n    __compression__: bV5Compression.readUInt16LE(0),\n    __bitCount__: bV5BitCount.readUInt8(0),\n    __width__: bV5Width.readUInt16LE(0),\n    __height__: bV5Height.readUInt16LE(0),\n    bV5Width: bV5Width.readUInt16LE(0),\n    _bV5Width: bV5Width,\n    bV5Height: bV5Height.readUInt16LE(0),\n    _bV5Height: bV5Height,\n    bV5Planes: bV5Planes.readUInt8(0),\n    _bV5Planes: bV5Planes,\n    bV5BitCount: bV5BitCount.readUInt8(0),\n    _bV5BitCount: bV5BitCount,\n    bV5Compression: bV5Compression.readUInt16LE(0),\n    _bV5Compression: bV5Compression,\n    bV5SizeImage: bV5SizeImage.readUInt16LE(0),\n    _bV5SizeImage: bV5SizeImage,\n    bV5XPelsPerMeter: bV5XPelsPerMeter.readUInt16LE(0),\n    _bV5XPelsPerMeter: bV5XPelsPerMeter,\n    bV5YPelsPerMeter: bV5YPelsPerMeter.readUInt16LE(0),\n    _bV5YPelsPerMeter: bV5YPelsPerMeter,\n    bV5ClrUsed: bV5ClrUsed.readUInt16LE(0),\n    _bV5ClrUsed: bV5ClrUsed,\n    bV5ClrImportant: bV5ClrImportant.readUInt16LE(0),\n    _bV5ClrImportant: bV5ClrImportant,\n    bV5RedMask: bV5RedMask.readUInt16LE(0),\n    _bV5RedMask: bV5RedMask,\n    bV5GreenMask: bV5GreenMask.readUInt16LE(0),\n    _bV5GreenMask: bV5GreenMask,\n    bV5BlueMask: bV5BlueMask.readUInt16LE(0),\n    _bV5BlueMask: bV5BlueMask,\n    bV5AlphaMask: bV5AlphaMask.readUInt16LE(0),\n    _bV5AlphaMask: bV5AlphaMask,\n    bV5CSType: bV5CSType.readUInt16LE(0),\n    _bV5CSType: bV5CSType,\n    bV5Endpoints: null,\n    _bV5Endpoints: bV5Endpoints,\n    bV5GammaRed: bV5GammaRed.readUInt16LE(0),\n    _bV5GammaRed: bV5GammaRed,\n    bV5GammaGreen: bV5GammaGreen.readUInt16LE(0),\n    _bV5GammaGreen: bV5GammaGreen,\n    bV5GammaBlue: bV5GammaBlue.readUInt16LE(0),\n    _bV5GammaBlue: bV5GammaBlue,\n    bV5Intent: bV5Intent.readUInt16LE(0),\n    _bV5Intent: bV5Intent,\n    bV5ProfileData: bV5ProfileData.readUInt16LE(0),\n    _bV5ProfileData: bV5ProfileData,\n    bV5ProfileSize: bV5ProfileSize.readUInt16LE(0),\n    _bV5ProfileSize: bV5ProfileSize,\n    bV5Reserved: 0,\n    _bV5Reserved: bV5Reserved\n  };\n};\nBitmap.prototype.readCoreHeaderOS2_V1 = function (){\n  throw new Error('not yet impl');\n\n  var bcWidth = this.read(this.buffer, 0x12, 2);\n  var bcHeight = this.read(this.buffer, 0x14, 2);\n  var bcPlanes = this.read(this.buffer, 0x16, 2);\n  var bcBitCount = this.read(this.buffer, 0x18, 2);\n\n  this.coreHeader = {\n    __compression__: 0,\n    __bitCount__: bcBitCount.readUInt8(0),\n    __width__: bcWidth.readUInt8(0),\n    __height__: bcHeight.readUInt8(0),\n    bcWidth: bcWidth.readUInt8(0),\n    _bcWidth: bcWidth,\n    bcHeight: bcHeight.readUInt8(0),\n    _bcHeight: bcHeight,\n    bcPlanes: bcPlanes.readUInt8(0),\n    _bcPlanes: bcPlanes,\n    bcBitCount: bcBitCount.readUInt8(0),\n    _bcBitCount: bcBitCount\n  };\n};\nBitmap.prototype.readCoreHeaderOS2_V2 = function (){\n  throw new Error('not yet impl');\n\n  var cx = this.read(this.buffer, 0x12, 4);\n  var cy = this.read(this.buffer, 0x16, 4);\n  var cPlanes = this.read(this.buffer, 0x1a, 2);\n  var cBitCount = this.read(this.buffer, 0x1c, 2);\n  var ulCompression = this.read(this.buffer, 0x1e, 4);\n  var cbImage = this.read(this.buffer, 0x22, 4);\n  var cxResolution = this.read(this.buffer, 0x26, 4);\n  var cyResolution = this.read(this.buffer, 0x2a, 4);\n  var cclrUsed = this.read(this.buffer, 0x2e, 4);\n  var cclrImportant = this.read(this.buffer, 0x32, 4);\n  var usUnits = this.read(this.buffer, 0x36, 2);\n  var usReserved = this.read(this.buffer, 0x38, 2);\n  var usRecording = this.read(this.buffer, 0x3a, 2);\n  var usRendering = this.read(this.buffer, 0x3c, 2);\n  var cSize1 = this.read(this.buffer, 0x3e, 4);\n  var cSize2 = this.read(this.buffer, 0x42, 4);\n  var ulColorEncoding = this.read(this.buffer, 0x46, 4);\n  var ulIdentifier = this.read(this.buffer, 0x4a, 4);\n\n  this.coreHeader = {\n    __compression__: ulCompression.readUInt16LE(0),\n    __bitCount__: cBitCount.readUInt8(0),\n    __width__: cx.readUInt16LE(0),\n    __height__: cy.readUInt16LE(0),\n    cx: cx.readUInt16LE(0),\n    _cx: cx,\n    cy: cy.readUInt16LE(0),\n    _cy: cy,\n    cPlanes: cPlanes.readUInt8(0),\n    _cPlanes: cPlanes,\n    cBitCount: cBitCount.readUInt8(0),\n    _cBitCount: cBitCount,\n    ulCompression: ulCompression.readUInt16LE(0),\n    _ulCompression: ulCompression,\n    cbImage: cbImage.readUInt16LE(0),\n    _cbImage: cbImage,\n    cxResolution: cxResolution.readUInt16LE(0),\n    _cxResolution: cxResolution,\n    cyResolution: cyResolution.readUInt16LE(0),\n    _cyResolution: cyResolution,\n    cclrUsed: cclrUsed.readUInt16LE(0),\n    _cclrUsed: cclrUsed,\n    cclrImportant: cclrImportant.readUInt16LE(0),\n    _cclrImportant: cclrImportant,\n    usUnits: usUnits.readUInt8(0),\n    _usUnits: usUnits,\n    usReserved: usReserved.readUInt8(0),\n    _usReserved: usReserved,\n    usRecording: usRecording.readUInt8(0),\n    _usRecording: usRecording,\n    usRendering: usRendering.readUInt8(0),\n    _usRendering: usRendering,\n    cSize1: cSize1.readUInt16LE(0),\n    _cSize1: cSize1,\n    cSize2: cSize2.readUInt16LE(0),\n    _cSize1: cSize1,\n    ulColorEncoding: ulColorEncoding.readUInt16LE(0),\n    _ulColorEncoding: ulColorEncoding,\n    ulIdentifier: ulIdentifier.readUInt16LE(0),\n    _ulIdentifier: ulIdentifier\n  };\n};\nBitmap.prototype.readColorPalette = function (){\n  var bitCount = this.coreHeader.__bitCount__;\n  if(this.BITCOUNT_16bit == bitCount){\n    return /* nop */;\n  }\n  if(this.BITCOUNT_24bit == bitCount){\n    return /* nop */;\n  }\n  if(this.BITCOUNT_32bit == bitCount){\n    return /* nop */;\n  }\n\n  var coreType = this.infoHeader.readUInt16LE(0);\n  switch(coreType){\n  case this.BITMAPCOREHEADER:\n    return this.readColorPalette_RGBTRIPLE(bitCount, 0x1a);\n  case this.BITMAPINFOHEADER2:\n    return this.readColorPalette_RGBTRIPLE(bitCount, 0x4e);\n    case this.BITMAPV4HEADER:\n    return this.readColorPalette_RGBQUAD(bitCount, 0x7a);\n  case this.BITMAPV5HEADER:\n    return this.readColorPalette_RGBQUAD(bitCount, 0x8a);\n  case this.BITMAPINFOHEADER:\n    return this.readColorPalette_RGBQUAD(bitCount, 0x36);\n  default:\n    throw new Error('unknown colorPalette: ' + coreType + ',' + bitCount);\n  }\n};\nBitmap.prototype.readColorPalette_RGBTRIPLE = function (bitCount, startPos){\n  throw new Error('not yet impl');\n};\nBitmap.prototype.readColorPalette_RGBQUAD = function (bitCount, startPos){\n  if(this.BITCOUNT_2 == bitCount){\n    return this.readRGBQUAD(1 << this.BITCOUNT_2, startPos);\n  }\n  if(this.BITCOUNT_16 == bitCount){\n    return this.readRGBQUAD(1 << this.BITCOUNT_16, startPos);\n  }\n  if(this.BITCOUNT_256 == bitCount){\n    return this.readRGBQUAD(1 << this.BITCOUNT_256, startPos);\n  }\n  throw new Error('unknown bitCount: ' + bitCount);\n};\nBitmap.prototype.readRGBQUAD = function(count, startPos){\n  var palette = [];\n  for(var i = startPos, len = startPos + (4 * count); i < len; i += 4){\n    palette.push({\n      rgbBlue: this.read(this.buffer, i, 1).readUInt8(0),\n      rgbGreen: this.read(this.buffer, i + 1, 1).readUInt8(0),\n      rgbRed: this.read(this.buffer, i + 2, 1).readUInt8(0),\n      rgbReserved: this.read(this.buffer, i + 3, 1).readUInt8(0)\n    });\n  }\n  this.colorPalette = palette;\n};\nBitmap.prototype.initDataPos = function(){\n  var bitCount = this.coreHeader.__bitCount__;\n  var hasPalette = true;\n  if(this.BITCOUNT_16bit == bitCount){\n    hasPalette = true;\n  }\n  if(this.BITCOUNT_24bit == bitCount){\n    hasPalette = true;\n  }\n  if(this.BITCOUNT_32bit == bitCount){\n    hasPalette = true;\n  }\n\n  var coreType = this.infoHeader.readUInt16LE(0);\n  switch(coreType){\n  case this.BITMAPCOREHEADER:\n    this.dataPos = 0x1a;\n    if(hasPalette){\n      this.dataPos = this.dataPos + (3 * (1 << bitCount));\n    }\n    break;\n  case this.BITMAPINFOHEADER2:\n    this.dataPos = 0x4e;\n    if(hasPalette){\n      this.dataPos = this.dataPos + (3 * (1 << bitCount));\n    }\n    break;\n  case this.BITMAPV4HEADER:\n    this.dataPos = 0x7a;\n    if(hasPalette){\n      this.dataPos = this.dataPos + (4 * (1 << bitCount));\n    }\n    break;\n  case this.BITMAPV5HEADER:\n    this.dataPos = 0x8a;\n    if(hasPalette){\n      this.dataPos = this.dataPos + (4 * (1 << bitCount));\n    }\n  case this.BITMAPINFOHEADER:\n    this.dataPos = 0x36;\n    if(hasPalette){\n      this.dataPos = this.dataPos + (4 * (1 << bitCount));\n    }\n    break;\n  default:\n    throw new Error('unknown colorPalette: ' + coreType + ',' + bitCount);\n  }\n};\nBitmap.prototype.mapRGBA = function(r, g, b, a){\n  var hex = [];\n\n  var padHex = function(value){\n    var h = value.toString(16);\n    if(value < 0x0f){\n      return '0' + h;\n    }\n    return h;\n  };\n\n  hex.push(padHex(r));\n  hex.push(padHex(g));\n  hex.push(padHex(b));\n\n  return '#' + hex.join('');\n};\nBitmap.prototype.mapColor = function(bmpBuf, bitCount){\n  var b, g, r, a;\n  var length = bmpBuf.length;\n  var colorData = [];\n\n  if(this.BITCOUNT_2 == bitCount){\n    for(var i = 0; i < length; ++i){\n      var paletteValue = bmpBuf[i];\n      var bin = paletteValue.toString(2);\n      bin = new Array(8 - bin.length).join('0') + bin;\n\n      for(var j = 0; j < bin.length; ++j){\n        var paletteIndex = parseInt(bin.substring(j, j + 1), 10);\n        var palette = this.colorPalette[paletteIndex];\n        colorData.push(this.mapRGBA(palette.rgbRed, palette.rgbGreen, palette.rgbBlue, -1));\n      }\n    }\n    return colorData;\n  }\n  if(this.BITCOUNT_16 == bitCount){\n    for(var i = 0; i < length; i += 2){\n      var paletteHigh = bmpBuf.readUInt8(i);\n      var paletteLow = bmpBuf.readUInt8(i + 1);\n      var indexes = [paletteHigh, paletteLow];\n      indexes.forEach(function(paletteIndex){\n        var palette = this.colorPalette[paletteIndex];\n        colorData.push(this.mapRGBA(palette.rgbRed, palette.rgbGreen, palette.rgbBlue, -1));\n      });\n    }\n\n    return colorData;\n  }\n  if(this.BITCOUNT_256 == bitCount){\n    for(var i = 0; i < length; ++i){\n      var paletteIndex = bmpBuf.readUInt16LE(i);\n      var palette = this.colorPalette[paletteIndex];\n      colorData.push(this.mapRGBA(palette.rgbRed, palette.rgbGreen, palette.rgbBlue, -1));\n    }\n    return colorData;\n  }\n  if(this.BITCOUNT_16bit == bitCount){\n    for(var i = 0; i < length; i += 3){\n      b = bmpBuf[i];\n      g = bmpBuf[i + 1];\n      r = bmpBuf[i + 2];\n      colorData.push(this.mapRGBA(r, g, b, -1));\n    }\n    return colorData;\n  }\n  if(this.BITCOUNT_24bit == bitCount){\n    for(var i = 0; i < length; i += 3){\n      b = bmpBuf[i];\n      g = bmpBuf[i + 1];\n      r = bmpBuf[i + 2];\n      colorData.push(this.mapRGBA(r, g, b, -1));\n    }\n    return colorData;\n  }\n  if(this.BITCOUNT_32bit == bitCount){\n    for(var i = 0; i < length; i += 4){\n      b = bmpBuf[i];\n      g = bmpBuf[i + 1];\n      r = bmpBuf[i + 2];\n      a = bmpBuf[i + 3];\n      colorData.push(this.mapRGBA(r, g, b, a));\n    }\n    return colorData;\n  }\n  throw new Error('unknown bitCount: ' + bitCount);\n};\n", "module.exports = require('./lib/bitmap');\n", "'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n", "/*eslint no-var:0, prefer-arrow-callback: 0, object-shorthand: 0 */\n'use strict';\n\n\nvar Punycode = require('punycode');\n\n\nvar internals = {};\n\n\n//\n// Read rules from file.\n//\ninternals.rules = require('./data/rules.json').map(function (rule) {\n\n  return {\n    rule: rule,\n    suffix: rule.replace(/^(\\*\\.|\\!)/, ''),\n    punySuffix: -1,\n    wildcard: rule.charAt(0) === '*',\n    exception: rule.charAt(0) === '!'\n  };\n});\n\n\n//\n// Check is given string ends with `suffix`.\n//\ninternals.endsWith = function (str, suffix) {\n\n  return str.indexOf(suffix, str.length - suffix.length) !== -1;\n};\n\n\n//\n// Find rule for a given domain.\n//\ninternals.findRule = function (domain) {\n\n  var punyDomain = Punycode.toASCII(domain);\n  return internals.rules.reduce(function (memo, rule) {\n\n    if (rule.punySuffix === -1){\n      rule.punySuffix = Punycode.toASCII(rule.suffix);\n    }\n    if (!internals.endsWith(punyDomain, '.' + rule.punySuffix) && punyDomain !== rule.punySuffix) {\n      return memo;\n    }\n    // This has been commented out as it never seems to run. This is because\n    // sub tlds always appear after their parents and we never find a shorter\n    // match.\n    //if (memo) {\n    //  var memoSuffix = Punycode.toASCII(memo.suffix);\n    //  if (memoSuffix.length >= punySuffix.length) {\n    //    return memo;\n    //  }\n    //}\n    return rule;\n  }, null);\n};\n\n\n//\n// Error codes and messages.\n//\nexports.errorCodes = {\n  DOMAIN_TOO_SHORT: 'Domain name too short.',\n  DOMAIN_TOO_LONG: 'Domain name too long. It should be no more than 255 chars.',\n  LABEL_STARTS_WITH_DASH: 'Domain name label can not start with a dash.',\n  LABEL_ENDS_WITH_DASH: 'Domain name label can not end with a dash.',\n  LABEL_TOO_LONG: 'Domain name label should be at most 63 chars long.',\n  LABEL_TOO_SHORT: 'Domain name label should be at least 1 character long.',\n  LABEL_INVALID_CHARS: 'Domain name label can only contain alphanumeric characters or dashes.'\n};\n\n\n//\n// Validate domain name and throw if not valid.\n//\n// From wikipedia:\n//\n// Hostnames are composed of series of labels concatenated with dots, as are all\n// domain names. Each label must be between 1 and 63 characters long, and the\n// entire hostname (including the delimiting dots) has a maximum of 255 chars.\n//\n// Allowed chars:\n//\n// * `a-z`\n// * `0-9`\n// * `-` but not as a starting or ending character\n// * `.` as a separator for the textual portions of a domain name\n//\n// * http://en.wikipedia.org/wiki/Domain_name\n// * http://en.wikipedia.org/wiki/Hostname\n//\ninternals.validate = function (input) {\n\n  // Before we can validate we need to take care of IDNs with unicode chars.\n  var ascii = Punycode.toASCII(input);\n\n  if (ascii.length < 1) {\n    return 'DOMAIN_TOO_SHORT';\n  }\n  if (ascii.length > 255) {\n    return 'DOMAIN_TOO_LONG';\n  }\n\n  // Check each part's length and allowed chars.\n  var labels = ascii.split('.');\n  var label;\n\n  for (var i = 0; i < labels.length; ++i) {\n    label = labels[i];\n    if (!label.length) {\n      return 'LABEL_TOO_SHORT';\n    }\n    if (label.length > 63) {\n      return 'LABEL_TOO_LONG';\n    }\n    if (label.charAt(0) === '-') {\n      return 'LABEL_STARTS_WITH_DASH';\n    }\n    if (label.charAt(label.length - 1) === '-') {\n      return 'LABEL_ENDS_WITH_DASH';\n    }\n    if (!/^[a-z0-9\\-]+$/.test(label)) {\n      return 'LABEL_INVALID_CHARS';\n    }\n  }\n};\n\n\n//\n// Public API\n//\n\n\n//\n// Parse domain.\n//\nexports.parse = function (input) {\n\n  if (typeof input !== 'string') {\n    throw new TypeError('Domain name must be a string.');\n  }\n\n  // Force domain to lowercase.\n  var domain = input.slice(0).toLowerCase();\n\n  // Handle FQDN.\n  // TODO: Simply remove trailing dot?\n  if (domain.charAt(domain.length - 1) === '.') {\n    domain = domain.slice(0, domain.length - 1);\n  }\n\n  // Validate and sanitise input.\n  var error = internals.validate(domain);\n  if (error) {\n    return {\n      input: input,\n      error: {\n        message: exports.errorCodes[error],\n        code: error\n      }\n    };\n  }\n\n  var parsed = {\n    input: input,\n    tld: null,\n    sld: null,\n    domain: null,\n    subdomain: null,\n    listed: false\n  };\n\n  var domainParts = domain.split('.');\n\n  // Non-Internet TLD\n  if (domainParts[domainParts.length - 1] === 'local') {\n    return parsed;\n  }\n\n  var handlePunycode = function () {\n\n    if (!/xn--/.test(domain)) {\n      return parsed;\n    }\n    if (parsed.domain) {\n      parsed.domain = Punycode.toASCII(parsed.domain);\n    }\n    if (parsed.subdomain) {\n      parsed.subdomain = Punycode.toASCII(parsed.subdomain);\n    }\n    return parsed;\n  };\n\n  var rule = internals.findRule(domain);\n\n  // Unlisted tld.\n  if (!rule) {\n    if (domainParts.length < 2) {\n      return parsed;\n    }\n    parsed.tld = domainParts.pop();\n    parsed.sld = domainParts.pop();\n    parsed.domain = [parsed.sld, parsed.tld].join('.');\n    if (domainParts.length) {\n      parsed.subdomain = domainParts.pop();\n    }\n    return handlePunycode();\n  }\n\n  // At this point we know the public suffix is listed.\n  parsed.listed = true;\n\n  var tldParts = rule.suffix.split('.');\n  var privateParts = domainParts.slice(0, domainParts.length - tldParts.length);\n\n  if (rule.exception) {\n    privateParts.push(tldParts.shift());\n  }\n\n  parsed.tld = tldParts.join('.');\n\n  if (!privateParts.length) {\n    return handlePunycode();\n  }\n\n  if (rule.wildcard) {\n    tldParts.unshift(privateParts.pop());\n    parsed.tld = tldParts.join('.');\n  }\n\n  if (!privateParts.length) {\n    return handlePunycode();\n  }\n\n  parsed.sld = privateParts.pop();\n  parsed.domain = [parsed.sld,  parsed.tld].join('.');\n\n  if (privateParts.length) {\n    parsed.subdomain = privateParts.join('.');\n  }\n\n  return handlePunycode();\n};\n\n\n//\n// Get domain.\n//\nexports.get = function (domain) {\n\n  if (!domain) {\n    return null;\n  }\n  return exports.parse(domain).domain || null;\n};\n\n\n//\n// Check whether domain belongs to a known public suffix.\n//\nexports.isValid = function (domain) {\n\n  var parsed = exports.parse(domain);\n  return Boolean(parsed.domain && parsed.listed);\n};\n", "/*!\n * Copyright (c) 2018, Salesforce.com, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of Salesforce.com nor the names of its contributors may\n * be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n'use strict';\nvar psl = require('psl');\n\nfunction getPublicSuffix(domain) {\n  return psl.get(domain);\n}\n\nexports.getPublicSuffix = getPublicSuffix;\n", "/*!\n * Copyright (c) 2015, Salesforce.com, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of Salesforce.com nor the names of its contributors may\n * be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n'use strict';\n/*jshint unused:false */\n\nfunction Store() {\n}\nexports.Store = Store;\n\n// Stores may be synchronous, but are still required to use a\n// Continuation-Passing Style API.  The CookieJar itself will expose a \"*Sync\"\n// API that converts from synchronous-callbacks to imperative style.\nStore.prototype.synchronous = false;\n\nStore.prototype.findCookie = function(domain, path, key, cb) {\n  throw new Error('findCookie is not implemented');\n};\n\nStore.prototype.findCookies = function(domain, path, cb) {\n  throw new Error('findCookies is not implemented');\n};\n\nStore.prototype.putCookie = function(cookie, cb) {\n  throw new Error('putCookie is not implemented');\n};\n\nStore.prototype.updateCookie = function(oldCookie, newCookie, cb) {\n  // recommended default implementation:\n  // return this.putCookie(newCookie, cb);\n  throw new Error('updateCookie is not implemented');\n};\n\nStore.prototype.removeCookie = function(domain, path, key, cb) {\n  throw new Error('removeCookie is not implemented');\n};\n\nStore.prototype.removeCookies = function(domain, path, cb) {\n  throw new Error('removeCookies is not implemented');\n};\n\nStore.prototype.removeAllCookies = function(cb) {\n  throw new Error('removeAllCookies is not implemented');\n}\n\nStore.prototype.getAllCookies = function(cb) {\n  throw new Error('getAllCookies is not implemented (therefore jar cannot be serialized)');\n};\n", "/*!\n * Copyright (c) 2015, Salesforce.com, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of Salesforce.com nor the names of its contributors may\n * be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\"use strict\";\nvar pubsuffix = require('./pubsuffix-psl');\n\n// Gives the permutation of all possible domainMatch()es of a given domain. The\n// array is in shortest-to-longest order.  Handy for indexing.\nfunction permuteDomain (domain) {\n  var pubSuf = pubsuffix.getPublicSuffix(domain);\n  if (!pubSuf) {\n    return null;\n  }\n  if (pubSuf == domain) {\n    return [domain];\n  }\n\n  var prefix = domain.slice(0, -(pubSuf.length + 1)); // \".example.com\"\n  var parts = prefix.split('.').reverse();\n  var cur = pubSuf;\n  var permutations = [cur];\n  while (parts.length) {\n    cur = parts.shift() + '.' + cur;\n    permutations.push(cur);\n  }\n  return permutations;\n}\n\nexports.permuteDomain = permuteDomain;\n", "/*!\n * Copyright (c) 2015, Salesforce.com, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of Salesforce.com nor the names of its contributors may\n * be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\"use strict\";\n/*\n * \"A request-path path-matches a given cookie-path if at least one of the\n * following conditions holds:\"\n */\nfunction pathMatch (reqPath, cookiePath) {\n  // \"o  The cookie-path and the request-path are identical.\"\n  if (cookiePath === reqPath) {\n    return true;\n  }\n\n  var idx = reqPath.indexOf(cookiePath);\n  if (idx === 0) {\n    // \"o  The cookie-path is a prefix of the request-path, and the last\n    // character of the cookie-path is %x2F (\"/\").\"\n    if (cookiePath.substr(-1) === \"/\") {\n      return true;\n    }\n\n    // \" o  The cookie-path is a prefix of the request-path, and the first\n    // character of the request-path that is not included in the cookie- path\n    // is a %x2F (\"/\") character.\"\n    if (reqPath.substr(cookiePath.length, 1) === \"/\") {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexports.pathMatch = pathMatch;\n", "/*!\n * Copyright (c) 2015, Salesforce.com, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of Salesforce.com nor the names of its contributors may\n * be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n'use strict';\nvar Store = require('./store').Store;\nvar permuteDomain = require('./permuteDomain').permuteDomain;\nvar pathMatch = require('./pathMatch').pathMatch;\nvar util = require('util');\n\nfunction MemoryCookieStore() {\n  Store.call(this);\n  this.idx = {};\n}\nutil.inherits(MemoryCookieStore, Store);\nexports.MemoryCookieStore = MemoryCookieStore;\nMemoryCookieStore.prototype.idx = null;\n\n// Since it's just a struct in RAM, this Store is synchronous\nMemoryCookieStore.prototype.synchronous = true;\n\n// force a default depth:\nMemoryCookieStore.prototype.inspect = function() {\n  return \"{ idx: \"+util.inspect(this.idx, false, 2)+' }';\n};\n\n// Use the new custom inspection symbol to add the custom inspect function if\n// available.\nif (util.inspect.custom) {\n  MemoryCookieStore.prototype[util.inspect.custom] = MemoryCookieStore.prototype.inspect;\n}\n\nMemoryCookieStore.prototype.findCookie = function(domain, path, key, cb) {\n  if (!this.idx[domain]) {\n    return cb(null,undefined);\n  }\n  if (!this.idx[domain][path]) {\n    return cb(null,undefined);\n  }\n  return cb(null,this.idx[domain][path][key]||null);\n};\n\nMemoryCookieStore.prototype.findCookies = function(domain, path, cb) {\n  var results = [];\n  if (!domain) {\n    return cb(null,[]);\n  }\n\n  var pathMatcher;\n  if (!path) {\n    // null means \"all paths\"\n    pathMatcher = function matchAll(domainIndex) {\n      for (var curPath in domainIndex) {\n        var pathIndex = domainIndex[curPath];\n        for (var key in pathIndex) {\n          results.push(pathIndex[key]);\n        }\n      }\n    };\n\n  } else {\n    pathMatcher = function matchRFC(domainIndex) {\n       //NOTE: we should use path-match algorithm from S5.1.4 here\n       //(see : https://github.com/ChromiumWebApps/chromium/blob/b3d3b4da8bb94c1b2e061600df106d590fda3620/net/cookies/canonical_cookie.cc#L299)\n       Object.keys(domainIndex).forEach(function (cookiePath) {\n         if (pathMatch(path, cookiePath)) {\n           var pathIndex = domainIndex[cookiePath];\n\n           for (var key in pathIndex) {\n             results.push(pathIndex[key]);\n           }\n         }\n       });\n     };\n  }\n\n  var domains = permuteDomain(domain) || [domain];\n  var idx = this.idx;\n  domains.forEach(function(curDomain) {\n    var domainIndex = idx[curDomain];\n    if (!domainIndex) {\n      return;\n    }\n    pathMatcher(domainIndex);\n  });\n\n  cb(null,results);\n};\n\nMemoryCookieStore.prototype.putCookie = function(cookie, cb) {\n  if (!this.idx[cookie.domain]) {\n    this.idx[cookie.domain] = {};\n  }\n  if (!this.idx[cookie.domain][cookie.path]) {\n    this.idx[cookie.domain][cookie.path] = {};\n  }\n  this.idx[cookie.domain][cookie.path][cookie.key] = cookie;\n  cb(null);\n};\n\nMemoryCookieStore.prototype.updateCookie = function(oldCookie, newCookie, cb) {\n  // updateCookie() may avoid updating cookies that are identical.  For example,\n  // lastAccessed may not be important to some stores and an equality\n  // comparison could exclude that field.\n  this.putCookie(newCookie,cb);\n};\n\nMemoryCookieStore.prototype.removeCookie = function(domain, path, key, cb) {\n  if (this.idx[domain] && this.idx[domain][path] && this.idx[domain][path][key]) {\n    delete this.idx[domain][path][key];\n  }\n  cb(null);\n};\n\nMemoryCookieStore.prototype.removeCookies = function(domain, path, cb) {\n  if (this.idx[domain]) {\n    if (path) {\n      delete this.idx[domain][path];\n    } else {\n      delete this.idx[domain];\n    }\n  }\n  return cb(null);\n};\n\nMemoryCookieStore.prototype.removeAllCookies = function(cb) {\n  this.idx = {};\n  return cb(null);\n}\n\nMemoryCookieStore.prototype.getAllCookies = function(cb) {\n  var cookies = [];\n  var idx = this.idx;\n\n  var domains = Object.keys(idx);\n  domains.forEach(function(domain) {\n    var paths = Object.keys(idx[domain]);\n    paths.forEach(function(path) {\n      var keys = Object.keys(idx[domain][path]);\n      keys.forEach(function(key) {\n        if (key !== null) {\n          cookies.push(idx[domain][path][key]);\n        }\n      });\n    });\n  });\n\n  // Sort by creationIndex so deserializing retains the creation order.\n  // When implementing your own store, this SHOULD retain the order too\n  cookies.sort(function(a,b) {\n    return (a.creationIndex||0) - (b.creationIndex||0);\n  });\n\n  cb(null, cookies);\n};\n", "// generated by genversion\nmodule.exports = '2.5.0'\n", "/*!\n * Copyright (c) 2015, Salesforce.com, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of Salesforce.com nor the names of its contributors may\n * be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n'use strict';\nvar net = require('net');\nvar urlParse = require('url').parse;\nvar util = require('util');\nvar pubsuffix = require('./pubsuffix-psl');\nvar Store = require('./store').Store;\nvar MemoryCookieStore = require('./memstore').MemoryCookieStore;\nvar pathMatch = require('./pathMatch').pathMatch;\nvar VERSION = require('./version');\n\nvar punycode;\ntry {\n  punycode = require('punycode');\n} catch(e) {\n  console.warn(\"tough-cookie: can't load punycode; won't use punycode for domain normalization\");\n}\n\n// From RFC6265 S4.1.1\n// note that it excludes \\x3B \";\"\nvar COOKIE_OCTETS = /^[\\x21\\x23-\\x2B\\x2D-\\x3A\\x3C-\\x5B\\x5D-\\x7E]+$/;\n\nvar CONTROL_CHARS = /[\\x00-\\x1F]/;\n\n// From Chromium // '\\r', '\\n' and '\\0' should be treated as a terminator in\n// the \"relaxed\" mode, see:\n// https://github.com/ChromiumWebApps/chromium/blob/b3d3b4da8bb94c1b2e061600df106d590fda3620/net/cookies/parsed_cookie.cc#L60\nvar TERMINATORS = ['\\n', '\\r', '\\0'];\n\n// RFC6265 S4.1.1 defines path value as 'any CHAR except CTLs or \";\"'\n// Note ';' is \\x3B\nvar PATH_VALUE = /[\\x20-\\x3A\\x3C-\\x7E]+/;\n\n// date-time parsing constants (RFC6265 S5.1.1)\n\nvar DATE_DELIM = /[\\x09\\x20-\\x2F\\x3B-\\x40\\x5B-\\x60\\x7B-\\x7E]/;\n\nvar MONTH_TO_NUM = {\n  jan:0, feb:1, mar:2, apr:3, may:4, jun:5,\n  jul:6, aug:7, sep:8, oct:9, nov:10, dec:11\n};\nvar NUM_TO_MONTH = [\n  'Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'\n];\nvar NUM_TO_DAY = [\n  'Sun','Mon','Tue','Wed','Thu','Fri','Sat'\n];\n\nvar MAX_TIME = 2147483647000; // 31-bit max\nvar MIN_TIME = 0; // 31-bit min\n\n/*\n * Parses a Natural number (i.e., non-negative integer) with either the\n *    <min>*<max>DIGIT ( non-digit *OCTET )\n * or\n *    <min>*<max>DIGIT\n * grammar (RFC6265 S5.1.1).\n *\n * The \"trailingOK\" boolean controls if the grammar accepts a\n * \"( non-digit *OCTET )\" trailer.\n */\nfunction parseDigits(token, minDigits, maxDigits, trailingOK) {\n  var count = 0;\n  while (count < token.length) {\n    var c = token.charCodeAt(count);\n    // \"non-digit = %x00-2F / %x3A-FF\"\n    if (c <= 0x2F || c >= 0x3A) {\n      break;\n    }\n    count++;\n  }\n\n  // constrain to a minimum and maximum number of digits.\n  if (count < minDigits || count > maxDigits) {\n    return null;\n  }\n\n  if (!trailingOK && count != token.length) {\n    return null;\n  }\n\n  return parseInt(token.substr(0,count), 10);\n}\n\nfunction parseTime(token) {\n  var parts = token.split(':');\n  var result = [0,0,0];\n\n  /* RF6256 S5.1.1:\n   *      time            = hms-time ( non-digit *OCTET )\n   *      hms-time        = time-field \":\" time-field \":\" time-field\n   *      time-field      = 1*2DIGIT\n   */\n\n  if (parts.length !== 3) {\n    return null;\n  }\n\n  for (var i = 0; i < 3; i++) {\n    // \"time-field\" must be strictly \"1*2DIGIT\", HOWEVER, \"hms-time\" can be\n    // followed by \"( non-digit *OCTET )\" so therefore the last time-field can\n    // have a trailer\n    var trailingOK = (i == 2);\n    var num = parseDigits(parts[i], 1, 2, trailingOK);\n    if (num === null) {\n      return null;\n    }\n    result[i] = num;\n  }\n\n  return result;\n}\n\nfunction parseMonth(token) {\n  token = String(token).substr(0,3).toLowerCase();\n  var num = MONTH_TO_NUM[token];\n  return num >= 0 ? num : null;\n}\n\n/*\n * RFC6265 S5.1.1 date parser (see RFC for full grammar)\n */\nfunction parseDate(str) {\n  if (!str) {\n    return;\n  }\n\n  /* RFC6265 S5.1.1:\n   * 2. Process each date-token sequentially in the order the date-tokens\n   * appear in the cookie-date\n   */\n  var tokens = str.split(DATE_DELIM);\n  if (!tokens) {\n    return;\n  }\n\n  var hour = null;\n  var minute = null;\n  var second = null;\n  var dayOfMonth = null;\n  var month = null;\n  var year = null;\n\n  for (var i=0; i<tokens.length; i++) {\n    var token = tokens[i].trim();\n    if (!token.length) {\n      continue;\n    }\n\n    var result;\n\n    /* 2.1. If the found-time flag is not set and the token matches the time\n     * production, set the found-time flag and set the hour- value,\n     * minute-value, and second-value to the numbers denoted by the digits in\n     * the date-token, respectively.  Skip the remaining sub-steps and continue\n     * to the next date-token.\n     */\n    if (second === null) {\n      result = parseTime(token);\n      if (result) {\n        hour = result[0];\n        minute = result[1];\n        second = result[2];\n        continue;\n      }\n    }\n\n    /* 2.2. If the found-day-of-month flag is not set and the date-token matches\n     * the day-of-month production, set the found-day-of- month flag and set\n     * the day-of-month-value to the number denoted by the date-token.  Skip\n     * the remaining sub-steps and continue to the next date-token.\n     */\n    if (dayOfMonth === null) {\n      // \"day-of-month = 1*2DIGIT ( non-digit *OCTET )\"\n      result = parseDigits(token, 1, 2, true);\n      if (result !== null) {\n        dayOfMonth = result;\n        continue;\n      }\n    }\n\n    /* 2.3. If the found-month flag is not set and the date-token matches the\n     * month production, set the found-month flag and set the month-value to\n     * the month denoted by the date-token.  Skip the remaining sub-steps and\n     * continue to the next date-token.\n     */\n    if (month === null) {\n      result = parseMonth(token);\n      if (result !== null) {\n        month = result;\n        continue;\n      }\n    }\n\n    /* 2.4. If the found-year flag is not set and the date-token matches the\n     * year production, set the found-year flag and set the year-value to the\n     * number denoted by the date-token.  Skip the remaining sub-steps and\n     * continue to the next date-token.\n     */\n    if (year === null) {\n      // \"year = 2*4DIGIT ( non-digit *OCTET )\"\n      result = parseDigits(token, 2, 4, true);\n      if (result !== null) {\n        year = result;\n        /* From S5.1.1:\n         * 3.  If the year-value is greater than or equal to 70 and less\n         * than or equal to 99, increment the year-value by 1900.\n         * 4.  If the year-value is greater than or equal to 0 and less\n         * than or equal to 69, increment the year-value by 2000.\n         */\n        if (year >= 70 && year <= 99) {\n          year += 1900;\n        } else if (year >= 0 && year <= 69) {\n          year += 2000;\n        }\n      }\n    }\n  }\n\n  /* RFC 6265 S5.1.1\n   * \"5. Abort these steps and fail to parse the cookie-date if:\n   *     *  at least one of the found-day-of-month, found-month, found-\n   *        year, or found-time flags is not set,\n   *     *  the day-of-month-value is less than 1 or greater than 31,\n   *     *  the year-value is less than 1601,\n   *     *  the hour-value is greater than 23,\n   *     *  the minute-value is greater than 59, or\n   *     *  the second-value is greater than 59.\n   *     (Note that leap seconds cannot be represented in this syntax.)\"\n   *\n   * So, in order as above:\n   */\n  if (\n    dayOfMonth === null || month === null || year === null || second === null ||\n    dayOfMonth < 1 || dayOfMonth > 31 ||\n    year < 1601 ||\n    hour > 23 ||\n    minute > 59 ||\n    second > 59\n  ) {\n    return;\n  }\n\n  return new Date(Date.UTC(year, month, dayOfMonth, hour, minute, second));\n}\n\nfunction formatDate(date) {\n  var d = date.getUTCDate(); d = d >= 10 ? d : '0'+d;\n  var h = date.getUTCHours(); h = h >= 10 ? h : '0'+h;\n  var m = date.getUTCMinutes(); m = m >= 10 ? m : '0'+m;\n  var s = date.getUTCSeconds(); s = s >= 10 ? s : '0'+s;\n  return NUM_TO_DAY[date.getUTCDay()] + ', ' +\n    d+' '+ NUM_TO_MONTH[date.getUTCMonth()] +' '+ date.getUTCFullYear() +' '+\n    h+':'+m+':'+s+' GMT';\n}\n\n// S5.1.2 Canonicalized Host Names\nfunction canonicalDomain(str) {\n  if (str == null) {\n    return null;\n  }\n  str = str.trim().replace(/^\\./,''); // S4.1.2.3 & S5.2.3: ignore leading .\n\n  // convert to IDN if any non-ASCII characters\n  if (punycode && /[^\\u0001-\\u007f]/.test(str)) {\n    str = punycode.toASCII(str);\n  }\n\n  return str.toLowerCase();\n}\n\n// S5.1.3 Domain Matching\nfunction domainMatch(str, domStr, canonicalize) {\n  if (str == null || domStr == null) {\n    return null;\n  }\n  if (canonicalize !== false) {\n    str = canonicalDomain(str);\n    domStr = canonicalDomain(domStr);\n  }\n\n  /*\n   * \"The domain string and the string are identical. (Note that both the\n   * domain string and the string will have been canonicalized to lower case at\n   * this point)\"\n   */\n  if (str == domStr) {\n    return true;\n  }\n\n  /* \"All of the following [three] conditions hold:\" (order adjusted from the RFC) */\n\n  /* \"* The string is a host name (i.e., not an IP address).\" */\n  if (net.isIP(str)) {\n    return false;\n  }\n\n  /* \"* The domain string is a suffix of the string\" */\n  var idx = str.indexOf(domStr);\n  if (idx <= 0) {\n    return false; // it's a non-match (-1) or prefix (0)\n  }\n\n  // e.g \"a.b.c\".indexOf(\"b.c\") === 2\n  // 5 === 3+2\n  if (str.length !== domStr.length + idx) { // it's not a suffix\n    return false;\n  }\n\n  /* \"* The last character of the string that is not included in the domain\n  * string is a %x2E (\".\") character.\" */\n  if (str.substr(idx-1,1) !== '.') {\n    return false;\n  }\n\n  return true;\n}\n\n\n// RFC6265 S5.1.4 Paths and Path-Match\n\n/*\n * \"The user agent MUST use an algorithm equivalent to the following algorithm\n * to compute the default-path of a cookie:\"\n *\n * Assumption: the path (and not query part or absolute uri) is passed in.\n */\nfunction defaultPath(path) {\n  // \"2. If the uri-path is empty or if the first character of the uri-path is not\n  // a %x2F (\"/\") character, output %x2F (\"/\") and skip the remaining steps.\n  if (!path || path.substr(0,1) !== \"/\") {\n    return \"/\";\n  }\n\n  // \"3. If the uri-path contains no more than one %x2F (\"/\") character, output\n  // %x2F (\"/\") and skip the remaining step.\"\n  if (path === \"/\") {\n    return path;\n  }\n\n  var rightSlash = path.lastIndexOf(\"/\");\n  if (rightSlash === 0) {\n    return \"/\";\n  }\n\n  // \"4. Output the characters of the uri-path from the first character up to,\n  // but not including, the right-most %x2F (\"/\").\"\n  return path.slice(0, rightSlash);\n}\n\nfunction trimTerminator(str) {\n  for (var t = 0; t < TERMINATORS.length; t++) {\n    var terminatorIdx = str.indexOf(TERMINATORS[t]);\n    if (terminatorIdx !== -1) {\n      str = str.substr(0,terminatorIdx);\n    }\n  }\n\n  return str;\n}\n\nfunction parseCookiePair(cookiePair, looseMode) {\n  cookiePair = trimTerminator(cookiePair);\n\n  var firstEq = cookiePair.indexOf('=');\n  if (looseMode) {\n    if (firstEq === 0) { // '=' is immediately at start\n      cookiePair = cookiePair.substr(1);\n      firstEq = cookiePair.indexOf('='); // might still need to split on '='\n    }\n  } else { // non-loose mode\n    if (firstEq <= 0) { // no '=' or is at start\n      return; // needs to have non-empty \"cookie-name\"\n    }\n  }\n\n  var cookieName, cookieValue;\n  if (firstEq <= 0) {\n    cookieName = \"\";\n    cookieValue = cookiePair.trim();\n  } else {\n    cookieName = cookiePair.substr(0, firstEq).trim();\n    cookieValue = cookiePair.substr(firstEq+1).trim();\n  }\n\n  if (CONTROL_CHARS.test(cookieName) || CONTROL_CHARS.test(cookieValue)) {\n    return;\n  }\n\n  var c = new Cookie();\n  c.key = cookieName;\n  c.value = cookieValue;\n  return c;\n}\n\nfunction parse(str, options) {\n  if (!options || typeof options !== 'object') {\n    options = {};\n  }\n  str = str.trim();\n\n  // We use a regex to parse the \"name-value-pair\" part of S5.2\n  var firstSemi = str.indexOf(';'); // S5.2 step 1\n  var cookiePair = (firstSemi === -1) ? str : str.substr(0, firstSemi);\n  var c = parseCookiePair(cookiePair, !!options.loose);\n  if (!c) {\n    return;\n  }\n\n  if (firstSemi === -1) {\n    return c;\n  }\n\n  // S5.2.3 \"unparsed-attributes consist of the remainder of the set-cookie-string\n  // (including the %x3B (\";\") in question).\" plus later on in the same section\n  // \"discard the first \";\" and trim\".\n  var unparsed = str.slice(firstSemi + 1).trim();\n\n  // \"If the unparsed-attributes string is empty, skip the rest of these\n  // steps.\"\n  if (unparsed.length === 0) {\n    return c;\n  }\n\n  /*\n   * S5.2 says that when looping over the items \"[p]rocess the attribute-name\n   * and attribute-value according to the requirements in the following\n   * subsections\" for every item.  Plus, for many of the individual attributes\n   * in S5.3 it says to use the \"attribute-value of the last attribute in the\n   * cookie-attribute-list\".  Therefore, in this implementation, we overwrite\n   * the previous value.\n   */\n  var cookie_avs = unparsed.split(';');\n  while (cookie_avs.length) {\n    var av = cookie_avs.shift().trim();\n    if (av.length === 0) { // happens if \";;\" appears\n      continue;\n    }\n    var av_sep = av.indexOf('=');\n    var av_key, av_value;\n\n    if (av_sep === -1) {\n      av_key = av;\n      av_value = null;\n    } else {\n      av_key = av.substr(0,av_sep);\n      av_value = av.substr(av_sep+1);\n    }\n\n    av_key = av_key.trim().toLowerCase();\n\n    if (av_value) {\n      av_value = av_value.trim();\n    }\n\n    switch(av_key) {\n    case 'expires': // S5.2.1\n      if (av_value) {\n        var exp = parseDate(av_value);\n        // \"If the attribute-value failed to parse as a cookie date, ignore the\n        // cookie-av.\"\n        if (exp) {\n          // over and underflow not realistically a concern: V8's getTime() seems to\n          // store something larger than a 32-bit time_t (even with 32-bit node)\n          c.expires = exp;\n        }\n      }\n      break;\n\n    case 'max-age': // S5.2.2\n      if (av_value) {\n        // \"If the first character of the attribute-value is not a DIGIT or a \"-\"\n        // character ...[or]... If the remainder of attribute-value contains a\n        // non-DIGIT character, ignore the cookie-av.\"\n        if (/^-?[0-9]+$/.test(av_value)) {\n          var delta = parseInt(av_value, 10);\n          // \"If delta-seconds is less than or equal to zero (0), let expiry-time\n          // be the earliest representable date and time.\"\n          c.setMaxAge(delta);\n        }\n      }\n      break;\n\n    case 'domain': // S5.2.3\n      // \"If the attribute-value is empty, the behavior is undefined.  However,\n      // the user agent SHOULD ignore the cookie-av entirely.\"\n      if (av_value) {\n        // S5.2.3 \"Let cookie-domain be the attribute-value without the leading %x2E\n        // (\".\") character.\"\n        var domain = av_value.trim().replace(/^\\./, '');\n        if (domain) {\n          // \"Convert the cookie-domain to lower case.\"\n          c.domain = domain.toLowerCase();\n        }\n      }\n      break;\n\n    case 'path': // S5.2.4\n      /*\n       * \"If the attribute-value is empty or if the first character of the\n       * attribute-value is not %x2F (\"/\"):\n       *   Let cookie-path be the default-path.\n       * Otherwise:\n       *   Let cookie-path be the attribute-value.\"\n       *\n       * We'll represent the default-path as null since it depends on the\n       * context of the parsing.\n       */\n      c.path = av_value && av_value[0] === \"/\" ? av_value : null;\n      break;\n\n    case 'secure': // S5.2.5\n      /*\n       * \"If the attribute-name case-insensitively matches the string \"Secure\",\n       * the user agent MUST append an attribute to the cookie-attribute-list\n       * with an attribute-name of Secure and an empty attribute-value.\"\n       */\n      c.secure = true;\n      break;\n\n    case 'httponly': // S5.2.6 -- effectively the same as 'secure'\n      c.httpOnly = true;\n      break;\n\n    default:\n      c.extensions = c.extensions || [];\n      c.extensions.push(av);\n      break;\n    }\n  }\n\n  return c;\n}\n\n// avoid the V8 deoptimization monster!\nfunction jsonParse(str) {\n  var obj;\n  try {\n    obj = JSON.parse(str);\n  } catch (e) {\n    return e;\n  }\n  return obj;\n}\n\nfunction fromJSON(str) {\n  if (!str) {\n    return null;\n  }\n\n  var obj;\n  if (typeof str === 'string') {\n    obj = jsonParse(str);\n    if (obj instanceof Error) {\n      return null;\n    }\n  } else {\n    // assume it's an Object\n    obj = str;\n  }\n\n  var c = new Cookie();\n  for (var i=0; i<Cookie.serializableProperties.length; i++) {\n    var prop = Cookie.serializableProperties[i];\n    if (obj[prop] === undefined ||\n        obj[prop] === Cookie.prototype[prop])\n    {\n      continue; // leave as prototype default\n    }\n\n    if (prop === 'expires' ||\n        prop === 'creation' ||\n        prop === 'lastAccessed')\n    {\n      if (obj[prop] === null) {\n        c[prop] = null;\n      } else {\n        c[prop] = obj[prop] == \"Infinity\" ?\n          \"Infinity\" : new Date(obj[prop]);\n      }\n    } else {\n      c[prop] = obj[prop];\n    }\n  }\n\n  return c;\n}\n\n/* Section 5.4 part 2:\n * \"*  Cookies with longer paths are listed before cookies with\n *     shorter paths.\n *\n *  *  Among cookies that have equal-length path fields, cookies with\n *     earlier creation-times are listed before cookies with later\n *     creation-times.\"\n */\n\nfunction cookieCompare(a,b) {\n  var cmp = 0;\n\n  // descending for length: b CMP a\n  var aPathLen = a.path ? a.path.length : 0;\n  var bPathLen = b.path ? b.path.length : 0;\n  cmp = bPathLen - aPathLen;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  // ascending for time: a CMP b\n  var aTime = a.creation ? a.creation.getTime() : MAX_TIME;\n  var bTime = b.creation ? b.creation.getTime() : MAX_TIME;\n  cmp = aTime - bTime;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  // break ties for the same millisecond (precision of JavaScript's clock)\n  cmp = a.creationIndex - b.creationIndex;\n\n  return cmp;\n}\n\n// Gives the permutation of all possible pathMatch()es of a given path. The\n// array is in longest-to-shortest order.  Handy for indexing.\nfunction permutePath(path) {\n  if (path === '/') {\n    return ['/'];\n  }\n  if (path.lastIndexOf('/') === path.length-1) {\n    path = path.substr(0,path.length-1);\n  }\n  var permutations = [path];\n  while (path.length > 1) {\n    var lindex = path.lastIndexOf('/');\n    if (lindex === 0) {\n      break;\n    }\n    path = path.substr(0,lindex);\n    permutations.push(path);\n  }\n  permutations.push('/');\n  return permutations;\n}\n\nfunction getCookieContext(url) {\n  if (url instanceof Object) {\n    return url;\n  }\n  // NOTE: decodeURI will throw on malformed URIs (see GH-32).\n  // Therefore, we will just skip decoding for such URIs.\n  try {\n    url = decodeURI(url);\n  }\n  catch(err) {\n    // Silently swallow error\n  }\n\n  return urlParse(url);\n}\n\nfunction Cookie(options) {\n  options = options || {};\n\n  Object.keys(options).forEach(function(prop) {\n    if (Cookie.prototype.hasOwnProperty(prop) &&\n        Cookie.prototype[prop] !== options[prop] &&\n        prop.substr(0,1) !== '_')\n    {\n      this[prop] = options[prop];\n    }\n  }, this);\n\n  this.creation = this.creation || new Date();\n\n  // used to break creation ties in cookieCompare():\n  Object.defineProperty(this, 'creationIndex', {\n    configurable: false,\n    enumerable: false, // important for assert.deepEqual checks\n    writable: true,\n    value: ++Cookie.cookiesCreated\n  });\n}\n\nCookie.cookiesCreated = 0; // incremented each time a cookie is created\n\nCookie.parse = parse;\nCookie.fromJSON = fromJSON;\n\nCookie.prototype.key = \"\";\nCookie.prototype.value = \"\";\n\n// the order in which the RFC has them:\nCookie.prototype.expires = \"Infinity\"; // coerces to literal Infinity\nCookie.prototype.maxAge = null; // takes precedence over expires for TTL\nCookie.prototype.domain = null;\nCookie.prototype.path = null;\nCookie.prototype.secure = false;\nCookie.prototype.httpOnly = false;\nCookie.prototype.extensions = null;\n\n// set by the CookieJar:\nCookie.prototype.hostOnly = null; // boolean when set\nCookie.prototype.pathIsDefault = null; // boolean when set\nCookie.prototype.creation = null; // Date when set; defaulted by Cookie.parse\nCookie.prototype.lastAccessed = null; // Date when set\nObject.defineProperty(Cookie.prototype, 'creationIndex', {\n  configurable: true,\n  enumerable: false,\n  writable: true,\n  value: 0\n});\n\nCookie.serializableProperties = Object.keys(Cookie.prototype)\n  .filter(function(prop) {\n    return !(\n      Cookie.prototype[prop] instanceof Function ||\n      prop === 'creationIndex' ||\n      prop.substr(0,1) === '_'\n    );\n  });\n\nCookie.prototype.inspect = function inspect() {\n  var now = Date.now();\n  return 'Cookie=\"'+this.toString() +\n    '; hostOnly='+(this.hostOnly != null ? this.hostOnly : '?') +\n    '; aAge='+(this.lastAccessed ? (now-this.lastAccessed.getTime())+'ms' : '?') +\n    '; cAge='+(this.creation ? (now-this.creation.getTime())+'ms' : '?') +\n    '\"';\n};\n\n// Use the new custom inspection symbol to add the custom inspect function if\n// available.\nif (util.inspect.custom) {\n  Cookie.prototype[util.inspect.custom] = Cookie.prototype.inspect;\n}\n\nCookie.prototype.toJSON = function() {\n  var obj = {};\n\n  var props = Cookie.serializableProperties;\n  for (var i=0; i<props.length; i++) {\n    var prop = props[i];\n    if (this[prop] === Cookie.prototype[prop]) {\n      continue; // leave as prototype default\n    }\n\n    if (prop === 'expires' ||\n        prop === 'creation' ||\n        prop === 'lastAccessed')\n    {\n      if (this[prop] === null) {\n        obj[prop] = null;\n      } else {\n        obj[prop] = this[prop] == \"Infinity\" ? // intentionally not ===\n          \"Infinity\" : this[prop].toISOString();\n      }\n    } else if (prop === 'maxAge') {\n      if (this[prop] !== null) {\n        // again, intentionally not ===\n        obj[prop] = (this[prop] == Infinity || this[prop] == -Infinity) ?\n          this[prop].toString() : this[prop];\n      }\n    } else {\n      if (this[prop] !== Cookie.prototype[prop]) {\n        obj[prop] = this[prop];\n      }\n    }\n  }\n\n  return obj;\n};\n\nCookie.prototype.clone = function() {\n  return fromJSON(this.toJSON());\n};\n\nCookie.prototype.validate = function validate() {\n  if (!COOKIE_OCTETS.test(this.value)) {\n    return false;\n  }\n  if (this.expires != Infinity && !(this.expires instanceof Date) && !parseDate(this.expires)) {\n    return false;\n  }\n  if (this.maxAge != null && this.maxAge <= 0) {\n    return false; // \"Max-Age=\" non-zero-digit *DIGIT\n  }\n  if (this.path != null && !PATH_VALUE.test(this.path)) {\n    return false;\n  }\n\n  var cdomain = this.cdomain();\n  if (cdomain) {\n    if (cdomain.match(/\\.$/)) {\n      return false; // S4.1.2.3 suggests that this is bad. domainMatch() tests confirm this\n    }\n    var suffix = pubsuffix.getPublicSuffix(cdomain);\n    if (suffix == null) { // it's a public suffix\n      return false;\n    }\n  }\n  return true;\n};\n\nCookie.prototype.setExpires = function setExpires(exp) {\n  if (exp instanceof Date) {\n    this.expires = exp;\n  } else {\n    this.expires = parseDate(exp) || \"Infinity\";\n  }\n};\n\nCookie.prototype.setMaxAge = function setMaxAge(age) {\n  if (age === Infinity || age === -Infinity) {\n    this.maxAge = age.toString(); // so JSON.stringify() works\n  } else {\n    this.maxAge = age;\n  }\n};\n\n// gives Cookie header format\nCookie.prototype.cookieString = function cookieString() {\n  var val = this.value;\n  if (val == null) {\n    val = '';\n  }\n  if (this.key === '') {\n    return val;\n  }\n  return this.key+'='+val;\n};\n\n// gives Set-Cookie header format\nCookie.prototype.toString = function toString() {\n  var str = this.cookieString();\n\n  if (this.expires != Infinity) {\n    if (this.expires instanceof Date) {\n      str += '; Expires='+formatDate(this.expires);\n    } else {\n      str += '; Expires='+this.expires;\n    }\n  }\n\n  if (this.maxAge != null && this.maxAge != Infinity) {\n    str += '; Max-Age='+this.maxAge;\n  }\n\n  if (this.domain && !this.hostOnly) {\n    str += '; Domain='+this.domain;\n  }\n  if (this.path) {\n    str += '; Path='+this.path;\n  }\n\n  if (this.secure) {\n    str += '; Secure';\n  }\n  if (this.httpOnly) {\n    str += '; HttpOnly';\n  }\n  if (this.extensions) {\n    this.extensions.forEach(function(ext) {\n      str += '; '+ext;\n    });\n  }\n\n  return str;\n};\n\n// TTL() partially replaces the \"expiry-time\" parts of S5.3 step 3 (setCookie()\n// elsewhere)\n// S5.3 says to give the \"latest representable date\" for which we use Infinity\n// For \"expired\" we use 0\nCookie.prototype.TTL = function TTL(now) {\n  /* RFC6265 S4.1.2.2 If a cookie has both the Max-Age and the Expires\n   * attribute, the Max-Age attribute has precedence and controls the\n   * expiration date of the cookie.\n   * (Concurs with S5.3 step 3)\n   */\n  if (this.maxAge != null) {\n    return this.maxAge<=0 ? 0 : this.maxAge*1000;\n  }\n\n  var expires = this.expires;\n  if (expires != Infinity) {\n    if (!(expires instanceof Date)) {\n      expires = parseDate(expires) || Infinity;\n    }\n\n    if (expires == Infinity) {\n      return Infinity;\n    }\n\n    return expires.getTime() - (now || Date.now());\n  }\n\n  return Infinity;\n};\n\n// expiryTime() replaces the \"expiry-time\" parts of S5.3 step 3 (setCookie()\n// elsewhere)\nCookie.prototype.expiryTime = function expiryTime(now) {\n  if (this.maxAge != null) {\n    var relativeTo = now || this.creation || new Date();\n    var age = (this.maxAge <= 0) ? -Infinity : this.maxAge*1000;\n    return relativeTo.getTime() + age;\n  }\n\n  if (this.expires == Infinity) {\n    return Infinity;\n  }\n  return this.expires.getTime();\n};\n\n// expiryDate() replaces the \"expiry-time\" parts of S5.3 step 3 (setCookie()\n// elsewhere), except it returns a Date\nCookie.prototype.expiryDate = function expiryDate(now) {\n  var millisec = this.expiryTime(now);\n  if (millisec == Infinity) {\n    return new Date(MAX_TIME);\n  } else if (millisec == -Infinity) {\n    return new Date(MIN_TIME);\n  } else {\n    return new Date(millisec);\n  }\n};\n\n// This replaces the \"persistent-flag\" parts of S5.3 step 3\nCookie.prototype.isPersistent = function isPersistent() {\n  return (this.maxAge != null || this.expires != Infinity);\n};\n\n// Mostly S5.1.2 and S5.2.3:\nCookie.prototype.cdomain =\nCookie.prototype.canonicalizedDomain = function canonicalizedDomain() {\n  if (this.domain == null) {\n    return null;\n  }\n  return canonicalDomain(this.domain);\n};\n\nfunction CookieJar(store, options) {\n  if (typeof options === \"boolean\") {\n    options = {rejectPublicSuffixes: options};\n  } else if (options == null) {\n    options = {};\n  }\n  if (options.rejectPublicSuffixes != null) {\n    this.rejectPublicSuffixes = options.rejectPublicSuffixes;\n  }\n  if (options.looseMode != null) {\n    this.enableLooseMode = options.looseMode;\n  }\n\n  if (!store) {\n    store = new MemoryCookieStore();\n  }\n  this.store = store;\n}\nCookieJar.prototype.store = null;\nCookieJar.prototype.rejectPublicSuffixes = true;\nCookieJar.prototype.enableLooseMode = false;\nvar CAN_BE_SYNC = [];\n\nCAN_BE_SYNC.push('setCookie');\nCookieJar.prototype.setCookie = function(cookie, url, options, cb) {\n  var err;\n  var context = getCookieContext(url);\n  if (options instanceof Function) {\n    cb = options;\n    options = {};\n  }\n\n  var host = canonicalDomain(context.hostname);\n  var loose = this.enableLooseMode;\n  if (options.loose != null) {\n    loose = options.loose;\n  }\n\n  // S5.3 step 1\n  if (!(cookie instanceof Cookie)) {\n    cookie = Cookie.parse(cookie, { loose: loose });\n  }\n  if (!cookie) {\n    err = new Error(\"Cookie failed to parse\");\n    return cb(options.ignoreError ? null : err);\n  }\n\n  // S5.3 step 2\n  var now = options.now || new Date(); // will assign later to save effort in the face of errors\n\n  // S5.3 step 3: NOOP; persistent-flag and expiry-time is handled by getCookie()\n\n  // S5.3 step 4: NOOP; domain is null by default\n\n  // S5.3 step 5: public suffixes\n  if (this.rejectPublicSuffixes && cookie.domain) {\n    var suffix = pubsuffix.getPublicSuffix(cookie.cdomain());\n    if (suffix == null) { // e.g. \"com\"\n      err = new Error(\"Cookie has domain set to a public suffix\");\n      return cb(options.ignoreError ? null : err);\n    }\n  }\n\n  // S5.3 step 6:\n  if (cookie.domain) {\n    if (!domainMatch(host, cookie.cdomain(), false)) {\n      err = new Error(\"Cookie not in this host's domain. Cookie:\"+cookie.cdomain()+\" Request:\"+host);\n      return cb(options.ignoreError ? null : err);\n    }\n\n    if (cookie.hostOnly == null) { // don't reset if already set\n      cookie.hostOnly = false;\n    }\n\n  } else {\n    cookie.hostOnly = true;\n    cookie.domain = host;\n  }\n\n  //S5.2.4 If the attribute-value is empty or if the first character of the\n  //attribute-value is not %x2F (\"/\"):\n  //Let cookie-path be the default-path.\n  if (!cookie.path || cookie.path[0] !== '/') {\n    cookie.path = defaultPath(context.pathname);\n    cookie.pathIsDefault = true;\n  }\n\n  // S5.3 step 8: NOOP; secure attribute\n  // S5.3 step 9: NOOP; httpOnly attribute\n\n  // S5.3 step 10\n  if (options.http === false && cookie.httpOnly) {\n    err = new Error(\"Cookie is HttpOnly and this isn't an HTTP API\");\n    return cb(options.ignoreError ? null : err);\n  }\n\n  var store = this.store;\n\n  if (!store.updateCookie) {\n    store.updateCookie = function(oldCookie, newCookie, cb) {\n      this.putCookie(newCookie, cb);\n    };\n  }\n\n  function withCookie(err, oldCookie) {\n    if (err) {\n      return cb(err);\n    }\n\n    var next = function(err) {\n      if (err) {\n        return cb(err);\n      } else {\n        cb(null, cookie);\n      }\n    };\n\n    if (oldCookie) {\n      // S5.3 step 11 - \"If the cookie store contains a cookie with the same name,\n      // domain, and path as the newly created cookie:\"\n      if (options.http === false && oldCookie.httpOnly) { // step 11.2\n        err = new Error(\"old Cookie is HttpOnly and this isn't an HTTP API\");\n        return cb(options.ignoreError ? null : err);\n      }\n      cookie.creation = oldCookie.creation; // step 11.3\n      cookie.creationIndex = oldCookie.creationIndex; // preserve tie-breaker\n      cookie.lastAccessed = now;\n      // Step 11.4 (delete cookie) is implied by just setting the new one:\n      store.updateCookie(oldCookie, cookie, next); // step 12\n\n    } else {\n      cookie.creation = cookie.lastAccessed = now;\n      store.putCookie(cookie, next); // step 12\n    }\n  }\n\n  store.findCookie(cookie.domain, cookie.path, cookie.key, withCookie);\n};\n\n// RFC6365 S5.4\nCAN_BE_SYNC.push('getCookies');\nCookieJar.prototype.getCookies = function(url, options, cb) {\n  var context = getCookieContext(url);\n  if (options instanceof Function) {\n    cb = options;\n    options = {};\n  }\n\n  var host = canonicalDomain(context.hostname);\n  var path = context.pathname || '/';\n\n  var secure = options.secure;\n  if (secure == null && context.protocol &&\n      (context.protocol == 'https:' || context.protocol == 'wss:'))\n  {\n    secure = true;\n  }\n\n  var http = options.http;\n  if (http == null) {\n    http = true;\n  }\n\n  var now = options.now || Date.now();\n  var expireCheck = options.expire !== false;\n  var allPaths = !!options.allPaths;\n  var store = this.store;\n\n  function matchingCookie(c) {\n    // \"Either:\n    //   The cookie's host-only-flag is true and the canonicalized\n    //   request-host is identical to the cookie's domain.\n    // Or:\n    //   The cookie's host-only-flag is false and the canonicalized\n    //   request-host domain-matches the cookie's domain.\"\n    if (c.hostOnly) {\n      if (c.domain != host) {\n        return false;\n      }\n    } else {\n      if (!domainMatch(host, c.domain, false)) {\n        return false;\n      }\n    }\n\n    // \"The request-uri's path path-matches the cookie's path.\"\n    if (!allPaths && !pathMatch(path, c.path)) {\n      return false;\n    }\n\n    // \"If the cookie's secure-only-flag is true, then the request-uri's\n    // scheme must denote a \"secure\" protocol\"\n    if (c.secure && !secure) {\n      return false;\n    }\n\n    // \"If the cookie's http-only-flag is true, then exclude the cookie if the\n    // cookie-string is being generated for a \"non-HTTP\" API\"\n    if (c.httpOnly && !http) {\n      return false;\n    }\n\n    // deferred from S5.3\n    // non-RFC: allow retention of expired cookies by choice\n    if (expireCheck && c.expiryTime() <= now) {\n      store.removeCookie(c.domain, c.path, c.key, function(){}); // result ignored\n      return false;\n    }\n\n    return true;\n  }\n\n  store.findCookies(host, allPaths ? null : path, function(err,cookies) {\n    if (err) {\n      return cb(err);\n    }\n\n    cookies = cookies.filter(matchingCookie);\n\n    // sorting of S5.4 part 2\n    if (options.sort !== false) {\n      cookies = cookies.sort(cookieCompare);\n    }\n\n    // S5.4 part 3\n    var now = new Date();\n    cookies.forEach(function(c) {\n      c.lastAccessed = now;\n    });\n    // TODO persist lastAccessed\n\n    cb(null,cookies);\n  });\n};\n\nCAN_BE_SYNC.push('getCookieString');\nCookieJar.prototype.getCookieString = function(/*..., cb*/) {\n  var args = Array.prototype.slice.call(arguments,0);\n  var cb = args.pop();\n  var next = function(err,cookies) {\n    if (err) {\n      cb(err);\n    } else {\n      cb(null, cookies\n        .sort(cookieCompare)\n        .map(function(c){\n          return c.cookieString();\n        })\n        .join('; '));\n    }\n  };\n  args.push(next);\n  this.getCookies.apply(this,args);\n};\n\nCAN_BE_SYNC.push('getSetCookieStrings');\nCookieJar.prototype.getSetCookieStrings = function(/*..., cb*/) {\n  var args = Array.prototype.slice.call(arguments,0);\n  var cb = args.pop();\n  var next = function(err,cookies) {\n    if (err) {\n      cb(err);\n    } else {\n      cb(null, cookies.map(function(c){\n        return c.toString();\n      }));\n    }\n  };\n  args.push(next);\n  this.getCookies.apply(this,args);\n};\n\nCAN_BE_SYNC.push('serialize');\nCookieJar.prototype.serialize = function(cb) {\n  var type = this.store.constructor.name;\n  if (type === 'Object') {\n    type = null;\n  }\n\n  // update README.md \"Serialization Format\" if you change this, please!\n  var serialized = {\n    // The version of tough-cookie that serialized this jar. Generally a good\n    // practice since future versions can make data import decisions based on\n    // known past behavior. When/if this matters, use `semver`.\n    version: 'tough-cookie@'+VERSION,\n\n    // add the store type, to make humans happy:\n    storeType: type,\n\n    // CookieJar configuration:\n    rejectPublicSuffixes: !!this.rejectPublicSuffixes,\n\n    // this gets filled from getAllCookies:\n    cookies: []\n  };\n\n  if (!(this.store.getAllCookies &&\n        typeof this.store.getAllCookies === 'function'))\n  {\n    return cb(new Error('store does not support getAllCookies and cannot be serialized'));\n  }\n\n  this.store.getAllCookies(function(err,cookies) {\n    if (err) {\n      return cb(err);\n    }\n\n    serialized.cookies = cookies.map(function(cookie) {\n      // convert to serialized 'raw' cookies\n      cookie = (cookie instanceof Cookie) ? cookie.toJSON() : cookie;\n\n      // Remove the index so new ones get assigned during deserialization\n      delete cookie.creationIndex;\n\n      return cookie;\n    });\n\n    return cb(null, serialized);\n  });\n};\n\n// well-known name that JSON.stringify calls\nCookieJar.prototype.toJSON = function() {\n  return this.serializeSync();\n};\n\n// use the class method CookieJar.deserialize instead of calling this directly\nCAN_BE_SYNC.push('_importCookies');\nCookieJar.prototype._importCookies = function(serialized, cb) {\n  var jar = this;\n  var cookies = serialized.cookies;\n  if (!cookies || !Array.isArray(cookies)) {\n    return cb(new Error('serialized jar has no cookies array'));\n  }\n  cookies = cookies.slice(); // do not modify the original\n\n  function putNext(err) {\n    if (err) {\n      return cb(err);\n    }\n\n    if (!cookies.length) {\n      return cb(err, jar);\n    }\n\n    var cookie;\n    try {\n      cookie = fromJSON(cookies.shift());\n    } catch (e) {\n      return cb(e);\n    }\n\n    if (cookie === null) {\n      return putNext(null); // skip this cookie\n    }\n\n    jar.store.putCookie(cookie, putNext);\n  }\n\n  putNext();\n};\n\nCookieJar.deserialize = function(strOrObj, store, cb) {\n  if (arguments.length !== 3) {\n    // store is optional\n    cb = store;\n    store = null;\n  }\n\n  var serialized;\n  if (typeof strOrObj === 'string') {\n    serialized = jsonParse(strOrObj);\n    if (serialized instanceof Error) {\n      return cb(serialized);\n    }\n  } else {\n    serialized = strOrObj;\n  }\n\n  var jar = new CookieJar(store, serialized.rejectPublicSuffixes);\n  jar._importCookies(serialized, function(err) {\n    if (err) {\n      return cb(err);\n    }\n    cb(null, jar);\n  });\n};\n\nCookieJar.deserializeSync = function(strOrObj, store) {\n  var serialized = typeof strOrObj === 'string' ?\n    JSON.parse(strOrObj) : strOrObj;\n  var jar = new CookieJar(store, serialized.rejectPublicSuffixes);\n\n  // catch this mistake early:\n  if (!jar.store.synchronous) {\n    throw new Error('CookieJar store is not synchronous; use async API instead.');\n  }\n\n  jar._importCookiesSync(serialized);\n  return jar;\n};\nCookieJar.fromJSON = CookieJar.deserializeSync;\n\nCookieJar.prototype.clone = function(newStore, cb) {\n  if (arguments.length === 1) {\n    cb = newStore;\n    newStore = null;\n  }\n\n  this.serialize(function(err,serialized) {\n    if (err) {\n      return cb(err);\n    }\n    CookieJar.deserialize(serialized, newStore, cb);\n  });\n};\n\nCAN_BE_SYNC.push('removeAllCookies');\nCookieJar.prototype.removeAllCookies = function(cb) {\n  var store = this.store;\n\n  // Check that the store implements its own removeAllCookies(). The default\n  // implementation in Store will immediately call the callback with a \"not\n  // implemented\" Error.\n  if (store.removeAllCookies instanceof Function &&\n      store.removeAllCookies !== Store.prototype.removeAllCookies)\n  {\n    return store.removeAllCookies(cb);\n  }\n\n  store.getAllCookies(function(err, cookies) {\n    if (err) {\n      return cb(err);\n    }\n\n    if (cookies.length === 0) {\n      return cb(null);\n    }\n\n    var completedCount = 0;\n    var removeErrors = [];\n\n    function removeCookieCb(removeErr) {\n      if (removeErr) {\n        removeErrors.push(removeErr);\n      }\n\n      completedCount++;\n\n      if (completedCount === cookies.length) {\n        return cb(removeErrors.length ? removeErrors[0] : null);\n      }\n    }\n\n    cookies.forEach(function(cookie) {\n      store.removeCookie(cookie.domain, cookie.path, cookie.key, removeCookieCb);\n    });\n  });\n};\n\nCookieJar.prototype._cloneSync = syncWrap('clone');\nCookieJar.prototype.cloneSync = function(newStore) {\n  if (!newStore.synchronous) {\n    throw new Error('CookieJar clone destination store is not synchronous; use async API instead.');\n  }\n  return this._cloneSync(newStore);\n};\n\n// Use a closure to provide a true imperative API for synchronous stores.\nfunction syncWrap(method) {\n  return function() {\n    if (!this.store.synchronous) {\n      throw new Error('CookieJar store is not synchronous; use async API instead.');\n    }\n\n    var args = Array.prototype.slice.call(arguments);\n    var syncErr, syncResult;\n    args.push(function syncCb(err, result) {\n      syncErr = err;\n      syncResult = result;\n    });\n    this[method].apply(this, args);\n\n    if (syncErr) {\n      throw syncErr;\n    }\n    return syncResult;\n  };\n}\n\n// wrap all declared CAN_BE_SYNC methods in the sync wrapper\nCAN_BE_SYNC.forEach(function(method) {\n  CookieJar.prototype[method+'Sync'] = syncWrap(method);\n});\n\nexports.version = VERSION;\nexports.CookieJar = CookieJar;\nexports.Cookie = Cookie;\nexports.Store = Store;\nexports.MemoryCookieStore = MemoryCookieStore;\nexports.parseDate = parseDate;\nexports.formatDate = formatDate;\nexports.parse = parse;\nexports.fromJSON = fromJSON;\nexports.domainMatch = domainMatch;\nexports.defaultPath = defaultPath;\nexports.pathMatch = pathMatch;\nexports.getPublicSuffix = pubsuffix.getPublicSuffix;\nexports.cookieCompare = cookieCompare;\nexports.permuteDomain = require('./permuteDomain').permuteDomain;\nexports.permutePath = permutePath;\nexports.canonicalDomain = canonicalDomain;\n", "'use strict'\n\nvar tough = require('tough-cookie')\n\nvar Cookie = tough.Cookie\nvar CookieJar = tough.CookieJar\n\nexports.parse = function (str) {\n  if (str && str.uri) {\n    str = str.uri\n  }\n  if (typeof str !== 'string') {\n    throw new Error('The cookie function only accepts STRING as param')\n  }\n  return Cookie.parse(str, {loose: true})\n}\n\n// Adapt the sometimes-Async api of tough.CookieJar to our requirements\nfunction RequestJar (store) {\n  var self = this\n  self._jar = new CookieJar(store, {looseMode: true})\n}\nRequestJar.prototype.setCookie = function (cookieOrStr, uri, options) {\n  var self = this\n  return self._jar.setCookieSync(cookieOrStr, uri, options || {})\n}\nRequestJar.prototype.getCookieString = function (uri) {\n  var self = this\n  return self._jar.getCookieStringSync(uri)\n}\nRequestJar.prototype.getCookies = function (uri) {\n  var self = this\n  return self._jar.getCookiesSync(uri)\n}\n\nexports.jar = function (store) {\n  return new RequestJar(store)\n}\n", "exports = module.exports = stringify\nexports.getSerialize = serializer\n\nfunction stringify(obj, replacer, spaces, cycleReplacer) {\n  return JSON.stringify(obj, serializer(replacer, cycleReplacer), spaces)\n}\n\nfunction serializer(replacer, cycleReplacer) {\n  var stack = [], keys = []\n\n  if (cycleReplacer == null) cycleReplacer = function(key, value) {\n    if (stack[0] === value) return \"[Circular ~]\"\n    return \"[Circular ~.\" + keys.slice(0, stack.indexOf(value)).join(\".\") + \"]\"\n  }\n\n  return function(key, value) {\n    if (stack.length > 0) {\n      var thisPos = stack.indexOf(this)\n      ~thisPos ? stack.splice(thisPos + 1) : stack.push(this)\n      ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key)\n      if (~stack.indexOf(value)) value = cycleReplacer.call(this, key, value)\n    }\n    else stack.push(value)\n\n    return replacer == null ? value : replacer.call(this, key, value)\n  }\n}\n", "/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n", "'use strict'\n\nvar jsonSafeStringify = require('json-stringify-safe')\nvar crypto = require('crypto')\nvar Buffer = require('safe-buffer').Buffer\n\nvar defer = typeof setImmediate === 'undefined'\n  ? process.nextTick\n  : setImmediate\n\nfunction paramsHaveRequestBody (params) {\n  return (\n    params.body ||\n    params.requestBodyStream ||\n    (params.json && typeof params.json !== 'boolean') ||\n    params.multipart\n  )\n}\n\nfunction safeStringify (obj, replacer) {\n  var ret\n  try {\n    ret = JSON.stringify(obj, replacer)\n  } catch (e) {\n    ret = jsonSafeStringify(obj, replacer)\n  }\n  return ret\n}\n\nfunction md5 (str) {\n  return crypto.createHash('md5').update(str).digest('hex')\n}\n\nfunction isReadStream (rs) {\n  return rs.readable && rs.path && rs.mode\n}\n\nfunction toBase64 (str) {\n  return Buffer.from(str || '', 'utf8').toString('base64')\n}\n\nfunction copy (obj) {\n  var o = {}\n  Object.keys(obj).forEach(function (i) {\n    o[i] = obj[i]\n  })\n  return o\n}\n\nfunction version () {\n  var numbers = process.version.replace('v', '').split('.')\n  return {\n    major: parseInt(numbers[0], 10),\n    minor: parseInt(numbers[1], 10),\n    patch: parseInt(numbers[2], 10)\n  }\n}\n\nexports.paramsHaveRequestBody = paramsHaveRequestBody\nexports.safeStringify = safeStringify\nexports.md5 = md5\nexports.isReadStream = isReadStream\nexports.toBase64 = toBase64\nexports.copy = copy\nexports.version = version\nexports.defer = defer\n", "\n/*!\n *  Copyright 2010 LearnBoost <dev@learnboost.com>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Module dependencies.\n */\n\nvar crypto = require('crypto')\n  , parse = require('url').parse\n  ;\n\n/**\n * Valid keys.\n */\n\nvar keys = \n  [ 'acl'\n  , 'location'\n  , 'logging'\n  , 'notification'\n  , 'partNumber'\n  , 'policy'\n  , 'requestPayment'\n  , 'torrent'\n  , 'uploadId'\n  , 'uploads'\n  , 'versionId'\n  , 'versioning'\n  , 'versions'\n  , 'website'\n  ]\n\n/**\n * Return an \"Authorization\" header value with the given `options`\n * in the form of \"AWS <key>:<signature>\"\n *\n * @param {Object} options\n * @return {String}\n * @api private\n */\n\nfunction authorization (options) {\n  return 'AWS ' + options.key + ':' + sign(options)\n}\n\nmodule.exports = authorization\nmodule.exports.authorization = authorization\n\n/**\n * Simple HMAC-SHA1 Wrapper\n *\n * @param {Object} options\n * @return {String}\n * @api private\n */ \n\nfunction hmacSha1 (options) {\n  return crypto.createHmac('sha1', options.secret).update(options.message).digest('base64')\n}\n\nmodule.exports.hmacSha1 = hmacSha1\n\n/**\n * Create a base64 sha1 HMAC for `options`. \n * \n * @param {Object} options\n * @return {String}\n * @api private\n */\n\nfunction sign (options) {\n  options.message = stringToSign(options)\n  return hmacSha1(options)\n}\nmodule.exports.sign = sign\n\n/**\n * Create a base64 sha1 HMAC for `options`. \n *\n * Specifically to be used with S3 presigned URLs\n * \n * @param {Object} options\n * @return {String}\n * @api private\n */\n\nfunction signQuery (options) {\n  options.message = queryStringToSign(options)\n  return hmacSha1(options)\n}\nmodule.exports.signQuery= signQuery\n\n/**\n * Return a string for sign() with the given `options`.\n *\n * Spec:\n * \n *    <verb>\\n\n *    <md5>\\n\n *    <content-type>\\n\n *    <date>\\n\n *    [headers\\n]\n *    <resource>\n *\n * @param {Object} options\n * @return {String}\n * @api private\n */\n\nfunction stringToSign (options) {\n  var headers = options.amazonHeaders || ''\n  if (headers) headers += '\\n'\n  var r = \n    [ options.verb\n    , options.md5\n    , options.contentType\n    , options.date ? options.date.toUTCString() : ''\n    , headers + options.resource\n    ]\n  return r.join('\\n')\n}\nmodule.exports.stringToSign = stringToSign\n\n/**\n * Return a string for sign() with the given `options`, but is meant exclusively\n * for S3 presigned URLs\n *\n * Spec:\n * \n *    <date>\\n\n *    <resource>\n *\n * @param {Object} options\n * @return {String}\n * @api private\n */\n\nfunction queryStringToSign (options){\n  return 'GET\\n\\n\\n' + options.date + '\\n' + options.resource\n}\nmodule.exports.queryStringToSign = queryStringToSign\n\n/**\n * Perform the following:\n *\n *  - ignore non-amazon headers\n *  - lowercase fields\n *  - sort lexicographically\n *  - trim whitespace between \":\"\n *  - join with newline\n *\n * @param {Object} headers\n * @return {String}\n * @api private\n */\n\nfunction canonicalizeHeaders (headers) {\n  var buf = []\n    , fields = Object.keys(headers)\n    ;\n  for (var i = 0, len = fields.length; i < len; ++i) {\n    var field = fields[i]\n      , val = headers[field]\n      , field = field.toLowerCase()\n      ;\n    if (0 !== field.indexOf('x-amz')) continue\n    buf.push(field + ':' + val)\n  }\n  return buf.sort().join('\\n')\n}\nmodule.exports.canonicalizeHeaders = canonicalizeHeaders\n\n/**\n * Perform the following:\n *\n *  - ignore non sub-resources\n *  - sort lexicographically\n *\n * @param {String} resource\n * @return {String}\n * @api private\n */\n\nfunction canonicalizeResource (resource) {\n  var url = parse(resource, true)\n    , path = url.pathname\n    , buf = []\n    ;\n\n  Object.keys(url.query).forEach(function(key){\n    if (!~keys.indexOf(key)) return\n    var val = '' == url.query[key] ? '' : '=' + encodeURIComponent(url.query[key])\n    buf.push(key + val)\n  })\n\n  return path + (buf.length ? '?' + buf.sort().join('&') : '')\n}\nmodule.exports.canonicalizeResource = canonicalizeResource\n", "module.exports = function(size) {\n  return new LruCache(size)\n}\n\nfunction LruCache(size) {\n  this.capacity = size | 0\n  this.map = Object.create(null)\n  this.list = new DoublyLinkedList()\n}\n\nLruCache.prototype.get = function(key) {\n  var node = this.map[key]\n  if (node == null) return undefined\n  this.used(node)\n  return node.val\n}\n\nLruCache.prototype.set = function(key, val) {\n  var node = this.map[key]\n  if (node != null) {\n    node.val = val\n  } else {\n    if (!this.capacity) this.prune()\n    if (!this.capacity) return false\n    node = new DoublyLinkedNode(key, val)\n    this.map[key] = node\n    this.capacity--\n  }\n  this.used(node)\n  return true\n}\n\nLruCache.prototype.used = function(node) {\n  this.list.moveToFront(node)\n}\n\nLruCache.prototype.prune = function() {\n  var node = this.list.pop()\n  if (node != null) {\n    delete this.map[node.key]\n    this.capacity++\n  }\n}\n\n\nfunction DoublyLinkedList() {\n  this.firstNode = null\n  this.lastNode = null\n}\n\nDoublyLinkedList.prototype.moveToFront = function(node) {\n  if (this.firstNode == node) return\n\n  this.remove(node)\n\n  if (this.firstNode == null) {\n    this.firstNode = node\n    this.lastNode = node\n    node.prev = null\n    node.next = null\n  } else {\n    node.prev = null\n    node.next = this.firstNode\n    node.next.prev = node\n    this.firstNode = node\n  }\n}\n\nDoublyLinkedList.prototype.pop = function() {\n  var lastNode = this.lastNode\n  if (lastNode != null) {\n    this.remove(lastNode)\n  }\n  return lastNode\n}\n\nDoublyLinkedList.prototype.remove = function(node) {\n  if (this.firstNode == node) {\n    this.firstNode = node.next\n  } else if (node.prev != null) {\n    node.prev.next = node.next\n  }\n  if (this.lastNode == node) {\n    this.lastNode = node.prev\n  } else if (node.next != null) {\n    node.next.prev = node.prev\n  }\n}\n\n\nfunction DoublyLinkedNode(key, val) {\n  this.key = key\n  this.val = val\n  this.prev = null\n  this.next = null\n}\n", "var aws4 = exports,\n    url = require('url'),\n    querystring = require('querystring'),\n    crypto = require('crypto'),\n    lru = require('./lru'),\n    credentialsCache = lru(1000)\n\n// http://docs.amazonwebservices.com/general/latest/gr/signature-version-4.html\n\nfunction hmac(key, string, encoding) {\n  return crypto.createHmac('sha256', key).update(string, 'utf8').digest(encoding)\n}\n\nfunction hash(string, encoding) {\n  return crypto.createHash('sha256').update(string, 'utf8').digest(encoding)\n}\n\n// This function assumes the string has already been percent encoded\nfunction encodeRfc3986(urlEncodedString) {\n  return urlEncodedString.replace(/[!'()*]/g, function(c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase()\n  })\n}\n\nfunction encodeRfc3986Full(str) {\n  return encodeRfc3986(encodeURIComponent(str))\n}\n\n// A bit of a combination of:\n// https://github.com/aws/aws-sdk-java-v2/blob/dc695de6ab49ad03934e1b02e7263abbd2354be0/core/auth/src/main/java/software/amazon/awssdk/auth/signer/internal/AbstractAws4Signer.java#L59\n// https://github.com/aws/aws-sdk-js/blob/18cb7e5b463b46239f9fdd4a65e2ff8c81831e8f/lib/signers/v4.js#L191-L199\n// https://github.com/mhart/aws4fetch/blob/b3aed16b6f17384cf36ea33bcba3c1e9f3bdfefd/src/main.js#L25-L34\nvar HEADERS_TO_IGNORE = {\n  'authorization': true,\n  'connection': true,\n  'x-amzn-trace-id': true,\n  'user-agent': true,\n  'expect': true,\n  'presigned-expires': true,\n  'range': true,\n}\n\n// request: { path | body, [host], [method], [headers], [service], [region] }\n// credentials: { accessKeyId, secretAccessKey, [sessionToken] }\nfunction RequestSigner(request, credentials) {\n\n  if (typeof request === 'string') request = url.parse(request)\n\n  var headers = request.headers = (request.headers || {}),\n      hostParts = (!this.service || !this.region) && this.matchHost(request.hostname || request.host || headers.Host || headers.host)\n\n  this.request = request\n  this.credentials = credentials || this.defaultCredentials()\n\n  this.service = request.service || hostParts[0] || ''\n  this.region = request.region || hostParts[1] || 'us-east-1'\n\n  // SES uses a different domain from the service name\n  if (this.service === 'email') this.service = 'ses'\n\n  if (!request.method && request.body)\n    request.method = 'POST'\n\n  if (!headers.Host && !headers.host) {\n    headers.Host = request.hostname || request.host || this.createHost()\n\n    // If a port is specified explicitly, use it as is\n    if (request.port)\n      headers.Host += ':' + request.port\n  }\n  if (!request.hostname && !request.host)\n    request.hostname = headers.Host || headers.host\n\n  this.isCodeCommitGit = this.service === 'codecommit' && request.method === 'GIT'\n}\n\nRequestSigner.prototype.matchHost = function(host) {\n  var match = (host || '').match(/([^\\.]+)\\.(?:([^\\.]*)\\.)?amazonaws\\.com(\\.cn)?$/)\n  var hostParts = (match || []).slice(1, 3)\n\n  // ES's hostParts are sometimes the other way round, if the value that is expected\n  // to be region equals \u2018es\u2019 switch them back\n  // e.g. search-cluster-name-aaaa00aaaa0aaa0aaaaaaa0aaa.us-east-1.es.amazonaws.com\n  if (hostParts[1] === 'es')\n    hostParts = hostParts.reverse()\n\n  if (hostParts[1] == 's3') {\n    hostParts[0] = 's3'\n    hostParts[1] = 'us-east-1'\n  } else {\n    for (var i = 0; i < 2; i++) {\n      if (/^s3-/.test(hostParts[i])) {\n        hostParts[1] = hostParts[i].slice(3)\n        hostParts[0] = 's3'\n        break\n      }\n    }\n  }\n\n  return hostParts\n}\n\n// http://docs.aws.amazon.com/general/latest/gr/rande.html\nRequestSigner.prototype.isSingleRegion = function() {\n  // Special case for S3 and SimpleDB in us-east-1\n  if (['s3', 'sdb'].indexOf(this.service) >= 0 && this.region === 'us-east-1') return true\n\n  return ['cloudfront', 'ls', 'route53', 'iam', 'importexport', 'sts']\n    .indexOf(this.service) >= 0\n}\n\nRequestSigner.prototype.createHost = function() {\n  var region = this.isSingleRegion() ? '' : '.' + this.region,\n      subdomain = this.service === 'ses' ? 'email' : this.service\n  return subdomain + region + '.amazonaws.com'\n}\n\nRequestSigner.prototype.prepareRequest = function() {\n  this.parsePath()\n\n  var request = this.request, headers = request.headers, query\n\n  if (request.signQuery) {\n\n    this.parsedPath.query = query = this.parsedPath.query || {}\n\n    if (this.credentials.sessionToken)\n      query['X-Amz-Security-Token'] = this.credentials.sessionToken\n\n    if (this.service === 's3' && !query['X-Amz-Expires'])\n      query['X-Amz-Expires'] = 86400\n\n    if (query['X-Amz-Date'])\n      this.datetime = query['X-Amz-Date']\n    else\n      query['X-Amz-Date'] = this.getDateTime()\n\n    query['X-Amz-Algorithm'] = 'AWS4-HMAC-SHA256'\n    query['X-Amz-Credential'] = this.credentials.accessKeyId + '/' + this.credentialString()\n    query['X-Amz-SignedHeaders'] = this.signedHeaders()\n\n  } else {\n\n    if (!request.doNotModifyHeaders && !this.isCodeCommitGit) {\n      if (request.body && !headers['Content-Type'] && !headers['content-type'])\n        headers['Content-Type'] = 'application/x-www-form-urlencoded; charset=utf-8'\n\n      if (request.body && !headers['Content-Length'] && !headers['content-length'])\n        headers['Content-Length'] = Buffer.byteLength(request.body)\n\n      if (this.credentials.sessionToken && !headers['X-Amz-Security-Token'] && !headers['x-amz-security-token'])\n        headers['X-Amz-Security-Token'] = this.credentials.sessionToken\n\n      if (this.service === 's3' && !headers['X-Amz-Content-Sha256'] && !headers['x-amz-content-sha256'])\n        headers['X-Amz-Content-Sha256'] = hash(this.request.body || '', 'hex')\n\n      if (headers['X-Amz-Date'] || headers['x-amz-date'])\n        this.datetime = headers['X-Amz-Date'] || headers['x-amz-date']\n      else\n        headers['X-Amz-Date'] = this.getDateTime()\n    }\n\n    delete headers.Authorization\n    delete headers.authorization\n  }\n}\n\nRequestSigner.prototype.sign = function() {\n  if (!this.parsedPath) this.prepareRequest()\n\n  if (this.request.signQuery) {\n    this.parsedPath.query['X-Amz-Signature'] = this.signature()\n  } else {\n    this.request.headers.Authorization = this.authHeader()\n  }\n\n  this.request.path = this.formatPath()\n\n  return this.request\n}\n\nRequestSigner.prototype.getDateTime = function() {\n  if (!this.datetime) {\n    var headers = this.request.headers,\n      date = new Date(headers.Date || headers.date || new Date)\n\n    this.datetime = date.toISOString().replace(/[:\\-]|\\.\\d{3}/g, '')\n\n    // Remove the trailing 'Z' on the timestamp string for CodeCommit git access\n    if (this.isCodeCommitGit) this.datetime = this.datetime.slice(0, -1)\n  }\n  return this.datetime\n}\n\nRequestSigner.prototype.getDate = function() {\n  return this.getDateTime().substr(0, 8)\n}\n\nRequestSigner.prototype.authHeader = function() {\n  return [\n    'AWS4-HMAC-SHA256 Credential=' + this.credentials.accessKeyId + '/' + this.credentialString(),\n    'SignedHeaders=' + this.signedHeaders(),\n    'Signature=' + this.signature(),\n  ].join(', ')\n}\n\nRequestSigner.prototype.signature = function() {\n  var date = this.getDate(),\n      cacheKey = [this.credentials.secretAccessKey, date, this.region, this.service].join(),\n      kDate, kRegion, kService, kCredentials = credentialsCache.get(cacheKey)\n  if (!kCredentials) {\n    kDate = hmac('AWS4' + this.credentials.secretAccessKey, date)\n    kRegion = hmac(kDate, this.region)\n    kService = hmac(kRegion, this.service)\n    kCredentials = hmac(kService, 'aws4_request')\n    credentialsCache.set(cacheKey, kCredentials)\n  }\n  return hmac(kCredentials, this.stringToSign(), 'hex')\n}\n\nRequestSigner.prototype.stringToSign = function() {\n  return [\n    'AWS4-HMAC-SHA256',\n    this.getDateTime(),\n    this.credentialString(),\n    hash(this.canonicalString(), 'hex'),\n  ].join('\\n')\n}\n\nRequestSigner.prototype.canonicalString = function() {\n  if (!this.parsedPath) this.prepareRequest()\n\n  var pathStr = this.parsedPath.path,\n      query = this.parsedPath.query,\n      headers = this.request.headers,\n      queryStr = '',\n      normalizePath = this.service !== 's3',\n      decodePath = this.service === 's3' || this.request.doNotEncodePath,\n      decodeSlashesInPath = this.service === 's3',\n      firstValOnly = this.service === 's3',\n      bodyHash\n\n  if (this.service === 's3' && this.request.signQuery) {\n    bodyHash = 'UNSIGNED-PAYLOAD'\n  } else if (this.isCodeCommitGit) {\n    bodyHash = ''\n  } else {\n    bodyHash = headers['X-Amz-Content-Sha256'] || headers['x-amz-content-sha256'] ||\n      hash(this.request.body || '', 'hex')\n  }\n\n  if (query) {\n    var reducedQuery = Object.keys(query).reduce(function(obj, key) {\n      if (!key) return obj\n      obj[encodeRfc3986Full(key)] = !Array.isArray(query[key]) ? query[key] :\n        (firstValOnly ? query[key][0] : query[key])\n      return obj\n    }, {})\n    var encodedQueryPieces = []\n    Object.keys(reducedQuery).sort().forEach(function(key) {\n      if (!Array.isArray(reducedQuery[key])) {\n        encodedQueryPieces.push(key + '=' + encodeRfc3986Full(reducedQuery[key]))\n      } else {\n        reducedQuery[key].map(encodeRfc3986Full).sort()\n          .forEach(function(val) { encodedQueryPieces.push(key + '=' + val) })\n      }\n    })\n    queryStr = encodedQueryPieces.join('&')\n  }\n  if (pathStr !== '/') {\n    if (normalizePath) pathStr = pathStr.replace(/\\/{2,}/g, '/')\n    pathStr = pathStr.split('/').reduce(function(path, piece) {\n      if (normalizePath && piece === '..') {\n        path.pop()\n      } else if (!normalizePath || piece !== '.') {\n        if (decodePath) piece = decodeURIComponent(piece.replace(/\\+/g, ' '))\n        path.push(encodeRfc3986Full(piece))\n      }\n      return path\n    }, []).join('/')\n    if (pathStr[0] !== '/') pathStr = '/' + pathStr\n    if (decodeSlashesInPath) pathStr = pathStr.replace(/%2F/g, '/')\n  }\n\n  return [\n    this.request.method || 'GET',\n    pathStr,\n    queryStr,\n    this.canonicalHeaders() + '\\n',\n    this.signedHeaders(),\n    bodyHash,\n  ].join('\\n')\n}\n\nRequestSigner.prototype.canonicalHeaders = function() {\n  var headers = this.request.headers\n  function trimAll(header) {\n    return header.toString().trim().replace(/\\s+/g, ' ')\n  }\n  return Object.keys(headers)\n    .filter(function(key) { return HEADERS_TO_IGNORE[key.toLowerCase()] == null })\n    .sort(function(a, b) { return a.toLowerCase() < b.toLowerCase() ? -1 : 1 })\n    .map(function(key) { return key.toLowerCase() + ':' + trimAll(headers[key]) })\n    .join('\\n')\n}\n\nRequestSigner.prototype.signedHeaders = function() {\n  return Object.keys(this.request.headers)\n    .map(function(key) { return key.toLowerCase() })\n    .filter(function(key) { return HEADERS_TO_IGNORE[key] == null })\n    .sort()\n    .join(';')\n}\n\nRequestSigner.prototype.credentialString = function() {\n  return [\n    this.getDate(),\n    this.region,\n    this.service,\n    'aws4_request',\n  ].join('/')\n}\n\nRequestSigner.prototype.defaultCredentials = function() {\n  var env = process.env\n  return {\n    accessKeyId: env.AWS_ACCESS_KEY_ID || env.AWS_ACCESS_KEY,\n    secretAccessKey: env.AWS_SECRET_ACCESS_KEY || env.AWS_SECRET_KEY,\n    sessionToken: env.AWS_SESSION_TOKEN,\n  }\n}\n\nRequestSigner.prototype.parsePath = function() {\n  var path = this.request.path || '/'\n\n  // S3 doesn't always encode characters > 127 correctly and\n  // all services don't encode characters > 255 correctly\n  // So if there are non-reserved chars (and it's not already all % encoded), just encode them all\n  if (/[^0-9A-Za-z;,/?:@&=+$\\-_.!~*'()#%]/.test(path)) {\n    path = encodeURI(decodeURI(path))\n  }\n\n  var queryIx = path.indexOf('?'),\n      query = null\n\n  if (queryIx >= 0) {\n    query = querystring.parse(path.slice(queryIx + 1))\n    path = path.slice(0, queryIx)\n  }\n\n  this.parsedPath = {\n    path: path,\n    query: query,\n  }\n}\n\nRequestSigner.prototype.formatPath = function() {\n  var path = this.parsedPath.path,\n      query = this.parsedPath.query\n\n  if (!query) return path\n\n  // Services don't support empty query string keys\n  if (query[''] != null) delete query['']\n\n  return path + '?' + encodeRfc3986(querystring.stringify(query))\n}\n\naws4.RequestSigner = RequestSigner\n\naws4.sign = function(request, credentials) {\n  return new RequestSigner(request, credentials).sign()\n}\n", "// Copyright (c) 2012, Mark Cavage. All rights reserved.\n// Copyright 2015 Joyent, Inc.\n\nvar assert = require('assert');\nvar Stream = require('stream').Stream;\nvar util = require('util');\n\n\n///--- Globals\n\n/* JSSTYLED */\nvar UUID_REGEXP = /^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/;\n\n\n///--- Internal\n\nfunction _capitalize(str) {\n    return (str.charAt(0).toUpperCase() + str.slice(1));\n}\n\nfunction _toss(name, expected, oper, arg, actual) {\n    throw new assert.AssertionError({\n        message: util.format('%s (%s) is required', name, expected),\n        actual: (actual === undefined) ? typeof (arg) : actual(arg),\n        expected: expected,\n        operator: oper || '===',\n        stackStartFunction: _toss.caller\n    });\n}\n\nfunction _getClass(arg) {\n    return (Object.prototype.toString.call(arg).slice(8, -1));\n}\n\nfunction noop() {\n    // Why even bother with asserts?\n}\n\n\n///--- Exports\n\nvar types = {\n    bool: {\n        check: function (arg) { return typeof (arg) === 'boolean'; }\n    },\n    func: {\n        check: function (arg) { return typeof (arg) === 'function'; }\n    },\n    string: {\n        check: function (arg) { return typeof (arg) === 'string'; }\n    },\n    object: {\n        check: function (arg) {\n            return typeof (arg) === 'object' && arg !== null;\n        }\n    },\n    number: {\n        check: function (arg) {\n            return typeof (arg) === 'number' && !isNaN(arg);\n        }\n    },\n    finite: {\n        check: function (arg) {\n            return typeof (arg) === 'number' && !isNaN(arg) && isFinite(arg);\n        }\n    },\n    buffer: {\n        check: function (arg) { return Buffer.isBuffer(arg); },\n        operator: 'Buffer.isBuffer'\n    },\n    array: {\n        check: function (arg) { return Array.isArray(arg); },\n        operator: 'Array.isArray'\n    },\n    stream: {\n        check: function (arg) { return arg instanceof Stream; },\n        operator: 'instanceof',\n        actual: _getClass\n    },\n    date: {\n        check: function (arg) { return arg instanceof Date; },\n        operator: 'instanceof',\n        actual: _getClass\n    },\n    regexp: {\n        check: function (arg) { return arg instanceof RegExp; },\n        operator: 'instanceof',\n        actual: _getClass\n    },\n    uuid: {\n        check: function (arg) {\n            return typeof (arg) === 'string' && UUID_REGEXP.test(arg);\n        },\n        operator: 'isUUID'\n    }\n};\n\nfunction _setExports(ndebug) {\n    var keys = Object.keys(types);\n    var out;\n\n    /* re-export standard assert */\n    if (process.env.NODE_NDEBUG) {\n        out = noop;\n    } else {\n        out = function (arg, msg) {\n            if (!arg) {\n                _toss(msg, 'true', arg);\n            }\n        };\n    }\n\n    /* standard checks */\n    keys.forEach(function (k) {\n        if (ndebug) {\n            out[k] = noop;\n            return;\n        }\n        var type = types[k];\n        out[k] = function (arg, msg) {\n            if (!type.check(arg)) {\n                _toss(msg, k, type.operator, arg, type.actual);\n            }\n        };\n    });\n\n    /* optional checks */\n    keys.forEach(function (k) {\n        var name = 'optional' + _capitalize(k);\n        if (ndebug) {\n            out[name] = noop;\n            return;\n        }\n        var type = types[k];\n        out[name] = function (arg, msg) {\n            if (arg === undefined || arg === null) {\n                return;\n            }\n            if (!type.check(arg)) {\n                _toss(msg, k, type.operator, arg, type.actual);\n            }\n        };\n    });\n\n    /* arrayOf checks */\n    keys.forEach(function (k) {\n        var name = 'arrayOf' + _capitalize(k);\n        if (ndebug) {\n            out[name] = noop;\n            return;\n        }\n        var type = types[k];\n        var expected = '[' + k + ']';\n        out[name] = function (arg, msg) {\n            if (!Array.isArray(arg)) {\n                _toss(msg, expected, type.operator, arg, type.actual);\n            }\n            var i;\n            for (i = 0; i < arg.length; i++) {\n                if (!type.check(arg[i])) {\n                    _toss(msg, expected, type.operator, arg, type.actual);\n                }\n            }\n        };\n    });\n\n    /* optionalArrayOf checks */\n    keys.forEach(function (k) {\n        var name = 'optionalArrayOf' + _capitalize(k);\n        if (ndebug) {\n            out[name] = noop;\n            return;\n        }\n        var type = types[k];\n        var expected = '[' + k + ']';\n        out[name] = function (arg, msg) {\n            if (arg === undefined || arg === null) {\n                return;\n            }\n            if (!Array.isArray(arg)) {\n                _toss(msg, expected, type.operator, arg, type.actual);\n            }\n            var i;\n            for (i = 0; i < arg.length; i++) {\n                if (!type.check(arg[i])) {\n                    _toss(msg, expected, type.operator, arg, type.actual);\n                }\n            }\n        };\n    });\n\n    /* re-export built-in assertions */\n    Object.keys(assert).forEach(function (k) {\n        if (k === 'AssertionError') {\n            out[k] = assert[k];\n            return;\n        }\n        if (ndebug) {\n            out[k] = noop;\n            return;\n        }\n        out[k] = assert[k];\n    });\n\n    /* export ourselves (for unit tests _only_) */\n    out._setExports = _setExports;\n\n    return out;\n}\n\nmodule.exports = _setExports(process.env.NODE_NDEBUG);\n", "/* eslint-disable node/no-deprecated-api */\n\n'use strict'\n\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\nvar safer = {}\n\nvar key\n\nfor (key in buffer) {\n  if (!buffer.hasOwnProperty(key)) continue\n  if (key === 'SlowBuffer' || key === 'Buffer') continue\n  safer[key] = buffer[key]\n}\n\nvar Safer = safer.Buffer = {}\nfor (key in Buffer) {\n  if (!Buffer.hasOwnProperty(key)) continue\n  if (key === 'allocUnsafe' || key === 'allocUnsafeSlow') continue\n  Safer[key] = Buffer[key]\n}\n\nsafer.Buffer.prototype = Buffer.prototype\n\nif (!Safer.from || Safer.from === Uint8Array.from) {\n  Safer.from = function (value, encodingOrOffset, length) {\n    if (typeof value === 'number') {\n      throw new TypeError('The \"value\" argument must not be of type number. Received type ' + typeof value)\n    }\n    if (value && typeof value.length === 'undefined') {\n      throw new TypeError('The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type ' + typeof value)\n    }\n    return Buffer(value, encodingOrOffset, length)\n  }\n}\n\nif (!Safer.alloc) {\n  Safer.alloc = function (size, fill, encoding) {\n    if (typeof size !== 'number') {\n      throw new TypeError('The \"size\" argument must be of type number. Received type ' + typeof size)\n    }\n    if (size < 0 || size >= 2 * (1 << 30)) {\n      throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n    }\n    var buf = Buffer(size)\n    if (!fill || fill.length === 0) {\n      buf.fill(0)\n    } else if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n    return buf\n  }\n}\n\nif (!safer.kStringMaxLength) {\n  try {\n    safer.kStringMaxLength = process.binding('buffer').kStringMaxLength\n  } catch (e) {\n    // we can't determine kStringMaxLength in environments where process.binding\n    // is unsupported, so let's not set it\n  }\n}\n\nif (!safer.constants) {\n  safer.constants = {\n    MAX_LENGTH: safer.kMaxLength\n  }\n  if (safer.kStringMaxLength) {\n    safer.constants.MAX_STRING_LENGTH = safer.kStringMaxLength\n  }\n}\n\nmodule.exports = safer\n", "// Copyright 2015 Joyent, Inc.\n\nvar Buffer = require('safer-buffer').Buffer;\n\nvar algInfo = {\n\t'dsa': {\n\t\tparts: ['p', 'q', 'g', 'y'],\n\t\tsizePart: 'p'\n\t},\n\t'rsa': {\n\t\tparts: ['e', 'n'],\n\t\tsizePart: 'n'\n\t},\n\t'ecdsa': {\n\t\tparts: ['curve', 'Q'],\n\t\tsizePart: 'Q'\n\t},\n\t'ed25519': {\n\t\tparts: ['A'],\n\t\tsizePart: 'A'\n\t}\n};\nalgInfo['curve25519'] = algInfo['ed25519'];\n\nvar algPrivInfo = {\n\t'dsa': {\n\t\tparts: ['p', 'q', 'g', 'y', 'x']\n\t},\n\t'rsa': {\n\t\tparts: ['n', 'e', 'd', 'iqmp', 'p', 'q']\n\t},\n\t'ecdsa': {\n\t\tparts: ['curve', 'Q', 'd']\n\t},\n\t'ed25519': {\n\t\tparts: ['A', 'k']\n\t}\n};\nalgPrivInfo['curve25519'] = algPrivInfo['ed25519'];\n\nvar hashAlgs = {\n\t'md5': true,\n\t'sha1': true,\n\t'sha256': true,\n\t'sha384': true,\n\t'sha512': true\n};\n\n/*\n * Taken from\n * http://csrc.nist.gov/groups/ST/toolkit/documents/dss/NISTReCur.pdf\n */\nvar curves = {\n\t'nistp256': {\n\t\tsize: 256,\n\t\tpkcs8oid: '1.2.840.10045.3.1.7',\n\t\tp: Buffer.from(('00' +\n\t\t    'ffffffff 00000001 00000000 00000000' +\n\t\t    '00000000 ffffffff ffffffff ffffffff').\n\t\t    replace(/ /g, ''), 'hex'),\n\t\ta: Buffer.from(('00' +\n\t\t    'FFFFFFFF 00000001 00000000 00000000' +\n\t\t    '00000000 FFFFFFFF FFFFFFFF FFFFFFFC').\n\t\t    replace(/ /g, ''), 'hex'),\n\t\tb: Buffer.from((\n\t\t    '5ac635d8 aa3a93e7 b3ebbd55 769886bc' +\n\t\t    '651d06b0 cc53b0f6 3bce3c3e 27d2604b').\n\t\t    replace(/ /g, ''), 'hex'),\n\t\ts: Buffer.from(('00' +\n\t\t    'c49d3608 86e70493 6a6678e1 139d26b7' +\n\t\t    '819f7e90').\n\t\t    replace(/ /g, ''), 'hex'),\n\t\tn: Buffer.from(('00' +\n\t\t    'ffffffff 00000000 ffffffff ffffffff' +\n\t\t    'bce6faad a7179e84 f3b9cac2 fc632551').\n\t\t    replace(/ /g, ''), 'hex'),\n\t\tG: Buffer.from(('04' +\n\t\t    '6b17d1f2 e12c4247 f8bce6e5 63a440f2' +\n\t\t    '77037d81 2deb33a0 f4a13945 d898c296' +\n\t\t    '4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16' +\n\t\t    '2bce3357 6b315ece cbb64068 37bf51f5').\n\t\t    replace(/ /g, ''), 'hex')\n\t},\n\t'nistp384': {\n\t\tsize: 384,\n\t\tpkcs8oid: '1.3.132.0.34',\n\t\tp: Buffer.from(('00' +\n\t\t    'ffffffff ffffffff ffffffff ffffffff' +\n\t\t    'ffffffff ffffffff ffffffff fffffffe' +\n\t\t    'ffffffff 00000000 00000000 ffffffff').\n\t\t    replace(/ /g, ''), 'hex'),\n\t\ta: Buffer.from(('00' +\n\t\t    'FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF' +\n\t\t    'FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFE' +\n\t\t    'FFFFFFFF 00000000 00000000 FFFFFFFC').\n\t\t    replace(/ /g, ''), 'hex'),\n\t\tb: Buffer.from((\n\t\t    'b3312fa7 e23ee7e4 988e056b e3f82d19' +\n\t\t    '181d9c6e fe814112 0314088f 5013875a' +\n\t\t    'c656398d 8a2ed19d 2a85c8ed d3ec2aef').\n\t\t    replace(/ /g, ''), 'hex'),\n\t\ts: Buffer.from(('00' +\n\t\t    'a335926a a319a27a 1d00896a 6773a482' +\n\t\t    '7acdac73').\n\t\t    replace(/ /g, ''), 'hex'),\n\t\tn: Buffer.from(('00' +\n\t\t    'ffffffff ffffffff ffffffff ffffffff' +\n\t\t    'ffffffff ffffffff c7634d81 f4372ddf' +\n\t\t    '581a0db2 48b0a77a ecec196a ccc52973').\n\t\t    replace(/ /g, ''), 'hex'),\n\t\tG: Buffer.from(('04' +\n\t\t    'aa87ca22 be8b0537 8eb1c71e f320ad74' +\n\t\t    '6e1d3b62 8ba79b98 59f741e0 82542a38' +\n\t\t    '5502f25d bf55296c 3a545e38 72760ab7' +\n\t\t    '3617de4a 96262c6f 5d9e98bf 9292dc29' +\n\t\t    'f8f41dbd 289a147c e9da3113 b5f0b8c0' +\n\t\t    '0a60b1ce 1d7e819d 7a431d7c 90ea0e5f').\n\t\t    replace(/ /g, ''), 'hex')\n\t},\n\t'nistp521': {\n\t\tsize: 521,\n\t\tpkcs8oid: '1.3.132.0.35',\n\t\tp: Buffer.from((\n\t\t    '01ffffff ffffffff ffffffff ffffffff' +\n\t\t    'ffffffff ffffffff ffffffff ffffffff' +\n\t\t    'ffffffff ffffffff ffffffff ffffffff' +\n\t\t    'ffffffff ffffffff ffffffff ffffffff' +\n\t\t    'ffff').replace(/ /g, ''), 'hex'),\n\t\ta: Buffer.from(('01FF' +\n\t\t    'FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF' +\n\t\t    'FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF' +\n\t\t    'FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF' +\n\t\t    'FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFC').\n\t\t    replace(/ /g, ''), 'hex'),\n\t\tb: Buffer.from(('51' +\n\t\t    '953eb961 8e1c9a1f 929a21a0 b68540ee' +\n\t\t    'a2da725b 99b315f3 b8b48991 8ef109e1' +\n\t\t    '56193951 ec7e937b 1652c0bd 3bb1bf07' +\n\t\t    '3573df88 3d2c34f1 ef451fd4 6b503f00').\n\t\t    replace(/ /g, ''), 'hex'),\n\t\ts: Buffer.from(('00' +\n\t\t    'd09e8800 291cb853 96cc6717 393284aa' +\n\t\t    'a0da64ba').replace(/ /g, ''), 'hex'),\n\t\tn: Buffer.from(('01ff' +\n\t\t    'ffffffff ffffffff ffffffff ffffffff' +\n\t\t    'ffffffff ffffffff ffffffff fffffffa' +\n\t\t    '51868783 bf2f966b 7fcc0148 f709a5d0' +\n\t\t    '3bb5c9b8 899c47ae bb6fb71e 91386409').\n\t\t    replace(/ /g, ''), 'hex'),\n\t\tG: Buffer.from(('04' +\n\t\t    '00c6 858e06b7 0404e9cd 9e3ecb66 2395b442' +\n\t\t         '9c648139 053fb521 f828af60 6b4d3dba' +\n\t\t         'a14b5e77 efe75928 fe1dc127 a2ffa8de' +\n\t\t         '3348b3c1 856a429b f97e7e31 c2e5bd66' +\n\t\t    '0118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9' +\n\t\t         '98f54449 579b4468 17afbd17 273e662c' +\n\t\t         '97ee7299 5ef42640 c550b901 3fad0761' +\n\t\t         '353c7086 a272c240 88be9476 9fd16650').\n\t\t    replace(/ /g, ''), 'hex')\n\t}\n};\n\nmodule.exports = {\n\tinfo: algInfo,\n\tprivInfo: algPrivInfo,\n\thashAlgs: hashAlgs,\n\tcurves: curves\n};\n", "// Copyright 2015 Joyent, Inc.\n\nvar assert = require('assert-plus');\nvar util = require('util');\n\nfunction FingerprintFormatError(fp, format) {\n\tif (Error.captureStackTrace)\n\t\tError.captureStackTrace(this, FingerprintFormatError);\n\tthis.name = 'FingerprintFormatError';\n\tthis.fingerprint = fp;\n\tthis.format = format;\n\tthis.message = 'Fingerprint format is not supported, or is invalid: ';\n\tif (fp !== undefined)\n\t\tthis.message += ' fingerprint = ' + fp;\n\tif (format !== undefined)\n\t\tthis.message += ' format = ' + format;\n}\nutil.inherits(FingerprintFormatError, Error);\n\nfunction InvalidAlgorithmError(alg) {\n\tif (Error.captureStackTrace)\n\t\tError.captureStackTrace(this, InvalidAlgorithmError);\n\tthis.name = 'InvalidAlgorithmError';\n\tthis.algorithm = alg;\n\tthis.message = 'Algorithm \"' + alg + '\" is not supported';\n}\nutil.inherits(InvalidAlgorithmError, Error);\n\nfunction KeyParseError(name, format, innerErr) {\n\tif (Error.captureStackTrace)\n\t\tError.captureStackTrace(this, KeyParseError);\n\tthis.name = 'KeyParseError';\n\tthis.format = format;\n\tthis.keyName = name;\n\tthis.innerErr = innerErr;\n\tthis.message = 'Failed to parse ' + name + ' as a valid ' + format +\n\t    ' format key: ' + innerErr.message;\n}\nutil.inherits(KeyParseError, Error);\n\nfunction SignatureParseError(type, format, innerErr) {\n\tif (Error.captureStackTrace)\n\t\tError.captureStackTrace(this, SignatureParseError);\n\tthis.name = 'SignatureParseError';\n\tthis.type = type;\n\tthis.format = format;\n\tthis.innerErr = innerErr;\n\tthis.message = 'Failed to parse the given data as a ' + type +\n\t    ' signature in ' + format + ' format: ' + innerErr.message;\n}\nutil.inherits(SignatureParseError, Error);\n\nfunction CertificateParseError(name, format, innerErr) {\n\tif (Error.captureStackTrace)\n\t\tError.captureStackTrace(this, CertificateParseError);\n\tthis.name = 'CertificateParseError';\n\tthis.format = format;\n\tthis.certName = name;\n\tthis.innerErr = innerErr;\n\tthis.message = 'Failed to parse ' + name + ' as a valid ' + format +\n\t    ' format certificate: ' + innerErr.message;\n}\nutil.inherits(CertificateParseError, Error);\n\nfunction KeyEncryptedError(name, format) {\n\tif (Error.captureStackTrace)\n\t\tError.captureStackTrace(this, KeyEncryptedError);\n\tthis.name = 'KeyEncryptedError';\n\tthis.format = format;\n\tthis.keyName = name;\n\tthis.message = 'The ' + format + ' format key ' + name + ' is ' +\n\t    'encrypted (password-protected), and no passphrase was ' +\n\t    'provided in `options`';\n}\nutil.inherits(KeyEncryptedError, Error);\n\nmodule.exports = {\n\tFingerprintFormatError: FingerprintFormatError,\n\tInvalidAlgorithmError: InvalidAlgorithmError,\n\tKeyParseError: KeyParseError,\n\tSignatureParseError: SignatureParseError,\n\tKeyEncryptedError: KeyEncryptedError,\n\tCertificateParseError: CertificateParseError\n};\n", "// Copyright 2011 Mark Cavage <mcavage@gmail.com> All rights reserved.\n\n\nmodule.exports = {\n\n  newInvalidAsn1Error: function (msg) {\n    var e = new Error();\n    e.name = 'InvalidAsn1Error';\n    e.message = msg || '';\n    return e;\n  }\n\n};\n", "// Copyright 2011 Mark Cavage <mcavage@gmail.com> All rights reserved.\n\n\nmodule.exports = {\n  EOC: 0,\n  Boolean: 1,\n  Integer: 2,\n  BitString: 3,\n  OctetString: 4,\n  Null: 5,\n  OID: 6,\n  ObjectDescriptor: 7,\n  External: 8,\n  Real: 9, // float\n  Enumeration: 10,\n  PDV: 11,\n  Utf8String: 12,\n  RelativeOID: 13,\n  Sequence: 16,\n  Set: 17,\n  NumericString: 18,\n  PrintableString: 19,\n  T61String: 20,\n  VideotexString: 21,\n  IA5String: 22,\n  UTCTime: 23,\n  GeneralizedTime: 24,\n  GraphicString: 25,\n  VisibleString: 26,\n  GeneralString: 28,\n  UniversalString: 29,\n  CharacterString: 30,\n  BMPString: 31,\n  Constructor: 32,\n  Context: 128\n};\n", "// Copyright 2011 Mark Cavage <mcavage@gmail.com> All rights reserved.\n\nvar assert = require('assert');\nvar Buffer = require('safer-buffer').Buffer;\n\nvar ASN1 = require('./types');\nvar errors = require('./errors');\n\n\n// --- Globals\n\nvar newInvalidAsn1Error = errors.newInvalidAsn1Error;\n\n\n\n// --- API\n\nfunction Reader(data) {\n  if (!data || !Buffer.isBuffer(data))\n    throw new TypeError('data must be a node Buffer');\n\n  this._buf = data;\n  this._size = data.length;\n\n  // These hold the \"current\" state\n  this._len = 0;\n  this._offset = 0;\n}\n\nObject.defineProperty(Reader.prototype, 'length', {\n  enumerable: true,\n  get: function () { return (this._len); }\n});\n\nObject.defineProperty(Reader.prototype, 'offset', {\n  enumerable: true,\n  get: function () { return (this._offset); }\n});\n\nObject.defineProperty(Reader.prototype, 'remain', {\n  get: function () { return (this._size - this._offset); }\n});\n\nObject.defineProperty(Reader.prototype, 'buffer', {\n  get: function () { return (this._buf.slice(this._offset)); }\n});\n\n\n/**\n * Reads a single byte and advances offset; you can pass in `true` to make this\n * a \"peek\" operation (i.e., get the byte, but don't advance the offset).\n *\n * @param {Boolean} peek true means don't move offset.\n * @return {Number} the next byte, null if not enough data.\n */\nReader.prototype.readByte = function (peek) {\n  if (this._size - this._offset < 1)\n    return null;\n\n  var b = this._buf[this._offset] & 0xff;\n\n  if (!peek)\n    this._offset += 1;\n\n  return b;\n};\n\n\nReader.prototype.peek = function () {\n  return this.readByte(true);\n};\n\n\n/**\n * Reads a (potentially) variable length off the BER buffer.  This call is\n * not really meant to be called directly, as callers have to manipulate\n * the internal buffer afterwards.\n *\n * As a result of this call, you can call `Reader.length`, until the\n * next thing called that does a readLength.\n *\n * @return {Number} the amount of offset to advance the buffer.\n * @throws {InvalidAsn1Error} on bad ASN.1\n */\nReader.prototype.readLength = function (offset) {\n  if (offset === undefined)\n    offset = this._offset;\n\n  if (offset >= this._size)\n    return null;\n\n  var lenB = this._buf[offset++] & 0xff;\n  if (lenB === null)\n    return null;\n\n  if ((lenB & 0x80) === 0x80) {\n    lenB &= 0x7f;\n\n    if (lenB === 0)\n      throw newInvalidAsn1Error('Indefinite length not supported');\n\n    if (lenB > 4)\n      throw newInvalidAsn1Error('encoding too long');\n\n    if (this._size - offset < lenB)\n      return null;\n\n    this._len = 0;\n    for (var i = 0; i < lenB; i++)\n      this._len = (this._len << 8) + (this._buf[offset++] & 0xff);\n\n  } else {\n    // Wasn't a variable length\n    this._len = lenB;\n  }\n\n  return offset;\n};\n\n\n/**\n * Parses the next sequence in this BER buffer.\n *\n * To get the length of the sequence, call `Reader.length`.\n *\n * @return {Number} the sequence's tag.\n */\nReader.prototype.readSequence = function (tag) {\n  var seq = this.peek();\n  if (seq === null)\n    return null;\n  if (tag !== undefined && tag !== seq)\n    throw newInvalidAsn1Error('Expected 0x' + tag.toString(16) +\n                              ': got 0x' + seq.toString(16));\n\n  var o = this.readLength(this._offset + 1); // stored in `length`\n  if (o === null)\n    return null;\n\n  this._offset = o;\n  return seq;\n};\n\n\nReader.prototype.readInt = function () {\n  return this._readTag(ASN1.Integer);\n};\n\n\nReader.prototype.readBoolean = function () {\n  return (this._readTag(ASN1.Boolean) === 0 ? false : true);\n};\n\n\nReader.prototype.readEnumeration = function () {\n  return this._readTag(ASN1.Enumeration);\n};\n\n\nReader.prototype.readString = function (tag, retbuf) {\n  if (!tag)\n    tag = ASN1.OctetString;\n\n  var b = this.peek();\n  if (b === null)\n    return null;\n\n  if (b !== tag)\n    throw newInvalidAsn1Error('Expected 0x' + tag.toString(16) +\n                              ': got 0x' + b.toString(16));\n\n  var o = this.readLength(this._offset + 1); // stored in `length`\n\n  if (o === null)\n    return null;\n\n  if (this.length > this._size - o)\n    return null;\n\n  this._offset = o;\n\n  if (this.length === 0)\n    return retbuf ? Buffer.alloc(0) : '';\n\n  var str = this._buf.slice(this._offset, this._offset + this.length);\n  this._offset += this.length;\n\n  return retbuf ? str : str.toString('utf8');\n};\n\nReader.prototype.readOID = function (tag) {\n  if (!tag)\n    tag = ASN1.OID;\n\n  var b = this.readString(tag, true);\n  if (b === null)\n    return null;\n\n  var values = [];\n  var value = 0;\n\n  for (var i = 0; i < b.length; i++) {\n    var byte = b[i] & 0xff;\n\n    value <<= 7;\n    value += byte & 0x7f;\n    if ((byte & 0x80) === 0) {\n      values.push(value);\n      value = 0;\n    }\n  }\n\n  value = values.shift();\n  values.unshift(value % 40);\n  values.unshift((value / 40) >> 0);\n\n  return values.join('.');\n};\n\n\nReader.prototype._readTag = function (tag) {\n  assert.ok(tag !== undefined);\n\n  var b = this.peek();\n\n  if (b === null)\n    return null;\n\n  if (b !== tag)\n    throw newInvalidAsn1Error('Expected 0x' + tag.toString(16) +\n                              ': got 0x' + b.toString(16));\n\n  var o = this.readLength(this._offset + 1); // stored in `length`\n  if (o === null)\n    return null;\n\n  if (this.length > 4)\n    throw newInvalidAsn1Error('Integer too long: ' + this.length);\n\n  if (this.length > this._size - o)\n    return null;\n  this._offset = o;\n\n  var fb = this._buf[this._offset];\n  var value = 0;\n\n  for (var i = 0; i < this.length; i++) {\n    value <<= 8;\n    value |= (this._buf[this._offset++] & 0xff);\n  }\n\n  if ((fb & 0x80) === 0x80 && i !== 4)\n    value -= (1 << (i * 8));\n\n  return value >> 0;\n};\n\n\n\n// --- Exported API\n\nmodule.exports = Reader;\n", "// Copyright 2011 Mark Cavage <mcavage@gmail.com> All rights reserved.\n\nvar assert = require('assert');\nvar Buffer = require('safer-buffer').Buffer;\nvar ASN1 = require('./types');\nvar errors = require('./errors');\n\n\n// --- Globals\n\nvar newInvalidAsn1Error = errors.newInvalidAsn1Error;\n\nvar DEFAULT_OPTS = {\n  size: 1024,\n  growthFactor: 8\n};\n\n\n// --- Helpers\n\nfunction merge(from, to) {\n  assert.ok(from);\n  assert.equal(typeof (from), 'object');\n  assert.ok(to);\n  assert.equal(typeof (to), 'object');\n\n  var keys = Object.getOwnPropertyNames(from);\n  keys.forEach(function (key) {\n    if (to[key])\n      return;\n\n    var value = Object.getOwnPropertyDescriptor(from, key);\n    Object.defineProperty(to, key, value);\n  });\n\n  return to;\n}\n\n\n\n// --- API\n\nfunction Writer(options) {\n  options = merge(DEFAULT_OPTS, options || {});\n\n  this._buf = Buffer.alloc(options.size || 1024);\n  this._size = this._buf.length;\n  this._offset = 0;\n  this._options = options;\n\n  // A list of offsets in the buffer where we need to insert\n  // sequence tag/len pairs.\n  this._seq = [];\n}\n\nObject.defineProperty(Writer.prototype, 'buffer', {\n  get: function () {\n    if (this._seq.length)\n      throw newInvalidAsn1Error(this._seq.length + ' unended sequence(s)');\n\n    return (this._buf.slice(0, this._offset));\n  }\n});\n\nWriter.prototype.writeByte = function (b) {\n  if (typeof (b) !== 'number')\n    throw new TypeError('argument must be a Number');\n\n  this._ensure(1);\n  this._buf[this._offset++] = b;\n};\n\n\nWriter.prototype.writeInt = function (i, tag) {\n  if (typeof (i) !== 'number')\n    throw new TypeError('argument must be a Number');\n  if (typeof (tag) !== 'number')\n    tag = ASN1.Integer;\n\n  var sz = 4;\n\n  while ((((i & 0xff800000) === 0) || ((i & 0xff800000) === 0xff800000 >> 0)) &&\n        (sz > 1)) {\n    sz--;\n    i <<= 8;\n  }\n\n  if (sz > 4)\n    throw newInvalidAsn1Error('BER ints cannot be > 0xffffffff');\n\n  this._ensure(2 + sz);\n  this._buf[this._offset++] = tag;\n  this._buf[this._offset++] = sz;\n\n  while (sz-- > 0) {\n    this._buf[this._offset++] = ((i & 0xff000000) >>> 24);\n    i <<= 8;\n  }\n\n};\n\n\nWriter.prototype.writeNull = function () {\n  this.writeByte(ASN1.Null);\n  this.writeByte(0x00);\n};\n\n\nWriter.prototype.writeEnumeration = function (i, tag) {\n  if (typeof (i) !== 'number')\n    throw new TypeError('argument must be a Number');\n  if (typeof (tag) !== 'number')\n    tag = ASN1.Enumeration;\n\n  return this.writeInt(i, tag);\n};\n\n\nWriter.prototype.writeBoolean = function (b, tag) {\n  if (typeof (b) !== 'boolean')\n    throw new TypeError('argument must be a Boolean');\n  if (typeof (tag) !== 'number')\n    tag = ASN1.Boolean;\n\n  this._ensure(3);\n  this._buf[this._offset++] = tag;\n  this._buf[this._offset++] = 0x01;\n  this._buf[this._offset++] = b ? 0xff : 0x00;\n};\n\n\nWriter.prototype.writeString = function (s, tag) {\n  if (typeof (s) !== 'string')\n    throw new TypeError('argument must be a string (was: ' + typeof (s) + ')');\n  if (typeof (tag) !== 'number')\n    tag = ASN1.OctetString;\n\n  var len = Buffer.byteLength(s);\n  this.writeByte(tag);\n  this.writeLength(len);\n  if (len) {\n    this._ensure(len);\n    this._buf.write(s, this._offset);\n    this._offset += len;\n  }\n};\n\n\nWriter.prototype.writeBuffer = function (buf, tag) {\n  if (typeof (tag) !== 'number')\n    throw new TypeError('tag must be a number');\n  if (!Buffer.isBuffer(buf))\n    throw new TypeError('argument must be a buffer');\n\n  this.writeByte(tag);\n  this.writeLength(buf.length);\n  this._ensure(buf.length);\n  buf.copy(this._buf, this._offset, 0, buf.length);\n  this._offset += buf.length;\n};\n\n\nWriter.prototype.writeStringArray = function (strings) {\n  if ((!strings instanceof Array))\n    throw new TypeError('argument must be an Array[String]');\n\n  var self = this;\n  strings.forEach(function (s) {\n    self.writeString(s);\n  });\n};\n\n// This is really to solve DER cases, but whatever for now\nWriter.prototype.writeOID = function (s, tag) {\n  if (typeof (s) !== 'string')\n    throw new TypeError('argument must be a string');\n  if (typeof (tag) !== 'number')\n    tag = ASN1.OID;\n\n  if (!/^([0-9]+\\.){3,}[0-9]+$/.test(s))\n    throw new Error('argument is not a valid OID string');\n\n  function encodeOctet(bytes, octet) {\n    if (octet < 128) {\n        bytes.push(octet);\n    } else if (octet < 16384) {\n        bytes.push((octet >>> 7) | 0x80);\n        bytes.push(octet & 0x7F);\n    } else if (octet < 2097152) {\n      bytes.push((octet >>> 14) | 0x80);\n      bytes.push(((octet >>> 7) | 0x80) & 0xFF);\n      bytes.push(octet & 0x7F);\n    } else if (octet < 268435456) {\n      bytes.push((octet >>> 21) | 0x80);\n      bytes.push(((octet >>> 14) | 0x80) & 0xFF);\n      bytes.push(((octet >>> 7) | 0x80) & 0xFF);\n      bytes.push(octet & 0x7F);\n    } else {\n      bytes.push(((octet >>> 28) | 0x80) & 0xFF);\n      bytes.push(((octet >>> 21) | 0x80) & 0xFF);\n      bytes.push(((octet >>> 14) | 0x80) & 0xFF);\n      bytes.push(((octet >>> 7) | 0x80) & 0xFF);\n      bytes.push(octet & 0x7F);\n    }\n  }\n\n  var tmp = s.split('.');\n  var bytes = [];\n  bytes.push(parseInt(tmp[0], 10) * 40 + parseInt(tmp[1], 10));\n  tmp.slice(2).forEach(function (b) {\n    encodeOctet(bytes, parseInt(b, 10));\n  });\n\n  var self = this;\n  this._ensure(2 + bytes.length);\n  this.writeByte(tag);\n  this.writeLength(bytes.length);\n  bytes.forEach(function (b) {\n    self.writeByte(b);\n  });\n};\n\n\nWriter.prototype.writeLength = function (len) {\n  if (typeof (len) !== 'number')\n    throw new TypeError('argument must be a Number');\n\n  this._ensure(4);\n\n  if (len <= 0x7f) {\n    this._buf[this._offset++] = len;\n  } else if (len <= 0xff) {\n    this._buf[this._offset++] = 0x81;\n    this._buf[this._offset++] = len;\n  } else if (len <= 0xffff) {\n    this._buf[this._offset++] = 0x82;\n    this._buf[this._offset++] = len >> 8;\n    this._buf[this._offset++] = len;\n  } else if (len <= 0xffffff) {\n    this._buf[this._offset++] = 0x83;\n    this._buf[this._offset++] = len >> 16;\n    this._buf[this._offset++] = len >> 8;\n    this._buf[this._offset++] = len;\n  } else {\n    throw newInvalidAsn1Error('Length too long (> 4 bytes)');\n  }\n};\n\nWriter.prototype.startSequence = function (tag) {\n  if (typeof (tag) !== 'number')\n    tag = ASN1.Sequence | ASN1.Constructor;\n\n  this.writeByte(tag);\n  this._seq.push(this._offset);\n  this._ensure(3);\n  this._offset += 3;\n};\n\n\nWriter.prototype.endSequence = function () {\n  var seq = this._seq.pop();\n  var start = seq + 3;\n  var len = this._offset - start;\n\n  if (len <= 0x7f) {\n    this._shift(start, len, -2);\n    this._buf[seq] = len;\n  } else if (len <= 0xff) {\n    this._shift(start, len, -1);\n    this._buf[seq] = 0x81;\n    this._buf[seq + 1] = len;\n  } else if (len <= 0xffff) {\n    this._buf[seq] = 0x82;\n    this._buf[seq + 1] = len >> 8;\n    this._buf[seq + 2] = len;\n  } else if (len <= 0xffffff) {\n    this._shift(start, len, 1);\n    this._buf[seq] = 0x83;\n    this._buf[seq + 1] = len >> 16;\n    this._buf[seq + 2] = len >> 8;\n    this._buf[seq + 3] = len;\n  } else {\n    throw newInvalidAsn1Error('Sequence too long');\n  }\n};\n\n\nWriter.prototype._shift = function (start, len, shift) {\n  assert.ok(start !== undefined);\n  assert.ok(len !== undefined);\n  assert.ok(shift);\n\n  this._buf.copy(this._buf, start + shift, start, start + len);\n  this._offset += shift;\n};\n\nWriter.prototype._ensure = function (len) {\n  assert.ok(len);\n\n  if (this._size - this._offset < len) {\n    var sz = this._size * this._options.growthFactor;\n    if (sz - this._offset < len)\n      sz += len;\n\n    var buf = Buffer.alloc(sz);\n\n    this._buf.copy(buf, 0, 0, this._offset);\n    this._buf = buf;\n    this._size = sz;\n  }\n};\n\n\n\n// --- Exported API\n\nmodule.exports = Writer;\n", "// Copyright 2011 Mark Cavage <mcavage@gmail.com> All rights reserved.\n\nvar errors = require('./errors');\nvar types = require('./types');\n\nvar Reader = require('./reader');\nvar Writer = require('./writer');\n\n\n// --- Exports\n\nmodule.exports = {\n\n  Reader: Reader,\n\n  Writer: Writer\n\n};\n\nfor (var t in types) {\n  if (types.hasOwnProperty(t))\n    module.exports[t] = types[t];\n}\nfor (var e in errors) {\n  if (errors.hasOwnProperty(e))\n    module.exports[e] = errors[e];\n}\n", "// Copyright 2011 Mark Cavage <mcavage@gmail.com> All rights reserved.\n\n// If you have no idea what ASN.1 or BER is, see this:\n// ftp://ftp.rsa.com/pub/pkcs/ascii/layman.asc\n\nvar Ber = require('./ber/index');\n\n\n\n// --- Exported API\n\nmodule.exports = {\n\n  Ber: Ber,\n\n  BerReader: Ber.Reader,\n\n  BerWriter: Ber.Writer\n\n};\n", "(function(){\n\n    // Copyright (c) 2005  Tom Wu\n    // All Rights Reserved.\n    // See \"LICENSE\" for details.\n\n    // Basic JavaScript BN library - subset useful for RSA encryption.\n\n    // Bits per digit\n    var dbits;\n\n    // JavaScript engine analysis\n    var canary = 0xdeadbeefcafe;\n    var j_lm = ((canary&0xffffff)==0xefcafe);\n\n    // (public) Constructor\n    function BigInteger(a,b,c) {\n      if(a != null)\n        if(\"number\" == typeof a) this.fromNumber(a,b,c);\n        else if(b == null && \"string\" != typeof a) this.fromString(a,256);\n        else this.fromString(a,b);\n    }\n\n    // return new, unset BigInteger\n    function nbi() { return new BigInteger(null); }\n\n    // am: Compute w_j += (x*this_i), propagate carries,\n    // c is initial carry, returns final carry.\n    // c < 3*dvalue, x < 2*dvalue, this_i < dvalue\n    // We need to select the fastest one that works in this environment.\n\n    // am1: use a single mult and divide to get the high bits,\n    // max digit bits should be 26 because\n    // max internal value = 2*dvalue^2-2*dvalue (< 2^53)\n    function am1(i,x,w,j,c,n) {\n      while(--n >= 0) {\n        var v = x*this[i++]+w[j]+c;\n        c = Math.floor(v/0x4000000);\n        w[j++] = v&0x3ffffff;\n      }\n      return c;\n    }\n    // am2 avoids a big mult-and-extract completely.\n    // Max digit bits should be <= 30 because we do bitwise ops\n    // on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\n    function am2(i,x,w,j,c,n) {\n      var xl = x&0x7fff, xh = x>>15;\n      while(--n >= 0) {\n        var l = this[i]&0x7fff;\n        var h = this[i++]>>15;\n        var m = xh*l+h*xl;\n        l = xl*l+((m&0x7fff)<<15)+w[j]+(c&0x3fffffff);\n        c = (l>>>30)+(m>>>15)+xh*h+(c>>>30);\n        w[j++] = l&0x3fffffff;\n      }\n      return c;\n    }\n    // Alternately, set max digit bits to 28 since some\n    // browsers slow down when dealing with 32-bit numbers.\n    function am3(i,x,w,j,c,n) {\n      var xl = x&0x3fff, xh = x>>14;\n      while(--n >= 0) {\n        var l = this[i]&0x3fff;\n        var h = this[i++]>>14;\n        var m = xh*l+h*xl;\n        l = xl*l+((m&0x3fff)<<14)+w[j]+c;\n        c = (l>>28)+(m>>14)+xh*h;\n        w[j++] = l&0xfffffff;\n      }\n      return c;\n    }\n    var inBrowser = typeof navigator !== \"undefined\";\n    if(inBrowser && j_lm && (navigator.appName == \"Microsoft Internet Explorer\")) {\n      BigInteger.prototype.am = am2;\n      dbits = 30;\n    }\n    else if(inBrowser && j_lm && (navigator.appName != \"Netscape\")) {\n      BigInteger.prototype.am = am1;\n      dbits = 26;\n    }\n    else { // Mozilla/Netscape seems to prefer am3\n      BigInteger.prototype.am = am3;\n      dbits = 28;\n    }\n\n    BigInteger.prototype.DB = dbits;\n    BigInteger.prototype.DM = ((1<<dbits)-1);\n    BigInteger.prototype.DV = (1<<dbits);\n\n    var BI_FP = 52;\n    BigInteger.prototype.FV = Math.pow(2,BI_FP);\n    BigInteger.prototype.F1 = BI_FP-dbits;\n    BigInteger.prototype.F2 = 2*dbits-BI_FP;\n\n    // Digit conversions\n    var BI_RM = \"0123456789abcdefghijklmnopqrstuvwxyz\";\n    var BI_RC = new Array();\n    var rr,vv;\n    rr = \"0\".charCodeAt(0);\n    for(vv = 0; vv <= 9; ++vv) BI_RC[rr++] = vv;\n    rr = \"a\".charCodeAt(0);\n    for(vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\n    rr = \"A\".charCodeAt(0);\n    for(vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\n\n    function int2char(n) { return BI_RM.charAt(n); }\n    function intAt(s,i) {\n      var c = BI_RC[s.charCodeAt(i)];\n      return (c==null)?-1:c;\n    }\n\n    // (protected) copy this to r\n    function bnpCopyTo(r) {\n      for(var i = this.t-1; i >= 0; --i) r[i] = this[i];\n      r.t = this.t;\n      r.s = this.s;\n    }\n\n    // (protected) set from integer value x, -DV <= x < DV\n    function bnpFromInt(x) {\n      this.t = 1;\n      this.s = (x<0)?-1:0;\n      if(x > 0) this[0] = x;\n      else if(x < -1) this[0] = x+this.DV;\n      else this.t = 0;\n    }\n\n    // return bigint initialized to value\n    function nbv(i) { var r = nbi(); r.fromInt(i); return r; }\n\n    // (protected) set from string and radix\n    function bnpFromString(s,b) {\n      var k;\n      if(b == 16) k = 4;\n      else if(b == 8) k = 3;\n      else if(b == 256) k = 8; // byte array\n      else if(b == 2) k = 1;\n      else if(b == 32) k = 5;\n      else if(b == 4) k = 2;\n      else { this.fromRadix(s,b); return; }\n      this.t = 0;\n      this.s = 0;\n      var i = s.length, mi = false, sh = 0;\n      while(--i >= 0) {\n        var x = (k==8)?s[i]&0xff:intAt(s,i);\n        if(x < 0) {\n          if(s.charAt(i) == \"-\") mi = true;\n          continue;\n        }\n        mi = false;\n        if(sh == 0)\n          this[this.t++] = x;\n        else if(sh+k > this.DB) {\n          this[this.t-1] |= (x&((1<<(this.DB-sh))-1))<<sh;\n          this[this.t++] = (x>>(this.DB-sh));\n        }\n        else\n          this[this.t-1] |= x<<sh;\n        sh += k;\n        if(sh >= this.DB) sh -= this.DB;\n      }\n      if(k == 8 && (s[0]&0x80) != 0) {\n        this.s = -1;\n        if(sh > 0) this[this.t-1] |= ((1<<(this.DB-sh))-1)<<sh;\n      }\n      this.clamp();\n      if(mi) BigInteger.ZERO.subTo(this,this);\n    }\n\n    // (protected) clamp off excess high words\n    function bnpClamp() {\n      var c = this.s&this.DM;\n      while(this.t > 0 && this[this.t-1] == c) --this.t;\n    }\n\n    // (public) return string representation in given radix\n    function bnToString(b) {\n      if(this.s < 0) return \"-\"+this.negate().toString(b);\n      var k;\n      if(b == 16) k = 4;\n      else if(b == 8) k = 3;\n      else if(b == 2) k = 1;\n      else if(b == 32) k = 5;\n      else if(b == 4) k = 2;\n      else return this.toRadix(b);\n      var km = (1<<k)-1, d, m = false, r = \"\", i = this.t;\n      var p = this.DB-(i*this.DB)%k;\n      if(i-- > 0) {\n        if(p < this.DB && (d = this[i]>>p) > 0) { m = true; r = int2char(d); }\n        while(i >= 0) {\n          if(p < k) {\n            d = (this[i]&((1<<p)-1))<<(k-p);\n            d |= this[--i]>>(p+=this.DB-k);\n          }\n          else {\n            d = (this[i]>>(p-=k))&km;\n            if(p <= 0) { p += this.DB; --i; }\n          }\n          if(d > 0) m = true;\n          if(m) r += int2char(d);\n        }\n      }\n      return m?r:\"0\";\n    }\n\n    // (public) -this\n    function bnNegate() { var r = nbi(); BigInteger.ZERO.subTo(this,r); return r; }\n\n    // (public) |this|\n    function bnAbs() { return (this.s<0)?this.negate():this; }\n\n    // (public) return + if this > a, - if this < a, 0 if equal\n    function bnCompareTo(a) {\n      var r = this.s-a.s;\n      if(r != 0) return r;\n      var i = this.t;\n      r = i-a.t;\n      if(r != 0) return (this.s<0)?-r:r;\n      while(--i >= 0) if((r=this[i]-a[i]) != 0) return r;\n      return 0;\n    }\n\n    // returns bit length of the integer x\n    function nbits(x) {\n      var r = 1, t;\n      if((t=x>>>16) != 0) { x = t; r += 16; }\n      if((t=x>>8) != 0) { x = t; r += 8; }\n      if((t=x>>4) != 0) { x = t; r += 4; }\n      if((t=x>>2) != 0) { x = t; r += 2; }\n      if((t=x>>1) != 0) { x = t; r += 1; }\n      return r;\n    }\n\n    // (public) return the number of bits in \"this\"\n    function bnBitLength() {\n      if(this.t <= 0) return 0;\n      return this.DB*(this.t-1)+nbits(this[this.t-1]^(this.s&this.DM));\n    }\n\n    // (protected) r = this << n*DB\n    function bnpDLShiftTo(n,r) {\n      var i;\n      for(i = this.t-1; i >= 0; --i) r[i+n] = this[i];\n      for(i = n-1; i >= 0; --i) r[i] = 0;\n      r.t = this.t+n;\n      r.s = this.s;\n    }\n\n    // (protected) r = this >> n*DB\n    function bnpDRShiftTo(n,r) {\n      for(var i = n; i < this.t; ++i) r[i-n] = this[i];\n      r.t = Math.max(this.t-n,0);\n      r.s = this.s;\n    }\n\n    // (protected) r = this << n\n    function bnpLShiftTo(n,r) {\n      var bs = n%this.DB;\n      var cbs = this.DB-bs;\n      var bm = (1<<cbs)-1;\n      var ds = Math.floor(n/this.DB), c = (this.s<<bs)&this.DM, i;\n      for(i = this.t-1; i >= 0; --i) {\n        r[i+ds+1] = (this[i]>>cbs)|c;\n        c = (this[i]&bm)<<bs;\n      }\n      for(i = ds-1; i >= 0; --i) r[i] = 0;\n      r[ds] = c;\n      r.t = this.t+ds+1;\n      r.s = this.s;\n      r.clamp();\n    }\n\n    // (protected) r = this >> n\n    function bnpRShiftTo(n,r) {\n      r.s = this.s;\n      var ds = Math.floor(n/this.DB);\n      if(ds >= this.t) { r.t = 0; return; }\n      var bs = n%this.DB;\n      var cbs = this.DB-bs;\n      var bm = (1<<bs)-1;\n      r[0] = this[ds]>>bs;\n      for(var i = ds+1; i < this.t; ++i) {\n        r[i-ds-1] |= (this[i]&bm)<<cbs;\n        r[i-ds] = this[i]>>bs;\n      }\n      if(bs > 0) r[this.t-ds-1] |= (this.s&bm)<<cbs;\n      r.t = this.t-ds;\n      r.clamp();\n    }\n\n    // (protected) r = this - a\n    function bnpSubTo(a,r) {\n      var i = 0, c = 0, m = Math.min(a.t,this.t);\n      while(i < m) {\n        c += this[i]-a[i];\n        r[i++] = c&this.DM;\n        c >>= this.DB;\n      }\n      if(a.t < this.t) {\n        c -= a.s;\n        while(i < this.t) {\n          c += this[i];\n          r[i++] = c&this.DM;\n          c >>= this.DB;\n        }\n        c += this.s;\n      }\n      else {\n        c += this.s;\n        while(i < a.t) {\n          c -= a[i];\n          r[i++] = c&this.DM;\n          c >>= this.DB;\n        }\n        c -= a.s;\n      }\n      r.s = (c<0)?-1:0;\n      if(c < -1) r[i++] = this.DV+c;\n      else if(c > 0) r[i++] = c;\n      r.t = i;\n      r.clamp();\n    }\n\n    // (protected) r = this * a, r != this,a (HAC 14.12)\n    // \"this\" should be the larger one if appropriate.\n    function bnpMultiplyTo(a,r) {\n      var x = this.abs(), y = a.abs();\n      var i = x.t;\n      r.t = i+y.t;\n      while(--i >= 0) r[i] = 0;\n      for(i = 0; i < y.t; ++i) r[i+x.t] = x.am(0,y[i],r,i,0,x.t);\n      r.s = 0;\n      r.clamp();\n      if(this.s != a.s) BigInteger.ZERO.subTo(r,r);\n    }\n\n    // (protected) r = this^2, r != this (HAC 14.16)\n    function bnpSquareTo(r) {\n      var x = this.abs();\n      var i = r.t = 2*x.t;\n      while(--i >= 0) r[i] = 0;\n      for(i = 0; i < x.t-1; ++i) {\n        var c = x.am(i,x[i],r,2*i,0,1);\n        if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1)) >= x.DV) {\n          r[i+x.t] -= x.DV;\n          r[i+x.t+1] = 1;\n        }\n      }\n      if(r.t > 0) r[r.t-1] += x.am(i,x[i],r,2*i,0,1);\n      r.s = 0;\n      r.clamp();\n    }\n\n    // (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\n    // r != q, this != m.  q or r may be null.\n    function bnpDivRemTo(m,q,r) {\n      var pm = m.abs();\n      if(pm.t <= 0) return;\n      var pt = this.abs();\n      if(pt.t < pm.t) {\n        if(q != null) q.fromInt(0);\n        if(r != null) this.copyTo(r);\n        return;\n      }\n      if(r == null) r = nbi();\n      var y = nbi(), ts = this.s, ms = m.s;\n      var nsh = this.DB-nbits(pm[pm.t-1]);   // normalize modulus\n      if(nsh > 0) { pm.lShiftTo(nsh,y); pt.lShiftTo(nsh,r); }\n      else { pm.copyTo(y); pt.copyTo(r); }\n      var ys = y.t;\n      var y0 = y[ys-1];\n      if(y0 == 0) return;\n      var yt = y0*(1<<this.F1)+((ys>1)?y[ys-2]>>this.F2:0);\n      var d1 = this.FV/yt, d2 = (1<<this.F1)/yt, e = 1<<this.F2;\n      var i = r.t, j = i-ys, t = (q==null)?nbi():q;\n      y.dlShiftTo(j,t);\n      if(r.compareTo(t) >= 0) {\n        r[r.t++] = 1;\n        r.subTo(t,r);\n      }\n      BigInteger.ONE.dlShiftTo(ys,t);\n      t.subTo(y,y);  // \"negative\" y so we can replace sub with am later\n      while(y.t < ys) y[y.t++] = 0;\n      while(--j >= 0) {\n        // Estimate quotient digit\n        var qd = (r[--i]==y0)?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);\n        if((r[i]+=y.am(0,qd,r,j,0,ys)) < qd) {   // Try it out\n          y.dlShiftTo(j,t);\n          r.subTo(t,r);\n          while(r[i] < --qd) r.subTo(t,r);\n        }\n      }\n      if(q != null) {\n        r.drShiftTo(ys,q);\n        if(ts != ms) BigInteger.ZERO.subTo(q,q);\n      }\n      r.t = ys;\n      r.clamp();\n      if(nsh > 0) r.rShiftTo(nsh,r); // Denormalize remainder\n      if(ts < 0) BigInteger.ZERO.subTo(r,r);\n    }\n\n    // (public) this mod a\n    function bnMod(a) {\n      var r = nbi();\n      this.abs().divRemTo(a,null,r);\n      if(this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r,r);\n      return r;\n    }\n\n    // Modular reduction using \"classic\" algorithm\n    function Classic(m) { this.m = m; }\n    function cConvert(x) {\n      if(x.s < 0 || x.compareTo(this.m) >= 0) return x.mod(this.m);\n      else return x;\n    }\n    function cRevert(x) { return x; }\n    function cReduce(x) { x.divRemTo(this.m,null,x); }\n    function cMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }\n    function cSqrTo(x,r) { x.squareTo(r); this.reduce(r); }\n\n    Classic.prototype.convert = cConvert;\n    Classic.prototype.revert = cRevert;\n    Classic.prototype.reduce = cReduce;\n    Classic.prototype.mulTo = cMulTo;\n    Classic.prototype.sqrTo = cSqrTo;\n\n    // (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\n    // justification:\n    //         xy == 1 (mod m)\n    //         xy =  1+km\n    //   xy(2-xy) = (1+km)(1-km)\n    // x[y(2-xy)] = 1-k^2m^2\n    // x[y(2-xy)] == 1 (mod m^2)\n    // if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\n    // should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\n    // JS multiply \"overflows\" differently from C/C++, so care is needed here.\n    function bnpInvDigit() {\n      if(this.t < 1) return 0;\n      var x = this[0];\n      if((x&1) == 0) return 0;\n      var y = x&3;       // y == 1/x mod 2^2\n      y = (y*(2-(x&0xf)*y))&0xf; // y == 1/x mod 2^4\n      y = (y*(2-(x&0xff)*y))&0xff;   // y == 1/x mod 2^8\n      y = (y*(2-(((x&0xffff)*y)&0xffff)))&0xffff;    // y == 1/x mod 2^16\n      // last step - calculate inverse mod DV directly;\n      // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\n      y = (y*(2-x*y%this.DV))%this.DV;       // y == 1/x mod 2^dbits\n      // we really want the negative inverse, and -DV < y < DV\n      return (y>0)?this.DV-y:-y;\n    }\n\n    // Montgomery reduction\n    function Montgomery(m) {\n      this.m = m;\n      this.mp = m.invDigit();\n      this.mpl = this.mp&0x7fff;\n      this.mph = this.mp>>15;\n      this.um = (1<<(m.DB-15))-1;\n      this.mt2 = 2*m.t;\n    }\n\n    // xR mod m\n    function montConvert(x) {\n      var r = nbi();\n      x.abs().dlShiftTo(this.m.t,r);\n      r.divRemTo(this.m,null,r);\n      if(x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r,r);\n      return r;\n    }\n\n    // x/R mod m\n    function montRevert(x) {\n      var r = nbi();\n      x.copyTo(r);\n      this.reduce(r);\n      return r;\n    }\n\n    // x = x/R mod m (HAC 14.32)\n    function montReduce(x) {\n      while(x.t <= this.mt2) // pad x so am has enough room later\n        x[x.t++] = 0;\n      for(var i = 0; i < this.m.t; ++i) {\n        // faster way of calculating u0 = x[i]*mp mod DV\n        var j = x[i]&0x7fff;\n        var u0 = (j*this.mpl+(((j*this.mph+(x[i]>>15)*this.mpl)&this.um)<<15))&x.DM;\n        // use am to combine the multiply-shift-add into one call\n        j = i+this.m.t;\n        x[j] += this.m.am(0,u0,x,i,0,this.m.t);\n        // propagate carry\n        while(x[j] >= x.DV) { x[j] -= x.DV; x[++j]++; }\n      }\n      x.clamp();\n      x.drShiftTo(this.m.t,x);\n      if(x.compareTo(this.m) >= 0) x.subTo(this.m,x);\n    }\n\n    // r = \"x^2/R mod m\"; x != r\n    function montSqrTo(x,r) { x.squareTo(r); this.reduce(r); }\n\n    // r = \"xy/R mod m\"; x,y != r\n    function montMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }\n\n    Montgomery.prototype.convert = montConvert;\n    Montgomery.prototype.revert = montRevert;\n    Montgomery.prototype.reduce = montReduce;\n    Montgomery.prototype.mulTo = montMulTo;\n    Montgomery.prototype.sqrTo = montSqrTo;\n\n    // (protected) true iff this is even\n    function bnpIsEven() { return ((this.t>0)?(this[0]&1):this.s) == 0; }\n\n    // (protected) this^e, e < 2^32, doing sqr and mul with \"r\" (HAC 14.79)\n    function bnpExp(e,z) {\n      if(e > 0xffffffff || e < 1) return BigInteger.ONE;\n      var r = nbi(), r2 = nbi(), g = z.convert(this), i = nbits(e)-1;\n      g.copyTo(r);\n      while(--i >= 0) {\n        z.sqrTo(r,r2);\n        if((e&(1<<i)) > 0) z.mulTo(r2,g,r);\n        else { var t = r; r = r2; r2 = t; }\n      }\n      return z.revert(r);\n    }\n\n    // (public) this^e % m, 0 <= e < 2^32\n    function bnModPowInt(e,m) {\n      var z;\n      if(e < 256 || m.isEven()) z = new Classic(m); else z = new Montgomery(m);\n      return this.exp(e,z);\n    }\n\n    // protected\n    BigInteger.prototype.copyTo = bnpCopyTo;\n    BigInteger.prototype.fromInt = bnpFromInt;\n    BigInteger.prototype.fromString = bnpFromString;\n    BigInteger.prototype.clamp = bnpClamp;\n    BigInteger.prototype.dlShiftTo = bnpDLShiftTo;\n    BigInteger.prototype.drShiftTo = bnpDRShiftTo;\n    BigInteger.prototype.lShiftTo = bnpLShiftTo;\n    BigInteger.prototype.rShiftTo = bnpRShiftTo;\n    BigInteger.prototype.subTo = bnpSubTo;\n    BigInteger.prototype.multiplyTo = bnpMultiplyTo;\n    BigInteger.prototype.squareTo = bnpSquareTo;\n    BigInteger.prototype.divRemTo = bnpDivRemTo;\n    BigInteger.prototype.invDigit = bnpInvDigit;\n    BigInteger.prototype.isEven = bnpIsEven;\n    BigInteger.prototype.exp = bnpExp;\n\n    // public\n    BigInteger.prototype.toString = bnToString;\n    BigInteger.prototype.negate = bnNegate;\n    BigInteger.prototype.abs = bnAbs;\n    BigInteger.prototype.compareTo = bnCompareTo;\n    BigInteger.prototype.bitLength = bnBitLength;\n    BigInteger.prototype.mod = bnMod;\n    BigInteger.prototype.modPowInt = bnModPowInt;\n\n    // \"constants\"\n    BigInteger.ZERO = nbv(0);\n    BigInteger.ONE = nbv(1);\n\n    // Copyright (c) 2005-2009  Tom Wu\n    // All Rights Reserved.\n    // See \"LICENSE\" for details.\n\n    // Extended JavaScript BN functions, required for RSA private ops.\n\n    // Version 1.1: new BigInteger(\"0\", 10) returns \"proper\" zero\n    // Version 1.2: square() API, isProbablePrime fix\n\n    // (public)\n    function bnClone() { var r = nbi(); this.copyTo(r); return r; }\n\n    // (public) return value as integer\n    function bnIntValue() {\n      if(this.s < 0) {\n        if(this.t == 1) return this[0]-this.DV;\n        else if(this.t == 0) return -1;\n      }\n      else if(this.t == 1) return this[0];\n      else if(this.t == 0) return 0;\n      // assumes 16 < DB < 32\n      return ((this[1]&((1<<(32-this.DB))-1))<<this.DB)|this[0];\n    }\n\n    // (public) return value as byte\n    function bnByteValue() { return (this.t==0)?this.s:(this[0]<<24)>>24; }\n\n    // (public) return value as short (assumes DB>=16)\n    function bnShortValue() { return (this.t==0)?this.s:(this[0]<<16)>>16; }\n\n    // (protected) return x s.t. r^x < DV\n    function bnpChunkSize(r) { return Math.floor(Math.LN2*this.DB/Math.log(r)); }\n\n    // (public) 0 if this == 0, 1 if this > 0\n    function bnSigNum() {\n      if(this.s < 0) return -1;\n      else if(this.t <= 0 || (this.t == 1 && this[0] <= 0)) return 0;\n      else return 1;\n    }\n\n    // (protected) convert to radix string\n    function bnpToRadix(b) {\n      if(b == null) b = 10;\n      if(this.signum() == 0 || b < 2 || b > 36) return \"0\";\n      var cs = this.chunkSize(b);\n      var a = Math.pow(b,cs);\n      var d = nbv(a), y = nbi(), z = nbi(), r = \"\";\n      this.divRemTo(d,y,z);\n      while(y.signum() > 0) {\n        r = (a+z.intValue()).toString(b).substr(1) + r;\n        y.divRemTo(d,y,z);\n      }\n      return z.intValue().toString(b) + r;\n    }\n\n    // (protected) convert from radix string\n    function bnpFromRadix(s,b) {\n      this.fromInt(0);\n      if(b == null) b = 10;\n      var cs = this.chunkSize(b);\n      var d = Math.pow(b,cs), mi = false, j = 0, w = 0;\n      for(var i = 0; i < s.length; ++i) {\n        var x = intAt(s,i);\n        if(x < 0) {\n          if(s.charAt(i) == \"-\" && this.signum() == 0) mi = true;\n          continue;\n        }\n        w = b*w+x;\n        if(++j >= cs) {\n          this.dMultiply(d);\n          this.dAddOffset(w,0);\n          j = 0;\n          w = 0;\n        }\n      }\n      if(j > 0) {\n        this.dMultiply(Math.pow(b,j));\n        this.dAddOffset(w,0);\n      }\n      if(mi) BigInteger.ZERO.subTo(this,this);\n    }\n\n    // (protected) alternate constructor\n    function bnpFromNumber(a,b,c) {\n      if(\"number\" == typeof b) {\n        // new BigInteger(int,int,RNG)\n        if(a < 2) this.fromInt(1);\n        else {\n          this.fromNumber(a,c);\n          if(!this.testBit(a-1))\t// force MSB set\n            this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);\n          if(this.isEven()) this.dAddOffset(1,0); // force odd\n          while(!this.isProbablePrime(b)) {\n            this.dAddOffset(2,0);\n            if(this.bitLength() > a) this.subTo(BigInteger.ONE.shiftLeft(a-1),this);\n          }\n        }\n      }\n      else {\n        // new BigInteger(int,RNG)\n        var x = new Array(), t = a&7;\n        x.length = (a>>3)+1;\n        b.nextBytes(x);\n        if(t > 0) x[0] &= ((1<<t)-1); else x[0] = 0;\n        this.fromString(x,256);\n      }\n    }\n\n    // (public) convert to bigendian byte array\n    function bnToByteArray() {\n      var i = this.t, r = new Array();\n      r[0] = this.s;\n      var p = this.DB-(i*this.DB)%8, d, k = 0;\n      if(i-- > 0) {\n        if(p < this.DB && (d = this[i]>>p) != (this.s&this.DM)>>p)\n          r[k++] = d|(this.s<<(this.DB-p));\n        while(i >= 0) {\n          if(p < 8) {\n            d = (this[i]&((1<<p)-1))<<(8-p);\n            d |= this[--i]>>(p+=this.DB-8);\n          }\n          else {\n            d = (this[i]>>(p-=8))&0xff;\n            if(p <= 0) { p += this.DB; --i; }\n          }\n          if((d&0x80) != 0) d |= -256;\n          if(k == 0 && (this.s&0x80) != (d&0x80)) ++k;\n          if(k > 0 || d != this.s) r[k++] = d;\n        }\n      }\n      return r;\n    }\n\n    function bnEquals(a) { return(this.compareTo(a)==0); }\n    function bnMin(a) { return(this.compareTo(a)<0)?this:a; }\n    function bnMax(a) { return(this.compareTo(a)>0)?this:a; }\n\n    // (protected) r = this op a (bitwise)\n    function bnpBitwiseTo(a,op,r) {\n      var i, f, m = Math.min(a.t,this.t);\n      for(i = 0; i < m; ++i) r[i] = op(this[i],a[i]);\n      if(a.t < this.t) {\n        f = a.s&this.DM;\n        for(i = m; i < this.t; ++i) r[i] = op(this[i],f);\n        r.t = this.t;\n      }\n      else {\n        f = this.s&this.DM;\n        for(i = m; i < a.t; ++i) r[i] = op(f,a[i]);\n        r.t = a.t;\n      }\n      r.s = op(this.s,a.s);\n      r.clamp();\n    }\n\n    // (public) this & a\n    function op_and(x,y) { return x&y; }\n    function bnAnd(a) { var r = nbi(); this.bitwiseTo(a,op_and,r); return r; }\n\n    // (public) this | a\n    function op_or(x,y) { return x|y; }\n    function bnOr(a) { var r = nbi(); this.bitwiseTo(a,op_or,r); return r; }\n\n    // (public) this ^ a\n    function op_xor(x,y) { return x^y; }\n    function bnXor(a) { var r = nbi(); this.bitwiseTo(a,op_xor,r); return r; }\n\n    // (public) this & ~a\n    function op_andnot(x,y) { return x&~y; }\n    function bnAndNot(a) { var r = nbi(); this.bitwiseTo(a,op_andnot,r); return r; }\n\n    // (public) ~this\n    function bnNot() {\n      var r = nbi();\n      for(var i = 0; i < this.t; ++i) r[i] = this.DM&~this[i];\n      r.t = this.t;\n      r.s = ~this.s;\n      return r;\n    }\n\n    // (public) this << n\n    function bnShiftLeft(n) {\n      var r = nbi();\n      if(n < 0) this.rShiftTo(-n,r); else this.lShiftTo(n,r);\n      return r;\n    }\n\n    // (public) this >> n\n    function bnShiftRight(n) {\n      var r = nbi();\n      if(n < 0) this.lShiftTo(-n,r); else this.rShiftTo(n,r);\n      return r;\n    }\n\n    // return index of lowest 1-bit in x, x < 2^31\n    function lbit(x) {\n      if(x == 0) return -1;\n      var r = 0;\n      if((x&0xffff) == 0) { x >>= 16; r += 16; }\n      if((x&0xff) == 0) { x >>= 8; r += 8; }\n      if((x&0xf) == 0) { x >>= 4; r += 4; }\n      if((x&3) == 0) { x >>= 2; r += 2; }\n      if((x&1) == 0) ++r;\n      return r;\n    }\n\n    // (public) returns index of lowest 1-bit (or -1 if none)\n    function bnGetLowestSetBit() {\n      for(var i = 0; i < this.t; ++i)\n        if(this[i] != 0) return i*this.DB+lbit(this[i]);\n      if(this.s < 0) return this.t*this.DB;\n      return -1;\n    }\n\n    // return number of 1 bits in x\n    function cbit(x) {\n      var r = 0;\n      while(x != 0) { x &= x-1; ++r; }\n      return r;\n    }\n\n    // (public) return number of set bits\n    function bnBitCount() {\n      var r = 0, x = this.s&this.DM;\n      for(var i = 0; i < this.t; ++i) r += cbit(this[i]^x);\n      return r;\n    }\n\n    // (public) true iff nth bit is set\n    function bnTestBit(n) {\n      var j = Math.floor(n/this.DB);\n      if(j >= this.t) return(this.s!=0);\n      return((this[j]&(1<<(n%this.DB)))!=0);\n    }\n\n    // (protected) this op (1<<n)\n    function bnpChangeBit(n,op) {\n      var r = BigInteger.ONE.shiftLeft(n);\n      this.bitwiseTo(r,op,r);\n      return r;\n    }\n\n    // (public) this | (1<<n)\n    function bnSetBit(n) { return this.changeBit(n,op_or); }\n\n    // (public) this & ~(1<<n)\n    function bnClearBit(n) { return this.changeBit(n,op_andnot); }\n\n    // (public) this ^ (1<<n)\n    function bnFlipBit(n) { return this.changeBit(n,op_xor); }\n\n    // (protected) r = this + a\n    function bnpAddTo(a,r) {\n      var i = 0, c = 0, m = Math.min(a.t,this.t);\n      while(i < m) {\n        c += this[i]+a[i];\n        r[i++] = c&this.DM;\n        c >>= this.DB;\n      }\n      if(a.t < this.t) {\n        c += a.s;\n        while(i < this.t) {\n          c += this[i];\n          r[i++] = c&this.DM;\n          c >>= this.DB;\n        }\n        c += this.s;\n      }\n      else {\n        c += this.s;\n        while(i < a.t) {\n          c += a[i];\n          r[i++] = c&this.DM;\n          c >>= this.DB;\n        }\n        c += a.s;\n      }\n      r.s = (c<0)?-1:0;\n      if(c > 0) r[i++] = c;\n      else if(c < -1) r[i++] = this.DV+c;\n      r.t = i;\n      r.clamp();\n    }\n\n    // (public) this + a\n    function bnAdd(a) { var r = nbi(); this.addTo(a,r); return r; }\n\n    // (public) this - a\n    function bnSubtract(a) { var r = nbi(); this.subTo(a,r); return r; }\n\n    // (public) this * a\n    function bnMultiply(a) { var r = nbi(); this.multiplyTo(a,r); return r; }\n\n    // (public) this^2\n    function bnSquare() { var r = nbi(); this.squareTo(r); return r; }\n\n    // (public) this / a\n    function bnDivide(a) { var r = nbi(); this.divRemTo(a,r,null); return r; }\n\n    // (public) this % a\n    function bnRemainder(a) { var r = nbi(); this.divRemTo(a,null,r); return r; }\n\n    // (public) [this/a,this%a]\n    function bnDivideAndRemainder(a) {\n      var q = nbi(), r = nbi();\n      this.divRemTo(a,q,r);\n      return new Array(q,r);\n    }\n\n    // (protected) this *= n, this >= 0, 1 < n < DV\n    function bnpDMultiply(n) {\n      this[this.t] = this.am(0,n-1,this,0,0,this.t);\n      ++this.t;\n      this.clamp();\n    }\n\n    // (protected) this += n << w words, this >= 0\n    function bnpDAddOffset(n,w) {\n      if(n == 0) return;\n      while(this.t <= w) this[this.t++] = 0;\n      this[w] += n;\n      while(this[w] >= this.DV) {\n        this[w] -= this.DV;\n        if(++w >= this.t) this[this.t++] = 0;\n        ++this[w];\n      }\n    }\n\n    // A \"null\" reducer\n    function NullExp() {}\n    function nNop(x) { return x; }\n    function nMulTo(x,y,r) { x.multiplyTo(y,r); }\n    function nSqrTo(x,r) { x.squareTo(r); }\n\n    NullExp.prototype.convert = nNop;\n    NullExp.prototype.revert = nNop;\n    NullExp.prototype.mulTo = nMulTo;\n    NullExp.prototype.sqrTo = nSqrTo;\n\n    // (public) this^e\n    function bnPow(e) { return this.exp(e,new NullExp()); }\n\n    // (protected) r = lower n words of \"this * a\", a.t <= n\n    // \"this\" should be the larger one if appropriate.\n    function bnpMultiplyLowerTo(a,n,r) {\n      var i = Math.min(this.t+a.t,n);\n      r.s = 0; // assumes a,this >= 0\n      r.t = i;\n      while(i > 0) r[--i] = 0;\n      var j;\n      for(j = r.t-this.t; i < j; ++i) r[i+this.t] = this.am(0,a[i],r,i,0,this.t);\n      for(j = Math.min(a.t,n); i < j; ++i) this.am(0,a[i],r,i,0,n-i);\n      r.clamp();\n    }\n\n    // (protected) r = \"this * a\" without lower n words, n > 0\n    // \"this\" should be the larger one if appropriate.\n    function bnpMultiplyUpperTo(a,n,r) {\n      --n;\n      var i = r.t = this.t+a.t-n;\n      r.s = 0; // assumes a,this >= 0\n      while(--i >= 0) r[i] = 0;\n      for(i = Math.max(n-this.t,0); i < a.t; ++i)\n        r[this.t+i-n] = this.am(n-i,a[i],r,0,0,this.t+i-n);\n      r.clamp();\n      r.drShiftTo(1,r);\n    }\n\n    // Barrett modular reduction\n    function Barrett(m) {\n      // setup Barrett\n      this.r2 = nbi();\n      this.q3 = nbi();\n      BigInteger.ONE.dlShiftTo(2*m.t,this.r2);\n      this.mu = this.r2.divide(m);\n      this.m = m;\n    }\n\n    function barrettConvert(x) {\n      if(x.s < 0 || x.t > 2*this.m.t) return x.mod(this.m);\n      else if(x.compareTo(this.m) < 0) return x;\n      else { var r = nbi(); x.copyTo(r); this.reduce(r); return r; }\n    }\n\n    function barrettRevert(x) { return x; }\n\n    // x = x mod m (HAC 14.42)\n    function barrettReduce(x) {\n      x.drShiftTo(this.m.t-1,this.r2);\n      if(x.t > this.m.t+1) { x.t = this.m.t+1; x.clamp(); }\n      this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);\n      this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);\n      while(x.compareTo(this.r2) < 0) x.dAddOffset(1,this.m.t+1);\n      x.subTo(this.r2,x);\n      while(x.compareTo(this.m) >= 0) x.subTo(this.m,x);\n    }\n\n    // r = x^2 mod m; x != r\n    function barrettSqrTo(x,r) { x.squareTo(r); this.reduce(r); }\n\n    // r = x*y mod m; x,y != r\n    function barrettMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }\n\n    Barrett.prototype.convert = barrettConvert;\n    Barrett.prototype.revert = barrettRevert;\n    Barrett.prototype.reduce = barrettReduce;\n    Barrett.prototype.mulTo = barrettMulTo;\n    Barrett.prototype.sqrTo = barrettSqrTo;\n\n    // (public) this^e % m (HAC 14.85)\n    function bnModPow(e,m) {\n      var i = e.bitLength(), k, r = nbv(1), z;\n      if(i <= 0) return r;\n      else if(i < 18) k = 1;\n      else if(i < 48) k = 3;\n      else if(i < 144) k = 4;\n      else if(i < 768) k = 5;\n      else k = 6;\n      if(i < 8)\n        z = new Classic(m);\n      else if(m.isEven())\n        z = new Barrett(m);\n      else\n        z = new Montgomery(m);\n\n      // precomputation\n      var g = new Array(), n = 3, k1 = k-1, km = (1<<k)-1;\n      g[1] = z.convert(this);\n      if(k > 1) {\n        var g2 = nbi();\n        z.sqrTo(g[1],g2);\n        while(n <= km) {\n          g[n] = nbi();\n          z.mulTo(g2,g[n-2],g[n]);\n          n += 2;\n        }\n      }\n\n      var j = e.t-1, w, is1 = true, r2 = nbi(), t;\n      i = nbits(e[j])-1;\n      while(j >= 0) {\n        if(i >= k1) w = (e[j]>>(i-k1))&km;\n        else {\n          w = (e[j]&((1<<(i+1))-1))<<(k1-i);\n          if(j > 0) w |= e[j-1]>>(this.DB+i-k1);\n        }\n\n        n = k;\n        while((w&1) == 0) { w >>= 1; --n; }\n        if((i -= n) < 0) { i += this.DB; --j; }\n        if(is1) {\t// ret == 1, don't bother squaring or multiplying it\n          g[w].copyTo(r);\n          is1 = false;\n        }\n        else {\n          while(n > 1) { z.sqrTo(r,r2); z.sqrTo(r2,r); n -= 2; }\n          if(n > 0) z.sqrTo(r,r2); else { t = r; r = r2; r2 = t; }\n          z.mulTo(r2,g[w],r);\n        }\n\n        while(j >= 0 && (e[j]&(1<<i)) == 0) {\n          z.sqrTo(r,r2); t = r; r = r2; r2 = t;\n          if(--i < 0) { i = this.DB-1; --j; }\n        }\n      }\n      return z.revert(r);\n    }\n\n    // (public) gcd(this,a) (HAC 14.54)\n    function bnGCD(a) {\n      var x = (this.s<0)?this.negate():this.clone();\n      var y = (a.s<0)?a.negate():a.clone();\n      if(x.compareTo(y) < 0) { var t = x; x = y; y = t; }\n      var i = x.getLowestSetBit(), g = y.getLowestSetBit();\n      if(g < 0) return x;\n      if(i < g) g = i;\n      if(g > 0) {\n        x.rShiftTo(g,x);\n        y.rShiftTo(g,y);\n      }\n      while(x.signum() > 0) {\n        if((i = x.getLowestSetBit()) > 0) x.rShiftTo(i,x);\n        if((i = y.getLowestSetBit()) > 0) y.rShiftTo(i,y);\n        if(x.compareTo(y) >= 0) {\n          x.subTo(y,x);\n          x.rShiftTo(1,x);\n        }\n        else {\n          y.subTo(x,y);\n          y.rShiftTo(1,y);\n        }\n      }\n      if(g > 0) y.lShiftTo(g,y);\n      return y;\n    }\n\n    // (protected) this % n, n < 2^26\n    function bnpModInt(n) {\n      if(n <= 0) return 0;\n      var d = this.DV%n, r = (this.s<0)?n-1:0;\n      if(this.t > 0)\n        if(d == 0) r = this[0]%n;\n        else for(var i = this.t-1; i >= 0; --i) r = (d*r+this[i])%n;\n      return r;\n    }\n\n    // (public) 1/this % m (HAC 14.61)\n    function bnModInverse(m) {\n      var ac = m.isEven();\n      if((this.isEven() && ac) || m.signum() == 0) return BigInteger.ZERO;\n      var u = m.clone(), v = this.clone();\n      var a = nbv(1), b = nbv(0), c = nbv(0), d = nbv(1);\n      while(u.signum() != 0) {\n        while(u.isEven()) {\n          u.rShiftTo(1,u);\n          if(ac) {\n            if(!a.isEven() || !b.isEven()) { a.addTo(this,a); b.subTo(m,b); }\n            a.rShiftTo(1,a);\n          }\n          else if(!b.isEven()) b.subTo(m,b);\n          b.rShiftTo(1,b);\n        }\n        while(v.isEven()) {\n          v.rShiftTo(1,v);\n          if(ac) {\n            if(!c.isEven() || !d.isEven()) { c.addTo(this,c); d.subTo(m,d); }\n            c.rShiftTo(1,c);\n          }\n          else if(!d.isEven()) d.subTo(m,d);\n          d.rShiftTo(1,d);\n        }\n        if(u.compareTo(v) >= 0) {\n          u.subTo(v,u);\n          if(ac) a.subTo(c,a);\n          b.subTo(d,b);\n        }\n        else {\n          v.subTo(u,v);\n          if(ac) c.subTo(a,c);\n          d.subTo(b,d);\n        }\n      }\n      if(v.compareTo(BigInteger.ONE) != 0) return BigInteger.ZERO;\n      if(d.compareTo(m) >= 0) return d.subtract(m);\n      if(d.signum() < 0) d.addTo(m,d); else return d;\n      if(d.signum() < 0) return d.add(m); else return d;\n    }\n\n    var lowprimes = [2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];\n    var lplim = (1<<26)/lowprimes[lowprimes.length-1];\n\n    // (public) test primality with certainty >= 1-.5^t\n    function bnIsProbablePrime(t) {\n      var i, x = this.abs();\n      if(x.t == 1 && x[0] <= lowprimes[lowprimes.length-1]) {\n        for(i = 0; i < lowprimes.length; ++i)\n          if(x[0] == lowprimes[i]) return true;\n        return false;\n      }\n      if(x.isEven()) return false;\n      i = 1;\n      while(i < lowprimes.length) {\n        var m = lowprimes[i], j = i+1;\n        while(j < lowprimes.length && m < lplim) m *= lowprimes[j++];\n        m = x.modInt(m);\n        while(i < j) if(m%lowprimes[i++] == 0) return false;\n      }\n      return x.millerRabin(t);\n    }\n\n    // (protected) true if probably prime (HAC 4.24, Miller-Rabin)\n    function bnpMillerRabin(t) {\n      var n1 = this.subtract(BigInteger.ONE);\n      var k = n1.getLowestSetBit();\n      if(k <= 0) return false;\n      var r = n1.shiftRight(k);\n      t = (t+1)>>1;\n      if(t > lowprimes.length) t = lowprimes.length;\n      var a = nbi();\n      for(var i = 0; i < t; ++i) {\n        //Pick bases at random, instead of starting at 2\n        a.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);\n        var y = a.modPow(r,this);\n        if(y.compareTo(BigInteger.ONE) != 0 && y.compareTo(n1) != 0) {\n          var j = 1;\n          while(j++ < k && y.compareTo(n1) != 0) {\n            y = y.modPowInt(2,this);\n            if(y.compareTo(BigInteger.ONE) == 0) return false;\n          }\n          if(y.compareTo(n1) != 0) return false;\n        }\n      }\n      return true;\n    }\n\n    // protected\n    BigInteger.prototype.chunkSize = bnpChunkSize;\n    BigInteger.prototype.toRadix = bnpToRadix;\n    BigInteger.prototype.fromRadix = bnpFromRadix;\n    BigInteger.prototype.fromNumber = bnpFromNumber;\n    BigInteger.prototype.bitwiseTo = bnpBitwiseTo;\n    BigInteger.prototype.changeBit = bnpChangeBit;\n    BigInteger.prototype.addTo = bnpAddTo;\n    BigInteger.prototype.dMultiply = bnpDMultiply;\n    BigInteger.prototype.dAddOffset = bnpDAddOffset;\n    BigInteger.prototype.multiplyLowerTo = bnpMultiplyLowerTo;\n    BigInteger.prototype.multiplyUpperTo = bnpMultiplyUpperTo;\n    BigInteger.prototype.modInt = bnpModInt;\n    BigInteger.prototype.millerRabin = bnpMillerRabin;\n\n    // public\n    BigInteger.prototype.clone = bnClone;\n    BigInteger.prototype.intValue = bnIntValue;\n    BigInteger.prototype.byteValue = bnByteValue;\n    BigInteger.prototype.shortValue = bnShortValue;\n    BigInteger.prototype.signum = bnSigNum;\n    BigInteger.prototype.toByteArray = bnToByteArray;\n    BigInteger.prototype.equals = bnEquals;\n    BigInteger.prototype.min = bnMin;\n    BigInteger.prototype.max = bnMax;\n    BigInteger.prototype.and = bnAnd;\n    BigInteger.prototype.or = bnOr;\n    BigInteger.prototype.xor = bnXor;\n    BigInteger.prototype.andNot = bnAndNot;\n    BigInteger.prototype.not = bnNot;\n    BigInteger.prototype.shiftLeft = bnShiftLeft;\n    BigInteger.prototype.shiftRight = bnShiftRight;\n    BigInteger.prototype.getLowestSetBit = bnGetLowestSetBit;\n    BigInteger.prototype.bitCount = bnBitCount;\n    BigInteger.prototype.testBit = bnTestBit;\n    BigInteger.prototype.setBit = bnSetBit;\n    BigInteger.prototype.clearBit = bnClearBit;\n    BigInteger.prototype.flipBit = bnFlipBit;\n    BigInteger.prototype.add = bnAdd;\n    BigInteger.prototype.subtract = bnSubtract;\n    BigInteger.prototype.multiply = bnMultiply;\n    BigInteger.prototype.divide = bnDivide;\n    BigInteger.prototype.remainder = bnRemainder;\n    BigInteger.prototype.divideAndRemainder = bnDivideAndRemainder;\n    BigInteger.prototype.modPow = bnModPow;\n    BigInteger.prototype.modInverse = bnModInverse;\n    BigInteger.prototype.pow = bnPow;\n    BigInteger.prototype.gcd = bnGCD;\n    BigInteger.prototype.isProbablePrime = bnIsProbablePrime;\n\n    // JSBN-specific extension\n    BigInteger.prototype.square = bnSquare;\n\n    // Expose the Barrett function\n    BigInteger.prototype.Barrett = Barrett\n\n    // BigInteger interfaces not implemented in jsbn:\n\n    // BigInteger(int signum, byte[] magnitude)\n    // double doubleValue()\n    // float floatValue()\n    // int hashCode()\n    // long longValue()\n    // static BigInteger valueOf(long val)\n\n\t// Random number generator - requires a PRNG backend, e.g. prng4.js\n\n\t// For best results, put code like\n\t// <body onClick='rng_seed_time();' onKeyPress='rng_seed_time();'>\n\t// in your main HTML document.\n\n\tvar rng_state;\n\tvar rng_pool;\n\tvar rng_pptr;\n\n\t// Mix in a 32-bit integer into the pool\n\tfunction rng_seed_int(x) {\n\t  rng_pool[rng_pptr++] ^= x & 255;\n\t  rng_pool[rng_pptr++] ^= (x >> 8) & 255;\n\t  rng_pool[rng_pptr++] ^= (x >> 16) & 255;\n\t  rng_pool[rng_pptr++] ^= (x >> 24) & 255;\n\t  if(rng_pptr >= rng_psize) rng_pptr -= rng_psize;\n\t}\n\n\t// Mix in the current time (w/milliseconds) into the pool\n\tfunction rng_seed_time() {\n\t  rng_seed_int(new Date().getTime());\n\t}\n\n\t// Initialize the pool with junk if needed.\n\tif(rng_pool == null) {\n\t  rng_pool = new Array();\n\t  rng_pptr = 0;\n\t  var t;\n\t  if(typeof window !== \"undefined\" && window.crypto) {\n\t\tif (window.crypto.getRandomValues) {\n\t\t  // Use webcrypto if available\n\t\t  var ua = new Uint8Array(32);\n\t\t  window.crypto.getRandomValues(ua);\n\t\t  for(t = 0; t < 32; ++t)\n\t\t\trng_pool[rng_pptr++] = ua[t];\n\t\t}\n\t\telse if(navigator.appName == \"Netscape\" && navigator.appVersion < \"5\") {\n\t\t  // Extract entropy (256 bits) from NS4 RNG if available\n\t\t  var z = window.crypto.random(32);\n\t\t  for(t = 0; t < z.length; ++t)\n\t\t\trng_pool[rng_pptr++] = z.charCodeAt(t) & 255;\n\t\t}\n\t  }\n\t  while(rng_pptr < rng_psize) {  // extract some randomness from Math.random()\n\t\tt = Math.floor(65536 * Math.random());\n\t\trng_pool[rng_pptr++] = t >>> 8;\n\t\trng_pool[rng_pptr++] = t & 255;\n\t  }\n\t  rng_pptr = 0;\n\t  rng_seed_time();\n\t  //rng_seed_int(window.screenX);\n\t  //rng_seed_int(window.screenY);\n\t}\n\n\tfunction rng_get_byte() {\n\t  if(rng_state == null) {\n\t\trng_seed_time();\n\t\trng_state = prng_newstate();\n\t\trng_state.init(rng_pool);\n\t\tfor(rng_pptr = 0; rng_pptr < rng_pool.length; ++rng_pptr)\n\t\t  rng_pool[rng_pptr] = 0;\n\t\trng_pptr = 0;\n\t\t//rng_pool = null;\n\t  }\n\t  // TODO: allow reseeding after first request\n\t  return rng_state.next();\n\t}\n\n\tfunction rng_get_bytes(ba) {\n\t  var i;\n\t  for(i = 0; i < ba.length; ++i) ba[i] = rng_get_byte();\n\t}\n\n\tfunction SecureRandom() {}\n\n\tSecureRandom.prototype.nextBytes = rng_get_bytes;\n\n\t// prng4.js - uses Arcfour as a PRNG\n\n\tfunction Arcfour() {\n\t  this.i = 0;\n\t  this.j = 0;\n\t  this.S = new Array();\n\t}\n\n\t// Initialize arcfour context from key, an array of ints, each from [0..255]\n\tfunction ARC4init(key) {\n\t  var i, j, t;\n\t  for(i = 0; i < 256; ++i)\n\t\tthis.S[i] = i;\n\t  j = 0;\n\t  for(i = 0; i < 256; ++i) {\n\t\tj = (j + this.S[i] + key[i % key.length]) & 255;\n\t\tt = this.S[i];\n\t\tthis.S[i] = this.S[j];\n\t\tthis.S[j] = t;\n\t  }\n\t  this.i = 0;\n\t  this.j = 0;\n\t}\n\n\tfunction ARC4next() {\n\t  var t;\n\t  this.i = (this.i + 1) & 255;\n\t  this.j = (this.j + this.S[this.i]) & 255;\n\t  t = this.S[this.i];\n\t  this.S[this.i] = this.S[this.j];\n\t  this.S[this.j] = t;\n\t  return this.S[(t + this.S[this.i]) & 255];\n\t}\n\n\tArcfour.prototype.init = ARC4init;\n\tArcfour.prototype.next = ARC4next;\n\n\t// Plug in your RNG constructor here\n\tfunction prng_newstate() {\n\t  return new Arcfour();\n\t}\n\n\t// Pool size must be a multiple of 4 and greater than 32.\n\t// An array of bytes the size of the pool will be passed to init()\n\tvar rng_psize = 256;\n\n  BigInteger.SecureRandom = SecureRandom;\n  BigInteger.BigInteger = BigInteger;\n  if (typeof exports !== 'undefined') {\n    exports = module.exports = BigInteger;\n  } else {\n    this.BigInteger = BigInteger;\n    this.SecureRandom = SecureRandom;\n  }\n\n}).call(this);\n", "// Basic Javascript Elliptic Curve implementation\n// Ported loosely from BouncyCastle's Java EC code\n// Only Fp curves implemented for now\n\n// Requires jsbn.js and jsbn2.js\nvar BigInteger = require('jsbn').BigInteger\nvar Barrett = BigInteger.prototype.Barrett\n\n// ----------------\n// ECFieldElementFp\n\n// constructor\nfunction ECFieldElementFp(q,x) {\n    this.x = x;\n    // TODO if(x.compareTo(q) >= 0) error\n    this.q = q;\n}\n\nfunction feFpEquals(other) {\n    if(other == this) return true;\n    return (this.q.equals(other.q) && this.x.equals(other.x));\n}\n\nfunction feFpToBigInteger() {\n    return this.x;\n}\n\nfunction feFpNegate() {\n    return new ECFieldElementFp(this.q, this.x.negate().mod(this.q));\n}\n\nfunction feFpAdd(b) {\n    return new ECFieldElementFp(this.q, this.x.add(b.toBigInteger()).mod(this.q));\n}\n\nfunction feFpSubtract(b) {\n    return new ECFieldElementFp(this.q, this.x.subtract(b.toBigInteger()).mod(this.q));\n}\n\nfunction feFpMultiply(b) {\n    return new ECFieldElementFp(this.q, this.x.multiply(b.toBigInteger()).mod(this.q));\n}\n\nfunction feFpSquare() {\n    return new ECFieldElementFp(this.q, this.x.square().mod(this.q));\n}\n\nfunction feFpDivide(b) {\n    return new ECFieldElementFp(this.q, this.x.multiply(b.toBigInteger().modInverse(this.q)).mod(this.q));\n}\n\nECFieldElementFp.prototype.equals = feFpEquals;\nECFieldElementFp.prototype.toBigInteger = feFpToBigInteger;\nECFieldElementFp.prototype.negate = feFpNegate;\nECFieldElementFp.prototype.add = feFpAdd;\nECFieldElementFp.prototype.subtract = feFpSubtract;\nECFieldElementFp.prototype.multiply = feFpMultiply;\nECFieldElementFp.prototype.square = feFpSquare;\nECFieldElementFp.prototype.divide = feFpDivide;\n\n// ----------------\n// ECPointFp\n\n// constructor\nfunction ECPointFp(curve,x,y,z) {\n    this.curve = curve;\n    this.x = x;\n    this.y = y;\n    // Projective coordinates: either zinv == null or z * zinv == 1\n    // z and zinv are just BigIntegers, not fieldElements\n    if(z == null) {\n      this.z = BigInteger.ONE;\n    }\n    else {\n      this.z = z;\n    }\n    this.zinv = null;\n    //TODO: compression flag\n}\n\nfunction pointFpGetX() {\n    if(this.zinv == null) {\n      this.zinv = this.z.modInverse(this.curve.q);\n    }\n    var r = this.x.toBigInteger().multiply(this.zinv);\n    this.curve.reduce(r);\n    return this.curve.fromBigInteger(r);\n}\n\nfunction pointFpGetY() {\n    if(this.zinv == null) {\n      this.zinv = this.z.modInverse(this.curve.q);\n    }\n    var r = this.y.toBigInteger().multiply(this.zinv);\n    this.curve.reduce(r);\n    return this.curve.fromBigInteger(r);\n}\n\nfunction pointFpEquals(other) {\n    if(other == this) return true;\n    if(this.isInfinity()) return other.isInfinity();\n    if(other.isInfinity()) return this.isInfinity();\n    var u, v;\n    // u = Y2 * Z1 - Y1 * Z2\n    u = other.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(other.z)).mod(this.curve.q);\n    if(!u.equals(BigInteger.ZERO)) return false;\n    // v = X2 * Z1 - X1 * Z2\n    v = other.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(other.z)).mod(this.curve.q);\n    return v.equals(BigInteger.ZERO);\n}\n\nfunction pointFpIsInfinity() {\n    if((this.x == null) && (this.y == null)) return true;\n    return this.z.equals(BigInteger.ZERO) && !this.y.toBigInteger().equals(BigInteger.ZERO);\n}\n\nfunction pointFpNegate() {\n    return new ECPointFp(this.curve, this.x, this.y.negate(), this.z);\n}\n\nfunction pointFpAdd(b) {\n    if(this.isInfinity()) return b;\n    if(b.isInfinity()) return this;\n\n    // u = Y2 * Z1 - Y1 * Z2\n    var u = b.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(b.z)).mod(this.curve.q);\n    // v = X2 * Z1 - X1 * Z2\n    var v = b.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(b.z)).mod(this.curve.q);\n\n    if(BigInteger.ZERO.equals(v)) {\n        if(BigInteger.ZERO.equals(u)) {\n            return this.twice(); // this == b, so double\n        }\n\treturn this.curve.getInfinity(); // this = -b, so infinity\n    }\n\n    var THREE = new BigInteger(\"3\");\n    var x1 = this.x.toBigInteger();\n    var y1 = this.y.toBigInteger();\n    var x2 = b.x.toBigInteger();\n    var y2 = b.y.toBigInteger();\n\n    var v2 = v.square();\n    var v3 = v2.multiply(v);\n    var x1v2 = x1.multiply(v2);\n    var zu2 = u.square().multiply(this.z);\n\n    // x3 = v * (z2 * (z1 * u^2 - 2 * x1 * v^2) - v^3)\n    var x3 = zu2.subtract(x1v2.shiftLeft(1)).multiply(b.z).subtract(v3).multiply(v).mod(this.curve.q);\n    // y3 = z2 * (3 * x1 * u * v^2 - y1 * v^3 - z1 * u^3) + u * v^3\n    var y3 = x1v2.multiply(THREE).multiply(u).subtract(y1.multiply(v3)).subtract(zu2.multiply(u)).multiply(b.z).add(u.multiply(v3)).mod(this.curve.q);\n    // z3 = v^3 * z1 * z2\n    var z3 = v3.multiply(this.z).multiply(b.z).mod(this.curve.q);\n\n    return new ECPointFp(this.curve, this.curve.fromBigInteger(x3), this.curve.fromBigInteger(y3), z3);\n}\n\nfunction pointFpTwice() {\n    if(this.isInfinity()) return this;\n    if(this.y.toBigInteger().signum() == 0) return this.curve.getInfinity();\n\n    // TODO: optimized handling of constants\n    var THREE = new BigInteger(\"3\");\n    var x1 = this.x.toBigInteger();\n    var y1 = this.y.toBigInteger();\n\n    var y1z1 = y1.multiply(this.z);\n    var y1sqz1 = y1z1.multiply(y1).mod(this.curve.q);\n    var a = this.curve.a.toBigInteger();\n\n    // w = 3 * x1^2 + a * z1^2\n    var w = x1.square().multiply(THREE);\n    if(!BigInteger.ZERO.equals(a)) {\n      w = w.add(this.z.square().multiply(a));\n    }\n    w = w.mod(this.curve.q);\n    //this.curve.reduce(w);\n    // x3 = 2 * y1 * z1 * (w^2 - 8 * x1 * y1^2 * z1)\n    var x3 = w.square().subtract(x1.shiftLeft(3).multiply(y1sqz1)).shiftLeft(1).multiply(y1z1).mod(this.curve.q);\n    // y3 = 4 * y1^2 * z1 * (3 * w * x1 - 2 * y1^2 * z1) - w^3\n    var y3 = w.multiply(THREE).multiply(x1).subtract(y1sqz1.shiftLeft(1)).shiftLeft(2).multiply(y1sqz1).subtract(w.square().multiply(w)).mod(this.curve.q);\n    // z3 = 8 * (y1 * z1)^3\n    var z3 = y1z1.square().multiply(y1z1).shiftLeft(3).mod(this.curve.q);\n\n    return new ECPointFp(this.curve, this.curve.fromBigInteger(x3), this.curve.fromBigInteger(y3), z3);\n}\n\n// Simple NAF (Non-Adjacent Form) multiplication algorithm\n// TODO: modularize the multiplication algorithm\nfunction pointFpMultiply(k) {\n    if(this.isInfinity()) return this;\n    if(k.signum() == 0) return this.curve.getInfinity();\n\n    var e = k;\n    var h = e.multiply(new BigInteger(\"3\"));\n\n    var neg = this.negate();\n    var R = this;\n\n    var i;\n    for(i = h.bitLength() - 2; i > 0; --i) {\n\tR = R.twice();\n\n\tvar hBit = h.testBit(i);\n\tvar eBit = e.testBit(i);\n\n\tif (hBit != eBit) {\n\t    R = R.add(hBit ? this : neg);\n\t}\n    }\n\n    return R;\n}\n\n// Compute this*j + x*k (simultaneous multiplication)\nfunction pointFpMultiplyTwo(j,x,k) {\n  var i;\n  if(j.bitLength() > k.bitLength())\n    i = j.bitLength() - 1;\n  else\n    i = k.bitLength() - 1;\n\n  var R = this.curve.getInfinity();\n  var both = this.add(x);\n  while(i >= 0) {\n    R = R.twice();\n    if(j.testBit(i)) {\n      if(k.testBit(i)) {\n        R = R.add(both);\n      }\n      else {\n        R = R.add(this);\n      }\n    }\n    else {\n      if(k.testBit(i)) {\n        R = R.add(x);\n      }\n    }\n    --i;\n  }\n\n  return R;\n}\n\nECPointFp.prototype.getX = pointFpGetX;\nECPointFp.prototype.getY = pointFpGetY;\nECPointFp.prototype.equals = pointFpEquals;\nECPointFp.prototype.isInfinity = pointFpIsInfinity;\nECPointFp.prototype.negate = pointFpNegate;\nECPointFp.prototype.add = pointFpAdd;\nECPointFp.prototype.twice = pointFpTwice;\nECPointFp.prototype.multiply = pointFpMultiply;\nECPointFp.prototype.multiplyTwo = pointFpMultiplyTwo;\n\n// ----------------\n// ECCurveFp\n\n// constructor\nfunction ECCurveFp(q,a,b) {\n    this.q = q;\n    this.a = this.fromBigInteger(a);\n    this.b = this.fromBigInteger(b);\n    this.infinity = new ECPointFp(this, null, null);\n    this.reducer = new Barrett(this.q);\n}\n\nfunction curveFpGetQ() {\n    return this.q;\n}\n\nfunction curveFpGetA() {\n    return this.a;\n}\n\nfunction curveFpGetB() {\n    return this.b;\n}\n\nfunction curveFpEquals(other) {\n    if(other == this) return true;\n    return(this.q.equals(other.q) && this.a.equals(other.a) && this.b.equals(other.b));\n}\n\nfunction curveFpGetInfinity() {\n    return this.infinity;\n}\n\nfunction curveFpFromBigInteger(x) {\n    return new ECFieldElementFp(this.q, x);\n}\n\nfunction curveReduce(x) {\n    this.reducer.reduce(x);\n}\n\n// for now, work with hex strings because they're easier in JS\nfunction curveFpDecodePointHex(s) {\n    switch(parseInt(s.substr(0,2), 16)) { // first byte\n    case 0:\n\treturn this.infinity;\n    case 2:\n    case 3:\n\t// point compression not supported yet\n\treturn null;\n    case 4:\n    case 6:\n    case 7:\n\tvar len = (s.length - 2) / 2;\n\tvar xHex = s.substr(2, len);\n\tvar yHex = s.substr(len+2, len);\n\n\treturn new ECPointFp(this,\n\t\t\t     this.fromBigInteger(new BigInteger(xHex, 16)),\n\t\t\t     this.fromBigInteger(new BigInteger(yHex, 16)));\n\n    default: // unsupported\n\treturn null;\n    }\n}\n\nfunction curveFpEncodePointHex(p) {\n\tif (p.isInfinity()) return \"00\";\n\tvar xHex = p.getX().toBigInteger().toString(16);\n\tvar yHex = p.getY().toBigInteger().toString(16);\n\tvar oLen = this.getQ().toString(16).length;\n\tif ((oLen % 2) != 0) oLen++;\n\twhile (xHex.length < oLen) {\n\t\txHex = \"0\" + xHex;\n\t}\n\twhile (yHex.length < oLen) {\n\t\tyHex = \"0\" + yHex;\n\t}\n\treturn \"04\" + xHex + yHex;\n}\n\nECCurveFp.prototype.getQ = curveFpGetQ;\nECCurveFp.prototype.getA = curveFpGetA;\nECCurveFp.prototype.getB = curveFpGetB;\nECCurveFp.prototype.equals = curveFpEquals;\nECCurveFp.prototype.getInfinity = curveFpGetInfinity;\nECCurveFp.prototype.fromBigInteger = curveFpFromBigInteger;\nECCurveFp.prototype.reduce = curveReduce;\n//ECCurveFp.prototype.decodePointHex = curveFpDecodePointHex;\nECCurveFp.prototype.encodePointHex = curveFpEncodePointHex;\n\n// from: https://github.com/kaielvin/jsbn-ec-point-compression\nECCurveFp.prototype.decodePointHex = function(s)\n{\n\tvar yIsEven;\n    switch(parseInt(s.substr(0,2), 16)) { // first byte\n    case 0:\n\treturn this.infinity;\n    case 2:\n\tyIsEven = false;\n    case 3:\n\tif(yIsEven == undefined) yIsEven = true;\n\tvar len = s.length - 2;\n\tvar xHex = s.substr(2, len);\n\tvar x = this.fromBigInteger(new BigInteger(xHex,16));\n\tvar alpha = x.multiply(x.square().add(this.getA())).add(this.getB());\n\tvar beta = alpha.sqrt();\n\n    if (beta == null) throw \"Invalid point compression\";\n\n    var betaValue = beta.toBigInteger();\n    if (betaValue.testBit(0) != yIsEven)\n    {\n        // Use the other root\n        beta = this.fromBigInteger(this.getQ().subtract(betaValue));\n    }\n    return new ECPointFp(this,x,beta);\n    case 4:\n    case 6:\n    case 7:\n\tvar len = (s.length - 2) / 2;\n\tvar xHex = s.substr(2, len);\n\tvar yHex = s.substr(len+2, len);\n\n\treturn new ECPointFp(this,\n\t\t\t     this.fromBigInteger(new BigInteger(xHex, 16)),\n\t\t\t     this.fromBigInteger(new BigInteger(yHex, 16)));\n\n    default: // unsupported\n\treturn null;\n    }\n}\nECCurveFp.prototype.encodeCompressedPointHex = function(p)\n{\n\tif (p.isInfinity()) return \"00\";\n\tvar xHex = p.getX().toBigInteger().toString(16);\n\tvar oLen = this.getQ().toString(16).length;\n\tif ((oLen % 2) != 0) oLen++;\n\twhile (xHex.length < oLen)\n\t\txHex = \"0\" + xHex;\n\tvar yPrefix;\n\tif(p.getY().toBigInteger().isEven()) yPrefix = \"02\";\n\telse                                 yPrefix = \"03\";\n\n\treturn yPrefix + xHex;\n}\n\n\nECFieldElementFp.prototype.getR = function()\n{\n\tif(this.r != undefined) return this.r;\n\n    this.r = null;\n    var bitLength = this.q.bitLength();\n    if (bitLength > 128)\n    {\n        var firstWord = this.q.shiftRight(bitLength - 64);\n        if (firstWord.intValue() == -1)\n        {\n            this.r = BigInteger.ONE.shiftLeft(bitLength).subtract(this.q);\n        }\n    }\n    return this.r;\n}\nECFieldElementFp.prototype.modMult = function(x1,x2)\n{\n    return this.modReduce(x1.multiply(x2));\n}\nECFieldElementFp.prototype.modReduce = function(x)\n{\n    if (this.getR() != null)\n    {\n        var qLen = q.bitLength();\n        while (x.bitLength() > (qLen + 1))\n        {\n            var u = x.shiftRight(qLen);\n            var v = x.subtract(u.shiftLeft(qLen));\n            if (!this.getR().equals(BigInteger.ONE))\n            {\n                u = u.multiply(this.getR());\n            }\n            x = u.add(v); \n        }\n        while (x.compareTo(q) >= 0)\n        {\n            x = x.subtract(q);\n        }\n    }\n    else\n    {\n        x = x.mod(q);\n    }\n    return x;\n}\nECFieldElementFp.prototype.sqrt = function()\n{\n    if (!this.q.testBit(0)) throw \"unsupported\";\n\n    // p mod 4 == 3\n    if (this.q.testBit(1))\n    {\n    \tvar z = new ECFieldElementFp(this.q,this.x.modPow(this.q.shiftRight(2).add(BigInteger.ONE),this.q));\n    \treturn z.square().equals(this) ? z : null;\n    }\n\n    // p mod 4 == 1\n    var qMinusOne = this.q.subtract(BigInteger.ONE);\n\n    var legendreExponent = qMinusOne.shiftRight(1);\n    if (!(this.x.modPow(legendreExponent, this.q).equals(BigInteger.ONE)))\n    {\n        return null;\n    }\n\n    var u = qMinusOne.shiftRight(2);\n    var k = u.shiftLeft(1).add(BigInteger.ONE);\n\n    var Q = this.x;\n    var fourQ = modDouble(modDouble(Q));\n\n    var U, V;\n    do\n    {\n        var P;\n        do\n        {\n            P = new BigInteger(this.q.bitLength(), new SecureRandom());\n        }\n        while (P.compareTo(this.q) >= 0\n            || !(P.multiply(P).subtract(fourQ).modPow(legendreExponent, this.q).equals(qMinusOne)));\n\n        var result = this.lucasSequence(P, Q, k);\n        U = result[0];\n        V = result[1];\n\n        if (this.modMult(V, V).equals(fourQ))\n        {\n            // Integer division by 2, mod q\n            if (V.testBit(0))\n            {\n                V = V.add(q);\n            }\n\n            V = V.shiftRight(1);\n\n            return new ECFieldElementFp(q,V);\n        }\n    }\n    while (U.equals(BigInteger.ONE) || U.equals(qMinusOne));\n\n    return null;\n}\nECFieldElementFp.prototype.lucasSequence = function(P,Q,k)\n{\n    var n = k.bitLength();\n    var s = k.getLowestSetBit();\n\n    var Uh = BigInteger.ONE;\n    var Vl = BigInteger.TWO;\n    var Vh = P;\n    var Ql = BigInteger.ONE;\n    var Qh = BigInteger.ONE;\n\n    for (var j = n - 1; j >= s + 1; --j)\n    {\n        Ql = this.modMult(Ql, Qh);\n\n        if (k.testBit(j))\n        {\n            Qh = this.modMult(Ql, Q);\n            Uh = this.modMult(Uh, Vh);\n            Vl = this.modReduce(Vh.multiply(Vl).subtract(P.multiply(Ql)));\n            Vh = this.modReduce(Vh.multiply(Vh).subtract(Qh.shiftLeft(1)));\n        }\n        else\n        {\n            Qh = Ql;\n            Uh = this.modReduce(Uh.multiply(Vl).subtract(Ql));\n            Vh = this.modReduce(Vh.multiply(Vl).subtract(P.multiply(Ql)));\n            Vl = this.modReduce(Vl.multiply(Vl).subtract(Ql.shiftLeft(1)));\n        }\n    }\n\n    Ql = this.modMult(Ql, Qh);\n    Qh = this.modMult(Ql, Q);\n    Uh = this.modReduce(Uh.multiply(Vl).subtract(Ql));\n    Vl = this.modReduce(Vh.multiply(Vl).subtract(P.multiply(Ql)));\n    Ql = this.modMult(Ql, Qh);\n\n    for (var j = 1; j <= s; ++j)\n    {\n        Uh = this.modMult(Uh, Vl);\n        Vl = this.modReduce(Vl.multiply(Vl).subtract(Ql.shiftLeft(1)));\n        Ql = this.modMult(Ql, Ql);\n    }\n\n    return [ Uh, Vl ];\n}\n\nvar exports = {\n  ECCurveFp: ECCurveFp,\n  ECPointFp: ECPointFp,\n  ECFieldElementFp: ECFieldElementFp\n}\n\nmodule.exports = exports\n", "(function(nacl) {\n'use strict';\n\n// Ported in 2014 by Dmitry Chestnykh and Devi Mandiri.\n// Public domain.\n//\n// Implementation derived from TweetNaCl version 20140427.\n// See for details: http://tweetnacl.cr.yp.to/\n\nvar gf = function(init) {\n  var i, r = new Float64Array(16);\n  if (init) for (i = 0; i < init.length; i++) r[i] = init[i];\n  return r;\n};\n\n//  Pluggable, initialized in high-level API below.\nvar randombytes = function(/* x, n */) { throw new Error('no PRNG'); };\n\nvar _0 = new Uint8Array(16);\nvar _9 = new Uint8Array(32); _9[0] = 9;\n\nvar gf0 = gf(),\n    gf1 = gf([1]),\n    _121665 = gf([0xdb41, 1]),\n    D = gf([0x78a3, 0x1359, 0x4dca, 0x75eb, 0xd8ab, 0x4141, 0x0a4d, 0x0070, 0xe898, 0x7779, 0x4079, 0x8cc7, 0xfe73, 0x2b6f, 0x6cee, 0x5203]),\n    D2 = gf([0xf159, 0x26b2, 0x9b94, 0xebd6, 0xb156, 0x8283, 0x149a, 0x00e0, 0xd130, 0xeef3, 0x80f2, 0x198e, 0xfce7, 0x56df, 0xd9dc, 0x2406]),\n    X = gf([0xd51a, 0x8f25, 0x2d60, 0xc956, 0xa7b2, 0x9525, 0xc760, 0x692c, 0xdc5c, 0xfdd6, 0xe231, 0xc0a4, 0x53fe, 0xcd6e, 0x36d3, 0x2169]),\n    Y = gf([0x6658, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666]),\n    I = gf([0xa0b0, 0x4a0e, 0x1b27, 0xc4ee, 0xe478, 0xad2f, 0x1806, 0x2f43, 0xd7a7, 0x3dfb, 0x0099, 0x2b4d, 0xdf0b, 0x4fc1, 0x2480, 0x2b83]);\n\nfunction ts64(x, i, h, l) {\n  x[i]   = (h >> 24) & 0xff;\n  x[i+1] = (h >> 16) & 0xff;\n  x[i+2] = (h >>  8) & 0xff;\n  x[i+3] = h & 0xff;\n  x[i+4] = (l >> 24)  & 0xff;\n  x[i+5] = (l >> 16)  & 0xff;\n  x[i+6] = (l >>  8)  & 0xff;\n  x[i+7] = l & 0xff;\n}\n\nfunction vn(x, xi, y, yi, n) {\n  var i,d = 0;\n  for (i = 0; i < n; i++) d |= x[xi+i]^y[yi+i];\n  return (1 & ((d - 1) >>> 8)) - 1;\n}\n\nfunction crypto_verify_16(x, xi, y, yi) {\n  return vn(x,xi,y,yi,16);\n}\n\nfunction crypto_verify_32(x, xi, y, yi) {\n  return vn(x,xi,y,yi,32);\n}\n\nfunction core_salsa20(o, p, k, c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n   x0 =  x0 +  j0 | 0;\n   x1 =  x1 +  j1 | 0;\n   x2 =  x2 +  j2 | 0;\n   x3 =  x3 +  j3 | 0;\n   x4 =  x4 +  j4 | 0;\n   x5 =  x5 +  j5 | 0;\n   x6 =  x6 +  j6 | 0;\n   x7 =  x7 +  j7 | 0;\n   x8 =  x8 +  j8 | 0;\n   x9 =  x9 +  j9 | 0;\n  x10 = x10 + j10 | 0;\n  x11 = x11 + j11 | 0;\n  x12 = x12 + j12 | 0;\n  x13 = x13 + j13 | 0;\n  x14 = x14 + j14 | 0;\n  x15 = x15 + j15 | 0;\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x1 >>>  0 & 0xff;\n  o[ 5] = x1 >>>  8 & 0xff;\n  o[ 6] = x1 >>> 16 & 0xff;\n  o[ 7] = x1 >>> 24 & 0xff;\n\n  o[ 8] = x2 >>>  0 & 0xff;\n  o[ 9] = x2 >>>  8 & 0xff;\n  o[10] = x2 >>> 16 & 0xff;\n  o[11] = x2 >>> 24 & 0xff;\n\n  o[12] = x3 >>>  0 & 0xff;\n  o[13] = x3 >>>  8 & 0xff;\n  o[14] = x3 >>> 16 & 0xff;\n  o[15] = x3 >>> 24 & 0xff;\n\n  o[16] = x4 >>>  0 & 0xff;\n  o[17] = x4 >>>  8 & 0xff;\n  o[18] = x4 >>> 16 & 0xff;\n  o[19] = x4 >>> 24 & 0xff;\n\n  o[20] = x5 >>>  0 & 0xff;\n  o[21] = x5 >>>  8 & 0xff;\n  o[22] = x5 >>> 16 & 0xff;\n  o[23] = x5 >>> 24 & 0xff;\n\n  o[24] = x6 >>>  0 & 0xff;\n  o[25] = x6 >>>  8 & 0xff;\n  o[26] = x6 >>> 16 & 0xff;\n  o[27] = x6 >>> 24 & 0xff;\n\n  o[28] = x7 >>>  0 & 0xff;\n  o[29] = x7 >>>  8 & 0xff;\n  o[30] = x7 >>> 16 & 0xff;\n  o[31] = x7 >>> 24 & 0xff;\n\n  o[32] = x8 >>>  0 & 0xff;\n  o[33] = x8 >>>  8 & 0xff;\n  o[34] = x8 >>> 16 & 0xff;\n  o[35] = x8 >>> 24 & 0xff;\n\n  o[36] = x9 >>>  0 & 0xff;\n  o[37] = x9 >>>  8 & 0xff;\n  o[38] = x9 >>> 16 & 0xff;\n  o[39] = x9 >>> 24 & 0xff;\n\n  o[40] = x10 >>>  0 & 0xff;\n  o[41] = x10 >>>  8 & 0xff;\n  o[42] = x10 >>> 16 & 0xff;\n  o[43] = x10 >>> 24 & 0xff;\n\n  o[44] = x11 >>>  0 & 0xff;\n  o[45] = x11 >>>  8 & 0xff;\n  o[46] = x11 >>> 16 & 0xff;\n  o[47] = x11 >>> 24 & 0xff;\n\n  o[48] = x12 >>>  0 & 0xff;\n  o[49] = x12 >>>  8 & 0xff;\n  o[50] = x12 >>> 16 & 0xff;\n  o[51] = x12 >>> 24 & 0xff;\n\n  o[52] = x13 >>>  0 & 0xff;\n  o[53] = x13 >>>  8 & 0xff;\n  o[54] = x13 >>> 16 & 0xff;\n  o[55] = x13 >>> 24 & 0xff;\n\n  o[56] = x14 >>>  0 & 0xff;\n  o[57] = x14 >>>  8 & 0xff;\n  o[58] = x14 >>> 16 & 0xff;\n  o[59] = x14 >>> 24 & 0xff;\n\n  o[60] = x15 >>>  0 & 0xff;\n  o[61] = x15 >>>  8 & 0xff;\n  o[62] = x15 >>> 16 & 0xff;\n  o[63] = x15 >>> 24 & 0xff;\n}\n\nfunction core_hsalsa20(o,p,k,c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x5 >>>  0 & 0xff;\n  o[ 5] = x5 >>>  8 & 0xff;\n  o[ 6] = x5 >>> 16 & 0xff;\n  o[ 7] = x5 >>> 24 & 0xff;\n\n  o[ 8] = x10 >>>  0 & 0xff;\n  o[ 9] = x10 >>>  8 & 0xff;\n  o[10] = x10 >>> 16 & 0xff;\n  o[11] = x10 >>> 24 & 0xff;\n\n  o[12] = x15 >>>  0 & 0xff;\n  o[13] = x15 >>>  8 & 0xff;\n  o[14] = x15 >>> 16 & 0xff;\n  o[15] = x15 >>> 24 & 0xff;\n\n  o[16] = x6 >>>  0 & 0xff;\n  o[17] = x6 >>>  8 & 0xff;\n  o[18] = x6 >>> 16 & 0xff;\n  o[19] = x6 >>> 24 & 0xff;\n\n  o[20] = x7 >>>  0 & 0xff;\n  o[21] = x7 >>>  8 & 0xff;\n  o[22] = x7 >>> 16 & 0xff;\n  o[23] = x7 >>> 24 & 0xff;\n\n  o[24] = x8 >>>  0 & 0xff;\n  o[25] = x8 >>>  8 & 0xff;\n  o[26] = x8 >>> 16 & 0xff;\n  o[27] = x8 >>> 24 & 0xff;\n\n  o[28] = x9 >>>  0 & 0xff;\n  o[29] = x9 >>>  8 & 0xff;\n  o[30] = x9 >>> 16 & 0xff;\n  o[31] = x9 >>> 24 & 0xff;\n}\n\nfunction crypto_core_salsa20(out,inp,k,c) {\n  core_salsa20(out,inp,k,c);\n}\n\nfunction crypto_core_hsalsa20(out,inp,k,c) {\n  core_hsalsa20(out,inp,k,c);\n}\n\nvar sigma = new Uint8Array([101, 120, 112, 97, 110, 100, 32, 51, 50, 45, 98, 121, 116, 101, 32, 107]);\n            // \"expand 32-byte k\"\n\nfunction crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n    mpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream_salsa20(c,cpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream(c,cpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20(c,cpos,d,sn,s);\n}\n\nfunction crypto_stream_xor(c,cpos,m,mpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s);\n}\n\n/*\n* Port of Andrew Moon's Poly1305-donna-16. Public domain.\n* https://github.com/floodyberry/poly1305-donna\n*/\n\nvar poly1305 = function(key) {\n  this.buffer = new Uint8Array(16);\n  this.r = new Uint16Array(10);\n  this.h = new Uint16Array(10);\n  this.pad = new Uint16Array(8);\n  this.leftover = 0;\n  this.fin = 0;\n\n  var t0, t1, t2, t3, t4, t5, t6, t7;\n\n  t0 = key[ 0] & 0xff | (key[ 1] & 0xff) << 8; this.r[0] = ( t0                     ) & 0x1fff;\n  t1 = key[ 2] & 0xff | (key[ 3] & 0xff) << 8; this.r[1] = ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n  t2 = key[ 4] & 0xff | (key[ 5] & 0xff) << 8; this.r[2] = ((t1 >>> 10) | (t2 <<  6)) & 0x1f03;\n  t3 = key[ 6] & 0xff | (key[ 7] & 0xff) << 8; this.r[3] = ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n  t4 = key[ 8] & 0xff | (key[ 9] & 0xff) << 8; this.r[4] = ((t3 >>>  4) | (t4 << 12)) & 0x00ff;\n  this.r[5] = ((t4 >>>  1)) & 0x1ffe;\n  t5 = key[10] & 0xff | (key[11] & 0xff) << 8; this.r[6] = ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n  t6 = key[12] & 0xff | (key[13] & 0xff) << 8; this.r[7] = ((t5 >>> 11) | (t6 <<  5)) & 0x1f81;\n  t7 = key[14] & 0xff | (key[15] & 0xff) << 8; this.r[8] = ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n  this.r[9] = ((t7 >>>  5)) & 0x007f;\n\n  this.pad[0] = key[16] & 0xff | (key[17] & 0xff) << 8;\n  this.pad[1] = key[18] & 0xff | (key[19] & 0xff) << 8;\n  this.pad[2] = key[20] & 0xff | (key[21] & 0xff) << 8;\n  this.pad[3] = key[22] & 0xff | (key[23] & 0xff) << 8;\n  this.pad[4] = key[24] & 0xff | (key[25] & 0xff) << 8;\n  this.pad[5] = key[26] & 0xff | (key[27] & 0xff) << 8;\n  this.pad[6] = key[28] & 0xff | (key[29] & 0xff) << 8;\n  this.pad[7] = key[30] & 0xff | (key[31] & 0xff) << 8;\n};\n\npoly1305.prototype.blocks = function(m, mpos, bytes) {\n  var hibit = this.fin ? 0 : (1 << 11);\n  var t0, t1, t2, t3, t4, t5, t6, t7, c;\n  var d0, d1, d2, d3, d4, d5, d6, d7, d8, d9;\n\n  var h0 = this.h[0],\n      h1 = this.h[1],\n      h2 = this.h[2],\n      h3 = this.h[3],\n      h4 = this.h[4],\n      h5 = this.h[5],\n      h6 = this.h[6],\n      h7 = this.h[7],\n      h8 = this.h[8],\n      h9 = this.h[9];\n\n  var r0 = this.r[0],\n      r1 = this.r[1],\n      r2 = this.r[2],\n      r3 = this.r[3],\n      r4 = this.r[4],\n      r5 = this.r[5],\n      r6 = this.r[6],\n      r7 = this.r[7],\n      r8 = this.r[8],\n      r9 = this.r[9];\n\n  while (bytes >= 16) {\n    t0 = m[mpos+ 0] & 0xff | (m[mpos+ 1] & 0xff) << 8; h0 += ( t0                     ) & 0x1fff;\n    t1 = m[mpos+ 2] & 0xff | (m[mpos+ 3] & 0xff) << 8; h1 += ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n    t2 = m[mpos+ 4] & 0xff | (m[mpos+ 5] & 0xff) << 8; h2 += ((t1 >>> 10) | (t2 <<  6)) & 0x1fff;\n    t3 = m[mpos+ 6] & 0xff | (m[mpos+ 7] & 0xff) << 8; h3 += ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n    t4 = m[mpos+ 8] & 0xff | (m[mpos+ 9] & 0xff) << 8; h4 += ((t3 >>>  4) | (t4 << 12)) & 0x1fff;\n    h5 += ((t4 >>>  1)) & 0x1fff;\n    t5 = m[mpos+10] & 0xff | (m[mpos+11] & 0xff) << 8; h6 += ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n    t6 = m[mpos+12] & 0xff | (m[mpos+13] & 0xff) << 8; h7 += ((t5 >>> 11) | (t6 <<  5)) & 0x1fff;\n    t7 = m[mpos+14] & 0xff | (m[mpos+15] & 0xff) << 8; h8 += ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n    h9 += ((t7 >>> 5)) | hibit;\n\n    c = 0;\n\n    d0 = c;\n    d0 += h0 * r0;\n    d0 += h1 * (5 * r9);\n    d0 += h2 * (5 * r8);\n    d0 += h3 * (5 * r7);\n    d0 += h4 * (5 * r6);\n    c = (d0 >>> 13); d0 &= 0x1fff;\n    d0 += h5 * (5 * r5);\n    d0 += h6 * (5 * r4);\n    d0 += h7 * (5 * r3);\n    d0 += h8 * (5 * r2);\n    d0 += h9 * (5 * r1);\n    c += (d0 >>> 13); d0 &= 0x1fff;\n\n    d1 = c;\n    d1 += h0 * r1;\n    d1 += h1 * r0;\n    d1 += h2 * (5 * r9);\n    d1 += h3 * (5 * r8);\n    d1 += h4 * (5 * r7);\n    c = (d1 >>> 13); d1 &= 0x1fff;\n    d1 += h5 * (5 * r6);\n    d1 += h6 * (5 * r5);\n    d1 += h7 * (5 * r4);\n    d1 += h8 * (5 * r3);\n    d1 += h9 * (5 * r2);\n    c += (d1 >>> 13); d1 &= 0x1fff;\n\n    d2 = c;\n    d2 += h0 * r2;\n    d2 += h1 * r1;\n    d2 += h2 * r0;\n    d2 += h3 * (5 * r9);\n    d2 += h4 * (5 * r8);\n    c = (d2 >>> 13); d2 &= 0x1fff;\n    d2 += h5 * (5 * r7);\n    d2 += h6 * (5 * r6);\n    d2 += h7 * (5 * r5);\n    d2 += h8 * (5 * r4);\n    d2 += h9 * (5 * r3);\n    c += (d2 >>> 13); d2 &= 0x1fff;\n\n    d3 = c;\n    d3 += h0 * r3;\n    d3 += h1 * r2;\n    d3 += h2 * r1;\n    d3 += h3 * r0;\n    d3 += h4 * (5 * r9);\n    c = (d3 >>> 13); d3 &= 0x1fff;\n    d3 += h5 * (5 * r8);\n    d3 += h6 * (5 * r7);\n    d3 += h7 * (5 * r6);\n    d3 += h8 * (5 * r5);\n    d3 += h9 * (5 * r4);\n    c += (d3 >>> 13); d3 &= 0x1fff;\n\n    d4 = c;\n    d4 += h0 * r4;\n    d4 += h1 * r3;\n    d4 += h2 * r2;\n    d4 += h3 * r1;\n    d4 += h4 * r0;\n    c = (d4 >>> 13); d4 &= 0x1fff;\n    d4 += h5 * (5 * r9);\n    d4 += h6 * (5 * r8);\n    d4 += h7 * (5 * r7);\n    d4 += h8 * (5 * r6);\n    d4 += h9 * (5 * r5);\n    c += (d4 >>> 13); d4 &= 0x1fff;\n\n    d5 = c;\n    d5 += h0 * r5;\n    d5 += h1 * r4;\n    d5 += h2 * r3;\n    d5 += h3 * r2;\n    d5 += h4 * r1;\n    c = (d5 >>> 13); d5 &= 0x1fff;\n    d5 += h5 * r0;\n    d5 += h6 * (5 * r9);\n    d5 += h7 * (5 * r8);\n    d5 += h8 * (5 * r7);\n    d5 += h9 * (5 * r6);\n    c += (d5 >>> 13); d5 &= 0x1fff;\n\n    d6 = c;\n    d6 += h0 * r6;\n    d6 += h1 * r5;\n    d6 += h2 * r4;\n    d6 += h3 * r3;\n    d6 += h4 * r2;\n    c = (d6 >>> 13); d6 &= 0x1fff;\n    d6 += h5 * r1;\n    d6 += h6 * r0;\n    d6 += h7 * (5 * r9);\n    d6 += h8 * (5 * r8);\n    d6 += h9 * (5 * r7);\n    c += (d6 >>> 13); d6 &= 0x1fff;\n\n    d7 = c;\n    d7 += h0 * r7;\n    d7 += h1 * r6;\n    d7 += h2 * r5;\n    d7 += h3 * r4;\n    d7 += h4 * r3;\n    c = (d7 >>> 13); d7 &= 0x1fff;\n    d7 += h5 * r2;\n    d7 += h6 * r1;\n    d7 += h7 * r0;\n    d7 += h8 * (5 * r9);\n    d7 += h9 * (5 * r8);\n    c += (d7 >>> 13); d7 &= 0x1fff;\n\n    d8 = c;\n    d8 += h0 * r8;\n    d8 += h1 * r7;\n    d8 += h2 * r6;\n    d8 += h3 * r5;\n    d8 += h4 * r4;\n    c = (d8 >>> 13); d8 &= 0x1fff;\n    d8 += h5 * r3;\n    d8 += h6 * r2;\n    d8 += h7 * r1;\n    d8 += h8 * r0;\n    d8 += h9 * (5 * r9);\n    c += (d8 >>> 13); d8 &= 0x1fff;\n\n    d9 = c;\n    d9 += h0 * r9;\n    d9 += h1 * r8;\n    d9 += h2 * r7;\n    d9 += h3 * r6;\n    d9 += h4 * r5;\n    c = (d9 >>> 13); d9 &= 0x1fff;\n    d9 += h5 * r4;\n    d9 += h6 * r3;\n    d9 += h7 * r2;\n    d9 += h8 * r1;\n    d9 += h9 * r0;\n    c += (d9 >>> 13); d9 &= 0x1fff;\n\n    c = (((c << 2) + c)) | 0;\n    c = (c + d0) | 0;\n    d0 = c & 0x1fff;\n    c = (c >>> 13);\n    d1 += c;\n\n    h0 = d0;\n    h1 = d1;\n    h2 = d2;\n    h3 = d3;\n    h4 = d4;\n    h5 = d5;\n    h6 = d6;\n    h7 = d7;\n    h8 = d8;\n    h9 = d9;\n\n    mpos += 16;\n    bytes -= 16;\n  }\n  this.h[0] = h0;\n  this.h[1] = h1;\n  this.h[2] = h2;\n  this.h[3] = h3;\n  this.h[4] = h4;\n  this.h[5] = h5;\n  this.h[6] = h6;\n  this.h[7] = h7;\n  this.h[8] = h8;\n  this.h[9] = h9;\n};\n\npoly1305.prototype.finish = function(mac, macpos) {\n  var g = new Uint16Array(10);\n  var c, mask, f, i;\n\n  if (this.leftover) {\n    i = this.leftover;\n    this.buffer[i++] = 1;\n    for (; i < 16; i++) this.buffer[i] = 0;\n    this.fin = 1;\n    this.blocks(this.buffer, 0, 16);\n  }\n\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  for (i = 2; i < 10; i++) {\n    this.h[i] += c;\n    c = this.h[i] >>> 13;\n    this.h[i] &= 0x1fff;\n  }\n  this.h[0] += (c * 5);\n  c = this.h[0] >>> 13;\n  this.h[0] &= 0x1fff;\n  this.h[1] += c;\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  this.h[2] += c;\n\n  g[0] = this.h[0] + 5;\n  c = g[0] >>> 13;\n  g[0] &= 0x1fff;\n  for (i = 1; i < 10; i++) {\n    g[i] = this.h[i] + c;\n    c = g[i] >>> 13;\n    g[i] &= 0x1fff;\n  }\n  g[9] -= (1 << 13);\n\n  mask = (c ^ 1) - 1;\n  for (i = 0; i < 10; i++) g[i] &= mask;\n  mask = ~mask;\n  for (i = 0; i < 10; i++) this.h[i] = (this.h[i] & mask) | g[i];\n\n  this.h[0] = ((this.h[0]       ) | (this.h[1] << 13)                    ) & 0xffff;\n  this.h[1] = ((this.h[1] >>>  3) | (this.h[2] << 10)                    ) & 0xffff;\n  this.h[2] = ((this.h[2] >>>  6) | (this.h[3] <<  7)                    ) & 0xffff;\n  this.h[3] = ((this.h[3] >>>  9) | (this.h[4] <<  4)                    ) & 0xffff;\n  this.h[4] = ((this.h[4] >>> 12) | (this.h[5] <<  1) | (this.h[6] << 14)) & 0xffff;\n  this.h[5] = ((this.h[6] >>>  2) | (this.h[7] << 11)                    ) & 0xffff;\n  this.h[6] = ((this.h[7] >>>  5) | (this.h[8] <<  8)                    ) & 0xffff;\n  this.h[7] = ((this.h[8] >>>  8) | (this.h[9] <<  5)                    ) & 0xffff;\n\n  f = this.h[0] + this.pad[0];\n  this.h[0] = f & 0xffff;\n  for (i = 1; i < 8; i++) {\n    f = (((this.h[i] + this.pad[i]) | 0) + (f >>> 16)) | 0;\n    this.h[i] = f & 0xffff;\n  }\n\n  mac[macpos+ 0] = (this.h[0] >>> 0) & 0xff;\n  mac[macpos+ 1] = (this.h[0] >>> 8) & 0xff;\n  mac[macpos+ 2] = (this.h[1] >>> 0) & 0xff;\n  mac[macpos+ 3] = (this.h[1] >>> 8) & 0xff;\n  mac[macpos+ 4] = (this.h[2] >>> 0) & 0xff;\n  mac[macpos+ 5] = (this.h[2] >>> 8) & 0xff;\n  mac[macpos+ 6] = (this.h[3] >>> 0) & 0xff;\n  mac[macpos+ 7] = (this.h[3] >>> 8) & 0xff;\n  mac[macpos+ 8] = (this.h[4] >>> 0) & 0xff;\n  mac[macpos+ 9] = (this.h[4] >>> 8) & 0xff;\n  mac[macpos+10] = (this.h[5] >>> 0) & 0xff;\n  mac[macpos+11] = (this.h[5] >>> 8) & 0xff;\n  mac[macpos+12] = (this.h[6] >>> 0) & 0xff;\n  mac[macpos+13] = (this.h[6] >>> 8) & 0xff;\n  mac[macpos+14] = (this.h[7] >>> 0) & 0xff;\n  mac[macpos+15] = (this.h[7] >>> 8) & 0xff;\n};\n\npoly1305.prototype.update = function(m, mpos, bytes) {\n  var i, want;\n\n  if (this.leftover) {\n    want = (16 - this.leftover);\n    if (want > bytes)\n      want = bytes;\n    for (i = 0; i < want; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    bytes -= want;\n    mpos += want;\n    this.leftover += want;\n    if (this.leftover < 16)\n      return;\n    this.blocks(this.buffer, 0, 16);\n    this.leftover = 0;\n  }\n\n  if (bytes >= 16) {\n    want = bytes - (bytes % 16);\n    this.blocks(m, mpos, want);\n    mpos += want;\n    bytes -= want;\n  }\n\n  if (bytes) {\n    for (i = 0; i < bytes; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    this.leftover += bytes;\n  }\n};\n\nfunction crypto_onetimeauth(out, outpos, m, mpos, n, k) {\n  var s = new poly1305(k);\n  s.update(m, mpos, n);\n  s.finish(out, outpos);\n  return 0;\n}\n\nfunction crypto_onetimeauth_verify(h, hpos, m, mpos, n, k) {\n  var x = new Uint8Array(16);\n  crypto_onetimeauth(x,0,m,mpos,n,k);\n  return crypto_verify_16(h,hpos,x,0);\n}\n\nfunction crypto_secretbox(c,m,d,n,k) {\n  var i;\n  if (d < 32) return -1;\n  crypto_stream_xor(c,0,m,0,d,n,k);\n  crypto_onetimeauth(c, 16, c, 32, d - 32, c);\n  for (i = 0; i < 16; i++) c[i] = 0;\n  return 0;\n}\n\nfunction crypto_secretbox_open(m,c,d,n,k) {\n  var i;\n  var x = new Uint8Array(32);\n  if (d < 32) return -1;\n  crypto_stream(x,0,32,n,k);\n  if (crypto_onetimeauth_verify(c, 16,c, 32,d - 32,x) !== 0) return -1;\n  crypto_stream_xor(m,0,c,0,d,n,k);\n  for (i = 0; i < 32; i++) m[i] = 0;\n  return 0;\n}\n\nfunction set25519(r, a) {\n  var i;\n  for (i = 0; i < 16; i++) r[i] = a[i]|0;\n}\n\nfunction car25519(o) {\n  var i, v, c = 1;\n  for (i = 0; i < 16; i++) {\n    v = o[i] + c + 65535;\n    c = Math.floor(v / 65536);\n    o[i] = v - c * 65536;\n  }\n  o[0] += c-1 + 37 * (c-1);\n}\n\nfunction sel25519(p, q, b) {\n  var t, c = ~(b-1);\n  for (var i = 0; i < 16; i++) {\n    t = c & (p[i] ^ q[i]);\n    p[i] ^= t;\n    q[i] ^= t;\n  }\n}\n\nfunction pack25519(o, n) {\n  var i, j, b;\n  var m = gf(), t = gf();\n  for (i = 0; i < 16; i++) t[i] = n[i];\n  car25519(t);\n  car25519(t);\n  car25519(t);\n  for (j = 0; j < 2; j++) {\n    m[0] = t[0] - 0xffed;\n    for (i = 1; i < 15; i++) {\n      m[i] = t[i] - 0xffff - ((m[i-1]>>16) & 1);\n      m[i-1] &= 0xffff;\n    }\n    m[15] = t[15] - 0x7fff - ((m[14]>>16) & 1);\n    b = (m[15]>>16) & 1;\n    m[14] &= 0xffff;\n    sel25519(t, m, 1-b);\n  }\n  for (i = 0; i < 16; i++) {\n    o[2*i] = t[i] & 0xff;\n    o[2*i+1] = t[i]>>8;\n  }\n}\n\nfunction neq25519(a, b) {\n  var c = new Uint8Array(32), d = new Uint8Array(32);\n  pack25519(c, a);\n  pack25519(d, b);\n  return crypto_verify_32(c, 0, d, 0);\n}\n\nfunction par25519(a) {\n  var d = new Uint8Array(32);\n  pack25519(d, a);\n  return d[0] & 1;\n}\n\nfunction unpack25519(o, n) {\n  var i;\n  for (i = 0; i < 16; i++) o[i] = n[2*i] + (n[2*i+1] << 8);\n  o[15] &= 0x7fff;\n}\n\nfunction A(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] + b[i];\n}\n\nfunction Z(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] - b[i];\n}\n\nfunction M(o, a, b) {\n  var v, c,\n     t0 = 0,  t1 = 0,  t2 = 0,  t3 = 0,  t4 = 0,  t5 = 0,  t6 = 0,  t7 = 0,\n     t8 = 0,  t9 = 0, t10 = 0, t11 = 0, t12 = 0, t13 = 0, t14 = 0, t15 = 0,\n    t16 = 0, t17 = 0, t18 = 0, t19 = 0, t20 = 0, t21 = 0, t22 = 0, t23 = 0,\n    t24 = 0, t25 = 0, t26 = 0, t27 = 0, t28 = 0, t29 = 0, t30 = 0,\n    b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3],\n    b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7],\n    b8 = b[8],\n    b9 = b[9],\n    b10 = b[10],\n    b11 = b[11],\n    b12 = b[12],\n    b13 = b[13],\n    b14 = b[14],\n    b15 = b[15];\n\n  v = a[0];\n  t0 += v * b0;\n  t1 += v * b1;\n  t2 += v * b2;\n  t3 += v * b3;\n  t4 += v * b4;\n  t5 += v * b5;\n  t6 += v * b6;\n  t7 += v * b7;\n  t8 += v * b8;\n  t9 += v * b9;\n  t10 += v * b10;\n  t11 += v * b11;\n  t12 += v * b12;\n  t13 += v * b13;\n  t14 += v * b14;\n  t15 += v * b15;\n  v = a[1];\n  t1 += v * b0;\n  t2 += v * b1;\n  t3 += v * b2;\n  t4 += v * b3;\n  t5 += v * b4;\n  t6 += v * b5;\n  t7 += v * b6;\n  t8 += v * b7;\n  t9 += v * b8;\n  t10 += v * b9;\n  t11 += v * b10;\n  t12 += v * b11;\n  t13 += v * b12;\n  t14 += v * b13;\n  t15 += v * b14;\n  t16 += v * b15;\n  v = a[2];\n  t2 += v * b0;\n  t3 += v * b1;\n  t4 += v * b2;\n  t5 += v * b3;\n  t6 += v * b4;\n  t7 += v * b5;\n  t8 += v * b6;\n  t9 += v * b7;\n  t10 += v * b8;\n  t11 += v * b9;\n  t12 += v * b10;\n  t13 += v * b11;\n  t14 += v * b12;\n  t15 += v * b13;\n  t16 += v * b14;\n  t17 += v * b15;\n  v = a[3];\n  t3 += v * b0;\n  t4 += v * b1;\n  t5 += v * b2;\n  t6 += v * b3;\n  t7 += v * b4;\n  t8 += v * b5;\n  t9 += v * b6;\n  t10 += v * b7;\n  t11 += v * b8;\n  t12 += v * b9;\n  t13 += v * b10;\n  t14 += v * b11;\n  t15 += v * b12;\n  t16 += v * b13;\n  t17 += v * b14;\n  t18 += v * b15;\n  v = a[4];\n  t4 += v * b0;\n  t5 += v * b1;\n  t6 += v * b2;\n  t7 += v * b3;\n  t8 += v * b4;\n  t9 += v * b5;\n  t10 += v * b6;\n  t11 += v * b7;\n  t12 += v * b8;\n  t13 += v * b9;\n  t14 += v * b10;\n  t15 += v * b11;\n  t16 += v * b12;\n  t17 += v * b13;\n  t18 += v * b14;\n  t19 += v * b15;\n  v = a[5];\n  t5 += v * b0;\n  t6 += v * b1;\n  t7 += v * b2;\n  t8 += v * b3;\n  t9 += v * b4;\n  t10 += v * b5;\n  t11 += v * b6;\n  t12 += v * b7;\n  t13 += v * b8;\n  t14 += v * b9;\n  t15 += v * b10;\n  t16 += v * b11;\n  t17 += v * b12;\n  t18 += v * b13;\n  t19 += v * b14;\n  t20 += v * b15;\n  v = a[6];\n  t6 += v * b0;\n  t7 += v * b1;\n  t8 += v * b2;\n  t9 += v * b3;\n  t10 += v * b4;\n  t11 += v * b5;\n  t12 += v * b6;\n  t13 += v * b7;\n  t14 += v * b8;\n  t15 += v * b9;\n  t16 += v * b10;\n  t17 += v * b11;\n  t18 += v * b12;\n  t19 += v * b13;\n  t20 += v * b14;\n  t21 += v * b15;\n  v = a[7];\n  t7 += v * b0;\n  t8 += v * b1;\n  t9 += v * b2;\n  t10 += v * b3;\n  t11 += v * b4;\n  t12 += v * b5;\n  t13 += v * b6;\n  t14 += v * b7;\n  t15 += v * b8;\n  t16 += v * b9;\n  t17 += v * b10;\n  t18 += v * b11;\n  t19 += v * b12;\n  t20 += v * b13;\n  t21 += v * b14;\n  t22 += v * b15;\n  v = a[8];\n  t8 += v * b0;\n  t9 += v * b1;\n  t10 += v * b2;\n  t11 += v * b3;\n  t12 += v * b4;\n  t13 += v * b5;\n  t14 += v * b6;\n  t15 += v * b7;\n  t16 += v * b8;\n  t17 += v * b9;\n  t18 += v * b10;\n  t19 += v * b11;\n  t20 += v * b12;\n  t21 += v * b13;\n  t22 += v * b14;\n  t23 += v * b15;\n  v = a[9];\n  t9 += v * b0;\n  t10 += v * b1;\n  t11 += v * b2;\n  t12 += v * b3;\n  t13 += v * b4;\n  t14 += v * b5;\n  t15 += v * b6;\n  t16 += v * b7;\n  t17 += v * b8;\n  t18 += v * b9;\n  t19 += v * b10;\n  t20 += v * b11;\n  t21 += v * b12;\n  t22 += v * b13;\n  t23 += v * b14;\n  t24 += v * b15;\n  v = a[10];\n  t10 += v * b0;\n  t11 += v * b1;\n  t12 += v * b2;\n  t13 += v * b3;\n  t14 += v * b4;\n  t15 += v * b5;\n  t16 += v * b6;\n  t17 += v * b7;\n  t18 += v * b8;\n  t19 += v * b9;\n  t20 += v * b10;\n  t21 += v * b11;\n  t22 += v * b12;\n  t23 += v * b13;\n  t24 += v * b14;\n  t25 += v * b15;\n  v = a[11];\n  t11 += v * b0;\n  t12 += v * b1;\n  t13 += v * b2;\n  t14 += v * b3;\n  t15 += v * b4;\n  t16 += v * b5;\n  t17 += v * b6;\n  t18 += v * b7;\n  t19 += v * b8;\n  t20 += v * b9;\n  t21 += v * b10;\n  t22 += v * b11;\n  t23 += v * b12;\n  t24 += v * b13;\n  t25 += v * b14;\n  t26 += v * b15;\n  v = a[12];\n  t12 += v * b0;\n  t13 += v * b1;\n  t14 += v * b2;\n  t15 += v * b3;\n  t16 += v * b4;\n  t17 += v * b5;\n  t18 += v * b6;\n  t19 += v * b7;\n  t20 += v * b8;\n  t21 += v * b9;\n  t22 += v * b10;\n  t23 += v * b11;\n  t24 += v * b12;\n  t25 += v * b13;\n  t26 += v * b14;\n  t27 += v * b15;\n  v = a[13];\n  t13 += v * b0;\n  t14 += v * b1;\n  t15 += v * b2;\n  t16 += v * b3;\n  t17 += v * b4;\n  t18 += v * b5;\n  t19 += v * b6;\n  t20 += v * b7;\n  t21 += v * b8;\n  t22 += v * b9;\n  t23 += v * b10;\n  t24 += v * b11;\n  t25 += v * b12;\n  t26 += v * b13;\n  t27 += v * b14;\n  t28 += v * b15;\n  v = a[14];\n  t14 += v * b0;\n  t15 += v * b1;\n  t16 += v * b2;\n  t17 += v * b3;\n  t18 += v * b4;\n  t19 += v * b5;\n  t20 += v * b6;\n  t21 += v * b7;\n  t22 += v * b8;\n  t23 += v * b9;\n  t24 += v * b10;\n  t25 += v * b11;\n  t26 += v * b12;\n  t27 += v * b13;\n  t28 += v * b14;\n  t29 += v * b15;\n  v = a[15];\n  t15 += v * b0;\n  t16 += v * b1;\n  t17 += v * b2;\n  t18 += v * b3;\n  t19 += v * b4;\n  t20 += v * b5;\n  t21 += v * b6;\n  t22 += v * b7;\n  t23 += v * b8;\n  t24 += v * b9;\n  t25 += v * b10;\n  t26 += v * b11;\n  t27 += v * b12;\n  t28 += v * b13;\n  t29 += v * b14;\n  t30 += v * b15;\n\n  t0  += 38 * t16;\n  t1  += 38 * t17;\n  t2  += 38 * t18;\n  t3  += 38 * t19;\n  t4  += 38 * t20;\n  t5  += 38 * t21;\n  t6  += 38 * t22;\n  t7  += 38 * t23;\n  t8  += 38 * t24;\n  t9  += 38 * t25;\n  t10 += 38 * t26;\n  t11 += 38 * t27;\n  t12 += 38 * t28;\n  t13 += 38 * t29;\n  t14 += 38 * t30;\n  // t15 left as is\n\n  // first car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  // second car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  o[ 0] = t0;\n  o[ 1] = t1;\n  o[ 2] = t2;\n  o[ 3] = t3;\n  o[ 4] = t4;\n  o[ 5] = t5;\n  o[ 6] = t6;\n  o[ 7] = t7;\n  o[ 8] = t8;\n  o[ 9] = t9;\n  o[10] = t10;\n  o[11] = t11;\n  o[12] = t12;\n  o[13] = t13;\n  o[14] = t14;\n  o[15] = t15;\n}\n\nfunction S(o, a) {\n  M(o, a, a);\n}\n\nfunction inv25519(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 253; a >= 0; a--) {\n    S(c, c);\n    if(a !== 2 && a !== 4) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction pow2523(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 250; a >= 0; a--) {\n      S(c, c);\n      if(a !== 1) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction crypto_scalarmult(q, n, p) {\n  var z = new Uint8Array(32);\n  var x = new Float64Array(80), r, i;\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf();\n  for (i = 0; i < 31; i++) z[i] = n[i];\n  z[31]=(n[31]&127)|64;\n  z[0]&=248;\n  unpack25519(x,p);\n  for (i = 0; i < 16; i++) {\n    b[i]=x[i];\n    d[i]=a[i]=c[i]=0;\n  }\n  a[0]=d[0]=1;\n  for (i=254; i>=0; --i) {\n    r=(z[i>>>3]>>>(i&7))&1;\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n    A(e,a,c);\n    Z(a,a,c);\n    A(c,b,d);\n    Z(b,b,d);\n    S(d,e);\n    S(f,a);\n    M(a,c,a);\n    M(c,b,e);\n    A(e,a,c);\n    Z(a,a,c);\n    S(b,a);\n    Z(c,d,f);\n    M(a,c,_121665);\n    A(a,a,d);\n    M(c,c,a);\n    M(a,d,f);\n    M(d,b,x);\n    S(b,e);\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n  }\n  for (i = 0; i < 16; i++) {\n    x[i+16]=a[i];\n    x[i+32]=c[i];\n    x[i+48]=b[i];\n    x[i+64]=d[i];\n  }\n  var x32 = x.subarray(32);\n  var x16 = x.subarray(16);\n  inv25519(x32,x32);\n  M(x16,x16,x32);\n  pack25519(q,x16);\n  return 0;\n}\n\nfunction crypto_scalarmult_base(q, n) {\n  return crypto_scalarmult(q, n, _9);\n}\n\nfunction crypto_box_keypair(y, x) {\n  randombytes(x, 32);\n  return crypto_scalarmult_base(y, x);\n}\n\nfunction crypto_box_beforenm(k, y, x) {\n  var s = new Uint8Array(32);\n  crypto_scalarmult(s, x, y);\n  return crypto_core_hsalsa20(k, _0, s, sigma);\n}\n\nvar crypto_box_afternm = crypto_secretbox;\nvar crypto_box_open_afternm = crypto_secretbox_open;\n\nfunction crypto_box(c, m, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_afternm(c, m, d, n, k);\n}\n\nfunction crypto_box_open(m, c, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_open_afternm(m, c, d, n, k);\n}\n\nvar K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n];\n\nfunction crypto_hashblocks_hl(hh, hl, m, n) {\n  var wh = new Int32Array(16), wl = new Int32Array(16),\n      bh0, bh1, bh2, bh3, bh4, bh5, bh6, bh7,\n      bl0, bl1, bl2, bl3, bl4, bl5, bl6, bl7,\n      th, tl, i, j, h, l, a, b, c, d;\n\n  var ah0 = hh[0],\n      ah1 = hh[1],\n      ah2 = hh[2],\n      ah3 = hh[3],\n      ah4 = hh[4],\n      ah5 = hh[5],\n      ah6 = hh[6],\n      ah7 = hh[7],\n\n      al0 = hl[0],\n      al1 = hl[1],\n      al2 = hl[2],\n      al3 = hl[3],\n      al4 = hl[4],\n      al5 = hl[5],\n      al6 = hl[6],\n      al7 = hl[7];\n\n  var pos = 0;\n  while (n >= 128) {\n    for (i = 0; i < 16; i++) {\n      j = 8 * i + pos;\n      wh[i] = (m[j+0] << 24) | (m[j+1] << 16) | (m[j+2] << 8) | m[j+3];\n      wl[i] = (m[j+4] << 24) | (m[j+5] << 16) | (m[j+6] << 8) | m[j+7];\n    }\n    for (i = 0; i < 80; i++) {\n      bh0 = ah0;\n      bh1 = ah1;\n      bh2 = ah2;\n      bh3 = ah3;\n      bh4 = ah4;\n      bh5 = ah5;\n      bh6 = ah6;\n      bh7 = ah7;\n\n      bl0 = al0;\n      bl1 = al1;\n      bl2 = al2;\n      bl3 = al3;\n      bl4 = al4;\n      bl5 = al5;\n      bl6 = al6;\n      bl7 = al7;\n\n      // add\n      h = ah7;\n      l = al7;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma1\n      h = ((ah4 >>> 14) | (al4 << (32-14))) ^ ((ah4 >>> 18) | (al4 << (32-18))) ^ ((al4 >>> (41-32)) | (ah4 << (32-(41-32))));\n      l = ((al4 >>> 14) | (ah4 << (32-14))) ^ ((al4 >>> 18) | (ah4 << (32-18))) ^ ((ah4 >>> (41-32)) | (al4 << (32-(41-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Ch\n      h = (ah4 & ah5) ^ (~ah4 & ah6);\n      l = (al4 & al5) ^ (~al4 & al6);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // K\n      h = K[i*2];\n      l = K[i*2+1];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // w\n      h = wh[i%16];\n      l = wl[i%16];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      th = c & 0xffff | d << 16;\n      tl = a & 0xffff | b << 16;\n\n      // add\n      h = th;\n      l = tl;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma0\n      h = ((ah0 >>> 28) | (al0 << (32-28))) ^ ((al0 >>> (34-32)) | (ah0 << (32-(34-32)))) ^ ((al0 >>> (39-32)) | (ah0 << (32-(39-32))));\n      l = ((al0 >>> 28) | (ah0 << (32-28))) ^ ((ah0 >>> (34-32)) | (al0 << (32-(34-32)))) ^ ((ah0 >>> (39-32)) | (al0 << (32-(39-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Maj\n      h = (ah0 & ah1) ^ (ah0 & ah2) ^ (ah1 & ah2);\n      l = (al0 & al1) ^ (al0 & al2) ^ (al1 & al2);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh7 = (c & 0xffff) | (d << 16);\n      bl7 = (a & 0xffff) | (b << 16);\n\n      // add\n      h = bh3;\n      l = bl3;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      h = th;\n      l = tl;\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh3 = (c & 0xffff) | (d << 16);\n      bl3 = (a & 0xffff) | (b << 16);\n\n      ah1 = bh0;\n      ah2 = bh1;\n      ah3 = bh2;\n      ah4 = bh3;\n      ah5 = bh4;\n      ah6 = bh5;\n      ah7 = bh6;\n      ah0 = bh7;\n\n      al1 = bl0;\n      al2 = bl1;\n      al3 = bl2;\n      al4 = bl3;\n      al5 = bl4;\n      al6 = bl5;\n      al7 = bl6;\n      al0 = bl7;\n\n      if (i%16 === 15) {\n        for (j = 0; j < 16; j++) {\n          // add\n          h = wh[j];\n          l = wl[j];\n\n          a = l & 0xffff; b = l >>> 16;\n          c = h & 0xffff; d = h >>> 16;\n\n          h = wh[(j+9)%16];\n          l = wl[(j+9)%16];\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma0\n          th = wh[(j+1)%16];\n          tl = wl[(j+1)%16];\n          h = ((th >>> 1) | (tl << (32-1))) ^ ((th >>> 8) | (tl << (32-8))) ^ (th >>> 7);\n          l = ((tl >>> 1) | (th << (32-1))) ^ ((tl >>> 8) | (th << (32-8))) ^ ((tl >>> 7) | (th << (32-7)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma1\n          th = wh[(j+14)%16];\n          tl = wl[(j+14)%16];\n          h = ((th >>> 19) | (tl << (32-19))) ^ ((tl >>> (61-32)) | (th << (32-(61-32)))) ^ (th >>> 6);\n          l = ((tl >>> 19) | (th << (32-19))) ^ ((th >>> (61-32)) | (tl << (32-(61-32)))) ^ ((tl >>> 6) | (th << (32-6)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          b += a >>> 16;\n          c += b >>> 16;\n          d += c >>> 16;\n\n          wh[j] = (c & 0xffff) | (d << 16);\n          wl[j] = (a & 0xffff) | (b << 16);\n        }\n      }\n    }\n\n    // add\n    h = ah0;\n    l = al0;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[0];\n    l = hl[0];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[0] = ah0 = (c & 0xffff) | (d << 16);\n    hl[0] = al0 = (a & 0xffff) | (b << 16);\n\n    h = ah1;\n    l = al1;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[1];\n    l = hl[1];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[1] = ah1 = (c & 0xffff) | (d << 16);\n    hl[1] = al1 = (a & 0xffff) | (b << 16);\n\n    h = ah2;\n    l = al2;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[2];\n    l = hl[2];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[2] = ah2 = (c & 0xffff) | (d << 16);\n    hl[2] = al2 = (a & 0xffff) | (b << 16);\n\n    h = ah3;\n    l = al3;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[3];\n    l = hl[3];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[3] = ah3 = (c & 0xffff) | (d << 16);\n    hl[3] = al3 = (a & 0xffff) | (b << 16);\n\n    h = ah4;\n    l = al4;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[4];\n    l = hl[4];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[4] = ah4 = (c & 0xffff) | (d << 16);\n    hl[4] = al4 = (a & 0xffff) | (b << 16);\n\n    h = ah5;\n    l = al5;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[5];\n    l = hl[5];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[5] = ah5 = (c & 0xffff) | (d << 16);\n    hl[5] = al5 = (a & 0xffff) | (b << 16);\n\n    h = ah6;\n    l = al6;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[6];\n    l = hl[6];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[6] = ah6 = (c & 0xffff) | (d << 16);\n    hl[6] = al6 = (a & 0xffff) | (b << 16);\n\n    h = ah7;\n    l = al7;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[7];\n    l = hl[7];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[7] = ah7 = (c & 0xffff) | (d << 16);\n    hl[7] = al7 = (a & 0xffff) | (b << 16);\n\n    pos += 128;\n    n -= 128;\n  }\n\n  return n;\n}\n\nfunction crypto_hash(out, m, n) {\n  var hh = new Int32Array(8),\n      hl = new Int32Array(8),\n      x = new Uint8Array(256),\n      i, b = n;\n\n  hh[0] = 0x6a09e667;\n  hh[1] = 0xbb67ae85;\n  hh[2] = 0x3c6ef372;\n  hh[3] = 0xa54ff53a;\n  hh[4] = 0x510e527f;\n  hh[5] = 0x9b05688c;\n  hh[6] = 0x1f83d9ab;\n  hh[7] = 0x5be0cd19;\n\n  hl[0] = 0xf3bcc908;\n  hl[1] = 0x84caa73b;\n  hl[2] = 0xfe94f82b;\n  hl[3] = 0x5f1d36f1;\n  hl[4] = 0xade682d1;\n  hl[5] = 0x2b3e6c1f;\n  hl[6] = 0xfb41bd6b;\n  hl[7] = 0x137e2179;\n\n  crypto_hashblocks_hl(hh, hl, m, n);\n  n %= 128;\n\n  for (i = 0; i < n; i++) x[i] = m[b-n+i];\n  x[n] = 128;\n\n  n = 256-128*(n<112?1:0);\n  x[n-9] = 0;\n  ts64(x, n-8,  (b / 0x20000000) | 0, b << 3);\n  crypto_hashblocks_hl(hh, hl, x, n);\n\n  for (i = 0; i < 8; i++) ts64(out, 8*i, hh[i], hl[i]);\n\n  return 0;\n}\n\nfunction add(p, q) {\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf(),\n      g = gf(), h = gf(), t = gf();\n\n  Z(a, p[1], p[0]);\n  Z(t, q[1], q[0]);\n  M(a, a, t);\n  A(b, p[0], p[1]);\n  A(t, q[0], q[1]);\n  M(b, b, t);\n  M(c, p[3], q[3]);\n  M(c, c, D2);\n  M(d, p[2], q[2]);\n  A(d, d, d);\n  Z(e, b, a);\n  Z(f, d, c);\n  A(g, d, c);\n  A(h, b, a);\n\n  M(p[0], e, f);\n  M(p[1], h, g);\n  M(p[2], g, f);\n  M(p[3], e, h);\n}\n\nfunction cswap(p, q, b) {\n  var i;\n  for (i = 0; i < 4; i++) {\n    sel25519(p[i], q[i], b);\n  }\n}\n\nfunction pack(r, p) {\n  var tx = gf(), ty = gf(), zi = gf();\n  inv25519(zi, p[2]);\n  M(tx, p[0], zi);\n  M(ty, p[1], zi);\n  pack25519(r, ty);\n  r[31] ^= par25519(tx) << 7;\n}\n\nfunction scalarmult(p, q, s) {\n  var b, i;\n  set25519(p[0], gf0);\n  set25519(p[1], gf1);\n  set25519(p[2], gf1);\n  set25519(p[3], gf0);\n  for (i = 255; i >= 0; --i) {\n    b = (s[(i/8)|0] >> (i&7)) & 1;\n    cswap(p, q, b);\n    add(q, p);\n    add(p, p);\n    cswap(p, q, b);\n  }\n}\n\nfunction scalarbase(p, s) {\n  var q = [gf(), gf(), gf(), gf()];\n  set25519(q[0], X);\n  set25519(q[1], Y);\n  set25519(q[2], gf1);\n  M(q[3], X, Y);\n  scalarmult(p, q, s);\n}\n\nfunction crypto_sign_keypair(pk, sk, seeded) {\n  var d = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n  var i;\n\n  if (!seeded) randombytes(sk, 32);\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  scalarbase(p, d);\n  pack(pk, p);\n\n  for (i = 0; i < 32; i++) sk[i+32] = pk[i];\n  return 0;\n}\n\nvar L = new Float64Array([0xed, 0xd3, 0xf5, 0x5c, 0x1a, 0x63, 0x12, 0x58, 0xd6, 0x9c, 0xf7, 0xa2, 0xde, 0xf9, 0xde, 0x14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x10]);\n\nfunction modL(r, x) {\n  var carry, i, j, k;\n  for (i = 63; i >= 32; --i) {\n    carry = 0;\n    for (j = i - 32, k = i - 12; j < k; ++j) {\n      x[j] += carry - 16 * x[i] * L[j - (i - 32)];\n      carry = (x[j] + 128) >> 8;\n      x[j] -= carry * 256;\n    }\n    x[j] += carry;\n    x[i] = 0;\n  }\n  carry = 0;\n  for (j = 0; j < 32; j++) {\n    x[j] += carry - (x[31] >> 4) * L[j];\n    carry = x[j] >> 8;\n    x[j] &= 255;\n  }\n  for (j = 0; j < 32; j++) x[j] -= carry * L[j];\n  for (i = 0; i < 32; i++) {\n    x[i+1] += x[i] >> 8;\n    r[i] = x[i] & 255;\n  }\n}\n\nfunction reduce(r) {\n  var x = new Float64Array(64), i;\n  for (i = 0; i < 64; i++) x[i] = r[i];\n  for (i = 0; i < 64; i++) r[i] = 0;\n  modL(r, x);\n}\n\n// Note: difference from C - smlen returned, not passed as argument.\nfunction crypto_sign(sm, m, n, sk) {\n  var d = new Uint8Array(64), h = new Uint8Array(64), r = new Uint8Array(64);\n  var i, j, x = new Float64Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  var smlen = n + 64;\n  for (i = 0; i < n; i++) sm[64 + i] = m[i];\n  for (i = 0; i < 32; i++) sm[32 + i] = d[32 + i];\n\n  crypto_hash(r, sm.subarray(32), n+32);\n  reduce(r);\n  scalarbase(p, r);\n  pack(sm, p);\n\n  for (i = 32; i < 64; i++) sm[i] = sk[i];\n  crypto_hash(h, sm, n + 64);\n  reduce(h);\n\n  for (i = 0; i < 64; i++) x[i] = 0;\n  for (i = 0; i < 32; i++) x[i] = r[i];\n  for (i = 0; i < 32; i++) {\n    for (j = 0; j < 32; j++) {\n      x[i+j] += h[i] * d[j];\n    }\n  }\n\n  modL(sm.subarray(32), x);\n  return smlen;\n}\n\nfunction unpackneg(r, p) {\n  var t = gf(), chk = gf(), num = gf(),\n      den = gf(), den2 = gf(), den4 = gf(),\n      den6 = gf();\n\n  set25519(r[2], gf1);\n  unpack25519(r[1], p);\n  S(num, r[1]);\n  M(den, num, D);\n  Z(num, num, r[2]);\n  A(den, r[2], den);\n\n  S(den2, den);\n  S(den4, den2);\n  M(den6, den4, den2);\n  M(t, den6, num);\n  M(t, t, den);\n\n  pow2523(t, t);\n  M(t, t, num);\n  M(t, t, den);\n  M(t, t, den);\n  M(r[0], t, den);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) M(r[0], r[0], I);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) return -1;\n\n  if (par25519(r[0]) === (p[31]>>7)) Z(r[0], gf0, r[0]);\n\n  M(r[3], r[0], r[1]);\n  return 0;\n}\n\nfunction crypto_sign_open(m, sm, n, pk) {\n  var i, mlen;\n  var t = new Uint8Array(32), h = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()],\n      q = [gf(), gf(), gf(), gf()];\n\n  mlen = -1;\n  if (n < 64) return -1;\n\n  if (unpackneg(q, pk)) return -1;\n\n  for (i = 0; i < n; i++) m[i] = sm[i];\n  for (i = 0; i < 32; i++) m[i+32] = pk[i];\n  crypto_hash(h, m, n);\n  reduce(h);\n  scalarmult(p, q, h);\n\n  scalarbase(q, sm.subarray(32));\n  add(p, q);\n  pack(t, p);\n\n  n -= 64;\n  if (crypto_verify_32(sm, 0, t, 0)) {\n    for (i = 0; i < n; i++) m[i] = 0;\n    return -1;\n  }\n\n  for (i = 0; i < n; i++) m[i] = sm[i + 64];\n  mlen = n;\n  return mlen;\n}\n\nvar crypto_secretbox_KEYBYTES = 32,\n    crypto_secretbox_NONCEBYTES = 24,\n    crypto_secretbox_ZEROBYTES = 32,\n    crypto_secretbox_BOXZEROBYTES = 16,\n    crypto_scalarmult_BYTES = 32,\n    crypto_scalarmult_SCALARBYTES = 32,\n    crypto_box_PUBLICKEYBYTES = 32,\n    crypto_box_SECRETKEYBYTES = 32,\n    crypto_box_BEFORENMBYTES = 32,\n    crypto_box_NONCEBYTES = crypto_secretbox_NONCEBYTES,\n    crypto_box_ZEROBYTES = crypto_secretbox_ZEROBYTES,\n    crypto_box_BOXZEROBYTES = crypto_secretbox_BOXZEROBYTES,\n    crypto_sign_BYTES = 64,\n    crypto_sign_PUBLICKEYBYTES = 32,\n    crypto_sign_SECRETKEYBYTES = 64,\n    crypto_sign_SEEDBYTES = 32,\n    crypto_hash_BYTES = 64;\n\nnacl.lowlevel = {\n  crypto_core_hsalsa20: crypto_core_hsalsa20,\n  crypto_stream_xor: crypto_stream_xor,\n  crypto_stream: crypto_stream,\n  crypto_stream_salsa20_xor: crypto_stream_salsa20_xor,\n  crypto_stream_salsa20: crypto_stream_salsa20,\n  crypto_onetimeauth: crypto_onetimeauth,\n  crypto_onetimeauth_verify: crypto_onetimeauth_verify,\n  crypto_verify_16: crypto_verify_16,\n  crypto_verify_32: crypto_verify_32,\n  crypto_secretbox: crypto_secretbox,\n  crypto_secretbox_open: crypto_secretbox_open,\n  crypto_scalarmult: crypto_scalarmult,\n  crypto_scalarmult_base: crypto_scalarmult_base,\n  crypto_box_beforenm: crypto_box_beforenm,\n  crypto_box_afternm: crypto_box_afternm,\n  crypto_box: crypto_box,\n  crypto_box_open: crypto_box_open,\n  crypto_box_keypair: crypto_box_keypair,\n  crypto_hash: crypto_hash,\n  crypto_sign: crypto_sign,\n  crypto_sign_keypair: crypto_sign_keypair,\n  crypto_sign_open: crypto_sign_open,\n\n  crypto_secretbox_KEYBYTES: crypto_secretbox_KEYBYTES,\n  crypto_secretbox_NONCEBYTES: crypto_secretbox_NONCEBYTES,\n  crypto_secretbox_ZEROBYTES: crypto_secretbox_ZEROBYTES,\n  crypto_secretbox_BOXZEROBYTES: crypto_secretbox_BOXZEROBYTES,\n  crypto_scalarmult_BYTES: crypto_scalarmult_BYTES,\n  crypto_scalarmult_SCALARBYTES: crypto_scalarmult_SCALARBYTES,\n  crypto_box_PUBLICKEYBYTES: crypto_box_PUBLICKEYBYTES,\n  crypto_box_SECRETKEYBYTES: crypto_box_SECRETKEYBYTES,\n  crypto_box_BEFORENMBYTES: crypto_box_BEFORENMBYTES,\n  crypto_box_NONCEBYTES: crypto_box_NONCEBYTES,\n  crypto_box_ZEROBYTES: crypto_box_ZEROBYTES,\n  crypto_box_BOXZEROBYTES: crypto_box_BOXZEROBYTES,\n  crypto_sign_BYTES: crypto_sign_BYTES,\n  crypto_sign_PUBLICKEYBYTES: crypto_sign_PUBLICKEYBYTES,\n  crypto_sign_SECRETKEYBYTES: crypto_sign_SECRETKEYBYTES,\n  crypto_sign_SEEDBYTES: crypto_sign_SEEDBYTES,\n  crypto_hash_BYTES: crypto_hash_BYTES\n};\n\n/* High-level API */\n\nfunction checkLengths(k, n) {\n  if (k.length !== crypto_secretbox_KEYBYTES) throw new Error('bad key size');\n  if (n.length !== crypto_secretbox_NONCEBYTES) throw new Error('bad nonce size');\n}\n\nfunction checkBoxLengths(pk, sk) {\n  if (pk.length !== crypto_box_PUBLICKEYBYTES) throw new Error('bad public key size');\n  if (sk.length !== crypto_box_SECRETKEYBYTES) throw new Error('bad secret key size');\n}\n\nfunction checkArrayTypes() {\n  var t, i;\n  for (i = 0; i < arguments.length; i++) {\n     if ((t = Object.prototype.toString.call(arguments[i])) !== '[object Uint8Array]')\n       throw new TypeError('unexpected type ' + t + ', use Uint8Array');\n  }\n}\n\nfunction cleanup(arr) {\n  for (var i = 0; i < arr.length; i++) arr[i] = 0;\n}\n\n// TODO: Completely remove this in v0.15.\nif (!nacl.util) {\n  nacl.util = {};\n  nacl.util.decodeUTF8 = nacl.util.encodeUTF8 = nacl.util.encodeBase64 = nacl.util.decodeBase64 = function() {\n    throw new Error('nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js');\n  };\n}\n\nnacl.randomBytes = function(n) {\n  var b = new Uint8Array(n);\n  randombytes(b, n);\n  return b;\n};\n\nnacl.secretbox = function(msg, nonce, key) {\n  checkArrayTypes(msg, nonce, key);\n  checkLengths(key, nonce);\n  var m = new Uint8Array(crypto_secretbox_ZEROBYTES + msg.length);\n  var c = new Uint8Array(m.length);\n  for (var i = 0; i < msg.length; i++) m[i+crypto_secretbox_ZEROBYTES] = msg[i];\n  crypto_secretbox(c, m, m.length, nonce, key);\n  return c.subarray(crypto_secretbox_BOXZEROBYTES);\n};\n\nnacl.secretbox.open = function(box, nonce, key) {\n  checkArrayTypes(box, nonce, key);\n  checkLengths(key, nonce);\n  var c = new Uint8Array(crypto_secretbox_BOXZEROBYTES + box.length);\n  var m = new Uint8Array(c.length);\n  for (var i = 0; i < box.length; i++) c[i+crypto_secretbox_BOXZEROBYTES] = box[i];\n  if (c.length < 32) return false;\n  if (crypto_secretbox_open(m, c, c.length, nonce, key) !== 0) return false;\n  return m.subarray(crypto_secretbox_ZEROBYTES);\n};\n\nnacl.secretbox.keyLength = crypto_secretbox_KEYBYTES;\nnacl.secretbox.nonceLength = crypto_secretbox_NONCEBYTES;\nnacl.secretbox.overheadLength = crypto_secretbox_BOXZEROBYTES;\n\nnacl.scalarMult = function(n, p) {\n  checkArrayTypes(n, p);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  if (p.length !== crypto_scalarmult_BYTES) throw new Error('bad p size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult(q, n, p);\n  return q;\n};\n\nnacl.scalarMult.base = function(n) {\n  checkArrayTypes(n);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult_base(q, n);\n  return q;\n};\n\nnacl.scalarMult.scalarLength = crypto_scalarmult_SCALARBYTES;\nnacl.scalarMult.groupElementLength = crypto_scalarmult_BYTES;\n\nnacl.box = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox(msg, nonce, k);\n};\n\nnacl.box.before = function(publicKey, secretKey) {\n  checkArrayTypes(publicKey, secretKey);\n  checkBoxLengths(publicKey, secretKey);\n  var k = new Uint8Array(crypto_box_BEFORENMBYTES);\n  crypto_box_beforenm(k, publicKey, secretKey);\n  return k;\n};\n\nnacl.box.after = nacl.secretbox;\n\nnacl.box.open = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox.open(msg, nonce, k);\n};\n\nnacl.box.open.after = nacl.secretbox.open;\n\nnacl.box.keyPair = function() {\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_box_SECRETKEYBYTES);\n  crypto_box_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.box.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_box_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  crypto_scalarmult_base(pk, secretKey);\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.box.publicKeyLength = crypto_box_PUBLICKEYBYTES;\nnacl.box.secretKeyLength = crypto_box_SECRETKEYBYTES;\nnacl.box.sharedKeyLength = crypto_box_BEFORENMBYTES;\nnacl.box.nonceLength = crypto_box_NONCEBYTES;\nnacl.box.overheadLength = nacl.secretbox.overheadLength;\n\nnacl.sign = function(msg, secretKey) {\n  checkArrayTypes(msg, secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var signedMsg = new Uint8Array(crypto_sign_BYTES+msg.length);\n  crypto_sign(signedMsg, msg, msg.length, secretKey);\n  return signedMsg;\n};\n\nnacl.sign.open = function(signedMsg, publicKey) {\n  if (arguments.length !== 2)\n    throw new Error('nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?');\n  checkArrayTypes(signedMsg, publicKey);\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var tmp = new Uint8Array(signedMsg.length);\n  var mlen = crypto_sign_open(tmp, signedMsg, signedMsg.length, publicKey);\n  if (mlen < 0) return null;\n  var m = new Uint8Array(mlen);\n  for (var i = 0; i < m.length; i++) m[i] = tmp[i];\n  return m;\n};\n\nnacl.sign.detached = function(msg, secretKey) {\n  var signedMsg = nacl.sign(msg, secretKey);\n  var sig = new Uint8Array(crypto_sign_BYTES);\n  for (var i = 0; i < sig.length; i++) sig[i] = signedMsg[i];\n  return sig;\n};\n\nnacl.sign.detached.verify = function(msg, sig, publicKey) {\n  checkArrayTypes(msg, sig, publicKey);\n  if (sig.length !== crypto_sign_BYTES)\n    throw new Error('bad signature size');\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var sm = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var m = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var i;\n  for (i = 0; i < crypto_sign_BYTES; i++) sm[i] = sig[i];\n  for (i = 0; i < msg.length; i++) sm[i+crypto_sign_BYTES] = msg[i];\n  return (crypto_sign_open(m, sm, sm.length, publicKey) >= 0);\n};\n\nnacl.sign.keyPair = function() {\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  crypto_sign_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  for (var i = 0; i < pk.length; i++) pk[i] = secretKey[32+i];\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.sign.keyPair.fromSeed = function(seed) {\n  checkArrayTypes(seed);\n  if (seed.length !== crypto_sign_SEEDBYTES)\n    throw new Error('bad seed size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  for (var i = 0; i < 32; i++) sk[i] = seed[i];\n  crypto_sign_keypair(pk, sk, true);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.publicKeyLength = crypto_sign_PUBLICKEYBYTES;\nnacl.sign.secretKeyLength = crypto_sign_SECRETKEYBYTES;\nnacl.sign.seedLength = crypto_sign_SEEDBYTES;\nnacl.sign.signatureLength = crypto_sign_BYTES;\n\nnacl.hash = function(msg) {\n  checkArrayTypes(msg);\n  var h = new Uint8Array(crypto_hash_BYTES);\n  crypto_hash(h, msg, msg.length);\n  return h;\n};\n\nnacl.hash.hashLength = crypto_hash_BYTES;\n\nnacl.verify = function(x, y) {\n  checkArrayTypes(x, y);\n  // Zero length arguments are considered not equal.\n  if (x.length === 0 || y.length === 0) return false;\n  if (x.length !== y.length) return false;\n  return (vn(x, 0, y, 0, x.length) === 0) ? true : false;\n};\n\nnacl.setPRNG = function(fn) {\n  randombytes = fn;\n};\n\n(function() {\n  // Initialize PRNG if environment provides CSPRNG.\n  // If not, methods calling randombytes will throw.\n  var crypto = typeof self !== 'undefined' ? (self.crypto || self.msCrypto) : null;\n  if (crypto && crypto.getRandomValues) {\n    // Browsers.\n    var QUOTA = 65536;\n    nacl.setPRNG(function(x, n) {\n      var i, v = new Uint8Array(n);\n      for (i = 0; i < n; i += QUOTA) {\n        crypto.getRandomValues(v.subarray(i, i + Math.min(n - i, QUOTA)));\n      }\n      for (i = 0; i < n; i++) x[i] = v[i];\n      cleanup(v);\n    });\n  } else if (typeof require !== 'undefined') {\n    // Node.js.\n    crypto = require('crypto');\n    if (crypto && crypto.randomBytes) {\n      nacl.setPRNG(function(x, n) {\n        var i, v = crypto.randomBytes(n);\n        for (i = 0; i < n; i++) x[i] = v[i];\n        cleanup(v);\n      });\n    }\n  }\n})();\n\n})(typeof module !== 'undefined' && module.exports ? module.exports : (self.nacl = self.nacl || {}));\n", "// Copyright 2015 Joyent, Inc.\n\nmodule.exports = {\n\tbufferSplit: bufferSplit,\n\taddRSAMissing: addRSAMissing,\n\tcalculateDSAPublic: calculateDSAPublic,\n\tcalculateED25519Public: calculateED25519Public,\n\tcalculateX25519Public: calculateX25519Public,\n\tmpNormalize: mpNormalize,\n\tmpDenormalize: mpDenormalize,\n\tecNormalize: ecNormalize,\n\tcountZeros: countZeros,\n\tassertCompatible: assertCompatible,\n\tisCompatible: isCompatible,\n\topensslKeyDeriv: opensslKeyDeriv,\n\topensshCipherInfo: opensshCipherInfo,\n\tpublicFromPrivateECDSA: publicFromPrivateECDSA,\n\tzeroPadToLength: zeroPadToLength,\n\twriteBitString: writeBitString,\n\treadBitString: readBitString,\n\tpbkdf2: pbkdf2\n};\n\nvar assert = require('assert-plus');\nvar Buffer = require('safer-buffer').Buffer;\nvar PrivateKey = require('./private-key');\nvar Key = require('./key');\nvar crypto = require('crypto');\nvar algs = require('./algs');\nvar asn1 = require('asn1');\n\nvar ec = require('ecc-jsbn/lib/ec');\nvar jsbn = require('jsbn').BigInteger;\nvar nacl = require('tweetnacl');\n\nvar MAX_CLASS_DEPTH = 3;\n\nfunction isCompatible(obj, klass, needVer) {\n\tif (obj === null || typeof (obj) !== 'object')\n\t\treturn (false);\n\tif (needVer === undefined)\n\t\tneedVer = klass.prototype._sshpkApiVersion;\n\tif (obj instanceof klass &&\n\t    klass.prototype._sshpkApiVersion[0] == needVer[0])\n\t\treturn (true);\n\tvar proto = Object.getPrototypeOf(obj);\n\tvar depth = 0;\n\twhile (proto.constructor.name !== klass.name) {\n\t\tproto = Object.getPrototypeOf(proto);\n\t\tif (!proto || ++depth > MAX_CLASS_DEPTH)\n\t\t\treturn (false);\n\t}\n\tif (proto.constructor.name !== klass.name)\n\t\treturn (false);\n\tvar ver = proto._sshpkApiVersion;\n\tif (ver === undefined)\n\t\tver = klass._oldVersionDetect(obj);\n\tif (ver[0] != needVer[0] || ver[1] < needVer[1])\n\t\treturn (false);\n\treturn (true);\n}\n\nfunction assertCompatible(obj, klass, needVer, name) {\n\tif (name === undefined)\n\t\tname = 'object';\n\tassert.ok(obj, name + ' must not be null');\n\tassert.object(obj, name + ' must be an object');\n\tif (needVer === undefined)\n\t\tneedVer = klass.prototype._sshpkApiVersion;\n\tif (obj instanceof klass &&\n\t    klass.prototype._sshpkApiVersion[0] == needVer[0])\n\t\treturn;\n\tvar proto = Object.getPrototypeOf(obj);\n\tvar depth = 0;\n\twhile (proto.constructor.name !== klass.name) {\n\t\tproto = Object.getPrototypeOf(proto);\n\t\tassert.ok(proto && ++depth <= MAX_CLASS_DEPTH,\n\t\t    name + ' must be a ' + klass.name + ' instance');\n\t}\n\tassert.strictEqual(proto.constructor.name, klass.name,\n\t    name + ' must be a ' + klass.name + ' instance');\n\tvar ver = proto._sshpkApiVersion;\n\tif (ver === undefined)\n\t\tver = klass._oldVersionDetect(obj);\n\tassert.ok(ver[0] == needVer[0] && ver[1] >= needVer[1],\n\t    name + ' must be compatible with ' + klass.name + ' klass ' +\n\t    'version ' + needVer[0] + '.' + needVer[1]);\n}\n\nvar CIPHER_LEN = {\n\t'des-ede3-cbc': { key: 24, iv: 8 },\n\t'aes-128-cbc': { key: 16, iv: 16 },\n\t'aes-256-cbc': { key: 32, iv: 16 }\n};\nvar PKCS5_SALT_LEN = 8;\n\nfunction opensslKeyDeriv(cipher, salt, passphrase, count) {\n\tassert.buffer(salt, 'salt');\n\tassert.buffer(passphrase, 'passphrase');\n\tassert.number(count, 'iteration count');\n\n\tvar clen = CIPHER_LEN[cipher];\n\tassert.object(clen, 'supported cipher');\n\n\tsalt = salt.slice(0, PKCS5_SALT_LEN);\n\n\tvar D, D_prev, bufs;\n\tvar material = Buffer.alloc(0);\n\twhile (material.length < clen.key + clen.iv) {\n\t\tbufs = [];\n\t\tif (D_prev)\n\t\t\tbufs.push(D_prev);\n\t\tbufs.push(passphrase);\n\t\tbufs.push(salt);\n\t\tD = Buffer.concat(bufs);\n\t\tfor (var j = 0; j < count; ++j)\n\t\t\tD = crypto.createHash('md5').update(D).digest();\n\t\tmaterial = Buffer.concat([material, D]);\n\t\tD_prev = D;\n\t}\n\n\treturn ({\n\t    key: material.slice(0, clen.key),\n\t    iv: material.slice(clen.key, clen.key + clen.iv)\n\t});\n}\n\n/* See: RFC2898 */\nfunction pbkdf2(hashAlg, salt, iterations, size, passphrase) {\n\tvar hkey = Buffer.alloc(salt.length + 4);\n\tsalt.copy(hkey);\n\n\tvar gen = 0, ts = [];\n\tvar i = 1;\n\twhile (gen < size) {\n\t\tvar t = T(i++);\n\t\tgen += t.length;\n\t\tts.push(t);\n\t}\n\treturn (Buffer.concat(ts).slice(0, size));\n\n\tfunction T(I) {\n\t\thkey.writeUInt32BE(I, hkey.length - 4);\n\n\t\tvar hmac = crypto.createHmac(hashAlg, passphrase);\n\t\thmac.update(hkey);\n\n\t\tvar Ti = hmac.digest();\n\t\tvar Uc = Ti;\n\t\tvar c = 1;\n\t\twhile (c++ < iterations) {\n\t\t\thmac = crypto.createHmac(hashAlg, passphrase);\n\t\t\thmac.update(Uc);\n\t\t\tUc = hmac.digest();\n\t\t\tfor (var x = 0; x < Ti.length; ++x)\n\t\t\t\tTi[x] ^= Uc[x];\n\t\t}\n\t\treturn (Ti);\n\t}\n}\n\n/* Count leading zero bits on a buffer */\nfunction countZeros(buf) {\n\tvar o = 0, obit = 8;\n\twhile (o < buf.length) {\n\t\tvar mask = (1 << obit);\n\t\tif ((buf[o] & mask) === mask)\n\t\t\tbreak;\n\t\tobit--;\n\t\tif (obit < 0) {\n\t\t\to++;\n\t\t\tobit = 8;\n\t\t}\n\t}\n\treturn (o*8 + (8 - obit) - 1);\n}\n\nfunction bufferSplit(buf, chr) {\n\tassert.buffer(buf);\n\tassert.string(chr);\n\n\tvar parts = [];\n\tvar lastPart = 0;\n\tvar matches = 0;\n\tfor (var i = 0; i < buf.length; ++i) {\n\t\tif (buf[i] === chr.charCodeAt(matches))\n\t\t\t++matches;\n\t\telse if (buf[i] === chr.charCodeAt(0))\n\t\t\tmatches = 1;\n\t\telse\n\t\t\tmatches = 0;\n\n\t\tif (matches >= chr.length) {\n\t\t\tvar newPart = i + 1;\n\t\t\tparts.push(buf.slice(lastPart, newPart - matches));\n\t\t\tlastPart = newPart;\n\t\t\tmatches = 0;\n\t\t}\n\t}\n\tif (lastPart <= buf.length)\n\t\tparts.push(buf.slice(lastPart, buf.length));\n\n\treturn (parts);\n}\n\nfunction ecNormalize(buf, addZero) {\n\tassert.buffer(buf);\n\tif (buf[0] === 0x00 && buf[1] === 0x04) {\n\t\tif (addZero)\n\t\t\treturn (buf);\n\t\treturn (buf.slice(1));\n\t} else if (buf[0] === 0x04) {\n\t\tif (!addZero)\n\t\t\treturn (buf);\n\t} else {\n\t\twhile (buf[0] === 0x00)\n\t\t\tbuf = buf.slice(1);\n\t\tif (buf[0] === 0x02 || buf[0] === 0x03)\n\t\t\tthrow (new Error('Compressed elliptic curve points ' +\n\t\t\t    'are not supported'));\n\t\tif (buf[0] !== 0x04)\n\t\t\tthrow (new Error('Not a valid elliptic curve point'));\n\t\tif (!addZero)\n\t\t\treturn (buf);\n\t}\n\tvar b = Buffer.alloc(buf.length + 1);\n\tb[0] = 0x0;\n\tbuf.copy(b, 1);\n\treturn (b);\n}\n\nfunction readBitString(der, tag) {\n\tif (tag === undefined)\n\t\ttag = asn1.Ber.BitString;\n\tvar buf = der.readString(tag, true);\n\tassert.strictEqual(buf[0], 0x00, 'bit strings with unused bits are ' +\n\t    'not supported (0x' + buf[0].toString(16) + ')');\n\treturn (buf.slice(1));\n}\n\nfunction writeBitString(der, buf, tag) {\n\tif (tag === undefined)\n\t\ttag = asn1.Ber.BitString;\n\tvar b = Buffer.alloc(buf.length + 1);\n\tb[0] = 0x00;\n\tbuf.copy(b, 1);\n\tder.writeBuffer(b, tag);\n}\n\nfunction mpNormalize(buf) {\n\tassert.buffer(buf);\n\twhile (buf.length > 1 && buf[0] === 0x00 && (buf[1] & 0x80) === 0x00)\n\t\tbuf = buf.slice(1);\n\tif ((buf[0] & 0x80) === 0x80) {\n\t\tvar b = Buffer.alloc(buf.length + 1);\n\t\tb[0] = 0x00;\n\t\tbuf.copy(b, 1);\n\t\tbuf = b;\n\t}\n\treturn (buf);\n}\n\nfunction mpDenormalize(buf) {\n\tassert.buffer(buf);\n\twhile (buf.length > 1 && buf[0] === 0x00)\n\t\tbuf = buf.slice(1);\n\treturn (buf);\n}\n\nfunction zeroPadToLength(buf, len) {\n\tassert.buffer(buf);\n\tassert.number(len);\n\twhile (buf.length > len) {\n\t\tassert.equal(buf[0], 0x00);\n\t\tbuf = buf.slice(1);\n\t}\n\twhile (buf.length < len) {\n\t\tvar b = Buffer.alloc(buf.length + 1);\n\t\tb[0] = 0x00;\n\t\tbuf.copy(b, 1);\n\t\tbuf = b;\n\t}\n\treturn (buf);\n}\n\nfunction bigintToMpBuf(bigint) {\n\tvar buf = Buffer.from(bigint.toByteArray());\n\tbuf = mpNormalize(buf);\n\treturn (buf);\n}\n\nfunction calculateDSAPublic(g, p, x) {\n\tassert.buffer(g);\n\tassert.buffer(p);\n\tassert.buffer(x);\n\tg = new jsbn(g);\n\tp = new jsbn(p);\n\tx = new jsbn(x);\n\tvar y = g.modPow(x, p);\n\tvar ybuf = bigintToMpBuf(y);\n\treturn (ybuf);\n}\n\nfunction calculateED25519Public(k) {\n\tassert.buffer(k);\n\n\tvar kp = nacl.sign.keyPair.fromSeed(new Uint8Array(k));\n\treturn (Buffer.from(kp.publicKey));\n}\n\nfunction calculateX25519Public(k) {\n\tassert.buffer(k);\n\n\tvar kp = nacl.box.keyPair.fromSeed(new Uint8Array(k));\n\treturn (Buffer.from(kp.publicKey));\n}\n\nfunction addRSAMissing(key) {\n\tassert.object(key);\n\tassertCompatible(key, PrivateKey, [1, 1]);\n\n\tvar d = new jsbn(key.part.d.data);\n\tvar buf;\n\n\tif (!key.part.dmodp) {\n\t\tvar p = new jsbn(key.part.p.data);\n\t\tvar dmodp = d.mod(p.subtract(1));\n\n\t\tbuf = bigintToMpBuf(dmodp);\n\t\tkey.part.dmodp = {name: 'dmodp', data: buf};\n\t\tkey.parts.push(key.part.dmodp);\n\t}\n\tif (!key.part.dmodq) {\n\t\tvar q = new jsbn(key.part.q.data);\n\t\tvar dmodq = d.mod(q.subtract(1));\n\n\t\tbuf = bigintToMpBuf(dmodq);\n\t\tkey.part.dmodq = {name: 'dmodq', data: buf};\n\t\tkey.parts.push(key.part.dmodq);\n\t}\n}\n\nfunction publicFromPrivateECDSA(curveName, priv) {\n\tassert.string(curveName, 'curveName');\n\tassert.buffer(priv);\n\tvar params = algs.curves[curveName];\n\tvar p = new jsbn(params.p);\n\tvar a = new jsbn(params.a);\n\tvar b = new jsbn(params.b);\n\tvar curve = new ec.ECCurveFp(p, a, b);\n\tvar G = curve.decodePointHex(params.G.toString('hex'));\n\n\tvar d = new jsbn(mpNormalize(priv));\n\tvar pub = G.multiply(d);\n\tpub = Buffer.from(curve.encodePointHex(pub), 'hex');\n\n\tvar parts = [];\n\tparts.push({name: 'curve', data: Buffer.from(curveName)});\n\tparts.push({name: 'Q', data: pub});\n\n\tvar key = new Key({type: 'ecdsa', curve: curve, parts: parts});\n\treturn (key);\n}\n\nfunction opensshCipherInfo(cipher) {\n\tvar inf = {};\n\tswitch (cipher) {\n\tcase '3des-cbc':\n\t\tinf.keySize = 24;\n\t\tinf.blockSize = 8;\n\t\tinf.opensslName = 'des-ede3-cbc';\n\t\tbreak;\n\tcase 'blowfish-cbc':\n\t\tinf.keySize = 16;\n\t\tinf.blockSize = 8;\n\t\tinf.opensslName = 'bf-cbc';\n\t\tbreak;\n\tcase 'aes128-cbc':\n\tcase 'aes128-ctr':\n\tcase 'aes128-gcm@openssh.com':\n\t\tinf.keySize = 16;\n\t\tinf.blockSize = 16;\n\t\tinf.opensslName = 'aes-128-' + cipher.slice(7, 10);\n\t\tbreak;\n\tcase 'aes192-cbc':\n\tcase 'aes192-ctr':\n\tcase 'aes192-gcm@openssh.com':\n\t\tinf.keySize = 24;\n\t\tinf.blockSize = 16;\n\t\tinf.opensslName = 'aes-192-' + cipher.slice(7, 10);\n\t\tbreak;\n\tcase 'aes256-cbc':\n\tcase 'aes256-ctr':\n\tcase 'aes256-gcm@openssh.com':\n\t\tinf.keySize = 32;\n\t\tinf.blockSize = 16;\n\t\tinf.opensslName = 'aes-256-' + cipher.slice(7, 10);\n\t\tbreak;\n\tdefault:\n\t\tthrow (new Error(\n\t\t    'Unsupported openssl cipher \"' + cipher + '\"'));\n\t}\n\treturn (inf);\n}\n", "// Copyright 2015 Joyent, Inc.\n\nmodule.exports = SSHBuffer;\n\nvar assert = require('assert-plus');\nvar Buffer = require('safer-buffer').Buffer;\n\nfunction SSHBuffer(opts) {\n\tassert.object(opts, 'options');\n\tif (opts.buffer !== undefined)\n\t\tassert.buffer(opts.buffer, 'options.buffer');\n\n\tthis._size = opts.buffer ? opts.buffer.length : 1024;\n\tthis._buffer = opts.buffer || Buffer.alloc(this._size);\n\tthis._offset = 0;\n}\n\nSSHBuffer.prototype.toBuffer = function () {\n\treturn (this._buffer.slice(0, this._offset));\n};\n\nSSHBuffer.prototype.atEnd = function () {\n\treturn (this._offset >= this._buffer.length);\n};\n\nSSHBuffer.prototype.remainder = function () {\n\treturn (this._buffer.slice(this._offset));\n};\n\nSSHBuffer.prototype.skip = function (n) {\n\tthis._offset += n;\n};\n\nSSHBuffer.prototype.expand = function () {\n\tthis._size *= 2;\n\tvar buf = Buffer.alloc(this._size);\n\tthis._buffer.copy(buf, 0);\n\tthis._buffer = buf;\n};\n\nSSHBuffer.prototype.readPart = function () {\n\treturn ({data: this.readBuffer()});\n};\n\nSSHBuffer.prototype.readBuffer = function () {\n\tvar len = this._buffer.readUInt32BE(this._offset);\n\tthis._offset += 4;\n\tassert.ok(this._offset + len <= this._buffer.length,\n\t    'length out of bounds at +0x' + this._offset.toString(16) +\n\t    ' (data truncated?)');\n\tvar buf = this._buffer.slice(this._offset, this._offset + len);\n\tthis._offset += len;\n\treturn (buf);\n};\n\nSSHBuffer.prototype.readString = function () {\n\treturn (this.readBuffer().toString());\n};\n\nSSHBuffer.prototype.readCString = function () {\n\tvar offset = this._offset;\n\twhile (offset < this._buffer.length &&\n\t    this._buffer[offset] !== 0x00)\n\t\toffset++;\n\tassert.ok(offset < this._buffer.length, 'c string does not terminate');\n\tvar str = this._buffer.slice(this._offset, offset).toString();\n\tthis._offset = offset + 1;\n\treturn (str);\n};\n\nSSHBuffer.prototype.readInt = function () {\n\tvar v = this._buffer.readUInt32BE(this._offset);\n\tthis._offset += 4;\n\treturn (v);\n};\n\nSSHBuffer.prototype.readInt64 = function () {\n\tassert.ok(this._offset + 8 < this._buffer.length,\n\t    'buffer not long enough to read Int64');\n\tvar v = this._buffer.slice(this._offset, this._offset + 8);\n\tthis._offset += 8;\n\treturn (v);\n};\n\nSSHBuffer.prototype.readChar = function () {\n\tvar v = this._buffer[this._offset++];\n\treturn (v);\n};\n\nSSHBuffer.prototype.writeBuffer = function (buf) {\n\twhile (this._offset + 4 + buf.length > this._size)\n\t\tthis.expand();\n\tthis._buffer.writeUInt32BE(buf.length, this._offset);\n\tthis._offset += 4;\n\tbuf.copy(this._buffer, this._offset);\n\tthis._offset += buf.length;\n};\n\nSSHBuffer.prototype.writeString = function (str) {\n\tthis.writeBuffer(Buffer.from(str, 'utf8'));\n};\n\nSSHBuffer.prototype.writeCString = function (str) {\n\twhile (this._offset + 1 + str.length > this._size)\n\t\tthis.expand();\n\tthis._buffer.write(str, this._offset);\n\tthis._offset += str.length;\n\tthis._buffer[this._offset++] = 0;\n};\n\nSSHBuffer.prototype.writeInt = function (v) {\n\twhile (this._offset + 4 > this._size)\n\t\tthis.expand();\n\tthis._buffer.writeUInt32BE(v, this._offset);\n\tthis._offset += 4;\n};\n\nSSHBuffer.prototype.writeInt64 = function (v) {\n\tassert.buffer(v, 'value');\n\tif (v.length > 8) {\n\t\tvar lead = v.slice(0, v.length - 8);\n\t\tfor (var i = 0; i < lead.length; ++i) {\n\t\t\tassert.strictEqual(lead[i], 0,\n\t\t\t    'must fit in 64 bits of precision');\n\t\t}\n\t\tv = v.slice(v.length - 8, v.length);\n\t}\n\twhile (this._offset + 8 > this._size)\n\t\tthis.expand();\n\tv.copy(this._buffer, this._offset);\n\tthis._offset += 8;\n};\n\nSSHBuffer.prototype.writeChar = function (v) {\n\twhile (this._offset + 1 > this._size)\n\t\tthis.expand();\n\tthis._buffer[this._offset++] = v;\n};\n\nSSHBuffer.prototype.writePart = function (p) {\n\tthis.writeBuffer(p.data);\n};\n\nSSHBuffer.prototype.write = function (buf) {\n\twhile (this._offset + buf.length > this._size)\n\t\tthis.expand();\n\tbuf.copy(this._buffer, this._offset);\n\tthis._offset += buf.length;\n};\n", "// Copyright 2015 Joyent, Inc.\n\nmodule.exports = Signature;\n\nvar assert = require('assert-plus');\nvar Buffer = require('safer-buffer').Buffer;\nvar algs = require('./algs');\nvar crypto = require('crypto');\nvar errs = require('./errors');\nvar utils = require('./utils');\nvar asn1 = require('asn1');\nvar SSHBuffer = require('./ssh-buffer');\n\nvar InvalidAlgorithmError = errs.InvalidAlgorithmError;\nvar SignatureParseError = errs.SignatureParseError;\n\nfunction Signature(opts) {\n\tassert.object(opts, 'options');\n\tassert.arrayOfObject(opts.parts, 'options.parts');\n\tassert.string(opts.type, 'options.type');\n\n\tvar partLookup = {};\n\tfor (var i = 0; i < opts.parts.length; ++i) {\n\t\tvar part = opts.parts[i];\n\t\tpartLookup[part.name] = part;\n\t}\n\n\tthis.type = opts.type;\n\tthis.hashAlgorithm = opts.hashAlgo;\n\tthis.curve = opts.curve;\n\tthis.parts = opts.parts;\n\tthis.part = partLookup;\n}\n\nSignature.prototype.toBuffer = function (format) {\n\tif (format === undefined)\n\t\tformat = 'asn1';\n\tassert.string(format, 'format');\n\n\tvar buf;\n\tvar stype = 'ssh-' + this.type;\n\n\tswitch (this.type) {\n\tcase 'rsa':\n\t\tswitch (this.hashAlgorithm) {\n\t\tcase 'sha256':\n\t\t\tstype = 'rsa-sha2-256';\n\t\t\tbreak;\n\t\tcase 'sha512':\n\t\t\tstype = 'rsa-sha2-512';\n\t\t\tbreak;\n\t\tcase 'sha1':\n\t\tcase undefined:\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow (new Error('SSH signature ' +\n\t\t\t    'format does not support hash ' +\n\t\t\t    'algorithm ' + this.hashAlgorithm));\n\t\t}\n\t\tif (format === 'ssh') {\n\t\t\tbuf = new SSHBuffer({});\n\t\t\tbuf.writeString(stype);\n\t\t\tbuf.writePart(this.part.sig);\n\t\t\treturn (buf.toBuffer());\n\t\t} else {\n\t\t\treturn (this.part.sig.data);\n\t\t}\n\t\tbreak;\n\n\tcase 'ed25519':\n\t\tif (format === 'ssh') {\n\t\t\tbuf = new SSHBuffer({});\n\t\t\tbuf.writeString(stype);\n\t\t\tbuf.writePart(this.part.sig);\n\t\t\treturn (buf.toBuffer());\n\t\t} else {\n\t\t\treturn (this.part.sig.data);\n\t\t}\n\t\tbreak;\n\n\tcase 'dsa':\n\tcase 'ecdsa':\n\t\tvar r, s;\n\t\tif (format === 'asn1') {\n\t\t\tvar der = new asn1.BerWriter();\n\t\t\tder.startSequence();\n\t\t\tr = utils.mpNormalize(this.part.r.data);\n\t\t\ts = utils.mpNormalize(this.part.s.data);\n\t\t\tder.writeBuffer(r, asn1.Ber.Integer);\n\t\t\tder.writeBuffer(s, asn1.Ber.Integer);\n\t\t\tder.endSequence();\n\t\t\treturn (der.buffer);\n\t\t} else if (format === 'ssh' && this.type === 'dsa') {\n\t\t\tbuf = new SSHBuffer({});\n\t\t\tbuf.writeString('ssh-dss');\n\t\t\tr = this.part.r.data;\n\t\t\tif (r.length > 20 && r[0] === 0x00)\n\t\t\t\tr = r.slice(1);\n\t\t\ts = this.part.s.data;\n\t\t\tif (s.length > 20 && s[0] === 0x00)\n\t\t\t\ts = s.slice(1);\n\t\t\tif ((this.hashAlgorithm &&\n\t\t\t    this.hashAlgorithm !== 'sha1') ||\n\t\t\t    r.length + s.length !== 40) {\n\t\t\t\tthrow (new Error('OpenSSH only supports ' +\n\t\t\t\t    'DSA signatures with SHA1 hash'));\n\t\t\t}\n\t\t\tbuf.writeBuffer(Buffer.concat([r, s]));\n\t\t\treturn (buf.toBuffer());\n\t\t} else if (format === 'ssh' && this.type === 'ecdsa') {\n\t\t\tvar inner = new SSHBuffer({});\n\t\t\tr = this.part.r.data;\n\t\t\tinner.writeBuffer(r);\n\t\t\tinner.writePart(this.part.s);\n\n\t\t\tbuf = new SSHBuffer({});\n\t\t\t/* XXX: find a more proper way to do this? */\n\t\t\tvar curve;\n\t\t\tif (r[0] === 0x00)\n\t\t\t\tr = r.slice(1);\n\t\t\tvar sz = r.length * 8;\n\t\t\tif (sz === 256)\n\t\t\t\tcurve = 'nistp256';\n\t\t\telse if (sz === 384)\n\t\t\t\tcurve = 'nistp384';\n\t\t\telse if (sz === 528)\n\t\t\t\tcurve = 'nistp521';\n\t\t\tbuf.writeString('ecdsa-sha2-' + curve);\n\t\t\tbuf.writeBuffer(inner.toBuffer());\n\t\t\treturn (buf.toBuffer());\n\t\t}\n\t\tthrow (new Error('Invalid signature format'));\n\tdefault:\n\t\tthrow (new Error('Invalid signature data'));\n\t}\n};\n\nSignature.prototype.toString = function (format) {\n\tassert.optionalString(format, 'format');\n\treturn (this.toBuffer(format).toString('base64'));\n};\n\nSignature.parse = function (data, type, format) {\n\tif (typeof (data) === 'string')\n\t\tdata = Buffer.from(data, 'base64');\n\tassert.buffer(data, 'data');\n\tassert.string(format, 'format');\n\tassert.string(type, 'type');\n\n\tvar opts = {};\n\topts.type = type.toLowerCase();\n\topts.parts = [];\n\n\ttry {\n\t\tassert.ok(data.length > 0, 'signature must not be empty');\n\t\tswitch (opts.type) {\n\t\tcase 'rsa':\n\t\t\treturn (parseOneNum(data, type, format, opts));\n\t\tcase 'ed25519':\n\t\t\treturn (parseOneNum(data, type, format, opts));\n\n\t\tcase 'dsa':\n\t\tcase 'ecdsa':\n\t\t\tif (format === 'asn1')\n\t\t\t\treturn (parseDSAasn1(data, type, format, opts));\n\t\t\telse if (opts.type === 'dsa')\n\t\t\t\treturn (parseDSA(data, type, format, opts));\n\t\t\telse\n\t\t\t\treturn (parseECDSA(data, type, format, opts));\n\n\t\tdefault:\n\t\t\tthrow (new InvalidAlgorithmError(type));\n\t\t}\n\n\t} catch (e) {\n\t\tif (e instanceof InvalidAlgorithmError)\n\t\t\tthrow (e);\n\t\tthrow (new SignatureParseError(type, format, e));\n\t}\n};\n\nfunction parseOneNum(data, type, format, opts) {\n\tif (format === 'ssh') {\n\t\ttry {\n\t\t\tvar buf = new SSHBuffer({buffer: data});\n\t\t\tvar head = buf.readString();\n\t\t} catch (e) {\n\t\t\t/* fall through */\n\t\t}\n\t\tif (buf !== undefined) {\n\t\t\tvar msg = 'SSH signature does not match expected ' +\n\t\t\t    'type (expected ' + type + ', got ' + head + ')';\n\t\t\tswitch (head) {\n\t\t\tcase 'ssh-rsa':\n\t\t\t\tassert.strictEqual(type, 'rsa', msg);\n\t\t\t\topts.hashAlgo = 'sha1';\n\t\t\t\tbreak;\n\t\t\tcase 'rsa-sha2-256':\n\t\t\t\tassert.strictEqual(type, 'rsa', msg);\n\t\t\t\topts.hashAlgo = 'sha256';\n\t\t\t\tbreak;\n\t\t\tcase 'rsa-sha2-512':\n\t\t\t\tassert.strictEqual(type, 'rsa', msg);\n\t\t\t\topts.hashAlgo = 'sha512';\n\t\t\t\tbreak;\n\t\t\tcase 'ssh-ed25519':\n\t\t\t\tassert.strictEqual(type, 'ed25519', msg);\n\t\t\t\topts.hashAlgo = 'sha512';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow (new Error('Unknown SSH signature ' +\n\t\t\t\t    'type: ' + head));\n\t\t\t}\n\t\t\tvar sig = buf.readPart();\n\t\t\tassert.ok(buf.atEnd(), 'extra trailing bytes');\n\t\t\tsig.name = 'sig';\n\t\t\topts.parts.push(sig);\n\t\t\treturn (new Signature(opts));\n\t\t}\n\t}\n\topts.parts.push({name: 'sig', data: data});\n\treturn (new Signature(opts));\n}\n\nfunction parseDSAasn1(data, type, format, opts) {\n\tvar der = new asn1.BerReader(data);\n\tder.readSequence();\n\tvar r = der.readString(asn1.Ber.Integer, true);\n\tvar s = der.readString(asn1.Ber.Integer, true);\n\n\topts.parts.push({name: 'r', data: utils.mpNormalize(r)});\n\topts.parts.push({name: 's', data: utils.mpNormalize(s)});\n\n\treturn (new Signature(opts));\n}\n\nfunction parseDSA(data, type, format, opts) {\n\tif (data.length != 40) {\n\t\tvar buf = new SSHBuffer({buffer: data});\n\t\tvar d = buf.readBuffer();\n\t\tif (d.toString('ascii') === 'ssh-dss')\n\t\t\td = buf.readBuffer();\n\t\tassert.ok(buf.atEnd(), 'extra trailing bytes');\n\t\tassert.strictEqual(d.length, 40, 'invalid inner length');\n\t\tdata = d;\n\t}\n\topts.parts.push({name: 'r', data: data.slice(0, 20)});\n\topts.parts.push({name: 's', data: data.slice(20, 40)});\n\treturn (new Signature(opts));\n}\n\nfunction parseECDSA(data, type, format, opts) {\n\tvar buf = new SSHBuffer({buffer: data});\n\n\tvar r, s;\n\tvar inner = buf.readBuffer();\n\tvar stype = inner.toString('ascii');\n\tif (stype.slice(0, 6) === 'ecdsa-') {\n\t\tvar parts = stype.split('-');\n\t\tassert.strictEqual(parts[0], 'ecdsa');\n\t\tassert.strictEqual(parts[1], 'sha2');\n\t\topts.curve = parts[2];\n\t\tswitch (opts.curve) {\n\t\tcase 'nistp256':\n\t\t\topts.hashAlgo = 'sha256';\n\t\t\tbreak;\n\t\tcase 'nistp384':\n\t\t\topts.hashAlgo = 'sha384';\n\t\t\tbreak;\n\t\tcase 'nistp521':\n\t\t\topts.hashAlgo = 'sha512';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow (new Error('Unsupported ECDSA curve: ' +\n\t\t\t    opts.curve));\n\t\t}\n\t\tinner = buf.readBuffer();\n\t\tassert.ok(buf.atEnd(), 'extra trailing bytes on outer');\n\t\tbuf = new SSHBuffer({buffer: inner});\n\t\tr = buf.readPart();\n\t} else {\n\t\tr = {data: inner};\n\t}\n\n\ts = buf.readPart();\n\tassert.ok(buf.atEnd(), 'extra trailing bytes');\n\n\tr.name = 'r';\n\ts.name = 's';\n\n\topts.parts.push(r);\n\topts.parts.push(s);\n\treturn (new Signature(opts));\n}\n\nSignature.isSignature = function (obj, ver) {\n\treturn (utils.isCompatible(obj, Signature, ver));\n};\n\n/*\n * API versions for Signature:\n * [1,0] -- initial ver\n * [2,0] -- support for rsa in full ssh format, compat with sshpk-agent\n *          hashAlgorithm property\n * [2,1] -- first tagged version\n */\nSignature.prototype._sshpkApiVersion = [2, 1];\n\nSignature._oldVersionDetect = function (obj) {\n\tassert.func(obj.toBuffer);\n\tif (obj.hasOwnProperty('hashAlgorithm'))\n\t\treturn ([2, 0]);\n\treturn ([1, 0]);\n};\n", "// Named EC curves\n\n// Requires ec.js, jsbn.js, and jsbn2.js\nvar BigInteger = require('jsbn').BigInteger\nvar ECCurveFp = require('./ec.js').ECCurveFp\n\n\n// ----------------\n// X9ECParameters\n\n// constructor\nfunction X9ECParameters(curve,g,n,h) {\n    this.curve = curve;\n    this.g = g;\n    this.n = n;\n    this.h = h;\n}\n\nfunction x9getCurve() {\n    return this.curve;\n}\n\nfunction x9getG() {\n    return this.g;\n}\n\nfunction x9getN() {\n    return this.n;\n}\n\nfunction x9getH() {\n    return this.h;\n}\n\nX9ECParameters.prototype.getCurve = x9getCurve;\nX9ECParameters.prototype.getG = x9getG;\nX9ECParameters.prototype.getN = x9getN;\nX9ECParameters.prototype.getH = x9getH;\n\n// ----------------\n// SECNamedCurves\n\nfunction fromHex(s) { return new BigInteger(s, 16); }\n\nfunction secp128r1() {\n    // p = 2^128 - 2^97 - 1\n    var p = fromHex(\"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF\");\n    var a = fromHex(\"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC\");\n    var b = fromHex(\"E87579C11079F43DD824993C2CEE5ED3\");\n    //byte[] S = Hex.decode(\"000E0D4D696E6768756151750CC03A4473D03679\");\n    var n = fromHex(\"FFFFFFFE0000000075A30D1B9038A115\");\n    var h = BigInteger.ONE;\n    var curve = new ECCurveFp(p, a, b);\n    var G = curve.decodePointHex(\"04\"\n                + \"161FF7528B899B2D0C28607CA52C5B86\"\n\t\t+ \"CF5AC8395BAFEB13C02DA292DDED7A83\");\n    return new X9ECParameters(curve, G, n, h);\n}\n\nfunction secp160k1() {\n    // p = 2^160 - 2^32 - 2^14 - 2^12 - 2^9 - 2^8 - 2^7 - 2^3 - 2^2 - 1\n    var p = fromHex(\"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73\");\n    var a = BigInteger.ZERO;\n    var b = fromHex(\"7\");\n    //byte[] S = null;\n    var n = fromHex(\"0100000000000000000001B8FA16DFAB9ACA16B6B3\");\n    var h = BigInteger.ONE;\n    var curve = new ECCurveFp(p, a, b);\n    var G = curve.decodePointHex(\"04\"\n                + \"3B4C382CE37AA192A4019E763036F4F5DD4D7EBB\"\n                + \"938CF935318FDCED6BC28286531733C3F03C4FEE\");\n    return new X9ECParameters(curve, G, n, h);\n}\n\nfunction secp160r1() {\n    // p = 2^160 - 2^31 - 1\n    var p = fromHex(\"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF\");\n    var a = fromHex(\"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC\");\n    var b = fromHex(\"1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45\");\n    //byte[] S = Hex.decode(\"1053CDE42C14D696E67687561517533BF3F83345\");\n    var n = fromHex(\"0100000000000000000001F4C8F927AED3CA752257\");\n    var h = BigInteger.ONE;\n    var curve = new ECCurveFp(p, a, b);\n    var G = curve.decodePointHex(\"04\"\n\t\t+ \"4A96B5688EF573284664698968C38BB913CBFC82\"\n\t\t+ \"23A628553168947D59DCC912042351377AC5FB32\");\n    return new X9ECParameters(curve, G, n, h);\n}\n\nfunction secp192k1() {\n    // p = 2^192 - 2^32 - 2^12 - 2^8 - 2^7 - 2^6 - 2^3 - 1\n    var p = fromHex(\"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37\");\n    var a = BigInteger.ZERO;\n    var b = fromHex(\"3\");\n    //byte[] S = null;\n    var n = fromHex(\"FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D\");\n    var h = BigInteger.ONE;\n    var curve = new ECCurveFp(p, a, b);\n    var G = curve.decodePointHex(\"04\"\n                + \"DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D\"\n                + \"9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D\");\n    return new X9ECParameters(curve, G, n, h);\n}\n\nfunction secp192r1() {\n    // p = 2^192 - 2^64 - 1\n    var p = fromHex(\"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF\");\n    var a = fromHex(\"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC\");\n    var b = fromHex(\"64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1\");\n    //byte[] S = Hex.decode(\"3045AE6FC8422F64ED579528D38120EAE12196D5\");\n    var n = fromHex(\"FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831\");\n    var h = BigInteger.ONE;\n    var curve = new ECCurveFp(p, a, b);\n    var G = curve.decodePointHex(\"04\"\n                + \"188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012\"\n                + \"07192B95FFC8DA78631011ED6B24CDD573F977A11E794811\");\n    return new X9ECParameters(curve, G, n, h);\n}\n\nfunction secp224r1() {\n    // p = 2^224 - 2^96 + 1\n    var p = fromHex(\"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001\");\n    var a = fromHex(\"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE\");\n    var b = fromHex(\"B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4\");\n    //byte[] S = Hex.decode(\"BD71344799D5C7FCDC45B59FA3B9AB8F6A948BC5\");\n    var n = fromHex(\"FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D\");\n    var h = BigInteger.ONE;\n    var curve = new ECCurveFp(p, a, b);\n    var G = curve.decodePointHex(\"04\"\n                + \"B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21\"\n                + \"BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34\");\n    return new X9ECParameters(curve, G, n, h);\n}\n\nfunction secp256r1() {\n    // p = 2^224 (2^32 - 1) + 2^192 + 2^96 - 1\n    var p = fromHex(\"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF\");\n    var a = fromHex(\"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC\");\n    var b = fromHex(\"5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B\");\n    //byte[] S = Hex.decode(\"C49D360886E704936A6678E1139D26B7819F7E90\");\n    var n = fromHex(\"FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551\");\n    var h = BigInteger.ONE;\n    var curve = new ECCurveFp(p, a, b);\n    var G = curve.decodePointHex(\"04\"\n                + \"6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296\"\n\t\t+ \"4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5\");\n    return new X9ECParameters(curve, G, n, h);\n}\n\n// TODO: make this into a proper hashtable\nfunction getSECCurveByName(name) {\n    if(name == \"secp128r1\") return secp128r1();\n    if(name == \"secp160k1\") return secp160k1();\n    if(name == \"secp160r1\") return secp160r1();\n    if(name == \"secp192k1\") return secp192k1();\n    if(name == \"secp192r1\") return secp192r1();\n    if(name == \"secp224r1\") return secp224r1();\n    if(name == \"secp256r1\") return secp256r1();\n    return null;\n}\n\nmodule.exports = {\n  \"secp128r1\":secp128r1,\n  \"secp160k1\":secp160k1,\n  \"secp160r1\":secp160r1,\n  \"secp192k1\":secp192k1,\n  \"secp192r1\":secp192r1,\n  \"secp224r1\":secp224r1,\n  \"secp256r1\":secp256r1\n}\n", "var crypto = require(\"crypto\");\nvar BigInteger = require(\"jsbn\").BigInteger;\nvar ECPointFp = require(\"./lib/ec.js\").ECPointFp;\nvar Buffer = require(\"safer-buffer\").Buffer;\nexports.ECCurves = require(\"./lib/sec.js\");\n\n// zero prepad\nfunction unstupid(hex,len)\n{\n\treturn (hex.length >= len) ? hex : unstupid(\"0\"+hex,len);\n}\n\nexports.ECKey = function(curve, key, isPublic)\n{\n  var priv;\n\tvar c = curve();\n\tvar n = c.getN();\n  var bytes = Math.floor(n.bitLength()/8);\n\n  if(key)\n  {\n    if(isPublic)\n    {\n      var curve = c.getCurve();\n//      var x = key.slice(1,bytes+1); // skip the 04 for uncompressed format\n//      var y = key.slice(bytes+1);\n//      this.P = new ECPointFp(curve,\n//        curve.fromBigInteger(new BigInteger(x.toString(\"hex\"), 16)),\n//        curve.fromBigInteger(new BigInteger(y.toString(\"hex\"), 16)));      \n      this.P = curve.decodePointHex(key.toString(\"hex\"));\n    }else{\n      if(key.length != bytes) return false;\n      priv = new BigInteger(key.toString(\"hex\"), 16);      \n    }\n  }else{\n    var n1 = n.subtract(BigInteger.ONE);\n    var r = new BigInteger(crypto.randomBytes(n.bitLength()));\n    priv = r.mod(n1).add(BigInteger.ONE);\n    this.P = c.getG().multiply(priv);\n  }\n  if(this.P)\n  {\n//  var pubhex = unstupid(this.P.getX().toBigInteger().toString(16),bytes*2)+unstupid(this.P.getY().toBigInteger().toString(16),bytes*2);\n//  this.PublicKey = Buffer.from(\"04\"+pubhex,\"hex\");\n    this.PublicKey = Buffer.from(c.getCurve().encodeCompressedPointHex(this.P),\"hex\");\n  }\n  if(priv)\n  {\n    this.PrivateKey = Buffer.from(unstupid(priv.toString(16),bytes*2),\"hex\");\n    this.deriveSharedSecret = function(key)\n    {\n      if(!key || !key.P) return false;\n      var S = key.P.multiply(priv);\n      return Buffer.from(unstupid(S.getX().toBigInteger().toString(16),bytes*2),\"hex\");\n   }     \n  }\n}\n\n", "// Copyright 2017 Joyent, Inc.\n\nmodule.exports = {\n\tDiffieHellman: DiffieHellman,\n\tgenerateECDSA: generateECDSA,\n\tgenerateED25519: generateED25519\n};\n\nvar assert = require('assert-plus');\nvar crypto = require('crypto');\nvar Buffer = require('safer-buffer').Buffer;\nvar algs = require('./algs');\nvar utils = require('./utils');\nvar nacl = require('tweetnacl');\n\nvar Key = require('./key');\nvar PrivateKey = require('./private-key');\n\nvar CRYPTO_HAVE_ECDH = (crypto.createECDH !== undefined);\n\nvar ecdh = require('ecc-jsbn');\nvar ec = require('ecc-jsbn/lib/ec');\nvar jsbn = require('jsbn').BigInteger;\n\nfunction DiffieHellman(key) {\n\tutils.assertCompatible(key, Key, [1, 4], 'key');\n\tthis._isPriv = PrivateKey.isPrivateKey(key, [1, 3]);\n\tthis._algo = key.type;\n\tthis._curve = key.curve;\n\tthis._key = key;\n\tif (key.type === 'dsa') {\n\t\tif (!CRYPTO_HAVE_ECDH) {\n\t\t\tthrow (new Error('Due to bugs in the node 0.10 ' +\n\t\t\t    'crypto API, node 0.12.x or later is required ' +\n\t\t\t    'to use DH'));\n\t\t}\n\t\tthis._dh = crypto.createDiffieHellman(\n\t\t    key.part.p.data, undefined,\n\t\t    key.part.g.data, undefined);\n\t\tthis._p = key.part.p;\n\t\tthis._g = key.part.g;\n\t\tif (this._isPriv)\n\t\t\tthis._dh.setPrivateKey(key.part.x.data);\n\t\tthis._dh.setPublicKey(key.part.y.data);\n\n\t} else if (key.type === 'ecdsa') {\n\t\tif (!CRYPTO_HAVE_ECDH) {\n\t\t\tthis._ecParams = new X9ECParameters(this._curve);\n\n\t\t\tif (this._isPriv) {\n\t\t\t\tthis._priv = new ECPrivate(\n\t\t\t\t    this._ecParams, key.part.d.data);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tvar curve = {\n\t\t\t'nistp256': 'prime256v1',\n\t\t\t'nistp384': 'secp384r1',\n\t\t\t'nistp521': 'secp521r1'\n\t\t}[key.curve];\n\t\tthis._dh = crypto.createECDH(curve);\n\t\tif (typeof (this._dh) !== 'object' ||\n\t\t    typeof (this._dh.setPrivateKey) !== 'function') {\n\t\t\tCRYPTO_HAVE_ECDH = false;\n\t\t\tDiffieHellman.call(this, key);\n\t\t\treturn;\n\t\t}\n\t\tif (this._isPriv)\n\t\t\tthis._dh.setPrivateKey(key.part.d.data);\n\t\tthis._dh.setPublicKey(key.part.Q.data);\n\n\t} else if (key.type === 'curve25519') {\n\t\tif (this._isPriv) {\n\t\t\tutils.assertCompatible(key, PrivateKey, [1, 5], 'key');\n\t\t\tthis._priv = key.part.k.data;\n\t\t}\n\n\t} else {\n\t\tthrow (new Error('DH not supported for ' + key.type + ' keys'));\n\t}\n}\n\nDiffieHellman.prototype.getPublicKey = function () {\n\tif (this._isPriv)\n\t\treturn (this._key.toPublic());\n\treturn (this._key);\n};\n\nDiffieHellman.prototype.getPrivateKey = function () {\n\tif (this._isPriv)\n\t\treturn (this._key);\n\telse\n\t\treturn (undefined);\n};\nDiffieHellman.prototype.getKey = DiffieHellman.prototype.getPrivateKey;\n\nDiffieHellman.prototype._keyCheck = function (pk, isPub) {\n\tassert.object(pk, 'key');\n\tif (!isPub)\n\t\tutils.assertCompatible(pk, PrivateKey, [1, 3], 'key');\n\tutils.assertCompatible(pk, Key, [1, 4], 'key');\n\n\tif (pk.type !== this._algo) {\n\t\tthrow (new Error('A ' + pk.type + ' key cannot be used in ' +\n\t\t    this._algo + ' Diffie-Hellman'));\n\t}\n\n\tif (pk.curve !== this._curve) {\n\t\tthrow (new Error('A key from the ' + pk.curve + ' curve ' +\n\t\t    'cannot be used with a ' + this._curve +\n\t\t    ' Diffie-Hellman'));\n\t}\n\n\tif (pk.type === 'dsa') {\n\t\tassert.deepEqual(pk.part.p, this._p,\n\t\t    'DSA key prime does not match');\n\t\tassert.deepEqual(pk.part.g, this._g,\n\t\t    'DSA key generator does not match');\n\t}\n};\n\nDiffieHellman.prototype.setKey = function (pk) {\n\tthis._keyCheck(pk);\n\n\tif (pk.type === 'dsa') {\n\t\tthis._dh.setPrivateKey(pk.part.x.data);\n\t\tthis._dh.setPublicKey(pk.part.y.data);\n\n\t} else if (pk.type === 'ecdsa') {\n\t\tif (CRYPTO_HAVE_ECDH) {\n\t\t\tthis._dh.setPrivateKey(pk.part.d.data);\n\t\t\tthis._dh.setPublicKey(pk.part.Q.data);\n\t\t} else {\n\t\t\tthis._priv = new ECPrivate(\n\t\t\t    this._ecParams, pk.part.d.data);\n\t\t}\n\n\t} else if (pk.type === 'curve25519') {\n\t\tvar k = pk.part.k;\n\t\tif (!pk.part.k)\n\t\t\tk = pk.part.r;\n\t\tthis._priv = k.data;\n\t\tif (this._priv[0] === 0x00)\n\t\t\tthis._priv = this._priv.slice(1);\n\t\tthis._priv = this._priv.slice(0, 32);\n\t}\n\tthis._key = pk;\n\tthis._isPriv = true;\n};\nDiffieHellman.prototype.setPrivateKey = DiffieHellman.prototype.setKey;\n\nDiffieHellman.prototype.computeSecret = function (otherpk) {\n\tthis._keyCheck(otherpk, true);\n\tif (!this._isPriv)\n\t\tthrow (new Error('DH exchange has not been initialized with ' +\n\t\t    'a private key yet'));\n\n\tvar pub;\n\tif (this._algo === 'dsa') {\n\t\treturn (this._dh.computeSecret(\n\t\t    otherpk.part.y.data));\n\n\t} else if (this._algo === 'ecdsa') {\n\t\tif (CRYPTO_HAVE_ECDH) {\n\t\t\treturn (this._dh.computeSecret(\n\t\t\t    otherpk.part.Q.data));\n\t\t} else {\n\t\t\tpub = new ECPublic(\n\t\t\t    this._ecParams, otherpk.part.Q.data);\n\t\t\treturn (this._priv.deriveSharedSecret(pub));\n\t\t}\n\n\t} else if (this._algo === 'curve25519') {\n\t\tpub = otherpk.part.A.data;\n\t\twhile (pub[0] === 0x00 && pub.length > 32)\n\t\t\tpub = pub.slice(1);\n\t\tvar priv = this._priv;\n\t\tassert.strictEqual(pub.length, 32);\n\t\tassert.strictEqual(priv.length, 32);\n\n\t\tvar secret = nacl.box.before(new Uint8Array(pub),\n\t\t    new Uint8Array(priv));\n\n\t\treturn (Buffer.from(secret));\n\t}\n\n\tthrow (new Error('Invalid algorithm: ' + this._algo));\n};\n\nDiffieHellman.prototype.generateKey = function () {\n\tvar parts = [];\n\tvar priv, pub;\n\tif (this._algo === 'dsa') {\n\t\tthis._dh.generateKeys();\n\n\t\tparts.push({name: 'p', data: this._p.data});\n\t\tparts.push({name: 'q', data: this._key.part.q.data});\n\t\tparts.push({name: 'g', data: this._g.data});\n\t\tparts.push({name: 'y', data: this._dh.getPublicKey()});\n\t\tparts.push({name: 'x', data: this._dh.getPrivateKey()});\n\t\tthis._key = new PrivateKey({\n\t\t\ttype: 'dsa',\n\t\t\tparts: parts\n\t\t});\n\t\tthis._isPriv = true;\n\t\treturn (this._key);\n\n\t} else if (this._algo === 'ecdsa') {\n\t\tif (CRYPTO_HAVE_ECDH) {\n\t\t\tthis._dh.generateKeys();\n\n\t\t\tparts.push({name: 'curve',\n\t\t\t    data: Buffer.from(this._curve)});\n\t\t\tparts.push({name: 'Q', data: this._dh.getPublicKey()});\n\t\t\tparts.push({name: 'd', data: this._dh.getPrivateKey()});\n\t\t\tthis._key = new PrivateKey({\n\t\t\t\ttype: 'ecdsa',\n\t\t\t\tcurve: this._curve,\n\t\t\t\tparts: parts\n\t\t\t});\n\t\t\tthis._isPriv = true;\n\t\t\treturn (this._key);\n\n\t\t} else {\n\t\t\tvar n = this._ecParams.getN();\n\t\t\tvar r = new jsbn(crypto.randomBytes(n.bitLength()));\n\t\t\tvar n1 = n.subtract(jsbn.ONE);\n\t\t\tpriv = r.mod(n1).add(jsbn.ONE);\n\t\t\tpub = this._ecParams.getG().multiply(priv);\n\n\t\t\tpriv = Buffer.from(priv.toByteArray());\n\t\t\tpub = Buffer.from(this._ecParams.getCurve().\n\t\t\t    encodePointHex(pub), 'hex');\n\n\t\t\tthis._priv = new ECPrivate(this._ecParams, priv);\n\n\t\t\tparts.push({name: 'curve',\n\t\t\t    data: Buffer.from(this._curve)});\n\t\t\tparts.push({name: 'Q', data: pub});\n\t\t\tparts.push({name: 'd', data: priv});\n\n\t\t\tthis._key = new PrivateKey({\n\t\t\t\ttype: 'ecdsa',\n\t\t\t\tcurve: this._curve,\n\t\t\t\tparts: parts\n\t\t\t});\n\t\t\tthis._isPriv = true;\n\t\t\treturn (this._key);\n\t\t}\n\n\t} else if (this._algo === 'curve25519') {\n\t\tvar pair = nacl.box.keyPair();\n\t\tpriv = Buffer.from(pair.secretKey);\n\t\tpub = Buffer.from(pair.publicKey);\n\t\tpriv = Buffer.concat([priv, pub]);\n\t\tassert.strictEqual(priv.length, 64);\n\t\tassert.strictEqual(pub.length, 32);\n\n\t\tparts.push({name: 'A', data: pub});\n\t\tparts.push({name: 'k', data: priv});\n\t\tthis._key = new PrivateKey({\n\t\t\ttype: 'curve25519',\n\t\t\tparts: parts\n\t\t});\n\t\tthis._isPriv = true;\n\t\treturn (this._key);\n\t}\n\n\tthrow (new Error('Invalid algorithm: ' + this._algo));\n};\nDiffieHellman.prototype.generateKeys = DiffieHellman.prototype.generateKey;\n\n/* These are helpers for using ecc-jsbn (for node 0.10 compatibility). */\n\nfunction X9ECParameters(name) {\n\tvar params = algs.curves[name];\n\tassert.object(params);\n\n\tvar p = new jsbn(params.p);\n\tvar a = new jsbn(params.a);\n\tvar b = new jsbn(params.b);\n\tvar n = new jsbn(params.n);\n\tvar h = jsbn.ONE;\n\tvar curve = new ec.ECCurveFp(p, a, b);\n\tvar G = curve.decodePointHex(params.G.toString('hex'));\n\n\tthis.curve = curve;\n\tthis.g = G;\n\tthis.n = n;\n\tthis.h = h;\n}\nX9ECParameters.prototype.getCurve = function () { return (this.curve); };\nX9ECParameters.prototype.getG = function () { return (this.g); };\nX9ECParameters.prototype.getN = function () { return (this.n); };\nX9ECParameters.prototype.getH = function () { return (this.h); };\n\nfunction ECPublic(params, buffer) {\n\tthis._params = params;\n\tif (buffer[0] === 0x00)\n\t\tbuffer = buffer.slice(1);\n\tthis._pub = params.getCurve().decodePointHex(buffer.toString('hex'));\n}\n\nfunction ECPrivate(params, buffer) {\n\tthis._params = params;\n\tthis._priv = new jsbn(utils.mpNormalize(buffer));\n}\nECPrivate.prototype.deriveSharedSecret = function (pubKey) {\n\tassert.ok(pubKey instanceof ECPublic);\n\tvar S = pubKey._pub.multiply(this._priv);\n\treturn (Buffer.from(S.getX().toBigInteger().toByteArray()));\n};\n\nfunction generateED25519() {\n\tvar pair = nacl.sign.keyPair();\n\tvar priv = Buffer.from(pair.secretKey);\n\tvar pub = Buffer.from(pair.publicKey);\n\tassert.strictEqual(priv.length, 64);\n\tassert.strictEqual(pub.length, 32);\n\n\tvar parts = [];\n\tparts.push({name: 'A', data: pub});\n\tparts.push({name: 'k', data: priv.slice(0, 32)});\n\tvar key = new PrivateKey({\n\t\ttype: 'ed25519',\n\t\tparts: parts\n\t});\n\treturn (key);\n}\n\n/* Generates a new ECDSA private key on a given curve. */\nfunction generateECDSA(curve) {\n\tvar parts = [];\n\tvar key;\n\n\tif (CRYPTO_HAVE_ECDH) {\n\t\t/*\n\t\t * Node crypto doesn't expose key generation directly, but the\n\t\t * ECDH instances can generate keys. It turns out this just\n\t\t * calls into the OpenSSL generic key generator, and we can\n\t\t * read its output happily without doing an actual DH. So we\n\t\t * use that here.\n\t\t */\n\t\tvar osCurve = {\n\t\t\t'nistp256': 'prime256v1',\n\t\t\t'nistp384': 'secp384r1',\n\t\t\t'nistp521': 'secp521r1'\n\t\t}[curve];\n\n\t\tvar dh = crypto.createECDH(osCurve);\n\t\tdh.generateKeys();\n\n\t\tparts.push({name: 'curve',\n\t\t    data: Buffer.from(curve)});\n\t\tparts.push({name: 'Q', data: dh.getPublicKey()});\n\t\tparts.push({name: 'd', data: dh.getPrivateKey()});\n\n\t\tkey = new PrivateKey({\n\t\t\ttype: 'ecdsa',\n\t\t\tcurve: curve,\n\t\t\tparts: parts\n\t\t});\n\t\treturn (key);\n\t} else {\n\n\t\tvar ecParams = new X9ECParameters(curve);\n\n\t\t/* This algorithm taken from FIPS PUB 186-4 (section B.4.1) */\n\t\tvar n = ecParams.getN();\n\t\t/*\n\t\t * The crypto.randomBytes() function can only give us whole\n\t\t * bytes, so taking a nod from X9.62, we round up.\n\t\t */\n\t\tvar cByteLen = Math.ceil((n.bitLength() + 64) / 8);\n\t\tvar c = new jsbn(crypto.randomBytes(cByteLen));\n\n\t\tvar n1 = n.subtract(jsbn.ONE);\n\t\tvar priv = c.mod(n1).add(jsbn.ONE);\n\t\tvar pub = ecParams.getG().multiply(priv);\n\n\t\tpriv = Buffer.from(priv.toByteArray());\n\t\tpub = Buffer.from(ecParams.getCurve().\n\t\t    encodePointHex(pub), 'hex');\n\n\t\tparts.push({name: 'curve', data: Buffer.from(curve)});\n\t\tparts.push({name: 'Q', data: pub});\n\t\tparts.push({name: 'd', data: priv});\n\n\t\tkey = new PrivateKey({\n\t\t\ttype: 'ecdsa',\n\t\t\tcurve: curve,\n\t\t\tparts: parts\n\t\t});\n\t\treturn (key);\n\t}\n}\n", "// Copyright 2015 Joyent, Inc.\n\nmodule.exports = {\n\tVerifier: Verifier,\n\tSigner: Signer\n};\n\nvar nacl = require('tweetnacl');\nvar stream = require('stream');\nvar util = require('util');\nvar assert = require('assert-plus');\nvar Buffer = require('safer-buffer').Buffer;\nvar Signature = require('./signature');\n\nfunction Verifier(key, hashAlgo) {\n\tif (hashAlgo.toLowerCase() !== 'sha512')\n\t\tthrow (new Error('ED25519 only supports the use of ' +\n\t\t    'SHA-512 hashes'));\n\n\tthis.key = key;\n\tthis.chunks = [];\n\n\tstream.Writable.call(this, {});\n}\nutil.inherits(Verifier, stream.Writable);\n\nVerifier.prototype._write = function (chunk, enc, cb) {\n\tthis.chunks.push(chunk);\n\tcb();\n};\n\nVerifier.prototype.update = function (chunk) {\n\tif (typeof (chunk) === 'string')\n\t\tchunk = Buffer.from(chunk, 'binary');\n\tthis.chunks.push(chunk);\n};\n\nVerifier.prototype.verify = function (signature, fmt) {\n\tvar sig;\n\tif (Signature.isSignature(signature, [2, 0])) {\n\t\tif (signature.type !== 'ed25519')\n\t\t\treturn (false);\n\t\tsig = signature.toBuffer('raw');\n\n\t} else if (typeof (signature) === 'string') {\n\t\tsig = Buffer.from(signature, 'base64');\n\n\t} else if (Signature.isSignature(signature, [1, 0])) {\n\t\tthrow (new Error('signature was created by too old ' +\n\t\t    'a version of sshpk and cannot be verified'));\n\t}\n\n\tassert.buffer(sig);\n\treturn (nacl.sign.detached.verify(\n\t    new Uint8Array(Buffer.concat(this.chunks)),\n\t    new Uint8Array(sig),\n\t    new Uint8Array(this.key.part.A.data)));\n};\n\nfunction Signer(key, hashAlgo) {\n\tif (hashAlgo.toLowerCase() !== 'sha512')\n\t\tthrow (new Error('ED25519 only supports the use of ' +\n\t\t    'SHA-512 hashes'));\n\n\tthis.key = key;\n\tthis.chunks = [];\n\n\tstream.Writable.call(this, {});\n}\nutil.inherits(Signer, stream.Writable);\n\nSigner.prototype._write = function (chunk, enc, cb) {\n\tthis.chunks.push(chunk);\n\tcb();\n};\n\nSigner.prototype.update = function (chunk) {\n\tif (typeof (chunk) === 'string')\n\t\tchunk = Buffer.from(chunk, 'binary');\n\tthis.chunks.push(chunk);\n};\n\nSigner.prototype.sign = function () {\n\tvar sig = nacl.sign.detached(\n\t    new Uint8Array(Buffer.concat(this.chunks)),\n\t    new Uint8Array(Buffer.concat([\n\t\tthis.key.part.k.data, this.key.part.A.data])));\n\tvar sigBuf = Buffer.from(sig);\n\tvar sigObj = Signature.parse(sigBuf, 'ed25519', 'raw');\n\tsigObj.hashAlgorithm = 'sha512';\n\treturn (sigObj);\n};\n", "// Copyright 2018 Joyent, Inc.\n\nmodule.exports = {\n\tread: read,\n\treadPkcs8: readPkcs8,\n\twrite: write,\n\twritePkcs8: writePkcs8,\n\tpkcs8ToBuffer: pkcs8ToBuffer,\n\n\treadECDSACurve: readECDSACurve,\n\twriteECDSACurve: writeECDSACurve\n};\n\nvar assert = require('assert-plus');\nvar asn1 = require('asn1');\nvar Buffer = require('safer-buffer').Buffer;\nvar algs = require('../algs');\nvar utils = require('../utils');\nvar Key = require('../key');\nvar PrivateKey = require('../private-key');\nvar pem = require('./pem');\n\nfunction read(buf, options) {\n\treturn (pem.read(buf, options, 'pkcs8'));\n}\n\nfunction write(key, options) {\n\treturn (pem.write(key, options, 'pkcs8'));\n}\n\n/* Helper to read in a single mpint */\nfunction readMPInt(der, nm) {\n\tassert.strictEqual(der.peek(), asn1.Ber.Integer,\n\t    nm + ' is not an Integer');\n\treturn (utils.mpNormalize(der.readString(asn1.Ber.Integer, true)));\n}\n\nfunction readPkcs8(alg, type, der) {\n\t/* Private keys in pkcs#8 format have a weird extra int */\n\tif (der.peek() === asn1.Ber.Integer) {\n\t\tassert.strictEqual(type, 'private',\n\t\t    'unexpected Integer at start of public key');\n\t\tder.readString(asn1.Ber.Integer, true);\n\t}\n\n\tder.readSequence();\n\tvar next = der.offset + der.length;\n\n\tvar oid = der.readOID();\n\tswitch (oid) {\n\tcase '1.2.840.113549.1.1.1':\n\t\tder._offset = next;\n\t\tif (type === 'public')\n\t\t\treturn (readPkcs8RSAPublic(der));\n\t\telse\n\t\t\treturn (readPkcs8RSAPrivate(der));\n\tcase '1.2.840.10040.4.1':\n\t\tif (type === 'public')\n\t\t\treturn (readPkcs8DSAPublic(der));\n\t\telse\n\t\t\treturn (readPkcs8DSAPrivate(der));\n\tcase '1.2.840.10045.2.1':\n\t\tif (type === 'public')\n\t\t\treturn (readPkcs8ECDSAPublic(der));\n\t\telse\n\t\t\treturn (readPkcs8ECDSAPrivate(der));\n\tcase '1.3.101.112':\n\t\tif (type === 'public') {\n\t\t\treturn (readPkcs8EdDSAPublic(der));\n\t\t} else {\n\t\t\treturn (readPkcs8EdDSAPrivate(der));\n\t\t}\n\tcase '1.3.101.110':\n\t\tif (type === 'public') {\n\t\t\treturn (readPkcs8X25519Public(der));\n\t\t} else {\n\t\t\treturn (readPkcs8X25519Private(der));\n\t\t}\n\tdefault:\n\t\tthrow (new Error('Unknown key type OID ' + oid));\n\t}\n}\n\nfunction readPkcs8RSAPublic(der) {\n\t// bit string sequence\n\tder.readSequence(asn1.Ber.BitString);\n\tder.readByte();\n\tder.readSequence();\n\n\t// modulus\n\tvar n = readMPInt(der, 'modulus');\n\tvar e = readMPInt(der, 'exponent');\n\n\t// now, make the key\n\tvar key = {\n\t\ttype: 'rsa',\n\t\tsource: der.originalInput,\n\t\tparts: [\n\t\t\t{ name: 'e', data: e },\n\t\t\t{ name: 'n', data: n }\n\t\t]\n\t};\n\n\treturn (new Key(key));\n}\n\nfunction readPkcs8RSAPrivate(der) {\n\tder.readSequence(asn1.Ber.OctetString);\n\tder.readSequence();\n\n\tvar ver = readMPInt(der, 'version');\n\tassert.equal(ver[0], 0x0, 'unknown RSA private key version');\n\n\t// modulus then public exponent\n\tvar n = readMPInt(der, 'modulus');\n\tvar e = readMPInt(der, 'public exponent');\n\tvar d = readMPInt(der, 'private exponent');\n\tvar p = readMPInt(der, 'prime1');\n\tvar q = readMPInt(der, 'prime2');\n\tvar dmodp = readMPInt(der, 'exponent1');\n\tvar dmodq = readMPInt(der, 'exponent2');\n\tvar iqmp = readMPInt(der, 'iqmp');\n\n\t// now, make the key\n\tvar key = {\n\t\ttype: 'rsa',\n\t\tparts: [\n\t\t\t{ name: 'n', data: n },\n\t\t\t{ name: 'e', data: e },\n\t\t\t{ name: 'd', data: d },\n\t\t\t{ name: 'iqmp', data: iqmp },\n\t\t\t{ name: 'p', data: p },\n\t\t\t{ name: 'q', data: q },\n\t\t\t{ name: 'dmodp', data: dmodp },\n\t\t\t{ name: 'dmodq', data: dmodq }\n\t\t]\n\t};\n\n\treturn (new PrivateKey(key));\n}\n\nfunction readPkcs8DSAPublic(der) {\n\tder.readSequence();\n\n\tvar p = readMPInt(der, 'p');\n\tvar q = readMPInt(der, 'q');\n\tvar g = readMPInt(der, 'g');\n\n\t// bit string sequence\n\tder.readSequence(asn1.Ber.BitString);\n\tder.readByte();\n\n\tvar y = readMPInt(der, 'y');\n\n\t// now, make the key\n\tvar key = {\n\t\ttype: 'dsa',\n\t\tparts: [\n\t\t\t{ name: 'p', data: p },\n\t\t\t{ name: 'q', data: q },\n\t\t\t{ name: 'g', data: g },\n\t\t\t{ name: 'y', data: y }\n\t\t]\n\t};\n\n\treturn (new Key(key));\n}\n\nfunction readPkcs8DSAPrivate(der) {\n\tder.readSequence();\n\n\tvar p = readMPInt(der, 'p');\n\tvar q = readMPInt(der, 'q');\n\tvar g = readMPInt(der, 'g');\n\n\tder.readSequence(asn1.Ber.OctetString);\n\tvar x = readMPInt(der, 'x');\n\n\t/* The pkcs#8 format does not include the public key */\n\tvar y = utils.calculateDSAPublic(g, p, x);\n\n\tvar key = {\n\t\ttype: 'dsa',\n\t\tparts: [\n\t\t\t{ name: 'p', data: p },\n\t\t\t{ name: 'q', data: q },\n\t\t\t{ name: 'g', data: g },\n\t\t\t{ name: 'y', data: y },\n\t\t\t{ name: 'x', data: x }\n\t\t]\n\t};\n\n\treturn (new PrivateKey(key));\n}\n\nfunction readECDSACurve(der) {\n\tvar curveName, curveNames;\n\tvar j, c, cd;\n\n\tif (der.peek() === asn1.Ber.OID) {\n\t\tvar oid = der.readOID();\n\n\t\tcurveNames = Object.keys(algs.curves);\n\t\tfor (j = 0; j < curveNames.length; ++j) {\n\t\t\tc = curveNames[j];\n\t\t\tcd = algs.curves[c];\n\t\t\tif (cd.pkcs8oid === oid) {\n\t\t\t\tcurveName = c;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t} else {\n\t\t// ECParameters sequence\n\t\tder.readSequence();\n\t\tvar version = der.readString(asn1.Ber.Integer, true);\n\t\tassert.strictEqual(version[0], 1, 'ECDSA key not version 1');\n\n\t\tvar curve = {};\n\n\t\t// FieldID sequence\n\t\tder.readSequence();\n\t\tvar fieldTypeOid = der.readOID();\n\t\tassert.strictEqual(fieldTypeOid, '1.2.840.10045.1.1',\n\t\t    'ECDSA key is not from a prime-field');\n\t\tvar p = curve.p = utils.mpNormalize(\n\t\t    der.readString(asn1.Ber.Integer, true));\n\t\t/*\n\t\t * p always starts with a 1 bit, so count the zeros to get its\n\t\t * real size.\n\t\t */\n\t\tcurve.size = p.length * 8 - utils.countZeros(p);\n\n\t\t// Curve sequence\n\t\tder.readSequence();\n\t\tcurve.a = utils.mpNormalize(\n\t\t    der.readString(asn1.Ber.OctetString, true));\n\t\tcurve.b = utils.mpNormalize(\n\t\t    der.readString(asn1.Ber.OctetString, true));\n\t\tif (der.peek() === asn1.Ber.BitString)\n\t\t\tcurve.s = der.readString(asn1.Ber.BitString, true);\n\n\t\t// Combined Gx and Gy\n\t\tcurve.G = der.readString(asn1.Ber.OctetString, true);\n\t\tassert.strictEqual(curve.G[0], 0x4,\n\t\t    'uncompressed G is required');\n\n\t\tcurve.n = utils.mpNormalize(\n\t\t    der.readString(asn1.Ber.Integer, true));\n\t\tcurve.h = utils.mpNormalize(\n\t\t    der.readString(asn1.Ber.Integer, true));\n\t\tassert.strictEqual(curve.h[0], 0x1, 'a cofactor=1 curve is ' +\n\t\t    'required');\n\n\t\tcurveNames = Object.keys(algs.curves);\n\t\tvar ks = Object.keys(curve);\n\t\tfor (j = 0; j < curveNames.length; ++j) {\n\t\t\tc = curveNames[j];\n\t\t\tcd = algs.curves[c];\n\t\t\tvar equal = true;\n\t\t\tfor (var i = 0; i < ks.length; ++i) {\n\t\t\t\tvar k = ks[i];\n\t\t\t\tif (cd[k] === undefined)\n\t\t\t\t\tcontinue;\n\t\t\t\tif (typeof (cd[k]) === 'object' &&\n\t\t\t\t    cd[k].equals !== undefined) {\n\t\t\t\t\tif (!cd[k].equals(curve[k])) {\n\t\t\t\t\t\tequal = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else if (Buffer.isBuffer(cd[k])) {\n\t\t\t\t\tif (cd[k].toString('binary')\n\t\t\t\t\t    !== curve[k].toString('binary')) {\n\t\t\t\t\t\tequal = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (cd[k] !== curve[k]) {\n\t\t\t\t\t\tequal = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (equal) {\n\t\t\t\tcurveName = c;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn (curveName);\n}\n\nfunction readPkcs8ECDSAPrivate(der) {\n\tvar curveName = readECDSACurve(der);\n\tassert.string(curveName, 'a known elliptic curve');\n\n\tder.readSequence(asn1.Ber.OctetString);\n\tder.readSequence();\n\n\tvar version = readMPInt(der, 'version');\n\tassert.equal(version[0], 1, 'unknown version of ECDSA key');\n\n\tvar d = der.readString(asn1.Ber.OctetString, true);\n\tvar Q;\n\n\tif (der.peek() == 0xa0) {\n\t\tder.readSequence(0xa0);\n\t\tder._offset += der.length;\n\t}\n\tif (der.peek() == 0xa1) {\n\t\tder.readSequence(0xa1);\n\t\tQ = der.readString(asn1.Ber.BitString, true);\n\t\tQ = utils.ecNormalize(Q);\n\t}\n\n\tif (Q === undefined) {\n\t\tvar pub = utils.publicFromPrivateECDSA(curveName, d);\n\t\tQ = pub.part.Q.data;\n\t}\n\n\tvar key = {\n\t\ttype: 'ecdsa',\n\t\tparts: [\n\t\t\t{ name: 'curve', data: Buffer.from(curveName) },\n\t\t\t{ name: 'Q', data: Q },\n\t\t\t{ name: 'd', data: d }\n\t\t]\n\t};\n\n\treturn (new PrivateKey(key));\n}\n\nfunction readPkcs8ECDSAPublic(der) {\n\tvar curveName = readECDSACurve(der);\n\tassert.string(curveName, 'a known elliptic curve');\n\n\tvar Q = der.readString(asn1.Ber.BitString, true);\n\tQ = utils.ecNormalize(Q);\n\n\tvar key = {\n\t\ttype: 'ecdsa',\n\t\tparts: [\n\t\t\t{ name: 'curve', data: Buffer.from(curveName) },\n\t\t\t{ name: 'Q', data: Q }\n\t\t]\n\t};\n\n\treturn (new Key(key));\n}\n\nfunction readPkcs8EdDSAPublic(der) {\n\tif (der.peek() === 0x00)\n\t\tder.readByte();\n\n\tvar A = utils.readBitString(der);\n\n\tvar key = {\n\t\ttype: 'ed25519',\n\t\tparts: [\n\t\t\t{ name: 'A', data: utils.zeroPadToLength(A, 32) }\n\t\t]\n\t};\n\n\treturn (new Key(key));\n}\n\nfunction readPkcs8X25519Public(der) {\n\tvar A = utils.readBitString(der);\n\n\tvar key = {\n\t\ttype: 'curve25519',\n\t\tparts: [\n\t\t\t{ name: 'A', data: utils.zeroPadToLength(A, 32) }\n\t\t]\n\t};\n\n\treturn (new Key(key));\n}\n\nfunction readPkcs8EdDSAPrivate(der) {\n\tif (der.peek() === 0x00)\n\t\tder.readByte();\n\n\tder.readSequence(asn1.Ber.OctetString);\n\tvar k = der.readString(asn1.Ber.OctetString, true);\n\tk = utils.zeroPadToLength(k, 32);\n\n\tvar A;\n\tif (der.peek() === asn1.Ber.BitString) {\n\t\tA = utils.readBitString(der);\n\t\tA = utils.zeroPadToLength(A, 32);\n\t} else {\n\t\tA = utils.calculateED25519Public(k);\n\t}\n\n\tvar key = {\n\t\ttype: 'ed25519',\n\t\tparts: [\n\t\t\t{ name: 'A', data: utils.zeroPadToLength(A, 32) },\n\t\t\t{ name: 'k', data: utils.zeroPadToLength(k, 32) }\n\t\t]\n\t};\n\n\treturn (new PrivateKey(key));\n}\n\nfunction readPkcs8X25519Private(der) {\n\tif (der.peek() === 0x00)\n\t\tder.readByte();\n\n\tder.readSequence(asn1.Ber.OctetString);\n\tvar k = der.readString(asn1.Ber.OctetString, true);\n\tk = utils.zeroPadToLength(k, 32);\n\n\tvar A = utils.calculateX25519Public(k);\n\n\tvar key = {\n\t\ttype: 'curve25519',\n\t\tparts: [\n\t\t\t{ name: 'A', data: utils.zeroPadToLength(A, 32) },\n\t\t\t{ name: 'k', data: utils.zeroPadToLength(k, 32) }\n\t\t]\n\t};\n\n\treturn (new PrivateKey(key));\n}\n\nfunction pkcs8ToBuffer(key) {\n\tvar der = new asn1.BerWriter();\n\twritePkcs8(der, key);\n\treturn (der.buffer);\n}\n\nfunction writePkcs8(der, key) {\n\tder.startSequence();\n\n\tif (PrivateKey.isPrivateKey(key)) {\n\t\tvar sillyInt = Buffer.from([0]);\n\t\tder.writeBuffer(sillyInt, asn1.Ber.Integer);\n\t}\n\n\tder.startSequence();\n\tswitch (key.type) {\n\tcase 'rsa':\n\t\tder.writeOID('1.2.840.113549.1.1.1');\n\t\tif (PrivateKey.isPrivateKey(key))\n\t\t\twritePkcs8RSAPrivate(key, der);\n\t\telse\n\t\t\twritePkcs8RSAPublic(key, der);\n\t\tbreak;\n\tcase 'dsa':\n\t\tder.writeOID('1.2.840.10040.4.1');\n\t\tif (PrivateKey.isPrivateKey(key))\n\t\t\twritePkcs8DSAPrivate(key, der);\n\t\telse\n\t\t\twritePkcs8DSAPublic(key, der);\n\t\tbreak;\n\tcase 'ecdsa':\n\t\tder.writeOID('1.2.840.10045.2.1');\n\t\tif (PrivateKey.isPrivateKey(key))\n\t\t\twritePkcs8ECDSAPrivate(key, der);\n\t\telse\n\t\t\twritePkcs8ECDSAPublic(key, der);\n\t\tbreak;\n\tcase 'ed25519':\n\t\tder.writeOID('1.3.101.112');\n\t\tif (PrivateKey.isPrivateKey(key))\n\t\t\tthrow (new Error('Ed25519 private keys in pkcs8 ' +\n\t\t\t    'format are not supported'));\n\t\twritePkcs8EdDSAPublic(key, der);\n\t\tbreak;\n\tdefault:\n\t\tthrow (new Error('Unsupported key type: ' + key.type));\n\t}\n\n\tder.endSequence();\n}\n\nfunction writePkcs8RSAPrivate(key, der) {\n\tder.writeNull();\n\tder.endSequence();\n\n\tder.startSequence(asn1.Ber.OctetString);\n\tder.startSequence();\n\n\tvar version = Buffer.from([0]);\n\tder.writeBuffer(version, asn1.Ber.Integer);\n\n\tder.writeBuffer(key.part.n.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.e.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.d.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.p.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.q.data, asn1.Ber.Integer);\n\tif (!key.part.dmodp || !key.part.dmodq)\n\t\tutils.addRSAMissing(key);\n\tder.writeBuffer(key.part.dmodp.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.dmodq.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.iqmp.data, asn1.Ber.Integer);\n\n\tder.endSequence();\n\tder.endSequence();\n}\n\nfunction writePkcs8RSAPublic(key, der) {\n\tder.writeNull();\n\tder.endSequence();\n\n\tder.startSequence(asn1.Ber.BitString);\n\tder.writeByte(0x00);\n\n\tder.startSequence();\n\tder.writeBuffer(key.part.n.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.e.data, asn1.Ber.Integer);\n\tder.endSequence();\n\n\tder.endSequence();\n}\n\nfunction writePkcs8DSAPrivate(key, der) {\n\tder.startSequence();\n\tder.writeBuffer(key.part.p.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.q.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.g.data, asn1.Ber.Integer);\n\tder.endSequence();\n\n\tder.endSequence();\n\n\tder.startSequence(asn1.Ber.OctetString);\n\tder.writeBuffer(key.part.x.data, asn1.Ber.Integer);\n\tder.endSequence();\n}\n\nfunction writePkcs8DSAPublic(key, der) {\n\tder.startSequence();\n\tder.writeBuffer(key.part.p.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.q.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.g.data, asn1.Ber.Integer);\n\tder.endSequence();\n\tder.endSequence();\n\n\tder.startSequence(asn1.Ber.BitString);\n\tder.writeByte(0x00);\n\tder.writeBuffer(key.part.y.data, asn1.Ber.Integer);\n\tder.endSequence();\n}\n\nfunction writeECDSACurve(key, der) {\n\tvar curve = algs.curves[key.curve];\n\tif (curve.pkcs8oid) {\n\t\t/* This one has a name in pkcs#8, so just write the oid */\n\t\tder.writeOID(curve.pkcs8oid);\n\n\t} else {\n\t\t// ECParameters sequence\n\t\tder.startSequence();\n\n\t\tvar version = Buffer.from([1]);\n\t\tder.writeBuffer(version, asn1.Ber.Integer);\n\n\t\t// FieldID sequence\n\t\tder.startSequence();\n\t\tder.writeOID('1.2.840.10045.1.1'); // prime-field\n\t\tder.writeBuffer(curve.p, asn1.Ber.Integer);\n\t\tder.endSequence();\n\n\t\t// Curve sequence\n\t\tder.startSequence();\n\t\tvar a = curve.p;\n\t\tif (a[0] === 0x0)\n\t\t\ta = a.slice(1);\n\t\tder.writeBuffer(a, asn1.Ber.OctetString);\n\t\tder.writeBuffer(curve.b, asn1.Ber.OctetString);\n\t\tder.writeBuffer(curve.s, asn1.Ber.BitString);\n\t\tder.endSequence();\n\n\t\tder.writeBuffer(curve.G, asn1.Ber.OctetString);\n\t\tder.writeBuffer(curve.n, asn1.Ber.Integer);\n\t\tvar h = curve.h;\n\t\tif (!h) {\n\t\t\th = Buffer.from([1]);\n\t\t}\n\t\tder.writeBuffer(h, asn1.Ber.Integer);\n\n\t\t// ECParameters\n\t\tder.endSequence();\n\t}\n}\n\nfunction writePkcs8ECDSAPublic(key, der) {\n\twriteECDSACurve(key, der);\n\tder.endSequence();\n\n\tvar Q = utils.ecNormalize(key.part.Q.data, true);\n\tder.writeBuffer(Q, asn1.Ber.BitString);\n}\n\nfunction writePkcs8ECDSAPrivate(key, der) {\n\twriteECDSACurve(key, der);\n\tder.endSequence();\n\n\tder.startSequence(asn1.Ber.OctetString);\n\tder.startSequence();\n\n\tvar version = Buffer.from([1]);\n\tder.writeBuffer(version, asn1.Ber.Integer);\n\n\tder.writeBuffer(key.part.d.data, asn1.Ber.OctetString);\n\n\tder.startSequence(0xa1);\n\tvar Q = utils.ecNormalize(key.part.Q.data, true);\n\tder.writeBuffer(Q, asn1.Ber.BitString);\n\tder.endSequence();\n\n\tder.endSequence();\n\tder.endSequence();\n}\n\nfunction writePkcs8EdDSAPublic(key, der) {\n\tder.endSequence();\n\n\tutils.writeBitString(der, key.part.A.data);\n}\n\nfunction writePkcs8EdDSAPrivate(key, der) {\n\tder.endSequence();\n\n\tvar k = utils.mpNormalize(key.part.k.data, true);\n\tder.startSequence(asn1.Ber.OctetString);\n\tder.writeBuffer(k, asn1.Ber.OctetString);\n\tder.endSequence();\n}\n", "// Copyright 2015 Joyent, Inc.\n\nmodule.exports = {\n\tread: read,\n\treadPkcs1: readPkcs1,\n\twrite: write,\n\twritePkcs1: writePkcs1\n};\n\nvar assert = require('assert-plus');\nvar asn1 = require('asn1');\nvar Buffer = require('safer-buffer').Buffer;\nvar algs = require('../algs');\nvar utils = require('../utils');\n\nvar Key = require('../key');\nvar PrivateKey = require('../private-key');\nvar pem = require('./pem');\n\nvar pkcs8 = require('./pkcs8');\nvar readECDSACurve = pkcs8.readECDSACurve;\n\nfunction read(buf, options) {\n\treturn (pem.read(buf, options, 'pkcs1'));\n}\n\nfunction write(key, options) {\n\treturn (pem.write(key, options, 'pkcs1'));\n}\n\n/* Helper to read in a single mpint */\nfunction readMPInt(der, nm) {\n\tassert.strictEqual(der.peek(), asn1.Ber.Integer,\n\t    nm + ' is not an Integer');\n\treturn (utils.mpNormalize(der.readString(asn1.Ber.Integer, true)));\n}\n\nfunction readPkcs1(alg, type, der) {\n\tswitch (alg) {\n\tcase 'RSA':\n\t\tif (type === 'public')\n\t\t\treturn (readPkcs1RSAPublic(der));\n\t\telse if (type === 'private')\n\t\t\treturn (readPkcs1RSAPrivate(der));\n\t\tthrow (new Error('Unknown key type: ' + type));\n\tcase 'DSA':\n\t\tif (type === 'public')\n\t\t\treturn (readPkcs1DSAPublic(der));\n\t\telse if (type === 'private')\n\t\t\treturn (readPkcs1DSAPrivate(der));\n\t\tthrow (new Error('Unknown key type: ' + type));\n\tcase 'EC':\n\tcase 'ECDSA':\n\t\tif (type === 'private')\n\t\t\treturn (readPkcs1ECDSAPrivate(der));\n\t\telse if (type === 'public')\n\t\t\treturn (readPkcs1ECDSAPublic(der));\n\t\tthrow (new Error('Unknown key type: ' + type));\n\tcase 'EDDSA':\n\tcase 'EdDSA':\n\t\tif (type === 'private')\n\t\t\treturn (readPkcs1EdDSAPrivate(der));\n\t\tthrow (new Error(type + ' keys not supported with EdDSA'));\n\tdefault:\n\t\tthrow (new Error('Unknown key algo: ' + alg));\n\t}\n}\n\nfunction readPkcs1RSAPublic(der) {\n\t// modulus and exponent\n\tvar n = readMPInt(der, 'modulus');\n\tvar e = readMPInt(der, 'exponent');\n\n\t// now, make the key\n\tvar key = {\n\t\ttype: 'rsa',\n\t\tparts: [\n\t\t\t{ name: 'e', data: e },\n\t\t\t{ name: 'n', data: n }\n\t\t]\n\t};\n\n\treturn (new Key(key));\n}\n\nfunction readPkcs1RSAPrivate(der) {\n\tvar version = readMPInt(der, 'version');\n\tassert.strictEqual(version[0], 0);\n\n\t// modulus then public exponent\n\tvar n = readMPInt(der, 'modulus');\n\tvar e = readMPInt(der, 'public exponent');\n\tvar d = readMPInt(der, 'private exponent');\n\tvar p = readMPInt(der, 'prime1');\n\tvar q = readMPInt(der, 'prime2');\n\tvar dmodp = readMPInt(der, 'exponent1');\n\tvar dmodq = readMPInt(der, 'exponent2');\n\tvar iqmp = readMPInt(der, 'iqmp');\n\n\t// now, make the key\n\tvar key = {\n\t\ttype: 'rsa',\n\t\tparts: [\n\t\t\t{ name: 'n', data: n },\n\t\t\t{ name: 'e', data: e },\n\t\t\t{ name: 'd', data: d },\n\t\t\t{ name: 'iqmp', data: iqmp },\n\t\t\t{ name: 'p', data: p },\n\t\t\t{ name: 'q', data: q },\n\t\t\t{ name: 'dmodp', data: dmodp },\n\t\t\t{ name: 'dmodq', data: dmodq }\n\t\t]\n\t};\n\n\treturn (new PrivateKey(key));\n}\n\nfunction readPkcs1DSAPrivate(der) {\n\tvar version = readMPInt(der, 'version');\n\tassert.strictEqual(version.readUInt8(0), 0);\n\n\tvar p = readMPInt(der, 'p');\n\tvar q = readMPInt(der, 'q');\n\tvar g = readMPInt(der, 'g');\n\tvar y = readMPInt(der, 'y');\n\tvar x = readMPInt(der, 'x');\n\n\t// now, make the key\n\tvar key = {\n\t\ttype: 'dsa',\n\t\tparts: [\n\t\t\t{ name: 'p', data: p },\n\t\t\t{ name: 'q', data: q },\n\t\t\t{ name: 'g', data: g },\n\t\t\t{ name: 'y', data: y },\n\t\t\t{ name: 'x', data: x }\n\t\t]\n\t};\n\n\treturn (new PrivateKey(key));\n}\n\nfunction readPkcs1EdDSAPrivate(der) {\n\tvar version = readMPInt(der, 'version');\n\tassert.strictEqual(version.readUInt8(0), 1);\n\n\t// private key\n\tvar k = der.readString(asn1.Ber.OctetString, true);\n\n\tder.readSequence(0xa0);\n\tvar oid = der.readOID();\n\tassert.strictEqual(oid, '1.3.101.112', 'the ed25519 curve identifier');\n\n\tder.readSequence(0xa1);\n\tvar A = utils.readBitString(der);\n\n\tvar key = {\n\t\ttype: 'ed25519',\n\t\tparts: [\n\t\t\t{ name: 'A', data: utils.zeroPadToLength(A, 32) },\n\t\t\t{ name: 'k', data: k }\n\t\t]\n\t};\n\n\treturn (new PrivateKey(key));\n}\n\nfunction readPkcs1DSAPublic(der) {\n\tvar y = readMPInt(der, 'y');\n\tvar p = readMPInt(der, 'p');\n\tvar q = readMPInt(der, 'q');\n\tvar g = readMPInt(der, 'g');\n\n\tvar key = {\n\t\ttype: 'dsa',\n\t\tparts: [\n\t\t\t{ name: 'y', data: y },\n\t\t\t{ name: 'p', data: p },\n\t\t\t{ name: 'q', data: q },\n\t\t\t{ name: 'g', data: g }\n\t\t]\n\t};\n\n\treturn (new Key(key));\n}\n\nfunction readPkcs1ECDSAPublic(der) {\n\tder.readSequence();\n\n\tvar oid = der.readOID();\n\tassert.strictEqual(oid, '1.2.840.10045.2.1', 'must be ecPublicKey');\n\n\tvar curveOid = der.readOID();\n\n\tvar curve;\n\tvar curves = Object.keys(algs.curves);\n\tfor (var j = 0; j < curves.length; ++j) {\n\t\tvar c = curves[j];\n\t\tvar cd = algs.curves[c];\n\t\tif (cd.pkcs8oid === curveOid) {\n\t\t\tcurve = c;\n\t\t\tbreak;\n\t\t}\n\t}\n\tassert.string(curve, 'a known ECDSA named curve');\n\n\tvar Q = der.readString(asn1.Ber.BitString, true);\n\tQ = utils.ecNormalize(Q);\n\n\tvar key = {\n\t\ttype: 'ecdsa',\n\t\tparts: [\n\t\t\t{ name: 'curve', data: Buffer.from(curve) },\n\t\t\t{ name: 'Q', data: Q }\n\t\t]\n\t};\n\n\treturn (new Key(key));\n}\n\nfunction readPkcs1ECDSAPrivate(der) {\n\tvar version = readMPInt(der, 'version');\n\tassert.strictEqual(version.readUInt8(0), 1);\n\n\t// private key\n\tvar d = der.readString(asn1.Ber.OctetString, true);\n\n\tder.readSequence(0xa0);\n\tvar curve = readECDSACurve(der);\n\tassert.string(curve, 'a known elliptic curve');\n\n\tder.readSequence(0xa1);\n\tvar Q = der.readString(asn1.Ber.BitString, true);\n\tQ = utils.ecNormalize(Q);\n\n\tvar key = {\n\t\ttype: 'ecdsa',\n\t\tparts: [\n\t\t\t{ name: 'curve', data: Buffer.from(curve) },\n\t\t\t{ name: 'Q', data: Q },\n\t\t\t{ name: 'd', data: d }\n\t\t]\n\t};\n\n\treturn (new PrivateKey(key));\n}\n\nfunction writePkcs1(der, key) {\n\tder.startSequence();\n\n\tswitch (key.type) {\n\tcase 'rsa':\n\t\tif (PrivateKey.isPrivateKey(key))\n\t\t\twritePkcs1RSAPrivate(der, key);\n\t\telse\n\t\t\twritePkcs1RSAPublic(der, key);\n\t\tbreak;\n\tcase 'dsa':\n\t\tif (PrivateKey.isPrivateKey(key))\n\t\t\twritePkcs1DSAPrivate(der, key);\n\t\telse\n\t\t\twritePkcs1DSAPublic(der, key);\n\t\tbreak;\n\tcase 'ecdsa':\n\t\tif (PrivateKey.isPrivateKey(key))\n\t\t\twritePkcs1ECDSAPrivate(der, key);\n\t\telse\n\t\t\twritePkcs1ECDSAPublic(der, key);\n\t\tbreak;\n\tcase 'ed25519':\n\t\tif (PrivateKey.isPrivateKey(key))\n\t\t\twritePkcs1EdDSAPrivate(der, key);\n\t\telse\n\t\t\twritePkcs1EdDSAPublic(der, key);\n\t\tbreak;\n\tdefault:\n\t\tthrow (new Error('Unknown key algo: ' + key.type));\n\t}\n\n\tder.endSequence();\n}\n\nfunction writePkcs1RSAPublic(der, key) {\n\tder.writeBuffer(key.part.n.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.e.data, asn1.Ber.Integer);\n}\n\nfunction writePkcs1RSAPrivate(der, key) {\n\tvar ver = Buffer.from([0]);\n\tder.writeBuffer(ver, asn1.Ber.Integer);\n\n\tder.writeBuffer(key.part.n.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.e.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.d.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.p.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.q.data, asn1.Ber.Integer);\n\tif (!key.part.dmodp || !key.part.dmodq)\n\t\tutils.addRSAMissing(key);\n\tder.writeBuffer(key.part.dmodp.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.dmodq.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.iqmp.data, asn1.Ber.Integer);\n}\n\nfunction writePkcs1DSAPrivate(der, key) {\n\tvar ver = Buffer.from([0]);\n\tder.writeBuffer(ver, asn1.Ber.Integer);\n\n\tder.writeBuffer(key.part.p.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.q.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.g.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.y.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.x.data, asn1.Ber.Integer);\n}\n\nfunction writePkcs1DSAPublic(der, key) {\n\tder.writeBuffer(key.part.y.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.p.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.q.data, asn1.Ber.Integer);\n\tder.writeBuffer(key.part.g.data, asn1.Ber.Integer);\n}\n\nfunction writePkcs1ECDSAPublic(der, key) {\n\tder.startSequence();\n\n\tder.writeOID('1.2.840.10045.2.1'); /* ecPublicKey */\n\tvar curve = key.part.curve.data.toString();\n\tvar curveOid = algs.curves[curve].pkcs8oid;\n\tassert.string(curveOid, 'a known ECDSA named curve');\n\tder.writeOID(curveOid);\n\n\tder.endSequence();\n\n\tvar Q = utils.ecNormalize(key.part.Q.data, true);\n\tder.writeBuffer(Q, asn1.Ber.BitString);\n}\n\nfunction writePkcs1ECDSAPrivate(der, key) {\n\tvar ver = Buffer.from([1]);\n\tder.writeBuffer(ver, asn1.Ber.Integer);\n\n\tder.writeBuffer(key.part.d.data, asn1.Ber.OctetString);\n\n\tder.startSequence(0xa0);\n\tvar curve = key.part.curve.data.toString();\n\tvar curveOid = algs.curves[curve].pkcs8oid;\n\tassert.string(curveOid, 'a known ECDSA named curve');\n\tder.writeOID(curveOid);\n\tder.endSequence();\n\n\tder.startSequence(0xa1);\n\tvar Q = utils.ecNormalize(key.part.Q.data, true);\n\tder.writeBuffer(Q, asn1.Ber.BitString);\n\tder.endSequence();\n}\n\nfunction writePkcs1EdDSAPrivate(der, key) {\n\tvar ver = Buffer.from([1]);\n\tder.writeBuffer(ver, asn1.Ber.Integer);\n\n\tder.writeBuffer(key.part.k.data, asn1.Ber.OctetString);\n\n\tder.startSequence(0xa0);\n\tder.writeOID('1.3.101.112');\n\tder.endSequence();\n\n\tder.startSequence(0xa1);\n\tutils.writeBitString(der, key.part.A.data);\n\tder.endSequence();\n}\n\nfunction writePkcs1EdDSAPublic(der, key) {\n\tthrow (new Error('Public keys are not supported for EdDSA PKCS#1'));\n}\n", "// Copyright 2015 Joyent, Inc.\n\nmodule.exports = {\n\tread: read.bind(undefined, false, undefined),\n\treadType: read.bind(undefined, false),\n\twrite: write,\n\t/* semi-private api, used by sshpk-agent */\n\treadPartial: read.bind(undefined, true),\n\n\t/* shared with ssh format */\n\treadInternal: read,\n\tkeyTypeToAlg: keyTypeToAlg,\n\talgToKeyType: algToKeyType\n};\n\nvar assert = require('assert-plus');\nvar Buffer = require('safer-buffer').Buffer;\nvar algs = require('../algs');\nvar utils = require('../utils');\nvar Key = require('../key');\nvar PrivateKey = require('../private-key');\nvar SSHBuffer = require('../ssh-buffer');\n\nfunction algToKeyType(alg) {\n\tassert.string(alg);\n\tif (alg === 'ssh-dss')\n\t\treturn ('dsa');\n\telse if (alg === 'ssh-rsa')\n\t\treturn ('rsa');\n\telse if (alg === 'ssh-ed25519')\n\t\treturn ('ed25519');\n\telse if (alg === 'ssh-curve25519')\n\t\treturn ('curve25519');\n\telse if (alg.match(/^ecdsa-sha2-/))\n\t\treturn ('ecdsa');\n\telse\n\t\tthrow (new Error('Unknown algorithm ' + alg));\n}\n\nfunction keyTypeToAlg(key) {\n\tassert.object(key);\n\tif (key.type === 'dsa')\n\t\treturn ('ssh-dss');\n\telse if (key.type === 'rsa')\n\t\treturn ('ssh-rsa');\n\telse if (key.type === 'ed25519')\n\t\treturn ('ssh-ed25519');\n\telse if (key.type === 'curve25519')\n\t\treturn ('ssh-curve25519');\n\telse if (key.type === 'ecdsa')\n\t\treturn ('ecdsa-sha2-' + key.part.curve.data.toString());\n\telse\n\t\tthrow (new Error('Unknown key type ' + key.type));\n}\n\nfunction read(partial, type, buf, options) {\n\tif (typeof (buf) === 'string')\n\t\tbuf = Buffer.from(buf);\n\tassert.buffer(buf, 'buf');\n\n\tvar key = {};\n\n\tvar parts = key.parts = [];\n\tvar sshbuf = new SSHBuffer({buffer: buf});\n\n\tvar alg = sshbuf.readString();\n\tassert.ok(!sshbuf.atEnd(), 'key must have at least one part');\n\n\tkey.type = algToKeyType(alg);\n\n\tvar partCount = algs.info[key.type].parts.length;\n\tif (type && type === 'private')\n\t\tpartCount = algs.privInfo[key.type].parts.length;\n\n\twhile (!sshbuf.atEnd() && parts.length < partCount)\n\t\tparts.push(sshbuf.readPart());\n\twhile (!partial && !sshbuf.atEnd())\n\t\tparts.push(sshbuf.readPart());\n\n\tassert.ok(parts.length >= 1,\n\t    'key must have at least one part');\n\tassert.ok(partial || sshbuf.atEnd(),\n\t    'leftover bytes at end of key');\n\n\tvar Constructor = Key;\n\tvar algInfo = algs.info[key.type];\n\tif (type === 'private' || algInfo.parts.length !== parts.length) {\n\t\talgInfo = algs.privInfo[key.type];\n\t\tConstructor = PrivateKey;\n\t}\n\tassert.strictEqual(algInfo.parts.length, parts.length);\n\n\tif (key.type === 'ecdsa') {\n\t\tvar res = /^ecdsa-sha2-(.+)$/.exec(alg);\n\t\tassert.ok(res !== null);\n\t\tassert.strictEqual(res[1], parts[0].data.toString());\n\t}\n\n\tvar normalized = true;\n\tfor (var i = 0; i < algInfo.parts.length; ++i) {\n\t\tvar p = parts[i];\n\t\tp.name = algInfo.parts[i];\n\t\t/*\n\t\t * OpenSSH stores ed25519 \"private\" keys as seed + public key\n\t\t * concat'd together (k followed by A). We want to keep them\n\t\t * separate for other formats that don't do this.\n\t\t */\n\t\tif (key.type === 'ed25519' && p.name === 'k')\n\t\t\tp.data = p.data.slice(0, 32);\n\n\t\tif (p.name !== 'curve' && algInfo.normalize !== false) {\n\t\t\tvar nd;\n\t\t\tif (key.type === 'ed25519') {\n\t\t\t\tnd = utils.zeroPadToLength(p.data, 32);\n\t\t\t} else {\n\t\t\t\tnd = utils.mpNormalize(p.data);\n\t\t\t}\n\t\t\tif (nd.toString('binary') !==\n\t\t\t    p.data.toString('binary')) {\n\t\t\t\tp.data = nd;\n\t\t\t\tnormalized = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (normalized)\n\t\tkey._rfc4253Cache = sshbuf.toBuffer();\n\n\tif (partial && typeof (partial) === 'object') {\n\t\tpartial.remainder = sshbuf.remainder();\n\t\tpartial.consumed = sshbuf._offset;\n\t}\n\n\treturn (new Constructor(key));\n}\n\nfunction write(key, options) {\n\tassert.object(key);\n\n\tvar alg = keyTypeToAlg(key);\n\tvar i;\n\n\tvar algInfo = algs.info[key.type];\n\tif (PrivateKey.isPrivateKey(key))\n\t\talgInfo = algs.privInfo[key.type];\n\tvar parts = algInfo.parts;\n\n\tvar buf = new SSHBuffer({});\n\n\tbuf.writeString(alg);\n\n\tfor (i = 0; i < parts.length; ++i) {\n\t\tvar data = key.part[parts[i]].data;\n\t\tif (algInfo.normalize !== false) {\n\t\t\tif (key.type === 'ed25519')\n\t\t\t\tdata = utils.zeroPadToLength(data, 32);\n\t\t\telse\n\t\t\t\tdata = utils.mpNormalize(data);\n\t\t}\n\t\tif (key.type === 'ed25519' && parts[i] === 'k')\n\t\t\tdata = Buffer.concat([data, key.part.A.data]);\n\t\tbuf.writeBuffer(data);\n\t}\n\n\treturn (buf.toBuffer());\n}\n", "'use strict';\n\nvar crypto_hash_sha512 = require('tweetnacl').lowlevel.crypto_hash;\n\n/*\n * This file is a 1:1 port from the OpenBSD blowfish.c and bcrypt_pbkdf.c. As a\n * result, it retains the original copyright and license. The two files are\n * under slightly different (but compatible) licenses, and are here combined in\n * one file.\n *\n * Credit for the actual porting work goes to:\n *  Devi Mandiri <me@devi.web.id>\n */\n\n/*\n * The Blowfish portions are under the following license:\n *\n * Blowfish block cipher for OpenBSD\n * Copyright 1997 Niels Provos <provos@physnet.uni-hamburg.de>\n * All rights reserved.\n *\n * Implementation advice by David Mazieres <dm@lcs.mit.edu>.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n * 3. The name of the author may not be used to endorse or promote products\n *    derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR\n * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\n * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,\n * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/*\n * The bcrypt_pbkdf portions are under the following license:\n *\n * Copyright (c) 2013 Ted Unangst <tedu@openbsd.org>\n *\n * Permission to use, copy, modify, and distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n */\n\n/*\n * Performance improvements (Javascript-specific):\n *\n * Copyright 2016, Joyent Inc\n * Author: Alex Wilson <alex.wilson@joyent.com>\n *\n * Permission to use, copy, modify, and distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n */\n\n// Ported from OpenBSD bcrypt_pbkdf.c v1.9\n\nvar BLF_J = 0;\n\nvar Blowfish = function() {\n  this.S = [\n    new Uint32Array([\n      0xd1310ba6, 0x98dfb5ac, 0x2ffd72db, 0xd01adfb7,\n      0xb8e1afed, 0x6a267e96, 0xba7c9045, 0xf12c7f99,\n      0x24a19947, 0xb3916cf7, 0x0801f2e2, 0x858efc16,\n      0x636920d8, 0x71574e69, 0xa458fea3, 0xf4933d7e,\n      0x0d95748f, 0x728eb658, 0x718bcd58, 0x82154aee,\n      0x7b54a41d, 0xc25a59b5, 0x9c30d539, 0x2af26013,\n      0xc5d1b023, 0x286085f0, 0xca417918, 0xb8db38ef,\n      0x8e79dcb0, 0x603a180e, 0x6c9e0e8b, 0xb01e8a3e,\n      0xd71577c1, 0xbd314b27, 0x78af2fda, 0x55605c60,\n      0xe65525f3, 0xaa55ab94, 0x57489862, 0x63e81440,\n      0x55ca396a, 0x2aab10b6, 0xb4cc5c34, 0x1141e8ce,\n      0xa15486af, 0x7c72e993, 0xb3ee1411, 0x636fbc2a,\n      0x2ba9c55d, 0x741831f6, 0xce5c3e16, 0x9b87931e,\n      0xafd6ba33, 0x6c24cf5c, 0x7a325381, 0x28958677,\n      0x3b8f4898, 0x6b4bb9af, 0xc4bfe81b, 0x66282193,\n      0x61d809cc, 0xfb21a991, 0x487cac60, 0x5dec8032,\n      0xef845d5d, 0xe98575b1, 0xdc262302, 0xeb651b88,\n      0x23893e81, 0xd396acc5, 0x0f6d6ff3, 0x83f44239,\n      0x2e0b4482, 0xa4842004, 0x69c8f04a, 0x9e1f9b5e,\n      0x21c66842, 0xf6e96c9a, 0x670c9c61, 0xabd388f0,\n      0x6a51a0d2, 0xd8542f68, 0x960fa728, 0xab5133a3,\n      0x6eef0b6c, 0x137a3be4, 0xba3bf050, 0x7efb2a98,\n      0xa1f1651d, 0x39af0176, 0x66ca593e, 0x82430e88,\n      0x8cee8619, 0x456f9fb4, 0x7d84a5c3, 0x3b8b5ebe,\n      0xe06f75d8, 0x85c12073, 0x401a449f, 0x56c16aa6,\n      0x4ed3aa62, 0x363f7706, 0x1bfedf72, 0x429b023d,\n      0x37d0d724, 0xd00a1248, 0xdb0fead3, 0x49f1c09b,\n      0x075372c9, 0x80991b7b, 0x25d479d8, 0xf6e8def7,\n      0xe3fe501a, 0xb6794c3b, 0x976ce0bd, 0x04c006ba,\n      0xc1a94fb6, 0x409f60c4, 0x5e5c9ec2, 0x196a2463,\n      0x68fb6faf, 0x3e6c53b5, 0x1339b2eb, 0x3b52ec6f,\n      0x6dfc511f, 0x9b30952c, 0xcc814544, 0xaf5ebd09,\n      0xbee3d004, 0xde334afd, 0x660f2807, 0x192e4bb3,\n      0xc0cba857, 0x45c8740f, 0xd20b5f39, 0xb9d3fbdb,\n      0x5579c0bd, 0x1a60320a, 0xd6a100c6, 0x402c7279,\n      0x679f25fe, 0xfb1fa3cc, 0x8ea5e9f8, 0xdb3222f8,\n      0x3c7516df, 0xfd616b15, 0x2f501ec8, 0xad0552ab,\n      0x323db5fa, 0xfd238760, 0x53317b48, 0x3e00df82,\n      0x9e5c57bb, 0xca6f8ca0, 0x1a87562e, 0xdf1769db,\n      0xd542a8f6, 0x287effc3, 0xac6732c6, 0x8c4f5573,\n      0x695b27b0, 0xbbca58c8, 0xe1ffa35d, 0xb8f011a0,\n      0x10fa3d98, 0xfd2183b8, 0x4afcb56c, 0x2dd1d35b,\n      0x9a53e479, 0xb6f84565, 0xd28e49bc, 0x4bfb9790,\n      0xe1ddf2da, 0xa4cb7e33, 0x62fb1341, 0xcee4c6e8,\n      0xef20cada, 0x36774c01, 0xd07e9efe, 0x2bf11fb4,\n      0x95dbda4d, 0xae909198, 0xeaad8e71, 0x6b93d5a0,\n      0xd08ed1d0, 0xafc725e0, 0x8e3c5b2f, 0x8e7594b7,\n      0x8ff6e2fb, 0xf2122b64, 0x8888b812, 0x900df01c,\n      0x4fad5ea0, 0x688fc31c, 0xd1cff191, 0xb3a8c1ad,\n      0x2f2f2218, 0xbe0e1777, 0xea752dfe, 0x8b021fa1,\n      0xe5a0cc0f, 0xb56f74e8, 0x18acf3d6, 0xce89e299,\n      0xb4a84fe0, 0xfd13e0b7, 0x7cc43b81, 0xd2ada8d9,\n      0x165fa266, 0x80957705, 0x93cc7314, 0x211a1477,\n      0xe6ad2065, 0x77b5fa86, 0xc75442f5, 0xfb9d35cf,\n      0xebcdaf0c, 0x7b3e89a0, 0xd6411bd3, 0xae1e7e49,\n      0x00250e2d, 0x2071b35e, 0x226800bb, 0x57b8e0af,\n      0x2464369b, 0xf009b91e, 0x5563911d, 0x59dfa6aa,\n      0x78c14389, 0xd95a537f, 0x207d5ba2, 0x02e5b9c5,\n      0x83260376, 0x6295cfa9, 0x11c81968, 0x4e734a41,\n      0xb3472dca, 0x7b14a94a, 0x1b510052, 0x9a532915,\n      0xd60f573f, 0xbc9bc6e4, 0x2b60a476, 0x81e67400,\n      0x08ba6fb5, 0x571be91f, 0xf296ec6b, 0x2a0dd915,\n      0xb6636521, 0xe7b9f9b6, 0xff34052e, 0xc5855664,\n      0x53b02d5d, 0xa99f8fa1, 0x08ba4799, 0x6e85076a]),\n    new Uint32Array([\n      0x4b7a70e9, 0xb5b32944, 0xdb75092e, 0xc4192623,\n      0xad6ea6b0, 0x49a7df7d, 0x9cee60b8, 0x8fedb266,\n      0xecaa8c71, 0x699a17ff, 0x5664526c, 0xc2b19ee1,\n      0x193602a5, 0x75094c29, 0xa0591340, 0xe4183a3e,\n      0x3f54989a, 0x5b429d65, 0x6b8fe4d6, 0x99f73fd6,\n      0xa1d29c07, 0xefe830f5, 0x4d2d38e6, 0xf0255dc1,\n      0x4cdd2086, 0x8470eb26, 0x6382e9c6, 0x021ecc5e,\n      0x09686b3f, 0x3ebaefc9, 0x3c971814, 0x6b6a70a1,\n      0x687f3584, 0x52a0e286, 0xb79c5305, 0xaa500737,\n      0x3e07841c, 0x7fdeae5c, 0x8e7d44ec, 0x5716f2b8,\n      0xb03ada37, 0xf0500c0d, 0xf01c1f04, 0x0200b3ff,\n      0xae0cf51a, 0x3cb574b2, 0x25837a58, 0xdc0921bd,\n      0xd19113f9, 0x7ca92ff6, 0x94324773, 0x22f54701,\n      0x3ae5e581, 0x37c2dadc, 0xc8b57634, 0x9af3dda7,\n      0xa9446146, 0x0fd0030e, 0xecc8c73e, 0xa4751e41,\n      0xe238cd99, 0x3bea0e2f, 0x3280bba1, 0x183eb331,\n      0x4e548b38, 0x4f6db908, 0x6f420d03, 0xf60a04bf,\n      0x2cb81290, 0x24977c79, 0x5679b072, 0xbcaf89af,\n      0xde9a771f, 0xd9930810, 0xb38bae12, 0xdccf3f2e,\n      0x5512721f, 0x2e6b7124, 0x501adde6, 0x9f84cd87,\n      0x7a584718, 0x7408da17, 0xbc9f9abc, 0xe94b7d8c,\n      0xec7aec3a, 0xdb851dfa, 0x63094366, 0xc464c3d2,\n      0xef1c1847, 0x3215d908, 0xdd433b37, 0x24c2ba16,\n      0x12a14d43, 0x2a65c451, 0x50940002, 0x133ae4dd,\n      0x71dff89e, 0x10314e55, 0x81ac77d6, 0x5f11199b,\n      0x043556f1, 0xd7a3c76b, 0x3c11183b, 0x5924a509,\n      0xf28fe6ed, 0x97f1fbfa, 0x9ebabf2c, 0x1e153c6e,\n      0x86e34570, 0xeae96fb1, 0x860e5e0a, 0x5a3e2ab3,\n      0x771fe71c, 0x4e3d06fa, 0x2965dcb9, 0x99e71d0f,\n      0x803e89d6, 0x5266c825, 0x2e4cc978, 0x9c10b36a,\n      0xc6150eba, 0x94e2ea78, 0xa5fc3c53, 0x1e0a2df4,\n      0xf2f74ea7, 0x361d2b3d, 0x1939260f, 0x19c27960,\n      0x5223a708, 0xf71312b6, 0xebadfe6e, 0xeac31f66,\n      0xe3bc4595, 0xa67bc883, 0xb17f37d1, 0x018cff28,\n      0xc332ddef, 0xbe6c5aa5, 0x65582185, 0x68ab9802,\n      0xeecea50f, 0xdb2f953b, 0x2aef7dad, 0x5b6e2f84,\n      0x1521b628, 0x29076170, 0xecdd4775, 0x619f1510,\n      0x13cca830, 0xeb61bd96, 0x0334fe1e, 0xaa0363cf,\n      0xb5735c90, 0x4c70a239, 0xd59e9e0b, 0xcbaade14,\n      0xeecc86bc, 0x60622ca7, 0x9cab5cab, 0xb2f3846e,\n      0x648b1eaf, 0x19bdf0ca, 0xa02369b9, 0x655abb50,\n      0x40685a32, 0x3c2ab4b3, 0x319ee9d5, 0xc021b8f7,\n      0x9b540b19, 0x875fa099, 0x95f7997e, 0x623d7da8,\n      0xf837889a, 0x97e32d77, 0x11ed935f, 0x16681281,\n      0x0e358829, 0xc7e61fd6, 0x96dedfa1, 0x7858ba99,\n      0x57f584a5, 0x1b227263, 0x9b83c3ff, 0x1ac24696,\n      0xcdb30aeb, 0x532e3054, 0x8fd948e4, 0x6dbc3128,\n      0x58ebf2ef, 0x34c6ffea, 0xfe28ed61, 0xee7c3c73,\n      0x5d4a14d9, 0xe864b7e3, 0x42105d14, 0x203e13e0,\n      0x45eee2b6, 0xa3aaabea, 0xdb6c4f15, 0xfacb4fd0,\n      0xc742f442, 0xef6abbb5, 0x654f3b1d, 0x41cd2105,\n      0xd81e799e, 0x86854dc7, 0xe44b476a, 0x3d816250,\n      0xcf62a1f2, 0x5b8d2646, 0xfc8883a0, 0xc1c7b6a3,\n      0x7f1524c3, 0x69cb7492, 0x47848a0b, 0x5692b285,\n      0x095bbf00, 0xad19489d, 0x1462b174, 0x23820e00,\n      0x58428d2a, 0x0c55f5ea, 0x1dadf43e, 0x233f7061,\n      0x3372f092, 0x8d937e41, 0xd65fecf1, 0x6c223bdb,\n      0x7cde3759, 0xcbee7460, 0x4085f2a7, 0xce77326e,\n      0xa6078084, 0x19f8509e, 0xe8efd855, 0x61d99735,\n      0xa969a7aa, 0xc50c06c2, 0x5a04abfc, 0x800bcadc,\n      0x9e447a2e, 0xc3453484, 0xfdd56705, 0x0e1e9ec9,\n      0xdb73dbd3, 0x105588cd, 0x675fda79, 0xe3674340,\n      0xc5c43465, 0x713e38d8, 0x3d28f89e, 0xf16dff20,\n      0x153e21e7, 0x8fb03d4a, 0xe6e39f2b, 0xdb83adf7]),\n    new Uint32Array([\n      0xe93d5a68, 0x948140f7, 0xf64c261c, 0x94692934,\n      0x411520f7, 0x7602d4f7, 0xbcf46b2e, 0xd4a20068,\n      0xd4082471, 0x3320f46a, 0x43b7d4b7, 0x500061af,\n      0x1e39f62e, 0x97244546, 0x14214f74, 0xbf8b8840,\n      0x4d95fc1d, 0x96b591af, 0x70f4ddd3, 0x66a02f45,\n      0xbfbc09ec, 0x03bd9785, 0x7fac6dd0, 0x31cb8504,\n      0x96eb27b3, 0x55fd3941, 0xda2547e6, 0xabca0a9a,\n      0x28507825, 0x530429f4, 0x0a2c86da, 0xe9b66dfb,\n      0x68dc1462, 0xd7486900, 0x680ec0a4, 0x27a18dee,\n      0x4f3ffea2, 0xe887ad8c, 0xb58ce006, 0x7af4d6b6,\n      0xaace1e7c, 0xd3375fec, 0xce78a399, 0x406b2a42,\n      0x20fe9e35, 0xd9f385b9, 0xee39d7ab, 0x3b124e8b,\n      0x1dc9faf7, 0x4b6d1856, 0x26a36631, 0xeae397b2,\n      0x3a6efa74, 0xdd5b4332, 0x6841e7f7, 0xca7820fb,\n      0xfb0af54e, 0xd8feb397, 0x454056ac, 0xba489527,\n      0x55533a3a, 0x20838d87, 0xfe6ba9b7, 0xd096954b,\n      0x55a867bc, 0xa1159a58, 0xcca92963, 0x99e1db33,\n      0xa62a4a56, 0x3f3125f9, 0x5ef47e1c, 0x9029317c,\n      0xfdf8e802, 0x04272f70, 0x80bb155c, 0x05282ce3,\n      0x95c11548, 0xe4c66d22, 0x48c1133f, 0xc70f86dc,\n      0x07f9c9ee, 0x41041f0f, 0x404779a4, 0x5d886e17,\n      0x325f51eb, 0xd59bc0d1, 0xf2bcc18f, 0x41113564,\n      0x257b7834, 0x602a9c60, 0xdff8e8a3, 0x1f636c1b,\n      0x0e12b4c2, 0x02e1329e, 0xaf664fd1, 0xcad18115,\n      0x6b2395e0, 0x333e92e1, 0x3b240b62, 0xeebeb922,\n      0x85b2a20e, 0xe6ba0d99, 0xde720c8c, 0x2da2f728,\n      0xd0127845, 0x95b794fd, 0x647d0862, 0xe7ccf5f0,\n      0x5449a36f, 0x877d48fa, 0xc39dfd27, 0xf33e8d1e,\n      0x0a476341, 0x992eff74, 0x3a6f6eab, 0xf4f8fd37,\n      0xa812dc60, 0xa1ebddf8, 0x991be14c, 0xdb6e6b0d,\n      0xc67b5510, 0x6d672c37, 0x2765d43b, 0xdcd0e804,\n      0xf1290dc7, 0xcc00ffa3, 0xb5390f92, 0x690fed0b,\n      0x667b9ffb, 0xcedb7d9c, 0xa091cf0b, 0xd9155ea3,\n      0xbb132f88, 0x515bad24, 0x7b9479bf, 0x763bd6eb,\n      0x37392eb3, 0xcc115979, 0x8026e297, 0xf42e312d,\n      0x6842ada7, 0xc66a2b3b, 0x12754ccc, 0x782ef11c,\n      0x6a124237, 0xb79251e7, 0x06a1bbe6, 0x4bfb6350,\n      0x1a6b1018, 0x11caedfa, 0x3d25bdd8, 0xe2e1c3c9,\n      0x44421659, 0x0a121386, 0xd90cec6e, 0xd5abea2a,\n      0x64af674e, 0xda86a85f, 0xbebfe988, 0x64e4c3fe,\n      0x9dbc8057, 0xf0f7c086, 0x60787bf8, 0x6003604d,\n      0xd1fd8346, 0xf6381fb0, 0x7745ae04, 0xd736fccc,\n      0x83426b33, 0xf01eab71, 0xb0804187, 0x3c005e5f,\n      0x77a057be, 0xbde8ae24, 0x55464299, 0xbf582e61,\n      0x4e58f48f, 0xf2ddfda2, 0xf474ef38, 0x8789bdc2,\n      0x5366f9c3, 0xc8b38e74, 0xb475f255, 0x46fcd9b9,\n      0x7aeb2661, 0x8b1ddf84, 0x846a0e79, 0x915f95e2,\n      0x466e598e, 0x20b45770, 0x8cd55591, 0xc902de4c,\n      0xb90bace1, 0xbb8205d0, 0x11a86248, 0x7574a99e,\n      0xb77f19b6, 0xe0a9dc09, 0x662d09a1, 0xc4324633,\n      0xe85a1f02, 0x09f0be8c, 0x4a99a025, 0x1d6efe10,\n      0x1ab93d1d, 0x0ba5a4df, 0xa186f20f, 0x2868f169,\n      0xdcb7da83, 0x573906fe, 0xa1e2ce9b, 0x4fcd7f52,\n      0x50115e01, 0xa70683fa, 0xa002b5c4, 0x0de6d027,\n      0x9af88c27, 0x773f8641, 0xc3604c06, 0x61a806b5,\n      0xf0177a28, 0xc0f586e0, 0x006058aa, 0x30dc7d62,\n      0x11e69ed7, 0x2338ea63, 0x53c2dd94, 0xc2c21634,\n      0xbbcbee56, 0x90bcb6de, 0xebfc7da1, 0xce591d76,\n      0x6f05e409, 0x4b7c0188, 0x39720a3d, 0x7c927c24,\n      0x86e3725f, 0x724d9db9, 0x1ac15bb4, 0xd39eb8fc,\n      0xed545578, 0x08fca5b5, 0xd83d7cd3, 0x4dad0fc4,\n      0x1e50ef5e, 0xb161e6f8, 0xa28514d9, 0x6c51133c,\n      0x6fd5c7e7, 0x56e14ec4, 0x362abfce, 0xddc6c837,\n      0xd79a3234, 0x92638212, 0x670efa8e, 0x406000e0]),\n    new Uint32Array([\n      0x3a39ce37, 0xd3faf5cf, 0xabc27737, 0x5ac52d1b,\n      0x5cb0679e, 0x4fa33742, 0xd3822740, 0x99bc9bbe,\n      0xd5118e9d, 0xbf0f7315, 0xd62d1c7e, 0xc700c47b,\n      0xb78c1b6b, 0x21a19045, 0xb26eb1be, 0x6a366eb4,\n      0x5748ab2f, 0xbc946e79, 0xc6a376d2, 0x6549c2c8,\n      0x530ff8ee, 0x468dde7d, 0xd5730a1d, 0x4cd04dc6,\n      0x2939bbdb, 0xa9ba4650, 0xac9526e8, 0xbe5ee304,\n      0xa1fad5f0, 0x6a2d519a, 0x63ef8ce2, 0x9a86ee22,\n      0xc089c2b8, 0x43242ef6, 0xa51e03aa, 0x9cf2d0a4,\n      0x83c061ba, 0x9be96a4d, 0x8fe51550, 0xba645bd6,\n      0x2826a2f9, 0xa73a3ae1, 0x4ba99586, 0xef5562e9,\n      0xc72fefd3, 0xf752f7da, 0x3f046f69, 0x77fa0a59,\n      0x80e4a915, 0x87b08601, 0x9b09e6ad, 0x3b3ee593,\n      0xe990fd5a, 0x9e34d797, 0x2cf0b7d9, 0x022b8b51,\n      0x96d5ac3a, 0x017da67d, 0xd1cf3ed6, 0x7c7d2d28,\n      0x1f9f25cf, 0xadf2b89b, 0x5ad6b472, 0x5a88f54c,\n      0xe029ac71, 0xe019a5e6, 0x47b0acfd, 0xed93fa9b,\n      0xe8d3c48d, 0x283b57cc, 0xf8d56629, 0x79132e28,\n      0x785f0191, 0xed756055, 0xf7960e44, 0xe3d35e8c,\n      0x15056dd4, 0x88f46dba, 0x03a16125, 0x0564f0bd,\n      0xc3eb9e15, 0x3c9057a2, 0x97271aec, 0xa93a072a,\n      0x1b3f6d9b, 0x1e6321f5, 0xf59c66fb, 0x26dcf319,\n      0x7533d928, 0xb155fdf5, 0x03563482, 0x8aba3cbb,\n      0x28517711, 0xc20ad9f8, 0xabcc5167, 0xccad925f,\n      0x4de81751, 0x3830dc8e, 0x379d5862, 0x9320f991,\n      0xea7a90c2, 0xfb3e7bce, 0x5121ce64, 0x774fbe32,\n      0xa8b6e37e, 0xc3293d46, 0x48de5369, 0x6413e680,\n      0xa2ae0810, 0xdd6db224, 0x69852dfd, 0x09072166,\n      0xb39a460a, 0x6445c0dd, 0x586cdecf, 0x1c20c8ae,\n      0x5bbef7dd, 0x1b588d40, 0xccd2017f, 0x6bb4e3bb,\n      0xdda26a7e, 0x3a59ff45, 0x3e350a44, 0xbcb4cdd5,\n      0x72eacea8, 0xfa6484bb, 0x8d6612ae, 0xbf3c6f47,\n      0xd29be463, 0x542f5d9e, 0xaec2771b, 0xf64e6370,\n      0x740e0d8d, 0xe75b1357, 0xf8721671, 0xaf537d5d,\n      0x4040cb08, 0x4eb4e2cc, 0x34d2466a, 0x0115af84,\n      0xe1b00428, 0x95983a1d, 0x06b89fb4, 0xce6ea048,\n      0x6f3f3b82, 0x3520ab82, 0x011a1d4b, 0x277227f8,\n      0x611560b1, 0xe7933fdc, 0xbb3a792b, 0x344525bd,\n      0xa08839e1, 0x51ce794b, 0x2f32c9b7, 0xa01fbac9,\n      0xe01cc87e, 0xbcc7d1f6, 0xcf0111c3, 0xa1e8aac7,\n      0x1a908749, 0xd44fbd9a, 0xd0dadecb, 0xd50ada38,\n      0x0339c32a, 0xc6913667, 0x8df9317c, 0xe0b12b4f,\n      0xf79e59b7, 0x43f5bb3a, 0xf2d519ff, 0x27d9459c,\n      0xbf97222c, 0x15e6fc2a, 0x0f91fc71, 0x9b941525,\n      0xfae59361, 0xceb69ceb, 0xc2a86459, 0x12baa8d1,\n      0xb6c1075e, 0xe3056a0c, 0x10d25065, 0xcb03a442,\n      0xe0ec6e0e, 0x1698db3b, 0x4c98a0be, 0x3278e964,\n      0x9f1f9532, 0xe0d392df, 0xd3a0342b, 0x8971f21e,\n      0x1b0a7441, 0x4ba3348c, 0xc5be7120, 0xc37632d8,\n      0xdf359f8d, 0x9b992f2e, 0xe60b6f47, 0x0fe3f11d,\n      0xe54cda54, 0x1edad891, 0xce6279cf, 0xcd3e7e6f,\n      0x1618b166, 0xfd2c1d05, 0x848fd2c5, 0xf6fb2299,\n      0xf523f357, 0xa6327623, 0x93a83531, 0x56cccd02,\n      0xacf08162, 0x5a75ebb5, 0x6e163697, 0x88d273cc,\n      0xde966292, 0x81b949d0, 0x4c50901b, 0x71c65614,\n      0xe6c6c7bd, 0x327a140a, 0x45e1d006, 0xc3f27b9a,\n      0xc9aa53fd, 0x62a80f00, 0xbb25bfe2, 0x35bdd2f6,\n      0x71126905, 0xb2040222, 0xb6cbcf7c, 0xcd769c2b,\n      0x53113ec0, 0x1640e3d3, 0x38abbd60, 0x2547adf0,\n      0xba38209c, 0xf746ce76, 0x77afa1c5, 0x20756060,\n      0x85cbfe4e, 0x8ae88dd8, 0x7aaaf9b0, 0x4cf9aa7e,\n      0x1948c25c, 0x02fb8a8c, 0x01c36ae4, 0xd6ebe1f9,\n      0x90d4f869, 0xa65cdea0, 0x3f09252d, 0xc208e69f,\n      0xb74e6132, 0xce77e25b, 0x578fdfe3, 0x3ac372e6])\n    ];\n  this.P = new Uint32Array([\n    0x243f6a88, 0x85a308d3, 0x13198a2e, 0x03707344,\n    0xa4093822, 0x299f31d0, 0x082efa98, 0xec4e6c89,\n    0x452821e6, 0x38d01377, 0xbe5466cf, 0x34e90c6c,\n    0xc0ac29b7, 0xc97c50dd, 0x3f84d5b5, 0xb5470917,\n    0x9216d5d9, 0x8979fb1b]);\n};\n\nfunction F(S, x8, i) {\n  return (((S[0][x8[i+3]] +\n            S[1][x8[i+2]]) ^\n            S[2][x8[i+1]]) +\n            S[3][x8[i]]);\n};\n\nBlowfish.prototype.encipher = function(x, x8) {\n  if (x8 === undefined) {\n    x8 = new Uint8Array(x.buffer);\n    if (x.byteOffset !== 0)\n      x8 = x8.subarray(x.byteOffset);\n  }\n  x[0] ^= this.P[0];\n  for (var i = 1; i < 16; i += 2) {\n    x[1] ^= F(this.S, x8, 0) ^ this.P[i];\n    x[0] ^= F(this.S, x8, 4) ^ this.P[i+1];\n  }\n  var t = x[0];\n  x[0] = x[1] ^ this.P[17];\n  x[1] = t;\n};\n\nBlowfish.prototype.decipher = function(x) {\n  var x8 = new Uint8Array(x.buffer);\n  if (x.byteOffset !== 0)\n    x8 = x8.subarray(x.byteOffset);\n  x[0] ^= this.P[17];\n  for (var i = 16; i > 0; i -= 2) {\n    x[1] ^= F(this.S, x8, 0) ^ this.P[i];\n    x[0] ^= F(this.S, x8, 4) ^ this.P[i-1];\n  }\n  var t = x[0];\n  x[0] = x[1] ^ this.P[0];\n  x[1] = t;\n};\n\nfunction stream2word(data, databytes){\n  var i, temp = 0;\n  for (i = 0; i < 4; i++, BLF_J++) {\n    if (BLF_J >= databytes) BLF_J = 0;\n    temp = (temp << 8) | data[BLF_J];\n  }\n  return temp;\n};\n\nBlowfish.prototype.expand0state = function(key, keybytes) {\n  var d = new Uint32Array(2), i, k;\n  var d8 = new Uint8Array(d.buffer);\n\n  for (i = 0, BLF_J = 0; i < 18; i++) {\n    this.P[i] ^= stream2word(key, keybytes);\n  }\n  BLF_J = 0;\n\n  for (i = 0; i < 18; i += 2) {\n    this.encipher(d, d8);\n    this.P[i]   = d[0];\n    this.P[i+1] = d[1];\n  }\n\n  for (i = 0; i < 4; i++) {\n    for (k = 0; k < 256; k += 2) {\n      this.encipher(d, d8);\n      this.S[i][k]   = d[0];\n      this.S[i][k+1] = d[1];\n    }\n  }\n};\n\nBlowfish.prototype.expandstate = function(data, databytes, key, keybytes) {\n  var d = new Uint32Array(2), i, k;\n\n  for (i = 0, BLF_J = 0; i < 18; i++) {\n    this.P[i] ^= stream2word(key, keybytes);\n  }\n\n  for (i = 0, BLF_J = 0; i < 18; i += 2) {\n    d[0] ^= stream2word(data, databytes);\n    d[1] ^= stream2word(data, databytes);\n    this.encipher(d);\n    this.P[i]   = d[0];\n    this.P[i+1] = d[1];\n  }\n\n  for (i = 0; i < 4; i++) {\n    for (k = 0; k < 256; k += 2) {\n      d[0] ^= stream2word(data, databytes);\n      d[1] ^= stream2word(data, databytes);\n      this.encipher(d);\n      this.S[i][k]   = d[0];\n      this.S[i][k+1] = d[1];\n    }\n  }\n  BLF_J = 0;\n};\n\nBlowfish.prototype.enc = function(data, blocks) {\n  for (var i = 0; i < blocks; i++) {\n    this.encipher(data.subarray(i*2));\n  }\n};\n\nBlowfish.prototype.dec = function(data, blocks) {\n  for (var i = 0; i < blocks; i++) {\n    this.decipher(data.subarray(i*2));\n  }\n};\n\nvar BCRYPT_BLOCKS = 8,\n    BCRYPT_HASHSIZE = 32;\n\nfunction bcrypt_hash(sha2pass, sha2salt, out) {\n  var state = new Blowfish(),\n      cdata = new Uint32Array(BCRYPT_BLOCKS), i,\n      ciphertext = new Uint8Array([79,120,121,99,104,114,111,109,97,116,105,\n            99,66,108,111,119,102,105,115,104,83,119,97,116,68,121,110,97,109,\n            105,116,101]); //\"OxychromaticBlowfishSwatDynamite\"\n\n  state.expandstate(sha2salt, 64, sha2pass, 64);\n  for (i = 0; i < 64; i++) {\n    state.expand0state(sha2salt, 64);\n    state.expand0state(sha2pass, 64);\n  }\n\n  for (i = 0; i < BCRYPT_BLOCKS; i++)\n    cdata[i] = stream2word(ciphertext, ciphertext.byteLength);\n  for (i = 0; i < 64; i++)\n    state.enc(cdata, cdata.byteLength / 8);\n\n  for (i = 0; i < BCRYPT_BLOCKS; i++) {\n    out[4*i+3] = cdata[i] >>> 24;\n    out[4*i+2] = cdata[i] >>> 16;\n    out[4*i+1] = cdata[i] >>> 8;\n    out[4*i+0] = cdata[i];\n  }\n};\n\nfunction bcrypt_pbkdf(pass, passlen, salt, saltlen, key, keylen, rounds) {\n  var sha2pass = new Uint8Array(64),\n      sha2salt = new Uint8Array(64),\n      out = new Uint8Array(BCRYPT_HASHSIZE),\n      tmpout = new Uint8Array(BCRYPT_HASHSIZE),\n      countsalt = new Uint8Array(saltlen+4),\n      i, j, amt, stride, dest, count,\n      origkeylen = keylen;\n\n  if (rounds < 1)\n    return -1;\n  if (passlen === 0 || saltlen === 0 || keylen === 0 ||\n      keylen > (out.byteLength * out.byteLength) || saltlen > (1<<20))\n    return -1;\n\n  stride = Math.floor((keylen + out.byteLength - 1) / out.byteLength);\n  amt = Math.floor((keylen + stride - 1) / stride);\n\n  for (i = 0; i < saltlen; i++)\n    countsalt[i] = salt[i];\n\n  crypto_hash_sha512(sha2pass, pass, passlen);\n\n  for (count = 1; keylen > 0; count++) {\n    countsalt[saltlen+0] = count >>> 24;\n    countsalt[saltlen+1] = count >>> 16;\n    countsalt[saltlen+2] = count >>>  8;\n    countsalt[saltlen+3] = count;\n\n    crypto_hash_sha512(sha2salt, countsalt, saltlen + 4);\n    bcrypt_hash(sha2pass, sha2salt, tmpout);\n    for (i = out.byteLength; i--;)\n      out[i] = tmpout[i];\n\n    for (i = 1; i < rounds; i++) {\n      crypto_hash_sha512(sha2salt, tmpout, tmpout.byteLength);\n      bcrypt_hash(sha2pass, sha2salt, tmpout);\n      for (j = 0; j < out.byteLength; j++)\n        out[j] ^= tmpout[j];\n    }\n\n    amt = Math.min(amt, keylen);\n    for (i = 0; i < amt; i++) {\n      dest = i * stride + (count - 1);\n      if (dest >= origkeylen)\n        break;\n      key[dest] = out[i];\n    }\n    keylen -= i;\n  }\n\n  return 0;\n};\n\nmodule.exports = {\n      BLOCKS: BCRYPT_BLOCKS,\n      HASHSIZE: BCRYPT_HASHSIZE,\n      hash: bcrypt_hash,\n      pbkdf: bcrypt_pbkdf\n};\n", "// Copyright 2015 Joyent, Inc.\n\nmodule.exports = {\n\tread: read,\n\treadSSHPrivate: readSSHPrivate,\n\twrite: write\n};\n\nvar assert = require('assert-plus');\nvar asn1 = require('asn1');\nvar Buffer = require('safer-buffer').Buffer;\nvar algs = require('../algs');\nvar utils = require('../utils');\nvar crypto = require('crypto');\n\nvar Key = require('../key');\nvar PrivateKey = require('../private-key');\nvar pem = require('./pem');\nvar rfc4253 = require('./rfc4253');\nvar SSHBuffer = require('../ssh-buffer');\nvar errors = require('../errors');\n\nvar bcrypt;\n\nfunction read(buf, options) {\n\treturn (pem.read(buf, options));\n}\n\nvar MAGIC = 'openssh-key-v1';\n\nfunction readSSHPrivate(type, buf, options) {\n\tbuf = new SSHBuffer({buffer: buf});\n\n\tvar magic = buf.readCString();\n\tassert.strictEqual(magic, MAGIC, 'bad magic string');\n\n\tvar cipher = buf.readString();\n\tvar kdf = buf.readString();\n\tvar kdfOpts = buf.readBuffer();\n\n\tvar nkeys = buf.readInt();\n\tif (nkeys !== 1) {\n\t\tthrow (new Error('OpenSSH-format key file contains ' +\n\t\t    'multiple keys: this is unsupported.'));\n\t}\n\n\tvar pubKey = buf.readBuffer();\n\n\tif (type === 'public') {\n\t\tassert.ok(buf.atEnd(), 'excess bytes left after key');\n\t\treturn (rfc4253.read(pubKey));\n\t}\n\n\tvar privKeyBlob = buf.readBuffer();\n\tassert.ok(buf.atEnd(), 'excess bytes left after key');\n\n\tvar kdfOptsBuf = new SSHBuffer({ buffer: kdfOpts });\n\tswitch (kdf) {\n\tcase 'none':\n\t\tif (cipher !== 'none') {\n\t\t\tthrow (new Error('OpenSSH-format key uses KDF \"none\" ' +\n\t\t\t     'but specifies a cipher other than \"none\"'));\n\t\t}\n\t\tbreak;\n\tcase 'bcrypt':\n\t\tvar salt = kdfOptsBuf.readBuffer();\n\t\tvar rounds = kdfOptsBuf.readInt();\n\t\tvar cinf = utils.opensshCipherInfo(cipher);\n\t\tif (bcrypt === undefined) {\n\t\t\tbcrypt = require('bcrypt-pbkdf');\n\t\t}\n\n\t\tif (typeof (options.passphrase) === 'string') {\n\t\t\toptions.passphrase = Buffer.from(options.passphrase,\n\t\t\t    'utf-8');\n\t\t}\n\t\tif (!Buffer.isBuffer(options.passphrase)) {\n\t\t\tthrow (new errors.KeyEncryptedError(\n\t\t\t    options.filename, 'OpenSSH'));\n\t\t}\n\n\t\tvar pass = new Uint8Array(options.passphrase);\n\t\tvar salti = new Uint8Array(salt);\n\t\t/* Use the pbkdf to derive both the key and the IV. */\n\t\tvar out = new Uint8Array(cinf.keySize + cinf.blockSize);\n\t\tvar res = bcrypt.pbkdf(pass, pass.length, salti, salti.length,\n\t\t    out, out.length, rounds);\n\t\tif (res !== 0) {\n\t\t\tthrow (new Error('bcrypt_pbkdf function returned ' +\n\t\t\t    'failure, parameters invalid'));\n\t\t}\n\t\tout = Buffer.from(out);\n\t\tvar ckey = out.slice(0, cinf.keySize);\n\t\tvar iv = out.slice(cinf.keySize, cinf.keySize + cinf.blockSize);\n\t\tvar cipherStream = crypto.createDecipheriv(cinf.opensslName,\n\t\t    ckey, iv);\n\t\tcipherStream.setAutoPadding(false);\n\t\tvar chunk, chunks = [];\n\t\tcipherStream.once('error', function (e) {\n\t\t\tif (e.toString().indexOf('bad decrypt') !== -1) {\n\t\t\t\tthrow (new Error('Incorrect passphrase ' +\n\t\t\t\t    'supplied, could not decrypt key'));\n\t\t\t}\n\t\t\tthrow (e);\n\t\t});\n\t\tcipherStream.write(privKeyBlob);\n\t\tcipherStream.end();\n\t\twhile ((chunk = cipherStream.read()) !== null)\n\t\t\tchunks.push(chunk);\n\t\tprivKeyBlob = Buffer.concat(chunks);\n\t\tbreak;\n\tdefault:\n\t\tthrow (new Error(\n\t\t    'OpenSSH-format key uses unknown KDF \"' + kdf + '\"'));\n\t}\n\n\tbuf = new SSHBuffer({buffer: privKeyBlob});\n\n\tvar checkInt1 = buf.readInt();\n\tvar checkInt2 = buf.readInt();\n\tif (checkInt1 !== checkInt2) {\n\t\tthrow (new Error('Incorrect passphrase supplied, could not ' +\n\t\t    'decrypt key'));\n\t}\n\n\tvar ret = {};\n\tvar key = rfc4253.readInternal(ret, 'private', buf.remainder());\n\n\tbuf.skip(ret.consumed);\n\n\tvar comment = buf.readString();\n\tkey.comment = comment;\n\n\treturn (key);\n}\n\nfunction write(key, options) {\n\tvar pubKey;\n\tif (PrivateKey.isPrivateKey(key))\n\t\tpubKey = key.toPublic();\n\telse\n\t\tpubKey = key;\n\n\tvar cipher = 'none';\n\tvar kdf = 'none';\n\tvar kdfopts = Buffer.alloc(0);\n\tvar cinf = { blockSize: 8 };\n\tvar passphrase;\n\tif (options !== undefined) {\n\t\tpassphrase = options.passphrase;\n\t\tif (typeof (passphrase) === 'string')\n\t\t\tpassphrase = Buffer.from(passphrase, 'utf-8');\n\t\tif (passphrase !== undefined) {\n\t\t\tassert.buffer(passphrase, 'options.passphrase');\n\t\t\tassert.optionalString(options.cipher, 'options.cipher');\n\t\t\tcipher = options.cipher;\n\t\t\tif (cipher === undefined)\n\t\t\t\tcipher = 'aes128-ctr';\n\t\t\tcinf = utils.opensshCipherInfo(cipher);\n\t\t\tkdf = 'bcrypt';\n\t\t}\n\t}\n\n\tvar privBuf;\n\tif (PrivateKey.isPrivateKey(key)) {\n\t\tprivBuf = new SSHBuffer({});\n\t\tvar checkInt = crypto.randomBytes(4).readUInt32BE(0);\n\t\tprivBuf.writeInt(checkInt);\n\t\tprivBuf.writeInt(checkInt);\n\t\tprivBuf.write(key.toBuffer('rfc4253'));\n\t\tprivBuf.writeString(key.comment || '');\n\n\t\tvar n = 1;\n\t\twhile (privBuf._offset % cinf.blockSize !== 0)\n\t\t\tprivBuf.writeChar(n++);\n\t\tprivBuf = privBuf.toBuffer();\n\t}\n\n\tswitch (kdf) {\n\tcase 'none':\n\t\tbreak;\n\tcase 'bcrypt':\n\t\tvar salt = crypto.randomBytes(16);\n\t\tvar rounds = 16;\n\t\tvar kdfssh = new SSHBuffer({});\n\t\tkdfssh.writeBuffer(salt);\n\t\tkdfssh.writeInt(rounds);\n\t\tkdfopts = kdfssh.toBuffer();\n\n\t\tif (bcrypt === undefined) {\n\t\t\tbcrypt = require('bcrypt-pbkdf');\n\t\t}\n\t\tvar pass = new Uint8Array(passphrase);\n\t\tvar salti = new Uint8Array(salt);\n\t\t/* Use the pbkdf to derive both the key and the IV. */\n\t\tvar out = new Uint8Array(cinf.keySize + cinf.blockSize);\n\t\tvar res = bcrypt.pbkdf(pass, pass.length, salti, salti.length,\n\t\t    out, out.length, rounds);\n\t\tif (res !== 0) {\n\t\t\tthrow (new Error('bcrypt_pbkdf function returned ' +\n\t\t\t    'failure, parameters invalid'));\n\t\t}\n\t\tout = Buffer.from(out);\n\t\tvar ckey = out.slice(0, cinf.keySize);\n\t\tvar iv = out.slice(cinf.keySize, cinf.keySize + cinf.blockSize);\n\n\t\tvar cipherStream = crypto.createCipheriv(cinf.opensslName,\n\t\t    ckey, iv);\n\t\tcipherStream.setAutoPadding(false);\n\t\tvar chunk, chunks = [];\n\t\tcipherStream.once('error', function (e) {\n\t\t\tthrow (e);\n\t\t});\n\t\tcipherStream.write(privBuf);\n\t\tcipherStream.end();\n\t\twhile ((chunk = cipherStream.read()) !== null)\n\t\t\tchunks.push(chunk);\n\t\tprivBuf = Buffer.concat(chunks);\n\t\tbreak;\n\tdefault:\n\t\tthrow (new Error('Unsupported kdf ' + kdf));\n\t}\n\n\tvar buf = new SSHBuffer({});\n\n\tbuf.writeCString(MAGIC);\n\tbuf.writeString(cipher);\t/* cipher */\n\tbuf.writeString(kdf);\t\t/* kdf */\n\tbuf.writeBuffer(kdfopts);\t/* kdfoptions */\n\n\tbuf.writeInt(1);\t\t/* nkeys */\n\tbuf.writeBuffer(pubKey.toBuffer('rfc4253'));\n\n\tif (privBuf)\n\t\tbuf.writeBuffer(privBuf);\n\n\tbuf = buf.toBuffer();\n\n\tvar header;\n\tif (PrivateKey.isPrivateKey(key))\n\t\theader = 'OPENSSH PRIVATE KEY';\n\telse\n\t\theader = 'OPENSSH PUBLIC KEY';\n\n\tvar tmp = buf.toString('base64');\n\tvar len = tmp.length + (tmp.length / 70) +\n\t    18 + 16 + header.length*2 + 10;\n\tbuf = Buffer.alloc(len);\n\tvar o = 0;\n\to += buf.write('-----BEGIN ' + header + '-----\\n', o);\n\tfor (var i = 0; i < tmp.length; ) {\n\t\tvar limit = i + 70;\n\t\tif (limit > tmp.length)\n\t\t\tlimit = tmp.length;\n\t\to += buf.write(tmp.slice(i, limit), o);\n\t\tbuf[o++] = 10;\n\t\ti = limit;\n\t}\n\to += buf.write('-----END ' + header + '-----\\n', o);\n\n\treturn (buf.slice(0, o));\n}\n", "// Copyright 2018 Joyent, Inc.\n\nmodule.exports = {\n\tread: read,\n\twrite: write\n};\n\nvar assert = require('assert-plus');\nvar asn1 = require('asn1');\nvar crypto = require('crypto');\nvar Buffer = require('safer-buffer').Buffer;\nvar algs = require('../algs');\nvar utils = require('../utils');\nvar Key = require('../key');\nvar PrivateKey = require('../private-key');\n\nvar pkcs1 = require('./pkcs1');\nvar pkcs8 = require('./pkcs8');\nvar sshpriv = require('./ssh-private');\nvar rfc4253 = require('./rfc4253');\n\nvar errors = require('../errors');\n\nvar OID_PBES2 = '1.2.840.113549.1.5.13';\nvar OID_PBKDF2 = '1.2.840.113549.1.5.12';\n\nvar OID_TO_CIPHER = {\n\t'1.2.840.113549.3.7': '3des-cbc',\n\t'2.16.840.1.101.3.4.1.2': 'aes128-cbc',\n\t'2.16.840.1.101.3.4.1.42': 'aes256-cbc'\n};\nvar CIPHER_TO_OID = {};\nObject.keys(OID_TO_CIPHER).forEach(function (k) {\n\tCIPHER_TO_OID[OID_TO_CIPHER[k]] = k;\n});\n\nvar OID_TO_HASH = {\n\t'1.2.840.113549.2.7': 'sha1',\n\t'1.2.840.113549.2.9': 'sha256',\n\t'1.2.840.113549.2.11': 'sha512'\n};\nvar HASH_TO_OID = {};\nObject.keys(OID_TO_HASH).forEach(function (k) {\n\tHASH_TO_OID[OID_TO_HASH[k]] = k;\n});\n\n/*\n * For reading we support both PKCS#1 and PKCS#8. If we find a private key,\n * we just take the public component of it and use that.\n */\nfunction read(buf, options, forceType) {\n\tvar input = buf;\n\tif (typeof (buf) !== 'string') {\n\t\tassert.buffer(buf, 'buf');\n\t\tbuf = buf.toString('ascii');\n\t}\n\n\tvar lines = buf.trim().split(/[\\r\\n]+/g);\n\n\tvar m;\n\tvar si = -1;\n\twhile (!m && si < lines.length) {\n\t\tm = lines[++si].match(/*JSSTYLED*/\n\t\t    /[-]+[ ]*BEGIN ([A-Z0-9][A-Za-z0-9]+ )?(PUBLIC|PRIVATE) KEY[ ]*[-]+/);\n\t}\n\tassert.ok(m, 'invalid PEM header');\n\n\tvar m2;\n\tvar ei = lines.length;\n\twhile (!m2 && ei > 0) {\n\t\tm2 = lines[--ei].match(/*JSSTYLED*/\n\t\t    /[-]+[ ]*END ([A-Z0-9][A-Za-z0-9]+ )?(PUBLIC|PRIVATE) KEY[ ]*[-]+/);\n\t}\n\tassert.ok(m2, 'invalid PEM footer');\n\n\t/* Begin and end banners must match key type */\n\tassert.equal(m[2], m2[2]);\n\tvar type = m[2].toLowerCase();\n\n\tvar alg;\n\tif (m[1]) {\n\t\t/* They also must match algorithms, if given */\n\t\tassert.equal(m[1], m2[1], 'PEM header and footer mismatch');\n\t\talg = m[1].trim();\n\t}\n\n\tlines = lines.slice(si, ei + 1);\n\n\tvar headers = {};\n\twhile (true) {\n\t\tlines = lines.slice(1);\n\t\tm = lines[0].match(/*JSSTYLED*/\n\t\t    /^([A-Za-z0-9-]+): (.+)$/);\n\t\tif (!m)\n\t\t\tbreak;\n\t\theaders[m[1].toLowerCase()] = m[2];\n\t}\n\n\t/* Chop off the first and last lines */\n\tlines = lines.slice(0, -1).join('');\n\tbuf = Buffer.from(lines, 'base64');\n\n\tvar cipher, key, iv;\n\tif (headers['proc-type']) {\n\t\tvar parts = headers['proc-type'].split(',');\n\t\tif (parts[0] === '4' && parts[1] === 'ENCRYPTED') {\n\t\t\tif (typeof (options.passphrase) === 'string') {\n\t\t\t\toptions.passphrase = Buffer.from(\n\t\t\t\t    options.passphrase, 'utf-8');\n\t\t\t}\n\t\t\tif (!Buffer.isBuffer(options.passphrase)) {\n\t\t\t\tthrow (new errors.KeyEncryptedError(\n\t\t\t\t    options.filename, 'PEM'));\n\t\t\t} else {\n\t\t\t\tparts = headers['dek-info'].split(',');\n\t\t\t\tassert.ok(parts.length === 2);\n\t\t\t\tcipher = parts[0].toLowerCase();\n\t\t\t\tiv = Buffer.from(parts[1], 'hex');\n\t\t\t\tkey = utils.opensslKeyDeriv(cipher, iv,\n\t\t\t\t    options.passphrase, 1).key;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (alg && alg.toLowerCase() === 'encrypted') {\n\t\tvar eder = new asn1.BerReader(buf);\n\t\tvar pbesEnd;\n\t\teder.readSequence();\n\n\t\teder.readSequence();\n\t\tpbesEnd = eder.offset + eder.length;\n\n\t\tvar method = eder.readOID();\n\t\tif (method !== OID_PBES2) {\n\t\t\tthrow (new Error('Unsupported PEM/PKCS8 encryption ' +\n\t\t\t    'scheme: ' + method));\n\t\t}\n\n\t\teder.readSequence();\t/* PBES2-params */\n\n\t\teder.readSequence();\t/* keyDerivationFunc */\n\t\tvar kdfEnd = eder.offset + eder.length;\n\t\tvar kdfOid = eder.readOID();\n\t\tif (kdfOid !== OID_PBKDF2)\n\t\t\tthrow (new Error('Unsupported PBES2 KDF: ' + kdfOid));\n\t\teder.readSequence();\n\t\tvar salt = eder.readString(asn1.Ber.OctetString, true);\n\t\tvar iterations = eder.readInt();\n\t\tvar hashAlg = 'sha1';\n\t\tif (eder.offset < kdfEnd) {\n\t\t\teder.readSequence();\n\t\t\tvar hashAlgOid = eder.readOID();\n\t\t\thashAlg = OID_TO_HASH[hashAlgOid];\n\t\t\tif (hashAlg === undefined) {\n\t\t\t\tthrow (new Error('Unsupported PBKDF2 hash: ' +\n\t\t\t\t    hashAlgOid));\n\t\t\t}\n\t\t}\n\t\teder._offset = kdfEnd;\n\n\t\teder.readSequence();\t/* encryptionScheme */\n\t\tvar cipherOid = eder.readOID();\n\t\tcipher = OID_TO_CIPHER[cipherOid];\n\t\tif (cipher === undefined) {\n\t\t\tthrow (new Error('Unsupported PBES2 cipher: ' +\n\t\t\t    cipherOid));\n\t\t}\n\t\tiv = eder.readString(asn1.Ber.OctetString, true);\n\n\t\teder._offset = pbesEnd;\n\t\tbuf = eder.readString(asn1.Ber.OctetString, true);\n\n\t\tif (typeof (options.passphrase) === 'string') {\n\t\t\toptions.passphrase = Buffer.from(\n\t\t\t    options.passphrase, 'utf-8');\n\t\t}\n\t\tif (!Buffer.isBuffer(options.passphrase)) {\n\t\t\tthrow (new errors.KeyEncryptedError(\n\t\t\t    options.filename, 'PEM'));\n\t\t}\n\n\t\tvar cinfo = utils.opensshCipherInfo(cipher);\n\n\t\tcipher = cinfo.opensslName;\n\t\tkey = utils.pbkdf2(hashAlg, salt, iterations, cinfo.keySize,\n\t\t    options.passphrase);\n\t\talg = undefined;\n\t}\n\n\tif (cipher && key && iv) {\n\t\tvar cipherStream = crypto.createDecipheriv(cipher, key, iv);\n\t\tvar chunk, chunks = [];\n\t\tcipherStream.once('error', function (e) {\n\t\t\tif (e.toString().indexOf('bad decrypt') !== -1) {\n\t\t\t\tthrow (new Error('Incorrect passphrase ' +\n\t\t\t\t    'supplied, could not decrypt key'));\n\t\t\t}\n\t\t\tthrow (e);\n\t\t});\n\t\tcipherStream.write(buf);\n\t\tcipherStream.end();\n\t\twhile ((chunk = cipherStream.read()) !== null)\n\t\t\tchunks.push(chunk);\n\t\tbuf = Buffer.concat(chunks);\n\t}\n\n\t/* The new OpenSSH internal format abuses PEM headers */\n\tif (alg && alg.toLowerCase() === 'openssh')\n\t\treturn (sshpriv.readSSHPrivate(type, buf, options));\n\tif (alg && alg.toLowerCase() === 'ssh2')\n\t\treturn (rfc4253.readType(type, buf, options));\n\n\tvar der = new asn1.BerReader(buf);\n\tder.originalInput = input;\n\n\t/*\n\t * All of the PEM file types start with a sequence tag, so chop it\n\t * off here\n\t */\n\tder.readSequence();\n\n\t/* PKCS#1 type keys name an algorithm in the banner explicitly */\n\tif (alg) {\n\t\tif (forceType)\n\t\t\tassert.strictEqual(forceType, 'pkcs1');\n\t\treturn (pkcs1.readPkcs1(alg, type, der));\n\t} else {\n\t\tif (forceType)\n\t\t\tassert.strictEqual(forceType, 'pkcs8');\n\t\treturn (pkcs8.readPkcs8(alg, type, der));\n\t}\n}\n\nfunction write(key, options, type) {\n\tassert.object(key);\n\n\tvar alg = {\n\t    'ecdsa': 'EC',\n\t    'rsa': 'RSA',\n\t    'dsa': 'DSA',\n\t    'ed25519': 'EdDSA'\n\t}[key.type];\n\tvar header;\n\n\tvar der = new asn1.BerWriter();\n\n\tif (PrivateKey.isPrivateKey(key)) {\n\t\tif (type && type === 'pkcs8') {\n\t\t\theader = 'PRIVATE KEY';\n\t\t\tpkcs8.writePkcs8(der, key);\n\t\t} else {\n\t\t\tif (type)\n\t\t\t\tassert.strictEqual(type, 'pkcs1');\n\t\t\theader = alg + ' PRIVATE KEY';\n\t\t\tpkcs1.writePkcs1(der, key);\n\t\t}\n\n\t} else if (Key.isKey(key)) {\n\t\tif (type && type === 'pkcs1') {\n\t\t\theader = alg + ' PUBLIC KEY';\n\t\t\tpkcs1.writePkcs1(der, key);\n\t\t} else {\n\t\t\tif (type)\n\t\t\t\tassert.strictEqual(type, 'pkcs8');\n\t\t\theader = 'PUBLIC KEY';\n\t\t\tpkcs8.writePkcs8(der, key);\n\t\t}\n\n\t} else {\n\t\tthrow (new Error('key is not a Key or PrivateKey'));\n\t}\n\n\tvar tmp = der.buffer.toString('base64');\n\tvar len = tmp.length + (tmp.length / 64) +\n\t    18 + 16 + header.length*2 + 10;\n\tvar buf = Buffer.alloc(len);\n\tvar o = 0;\n\to += buf.write('-----BEGIN ' + header + '-----\\n', o);\n\tfor (var i = 0; i < tmp.length; ) {\n\t\tvar limit = i + 64;\n\t\tif (limit > tmp.length)\n\t\t\tlimit = tmp.length;\n\t\to += buf.write(tmp.slice(i, limit), o);\n\t\tbuf[o++] = 10;\n\t\ti = limit;\n\t}\n\to += buf.write('-----END ' + header + '-----\\n', o);\n\n\treturn (buf.slice(0, o));\n}\n", "// Copyright 2015 Joyent, Inc.\n\nmodule.exports = {\n\tread: read,\n\twrite: write\n};\n\nvar assert = require('assert-plus');\nvar Buffer = require('safer-buffer').Buffer;\nvar rfc4253 = require('./rfc4253');\nvar utils = require('../utils');\nvar Key = require('../key');\nvar PrivateKey = require('../private-key');\n\nvar sshpriv = require('./ssh-private');\n\n/*JSSTYLED*/\nvar SSHKEY_RE = /^([a-z0-9-]+)[ \\t]+([a-zA-Z0-9+\\/]+[=]*)([ \\t]+([^ \\t][^\\n]*[\\n]*)?)?$/;\n/*JSSTYLED*/\nvar SSHKEY_RE2 = /^([a-z0-9-]+)[ \\t\\n]+([a-zA-Z0-9+\\/][a-zA-Z0-9+\\/ \\t\\n=]*)([^a-zA-Z0-9+\\/ \\t\\n=].*)?$/;\n\nfunction read(buf, options) {\n\tif (typeof (buf) !== 'string') {\n\t\tassert.buffer(buf, 'buf');\n\t\tbuf = buf.toString('ascii');\n\t}\n\n\tvar trimmed = buf.trim().replace(/[\\\\\\r]/g, '');\n\tvar m = trimmed.match(SSHKEY_RE);\n\tif (!m)\n\t\tm = trimmed.match(SSHKEY_RE2);\n\tassert.ok(m, 'key must match regex');\n\n\tvar type = rfc4253.algToKeyType(m[1]);\n\tvar kbuf = Buffer.from(m[2], 'base64');\n\n\t/*\n\t * This is a bit tricky. If we managed to parse the key and locate the\n\t * key comment with the regex, then do a non-partial read and assert\n\t * that we have consumed all bytes. If we couldn't locate the key\n\t * comment, though, there may be whitespace shenanigans going on that\n\t * have conjoined the comment to the rest of the key. We do a partial\n\t * read in this case to try to make the best out of a sorry situation.\n\t */\n\tvar key;\n\tvar ret = {};\n\tif (m[4]) {\n\t\ttry {\n\t\t\tkey = rfc4253.read(kbuf);\n\n\t\t} catch (e) {\n\t\t\tm = trimmed.match(SSHKEY_RE2);\n\t\t\tassert.ok(m, 'key must match regex');\n\t\t\tkbuf = Buffer.from(m[2], 'base64');\n\t\t\tkey = rfc4253.readInternal(ret, 'public', kbuf);\n\t\t}\n\t} else {\n\t\tkey = rfc4253.readInternal(ret, 'public', kbuf);\n\t}\n\n\tassert.strictEqual(type, key.type);\n\n\tif (m[4] && m[4].length > 0) {\n\t\tkey.comment = m[4];\n\n\t} else if (ret.consumed) {\n\t\t/*\n\t\t * Now the magic: trying to recover the key comment when it's\n\t\t * gotten conjoined to the key or otherwise shenanigan'd.\n\t\t *\n\t\t * Work out how much base64 we used, then drop all non-base64\n\t\t * chars from the beginning up to this point in the the string.\n\t\t * Then offset in this and try to make up for missing = chars.\n\t\t */\n\t\tvar data = m[2] + (m[3] ? m[3] : '');\n\t\tvar realOffset = Math.ceil(ret.consumed / 3) * 4;\n\t\tdata = data.slice(0, realOffset - 2). /*JSSTYLED*/\n\t\t    replace(/[^a-zA-Z0-9+\\/=]/g, '') +\n\t\t    data.slice(realOffset - 2);\n\n\t\tvar padding = ret.consumed % 3;\n\t\tif (padding > 0 &&\n\t\t    data.slice(realOffset - 1, realOffset) !== '=')\n\t\t\trealOffset--;\n\t\twhile (data.slice(realOffset, realOffset + 1) === '=')\n\t\t\trealOffset++;\n\n\t\t/* Finally, grab what we think is the comment & clean it up. */\n\t\tvar trailer = data.slice(realOffset);\n\t\ttrailer = trailer.replace(/[\\r\\n]/g, ' ').\n\t\t    replace(/^\\s+/, '');\n\t\tif (trailer.match(/^[a-zA-Z0-9]/))\n\t\t\tkey.comment = trailer;\n\t}\n\n\treturn (key);\n}\n\nfunction write(key, options) {\n\tassert.object(key);\n\tif (!Key.isKey(key))\n\t\tthrow (new Error('Must be a public key'));\n\n\tvar parts = [];\n\tvar alg = rfc4253.keyTypeToAlg(key);\n\tparts.push(alg);\n\n\tvar buf = rfc4253.write(key);\n\tparts.push(buf.toString('base64'));\n\n\tif (key.comment)\n\t\tparts.push(key.comment);\n\n\treturn (Buffer.from(parts.join(' ')));\n}\n", "// Copyright 2017 Joyent, Inc.\n\nmodule.exports = {\n\tread: read,\n\twrite: write\n};\n\nvar assert = require('assert-plus');\nvar Buffer = require('safer-buffer').Buffer;\nvar Key = require('../key');\nvar PrivateKey = require('../private-key');\nvar utils = require('../utils');\nvar SSHBuffer = require('../ssh-buffer');\nvar Dhe = require('../dhe');\n\nvar supportedAlgos = {\n\t'rsa-sha1' : 5,\n\t'rsa-sha256' : 8,\n\t'rsa-sha512' : 10,\n\t'ecdsa-p256-sha256' : 13,\n\t'ecdsa-p384-sha384' : 14\n\t/*\n\t * ed25519 is hypothetically supported with id 15\n\t * but the common tools available don't appear to be\n\t * capable of generating/using ed25519 keys\n\t */\n};\n\nvar supportedAlgosById = {};\nObject.keys(supportedAlgos).forEach(function (k) {\n\tsupportedAlgosById[supportedAlgos[k]] = k.toUpperCase();\n});\n\nfunction read(buf, options) {\n\tif (typeof (buf) !== 'string') {\n\t\tassert.buffer(buf, 'buf');\n\t\tbuf = buf.toString('ascii');\n\t}\n\tvar lines = buf.split('\\n');\n\tif (lines[0].match(/^Private-key-format\\: v1/)) {\n\t\tvar algElems = lines[1].split(' ');\n\t\tvar algoNum = parseInt(algElems[1], 10);\n\t\tvar algoName = algElems[2];\n\t\tif (!supportedAlgosById[algoNum])\n\t\t\tthrow (new Error('Unsupported algorithm: ' + algoName));\n\t\treturn (readDNSSECPrivateKey(algoNum, lines.slice(2)));\n\t}\n\n\t// skip any comment-lines\n\tvar line = 0;\n\t/* JSSTYLED */\n\twhile (lines[line].match(/^\\;/))\n\t\tline++;\n\t// we should now have *one single* line left with our KEY on it.\n\tif ((lines[line].match(/\\. IN KEY /) ||\n\t    lines[line].match(/\\. IN DNSKEY /)) && lines[line+1].length === 0) {\n\t\treturn (readRFC3110(lines[line]));\n\t}\n\tthrow (new Error('Cannot parse dnssec key'));\n}\n\nfunction readRFC3110(keyString) {\n\tvar elems = keyString.split(' ');\n\t//unused var flags = parseInt(elems[3], 10);\n\t//unused var protocol = parseInt(elems[4], 10);\n\tvar algorithm = parseInt(elems[5], 10);\n\tif (!supportedAlgosById[algorithm])\n\t\tthrow (new Error('Unsupported algorithm: ' + algorithm));\n\tvar base64key = elems.slice(6, elems.length).join();\n\tvar keyBuffer = Buffer.from(base64key, 'base64');\n\tif (supportedAlgosById[algorithm].match(/^RSA-/)) {\n\t\t// join the rest of the body into a single base64-blob\n\t\tvar publicExponentLen = keyBuffer.readUInt8(0);\n\t\tif (publicExponentLen != 3 && publicExponentLen != 1)\n\t\t\tthrow (new Error('Cannot parse dnssec key: ' +\n\t\t\t    'unsupported exponent length'));\n\n\t\tvar publicExponent = keyBuffer.slice(1, publicExponentLen+1);\n\t\tpublicExponent = utils.mpNormalize(publicExponent);\n\t\tvar modulus = keyBuffer.slice(1+publicExponentLen);\n\t\tmodulus = utils.mpNormalize(modulus);\n\t\t// now, make the key\n\t\tvar rsaKey = {\n\t\t\ttype: 'rsa',\n\t\t\tparts: []\n\t\t};\n\t\trsaKey.parts.push({ name: 'e', data: publicExponent});\n\t\trsaKey.parts.push({ name: 'n', data: modulus});\n\t\treturn (new Key(rsaKey));\n\t}\n\tif (supportedAlgosById[algorithm] === 'ECDSA-P384-SHA384' ||\n\t    supportedAlgosById[algorithm] === 'ECDSA-P256-SHA256') {\n\t\tvar curve = 'nistp384';\n\t\tvar size = 384;\n\t\tif (supportedAlgosById[algorithm].match(/^ECDSA-P256-SHA256/)) {\n\t\t\tcurve = 'nistp256';\n\t\t\tsize = 256;\n\t\t}\n\n\t\tvar ecdsaKey = {\n\t\t\ttype: 'ecdsa',\n\t\t\tcurve: curve,\n\t\t\tsize: size,\n\t\t\tparts: [\n\t\t\t\t{name: 'curve', data: Buffer.from(curve) },\n\t\t\t\t{name: 'Q', data: utils.ecNormalize(keyBuffer) }\n\t\t\t]\n\t\t};\n\t\treturn (new Key(ecdsaKey));\n\t}\n\tthrow (new Error('Unsupported algorithm: ' +\n\t    supportedAlgosById[algorithm]));\n}\n\nfunction elementToBuf(e) {\n\treturn (Buffer.from(e.split(' ')[1], 'base64'));\n}\n\nfunction readDNSSECRSAPrivateKey(elements) {\n\tvar rsaParams = {};\n\telements.forEach(function (element) {\n\t\tif (element.split(' ')[0] === 'Modulus:')\n\t\t\trsaParams['n'] = elementToBuf(element);\n\t\telse if (element.split(' ')[0] === 'PublicExponent:')\n\t\t\trsaParams['e'] = elementToBuf(element);\n\t\telse if (element.split(' ')[0] === 'PrivateExponent:')\n\t\t\trsaParams['d'] = elementToBuf(element);\n\t\telse if (element.split(' ')[0] === 'Prime1:')\n\t\t\trsaParams['p'] = elementToBuf(element);\n\t\telse if (element.split(' ')[0] === 'Prime2:')\n\t\t\trsaParams['q'] = elementToBuf(element);\n\t\telse if (element.split(' ')[0] === 'Exponent1:')\n\t\t\trsaParams['dmodp'] = elementToBuf(element);\n\t\telse if (element.split(' ')[0] === 'Exponent2:')\n\t\t\trsaParams['dmodq'] = elementToBuf(element);\n\t\telse if (element.split(' ')[0] === 'Coefficient:')\n\t\t\trsaParams['iqmp'] = elementToBuf(element);\n\t});\n\t// now, make the key\n\tvar key = {\n\t\ttype: 'rsa',\n\t\tparts: [\n\t\t\t{ name: 'e', data: utils.mpNormalize(rsaParams['e'])},\n\t\t\t{ name: 'n', data: utils.mpNormalize(rsaParams['n'])},\n\t\t\t{ name: 'd', data: utils.mpNormalize(rsaParams['d'])},\n\t\t\t{ name: 'p', data: utils.mpNormalize(rsaParams['p'])},\n\t\t\t{ name: 'q', data: utils.mpNormalize(rsaParams['q'])},\n\t\t\t{ name: 'dmodp',\n\t\t\t    data: utils.mpNormalize(rsaParams['dmodp'])},\n\t\t\t{ name: 'dmodq',\n\t\t\t    data: utils.mpNormalize(rsaParams['dmodq'])},\n\t\t\t{ name: 'iqmp',\n\t\t\t    data: utils.mpNormalize(rsaParams['iqmp'])}\n\t\t]\n\t};\n\treturn (new PrivateKey(key));\n}\n\nfunction readDNSSECPrivateKey(alg, elements) {\n\tif (supportedAlgosById[alg].match(/^RSA-/)) {\n\t\treturn (readDNSSECRSAPrivateKey(elements));\n\t}\n\tif (supportedAlgosById[alg] === 'ECDSA-P384-SHA384' ||\n\t    supportedAlgosById[alg] === 'ECDSA-P256-SHA256') {\n\t\tvar d = Buffer.from(elements[0].split(' ')[1], 'base64');\n\t\tvar curve = 'nistp384';\n\t\tvar size = 384;\n\t\tif (supportedAlgosById[alg] === 'ECDSA-P256-SHA256') {\n\t\t\tcurve = 'nistp256';\n\t\t\tsize = 256;\n\t\t}\n\t\t// DNSSEC generates the public-key on the fly (go calculate it)\n\t\tvar publicKey = utils.publicFromPrivateECDSA(curve, d);\n\t\tvar Q = publicKey.part['Q'].data;\n\t\tvar ecdsaKey = {\n\t\t\ttype: 'ecdsa',\n\t\t\tcurve: curve,\n\t\t\tsize: size,\n\t\t\tparts: [\n\t\t\t\t{name: 'curve', data: Buffer.from(curve) },\n\t\t\t\t{name: 'd', data: d },\n\t\t\t\t{name: 'Q', data: Q }\n\t\t\t]\n\t\t};\n\t\treturn (new PrivateKey(ecdsaKey));\n\t}\n\tthrow (new Error('Unsupported algorithm: ' + supportedAlgosById[alg]));\n}\n\nfunction dnssecTimestamp(date) {\n\tvar year = date.getFullYear() + ''; //stringify\n\tvar month = (date.getMonth() + 1);\n\tvar timestampStr = year + month + date.getUTCDate();\n\ttimestampStr += '' + date.getUTCHours() + date.getUTCMinutes();\n\ttimestampStr += date.getUTCSeconds();\n\treturn (timestampStr);\n}\n\nfunction rsaAlgFromOptions(opts) {\n\tif (!opts || !opts.hashAlgo || opts.hashAlgo === 'sha1')\n\t\treturn ('5 (RSASHA1)');\n\telse if (opts.hashAlgo === 'sha256')\n\t\treturn ('8 (RSASHA256)');\n\telse if (opts.hashAlgo === 'sha512')\n\t\treturn ('10 (RSASHA512)');\n\telse\n\t\tthrow (new Error('Unknown or unsupported hash: ' +\n\t\t    opts.hashAlgo));\n}\n\nfunction writeRSA(key, options) {\n\t// if we're missing parts, add them.\n\tif (!key.part.dmodp || !key.part.dmodq) {\n\t\tutils.addRSAMissing(key);\n\t}\n\n\tvar out = '';\n\tout += 'Private-key-format: v1.3\\n';\n\tout += 'Algorithm: ' + rsaAlgFromOptions(options) + '\\n';\n\tvar n = utils.mpDenormalize(key.part['n'].data);\n\tout += 'Modulus: ' + n.toString('base64') + '\\n';\n\tvar e = utils.mpDenormalize(key.part['e'].data);\n\tout += 'PublicExponent: ' + e.toString('base64') + '\\n';\n\tvar d = utils.mpDenormalize(key.part['d'].data);\n\tout += 'PrivateExponent: ' + d.toString('base64') + '\\n';\n\tvar p = utils.mpDenormalize(key.part['p'].data);\n\tout += 'Prime1: ' + p.toString('base64') + '\\n';\n\tvar q = utils.mpDenormalize(key.part['q'].data);\n\tout += 'Prime2: ' + q.toString('base64') + '\\n';\n\tvar dmodp = utils.mpDenormalize(key.part['dmodp'].data);\n\tout += 'Exponent1: ' + dmodp.toString('base64') + '\\n';\n\tvar dmodq = utils.mpDenormalize(key.part['dmodq'].data);\n\tout += 'Exponent2: ' + dmodq.toString('base64') + '\\n';\n\tvar iqmp = utils.mpDenormalize(key.part['iqmp'].data);\n\tout += 'Coefficient: ' + iqmp.toString('base64') + '\\n';\n\t// Assume that we're valid as-of now\n\tvar timestamp = new Date();\n\tout += 'Created: ' + dnssecTimestamp(timestamp) + '\\n';\n\tout += 'Publish: ' + dnssecTimestamp(timestamp) + '\\n';\n\tout += 'Activate: ' + dnssecTimestamp(timestamp) + '\\n';\n\treturn (Buffer.from(out, 'ascii'));\n}\n\nfunction writeECDSA(key, options) {\n\tvar out = '';\n\tout += 'Private-key-format: v1.3\\n';\n\n\tif (key.curve === 'nistp256') {\n\t\tout += 'Algorithm: 13 (ECDSAP256SHA256)\\n';\n\t} else if (key.curve === 'nistp384') {\n\t\tout += 'Algorithm: 14 (ECDSAP384SHA384)\\n';\n\t} else {\n\t\tthrow (new Error('Unsupported curve'));\n\t}\n\tvar base64Key = key.part['d'].data.toString('base64');\n\tout += 'PrivateKey: ' + base64Key + '\\n';\n\n\t// Assume that we're valid as-of now\n\tvar timestamp = new Date();\n\tout += 'Created: ' + dnssecTimestamp(timestamp) + '\\n';\n\tout += 'Publish: ' + dnssecTimestamp(timestamp) + '\\n';\n\tout += 'Activate: ' + dnssecTimestamp(timestamp) + '\\n';\n\n\treturn (Buffer.from(out, 'ascii'));\n}\n\nfunction write(key, options) {\n\tif (PrivateKey.isPrivateKey(key)) {\n\t\tif (key.type === 'rsa') {\n\t\t\treturn (writeRSA(key, options));\n\t\t} else if (key.type === 'ecdsa') {\n\t\t\treturn (writeECDSA(key, options));\n\t\t} else {\n\t\t\tthrow (new Error('Unsupported algorithm: ' + key.type));\n\t\t}\n\t} else if (Key.isKey(key)) {\n\t\t/*\n\t\t * RFC3110 requires a keyname, and a keytype, which we\n\t\t * don't really have a mechanism for specifying such\n\t\t * additional metadata.\n\t\t */\n\t\tthrow (new Error('Format \"dnssec\" only supports ' +\n\t\t    'writing private keys'));\n\t} else {\n\t\tthrow (new Error('key is not a Key or PrivateKey'));\n\t}\n}\n", "// Copyright 2018 Joyent, Inc.\n\nmodule.exports = {\n\tread: read,\n\twrite: write\n};\n\nvar assert = require('assert-plus');\nvar Buffer = require('safer-buffer').Buffer;\nvar rfc4253 = require('./rfc4253');\nvar Key = require('../key');\n\nvar errors = require('../errors');\n\nfunction read(buf, options) {\n\tvar lines = buf.toString('ascii').split(/[\\r\\n]+/);\n\tvar found = false;\n\tvar parts;\n\tvar si = 0;\n\twhile (si < lines.length) {\n\t\tparts = splitHeader(lines[si++]);\n\t\tif (parts &&\n\t\t    parts[0].toLowerCase() === 'putty-user-key-file-2') {\n\t\t\tfound = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (!found) {\n\t\tthrow (new Error('No PuTTY format first line found'));\n\t}\n\tvar alg = parts[1];\n\n\tparts = splitHeader(lines[si++]);\n\tassert.equal(parts[0].toLowerCase(), 'encryption');\n\n\tparts = splitHeader(lines[si++]);\n\tassert.equal(parts[0].toLowerCase(), 'comment');\n\tvar comment = parts[1];\n\n\tparts = splitHeader(lines[si++]);\n\tassert.equal(parts[0].toLowerCase(), 'public-lines');\n\tvar publicLines = parseInt(parts[1], 10);\n\tif (!isFinite(publicLines) || publicLines < 0 ||\n\t    publicLines > lines.length) {\n\t\tthrow (new Error('Invalid public-lines count'));\n\t}\n\n\tvar publicBuf = Buffer.from(\n\t    lines.slice(si, si + publicLines).join(''), 'base64');\n\tvar keyType = rfc4253.algToKeyType(alg);\n\tvar key = rfc4253.read(publicBuf);\n\tif (key.type !== keyType) {\n\t\tthrow (new Error('Outer key algorithm mismatch'));\n\t}\n\tkey.comment = comment;\n\treturn (key);\n}\n\nfunction splitHeader(line) {\n\tvar idx = line.indexOf(':');\n\tif (idx === -1)\n\t\treturn (null);\n\tvar header = line.slice(0, idx);\n\t++idx;\n\twhile (line[idx] === ' ')\n\t\t++idx;\n\tvar rest = line.slice(idx);\n\treturn ([header, rest]);\n}\n\nfunction write(key, options) {\n\tassert.object(key);\n\tif (!Key.isKey(key))\n\t\tthrow (new Error('Must be a public key'));\n\n\tvar alg = rfc4253.keyTypeToAlg(key);\n\tvar buf = rfc4253.write(key);\n\tvar comment = key.comment || '';\n\n\tvar b64 = buf.toString('base64');\n\tvar lines = wrap(b64, 64);\n\n\tlines.unshift('Public-Lines: ' + lines.length);\n\tlines.unshift('Comment: ' + comment);\n\tlines.unshift('Encryption: none');\n\tlines.unshift('PuTTY-User-Key-File-2: ' + alg);\n\n\treturn (Buffer.from(lines.join('\\n') + '\\n'));\n}\n\nfunction wrap(txt, len) {\n\tvar lines = [];\n\tvar pos = 0;\n\twhile (pos < txt.length) {\n\t\tlines.push(txt.slice(pos, pos + 64));\n\t\tpos += 64;\n\t}\n\treturn (lines);\n}\n", "// Copyright 2018 Joyent, Inc.\n\nmodule.exports = {\n\tread: read,\n\twrite: write\n};\n\nvar assert = require('assert-plus');\nvar Buffer = require('safer-buffer').Buffer;\nvar utils = require('../utils');\nvar Key = require('../key');\nvar PrivateKey = require('../private-key');\n\nvar pem = require('./pem');\nvar ssh = require('./ssh');\nvar rfc4253 = require('./rfc4253');\nvar dnssec = require('./dnssec');\nvar putty = require('./putty');\n\nvar DNSSEC_PRIVKEY_HEADER_PREFIX = 'Private-key-format: v1';\n\nfunction read(buf, options) {\n\tif (typeof (buf) === 'string') {\n\t\tif (buf.trim().match(/^[-]+[ ]*BEGIN/))\n\t\t\treturn (pem.read(buf, options));\n\t\tif (buf.match(/^\\s*ssh-[a-z]/))\n\t\t\treturn (ssh.read(buf, options));\n\t\tif (buf.match(/^\\s*ecdsa-/))\n\t\t\treturn (ssh.read(buf, options));\n\t\tif (buf.match(/^putty-user-key-file-2:/i))\n\t\t\treturn (putty.read(buf, options));\n\t\tif (findDNSSECHeader(buf))\n\t\t\treturn (dnssec.read(buf, options));\n\t\tbuf = Buffer.from(buf, 'binary');\n\t} else {\n\t\tassert.buffer(buf);\n\t\tif (findPEMHeader(buf))\n\t\t\treturn (pem.read(buf, options));\n\t\tif (findSSHHeader(buf))\n\t\t\treturn (ssh.read(buf, options));\n\t\tif (findPuTTYHeader(buf))\n\t\t\treturn (putty.read(buf, options));\n\t\tif (findDNSSECHeader(buf))\n\t\t\treturn (dnssec.read(buf, options));\n\t}\n\tif (buf.readUInt32BE(0) < buf.length)\n\t\treturn (rfc4253.read(buf, options));\n\tthrow (new Error('Failed to auto-detect format of key'));\n}\n\nfunction findPuTTYHeader(buf) {\n\tvar offset = 0;\n\twhile (offset < buf.length &&\n\t    (buf[offset] === 32 || buf[offset] === 10 || buf[offset] === 9))\n\t\t++offset;\n\tif (offset + 22 <= buf.length &&\n\t    buf.slice(offset, offset + 22).toString('ascii').toLowerCase() ===\n\t    'putty-user-key-file-2:')\n\t\treturn (true);\n\treturn (false);\n}\n\nfunction findSSHHeader(buf) {\n\tvar offset = 0;\n\twhile (offset < buf.length &&\n\t    (buf[offset] === 32 || buf[offset] === 10 || buf[offset] === 9))\n\t\t++offset;\n\tif (offset + 4 <= buf.length &&\n\t    buf.slice(offset, offset + 4).toString('ascii') === 'ssh-')\n\t\treturn (true);\n\tif (offset + 6 <= buf.length &&\n\t    buf.slice(offset, offset + 6).toString('ascii') === 'ecdsa-')\n\t\treturn (true);\n\treturn (false);\n}\n\nfunction findPEMHeader(buf) {\n\tvar offset = 0;\n\twhile (offset < buf.length &&\n\t    (buf[offset] === 32 || buf[offset] === 10))\n\t\t++offset;\n\tif (buf[offset] !== 45)\n\t\treturn (false);\n\twhile (offset < buf.length &&\n\t    (buf[offset] === 45))\n\t\t++offset;\n\twhile (offset < buf.length &&\n\t    (buf[offset] === 32))\n\t\t++offset;\n\tif (offset + 5 > buf.length ||\n\t    buf.slice(offset, offset + 5).toString('ascii') !== 'BEGIN')\n\t\treturn (false);\n\treturn (true);\n}\n\nfunction findDNSSECHeader(buf) {\n\t// private case first\n\tif (buf.length <= DNSSEC_PRIVKEY_HEADER_PREFIX.length)\n\t\treturn (false);\n\tvar headerCheck = buf.slice(0, DNSSEC_PRIVKEY_HEADER_PREFIX.length);\n\tif (headerCheck.toString('ascii') === DNSSEC_PRIVKEY_HEADER_PREFIX)\n\t\treturn (true);\n\n\t// public-key RFC3110 ?\n\t// 'domain.com. IN KEY ...' or 'domain.com. IN DNSKEY ...'\n\t// skip any comment-lines\n\tif (typeof (buf) !== 'string') {\n\t\tbuf = buf.toString('ascii');\n\t}\n\tvar lines = buf.split('\\n');\n\tvar line = 0;\n\t/* JSSTYLED */\n\twhile (lines[line].match(/^\\;/))\n\t\tline++;\n\tif (lines[line].toString('ascii').match(/\\. IN KEY /))\n\t\treturn (true);\n\tif (lines[line].toString('ascii').match(/\\. IN DNSKEY /))\n\t\treturn (true);\n\treturn (false);\n}\n\nfunction write(key, options) {\n\tthrow (new Error('\"auto\" format cannot be used for writing'));\n}\n", "// Copyright 2017 Joyent, Inc.\n\nmodule.exports = PrivateKey;\n\nvar assert = require('assert-plus');\nvar Buffer = require('safer-buffer').Buffer;\nvar algs = require('./algs');\nvar crypto = require('crypto');\nvar Fingerprint = require('./fingerprint');\nvar Signature = require('./signature');\nvar errs = require('./errors');\nvar util = require('util');\nvar utils = require('./utils');\nvar dhe = require('./dhe');\nvar generateECDSA = dhe.generateECDSA;\nvar generateED25519 = dhe.generateED25519;\nvar edCompat = require('./ed-compat');\nvar nacl = require('tweetnacl');\n\nvar Key = require('./key');\n\nvar InvalidAlgorithmError = errs.InvalidAlgorithmError;\nvar KeyParseError = errs.KeyParseError;\nvar KeyEncryptedError = errs.KeyEncryptedError;\n\nvar formats = {};\nformats['auto'] = require('./formats/auto');\nformats['pem'] = require('./formats/pem');\nformats['pkcs1'] = require('./formats/pkcs1');\nformats['pkcs8'] = require('./formats/pkcs8');\nformats['rfc4253'] = require('./formats/rfc4253');\nformats['ssh-private'] = require('./formats/ssh-private');\nformats['openssh'] = formats['ssh-private'];\nformats['ssh'] = formats['ssh-private'];\nformats['dnssec'] = require('./formats/dnssec');\n\nfunction PrivateKey(opts) {\n\tassert.object(opts, 'options');\n\tKey.call(this, opts);\n\n\tthis._pubCache = undefined;\n}\nutil.inherits(PrivateKey, Key);\n\nPrivateKey.formats = formats;\n\nPrivateKey.prototype.toBuffer = function (format, options) {\n\tif (format === undefined)\n\t\tformat = 'pkcs1';\n\tassert.string(format, 'format');\n\tassert.object(formats[format], 'formats[format]');\n\tassert.optionalObject(options, 'options');\n\n\treturn (formats[format].write(this, options));\n};\n\nPrivateKey.prototype.hash = function (algo, type) {\n\treturn (this.toPublic().hash(algo, type));\n};\n\nPrivateKey.prototype.fingerprint = function (algo, type) {\n\treturn (this.toPublic().fingerprint(algo, type));\n};\n\nPrivateKey.prototype.toPublic = function () {\n\tif (this._pubCache)\n\t\treturn (this._pubCache);\n\n\tvar algInfo = algs.info[this.type];\n\tvar pubParts = [];\n\tfor (var i = 0; i < algInfo.parts.length; ++i) {\n\t\tvar p = algInfo.parts[i];\n\t\tpubParts.push(this.part[p]);\n\t}\n\n\tthis._pubCache = new Key({\n\t\ttype: this.type,\n\t\tsource: this,\n\t\tparts: pubParts\n\t});\n\tif (this.comment)\n\t\tthis._pubCache.comment = this.comment;\n\treturn (this._pubCache);\n};\n\nPrivateKey.prototype.derive = function (newType) {\n\tassert.string(newType, 'type');\n\tvar priv, pub, pair;\n\n\tif (this.type === 'ed25519' && newType === 'curve25519') {\n\t\tpriv = this.part.k.data;\n\t\tif (priv[0] === 0x00)\n\t\t\tpriv = priv.slice(1);\n\n\t\tpair = nacl.box.keyPair.fromSecretKey(new Uint8Array(priv));\n\t\tpub = Buffer.from(pair.publicKey);\n\n\t\treturn (new PrivateKey({\n\t\t\ttype: 'curve25519',\n\t\t\tparts: [\n\t\t\t\t{ name: 'A', data: utils.mpNormalize(pub) },\n\t\t\t\t{ name: 'k', data: utils.mpNormalize(priv) }\n\t\t\t]\n\t\t}));\n\t} else if (this.type === 'curve25519' && newType === 'ed25519') {\n\t\tpriv = this.part.k.data;\n\t\tif (priv[0] === 0x00)\n\t\t\tpriv = priv.slice(1);\n\n\t\tpair = nacl.sign.keyPair.fromSeed(new Uint8Array(priv));\n\t\tpub = Buffer.from(pair.publicKey);\n\n\t\treturn (new PrivateKey({\n\t\t\ttype: 'ed25519',\n\t\t\tparts: [\n\t\t\t\t{ name: 'A', data: utils.mpNormalize(pub) },\n\t\t\t\t{ name: 'k', data: utils.mpNormalize(priv) }\n\t\t\t]\n\t\t}));\n\t}\n\tthrow (new Error('Key derivation not supported from ' + this.type +\n\t    ' to ' + newType));\n};\n\nPrivateKey.prototype.createVerify = function (hashAlgo) {\n\treturn (this.toPublic().createVerify(hashAlgo));\n};\n\nPrivateKey.prototype.createSign = function (hashAlgo) {\n\tif (hashAlgo === undefined)\n\t\thashAlgo = this.defaultHashAlgorithm();\n\tassert.string(hashAlgo, 'hash algorithm');\n\n\t/* ED25519 is not supported by OpenSSL, use a javascript impl. */\n\tif (this.type === 'ed25519' && edCompat !== undefined)\n\t\treturn (new edCompat.Signer(this, hashAlgo));\n\tif (this.type === 'curve25519')\n\t\tthrow (new Error('Curve25519 keys are not suitable for ' +\n\t\t    'signing or verification'));\n\n\tvar v, nm, err;\n\ttry {\n\t\tnm = hashAlgo.toUpperCase();\n\t\tv = crypto.createSign(nm);\n\t} catch (e) {\n\t\terr = e;\n\t}\n\tif (v === undefined || (err instanceof Error &&\n\t    err.message.match(/Unknown message digest/))) {\n\t\tnm = 'RSA-';\n\t\tnm += hashAlgo.toUpperCase();\n\t\tv = crypto.createSign(nm);\n\t}\n\tassert.ok(v, 'failed to create verifier');\n\tvar oldSign = v.sign.bind(v);\n\tvar key = this.toBuffer('pkcs1');\n\tvar type = this.type;\n\tvar curve = this.curve;\n\tv.sign = function () {\n\t\tvar sig = oldSign(key);\n\t\tif (typeof (sig) === 'string')\n\t\t\tsig = Buffer.from(sig, 'binary');\n\t\tsig = Signature.parse(sig, type, 'asn1');\n\t\tsig.hashAlgorithm = hashAlgo;\n\t\tsig.curve = curve;\n\t\treturn (sig);\n\t};\n\treturn (v);\n};\n\nPrivateKey.parse = function (data, format, options) {\n\tif (typeof (data) !== 'string')\n\t\tassert.buffer(data, 'data');\n\tif (format === undefined)\n\t\tformat = 'auto';\n\tassert.string(format, 'format');\n\tif (typeof (options) === 'string')\n\t\toptions = { filename: options };\n\tassert.optionalObject(options, 'options');\n\tif (options === undefined)\n\t\toptions = {};\n\tassert.optionalString(options.filename, 'options.filename');\n\tif (options.filename === undefined)\n\t\toptions.filename = '(unnamed)';\n\n\tassert.object(formats[format], 'formats[format]');\n\n\ttry {\n\t\tvar k = formats[format].read(data, options);\n\t\tassert.ok(k instanceof PrivateKey, 'key is not a private key');\n\t\tif (!k.comment)\n\t\t\tk.comment = options.filename;\n\t\treturn (k);\n\t} catch (e) {\n\t\tif (e.name === 'KeyEncryptedError')\n\t\t\tthrow (e);\n\t\tthrow (new KeyParseError(options.filename, format, e));\n\t}\n};\n\nPrivateKey.isPrivateKey = function (obj, ver) {\n\treturn (utils.isCompatible(obj, PrivateKey, ver));\n};\n\nPrivateKey.generate = function (type, options) {\n\tif (options === undefined)\n\t\toptions = {};\n\tassert.object(options, 'options');\n\n\tswitch (type) {\n\tcase 'ecdsa':\n\t\tif (options.curve === undefined)\n\t\t\toptions.curve = 'nistp256';\n\t\tassert.string(options.curve, 'options.curve');\n\t\treturn (generateECDSA(options.curve));\n\tcase 'ed25519':\n\t\treturn (generateED25519());\n\tdefault:\n\t\tthrow (new Error('Key generation not supported with key ' +\n\t\t    'type \"' + type + '\"'));\n\t}\n};\n\n/*\n * API versions for PrivateKey:\n * [1,0] -- initial ver\n * [1,1] -- added auto, pkcs[18], openssh/ssh-private formats\n * [1,2] -- added defaultHashAlgorithm\n * [1,3] -- added derive, ed, createDH\n * [1,4] -- first tagged version\n * [1,5] -- changed ed25519 part names and format\n * [1,6] -- type arguments for hash() and fingerprint()\n */\nPrivateKey.prototype._sshpkApiVersion = [1, 6];\n\nPrivateKey._oldVersionDetect = function (obj) {\n\tassert.func(obj.toPublic);\n\tassert.func(obj.createSign);\n\tif (obj.derive)\n\t\treturn ([1, 3]);\n\tif (obj.defaultHashAlgorithm)\n\t\treturn ([1, 2]);\n\tif (obj.formats['auto'])\n\t\treturn ([1, 1]);\n\treturn ([1, 0]);\n};\n", "// Copyright 2017 Joyent, Inc.\n\nmodule.exports = Identity;\n\nvar assert = require('assert-plus');\nvar algs = require('./algs');\nvar crypto = require('crypto');\nvar Fingerprint = require('./fingerprint');\nvar Signature = require('./signature');\nvar errs = require('./errors');\nvar util = require('util');\nvar utils = require('./utils');\nvar asn1 = require('asn1');\nvar Buffer = require('safer-buffer').Buffer;\n\n/*JSSTYLED*/\nvar DNS_NAME_RE = /^([*]|[a-z0-9][a-z0-9\\-]{0,62})(?:\\.([*]|[a-z0-9][a-z0-9\\-]{0,62}))*$/i;\n\nvar oids = {};\noids.cn = '2.5.4.3';\noids.o = '2.5.4.10';\noids.ou = '2.5.4.11';\noids.l = '2.5.4.7';\noids.s = '2.5.4.8';\noids.c = '2.5.4.6';\noids.sn = '2.5.4.4';\noids.postalCode = '2.5.4.17';\noids.serialNumber = '2.5.4.5';\noids.street = '2.5.4.9';\noids.x500UniqueIdentifier = '2.5.4.45';\noids.role = '2.5.4.72';\noids.telephoneNumber = '2.5.4.20';\noids.description = '2.5.4.13';\noids.dc = '0.9.2342.19200300.100.1.25';\noids.uid = '0.9.2342.19200300.100.1.1';\noids.mail = '0.9.2342.19200300.100.1.3';\noids.title = '2.5.4.12';\noids.gn = '2.5.4.42';\noids.initials = '2.5.4.43';\noids.pseudonym = '2.5.4.65';\noids.emailAddress = '1.2.840.113549.1.9.1';\n\nvar unoids = {};\nObject.keys(oids).forEach(function (k) {\n\tunoids[oids[k]] = k;\n});\n\nfunction Identity(opts) {\n\tvar self = this;\n\tassert.object(opts, 'options');\n\tassert.arrayOfObject(opts.components, 'options.components');\n\tthis.components = opts.components;\n\tthis.componentLookup = {};\n\tthis.components.forEach(function (c) {\n\t\tif (c.name && !c.oid)\n\t\t\tc.oid = oids[c.name];\n\t\tif (c.oid && !c.name)\n\t\t\tc.name = unoids[c.oid];\n\t\tif (self.componentLookup[c.name] === undefined)\n\t\t\tself.componentLookup[c.name] = [];\n\t\tself.componentLookup[c.name].push(c);\n\t});\n\tif (this.componentLookup.cn && this.componentLookup.cn.length > 0) {\n\t\tthis.cn = this.componentLookup.cn[0].value;\n\t}\n\tassert.optionalString(opts.type, 'options.type');\n\tif (opts.type === undefined) {\n\t\tif (this.components.length === 1 &&\n\t\t    this.componentLookup.cn &&\n\t\t    this.componentLookup.cn.length === 1 &&\n\t\t    this.componentLookup.cn[0].value.match(DNS_NAME_RE)) {\n\t\t\tthis.type = 'host';\n\t\t\tthis.hostname = this.componentLookup.cn[0].value;\n\n\t\t} else if (this.componentLookup.dc &&\n\t\t    this.components.length === this.componentLookup.dc.length) {\n\t\t\tthis.type = 'host';\n\t\t\tthis.hostname = this.componentLookup.dc.map(\n\t\t\t    function (c) {\n\t\t\t\treturn (c.value);\n\t\t\t}).join('.');\n\n\t\t} else if (this.componentLookup.uid &&\n\t\t    this.components.length ===\n\t\t    this.componentLookup.uid.length) {\n\t\t\tthis.type = 'user';\n\t\t\tthis.uid = this.componentLookup.uid[0].value;\n\n\t\t} else if (this.componentLookup.cn &&\n\t\t    this.componentLookup.cn.length === 1 &&\n\t\t    this.componentLookup.cn[0].value.match(DNS_NAME_RE)) {\n\t\t\tthis.type = 'host';\n\t\t\tthis.hostname = this.componentLookup.cn[0].value;\n\n\t\t} else if (this.componentLookup.uid &&\n\t\t    this.componentLookup.uid.length === 1) {\n\t\t\tthis.type = 'user';\n\t\t\tthis.uid = this.componentLookup.uid[0].value;\n\n\t\t} else if (this.componentLookup.mail &&\n\t\t    this.componentLookup.mail.length === 1) {\n\t\t\tthis.type = 'email';\n\t\t\tthis.email = this.componentLookup.mail[0].value;\n\n\t\t} else if (this.componentLookup.cn &&\n\t\t    this.componentLookup.cn.length === 1) {\n\t\t\tthis.type = 'user';\n\t\t\tthis.uid = this.componentLookup.cn[0].value;\n\n\t\t} else {\n\t\t\tthis.type = 'unknown';\n\t\t}\n\t} else {\n\t\tthis.type = opts.type;\n\t\tif (this.type === 'host')\n\t\t\tthis.hostname = opts.hostname;\n\t\telse if (this.type === 'user')\n\t\t\tthis.uid = opts.uid;\n\t\telse if (this.type === 'email')\n\t\t\tthis.email = opts.email;\n\t\telse\n\t\t\tthrow (new Error('Unknown type ' + this.type));\n\t}\n}\n\nIdentity.prototype.toString = function () {\n\treturn (this.components.map(function (c) {\n\t\tvar n = c.name.toUpperCase();\n\t\t/*JSSTYLED*/\n\t\tn = n.replace(/=/g, '\\\\=');\n\t\tvar v = c.value;\n\t\t/*JSSTYLED*/\n\t\tv = v.replace(/,/g, '\\\\,');\n\t\treturn (n + '=' + v);\n\t}).join(', '));\n};\n\nIdentity.prototype.get = function (name, asArray) {\n\tassert.string(name, 'name');\n\tvar arr = this.componentLookup[name];\n\tif (arr === undefined || arr.length === 0)\n\t\treturn (undefined);\n\tif (!asArray && arr.length > 1)\n\t\tthrow (new Error('Multiple values for attribute ' + name));\n\tif (!asArray)\n\t\treturn (arr[0].value);\n\treturn (arr.map(function (c) {\n\t\treturn (c.value);\n\t}));\n};\n\nIdentity.prototype.toArray = function (idx) {\n\treturn (this.components.map(function (c) {\n\t\treturn ({\n\t\t\tname: c.name,\n\t\t\tvalue: c.value\n\t\t});\n\t}));\n};\n\n/*\n * These are from X.680 -- PrintableString allowed chars are in section 37.4\n * table 8. Spec for IA5Strings is \"1,6 + SPACE + DEL\" where 1 refers to\n * ISO IR #001 (standard ASCII control characters) and 6 refers to ISO IR #006\n * (the basic ASCII character set).\n */\n/* JSSTYLED */\nvar NOT_PRINTABLE = /[^a-zA-Z0-9 '(),+.\\/:=?-]/;\n/* JSSTYLED */\nvar NOT_IA5 = /[^\\x00-\\x7f]/;\n\nIdentity.prototype.toAsn1 = function (der, tag) {\n\tder.startSequence(tag);\n\tthis.components.forEach(function (c) {\n\t\tder.startSequence(asn1.Ber.Constructor | asn1.Ber.Set);\n\t\tder.startSequence();\n\t\tder.writeOID(c.oid);\n\t\t/*\n\t\t * If we fit in a PrintableString, use that. Otherwise use an\n\t\t * IA5String or UTF8String.\n\t\t *\n\t\t * If this identity was parsed from a DN, use the ASN.1 types\n\t\t * from the original representation (otherwise this might not\n\t\t * be a full match for the original in some validators).\n\t\t */\n\t\tif (c.asn1type === asn1.Ber.Utf8String ||\n\t\t    c.value.match(NOT_IA5)) {\n\t\t\tvar v = Buffer.from(c.value, 'utf8');\n\t\t\tder.writeBuffer(v, asn1.Ber.Utf8String);\n\n\t\t} else if (c.asn1type === asn1.Ber.IA5String ||\n\t\t    c.value.match(NOT_PRINTABLE)) {\n\t\t\tder.writeString(c.value, asn1.Ber.IA5String);\n\n\t\t} else {\n\t\t\tvar type = asn1.Ber.PrintableString;\n\t\t\tif (c.asn1type !== undefined)\n\t\t\t\ttype = c.asn1type;\n\t\t\tder.writeString(c.value, type);\n\t\t}\n\t\tder.endSequence();\n\t\tder.endSequence();\n\t});\n\tder.endSequence();\n};\n\nfunction globMatch(a, b) {\n\tif (a === '**' || b === '**')\n\t\treturn (true);\n\tvar aParts = a.split('.');\n\tvar bParts = b.split('.');\n\tif (aParts.length !== bParts.length)\n\t\treturn (false);\n\tfor (var i = 0; i < aParts.length; ++i) {\n\t\tif (aParts[i] === '*' || bParts[i] === '*')\n\t\t\tcontinue;\n\t\tif (aParts[i] !== bParts[i])\n\t\t\treturn (false);\n\t}\n\treturn (true);\n}\n\nIdentity.prototype.equals = function (other) {\n\tif (!Identity.isIdentity(other, [1, 0]))\n\t\treturn (false);\n\tif (other.components.length !== this.components.length)\n\t\treturn (false);\n\tfor (var i = 0; i < this.components.length; ++i) {\n\t\tif (this.components[i].oid !== other.components[i].oid)\n\t\t\treturn (false);\n\t\tif (!globMatch(this.components[i].value,\n\t\t    other.components[i].value)) {\n\t\t\treturn (false);\n\t\t}\n\t}\n\treturn (true);\n};\n\nIdentity.forHost = function (hostname) {\n\tassert.string(hostname, 'hostname');\n\treturn (new Identity({\n\t\ttype: 'host',\n\t\thostname: hostname,\n\t\tcomponents: [ { name: 'cn', value: hostname } ]\n\t}));\n};\n\nIdentity.forUser = function (uid) {\n\tassert.string(uid, 'uid');\n\treturn (new Identity({\n\t\ttype: 'user',\n\t\tuid: uid,\n\t\tcomponents: [ { name: 'uid', value: uid } ]\n\t}));\n};\n\nIdentity.forEmail = function (email) {\n\tassert.string(email, 'email');\n\treturn (new Identity({\n\t\ttype: 'email',\n\t\temail: email,\n\t\tcomponents: [ { name: 'mail', value: email } ]\n\t}));\n};\n\nIdentity.parseDN = function (dn) {\n\tassert.string(dn, 'dn');\n\tvar parts = [''];\n\tvar idx = 0;\n\tvar rem = dn;\n\twhile (rem.length > 0) {\n\t\tvar m;\n\t\t/*JSSTYLED*/\n\t\tif ((m = /^,/.exec(rem)) !== null) {\n\t\t\tparts[++idx] = '';\n\t\t\trem = rem.slice(m[0].length);\n\t\t/*JSSTYLED*/\n\t\t} else if ((m = /^\\\\,/.exec(rem)) !== null) {\n\t\t\tparts[idx] += ',';\n\t\t\trem = rem.slice(m[0].length);\n\t\t/*JSSTYLED*/\n\t\t} else if ((m = /^\\\\./.exec(rem)) !== null) {\n\t\t\tparts[idx] += m[0];\n\t\t\trem = rem.slice(m[0].length);\n\t\t/*JSSTYLED*/\n\t\t} else if ((m = /^[^\\\\,]+/.exec(rem)) !== null) {\n\t\t\tparts[idx] += m[0];\n\t\t\trem = rem.slice(m[0].length);\n\t\t} else {\n\t\t\tthrow (new Error('Failed to parse DN'));\n\t\t}\n\t}\n\tvar cmps = parts.map(function (c) {\n\t\tc = c.trim();\n\t\tvar eqPos = c.indexOf('=');\n\t\twhile (eqPos > 0 && c.charAt(eqPos - 1) === '\\\\')\n\t\t\teqPos = c.indexOf('=', eqPos + 1);\n\t\tif (eqPos === -1) {\n\t\t\tthrow (new Error('Failed to parse DN'));\n\t\t}\n\t\t/*JSSTYLED*/\n\t\tvar name = c.slice(0, eqPos).toLowerCase().replace(/\\\\=/g, '=');\n\t\tvar value = c.slice(eqPos + 1);\n\t\treturn ({ name: name, value: value });\n\t});\n\treturn (new Identity({ components: cmps }));\n};\n\nIdentity.fromArray = function (components) {\n\tassert.arrayOfObject(components, 'components');\n\tcomponents.forEach(function (cmp) {\n\t\tassert.object(cmp, 'component');\n\t\tassert.string(cmp.name, 'component.name');\n\t\tif (!Buffer.isBuffer(cmp.value) &&\n\t\t    !(typeof (cmp.value) === 'string')) {\n\t\t\tthrow (new Error('Invalid component value'));\n\t\t}\n\t});\n\treturn (new Identity({ components: components }));\n};\n\nIdentity.parseAsn1 = function (der, top) {\n\tvar components = [];\n\tder.readSequence(top);\n\tvar end = der.offset + der.length;\n\twhile (der.offset < end) {\n\t\tder.readSequence(asn1.Ber.Constructor | asn1.Ber.Set);\n\t\tvar after = der.offset + der.length;\n\t\tder.readSequence();\n\t\tvar oid = der.readOID();\n\t\tvar type = der.peek();\n\t\tvar value;\n\t\tswitch (type) {\n\t\tcase asn1.Ber.PrintableString:\n\t\tcase asn1.Ber.IA5String:\n\t\tcase asn1.Ber.OctetString:\n\t\tcase asn1.Ber.T61String:\n\t\t\tvalue = der.readString(type);\n\t\t\tbreak;\n\t\tcase asn1.Ber.Utf8String:\n\t\t\tvalue = der.readString(type, true);\n\t\t\tvalue = value.toString('utf8');\n\t\t\tbreak;\n\t\tcase asn1.Ber.CharacterString:\n\t\tcase asn1.Ber.BMPString:\n\t\t\tvalue = der.readString(type, true);\n\t\t\tvalue = value.toString('utf16le');\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow (new Error('Unknown asn1 type ' + type));\n\t\t}\n\t\tcomponents.push({ oid: oid, asn1type: type, value: value });\n\t\tder._offset = after;\n\t}\n\tder._offset = end;\n\treturn (new Identity({\n\t\tcomponents: components\n\t}));\n};\n\nIdentity.isIdentity = function (obj, ver) {\n\treturn (utils.isCompatible(obj, Identity, ver));\n};\n\n/*\n * API versions for Identity:\n * [1,0] -- initial ver\n */\nIdentity.prototype._sshpkApiVersion = [1, 0];\n\nIdentity._oldVersionDetect = function (obj) {\n\treturn ([1, 0]);\n};\n", "// Copyright 2017 Joyent, Inc.\n\nmodule.exports = {\n\tread: read,\n\tverify: verify,\n\tsign: sign,\n\tsignAsync: signAsync,\n\twrite: write,\n\n\t/* Internal private API */\n\tfromBuffer: fromBuffer,\n\ttoBuffer: toBuffer\n};\n\nvar assert = require('assert-plus');\nvar SSHBuffer = require('../ssh-buffer');\nvar crypto = require('crypto');\nvar Buffer = require('safer-buffer').Buffer;\nvar algs = require('../algs');\nvar Key = require('../key');\nvar PrivateKey = require('../private-key');\nvar Identity = require('../identity');\nvar rfc4253 = require('./rfc4253');\nvar Signature = require('../signature');\nvar utils = require('../utils');\nvar Certificate = require('../certificate');\n\nfunction verify(cert, key) {\n\t/*\n\t * We always give an issuerKey, so if our verify() is being called then\n\t * there was no signature. Return false.\n\t */\n\treturn (false);\n}\n\nvar TYPES = {\n\t'user': 1,\n\t'host': 2\n};\nObject.keys(TYPES).forEach(function (k) { TYPES[TYPES[k]] = k; });\n\nvar ECDSA_ALGO = /^ecdsa-sha2-([^@-]+)-cert-v01@openssh.com$/;\n\nfunction read(buf, options) {\n\tif (Buffer.isBuffer(buf))\n\t\tbuf = buf.toString('ascii');\n\tvar parts = buf.trim().split(/[ \\t\\n]+/g);\n\tif (parts.length < 2 || parts.length > 3)\n\t\tthrow (new Error('Not a valid SSH certificate line'));\n\n\tvar algo = parts[0];\n\tvar data = parts[1];\n\n\tdata = Buffer.from(data, 'base64');\n\treturn (fromBuffer(data, algo));\n}\n\nfunction fromBuffer(data, algo, partial) {\n\tvar sshbuf = new SSHBuffer({ buffer: data });\n\tvar innerAlgo = sshbuf.readString();\n\tif (algo !== undefined && innerAlgo !== algo)\n\t\tthrow (new Error('SSH certificate algorithm mismatch'));\n\tif (algo === undefined)\n\t\talgo = innerAlgo;\n\n\tvar cert = {};\n\tcert.signatures = {};\n\tcert.signatures.openssh = {};\n\n\tcert.signatures.openssh.nonce = sshbuf.readBuffer();\n\n\tvar key = {};\n\tvar parts = (key.parts = []);\n\tkey.type = getAlg(algo);\n\n\tvar partCount = algs.info[key.type].parts.length;\n\twhile (parts.length < partCount)\n\t\tparts.push(sshbuf.readPart());\n\tassert.ok(parts.length >= 1, 'key must have at least one part');\n\n\tvar algInfo = algs.info[key.type];\n\tif (key.type === 'ecdsa') {\n\t\tvar res = ECDSA_ALGO.exec(algo);\n\t\tassert.ok(res !== null);\n\t\tassert.strictEqual(res[1], parts[0].data.toString());\n\t}\n\n\tfor (var i = 0; i < algInfo.parts.length; ++i) {\n\t\tparts[i].name = algInfo.parts[i];\n\t\tif (parts[i].name !== 'curve' &&\n\t\t    algInfo.normalize !== false) {\n\t\t\tvar p = parts[i];\n\t\t\tp.data = utils.mpNormalize(p.data);\n\t\t}\n\t}\n\n\tcert.subjectKey = new Key(key);\n\n\tcert.serial = sshbuf.readInt64();\n\n\tvar type = TYPES[sshbuf.readInt()];\n\tassert.string(type, 'valid cert type');\n\n\tcert.signatures.openssh.keyId = sshbuf.readString();\n\n\tvar principals = [];\n\tvar pbuf = sshbuf.readBuffer();\n\tvar psshbuf = new SSHBuffer({ buffer: pbuf });\n\twhile (!psshbuf.atEnd())\n\t\tprincipals.push(psshbuf.readString());\n\tif (principals.length === 0)\n\t\tprincipals = ['*'];\n\n\tcert.subjects = principals.map(function (pr) {\n\t\tif (type === 'user')\n\t\t\treturn (Identity.forUser(pr));\n\t\telse if (type === 'host')\n\t\t\treturn (Identity.forHost(pr));\n\t\tthrow (new Error('Unknown identity type ' + type));\n\t});\n\n\tcert.validFrom = int64ToDate(sshbuf.readInt64());\n\tcert.validUntil = int64ToDate(sshbuf.readInt64());\n\n\tvar exts = [];\n\tvar extbuf = new SSHBuffer({ buffer: sshbuf.readBuffer() });\n\tvar ext;\n\twhile (!extbuf.atEnd()) {\n\t\text = { critical: true };\n\t\text.name = extbuf.readString();\n\t\text.data = extbuf.readBuffer();\n\t\texts.push(ext);\n\t}\n\textbuf = new SSHBuffer({ buffer: sshbuf.readBuffer() });\n\twhile (!extbuf.atEnd()) {\n\t\text = { critical: false };\n\t\text.name = extbuf.readString();\n\t\text.data = extbuf.readBuffer();\n\t\texts.push(ext);\n\t}\n\tcert.signatures.openssh.exts = exts;\n\n\t/* reserved */\n\tsshbuf.readBuffer();\n\n\tvar signingKeyBuf = sshbuf.readBuffer();\n\tcert.issuerKey = rfc4253.read(signingKeyBuf);\n\n\t/*\n\t * OpenSSH certs don't give the identity of the issuer, just their\n\t * public key. So, we use an Identity that matches anything. The\n\t * isSignedBy() function will later tell you if the key matches.\n\t */\n\tcert.issuer = Identity.forHost('**');\n\n\tvar sigBuf = sshbuf.readBuffer();\n\tcert.signatures.openssh.signature =\n\t    Signature.parse(sigBuf, cert.issuerKey.type, 'ssh');\n\n\tif (partial !== undefined) {\n\t\tpartial.remainder = sshbuf.remainder();\n\t\tpartial.consumed = sshbuf._offset;\n\t}\n\n\treturn (new Certificate(cert));\n}\n\nfunction int64ToDate(buf) {\n\tvar i = buf.readUInt32BE(0) * 4294967296;\n\ti += buf.readUInt32BE(4);\n\tvar d = new Date();\n\td.setTime(i * 1000);\n\td.sourceInt64 = buf;\n\treturn (d);\n}\n\nfunction dateToInt64(date) {\n\tif (date.sourceInt64 !== undefined)\n\t\treturn (date.sourceInt64);\n\tvar i = Math.round(date.getTime() / 1000);\n\tvar upper = Math.floor(i / 4294967296);\n\tvar lower = Math.floor(i % 4294967296);\n\tvar buf = Buffer.alloc(8);\n\tbuf.writeUInt32BE(upper, 0);\n\tbuf.writeUInt32BE(lower, 4);\n\treturn (buf);\n}\n\nfunction sign(cert, key) {\n\tif (cert.signatures.openssh === undefined)\n\t\tcert.signatures.openssh = {};\n\ttry {\n\t\tvar blob = toBuffer(cert, true);\n\t} catch (e) {\n\t\tdelete (cert.signatures.openssh);\n\t\treturn (false);\n\t}\n\tvar sig = cert.signatures.openssh;\n\tvar hashAlgo = undefined;\n\tif (key.type === 'rsa' || key.type === 'dsa')\n\t\thashAlgo = 'sha1';\n\tvar signer = key.createSign(hashAlgo);\n\tsigner.write(blob);\n\tsig.signature = signer.sign();\n\treturn (true);\n}\n\nfunction signAsync(cert, signer, done) {\n\tif (cert.signatures.openssh === undefined)\n\t\tcert.signatures.openssh = {};\n\ttry {\n\t\tvar blob = toBuffer(cert, true);\n\t} catch (e) {\n\t\tdelete (cert.signatures.openssh);\n\t\tdone(e);\n\t\treturn;\n\t}\n\tvar sig = cert.signatures.openssh;\n\n\tsigner(blob, function (err, signature) {\n\t\tif (err) {\n\t\t\tdone(err);\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\t/*\n\t\t\t * This will throw if the signature isn't of a\n\t\t\t * type/algo that can be used for SSH.\n\t\t\t */\n\t\t\tsignature.toBuffer('ssh');\n\t\t} catch (e) {\n\t\t\tdone(e);\n\t\t\treturn;\n\t\t}\n\t\tsig.signature = signature;\n\t\tdone();\n\t});\n}\n\nfunction write(cert, options) {\n\tif (options === undefined)\n\t\toptions = {};\n\n\tvar blob = toBuffer(cert);\n\tvar out = getCertType(cert.subjectKey) + ' ' + blob.toString('base64');\n\tif (options.comment)\n\t\tout = out + ' ' + options.comment;\n\treturn (out);\n}\n\n\nfunction toBuffer(cert, noSig) {\n\tassert.object(cert.signatures.openssh, 'signature for openssh format');\n\tvar sig = cert.signatures.openssh;\n\n\tif (sig.nonce === undefined)\n\t\tsig.nonce = crypto.randomBytes(16);\n\tvar buf = new SSHBuffer({});\n\tbuf.writeString(getCertType(cert.subjectKey));\n\tbuf.writeBuffer(sig.nonce);\n\n\tvar key = cert.subjectKey;\n\tvar algInfo = algs.info[key.type];\n\talgInfo.parts.forEach(function (part) {\n\t\tbuf.writePart(key.part[part]);\n\t});\n\n\tbuf.writeInt64(cert.serial);\n\n\tvar type = cert.subjects[0].type;\n\tassert.notStrictEqual(type, 'unknown');\n\tcert.subjects.forEach(function (id) {\n\t\tassert.strictEqual(id.type, type);\n\t});\n\ttype = TYPES[type];\n\tbuf.writeInt(type);\n\n\tif (sig.keyId === undefined) {\n\t\tsig.keyId = cert.subjects[0].type + '_' +\n\t\t    (cert.subjects[0].uid || cert.subjects[0].hostname);\n\t}\n\tbuf.writeString(sig.keyId);\n\n\tvar sub = new SSHBuffer({});\n\tcert.subjects.forEach(function (id) {\n\t\tif (type === TYPES.host)\n\t\t\tsub.writeString(id.hostname);\n\t\telse if (type === TYPES.user)\n\t\t\tsub.writeString(id.uid);\n\t});\n\tbuf.writeBuffer(sub.toBuffer());\n\n\tbuf.writeInt64(dateToInt64(cert.validFrom));\n\tbuf.writeInt64(dateToInt64(cert.validUntil));\n\n\tvar exts = sig.exts;\n\tif (exts === undefined)\n\t\texts = [];\n\n\tvar extbuf = new SSHBuffer({});\n\texts.forEach(function (ext) {\n\t\tif (ext.critical !== true)\n\t\t\treturn;\n\t\textbuf.writeString(ext.name);\n\t\textbuf.writeBuffer(ext.data);\n\t});\n\tbuf.writeBuffer(extbuf.toBuffer());\n\n\textbuf = new SSHBuffer({});\n\texts.forEach(function (ext) {\n\t\tif (ext.critical === true)\n\t\t\treturn;\n\t\textbuf.writeString(ext.name);\n\t\textbuf.writeBuffer(ext.data);\n\t});\n\tbuf.writeBuffer(extbuf.toBuffer());\n\n\t/* reserved */\n\tbuf.writeBuffer(Buffer.alloc(0));\n\n\tsub = rfc4253.write(cert.issuerKey);\n\tbuf.writeBuffer(sub);\n\n\tif (!noSig)\n\t\tbuf.writeBuffer(sig.signature.toBuffer('ssh'));\n\n\treturn (buf.toBuffer());\n}\n\nfunction getAlg(certType) {\n\tif (certType === 'ssh-rsa-cert-v01@openssh.com')\n\t\treturn ('rsa');\n\tif (certType === 'ssh-dss-cert-v01@openssh.com')\n\t\treturn ('dsa');\n\tif (certType.match(ECDSA_ALGO))\n\t\treturn ('ecdsa');\n\tif (certType === 'ssh-ed25519-cert-v01@openssh.com')\n\t\treturn ('ed25519');\n\tthrow (new Error('Unsupported cert type ' + certType));\n}\n\nfunction getCertType(key) {\n\tif (key.type === 'rsa')\n\t\treturn ('ssh-rsa-cert-v01@openssh.com');\n\tif (key.type === 'dsa')\n\t\treturn ('ssh-dss-cert-v01@openssh.com');\n\tif (key.type === 'ecdsa')\n\t\treturn ('ecdsa-sha2-' + key.curve + '-cert-v01@openssh.com');\n\tif (key.type === 'ed25519')\n\t\treturn ('ssh-ed25519-cert-v01@openssh.com');\n\tthrow (new Error('Unsupported key type ' + key.type));\n}\n", "// Copyright 2017 Joyent, Inc.\n\nmodule.exports = {\n\tread: read,\n\tverify: verify,\n\tsign: sign,\n\tsignAsync: signAsync,\n\twrite: write\n};\n\nvar assert = require('assert-plus');\nvar asn1 = require('asn1');\nvar Buffer = require('safer-buffer').Buffer;\nvar algs = require('../algs');\nvar utils = require('../utils');\nvar Key = require('../key');\nvar PrivateKey = require('../private-key');\nvar pem = require('./pem');\nvar Identity = require('../identity');\nvar Signature = require('../signature');\nvar Certificate = require('../certificate');\nvar pkcs8 = require('./pkcs8');\n\n/*\n * This file is based on RFC5280 (X.509).\n */\n\n/* Helper to read in a single mpint */\nfunction readMPInt(der, nm) {\n\tassert.strictEqual(der.peek(), asn1.Ber.Integer,\n\t    nm + ' is not an Integer');\n\treturn (utils.mpNormalize(der.readString(asn1.Ber.Integer, true)));\n}\n\nfunction verify(cert, key) {\n\tvar sig = cert.signatures.x509;\n\tassert.object(sig, 'x509 signature');\n\n\tvar algParts = sig.algo.split('-');\n\tif (algParts[0] !== key.type)\n\t\treturn (false);\n\n\tvar blob = sig.cache;\n\tif (blob === undefined) {\n\t\tvar der = new asn1.BerWriter();\n\t\twriteTBSCert(cert, der);\n\t\tblob = der.buffer;\n\t}\n\n\tvar verifier = key.createVerify(algParts[1]);\n\tverifier.write(blob);\n\treturn (verifier.verify(sig.signature));\n}\n\nfunction Local(i) {\n\treturn (asn1.Ber.Context | asn1.Ber.Constructor | i);\n}\n\nfunction Context(i) {\n\treturn (asn1.Ber.Context | i);\n}\n\nvar SIGN_ALGS = {\n\t'rsa-md5': '1.2.840.113549.1.1.4',\n\t'rsa-sha1': '1.2.840.113549.1.1.5',\n\t'rsa-sha256': '1.2.840.113549.1.1.11',\n\t'rsa-sha384': '1.2.840.113549.1.1.12',\n\t'rsa-sha512': '1.2.840.113549.1.1.13',\n\t'dsa-sha1': '1.2.840.10040.4.3',\n\t'dsa-sha256': '2.16.840.1.101.3.4.3.2',\n\t'ecdsa-sha1': '1.2.840.10045.4.1',\n\t'ecdsa-sha256': '1.2.840.10045.4.3.2',\n\t'ecdsa-sha384': '1.2.840.10045.4.3.3',\n\t'ecdsa-sha512': '1.2.840.10045.4.3.4',\n\t'ed25519-sha512': '1.3.101.112'\n};\nObject.keys(SIGN_ALGS).forEach(function (k) {\n\tSIGN_ALGS[SIGN_ALGS[k]] = k;\n});\nSIGN_ALGS['1.3.14.3.2.3'] = 'rsa-md5';\nSIGN_ALGS['1.3.14.3.2.29'] = 'rsa-sha1';\n\nvar EXTS = {\n\t'issuerKeyId': '2.5.29.35',\n\t'altName': '2.5.29.17',\n\t'basicConstraints': '2.5.29.19',\n\t'keyUsage': '2.5.29.15',\n\t'extKeyUsage': '2.5.29.37'\n};\n\nfunction read(buf, options) {\n\tif (typeof (buf) === 'string') {\n\t\tbuf = Buffer.from(buf, 'binary');\n\t}\n\tassert.buffer(buf, 'buf');\n\n\tvar der = new asn1.BerReader(buf);\n\n\tder.readSequence();\n\tif (Math.abs(der.length - der.remain) > 1) {\n\t\tthrow (new Error('DER sequence does not contain whole byte ' +\n\t\t    'stream'));\n\t}\n\n\tvar tbsStart = der.offset;\n\tder.readSequence();\n\tvar sigOffset = der.offset + der.length;\n\tvar tbsEnd = sigOffset;\n\n\tif (der.peek() === Local(0)) {\n\t\tder.readSequence(Local(0));\n\t\tvar version = der.readInt();\n\t\tassert.ok(version <= 3,\n\t\t    'only x.509 versions up to v3 supported');\n\t}\n\n\tvar cert = {};\n\tcert.signatures = {};\n\tvar sig = (cert.signatures.x509 = {});\n\tsig.extras = {};\n\n\tcert.serial = readMPInt(der, 'serial');\n\n\tder.readSequence();\n\tvar after = der.offset + der.length;\n\tvar certAlgOid = der.readOID();\n\tvar certAlg = SIGN_ALGS[certAlgOid];\n\tif (certAlg === undefined)\n\t\tthrow (new Error('unknown signature algorithm ' + certAlgOid));\n\n\tder._offset = after;\n\tcert.issuer = Identity.parseAsn1(der);\n\n\tder.readSequence();\n\tcert.validFrom = readDate(der);\n\tcert.validUntil = readDate(der);\n\n\tcert.subjects = [Identity.parseAsn1(der)];\n\n\tder.readSequence();\n\tafter = der.offset + der.length;\n\tcert.subjectKey = pkcs8.readPkcs8(undefined, 'public', der);\n\tder._offset = after;\n\n\t/* issuerUniqueID */\n\tif (der.peek() === Local(1)) {\n\t\tder.readSequence(Local(1));\n\t\tsig.extras.issuerUniqueID =\n\t\t    buf.slice(der.offset, der.offset + der.length);\n\t\tder._offset += der.length;\n\t}\n\n\t/* subjectUniqueID */\n\tif (der.peek() === Local(2)) {\n\t\tder.readSequence(Local(2));\n\t\tsig.extras.subjectUniqueID =\n\t\t    buf.slice(der.offset, der.offset + der.length);\n\t\tder._offset += der.length;\n\t}\n\n\t/* extensions */\n\tif (der.peek() === Local(3)) {\n\t\tder.readSequence(Local(3));\n\t\tvar extEnd = der.offset + der.length;\n\t\tder.readSequence();\n\n\t\twhile (der.offset < extEnd)\n\t\t\treadExtension(cert, buf, der);\n\n\t\tassert.strictEqual(der.offset, extEnd);\n\t}\n\n\tassert.strictEqual(der.offset, sigOffset);\n\n\tder.readSequence();\n\tafter = der.offset + der.length;\n\tvar sigAlgOid = der.readOID();\n\tvar sigAlg = SIGN_ALGS[sigAlgOid];\n\tif (sigAlg === undefined)\n\t\tthrow (new Error('unknown signature algorithm ' + sigAlgOid));\n\tder._offset = after;\n\n\tvar sigData = der.readString(asn1.Ber.BitString, true);\n\tif (sigData[0] === 0)\n\t\tsigData = sigData.slice(1);\n\tvar algParts = sigAlg.split('-');\n\n\tsig.signature = Signature.parse(sigData, algParts[0], 'asn1');\n\tsig.signature.hashAlgorithm = algParts[1];\n\tsig.algo = sigAlg;\n\tsig.cache = buf.slice(tbsStart, tbsEnd);\n\n\treturn (new Certificate(cert));\n}\n\nfunction readDate(der) {\n\tif (der.peek() === asn1.Ber.UTCTime) {\n\t\treturn (utcTimeToDate(der.readString(asn1.Ber.UTCTime)));\n\t} else if (der.peek() === asn1.Ber.GeneralizedTime) {\n\t\treturn (gTimeToDate(der.readString(asn1.Ber.GeneralizedTime)));\n\t} else {\n\t\tthrow (new Error('Unsupported date format'));\n\t}\n}\n\nfunction writeDate(der, date) {\n\tif (date.getUTCFullYear() >= 2050 || date.getUTCFullYear() < 1950) {\n\t\tder.writeString(dateToGTime(date), asn1.Ber.GeneralizedTime);\n\t} else {\n\t\tder.writeString(dateToUTCTime(date), asn1.Ber.UTCTime);\n\t}\n}\n\n/* RFC5280, section 4.2.1.6 (GeneralName type) */\nvar ALTNAME = {\n\tOtherName: Local(0),\n\tRFC822Name: Context(1),\n\tDNSName: Context(2),\n\tX400Address: Local(3),\n\tDirectoryName: Local(4),\n\tEDIPartyName: Local(5),\n\tURI: Context(6),\n\tIPAddress: Context(7),\n\tOID: Context(8)\n};\n\n/* RFC5280, section 4.2.1.12 (KeyPurposeId) */\nvar EXTPURPOSE = {\n\t'serverAuth': '1.3.6.1.5.5.7.3.1',\n\t'clientAuth': '1.3.6.1.5.5.7.3.2',\n\t'codeSigning': '1.3.6.1.5.5.7.3.3',\n\n\t/* See https://github.com/joyent/oid-docs/blob/master/root.md */\n\t'joyentDocker': '1.3.6.1.4.1.38678.1.4.1',\n\t'joyentCmon': '1.3.6.1.4.1.38678.1.4.2'\n};\nvar EXTPURPOSE_REV = {};\nObject.keys(EXTPURPOSE).forEach(function (k) {\n\tEXTPURPOSE_REV[EXTPURPOSE[k]] = k;\n});\n\nvar KEYUSEBITS = [\n\t'signature', 'identity', 'keyEncryption',\n\t'encryption', 'keyAgreement', 'ca', 'crl'\n];\n\nfunction readExtension(cert, buf, der) {\n\tder.readSequence();\n\tvar after = der.offset + der.length;\n\tvar extId = der.readOID();\n\tvar id;\n\tvar sig = cert.signatures.x509;\n\tif (!sig.extras.exts)\n\t\tsig.extras.exts = [];\n\n\tvar critical;\n\tif (der.peek() === asn1.Ber.Boolean)\n\t\tcritical = der.readBoolean();\n\n\tswitch (extId) {\n\tcase (EXTS.basicConstraints):\n\t\tder.readSequence(asn1.Ber.OctetString);\n\t\tder.readSequence();\n\t\tvar bcEnd = der.offset + der.length;\n\t\tvar ca = false;\n\t\tif (der.peek() === asn1.Ber.Boolean)\n\t\t\tca = der.readBoolean();\n\t\tif (cert.purposes === undefined)\n\t\t\tcert.purposes = [];\n\t\tif (ca === true)\n\t\t\tcert.purposes.push('ca');\n\t\tvar bc = { oid: extId, critical: critical };\n\t\tif (der.offset < bcEnd && der.peek() === asn1.Ber.Integer)\n\t\t\tbc.pathLen = der.readInt();\n\t\tsig.extras.exts.push(bc);\n\t\tbreak;\n\tcase (EXTS.extKeyUsage):\n\t\tder.readSequence(asn1.Ber.OctetString);\n\t\tder.readSequence();\n\t\tif (cert.purposes === undefined)\n\t\t\tcert.purposes = [];\n\t\tvar ekEnd = der.offset + der.length;\n\t\twhile (der.offset < ekEnd) {\n\t\t\tvar oid = der.readOID();\n\t\t\tcert.purposes.push(EXTPURPOSE_REV[oid] || oid);\n\t\t}\n\t\t/*\n\t\t * This is a bit of a hack: in the case where we have a cert\n\t\t * that's only allowed to do serverAuth or clientAuth (and not\n\t\t * the other), we want to make sure all our Subjects are of\n\t\t * the right type. But we already parsed our Subjects and\n\t\t * decided if they were hosts or users earlier (since it appears\n\t\t * first in the cert).\n\t\t *\n\t\t * So we go through and mutate them into the right kind here if\n\t\t * it doesn't match. This might not be hugely beneficial, as it\n\t\t * seems that single-purpose certs are not often seen in the\n\t\t * wild.\n\t\t */\n\t\tif (cert.purposes.indexOf('serverAuth') !== -1 &&\n\t\t    cert.purposes.indexOf('clientAuth') === -1) {\n\t\t\tcert.subjects.forEach(function (ide) {\n\t\t\t\tif (ide.type !== 'host') {\n\t\t\t\t\tide.type = 'host';\n\t\t\t\t\tide.hostname = ide.uid ||\n\t\t\t\t\t    ide.email ||\n\t\t\t\t\t    ide.components[0].value;\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (cert.purposes.indexOf('clientAuth') !== -1 &&\n\t\t    cert.purposes.indexOf('serverAuth') === -1) {\n\t\t\tcert.subjects.forEach(function (ide) {\n\t\t\t\tif (ide.type !== 'user') {\n\t\t\t\t\tide.type = 'user';\n\t\t\t\t\tide.uid = ide.hostname ||\n\t\t\t\t\t    ide.email ||\n\t\t\t\t\t    ide.components[0].value;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tsig.extras.exts.push({ oid: extId, critical: critical });\n\t\tbreak;\n\tcase (EXTS.keyUsage):\n\t\tder.readSequence(asn1.Ber.OctetString);\n\t\tvar bits = der.readString(asn1.Ber.BitString, true);\n\t\tvar setBits = readBitField(bits, KEYUSEBITS);\n\t\tsetBits.forEach(function (bit) {\n\t\t\tif (cert.purposes === undefined)\n\t\t\t\tcert.purposes = [];\n\t\t\tif (cert.purposes.indexOf(bit) === -1)\n\t\t\t\tcert.purposes.push(bit);\n\t\t});\n\t\tsig.extras.exts.push({ oid: extId, critical: critical,\n\t\t    bits: bits });\n\t\tbreak;\n\tcase (EXTS.altName):\n\t\tder.readSequence(asn1.Ber.OctetString);\n\t\tder.readSequence();\n\t\tvar aeEnd = der.offset + der.length;\n\t\twhile (der.offset < aeEnd) {\n\t\t\tswitch (der.peek()) {\n\t\t\tcase ALTNAME.OtherName:\n\t\t\tcase ALTNAME.EDIPartyName:\n\t\t\t\tder.readSequence();\n\t\t\t\tder._offset += der.length;\n\t\t\t\tbreak;\n\t\t\tcase ALTNAME.OID:\n\t\t\t\tder.readOID(ALTNAME.OID);\n\t\t\t\tbreak;\n\t\t\tcase ALTNAME.RFC822Name:\n\t\t\t\t/* RFC822 specifies email addresses */\n\t\t\t\tvar email = der.readString(ALTNAME.RFC822Name);\n\t\t\t\tid = Identity.forEmail(email);\n\t\t\t\tif (!cert.subjects[0].equals(id))\n\t\t\t\t\tcert.subjects.push(id);\n\t\t\t\tbreak;\n\t\t\tcase ALTNAME.DirectoryName:\n\t\t\t\tder.readSequence(ALTNAME.DirectoryName);\n\t\t\t\tid = Identity.parseAsn1(der);\n\t\t\t\tif (!cert.subjects[0].equals(id))\n\t\t\t\t\tcert.subjects.push(id);\n\t\t\t\tbreak;\n\t\t\tcase ALTNAME.DNSName:\n\t\t\t\tvar host = der.readString(\n\t\t\t\t    ALTNAME.DNSName);\n\t\t\t\tid = Identity.forHost(host);\n\t\t\t\tif (!cert.subjects[0].equals(id))\n\t\t\t\t\tcert.subjects.push(id);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tder.readString(der.peek());\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tsig.extras.exts.push({ oid: extId, critical: critical });\n\t\tbreak;\n\tdefault:\n\t\tsig.extras.exts.push({\n\t\t\toid: extId,\n\t\t\tcritical: critical,\n\t\t\tdata: der.readString(asn1.Ber.OctetString, true)\n\t\t});\n\t\tbreak;\n\t}\n\n\tder._offset = after;\n}\n\nvar UTCTIME_RE =\n    /^([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})?Z$/;\nfunction utcTimeToDate(t) {\n\tvar m = t.match(UTCTIME_RE);\n\tassert.ok(m, 'timestamps must be in UTC');\n\tvar d = new Date();\n\n\tvar thisYear = d.getUTCFullYear();\n\tvar century = Math.floor(thisYear / 100) * 100;\n\n\tvar year = parseInt(m[1], 10);\n\tif (thisYear % 100 < 50 && year >= 60)\n\t\tyear += (century - 1);\n\telse\n\t\tyear += century;\n\td.setUTCFullYear(year, parseInt(m[2], 10) - 1, parseInt(m[3], 10));\n\td.setUTCHours(parseInt(m[4], 10), parseInt(m[5], 10));\n\tif (m[6] && m[6].length > 0)\n\t\td.setUTCSeconds(parseInt(m[6], 10));\n\treturn (d);\n}\n\nvar GTIME_RE =\n    /^([0-9]{4})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})?Z$/;\nfunction gTimeToDate(t) {\n\tvar m = t.match(GTIME_RE);\n\tassert.ok(m);\n\tvar d = new Date();\n\n\td.setUTCFullYear(parseInt(m[1], 10), parseInt(m[2], 10) - 1,\n\t    parseInt(m[3], 10));\n\td.setUTCHours(parseInt(m[4], 10), parseInt(m[5], 10));\n\tif (m[6] && m[6].length > 0)\n\t\td.setUTCSeconds(parseInt(m[6], 10));\n\treturn (d);\n}\n\nfunction zeroPad(n, m) {\n\tif (m === undefined)\n\t\tm = 2;\n\tvar s = '' + n;\n\twhile (s.length < m)\n\t\ts = '0' + s;\n\treturn (s);\n}\n\nfunction dateToUTCTime(d) {\n\tvar s = '';\n\ts += zeroPad(d.getUTCFullYear() % 100);\n\ts += zeroPad(d.getUTCMonth() + 1);\n\ts += zeroPad(d.getUTCDate());\n\ts += zeroPad(d.getUTCHours());\n\ts += zeroPad(d.getUTCMinutes());\n\ts += zeroPad(d.getUTCSeconds());\n\ts += 'Z';\n\treturn (s);\n}\n\nfunction dateToGTime(d) {\n\tvar s = '';\n\ts += zeroPad(d.getUTCFullYear(), 4);\n\ts += zeroPad(d.getUTCMonth() + 1);\n\ts += zeroPad(d.getUTCDate());\n\ts += zeroPad(d.getUTCHours());\n\ts += zeroPad(d.getUTCMinutes());\n\ts += zeroPad(d.getUTCSeconds());\n\ts += 'Z';\n\treturn (s);\n}\n\nfunction sign(cert, key) {\n\tif (cert.signatures.x509 === undefined)\n\t\tcert.signatures.x509 = {};\n\tvar sig = cert.signatures.x509;\n\n\tsig.algo = key.type + '-' + key.defaultHashAlgorithm();\n\tif (SIGN_ALGS[sig.algo] === undefined)\n\t\treturn (false);\n\n\tvar der = new asn1.BerWriter();\n\twriteTBSCert(cert, der);\n\tvar blob = der.buffer;\n\tsig.cache = blob;\n\n\tvar signer = key.createSign();\n\tsigner.write(blob);\n\tcert.signatures.x509.signature = signer.sign();\n\n\treturn (true);\n}\n\nfunction signAsync(cert, signer, done) {\n\tif (cert.signatures.x509 === undefined)\n\t\tcert.signatures.x509 = {};\n\tvar sig = cert.signatures.x509;\n\n\tvar der = new asn1.BerWriter();\n\twriteTBSCert(cert, der);\n\tvar blob = der.buffer;\n\tsig.cache = blob;\n\n\tsigner(blob, function (err, signature) {\n\t\tif (err) {\n\t\t\tdone(err);\n\t\t\treturn;\n\t\t}\n\t\tsig.algo = signature.type + '-' + signature.hashAlgorithm;\n\t\tif (SIGN_ALGS[sig.algo] === undefined) {\n\t\t\tdone(new Error('Invalid signing algorithm \"' +\n\t\t\t    sig.algo + '\"'));\n\t\t\treturn;\n\t\t}\n\t\tsig.signature = signature;\n\t\tdone();\n\t});\n}\n\nfunction write(cert, options) {\n\tvar sig = cert.signatures.x509;\n\tassert.object(sig, 'x509 signature');\n\n\tvar der = new asn1.BerWriter();\n\tder.startSequence();\n\tif (sig.cache) {\n\t\tder._ensure(sig.cache.length);\n\t\tsig.cache.copy(der._buf, der._offset);\n\t\tder._offset += sig.cache.length;\n\t} else {\n\t\twriteTBSCert(cert, der);\n\t}\n\n\tder.startSequence();\n\tder.writeOID(SIGN_ALGS[sig.algo]);\n\tif (sig.algo.match(/^rsa-/))\n\t\tder.writeNull();\n\tder.endSequence();\n\n\tvar sigData = sig.signature.toBuffer('asn1');\n\tvar data = Buffer.alloc(sigData.length + 1);\n\tdata[0] = 0;\n\tsigData.copy(data, 1);\n\tder.writeBuffer(data, asn1.Ber.BitString);\n\tder.endSequence();\n\n\treturn (der.buffer);\n}\n\nfunction writeTBSCert(cert, der) {\n\tvar sig = cert.signatures.x509;\n\tassert.object(sig, 'x509 signature');\n\n\tder.startSequence();\n\n\tder.startSequence(Local(0));\n\tder.writeInt(2);\n\tder.endSequence();\n\n\tder.writeBuffer(utils.mpNormalize(cert.serial), asn1.Ber.Integer);\n\n\tder.startSequence();\n\tder.writeOID(SIGN_ALGS[sig.algo]);\n\tif (sig.algo.match(/^rsa-/))\n\t\tder.writeNull();\n\tder.endSequence();\n\n\tcert.issuer.toAsn1(der);\n\n\tder.startSequence();\n\twriteDate(der, cert.validFrom);\n\twriteDate(der, cert.validUntil);\n\tder.endSequence();\n\n\tvar subject = cert.subjects[0];\n\tvar altNames = cert.subjects.slice(1);\n\tsubject.toAsn1(der);\n\n\tpkcs8.writePkcs8(der, cert.subjectKey);\n\n\tif (sig.extras && sig.extras.issuerUniqueID) {\n\t\tder.writeBuffer(sig.extras.issuerUniqueID, Local(1));\n\t}\n\n\tif (sig.extras && sig.extras.subjectUniqueID) {\n\t\tder.writeBuffer(sig.extras.subjectUniqueID, Local(2));\n\t}\n\n\tif (altNames.length > 0 || subject.type === 'host' ||\n\t    (cert.purposes !== undefined && cert.purposes.length > 0) ||\n\t    (sig.extras && sig.extras.exts)) {\n\t\tder.startSequence(Local(3));\n\t\tder.startSequence();\n\n\t\tvar exts = [];\n\t\tif (cert.purposes !== undefined && cert.purposes.length > 0) {\n\t\t\texts.push({\n\t\t\t\toid: EXTS.basicConstraints,\n\t\t\t\tcritical: true\n\t\t\t});\n\t\t\texts.push({\n\t\t\t\toid: EXTS.keyUsage,\n\t\t\t\tcritical: true\n\t\t\t});\n\t\t\texts.push({\n\t\t\t\toid: EXTS.extKeyUsage,\n\t\t\t\tcritical: true\n\t\t\t});\n\t\t}\n\t\texts.push({ oid: EXTS.altName });\n\t\tif (sig.extras && sig.extras.exts)\n\t\t\texts = sig.extras.exts;\n\n\t\tfor (var i = 0; i < exts.length; ++i) {\n\t\t\tder.startSequence();\n\t\t\tder.writeOID(exts[i].oid);\n\n\t\t\tif (exts[i].critical !== undefined)\n\t\t\t\tder.writeBoolean(exts[i].critical);\n\n\t\t\tif (exts[i].oid === EXTS.altName) {\n\t\t\t\tder.startSequence(asn1.Ber.OctetString);\n\t\t\t\tder.startSequence();\n\t\t\t\tif (subject.type === 'host') {\n\t\t\t\t\tder.writeString(subject.hostname,\n\t\t\t\t\t    Context(2));\n\t\t\t\t}\n\t\t\t\tfor (var j = 0; j < altNames.length; ++j) {\n\t\t\t\t\tif (altNames[j].type === 'host') {\n\t\t\t\t\t\tder.writeString(\n\t\t\t\t\t\t    altNames[j].hostname,\n\t\t\t\t\t\t    ALTNAME.DNSName);\n\t\t\t\t\t} else if (altNames[j].type ===\n\t\t\t\t\t    'email') {\n\t\t\t\t\t\tder.writeString(\n\t\t\t\t\t\t    altNames[j].email,\n\t\t\t\t\t\t    ALTNAME.RFC822Name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t * Encode anything else as a\n\t\t\t\t\t\t * DN style name for now.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tder.startSequence(\n\t\t\t\t\t\t    ALTNAME.DirectoryName);\n\t\t\t\t\t\taltNames[j].toAsn1(der);\n\t\t\t\t\t\tder.endSequence();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tder.endSequence();\n\t\t\t\tder.endSequence();\n\t\t\t} else if (exts[i].oid === EXTS.basicConstraints) {\n\t\t\t\tder.startSequence(asn1.Ber.OctetString);\n\t\t\t\tder.startSequence();\n\t\t\t\tvar ca = (cert.purposes.indexOf('ca') !== -1);\n\t\t\t\tvar pathLen = exts[i].pathLen;\n\t\t\t\tder.writeBoolean(ca);\n\t\t\t\tif (pathLen !== undefined)\n\t\t\t\t\tder.writeInt(pathLen);\n\t\t\t\tder.endSequence();\n\t\t\t\tder.endSequence();\n\t\t\t} else if (exts[i].oid === EXTS.extKeyUsage) {\n\t\t\t\tder.startSequence(asn1.Ber.OctetString);\n\t\t\t\tder.startSequence();\n\t\t\t\tcert.purposes.forEach(function (purpose) {\n\t\t\t\t\tif (purpose === 'ca')\n\t\t\t\t\t\treturn;\n\t\t\t\t\tif (KEYUSEBITS.indexOf(purpose) !== -1)\n\t\t\t\t\t\treturn;\n\t\t\t\t\tvar oid = purpose;\n\t\t\t\t\tif (EXTPURPOSE[purpose] !== undefined)\n\t\t\t\t\t\toid = EXTPURPOSE[purpose];\n\t\t\t\t\tder.writeOID(oid);\n\t\t\t\t});\n\t\t\t\tder.endSequence();\n\t\t\t\tder.endSequence();\n\t\t\t} else if (exts[i].oid === EXTS.keyUsage) {\n\t\t\t\tder.startSequence(asn1.Ber.OctetString);\n\t\t\t\t/*\n\t\t\t\t * If we parsed this certificate from a byte\n\t\t\t\t * stream (i.e. we didn't generate it in sshpk)\n\t\t\t\t * then we'll have a \".bits\" property on the\n\t\t\t\t * ext with the original raw byte contents.\n\t\t\t\t *\n\t\t\t\t * If we have this, use it here instead of\n\t\t\t\t * regenerating it. This guarantees we output\n\t\t\t\t * the same data we parsed, so signatures still\n\t\t\t\t * validate.\n\t\t\t\t */\n\t\t\t\tif (exts[i].bits !== undefined) {\n\t\t\t\t\tder.writeBuffer(exts[i].bits,\n\t\t\t\t\t    asn1.Ber.BitString);\n\t\t\t\t} else {\n\t\t\t\t\tvar bits = writeBitField(cert.purposes,\n\t\t\t\t\t    KEYUSEBITS);\n\t\t\t\t\tder.writeBuffer(bits,\n\t\t\t\t\t    asn1.Ber.BitString);\n\t\t\t\t}\n\t\t\t\tder.endSequence();\n\t\t\t} else {\n\t\t\t\tder.writeBuffer(exts[i].data,\n\t\t\t\t    asn1.Ber.OctetString);\n\t\t\t}\n\n\t\t\tder.endSequence();\n\t\t}\n\n\t\tder.endSequence();\n\t\tder.endSequence();\n\t}\n\n\tder.endSequence();\n}\n\n/*\n * Reads an ASN.1 BER bitfield out of the Buffer produced by doing\n * `BerReader#readString(asn1.Ber.BitString)`. That function gives us the raw\n * contents of the BitString tag, which is a count of unused bits followed by\n * the bits as a right-padded byte string.\n *\n * `bits` is the Buffer, `bitIndex` should contain an array of string names\n * for the bits in the string, ordered starting with bit #0 in the ASN.1 spec.\n *\n * Returns an array of Strings, the names of the bits that were set to 1.\n */\nfunction readBitField(bits, bitIndex) {\n\tvar bitLen = 8 * (bits.length - 1) - bits[0];\n\tvar setBits = {};\n\tfor (var i = 0; i < bitLen; ++i) {\n\t\tvar byteN = 1 + Math.floor(i / 8);\n\t\tvar bit = 7 - (i % 8);\n\t\tvar mask = 1 << bit;\n\t\tvar bitVal = ((bits[byteN] & mask) !== 0);\n\t\tvar name = bitIndex[i];\n\t\tif (bitVal && typeof (name) === 'string') {\n\t\t\tsetBits[name] = true;\n\t\t}\n\t}\n\treturn (Object.keys(setBits));\n}\n\n/*\n * `setBits` is an array of strings, containing the names for each bit that\n * sould be set to 1. `bitIndex` is same as in `readBitField()`.\n *\n * Returns a Buffer, ready to be written out with `BerWriter#writeString()`.\n */\nfunction writeBitField(setBits, bitIndex) {\n\tvar bitLen = bitIndex.length;\n\tvar blen = Math.ceil(bitLen / 8);\n\tvar unused = blen * 8 - bitLen;\n\tvar bits = Buffer.alloc(1 + blen); // zero-filled\n\tbits[0] = unused;\n\tfor (var i = 0; i < bitLen; ++i) {\n\t\tvar byteN = 1 + Math.floor(i / 8);\n\t\tvar bit = 7 - (i % 8);\n\t\tvar mask = 1 << bit;\n\t\tvar name = bitIndex[i];\n\t\tif (name === undefined)\n\t\t\tcontinue;\n\t\tvar bitVal = (setBits.indexOf(name) !== -1);\n\t\tif (bitVal) {\n\t\t\tbits[byteN] |= mask;\n\t\t}\n\t}\n\treturn (bits);\n}\n", "// Copyright 2016 Joyent, Inc.\n\nvar x509 = require('./x509');\n\nmodule.exports = {\n\tread: read,\n\tverify: x509.verify,\n\tsign: x509.sign,\n\twrite: write\n};\n\nvar assert = require('assert-plus');\nvar asn1 = require('asn1');\nvar Buffer = require('safer-buffer').Buffer;\nvar algs = require('../algs');\nvar utils = require('../utils');\nvar Key = require('../key');\nvar PrivateKey = require('../private-key');\nvar pem = require('./pem');\nvar Identity = require('../identity');\nvar Signature = require('../signature');\nvar Certificate = require('../certificate');\n\nfunction read(buf, options) {\n\tif (typeof (buf) !== 'string') {\n\t\tassert.buffer(buf, 'buf');\n\t\tbuf = buf.toString('ascii');\n\t}\n\n\tvar lines = buf.trim().split(/[\\r\\n]+/g);\n\n\tvar m;\n\tvar si = -1;\n\twhile (!m && si < lines.length) {\n\t\tm = lines[++si].match(/*JSSTYLED*/\n\t\t    /[-]+[ ]*BEGIN CERTIFICATE[ ]*[-]+/);\n\t}\n\tassert.ok(m, 'invalid PEM header');\n\n\tvar m2;\n\tvar ei = lines.length;\n\twhile (!m2 && ei > 0) {\n\t\tm2 = lines[--ei].match(/*JSSTYLED*/\n\t\t    /[-]+[ ]*END CERTIFICATE[ ]*[-]+/);\n\t}\n\tassert.ok(m2, 'invalid PEM footer');\n\n\tlines = lines.slice(si, ei + 1);\n\n\tvar headers = {};\n\twhile (true) {\n\t\tlines = lines.slice(1);\n\t\tm = lines[0].match(/*JSSTYLED*/\n\t\t    /^([A-Za-z0-9-]+): (.+)$/);\n\t\tif (!m)\n\t\t\tbreak;\n\t\theaders[m[1].toLowerCase()] = m[2];\n\t}\n\n\t/* Chop off the first and last lines */\n\tlines = lines.slice(0, -1).join('');\n\tbuf = Buffer.from(lines, 'base64');\n\n\treturn (x509.read(buf, options));\n}\n\nfunction write(cert, options) {\n\tvar dbuf = x509.write(cert, options);\n\n\tvar header = 'CERTIFICATE';\n\tvar tmp = dbuf.toString('base64');\n\tvar len = tmp.length + (tmp.length / 64) +\n\t    18 + 16 + header.length*2 + 10;\n\tvar buf = Buffer.alloc(len);\n\tvar o = 0;\n\to += buf.write('-----BEGIN ' + header + '-----\\n', o);\n\tfor (var i = 0; i < tmp.length; ) {\n\t\tvar limit = i + 64;\n\t\tif (limit > tmp.length)\n\t\t\tlimit = tmp.length;\n\t\to += buf.write(tmp.slice(i, limit), o);\n\t\tbuf[o++] = 10;\n\t\ti = limit;\n\t}\n\to += buf.write('-----END ' + header + '-----\\n', o);\n\n\treturn (buf.slice(0, o));\n}\n", "// Copyright 2016 Joyent, Inc.\n\nmodule.exports = Certificate;\n\nvar assert = require('assert-plus');\nvar Buffer = require('safer-buffer').Buffer;\nvar algs = require('./algs');\nvar crypto = require('crypto');\nvar Fingerprint = require('./fingerprint');\nvar Signature = require('./signature');\nvar errs = require('./errors');\nvar util = require('util');\nvar utils = require('./utils');\nvar Key = require('./key');\nvar PrivateKey = require('./private-key');\nvar Identity = require('./identity');\n\nvar formats = {};\nformats['openssh'] = require('./formats/openssh-cert');\nformats['x509'] = require('./formats/x509');\nformats['pem'] = require('./formats/x509-pem');\n\nvar CertificateParseError = errs.CertificateParseError;\nvar InvalidAlgorithmError = errs.InvalidAlgorithmError;\n\nfunction Certificate(opts) {\n\tassert.object(opts, 'options');\n\tassert.arrayOfObject(opts.subjects, 'options.subjects');\n\tutils.assertCompatible(opts.subjects[0], Identity, [1, 0],\n\t    'options.subjects');\n\tutils.assertCompatible(opts.subjectKey, Key, [1, 0],\n\t    'options.subjectKey');\n\tutils.assertCompatible(opts.issuer, Identity, [1, 0], 'options.issuer');\n\tif (opts.issuerKey !== undefined) {\n\t\tutils.assertCompatible(opts.issuerKey, Key, [1, 0],\n\t\t    'options.issuerKey');\n\t}\n\tassert.object(opts.signatures, 'options.signatures');\n\tassert.buffer(opts.serial, 'options.serial');\n\tassert.date(opts.validFrom, 'options.validFrom');\n\tassert.date(opts.validUntil, 'optons.validUntil');\n\n\tassert.optionalArrayOfString(opts.purposes, 'options.purposes');\n\n\tthis._hashCache = {};\n\n\tthis.subjects = opts.subjects;\n\tthis.issuer = opts.issuer;\n\tthis.subjectKey = opts.subjectKey;\n\tthis.issuerKey = opts.issuerKey;\n\tthis.signatures = opts.signatures;\n\tthis.serial = opts.serial;\n\tthis.validFrom = opts.validFrom;\n\tthis.validUntil = opts.validUntil;\n\tthis.purposes = opts.purposes;\n}\n\nCertificate.formats = formats;\n\nCertificate.prototype.toBuffer = function (format, options) {\n\tif (format === undefined)\n\t\tformat = 'x509';\n\tassert.string(format, 'format');\n\tassert.object(formats[format], 'formats[format]');\n\tassert.optionalObject(options, 'options');\n\n\treturn (formats[format].write(this, options));\n};\n\nCertificate.prototype.toString = function (format, options) {\n\tif (format === undefined)\n\t\tformat = 'pem';\n\treturn (this.toBuffer(format, options).toString());\n};\n\nCertificate.prototype.fingerprint = function (algo) {\n\tif (algo === undefined)\n\t\talgo = 'sha256';\n\tassert.string(algo, 'algorithm');\n\tvar opts = {\n\t\ttype: 'certificate',\n\t\thash: this.hash(algo),\n\t\talgorithm: algo\n\t};\n\treturn (new Fingerprint(opts));\n};\n\nCertificate.prototype.hash = function (algo) {\n\tassert.string(algo, 'algorithm');\n\talgo = algo.toLowerCase();\n\tif (algs.hashAlgs[algo] === undefined)\n\t\tthrow (new InvalidAlgorithmError(algo));\n\n\tif (this._hashCache[algo])\n\t\treturn (this._hashCache[algo]);\n\n\tvar hash = crypto.createHash(algo).\n\t    update(this.toBuffer('x509')).digest();\n\tthis._hashCache[algo] = hash;\n\treturn (hash);\n};\n\nCertificate.prototype.isExpired = function (when) {\n\tif (when === undefined)\n\t\twhen = new Date();\n\treturn (!((when.getTime() >= this.validFrom.getTime()) &&\n\t\t(when.getTime() < this.validUntil.getTime())));\n};\n\nCertificate.prototype.isSignedBy = function (issuerCert) {\n\tutils.assertCompatible(issuerCert, Certificate, [1, 0], 'issuer');\n\n\tif (!this.issuer.equals(issuerCert.subjects[0]))\n\t\treturn (false);\n\tif (this.issuer.purposes && this.issuer.purposes.length > 0 &&\n\t    this.issuer.purposes.indexOf('ca') === -1) {\n\t\treturn (false);\n\t}\n\n\treturn (this.isSignedByKey(issuerCert.subjectKey));\n};\n\nCertificate.prototype.getExtension = function (keyOrOid) {\n\tassert.string(keyOrOid, 'keyOrOid');\n\tvar ext = this.getExtensions().filter(function (maybeExt) {\n\t\tif (maybeExt.format === 'x509')\n\t\t\treturn (maybeExt.oid === keyOrOid);\n\t\tif (maybeExt.format === 'openssh')\n\t\t\treturn (maybeExt.name === keyOrOid);\n\t\treturn (false);\n\t})[0];\n\treturn (ext);\n};\n\nCertificate.prototype.getExtensions = function () {\n\tvar exts = [];\n\tvar x509 = this.signatures.x509;\n\tif (x509 && x509.extras && x509.extras.exts) {\n\t\tx509.extras.exts.forEach(function (ext) {\n\t\t\text.format = 'x509';\n\t\t\texts.push(ext);\n\t\t});\n\t}\n\tvar openssh = this.signatures.openssh;\n\tif (openssh && openssh.exts) {\n\t\topenssh.exts.forEach(function (ext) {\n\t\t\text.format = 'openssh';\n\t\t\texts.push(ext);\n\t\t});\n\t}\n\treturn (exts);\n};\n\nCertificate.prototype.isSignedByKey = function (issuerKey) {\n\tutils.assertCompatible(issuerKey, Key, [1, 2], 'issuerKey');\n\n\tif (this.issuerKey !== undefined) {\n\t\treturn (this.issuerKey.\n\t\t    fingerprint('sha512').matches(issuerKey));\n\t}\n\n\tvar fmt = Object.keys(this.signatures)[0];\n\tvar valid = formats[fmt].verify(this, issuerKey);\n\tif (valid)\n\t\tthis.issuerKey = issuerKey;\n\treturn (valid);\n};\n\nCertificate.prototype.signWith = function (key) {\n\tutils.assertCompatible(key, PrivateKey, [1, 2], 'key');\n\tvar fmts = Object.keys(formats);\n\tvar didOne = false;\n\tfor (var i = 0; i < fmts.length; ++i) {\n\t\tif (fmts[i] !== 'pem') {\n\t\t\tvar ret = formats[fmts[i]].sign(this, key);\n\t\t\tif (ret === true)\n\t\t\t\tdidOne = true;\n\t\t}\n\t}\n\tif (!didOne) {\n\t\tthrow (new Error('Failed to sign the certificate for any ' +\n\t\t    'available certificate formats'));\n\t}\n};\n\nCertificate.createSelfSigned = function (subjectOrSubjects, key, options) {\n\tvar subjects;\n\tif (Array.isArray(subjectOrSubjects))\n\t\tsubjects = subjectOrSubjects;\n\telse\n\t\tsubjects = [subjectOrSubjects];\n\n\tassert.arrayOfObject(subjects);\n\tsubjects.forEach(function (subject) {\n\t\tutils.assertCompatible(subject, Identity, [1, 0], 'subject');\n\t});\n\n\tutils.assertCompatible(key, PrivateKey, [1, 2], 'private key');\n\n\tassert.optionalObject(options, 'options');\n\tif (options === undefined)\n\t\toptions = {};\n\tassert.optionalObject(options.validFrom, 'options.validFrom');\n\tassert.optionalObject(options.validUntil, 'options.validUntil');\n\tvar validFrom = options.validFrom;\n\tvar validUntil = options.validUntil;\n\tif (validFrom === undefined)\n\t\tvalidFrom = new Date();\n\tif (validUntil === undefined) {\n\t\tassert.optionalNumber(options.lifetime, 'options.lifetime');\n\t\tvar lifetime = options.lifetime;\n\t\tif (lifetime === undefined)\n\t\t\tlifetime = 10*365*24*3600;\n\t\tvalidUntil = new Date();\n\t\tvalidUntil.setTime(validUntil.getTime() + lifetime*1000);\n\t}\n\tassert.optionalBuffer(options.serial, 'options.serial');\n\tvar serial = options.serial;\n\tif (serial === undefined)\n\t\tserial = Buffer.from('0000000000000001', 'hex');\n\n\tvar purposes = options.purposes;\n\tif (purposes === undefined)\n\t\tpurposes = [];\n\n\tif (purposes.indexOf('signature') === -1)\n\t\tpurposes.push('signature');\n\n\t/* Self-signed certs are always CAs. */\n\tif (purposes.indexOf('ca') === -1)\n\t\tpurposes.push('ca');\n\tif (purposes.indexOf('crl') === -1)\n\t\tpurposes.push('crl');\n\n\t/*\n\t * If we weren't explicitly given any other purposes, do the sensible\n\t * thing and add some basic ones depending on the subject type.\n\t */\n\tif (purposes.length <= 3) {\n\t\tvar hostSubjects = subjects.filter(function (subject) {\n\t\t\treturn (subject.type === 'host');\n\t\t});\n\t\tvar userSubjects = subjects.filter(function (subject) {\n\t\t\treturn (subject.type === 'user');\n\t\t});\n\t\tif (hostSubjects.length > 0) {\n\t\t\tif (purposes.indexOf('serverAuth') === -1)\n\t\t\t\tpurposes.push('serverAuth');\n\t\t}\n\t\tif (userSubjects.length > 0) {\n\t\t\tif (purposes.indexOf('clientAuth') === -1)\n\t\t\t\tpurposes.push('clientAuth');\n\t\t}\n\t\tif (userSubjects.length > 0 || hostSubjects.length > 0) {\n\t\t\tif (purposes.indexOf('keyAgreement') === -1)\n\t\t\t\tpurposes.push('keyAgreement');\n\t\t\tif (key.type === 'rsa' &&\n\t\t\t    purposes.indexOf('encryption') === -1)\n\t\t\t\tpurposes.push('encryption');\n\t\t}\n\t}\n\n\tvar cert = new Certificate({\n\t\tsubjects: subjects,\n\t\tissuer: subjects[0],\n\t\tsubjectKey: key.toPublic(),\n\t\tissuerKey: key.toPublic(),\n\t\tsignatures: {},\n\t\tserial: serial,\n\t\tvalidFrom: validFrom,\n\t\tvalidUntil: validUntil,\n\t\tpurposes: purposes\n\t});\n\tcert.signWith(key);\n\n\treturn (cert);\n};\n\nCertificate.create =\n    function (subjectOrSubjects, key, issuer, issuerKey, options) {\n\tvar subjects;\n\tif (Array.isArray(subjectOrSubjects))\n\t\tsubjects = subjectOrSubjects;\n\telse\n\t\tsubjects = [subjectOrSubjects];\n\n\tassert.arrayOfObject(subjects);\n\tsubjects.forEach(function (subject) {\n\t\tutils.assertCompatible(subject, Identity, [1, 0], 'subject');\n\t});\n\n\tutils.assertCompatible(key, Key, [1, 0], 'key');\n\tif (PrivateKey.isPrivateKey(key))\n\t\tkey = key.toPublic();\n\tutils.assertCompatible(issuer, Identity, [1, 0], 'issuer');\n\tutils.assertCompatible(issuerKey, PrivateKey, [1, 2], 'issuer key');\n\n\tassert.optionalObject(options, 'options');\n\tif (options === undefined)\n\t\toptions = {};\n\tassert.optionalObject(options.validFrom, 'options.validFrom');\n\tassert.optionalObject(options.validUntil, 'options.validUntil');\n\tvar validFrom = options.validFrom;\n\tvar validUntil = options.validUntil;\n\tif (validFrom === undefined)\n\t\tvalidFrom = new Date();\n\tif (validUntil === undefined) {\n\t\tassert.optionalNumber(options.lifetime, 'options.lifetime');\n\t\tvar lifetime = options.lifetime;\n\t\tif (lifetime === undefined)\n\t\t\tlifetime = 10*365*24*3600;\n\t\tvalidUntil = new Date();\n\t\tvalidUntil.setTime(validUntil.getTime() + lifetime*1000);\n\t}\n\tassert.optionalBuffer(options.serial, 'options.serial');\n\tvar serial = options.serial;\n\tif (serial === undefined)\n\t\tserial = Buffer.from('0000000000000001', 'hex');\n\n\tvar purposes = options.purposes;\n\tif (purposes === undefined)\n\t\tpurposes = [];\n\n\tif (purposes.indexOf('signature') === -1)\n\t\tpurposes.push('signature');\n\n\tif (options.ca === true) {\n\t\tif (purposes.indexOf('ca') === -1)\n\t\t\tpurposes.push('ca');\n\t\tif (purposes.indexOf('crl') === -1)\n\t\t\tpurposes.push('crl');\n\t}\n\n\tvar hostSubjects = subjects.filter(function (subject) {\n\t\treturn (subject.type === 'host');\n\t});\n\tvar userSubjects = subjects.filter(function (subject) {\n\t\treturn (subject.type === 'user');\n\t});\n\tif (hostSubjects.length > 0) {\n\t\tif (purposes.indexOf('serverAuth') === -1)\n\t\t\tpurposes.push('serverAuth');\n\t}\n\tif (userSubjects.length > 0) {\n\t\tif (purposes.indexOf('clientAuth') === -1)\n\t\t\tpurposes.push('clientAuth');\n\t}\n\tif (userSubjects.length > 0 || hostSubjects.length > 0) {\n\t\tif (purposes.indexOf('keyAgreement') === -1)\n\t\t\tpurposes.push('keyAgreement');\n\t\tif (key.type === 'rsa' &&\n\t\t    purposes.indexOf('encryption') === -1)\n\t\t\tpurposes.push('encryption');\n\t}\n\n\tvar cert = new Certificate({\n\t\tsubjects: subjects,\n\t\tissuer: issuer,\n\t\tsubjectKey: key,\n\t\tissuerKey: issuerKey.toPublic(),\n\t\tsignatures: {},\n\t\tserial: serial,\n\t\tvalidFrom: validFrom,\n\t\tvalidUntil: validUntil,\n\t\tpurposes: purposes\n\t});\n\tcert.signWith(issuerKey);\n\n\treturn (cert);\n};\n\nCertificate.parse = function (data, format, options) {\n\tif (typeof (data) !== 'string')\n\t\tassert.buffer(data, 'data');\n\tif (format === undefined)\n\t\tformat = 'auto';\n\tassert.string(format, 'format');\n\tif (typeof (options) === 'string')\n\t\toptions = { filename: options };\n\tassert.optionalObject(options, 'options');\n\tif (options === undefined)\n\t\toptions = {};\n\tassert.optionalString(options.filename, 'options.filename');\n\tif (options.filename === undefined)\n\t\toptions.filename = '(unnamed)';\n\n\tassert.object(formats[format], 'formats[format]');\n\n\ttry {\n\t\tvar k = formats[format].read(data, options);\n\t\treturn (k);\n\t} catch (e) {\n\t\tthrow (new CertificateParseError(options.filename, format, e));\n\t}\n};\n\nCertificate.isCertificate = function (obj, ver) {\n\treturn (utils.isCompatible(obj, Certificate, ver));\n};\n\n/*\n * API versions for Certificate:\n * [1,0] -- initial ver\n * [1,1] -- openssh format now unpacks extensions\n */\nCertificate.prototype._sshpkApiVersion = [1, 1];\n\nCertificate._oldVersionDetect = function (obj) {\n\treturn ([1, 0]);\n};\n", "// Copyright 2018 Joyent, Inc.\n\nmodule.exports = Fingerprint;\n\nvar assert = require('assert-plus');\nvar Buffer = require('safer-buffer').Buffer;\nvar algs = require('./algs');\nvar crypto = require('crypto');\nvar errs = require('./errors');\nvar Key = require('./key');\nvar PrivateKey = require('./private-key');\nvar Certificate = require('./certificate');\nvar utils = require('./utils');\n\nvar FingerprintFormatError = errs.FingerprintFormatError;\nvar InvalidAlgorithmError = errs.InvalidAlgorithmError;\n\nfunction Fingerprint(opts) {\n\tassert.object(opts, 'options');\n\tassert.string(opts.type, 'options.type');\n\tassert.buffer(opts.hash, 'options.hash');\n\tassert.string(opts.algorithm, 'options.algorithm');\n\n\tthis.algorithm = opts.algorithm.toLowerCase();\n\tif (algs.hashAlgs[this.algorithm] !== true)\n\t\tthrow (new InvalidAlgorithmError(this.algorithm));\n\n\tthis.hash = opts.hash;\n\tthis.type = opts.type;\n\tthis.hashType = opts.hashType;\n}\n\nFingerprint.prototype.toString = function (format) {\n\tif (format === undefined) {\n\t\tif (this.algorithm === 'md5' || this.hashType === 'spki')\n\t\t\tformat = 'hex';\n\t\telse\n\t\t\tformat = 'base64';\n\t}\n\tassert.string(format);\n\n\tswitch (format) {\n\tcase 'hex':\n\t\tif (this.hashType === 'spki')\n\t\t\treturn (this.hash.toString('hex'));\n\t\treturn (addColons(this.hash.toString('hex')));\n\tcase 'base64':\n\t\tif (this.hashType === 'spki')\n\t\t\treturn (this.hash.toString('base64'));\n\t\treturn (sshBase64Format(this.algorithm,\n\t\t    this.hash.toString('base64')));\n\tdefault:\n\t\tthrow (new FingerprintFormatError(undefined, format));\n\t}\n};\n\nFingerprint.prototype.matches = function (other) {\n\tassert.object(other, 'key or certificate');\n\tif (this.type === 'key' && this.hashType !== 'ssh') {\n\t\tutils.assertCompatible(other, Key, [1, 7], 'key with spki');\n\t\tif (PrivateKey.isPrivateKey(other)) {\n\t\t\tutils.assertCompatible(other, PrivateKey, [1, 6],\n\t\t\t    'privatekey with spki support');\n\t\t}\n\t} else if (this.type === 'key') {\n\t\tutils.assertCompatible(other, Key, [1, 0], 'key');\n\t} else {\n\t\tutils.assertCompatible(other, Certificate, [1, 0],\n\t\t    'certificate');\n\t}\n\n\tvar theirHash = other.hash(this.algorithm, this.hashType);\n\tvar theirHash2 = crypto.createHash(this.algorithm).\n\t    update(theirHash).digest('base64');\n\n\tif (this.hash2 === undefined)\n\t\tthis.hash2 = crypto.createHash(this.algorithm).\n\t\t    update(this.hash).digest('base64');\n\n\treturn (this.hash2 === theirHash2);\n};\n\n/*JSSTYLED*/\nvar base64RE = /^[A-Za-z0-9+\\/=]+$/;\n/*JSSTYLED*/\nvar hexRE = /^[a-fA-F0-9]+$/;\n\nFingerprint.parse = function (fp, options) {\n\tassert.string(fp, 'fingerprint');\n\n\tvar alg, hash, enAlgs;\n\tif (Array.isArray(options)) {\n\t\tenAlgs = options;\n\t\toptions = {};\n\t}\n\tassert.optionalObject(options, 'options');\n\tif (options === undefined)\n\t\toptions = {};\n\tif (options.enAlgs !== undefined)\n\t\tenAlgs = options.enAlgs;\n\tif (options.algorithms !== undefined)\n\t\tenAlgs = options.algorithms;\n\tassert.optionalArrayOfString(enAlgs, 'algorithms');\n\n\tvar hashType = 'ssh';\n\tif (options.hashType !== undefined)\n\t\thashType = options.hashType;\n\tassert.string(hashType, 'options.hashType');\n\n\tvar parts = fp.split(':');\n\tif (parts.length == 2) {\n\t\talg = parts[0].toLowerCase();\n\t\tif (!base64RE.test(parts[1]))\n\t\t\tthrow (new FingerprintFormatError(fp));\n\t\ttry {\n\t\t\thash = Buffer.from(parts[1], 'base64');\n\t\t} catch (e) {\n\t\t\tthrow (new FingerprintFormatError(fp));\n\t\t}\n\t} else if (parts.length > 2) {\n\t\talg = 'md5';\n\t\tif (parts[0].toLowerCase() === 'md5')\n\t\t\tparts = parts.slice(1);\n\t\tparts = parts.map(function (p) {\n\t\t\twhile (p.length < 2)\n\t\t\t\tp = '0' + p;\n\t\t\tif (p.length > 2)\n\t\t\t\tthrow (new FingerprintFormatError(fp));\n\t\t\treturn (p);\n\t\t});\n\t\tparts = parts.join('');\n\t\tif (!hexRE.test(parts) || parts.length % 2 !== 0)\n\t\t\tthrow (new FingerprintFormatError(fp));\n\t\ttry {\n\t\t\thash = Buffer.from(parts, 'hex');\n\t\t} catch (e) {\n\t\t\tthrow (new FingerprintFormatError(fp));\n\t\t}\n\t} else {\n\t\tif (hexRE.test(fp)) {\n\t\t\thash = Buffer.from(fp, 'hex');\n\t\t} else if (base64RE.test(fp)) {\n\t\t\thash = Buffer.from(fp, 'base64');\n\t\t} else {\n\t\t\tthrow (new FingerprintFormatError(fp));\n\t\t}\n\n\t\tswitch (hash.length) {\n\t\tcase 32:\n\t\t\talg = 'sha256';\n\t\t\tbreak;\n\t\tcase 16:\n\t\t\talg = 'md5';\n\t\t\tbreak;\n\t\tcase 20:\n\t\t\talg = 'sha1';\n\t\t\tbreak;\n\t\tcase 64:\n\t\t\talg = 'sha512';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow (new FingerprintFormatError(fp));\n\t\t}\n\n\t\t/* Plain hex/base64: guess it's probably SPKI unless told. */\n\t\tif (options.hashType === undefined)\n\t\t\thashType = 'spki';\n\t}\n\n\tif (alg === undefined)\n\t\tthrow (new FingerprintFormatError(fp));\n\n\tif (algs.hashAlgs[alg] === undefined)\n\t\tthrow (new InvalidAlgorithmError(alg));\n\n\tif (enAlgs !== undefined) {\n\t\tenAlgs = enAlgs.map(function (a) { return a.toLowerCase(); });\n\t\tif (enAlgs.indexOf(alg) === -1)\n\t\t\tthrow (new InvalidAlgorithmError(alg));\n\t}\n\n\treturn (new Fingerprint({\n\t\talgorithm: alg,\n\t\thash: hash,\n\t\ttype: options.type || 'key',\n\t\thashType: hashType\n\t}));\n};\n\nfunction addColons(s) {\n\t/*JSSTYLED*/\n\treturn (s.replace(/(.{2})(?=.)/g, '$1:'));\n}\n\nfunction base64Strip(s) {\n\t/*JSSTYLED*/\n\treturn (s.replace(/=*$/, ''));\n}\n\nfunction sshBase64Format(alg, h) {\n\treturn (alg.toUpperCase() + ':' + base64Strip(h));\n}\n\nFingerprint.isFingerprint = function (obj, ver) {\n\treturn (utils.isCompatible(obj, Fingerprint, ver));\n};\n\n/*\n * API versions for Fingerprint:\n * [1,0] -- initial ver\n * [1,1] -- first tagged ver\n * [1,2] -- hashType and spki support\n */\nFingerprint.prototype._sshpkApiVersion = [1, 2];\n\nFingerprint._oldVersionDetect = function (obj) {\n\tassert.func(obj.toString);\n\tassert.func(obj.matches);\n\treturn ([1, 0]);\n};\n", "// Copyright 2018 Joyent, Inc.\n\nmodule.exports = Key;\n\nvar assert = require('assert-plus');\nvar algs = require('./algs');\nvar crypto = require('crypto');\nvar Fingerprint = require('./fingerprint');\nvar Signature = require('./signature');\nvar DiffieHellman = require('./dhe').DiffieHellman;\nvar errs = require('./errors');\nvar utils = require('./utils');\nvar PrivateKey = require('./private-key');\nvar edCompat;\n\ntry {\n\tedCompat = require('./ed-compat');\n} catch (e) {\n\t/* Just continue through, and bail out if we try to use it. */\n}\n\nvar InvalidAlgorithmError = errs.InvalidAlgorithmError;\nvar KeyParseError = errs.KeyParseError;\n\nvar formats = {};\nformats['auto'] = require('./formats/auto');\nformats['pem'] = require('./formats/pem');\nformats['pkcs1'] = require('./formats/pkcs1');\nformats['pkcs8'] = require('./formats/pkcs8');\nformats['rfc4253'] = require('./formats/rfc4253');\nformats['ssh'] = require('./formats/ssh');\nformats['ssh-private'] = require('./formats/ssh-private');\nformats['openssh'] = formats['ssh-private'];\nformats['dnssec'] = require('./formats/dnssec');\nformats['putty'] = require('./formats/putty');\nformats['ppk'] = formats['putty'];\n\nfunction Key(opts) {\n\tassert.object(opts, 'options');\n\tassert.arrayOfObject(opts.parts, 'options.parts');\n\tassert.string(opts.type, 'options.type');\n\tassert.optionalString(opts.comment, 'options.comment');\n\n\tvar algInfo = algs.info[opts.type];\n\tif (typeof (algInfo) !== 'object')\n\t\tthrow (new InvalidAlgorithmError(opts.type));\n\n\tvar partLookup = {};\n\tfor (var i = 0; i < opts.parts.length; ++i) {\n\t\tvar part = opts.parts[i];\n\t\tpartLookup[part.name] = part;\n\t}\n\n\tthis.type = opts.type;\n\tthis.parts = opts.parts;\n\tthis.part = partLookup;\n\tthis.comment = undefined;\n\tthis.source = opts.source;\n\n\t/* for speeding up hashing/fingerprint operations */\n\tthis._rfc4253Cache = opts._rfc4253Cache;\n\tthis._hashCache = {};\n\n\tvar sz;\n\tthis.curve = undefined;\n\tif (this.type === 'ecdsa') {\n\t\tvar curve = this.part.curve.data.toString();\n\t\tthis.curve = curve;\n\t\tsz = algs.curves[curve].size;\n\t} else if (this.type === 'ed25519' || this.type === 'curve25519') {\n\t\tsz = 256;\n\t\tthis.curve = 'curve25519';\n\t} else {\n\t\tvar szPart = this.part[algInfo.sizePart];\n\t\tsz = szPart.data.length;\n\t\tsz = sz * 8 - utils.countZeros(szPart.data);\n\t}\n\tthis.size = sz;\n}\n\nKey.formats = formats;\n\nKey.prototype.toBuffer = function (format, options) {\n\tif (format === undefined)\n\t\tformat = 'ssh';\n\tassert.string(format, 'format');\n\tassert.object(formats[format], 'formats[format]');\n\tassert.optionalObject(options, 'options');\n\n\tif (format === 'rfc4253') {\n\t\tif (this._rfc4253Cache === undefined)\n\t\t\tthis._rfc4253Cache = formats['rfc4253'].write(this);\n\t\treturn (this._rfc4253Cache);\n\t}\n\n\treturn (formats[format].write(this, options));\n};\n\nKey.prototype.toString = function (format, options) {\n\treturn (this.toBuffer(format, options).toString());\n};\n\nKey.prototype.hash = function (algo, type) {\n\tassert.string(algo, 'algorithm');\n\tassert.optionalString(type, 'type');\n\tif (type === undefined)\n\t\ttype = 'ssh';\n\talgo = algo.toLowerCase();\n\tif (algs.hashAlgs[algo] === undefined)\n\t\tthrow (new InvalidAlgorithmError(algo));\n\n\tvar cacheKey = algo + '||' + type;\n\tif (this._hashCache[cacheKey])\n\t\treturn (this._hashCache[cacheKey]);\n\n\tvar buf;\n\tif (type === 'ssh') {\n\t\tbuf = this.toBuffer('rfc4253');\n\t} else if (type === 'spki') {\n\t\tbuf = formats.pkcs8.pkcs8ToBuffer(this);\n\t} else {\n\t\tthrow (new Error('Hash type ' + type + ' not supported'));\n\t}\n\tvar hash = crypto.createHash(algo).update(buf).digest();\n\tthis._hashCache[cacheKey] = hash;\n\treturn (hash);\n};\n\nKey.prototype.fingerprint = function (algo, type) {\n\tif (algo === undefined)\n\t\talgo = 'sha256';\n\tif (type === undefined)\n\t\ttype = 'ssh';\n\tassert.string(algo, 'algorithm');\n\tassert.string(type, 'type');\n\tvar opts = {\n\t\ttype: 'key',\n\t\thash: this.hash(algo, type),\n\t\talgorithm: algo,\n\t\thashType: type\n\t};\n\treturn (new Fingerprint(opts));\n};\n\nKey.prototype.defaultHashAlgorithm = function () {\n\tvar hashAlgo = 'sha1';\n\tif (this.type === 'rsa')\n\t\thashAlgo = 'sha256';\n\tif (this.type === 'dsa' && this.size > 1024)\n\t\thashAlgo = 'sha256';\n\tif (this.type === 'ed25519')\n\t\thashAlgo = 'sha512';\n\tif (this.type === 'ecdsa') {\n\t\tif (this.size <= 256)\n\t\t\thashAlgo = 'sha256';\n\t\telse if (this.size <= 384)\n\t\t\thashAlgo = 'sha384';\n\t\telse\n\t\t\thashAlgo = 'sha512';\n\t}\n\treturn (hashAlgo);\n};\n\nKey.prototype.createVerify = function (hashAlgo) {\n\tif (hashAlgo === undefined)\n\t\thashAlgo = this.defaultHashAlgorithm();\n\tassert.string(hashAlgo, 'hash algorithm');\n\n\t/* ED25519 is not supported by OpenSSL, use a javascript impl. */\n\tif (this.type === 'ed25519' && edCompat !== undefined)\n\t\treturn (new edCompat.Verifier(this, hashAlgo));\n\tif (this.type === 'curve25519')\n\t\tthrow (new Error('Curve25519 keys are not suitable for ' +\n\t\t    'signing or verification'));\n\n\tvar v, nm, err;\n\ttry {\n\t\tnm = hashAlgo.toUpperCase();\n\t\tv = crypto.createVerify(nm);\n\t} catch (e) {\n\t\terr = e;\n\t}\n\tif (v === undefined || (err instanceof Error &&\n\t    err.message.match(/Unknown message digest/))) {\n\t\tnm = 'RSA-';\n\t\tnm += hashAlgo.toUpperCase();\n\t\tv = crypto.createVerify(nm);\n\t}\n\tassert.ok(v, 'failed to create verifier');\n\tvar oldVerify = v.verify.bind(v);\n\tvar key = this.toBuffer('pkcs8');\n\tvar curve = this.curve;\n\tvar self = this;\n\tv.verify = function (signature, fmt) {\n\t\tif (Signature.isSignature(signature, [2, 0])) {\n\t\t\tif (signature.type !== self.type)\n\t\t\t\treturn (false);\n\t\t\tif (signature.hashAlgorithm &&\n\t\t\t    signature.hashAlgorithm !== hashAlgo)\n\t\t\t\treturn (false);\n\t\t\tif (signature.curve && self.type === 'ecdsa' &&\n\t\t\t    signature.curve !== curve)\n\t\t\t\treturn (false);\n\t\t\treturn (oldVerify(key, signature.toBuffer('asn1')));\n\n\t\t} else if (typeof (signature) === 'string' ||\n\t\t    Buffer.isBuffer(signature)) {\n\t\t\treturn (oldVerify(key, signature, fmt));\n\n\t\t/*\n\t\t * Avoid doing this on valid arguments, walking the prototype\n\t\t * chain can be quite slow.\n\t\t */\n\t\t} else if (Signature.isSignature(signature, [1, 0])) {\n\t\t\tthrow (new Error('signature was created by too old ' +\n\t\t\t    'a version of sshpk and cannot be verified'));\n\n\t\t} else {\n\t\t\tthrow (new TypeError('signature must be a string, ' +\n\t\t\t    'Buffer, or Signature object'));\n\t\t}\n\t};\n\treturn (v);\n};\n\nKey.prototype.createDiffieHellman = function () {\n\tif (this.type === 'rsa')\n\t\tthrow (new Error('RSA keys do not support Diffie-Hellman'));\n\n\treturn (new DiffieHellman(this));\n};\nKey.prototype.createDH = Key.prototype.createDiffieHellman;\n\nKey.parse = function (data, format, options) {\n\tif (typeof (data) !== 'string')\n\t\tassert.buffer(data, 'data');\n\tif (format === undefined)\n\t\tformat = 'auto';\n\tassert.string(format, 'format');\n\tif (typeof (options) === 'string')\n\t\toptions = { filename: options };\n\tassert.optionalObject(options, 'options');\n\tif (options === undefined)\n\t\toptions = {};\n\tassert.optionalString(options.filename, 'options.filename');\n\tif (options.filename === undefined)\n\t\toptions.filename = '(unnamed)';\n\n\tassert.object(formats[format], 'formats[format]');\n\n\ttry {\n\t\tvar k = formats[format].read(data, options);\n\t\tif (k instanceof PrivateKey)\n\t\t\tk = k.toPublic();\n\t\tif (!k.comment)\n\t\t\tk.comment = options.filename;\n\t\treturn (k);\n\t} catch (e) {\n\t\tif (e.name === 'KeyEncryptedError')\n\t\t\tthrow (e);\n\t\tthrow (new KeyParseError(options.filename, format, e));\n\t}\n};\n\nKey.isKey = function (obj, ver) {\n\treturn (utils.isCompatible(obj, Key, ver));\n};\n\n/*\n * API versions for Key:\n * [1,0] -- initial ver, may take Signature for createVerify or may not\n * [1,1] -- added pkcs1, pkcs8 formats\n * [1,2] -- added auto, ssh-private, openssh formats\n * [1,3] -- added defaultHashAlgorithm\n * [1,4] -- added ed support, createDH\n * [1,5] -- first explicitly tagged version\n * [1,6] -- changed ed25519 part names\n * [1,7] -- spki hash types\n */\nKey.prototype._sshpkApiVersion = [1, 7];\n\nKey._oldVersionDetect = function (obj) {\n\tassert.func(obj.toBuffer);\n\tassert.func(obj.fingerprint);\n\tif (obj.createDH)\n\t\treturn ([1, 4]);\n\tif (obj.defaultHashAlgorithm)\n\t\treturn ([1, 3]);\n\tif (obj.formats['auto'])\n\t\treturn ([1, 2]);\n\tif (obj.formats['pkcs1'])\n\t\treturn ([1, 1]);\n\treturn ([1, 0]);\n};\n", "// Copyright 2015 Joyent, Inc.\n\nvar Key = require('./key');\nvar Fingerprint = require('./fingerprint');\nvar Signature = require('./signature');\nvar PrivateKey = require('./private-key');\nvar Certificate = require('./certificate');\nvar Identity = require('./identity');\nvar errs = require('./errors');\n\nmodule.exports = {\n\t/* top-level classes */\n\tKey: Key,\n\tparseKey: Key.parse,\n\tFingerprint: Fingerprint,\n\tparseFingerprint: Fingerprint.parse,\n\tSignature: Signature,\n\tparseSignature: Signature.parse,\n\tPrivateKey: PrivateKey,\n\tparsePrivateKey: PrivateKey.parse,\n\tgeneratePrivateKey: PrivateKey.generate,\n\tCertificate: Certificate,\n\tparseCertificate: Certificate.parse,\n\tcreateSelfSignedCertificate: Certificate.createSelfSigned,\n\tcreateCertificate: Certificate.create,\n\tIdentity: Identity,\n\tidentityFromDN: Identity.parseDN,\n\tidentityForHost: Identity.forHost,\n\tidentityForUser: Identity.forUser,\n\tidentityForEmail: Identity.forEmail,\n\tidentityFromArray: Identity.fromArray,\n\n\t/* errors */\n\tFingerprintFormatError: errs.FingerprintFormatError,\n\tInvalidAlgorithmError: errs.InvalidAlgorithmError,\n\tKeyParseError: errs.KeyParseError,\n\tSignatureParseError: errs.SignatureParseError,\n\tKeyEncryptedError: errs.KeyEncryptedError,\n\tCertificateParseError: errs.CertificateParseError\n};\n", "// Copyright 2012 Joyent, Inc.  All rights reserved.\n\nvar assert = require('assert-plus');\nvar sshpk = require('sshpk');\nvar util = require('util');\n\nvar HASH_ALGOS = {\n  'sha1': true,\n  'sha256': true,\n  'sha512': true\n};\n\nvar PK_ALGOS = {\n  'rsa': true,\n  'dsa': true,\n  'ecdsa': true\n};\n\nfunction HttpSignatureError(message, caller) {\n  if (Error.captureStackTrace)\n    Error.captureStackTrace(this, caller || HttpSignatureError);\n\n  this.message = message;\n  this.name = caller.name;\n}\nutil.inherits(HttpSignatureError, Error);\n\nfunction InvalidAlgorithmError(message) {\n  HttpSignatureError.call(this, message, InvalidAlgorithmError);\n}\nutil.inherits(InvalidAlgorithmError, HttpSignatureError);\n\nfunction validateAlgorithm(algorithm) {\n  var alg = algorithm.toLowerCase().split('-');\n\n  if (alg.length !== 2) {\n    throw (new InvalidAlgorithmError(alg[0].toUpperCase() + ' is not a ' +\n      'valid algorithm'));\n  }\n\n  if (alg[0] !== 'hmac' && !PK_ALGOS[alg[0]]) {\n    throw (new InvalidAlgorithmError(alg[0].toUpperCase() + ' type keys ' +\n      'are not supported'));\n  }\n\n  if (!HASH_ALGOS[alg[1]]) {\n    throw (new InvalidAlgorithmError(alg[1].toUpperCase() + ' is not a ' +\n      'supported hash algorithm'));\n  }\n\n  return (alg);\n}\n\n///--- API\n\nmodule.exports = {\n\n  HASH_ALGOS: HASH_ALGOS,\n  PK_ALGOS: PK_ALGOS,\n\n  HttpSignatureError: HttpSignatureError,\n  InvalidAlgorithmError: InvalidAlgorithmError,\n\n  validateAlgorithm: validateAlgorithm,\n\n  /**\n   * Converts an OpenSSH public key (rsa only) to a PKCS#8 PEM file.\n   *\n   * The intent of this module is to interoperate with OpenSSL only,\n   * specifically the node crypto module's `verify` method.\n   *\n   * @param {String} key an OpenSSH public key.\n   * @return {String} PEM encoded form of the RSA public key.\n   * @throws {TypeError} on bad input.\n   * @throws {Error} on invalid ssh key formatted data.\n   */\n  sshKeyToPEM: function sshKeyToPEM(key) {\n    assert.string(key, 'ssh_key');\n\n    var k = sshpk.parseKey(key, 'ssh');\n    return (k.toString('pem'));\n  },\n\n\n  /**\n   * Generates an OpenSSH fingerprint from an ssh public key.\n   *\n   * @param {String} key an OpenSSH public key.\n   * @return {String} key fingerprint.\n   * @throws {TypeError} on bad input.\n   * @throws {Error} if what you passed doesn't look like an ssh public key.\n   */\n  fingerprint: function fingerprint(key) {\n    assert.string(key, 'ssh_key');\n\n    var k = sshpk.parseKey(key, 'ssh');\n    return (k.fingerprint('md5').toString('hex'));\n  },\n\n  /**\n   * Converts a PKGCS#8 PEM file to an OpenSSH public key (rsa)\n   *\n   * The reverse of the above function.\n   */\n  pemToRsaSSHKey: function pemToRsaSSHKey(pem, comment) {\n    assert.equal('string', typeof (pem), 'typeof pem');\n\n    var k = sshpk.parseKey(pem, 'pem');\n    k.comment = comment;\n    return (k.toString('ssh'));\n  }\n};\n", "// Copyright 2012 Joyent, Inc.  All rights reserved.\n\nvar assert = require('assert-plus');\nvar util = require('util');\nvar utils = require('./utils');\n\n\n\n///--- Globals\n\nvar HASH_ALGOS = utils.HASH_ALGOS;\nvar PK_ALGOS = utils.PK_ALGOS;\nvar HttpSignatureError = utils.HttpSignatureError;\nvar InvalidAlgorithmError = utils.InvalidAlgorithmError;\nvar validateAlgorithm = utils.validateAlgorithm;\n\nvar State = {\n  New: 0,\n  Params: 1\n};\n\nvar ParamsState = {\n  Name: 0,\n  Quote: 1,\n  Value: 2,\n  Comma: 3\n};\n\n\n///--- Specific Errors\n\n\nfunction ExpiredRequestError(message) {\n  HttpSignatureError.call(this, message, ExpiredRequestError);\n}\nutil.inherits(ExpiredRequestError, HttpSignatureError);\n\n\nfunction InvalidHeaderError(message) {\n  HttpSignatureError.call(this, message, InvalidHeaderError);\n}\nutil.inherits(InvalidHeaderError, HttpSignatureError);\n\n\nfunction InvalidParamsError(message) {\n  HttpSignatureError.call(this, message, InvalidParamsError);\n}\nutil.inherits(InvalidParamsError, HttpSignatureError);\n\n\nfunction MissingHeaderError(message) {\n  HttpSignatureError.call(this, message, MissingHeaderError);\n}\nutil.inherits(MissingHeaderError, HttpSignatureError);\n\nfunction StrictParsingError(message) {\n  HttpSignatureError.call(this, message, StrictParsingError);\n}\nutil.inherits(StrictParsingError, HttpSignatureError);\n\n///--- Exported API\n\nmodule.exports = {\n\n  /**\n   * Parses the 'Authorization' header out of an http.ServerRequest object.\n   *\n   * Note that this API will fully validate the Authorization header, and throw\n   * on any error.  It will not however check the signature, or the keyId format\n   * as those are specific to your environment.  You can use the options object\n   * to pass in extra constraints.\n   *\n   * As a response object you can expect this:\n   *\n   *     {\n   *       \"scheme\": \"Signature\",\n   *       \"params\": {\n   *         \"keyId\": \"foo\",\n   *         \"algorithm\": \"rsa-sha256\",\n   *         \"headers\": [\n   *           \"date\" or \"x-date\",\n   *           \"digest\"\n   *         ],\n   *         \"signature\": \"base64\"\n   *       },\n   *       \"signingString\": \"ready to be passed to crypto.verify()\"\n   *     }\n   *\n   * @param {Object} request an http.ServerRequest.\n   * @param {Object} options an optional options object with:\n   *                   - clockSkew: allowed clock skew in seconds (default 300).\n   *                   - headers: required header names (def: date or x-date)\n   *                   - algorithms: algorithms to support (default: all).\n   *                   - strict: should enforce latest spec parsing\n   *                             (default: false).\n   * @return {Object} parsed out object (see above).\n   * @throws {TypeError} on invalid input.\n   * @throws {InvalidHeaderError} on an invalid Authorization header error.\n   * @throws {InvalidParamsError} if the params in the scheme are invalid.\n   * @throws {MissingHeaderError} if the params indicate a header not present,\n   *                              either in the request headers from the params,\n   *                              or not in the params from a required header\n   *                              in options.\n   * @throws {StrictParsingError} if old attributes are used in strict parsing\n   *                              mode.\n   * @throws {ExpiredRequestError} if the value of date or x-date exceeds skew.\n   */\n  parseRequest: function parseRequest(request, options) {\n    assert.object(request, 'request');\n    assert.object(request.headers, 'request.headers');\n    if (options === undefined) {\n      options = {};\n    }\n    if (options.headers === undefined) {\n      options.headers = [request.headers['x-date'] ? 'x-date' : 'date'];\n    }\n    assert.object(options, 'options');\n    assert.arrayOfString(options.headers, 'options.headers');\n    assert.optionalFinite(options.clockSkew, 'options.clockSkew');\n\n    var authzHeaderName = options.authorizationHeaderName || 'authorization';\n\n    if (!request.headers[authzHeaderName]) {\n      throw new MissingHeaderError('no ' + authzHeaderName + ' header ' +\n                                   'present in the request');\n    }\n\n    options.clockSkew = options.clockSkew || 300;\n\n\n    var i = 0;\n    var state = State.New;\n    var substate = ParamsState.Name;\n    var tmpName = '';\n    var tmpValue = '';\n\n    var parsed = {\n      scheme: '',\n      params: {},\n      signingString: ''\n    };\n\n    var authz = request.headers[authzHeaderName];\n    for (i = 0; i < authz.length; i++) {\n      var c = authz.charAt(i);\n\n      switch (Number(state)) {\n\n      case State.New:\n        if (c !== ' ') parsed.scheme += c;\n        else state = State.Params;\n        break;\n\n      case State.Params:\n        switch (Number(substate)) {\n\n        case ParamsState.Name:\n          var code = c.charCodeAt(0);\n          // restricted name of A-Z / a-z\n          if ((code >= 0x41 && code <= 0x5a) || // A-Z\n              (code >= 0x61 && code <= 0x7a)) { // a-z\n            tmpName += c;\n          } else if (c === '=') {\n            if (tmpName.length === 0)\n              throw new InvalidHeaderError('bad param format');\n            substate = ParamsState.Quote;\n          } else {\n            throw new InvalidHeaderError('bad param format');\n          }\n          break;\n\n        case ParamsState.Quote:\n          if (c === '\"') {\n            tmpValue = '';\n            substate = ParamsState.Value;\n          } else {\n            throw new InvalidHeaderError('bad param format');\n          }\n          break;\n\n        case ParamsState.Value:\n          if (c === '\"') {\n            parsed.params[tmpName] = tmpValue;\n            substate = ParamsState.Comma;\n          } else {\n            tmpValue += c;\n          }\n          break;\n\n        case ParamsState.Comma:\n          if (c === ',') {\n            tmpName = '';\n            substate = ParamsState.Name;\n          } else {\n            throw new InvalidHeaderError('bad param format');\n          }\n          break;\n\n        default:\n          throw new Error('Invalid substate');\n        }\n        break;\n\n      default:\n        throw new Error('Invalid substate');\n      }\n\n    }\n\n    if (!parsed.params.headers || parsed.params.headers === '') {\n      if (request.headers['x-date']) {\n        parsed.params.headers = ['x-date'];\n      } else {\n        parsed.params.headers = ['date'];\n      }\n    } else {\n      parsed.params.headers = parsed.params.headers.split(' ');\n    }\n\n    // Minimally validate the parsed object\n    if (!parsed.scheme || parsed.scheme !== 'Signature')\n      throw new InvalidHeaderError('scheme was not \"Signature\"');\n\n    if (!parsed.params.keyId)\n      throw new InvalidHeaderError('keyId was not specified');\n\n    if (!parsed.params.algorithm)\n      throw new InvalidHeaderError('algorithm was not specified');\n\n    if (!parsed.params.signature)\n      throw new InvalidHeaderError('signature was not specified');\n\n    // Check the algorithm against the official list\n    parsed.params.algorithm = parsed.params.algorithm.toLowerCase();\n    try {\n      validateAlgorithm(parsed.params.algorithm);\n    } catch (e) {\n      if (e instanceof InvalidAlgorithmError)\n        throw (new InvalidParamsError(parsed.params.algorithm + ' is not ' +\n          'supported'));\n      else\n        throw (e);\n    }\n\n    // Build the signingString\n    for (i = 0; i < parsed.params.headers.length; i++) {\n      var h = parsed.params.headers[i].toLowerCase();\n      parsed.params.headers[i] = h;\n\n      if (h === 'request-line') {\n        if (!options.strict) {\n          /*\n           * We allow headers from the older spec drafts if strict parsing isn't\n           * specified in options.\n           */\n          parsed.signingString +=\n            request.method + ' ' + request.url + ' HTTP/' + request.httpVersion;\n        } else {\n          /* Strict parsing doesn't allow older draft headers. */\n          throw (new StrictParsingError('request-line is not a valid header ' +\n            'with strict parsing enabled.'));\n        }\n      } else if (h === '(request-target)') {\n        parsed.signingString +=\n          '(request-target): ' + request.method.toLowerCase() + ' ' +\n          request.url;\n      } else {\n        var value = request.headers[h];\n        if (value === undefined)\n          throw new MissingHeaderError(h + ' was not in the request');\n        parsed.signingString += h + ': ' + value;\n      }\n\n      if ((i + 1) < parsed.params.headers.length)\n        parsed.signingString += '\\n';\n    }\n\n    // Check against the constraints\n    var date;\n    if (request.headers.date || request.headers['x-date']) {\n        if (request.headers['x-date']) {\n          date = new Date(request.headers['x-date']);\n        } else {\n          date = new Date(request.headers.date);\n        }\n      var now = new Date();\n      var skew = Math.abs(now.getTime() - date.getTime());\n\n      if (skew > options.clockSkew * 1000) {\n        throw new ExpiredRequestError('clock skew of ' +\n                                      (skew / 1000) +\n                                      's was greater than ' +\n                                      options.clockSkew + 's');\n      }\n    }\n\n    options.headers.forEach(function (hdr) {\n      // Remember that we already checked any headers in the params\n      // were in the request, so if this passes we're good.\n      if (parsed.params.headers.indexOf(hdr.toLowerCase()) < 0)\n        throw new MissingHeaderError(hdr + ' was not a signed header');\n    });\n\n    if (options.algorithms) {\n      if (options.algorithms.indexOf(parsed.params.algorithm) === -1)\n        throw new InvalidParamsError(parsed.params.algorithm +\n                                     ' is not a supported algorithm');\n    }\n\n    parsed.algorithm = parsed.params.algorithm.toUpperCase();\n    parsed.keyId = parsed.params.keyId;\n    return parsed;\n  }\n\n};\n", "/*\n * extsprintf.js: extended POSIX-style sprintf\n */\n\nvar mod_assert = require('assert');\nvar mod_util = require('util');\n\n/*\n * Public interface\n */\nexports.sprintf = jsSprintf;\nexports.printf = jsPrintf;\nexports.fprintf = jsFprintf;\n\n/*\n * Stripped down version of s[n]printf(3c).  We make a best effort to throw an\n * exception when given a format string we don't understand, rather than\n * ignoring it, so that we won't break existing programs if/when we go implement\n * the rest of this.\n *\n * This implementation currently supports specifying\n *\t- field alignment ('-' flag),\n * \t- zero-pad ('0' flag)\n *\t- always show numeric sign ('+' flag),\n *\t- field width\n *\t- conversions for strings, decimal integers, and floats (numbers).\n *\t- argument size specifiers.  These are all accepted but ignored, since\n *\t  Javascript has no notion of the physical size of an argument.\n *\n * Everything else is currently unsupported, most notably precision, unsigned\n * numbers, non-decimal numbers, and characters.\n */\nfunction jsSprintf(fmt)\n{\n\tvar regex = [\n\t    '([^%]*)',\t\t\t\t/* normal text */\n\t    '%',\t\t\t\t/* start of format */\n\t    '([\\'\\\\-+ #0]*?)',\t\t\t/* flags (optional) */\n\t    '([1-9]\\\\d*)?',\t\t\t/* width (optional) */\n\t    '(\\\\.([1-9]\\\\d*))?',\t\t/* precision (optional) */\n\t    '[lhjztL]*?',\t\t\t/* length mods (ignored) */\n\t    '([diouxXfFeEgGaAcCsSp%jr])'\t/* conversion */\n\t].join('');\n\n\tvar re = new RegExp(regex);\n\tvar args = Array.prototype.slice.call(arguments, 1);\n\tvar flags, width, precision, conversion;\n\tvar left, pad, sign, arg, match;\n\tvar ret = '';\n\tvar argn = 1;\n\n\tmod_assert.equal('string', typeof (fmt));\n\n\twhile ((match = re.exec(fmt)) !== null) {\n\t\tret += match[1];\n\t\tfmt = fmt.substring(match[0].length);\n\n\t\tflags = match[2] || '';\n\t\twidth = match[3] || 0;\n\t\tprecision = match[4] || '';\n\t\tconversion = match[6];\n\t\tleft = false;\n\t\tsign = false;\n\t\tpad = ' ';\n\n\t\tif (conversion == '%') {\n\t\t\tret += '%';\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (args.length === 0)\n\t\t\tthrow (new Error('too few args to sprintf'));\n\n\t\targ = args.shift();\n\t\targn++;\n\n\t\tif (flags.match(/[\\' #]/))\n\t\t\tthrow (new Error(\n\t\t\t    'unsupported flags: ' + flags));\n\n\t\tif (precision.length > 0)\n\t\t\tthrow (new Error(\n\t\t\t    'non-zero precision not supported'));\n\n\t\tif (flags.match(/-/))\n\t\t\tleft = true;\n\n\t\tif (flags.match(/0/))\n\t\t\tpad = '0';\n\n\t\tif (flags.match(/\\+/))\n\t\t\tsign = true;\n\n\t\tswitch (conversion) {\n\t\tcase 's':\n\t\t\tif (arg === undefined || arg === null)\n\t\t\t\tthrow (new Error('argument ' + argn +\n\t\t\t\t    ': attempted to print undefined or null ' +\n\t\t\t\t    'as a string'));\n\t\t\tret += doPad(pad, width, left, arg.toString());\n\t\t\tbreak;\n\n\t\tcase 'd':\n\t\t\targ = Math.floor(arg);\n\t\t\t/*jsl:fallthru*/\n\t\tcase 'f':\n\t\t\tsign = sign && arg > 0 ? '+' : '';\n\t\t\tret += sign + doPad(pad, width, left,\n\t\t\t    arg.toString());\n\t\t\tbreak;\n\n\t\tcase 'x':\n\t\t\tret += doPad(pad, width, left, arg.toString(16));\n\t\t\tbreak;\n\n\t\tcase 'j': /* non-standard */\n\t\t\tif (width === 0)\n\t\t\t\twidth = 10;\n\t\t\tret += mod_util.inspect(arg, false, width);\n\t\t\tbreak;\n\n\t\tcase 'r': /* non-standard */\n\t\t\tret += dumpException(arg);\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthrow (new Error('unsupported conversion: ' +\n\t\t\t    conversion));\n\t\t}\n\t}\n\n\tret += fmt;\n\treturn (ret);\n}\n\nfunction jsPrintf() {\n\tvar args = Array.prototype.slice.call(arguments);\n\targs.unshift(process.stdout);\n\tjsFprintf.apply(null, args);\n}\n\nfunction jsFprintf(stream) {\n\tvar args = Array.prototype.slice.call(arguments, 1);\n\treturn (stream.write(jsSprintf.apply(this, args)));\n}\n\nfunction doPad(chr, width, left, str)\n{\n\tvar ret = str;\n\n\twhile (ret.length < width) {\n\t\tif (left)\n\t\t\tret += chr;\n\t\telse\n\t\t\tret = chr + ret;\n\t}\n\n\treturn (ret);\n}\n\n/*\n * This function dumps long stack traces for exceptions having a cause() method.\n * See node-verror for an example.\n */\nfunction dumpException(ex)\n{\n\tvar ret;\n\n\tif (!(ex instanceof Error))\n\t\tthrow (new Error(jsSprintf('invalid type for %%r: %j', ex)));\n\n\t/* Note that V8 prepends \"ex.stack\" with ex.toString(). */\n\tret = 'EXCEPTION: ' + ex.constructor.name + ': ' + ex.stack;\n\n\tif (ex.cause && typeof (ex.cause) === 'function') {\n\t\tvar cex = ex.cause();\n\t\tif (cex) {\n\t\t\tret += '\\nCaused by: ' + dumpException(cex);\n\t\t}\n\t}\n\n\treturn (ret);\n}\n", "/*\n * extsprintf.js: extended POSIX-style sprintf\n */\n\nvar mod_assert = require('assert');\nvar mod_util = require('util');\n\n/*\n * Public interface\n */\nexports.sprintf = jsSprintf;\nexports.printf = jsPrintf;\nexports.fprintf = jsFprintf;\n\n/*\n * Stripped down version of s[n]printf(3c).  We make a best effort to throw an\n * exception when given a format string we don't understand, rather than\n * ignoring it, so that we won't break existing programs if/when we go implement\n * the rest of this.\n *\n * This implementation currently supports specifying\n *\t- field alignment ('-' flag),\n * \t- zero-pad ('0' flag)\n *\t- always show numeric sign ('+' flag),\n *\t- field width\n *\t- conversions for strings, decimal integers, and floats (numbers).\n *\t- argument size specifiers.  These are all accepted but ignored, since\n *\t  Javascript has no notion of the physical size of an argument.\n *\n * Everything else is currently unsupported, most notably precision, unsigned\n * numbers, non-decimal numbers, and characters.\n */\nfunction jsSprintf(ofmt)\n{\n\tvar regex = [\n\t    '([^%]*)',\t\t\t\t/* normal text */\n\t    '%',\t\t\t\t/* start of format */\n\t    '([\\'\\\\-+ #0]*?)',\t\t\t/* flags (optional) */\n\t    '([1-9]\\\\d*)?',\t\t\t/* width (optional) */\n\t    '(\\\\.([1-9]\\\\d*))?',\t\t/* precision (optional) */\n\t    '[lhjztL]*?',\t\t\t/* length mods (ignored) */\n\t    '([diouxXfFeEgGaAcCsSp%jr])'\t/* conversion */\n\t].join('');\n\n\tvar re = new RegExp(regex);\n\n\t/* variadic arguments used to fill in conversion specifiers */\n\tvar args = Array.prototype.slice.call(arguments, 1);\n\t/* remaining format string */\n\tvar fmt = ofmt;\n\n\t/* components of the current conversion specifier */\n\tvar flags, width, precision, conversion;\n\tvar left, pad, sign, arg, match;\n\n\t/* return value */\n\tvar ret = '';\n\n\t/* current variadic argument (1-based) */\n\tvar argn = 1;\n\t/* 0-based position in the format string that we've read */\n\tvar posn = 0;\n\t/* 1-based position in the format string of the current conversion */\n\tvar convposn;\n\t/* current conversion specifier */\n\tvar curconv;\n\n\tmod_assert.equal('string', typeof (fmt),\n\t    'first argument must be a format string');\n\n\twhile ((match = re.exec(fmt)) !== null) {\n\t\tret += match[1];\n\t\tfmt = fmt.substring(match[0].length);\n\n\t\t/*\n\t\t * Update flags related to the current conversion specifier's\n\t\t * position so that we can report clear error messages.\n\t\t */\n\t\tcurconv = match[0].substring(match[1].length);\n\t\tconvposn = posn + match[1].length + 1;\n\t\tposn += match[0].length;\n\n\t\tflags = match[2] || '';\n\t\twidth = match[3] || 0;\n\t\tprecision = match[4] || '';\n\t\tconversion = match[6];\n\t\tleft = false;\n\t\tsign = false;\n\t\tpad = ' ';\n\n\t\tif (conversion == '%') {\n\t\t\tret += '%';\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (args.length === 0) {\n\t\t\tthrow (jsError(ofmt, convposn, curconv,\n\t\t\t    'has no matching argument ' +\n\t\t\t    '(too few arguments passed)'));\n\t\t}\n\n\t\targ = args.shift();\n\t\targn++;\n\n\t\tif (flags.match(/[\\' #]/)) {\n\t\t\tthrow (jsError(ofmt, convposn, curconv,\n\t\t\t    'uses unsupported flags'));\n\t\t}\n\n\t\tif (precision.length > 0) {\n\t\t\tthrow (jsError(ofmt, convposn, curconv,\n\t\t\t    'uses non-zero precision (not supported)'));\n\t\t}\n\n\t\tif (flags.match(/-/))\n\t\t\tleft = true;\n\n\t\tif (flags.match(/0/))\n\t\t\tpad = '0';\n\n\t\tif (flags.match(/\\+/))\n\t\t\tsign = true;\n\n\t\tswitch (conversion) {\n\t\tcase 's':\n\t\t\tif (arg === undefined || arg === null) {\n\t\t\t\tthrow (jsError(ofmt, convposn, curconv,\n\t\t\t\t    'attempted to print undefined or null ' +\n\t\t\t\t    'as a string (argument ' + argn + ' to ' +\n\t\t\t\t    'sprintf)'));\n\t\t\t}\n\t\t\tret += doPad(pad, width, left, arg.toString());\n\t\t\tbreak;\n\n\t\tcase 'd':\n\t\t\targ = Math.floor(arg);\n\t\t\t/*jsl:fallthru*/\n\t\tcase 'f':\n\t\t\tsign = sign && arg > 0 ? '+' : '';\n\t\t\tret += sign + doPad(pad, width, left,\n\t\t\t    arg.toString());\n\t\t\tbreak;\n\n\t\tcase 'x':\n\t\t\tret += doPad(pad, width, left, arg.toString(16));\n\t\t\tbreak;\n\n\t\tcase 'j': /* non-standard */\n\t\t\tif (width === 0)\n\t\t\t\twidth = 10;\n\t\t\tret += mod_util.inspect(arg, false, width);\n\t\t\tbreak;\n\n\t\tcase 'r': /* non-standard */\n\t\t\tret += dumpException(arg);\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthrow (jsError(ofmt, convposn, curconv,\n\t\t\t    'is not supported'));\n\t\t}\n\t}\n\n\tret += fmt;\n\treturn (ret);\n}\n\nfunction jsError(fmtstr, convposn, curconv, reason) {\n\tmod_assert.equal(typeof (fmtstr), 'string');\n\tmod_assert.equal(typeof (curconv), 'string');\n\tmod_assert.equal(typeof (convposn), 'number');\n\tmod_assert.equal(typeof (reason), 'string');\n\treturn (new Error('format string \"' + fmtstr +\n\t    '\": conversion specifier \"' + curconv + '\" at character ' +\n\t    convposn + ' ' + reason));\n}\n\nfunction jsPrintf() {\n\tvar args = Array.prototype.slice.call(arguments);\n\targs.unshift(process.stdout);\n\tjsFprintf.apply(null, args);\n}\n\nfunction jsFprintf(stream) {\n\tvar args = Array.prototype.slice.call(arguments, 1);\n\treturn (stream.write(jsSprintf.apply(this, args)));\n}\n\nfunction doPad(chr, width, left, str)\n{\n\tvar ret = str;\n\n\twhile (ret.length < width) {\n\t\tif (left)\n\t\t\tret += chr;\n\t\telse\n\t\t\tret = chr + ret;\n\t}\n\n\treturn (ret);\n}\n\n/*\n * This function dumps long stack traces for exceptions having a cause() method.\n * See node-verror for an example.\n */\nfunction dumpException(ex)\n{\n\tvar ret;\n\n\tif (!(ex instanceof Error))\n\t\tthrow (new Error(jsSprintf('invalid type for %%r: %j', ex)));\n\n\t/* Note that V8 prepends \"ex.stack\" with ex.toString(). */\n\tret = 'EXCEPTION: ' + ex.constructor.name + ': ' + ex.stack;\n\n\tif (ex.cause && typeof (ex.cause) === 'function') {\n\t\tvar cex = ex.cause();\n\t\tif (cex) {\n\t\t\tret += '\\nCaused by: ' + dumpException(cex);\n\t\t}\n\t}\n\n\treturn (ret);\n}\n", "/*\n * verror.js: richer JavaScript errors\n */\n\nvar mod_assertplus = require('assert-plus');\nvar mod_util = require('util');\n\nvar mod_extsprintf = require('extsprintf');\nvar mod_isError = require('core-util-is').isError;\nvar sprintf = mod_extsprintf.sprintf;\n\n/*\n * Public interface\n */\n\n/* So you can 'var VError = require('verror')' */\nmodule.exports = VError;\n/* For compatibility */\nVError.VError = VError;\n/* Other exported classes */\nVError.SError = SError;\nVError.WError = WError;\nVError.MultiError = MultiError;\n\n/*\n * Common function used to parse constructor arguments for VError, WError, and\n * SError.  Named arguments to this function:\n *\n *     strict\t\tforce strict interpretation of sprintf arguments, even\n *     \t\t\tif the options in \"argv\" don't say so\n *\n *     argv\t\terror's constructor arguments, which are to be\n *     \t\t\tinterpreted as described in README.md.  For quick\n *     \t\t\treference, \"argv\" has one of the following forms:\n *\n *          [ sprintf_args... ]           (argv[0] is a string)\n *          [ cause, sprintf_args... ]    (argv[0] is an Error)\n *          [ options, sprintf_args... ]  (argv[0] is an object)\n *\n * This function normalizes these forms, producing an object with the following\n * properties:\n *\n *    options           equivalent to \"options\" in third form.  This will never\n *    \t\t\tbe a direct reference to what the caller passed in\n *    \t\t\t(i.e., it may be a shallow copy), so it can be freely\n *    \t\t\tmodified.\n *\n *    shortmessage      result of sprintf(sprintf_args), taking options.strict\n *    \t\t\tinto account as described in README.md.\n */\nfunction parseConstructorArguments(args)\n{\n\tvar argv, options, sprintf_args, shortmessage, k;\n\n\tmod_assertplus.object(args, 'args');\n\tmod_assertplus.bool(args.strict, 'args.strict');\n\tmod_assertplus.array(args.argv, 'args.argv');\n\targv = args.argv;\n\n\t/*\n\t * First, figure out which form of invocation we've been given.\n\t */\n\tif (argv.length === 0) {\n\t\toptions = {};\n\t\tsprintf_args = [];\n\t} else if (mod_isError(argv[0])) {\n\t\toptions = { 'cause': argv[0] };\n\t\tsprintf_args = argv.slice(1);\n\t} else if (typeof (argv[0]) === 'object') {\n\t\toptions = {};\n\t\tfor (k in argv[0]) {\n\t\t\toptions[k] = argv[0][k];\n\t\t}\n\t\tsprintf_args = argv.slice(1);\n\t} else {\n\t\tmod_assertplus.string(argv[0],\n\t\t    'first argument to VError, SError, or WError ' +\n\t\t    'constructor must be a string, object, or Error');\n\t\toptions = {};\n\t\tsprintf_args = argv;\n\t}\n\n\t/*\n\t * Now construct the error's message.\n\t *\n\t * extsprintf (which we invoke here with our caller's arguments in order\n\t * to construct this Error's message) is strict in its interpretation of\n\t * values to be processed by the \"%s\" specifier.  The value passed to\n\t * extsprintf must actually be a string or something convertible to a\n\t * String using .toString().  Passing other values (notably \"null\" and\n\t * \"undefined\") is considered a programmer error.  The assumption is\n\t * that if you actually want to print the string \"null\" or \"undefined\",\n\t * then that's easy to do that when you're calling extsprintf; on the\n\t * other hand, if you did NOT want that (i.e., there's actually a bug\n\t * where the program assumes some variable is non-null and tries to\n\t * print it, which might happen when constructing a packet or file in\n\t * some specific format), then it's better to stop immediately than\n\t * produce bogus output.\n\t *\n\t * However, sometimes the bug is only in the code calling VError, and a\n\t * programmer might prefer to have the error message contain \"null\" or\n\t * \"undefined\" rather than have the bug in the error path crash the\n\t * program (making the first bug harder to identify).  For that reason,\n\t * by default VError converts \"null\" or \"undefined\" arguments to their\n\t * string representations and passes those to extsprintf.  Programmers\n\t * desiring the strict behavior can use the SError class or pass the\n\t * \"strict\" option to the VError constructor.\n\t */\n\tmod_assertplus.object(options);\n\tif (!options.strict && !args.strict) {\n\t\tsprintf_args = sprintf_args.map(function (a) {\n\t\t\treturn (a === null ? 'null' :\n\t\t\t    a === undefined ? 'undefined' : a);\n\t\t});\n\t}\n\n\tif (sprintf_args.length === 0) {\n\t\tshortmessage = '';\n\t} else {\n\t\tshortmessage = sprintf.apply(null, sprintf_args);\n\t}\n\n\treturn ({\n\t    'options': options,\n\t    'shortmessage': shortmessage\n\t});\n}\n\n/*\n * See README.md for reference documentation.\n */\nfunction VError()\n{\n\tvar args, obj, parsed, cause, ctor, message, k;\n\n\targs = Array.prototype.slice.call(arguments, 0);\n\n\t/*\n\t * This is a regrettable pattern, but JavaScript's built-in Error class\n\t * is defined to work this way, so we allow the constructor to be called\n\t * without \"new\".\n\t */\n\tif (!(this instanceof VError)) {\n\t\tobj = Object.create(VError.prototype);\n\t\tVError.apply(obj, arguments);\n\t\treturn (obj);\n\t}\n\n\t/*\n\t * For convenience and backwards compatibility, we support several\n\t * different calling forms.  Normalize them here.\n\t */\n\tparsed = parseConstructorArguments({\n\t    'argv': args,\n\t    'strict': false\n\t});\n\n\t/*\n\t * If we've been given a name, apply it now.\n\t */\n\tif (parsed.options.name) {\n\t\tmod_assertplus.string(parsed.options.name,\n\t\t    'error\\'s \"name\" must be a string');\n\t\tthis.name = parsed.options.name;\n\t}\n\n\t/*\n\t * For debugging, we keep track of the original short message (attached\n\t * this Error particularly) separately from the complete message (which\n\t * includes the messages of our cause chain).\n\t */\n\tthis.jse_shortmsg = parsed.shortmessage;\n\tmessage = parsed.shortmessage;\n\n\t/*\n\t * If we've been given a cause, record a reference to it and update our\n\t * message appropriately.\n\t */\n\tcause = parsed.options.cause;\n\tif (cause) {\n\t\tmod_assertplus.ok(mod_isError(cause), 'cause is not an Error');\n\t\tthis.jse_cause = cause;\n\n\t\tif (!parsed.options.skipCauseMessage) {\n\t\t\tmessage += ': ' + cause.message;\n\t\t}\n\t}\n\n\t/*\n\t * If we've been given an object with properties, shallow-copy that\n\t * here.  We don't want to use a deep copy in case there are non-plain\n\t * objects here, but we don't want to use the original object in case\n\t * the caller modifies it later.\n\t */\n\tthis.jse_info = {};\n\tif (parsed.options.info) {\n\t\tfor (k in parsed.options.info) {\n\t\t\tthis.jse_info[k] = parsed.options.info[k];\n\t\t}\n\t}\n\n\tthis.message = message;\n\tError.call(this, message);\n\n\tif (Error.captureStackTrace) {\n\t\tctor = parsed.options.constructorOpt || this.constructor;\n\t\tError.captureStackTrace(this, ctor);\n\t}\n\n\treturn (this);\n}\n\nmod_util.inherits(VError, Error);\nVError.prototype.name = 'VError';\n\nVError.prototype.toString = function ve_toString()\n{\n\tvar str = (this.hasOwnProperty('name') && this.name ||\n\t\tthis.constructor.name || this.constructor.prototype.name);\n\tif (this.message)\n\t\tstr += ': ' + this.message;\n\n\treturn (str);\n};\n\n/*\n * This method is provided for compatibility.  New callers should use\n * VError.cause() instead.  That method also uses the saner `null` return value\n * when there is no cause.\n */\nVError.prototype.cause = function ve_cause()\n{\n\tvar cause = VError.cause(this);\n\treturn (cause === null ? undefined : cause);\n};\n\n/*\n * Static methods\n *\n * These class-level methods are provided so that callers can use them on\n * instances of Errors that are not VErrors.  New interfaces should be provided\n * only using static methods to eliminate the class of programming mistake where\n * people fail to check whether the Error object has the corresponding methods.\n */\n\nVError.cause = function (err)\n{\n\tmod_assertplus.ok(mod_isError(err), 'err must be an Error');\n\treturn (mod_isError(err.jse_cause) ? err.jse_cause : null);\n};\n\nVError.info = function (err)\n{\n\tvar rv, cause, k;\n\n\tmod_assertplus.ok(mod_isError(err), 'err must be an Error');\n\tcause = VError.cause(err);\n\tif (cause !== null) {\n\t\trv = VError.info(cause);\n\t} else {\n\t\trv = {};\n\t}\n\n\tif (typeof (err.jse_info) == 'object' && err.jse_info !== null) {\n\t\tfor (k in err.jse_info) {\n\t\t\trv[k] = err.jse_info[k];\n\t\t}\n\t}\n\n\treturn (rv);\n};\n\nVError.findCauseByName = function (err, name)\n{\n\tvar cause;\n\n\tmod_assertplus.ok(mod_isError(err), 'err must be an Error');\n\tmod_assertplus.string(name, 'name');\n\tmod_assertplus.ok(name.length > 0, 'name cannot be empty');\n\n\tfor (cause = err; cause !== null; cause = VError.cause(cause)) {\n\t\tmod_assertplus.ok(mod_isError(cause));\n\t\tif (cause.name == name) {\n\t\t\treturn (cause);\n\t\t}\n\t}\n\n\treturn (null);\n};\n\nVError.hasCauseWithName = function (err, name)\n{\n\treturn (VError.findCauseByName(err, name) !== null);\n};\n\nVError.fullStack = function (err)\n{\n\tmod_assertplus.ok(mod_isError(err), 'err must be an Error');\n\n\tvar cause = VError.cause(err);\n\n\tif (cause) {\n\t\treturn (err.stack + '\\ncaused by: ' + VError.fullStack(cause));\n\t}\n\n\treturn (err.stack);\n};\n\nVError.errorFromList = function (errors)\n{\n\tmod_assertplus.arrayOfObject(errors, 'errors');\n\n\tif (errors.length === 0) {\n\t\treturn (null);\n\t}\n\n\terrors.forEach(function (e) {\n\t\tmod_assertplus.ok(mod_isError(e));\n\t});\n\n\tif (errors.length == 1) {\n\t\treturn (errors[0]);\n\t}\n\n\treturn (new MultiError(errors));\n};\n\nVError.errorForEach = function (err, func)\n{\n\tmod_assertplus.ok(mod_isError(err), 'err must be an Error');\n\tmod_assertplus.func(func, 'func');\n\n\tif (err instanceof MultiError) {\n\t\terr.errors().forEach(function iterError(e) { func(e); });\n\t} else {\n\t\tfunc(err);\n\t}\n};\n\n\n/*\n * SError is like VError, but stricter about types.  You cannot pass \"null\" or\n * \"undefined\" as string arguments to the formatter.\n */\nfunction SError()\n{\n\tvar args, obj, parsed, options;\n\n\targs = Array.prototype.slice.call(arguments, 0);\n\tif (!(this instanceof SError)) {\n\t\tobj = Object.create(SError.prototype);\n\t\tSError.apply(obj, arguments);\n\t\treturn (obj);\n\t}\n\n\tparsed = parseConstructorArguments({\n\t    'argv': args,\n\t    'strict': true\n\t});\n\n\toptions = parsed.options;\n\tVError.call(this, options, '%s', parsed.shortmessage);\n\n\treturn (this);\n}\n\n/*\n * We don't bother setting SError.prototype.name because once constructed,\n * SErrors are just like VErrors.\n */\nmod_util.inherits(SError, VError);\n\n\n/*\n * Represents a collection of errors for the purpose of consumers that generally\n * only deal with one error.  Callers can extract the individual errors\n * contained in this object, but may also just treat it as a normal single\n * error, in which case a summary message will be printed.\n */\nfunction MultiError(errors)\n{\n\tmod_assertplus.array(errors, 'list of errors');\n\tmod_assertplus.ok(errors.length > 0, 'must be at least one error');\n\tthis.ase_errors = errors;\n\n\tVError.call(this, {\n\t    'cause': errors[0]\n\t}, 'first of %d error%s', errors.length, errors.length == 1 ? '' : 's');\n}\n\nmod_util.inherits(MultiError, VError);\nMultiError.prototype.name = 'MultiError';\n\nMultiError.prototype.errors = function me_errors()\n{\n\treturn (this.ase_errors.slice(0));\n};\n\n\n/*\n * See README.md for reference details.\n */\nfunction WError()\n{\n\tvar args, obj, parsed, options;\n\n\targs = Array.prototype.slice.call(arguments, 0);\n\tif (!(this instanceof WError)) {\n\t\tobj = Object.create(WError.prototype);\n\t\tWError.apply(obj, args);\n\t\treturn (obj);\n\t}\n\n\tparsed = parseConstructorArguments({\n\t    'argv': args,\n\t    'strict': false\n\t});\n\n\toptions = parsed.options;\n\toptions['skipCauseMessage'] = true;\n\tVError.call(this, options, '%s', parsed.shortmessage);\n\n\treturn (this);\n}\n\nmod_util.inherits(WError, VError);\nWError.prototype.name = 'WError';\n\nWError.prototype.toString = function we_toString()\n{\n\tvar str = (this.hasOwnProperty('name') && this.name ||\n\t\tthis.constructor.name || this.constructor.prototype.name);\n\tif (this.message)\n\t\tstr += ': ' + this.message;\n\tif (this.jse_cause && this.jse_cause.message)\n\t\tstr += '; caused by ' + this.jse_cause.toString();\n\n\treturn (str);\n};\n\n/*\n * For purely historical reasons, WError's cause() function allows you to set\n * the cause.\n */\nWError.prototype.cause = function we_cause(c)\n{\n\tif (mod_isError(c))\n\t\tthis.jse_cause = c;\n\n\treturn (this.jse_cause);\n};\n", "/**\r\n * JSONSchema Validator - Validates JavaScript objects using JSON Schemas\r\n *\t(http://www.json.com/json-schema-proposal/)\r\n *\r\n * Copyright (c) 2007 Kris Zyp SitePen (www.sitepen.com)\r\n * Licensed under the MIT (MIT-LICENSE.txt) license.\r\nTo use the validator call the validate function with an instance object and an optional schema object.\r\nIf a schema is provided, it will be used to validate. If the instance object refers to a schema (self-validating),\r\nthat schema will be used to validate and the schema parameter is not necessary (if both exist,\r\nboth validations will occur).\r\nThe validate method will return an array of validation errors. If there are no errors, then an\r\nempty list will be returned. A validation error will have two properties:\r\n\"property\" which indicates which property had the error\r\n\"message\" which indicates what the error was\r\n */\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define([], function () {\r\n            return factory();\r\n        });\r\n    } else if (typeof module === 'object' && module.exports) {\r\n        // Node. Does not work with strict CommonJS, but\r\n        // only CommonJS-like environments that support module.exports,\r\n        // like Node.\r\n        module.exports = factory();\r\n    } else {\r\n        // Browser globals\r\n        root.jsonSchema = factory();\r\n    }\r\n}(this, function () {// setup primitive classes to be JSON Schema types\r\nvar exports = validate\r\nexports.Integer = {type:\"integer\"};\r\nvar primitiveConstructors = {\r\n\tString: String,\r\n\tBoolean: Boolean,\r\n\tNumber: Number,\r\n\tObject: Object,\r\n\tArray: Array,\r\n\tDate: Date\r\n}\r\nexports.validate = validate;\r\nfunction validate(/*Any*/instance,/*Object*/schema) {\r\n\t\t// Summary:\r\n\t\t//  \tTo use the validator call JSONSchema.validate with an instance object and an optional schema object.\r\n\t\t// \t\tIf a schema is provided, it will be used to validate. If the instance object refers to a schema (self-validating),\r\n\t\t// \t\tthat schema will be used to validate and the schema parameter is not necessary (if both exist,\r\n\t\t// \t\tboth validations will occur).\r\n\t\t// \t\tThe validate method will return an object with two properties:\r\n\t\t// \t\t\tvalid: A boolean indicating if the instance is valid by the schema\r\n\t\t// \t\t\terrors: An array of validation errors. If there are no errors, then an\r\n\t\t// \t\t\t\t\tempty list will be returned. A validation error will have two properties:\r\n\t\t// \t\t\t\t\t\tproperty: which indicates which property had the error\r\n\t\t// \t\t\t\t\t\tmessage: which indicates what the error was\r\n\t\t//\r\n\t\treturn validate(instance, schema, {changing: false});//, coerce: false, existingOnly: false});\r\n\t};\r\nexports.checkPropertyChange = function(/*Any*/value,/*Object*/schema, /*String*/property) {\r\n\t\t// Summary:\r\n\t\t// \t\tThe checkPropertyChange method will check to see if an value can legally be in property with the given schema\r\n\t\t// \t\tThis is slightly different than the validate method in that it will fail if the schema is readonly and it will\r\n\t\t// \t\tnot check for self-validation, it is assumed that the passed in value is already internally valid.\r\n\t\t// \t\tThe checkPropertyChange method will return the same object type as validate, see JSONSchema.validate for\r\n\t\t// \t\tinformation.\r\n\t\t//\r\n\t\treturn validate(value, schema, {changing: property || \"property\"});\r\n\t};\r\nvar validate = exports._validate = function(/*Any*/instance,/*Object*/schema,/*Object*/options) {\r\n\r\n\tif (!options) options = {};\r\n\tvar _changing = options.changing;\r\n\r\n\tfunction getType(schema){\r\n\t\treturn schema.type || (primitiveConstructors[schema.name] == schema && schema.name.toLowerCase());\r\n\t}\r\n\tvar errors = [];\r\n\t// validate a value against a property definition\r\n\tfunction checkProp(value, schema, path,i){\r\n\r\n\t\tvar l;\r\n\t\tpath += path ? typeof i == 'number' ? '[' + i + ']' : typeof i == 'undefined' ? '' : '.' + i : i;\r\n\t\tfunction addError(message){\r\n\t\t\terrors.push({property:path,message:message});\r\n\t\t}\r\n\r\n\t\tif((typeof schema != 'object' || schema instanceof Array) && (path || typeof schema != 'function') && !(schema && getType(schema))){\r\n\t\t\tif(typeof schema == 'function'){\r\n\t\t\t\tif(!(value instanceof schema)){\r\n\t\t\t\t\taddError(\"is not an instance of the class/constructor \" + schema.name);\r\n\t\t\t\t}\r\n\t\t\t}else if(schema){\r\n\t\t\t\taddError(\"Invalid schema/property definition \" + schema);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif(_changing && schema.readonly){\r\n\t\t\taddError(\"is a readonly field, it can not be changed\");\r\n\t\t}\r\n\t\tif(schema['extends']){ // if it extends another schema, it must pass that schema as well\r\n\t\t\tcheckProp(value,schema['extends'],path,i);\r\n\t\t}\r\n\t\t// validate a value against a type definition\r\n\t\tfunction checkType(type,value){\r\n\t\t\tif(type){\r\n\t\t\t\tif(typeof type == 'string' && type != 'any' &&\r\n\t\t\t\t\t\t(type == 'null' ? value !== null : typeof value != type) &&\r\n\t\t\t\t\t\t!(value instanceof Array && type == 'array') &&\r\n\t\t\t\t\t\t!(value instanceof Date && type == 'date') &&\r\n\t\t\t\t\t\t!(type == 'integer' && value%1===0)){\r\n\t\t\t\t\treturn [{property:path,message:(typeof value) + \" value found, but a \" + type + \" is required\"}];\r\n\t\t\t\t}\r\n\t\t\t\tif(type instanceof Array){\r\n\t\t\t\t\tvar unionErrors=[];\r\n\t\t\t\t\tfor(var j = 0; j < type.length; j++){ // a union type\r\n\t\t\t\t\t\tif(!(unionErrors=checkType(type[j],value)).length){\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(unionErrors.length){\r\n\t\t\t\t\t\treturn unionErrors;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(typeof type == 'object'){\r\n\t\t\t\t\tvar priorErrors = errors;\r\n\t\t\t\t\terrors = [];\r\n\t\t\t\t\tcheckProp(value,type,path);\r\n\t\t\t\t\tvar theseErrors = errors;\r\n\t\t\t\t\terrors = priorErrors;\r\n\t\t\t\t\treturn theseErrors;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tif(value === undefined){\r\n\t\t\tif(schema.required){\r\n\t\t\t\taddError(\"is missing and it is required\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\terrors = errors.concat(checkType(getType(schema),value));\r\n\t\t\tif(schema.disallow && !checkType(schema.disallow,value).length){\r\n\t\t\t\taddError(\" disallowed value was matched\");\r\n\t\t\t}\r\n\t\t\tif(value !== null){\r\n\t\t\t\tif(value instanceof Array){\r\n\t\t\t\t\tif(schema.items){\r\n\t\t\t\t\t\tvar itemsIsArray = schema.items instanceof Array;\r\n\t\t\t\t\t\tvar propDef = schema.items;\r\n\t\t\t\t\t\tfor (i = 0, l = value.length; i < l; i += 1) {\r\n\t\t\t\t\t\t\tif (itemsIsArray)\r\n\t\t\t\t\t\t\t\tpropDef = schema.items[i];\r\n\t\t\t\t\t\t\tif (options.coerce)\r\n\t\t\t\t\t\t\t\tvalue[i] = options.coerce(value[i], propDef);\r\n\t\t\t\t\t\t\terrors.concat(checkProp(value[i],propDef,path,i));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(schema.minItems && value.length < schema.minItems){\r\n\t\t\t\t\t\taddError(\"There must be a minimum of \" + schema.minItems + \" in the array\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(schema.maxItems && value.length > schema.maxItems){\r\n\t\t\t\t\t\taddError(\"There must be a maximum of \" + schema.maxItems + \" in the array\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(schema.properties || schema.additionalProperties){\r\n\t\t\t\t\terrors.concat(checkObj(value, schema.properties, path, schema.additionalProperties));\r\n\t\t\t\t}\r\n\t\t\t\tif(schema.pattern && typeof value == 'string' && !value.match(schema.pattern)){\r\n\t\t\t\t\taddError(\"does not match the regex pattern \" + schema.pattern);\r\n\t\t\t\t}\r\n\t\t\t\tif(schema.maxLength && typeof value == 'string' && value.length > schema.maxLength){\r\n\t\t\t\t\taddError(\"may only be \" + schema.maxLength + \" characters long\");\r\n\t\t\t\t}\r\n\t\t\t\tif(schema.minLength && typeof value == 'string' && value.length < schema.minLength){\r\n\t\t\t\t\taddError(\"must be at least \" + schema.minLength + \" characters long\");\r\n\t\t\t\t}\r\n\t\t\t\tif(typeof schema.minimum !== undefined && typeof value == typeof schema.minimum &&\r\n\t\t\t\t\t\tschema.minimum > value){\r\n\t\t\t\t\taddError(\"must have a minimum value of \" + schema.minimum);\r\n\t\t\t\t}\r\n\t\t\t\tif(typeof schema.maximum !== undefined && typeof value == typeof schema.maximum &&\r\n\t\t\t\t\t\tschema.maximum < value){\r\n\t\t\t\t\taddError(\"must have a maximum value of \" + schema.maximum);\r\n\t\t\t\t}\r\n\t\t\t\tif(schema['enum']){\r\n\t\t\t\t\tvar enumer = schema['enum'];\r\n\t\t\t\t\tl = enumer.length;\r\n\t\t\t\t\tvar found;\r\n\t\t\t\t\tfor(var j = 0; j < l; j++){\r\n\t\t\t\t\t\tif(enumer[j]===value){\r\n\t\t\t\t\t\t\tfound=1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!found){\r\n\t\t\t\t\t\taddError(\"does not have a value in the enumeration \" + enumer.join(\", \"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(typeof schema.maxDecimal == 'number' &&\r\n\t\t\t\t\t(value.toString().match(new RegExp(\"\\\\.[0-9]{\" + (schema.maxDecimal + 1) + \",}\")))){\r\n\t\t\t\t\taddError(\"may only have \" + schema.maxDecimal + \" digits of decimal places\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t// validate an object against a schema\r\n\tfunction checkObj(instance,objTypeDef,path,additionalProp){\r\n\r\n\t\tif(typeof objTypeDef =='object'){\r\n\t\t\tif(typeof instance != 'object' || instance instanceof Array){\r\n\t\t\t\terrors.push({property:path,message:\"an object is required\"});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor(var i in objTypeDef){ \r\n\t\t\t\tif(objTypeDef.hasOwnProperty(i)){\r\n\t\t\t\t\tvar value = instance[i];\r\n\t\t\t\t\t// skip _not_ specified properties\r\n\t\t\t\t\tif (value === undefined && options.existingOnly) continue;\r\n\t\t\t\t\tvar propDef = objTypeDef[i];\r\n\t\t\t\t\t// set default\r\n\t\t\t\t\tif(value === undefined && propDef[\"default\"]){\r\n\t\t\t\t\t\tvalue = instance[i] = propDef[\"default\"];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(options.coerce && i in instance){\r\n\t\t\t\t\t\tvalue = instance[i] = options.coerce(value, propDef);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcheckProp(value,propDef,path,i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor(i in instance){\r\n\t\t\tif(instance.hasOwnProperty(i) && !(i.charAt(0) == '_' && i.charAt(1) == '_') && objTypeDef && !objTypeDef[i] && additionalProp===false){\r\n\t\t\t\tif (options.filter) {\r\n\t\t\t\t\tdelete instance[i];\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else {\r\n\t\t\t\t\terrors.push({property:path,message:(typeof value) + \"The property \" + i +\r\n\t\t\t\t\t\t\" is not defined in the schema and the schema does not allow additional properties\"});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar requires = objTypeDef && objTypeDef[i] && objTypeDef[i].requires;\r\n\t\t\tif(requires && !(requires in instance)){\r\n\t\t\t\terrors.push({property:path,message:\"the presence of the property \" + i + \" requires that \" + requires + \" also be present\"});\r\n\t\t\t}\r\n\t\t\tvalue = instance[i];\r\n\t\t\tif(additionalProp && (!(objTypeDef && typeof objTypeDef == 'object') || !(i in objTypeDef))){\r\n\t\t\t\tif(options.coerce){\r\n\t\t\t\t\tvalue = instance[i] = options.coerce(value, additionalProp);\r\n\t\t\t\t}\r\n\t\t\t\tcheckProp(value,additionalProp,path,i);\r\n\t\t\t}\r\n\t\t\tif(!_changing && value && value.$schema){\r\n\t\t\t\terrors = errors.concat(checkProp(value,value.$schema,path,i));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn errors;\r\n\t}\r\n\tif(schema){\r\n\t\tcheckProp(instance,schema,'',_changing || '');\r\n\t}\r\n\tif(!_changing && instance && instance.$schema){\r\n\t\tcheckProp(instance,instance.$schema,'','');\r\n\t}\r\n\treturn {valid:!errors.length,errors:errors};\r\n};\r\nexports.mustBeValid = function(result){\r\n\t//\tsummary:\r\n\t//\t\tThis checks to ensure that the result is valid and will throw an appropriate error message if it is not\r\n\t// result: the result returned from checkPropertyChange or validate\r\n\tif(!result.valid){\r\n\t\tthrow new TypeError(result.errors.map(function(error){return \"for property \" + error.property + ': ' + error.message;}).join(\", \\n\"));\r\n\t}\r\n}\r\n\r\nreturn exports;\r\n}));\r\n", "/*\n * lib/jsprim.js: utilities for primitive JavaScript types\n */\n\nvar mod_assert = require('assert-plus');\nvar mod_util = require('util');\n\nvar mod_extsprintf = require('extsprintf');\nvar mod_verror = require('verror');\nvar mod_jsonschema = require('json-schema');\n\n/*\n * Public interface\n */\nexports.deepCopy = deepCopy;\nexports.deepEqual = deepEqual;\nexports.isEmpty = isEmpty;\nexports.hasKey = hasKey;\nexports.forEachKey = forEachKey;\nexports.pluck = pluck;\nexports.flattenObject = flattenObject;\nexports.flattenIter = flattenIter;\nexports.validateJsonObject = validateJsonObjectJS;\nexports.validateJsonObjectJS = validateJsonObjectJS;\nexports.randElt = randElt;\nexports.extraProperties = extraProperties;\nexports.mergeObjects = mergeObjects;\n\nexports.startsWith = startsWith;\nexports.endsWith = endsWith;\n\nexports.parseInteger = parseInteger;\n\nexports.iso8601 = iso8601;\nexports.rfc1123 = rfc1123;\nexports.parseDateTime = parseDateTime;\n\nexports.hrtimediff = hrtimeDiff;\nexports.hrtimeDiff = hrtimeDiff;\nexports.hrtimeAccum = hrtimeAccum;\nexports.hrtimeAdd = hrtimeAdd;\nexports.hrtimeNanosec = hrtimeNanosec;\nexports.hrtimeMicrosec = hrtimeMicrosec;\nexports.hrtimeMillisec = hrtimeMillisec;\n\n\n/*\n * Deep copy an acyclic *basic* Javascript object.  This only handles basic\n * scalars (strings, numbers, booleans) and arbitrarily deep arrays and objects\n * containing these.  This does *not* handle instances of other classes.\n */\nfunction deepCopy(obj)\n{\n\tvar ret, key;\n\tvar marker = '__deepCopy';\n\n\tif (obj && obj[marker])\n\t\tthrow (new Error('attempted deep copy of cyclic object'));\n\n\tif (obj && obj.constructor == Object) {\n\t\tret = {};\n\t\tobj[marker] = true;\n\n\t\tfor (key in obj) {\n\t\t\tif (key == marker)\n\t\t\t\tcontinue;\n\n\t\t\tret[key] = deepCopy(obj[key]);\n\t\t}\n\n\t\tdelete (obj[marker]);\n\t\treturn (ret);\n\t}\n\n\tif (obj && obj.constructor == Array) {\n\t\tret = [];\n\t\tobj[marker] = true;\n\n\t\tfor (key = 0; key < obj.length; key++)\n\t\t\tret.push(deepCopy(obj[key]));\n\n\t\tdelete (obj[marker]);\n\t\treturn (ret);\n\t}\n\n\t/*\n\t * It must be a primitive type -- just return it.\n\t */\n\treturn (obj);\n}\n\nfunction deepEqual(obj1, obj2)\n{\n\tif (typeof (obj1) != typeof (obj2))\n\t\treturn (false);\n\n\tif (obj1 === null || obj2 === null || typeof (obj1) != 'object')\n\t\treturn (obj1 === obj2);\n\n\tif (obj1.constructor != obj2.constructor)\n\t\treturn (false);\n\n\tvar k;\n\tfor (k in obj1) {\n\t\tif (!obj2.hasOwnProperty(k))\n\t\t\treturn (false);\n\n\t\tif (!deepEqual(obj1[k], obj2[k]))\n\t\t\treturn (false);\n\t}\n\n\tfor (k in obj2) {\n\t\tif (!obj1.hasOwnProperty(k))\n\t\t\treturn (false);\n\t}\n\n\treturn (true);\n}\n\nfunction isEmpty(obj)\n{\n\tvar key;\n\tfor (key in obj)\n\t\treturn (false);\n\treturn (true);\n}\n\nfunction hasKey(obj, key)\n{\n\tmod_assert.equal(typeof (key), 'string');\n\treturn (Object.prototype.hasOwnProperty.call(obj, key));\n}\n\nfunction forEachKey(obj, callback)\n{\n\tfor (var key in obj) {\n\t\tif (hasKey(obj, key)) {\n\t\t\tcallback(key, obj[key]);\n\t\t}\n\t}\n}\n\nfunction pluck(obj, key)\n{\n\tmod_assert.equal(typeof (key), 'string');\n\treturn (pluckv(obj, key));\n}\n\nfunction pluckv(obj, key)\n{\n\tif (obj === null || typeof (obj) !== 'object')\n\t\treturn (undefined);\n\n\tif (obj.hasOwnProperty(key))\n\t\treturn (obj[key]);\n\n\tvar i = key.indexOf('.');\n\tif (i == -1)\n\t\treturn (undefined);\n\n\tvar key1 = key.substr(0, i);\n\tif (!obj.hasOwnProperty(key1))\n\t\treturn (undefined);\n\n\treturn (pluckv(obj[key1], key.substr(i + 1)));\n}\n\n/*\n * Invoke callback(row) for each entry in the array that would be returned by\n * flattenObject(data, depth).  This is just like flattenObject(data,\n * depth).forEach(callback), except that the intermediate array is never\n * created.\n */\nfunction flattenIter(data, depth, callback)\n{\n\tdoFlattenIter(data, depth, [], callback);\n}\n\nfunction doFlattenIter(data, depth, accum, callback)\n{\n\tvar each;\n\tvar key;\n\n\tif (depth === 0) {\n\t\teach = accum.slice(0);\n\t\teach.push(data);\n\t\tcallback(each);\n\t\treturn;\n\t}\n\n\tmod_assert.ok(data !== null);\n\tmod_assert.equal(typeof (data), 'object');\n\tmod_assert.equal(typeof (depth), 'number');\n\tmod_assert.ok(depth >= 0);\n\n\tfor (key in data) {\n\t\teach = accum.slice(0);\n\t\teach.push(key);\n\t\tdoFlattenIter(data[key], depth - 1, each, callback);\n\t}\n}\n\nfunction flattenObject(data, depth)\n{\n\tif (depth === 0)\n\t\treturn ([ data ]);\n\n\tmod_assert.ok(data !== null);\n\tmod_assert.equal(typeof (data), 'object');\n\tmod_assert.equal(typeof (depth), 'number');\n\tmod_assert.ok(depth >= 0);\n\n\tvar rv = [];\n\tvar key;\n\n\tfor (key in data) {\n\t\tflattenObject(data[key], depth - 1).forEach(function (p) {\n\t\t\trv.push([ key ].concat(p));\n\t\t});\n\t}\n\n\treturn (rv);\n}\n\nfunction startsWith(str, prefix)\n{\n\treturn (str.substr(0, prefix.length) == prefix);\n}\n\nfunction endsWith(str, suffix)\n{\n\treturn (str.substr(\n\t    str.length - suffix.length, suffix.length) == suffix);\n}\n\nfunction iso8601(d)\n{\n\tif (typeof (d) == 'number')\n\t\td = new Date(d);\n\tmod_assert.ok(d.constructor === Date);\n\treturn (mod_extsprintf.sprintf('%4d-%02d-%02dT%02d:%02d:%02d.%03dZ',\n\t    d.getUTCFullYear(), d.getUTCMonth() + 1, d.getUTCDate(),\n\t    d.getUTCHours(), d.getUTCMinutes(), d.getUTCSeconds(),\n\t    d.getUTCMilliseconds()));\n}\n\nvar RFC1123_MONTHS = [\n    'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\n    'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\nvar RFC1123_DAYS = [\n    'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\nfunction rfc1123(date) {\n\treturn (mod_extsprintf.sprintf('%s, %02d %s %04d %02d:%02d:%02d GMT',\n\t    RFC1123_DAYS[date.getUTCDay()], date.getUTCDate(),\n\t    RFC1123_MONTHS[date.getUTCMonth()], date.getUTCFullYear(),\n\t    date.getUTCHours(), date.getUTCMinutes(),\n\t    date.getUTCSeconds()));\n}\n\n/*\n * Parses a date expressed as a string, as either a number of milliseconds since\n * the epoch or any string format that Date accepts, giving preference to the\n * former where these two sets overlap (e.g., small numbers).\n */\nfunction parseDateTime(str)\n{\n\t/*\n\t * This is irritatingly implicit, but significantly more concise than\n\t * alternatives.  The \"+str\" will convert a string containing only a\n\t * number directly to a Number, or NaN for other strings.  Thus, if the\n\t * conversion succeeds, we use it (this is the milliseconds-since-epoch\n\t * case).  Otherwise, we pass the string directly to the Date\n\t * constructor to parse.\n\t */\n\tvar numeric = +str;\n\tif (!isNaN(numeric)) {\n\t\treturn (new Date(numeric));\n\t} else {\n\t\treturn (new Date(str));\n\t}\n}\n\n\n/*\n * Number.*_SAFE_INTEGER isn't present before node v0.12, so we hardcode\n * the ES6 definitions here, while allowing for them to someday be higher.\n */\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;\nvar MIN_SAFE_INTEGER = Number.MIN_SAFE_INTEGER || -9007199254740991;\n\n\n/*\n * Default options for parseInteger().\n */\nvar PI_DEFAULTS = {\n\tbase: 10,\n\tallowSign: true,\n\tallowPrefix: false,\n\tallowTrailing: false,\n\tallowImprecise: false,\n\ttrimWhitespace: false,\n\tleadingZeroIsOctal: false\n};\n\nvar CP_0 = 0x30;\nvar CP_9 = 0x39;\n\nvar CP_A = 0x41;\nvar CP_B = 0x42;\nvar CP_O = 0x4f;\nvar CP_T = 0x54;\nvar CP_X = 0x58;\nvar CP_Z = 0x5a;\n\nvar CP_a = 0x61;\nvar CP_b = 0x62;\nvar CP_o = 0x6f;\nvar CP_t = 0x74;\nvar CP_x = 0x78;\nvar CP_z = 0x7a;\n\nvar PI_CONV_DEC = 0x30;\nvar PI_CONV_UC = 0x37;\nvar PI_CONV_LC = 0x57;\n\n\n/*\n * A stricter version of parseInt() that provides options for changing what\n * is an acceptable string (for example, disallowing trailing characters).\n */\nfunction parseInteger(str, uopts)\n{\n\tmod_assert.string(str, 'str');\n\tmod_assert.optionalObject(uopts, 'options');\n\n\tvar baseOverride = false;\n\tvar options = PI_DEFAULTS;\n\n\tif (uopts) {\n\t\tbaseOverride = hasKey(uopts, 'base');\n\t\toptions = mergeObjects(options, uopts);\n\t\tmod_assert.number(options.base, 'options.base');\n\t\tmod_assert.ok(options.base >= 2, 'options.base >= 2');\n\t\tmod_assert.ok(options.base <= 36, 'options.base <= 36');\n\t\tmod_assert.bool(options.allowSign, 'options.allowSign');\n\t\tmod_assert.bool(options.allowPrefix, 'options.allowPrefix');\n\t\tmod_assert.bool(options.allowTrailing,\n\t\t    'options.allowTrailing');\n\t\tmod_assert.bool(options.allowImprecise,\n\t\t    'options.allowImprecise');\n\t\tmod_assert.bool(options.trimWhitespace,\n\t\t    'options.trimWhitespace');\n\t\tmod_assert.bool(options.leadingZeroIsOctal,\n\t\t    'options.leadingZeroIsOctal');\n\n\t\tif (options.leadingZeroIsOctal) {\n\t\t\tmod_assert.ok(!baseOverride,\n\t\t\t    '\"base\" and \"leadingZeroIsOctal\" are ' +\n\t\t\t    'mutually exclusive');\n\t\t}\n\t}\n\n\tvar c;\n\tvar pbase = -1;\n\tvar base = options.base;\n\tvar start;\n\tvar mult = 1;\n\tvar value = 0;\n\tvar idx = 0;\n\tvar len = str.length;\n\n\t/* Trim any whitespace on the left side. */\n\tif (options.trimWhitespace) {\n\t\twhile (idx < len && isSpace(str.charCodeAt(idx))) {\n\t\t\t++idx;\n\t\t}\n\t}\n\n\t/* Check the number for a leading sign. */\n\tif (options.allowSign) {\n\t\tif (str[idx] === '-') {\n\t\t\tidx += 1;\n\t\t\tmult = -1;\n\t\t} else if (str[idx] === '+') {\n\t\t\tidx += 1;\n\t\t}\n\t}\n\n\t/* Parse the base-indicating prefix if there is one. */\n\tif (str[idx] === '0') {\n\t\tif (options.allowPrefix) {\n\t\t\tpbase = prefixToBase(str.charCodeAt(idx + 1));\n\t\t\tif (pbase !== -1 && (!baseOverride || pbase === base)) {\n\t\t\t\tbase = pbase;\n\t\t\t\tidx += 2;\n\t\t\t}\n\t\t}\n\n\t\tif (pbase === -1 && options.leadingZeroIsOctal) {\n\t\t\tbase = 8;\n\t\t}\n\t}\n\n\t/* Parse the actual digits. */\n\tfor (start = idx; idx < len; ++idx) {\n\t\tc = translateDigit(str.charCodeAt(idx));\n\t\tif (c !== -1 && c < base) {\n\t\t\tvalue *= base;\n\t\t\tvalue += c;\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t/* If we didn't parse any digits, we have an invalid number. */\n\tif (start === idx) {\n\t\treturn (new Error('invalid number: ' + JSON.stringify(str)));\n\t}\n\n\t/* Trim any whitespace on the right side. */\n\tif (options.trimWhitespace) {\n\t\twhile (idx < len && isSpace(str.charCodeAt(idx))) {\n\t\t\t++idx;\n\t\t}\n\t}\n\n\t/* Check for trailing characters. */\n\tif (idx < len && !options.allowTrailing) {\n\t\treturn (new Error('trailing characters after number: ' +\n\t\t    JSON.stringify(str.slice(idx))));\n\t}\n\n\t/* If our value is 0, we return now, to avoid returning -0. */\n\tif (value === 0) {\n\t\treturn (0);\n\t}\n\n\t/* Calculate our final value. */\n\tvar result = value * mult;\n\n\t/*\n\t * If the string represents a value that cannot be precisely represented\n\t * by JavaScript, then we want to check that:\n\t *\n\t * - We never increased the value past MAX_SAFE_INTEGER\n\t * - We don't make the result negative and below MIN_SAFE_INTEGER\n\t *\n\t * Because we only ever increment the value during parsing, there's no\n\t * chance of moving past MAX_SAFE_INTEGER and then dropping below it\n\t * again, losing precision in the process. This means that we only need\n\t * to do our checks here, at the end.\n\t */\n\tif (!options.allowImprecise &&\n\t    (value > MAX_SAFE_INTEGER || result < MIN_SAFE_INTEGER)) {\n\t\treturn (new Error('number is outside of the supported range: ' +\n\t\t    JSON.stringify(str.slice(start, idx))));\n\t}\n\n\treturn (result);\n}\n\n\n/*\n * Interpret a character code as a base-36 digit.\n */\nfunction translateDigit(d)\n{\n\tif (d >= CP_0 && d <= CP_9) {\n\t\t/* '0' to '9' -> 0 to 9 */\n\t\treturn (d - PI_CONV_DEC);\n\t} else if (d >= CP_A && d <= CP_Z) {\n\t\t/* 'A' - 'Z' -> 10 to 35 */\n\t\treturn (d - PI_CONV_UC);\n\t} else if (d >= CP_a && d <= CP_z) {\n\t\t/* 'a' - 'z' -> 10 to 35 */\n\t\treturn (d - PI_CONV_LC);\n\t} else {\n\t\t/* Invalid character code */\n\t\treturn (-1);\n\t}\n}\n\n\n/*\n * Test if a value matches the ECMAScript definition of trimmable whitespace.\n */\nfunction isSpace(c)\n{\n\treturn (c === 0x20) ||\n\t    (c >= 0x0009 && c <= 0x000d) ||\n\t    (c === 0x00a0) ||\n\t    (c === 0x1680) ||\n\t    (c === 0x180e) ||\n\t    (c >= 0x2000 && c <= 0x200a) ||\n\t    (c === 0x2028) ||\n\t    (c === 0x2029) ||\n\t    (c === 0x202f) ||\n\t    (c === 0x205f) ||\n\t    (c === 0x3000) ||\n\t    (c === 0xfeff);\n}\n\n\n/*\n * Determine which base a character indicates (e.g., 'x' indicates hex).\n */\nfunction prefixToBase(c)\n{\n\tif (c === CP_b || c === CP_B) {\n\t\t/* 0b/0B (binary) */\n\t\treturn (2);\n\t} else if (c === CP_o || c === CP_O) {\n\t\t/* 0o/0O (octal) */\n\t\treturn (8);\n\t} else if (c === CP_t || c === CP_T) {\n\t\t/* 0t/0T (decimal) */\n\t\treturn (10);\n\t} else if (c === CP_x || c === CP_X) {\n\t\t/* 0x/0X (hexadecimal) */\n\t\treturn (16);\n\t} else {\n\t\t/* Not a meaningful character */\n\t\treturn (-1);\n\t}\n}\n\n\nfunction validateJsonObjectJS(schema, input)\n{\n\tvar report = mod_jsonschema.validate(input, schema);\n\n\tif (report.errors.length === 0)\n\t\treturn (null);\n\n\t/* Currently, we only do anything useful with the first error. */\n\tvar error = report.errors[0];\n\n\t/* The failed property is given by a URI with an irrelevant prefix. */\n\tvar propname = error['property'];\n\tvar reason = error['message'].toLowerCase();\n\tvar i, j;\n\n\t/*\n\t * There's at least one case where the property error message is\n\t * confusing at best.  We work around this here.\n\t */\n\tif ((i = reason.indexOf('the property ')) != -1 &&\n\t    (j = reason.indexOf(' is not defined in the schema and the ' +\n\t    'schema does not allow additional properties')) != -1) {\n\t\ti += 'the property '.length;\n\t\tif (propname === '')\n\t\t\tpropname = reason.substr(i, j - i);\n\t\telse\n\t\t\tpropname = propname + '.' + reason.substr(i, j - i);\n\n\t\treason = 'unsupported property';\n\t}\n\n\tvar rv = new mod_verror.VError('property \"%s\": %s', propname, reason);\n\trv.jsv_details = error;\n\treturn (rv);\n}\n\nfunction randElt(arr)\n{\n\tmod_assert.ok(Array.isArray(arr) && arr.length > 0,\n\t    'randElt argument must be a non-empty array');\n\n\treturn (arr[Math.floor(Math.random() * arr.length)]);\n}\n\nfunction assertHrtime(a)\n{\n\tmod_assert.ok(a[0] >= 0 && a[1] >= 0,\n\t    'negative numbers not allowed in hrtimes');\n\tmod_assert.ok(a[1] < 1e9, 'nanoseconds column overflow');\n}\n\n/*\n * Compute the time elapsed between hrtime readings A and B, where A is later\n * than B.  hrtime readings come from Node's process.hrtime().  There is no\n * defined way to represent negative deltas, so it's illegal to diff B from A\n * where the time denoted by B is later than the time denoted by A.  If this\n * becomes valuable, we can define a representation and extend the\n * implementation to support it.\n */\nfunction hrtimeDiff(a, b)\n{\n\tassertHrtime(a);\n\tassertHrtime(b);\n\tmod_assert.ok(a[0] > b[0] || (a[0] == b[0] && a[1] >= b[1]),\n\t    'negative differences not allowed');\n\n\tvar rv = [ a[0] - b[0], 0 ];\n\n\tif (a[1] >= b[1]) {\n\t\trv[1] = a[1] - b[1];\n\t} else {\n\t\trv[0]--;\n\t\trv[1] = 1e9 - (b[1] - a[1]);\n\t}\n\n\treturn (rv);\n}\n\n/*\n * Convert a hrtime reading from the array format returned by Node's\n * process.hrtime() into a scalar number of nanoseconds.\n */\nfunction hrtimeNanosec(a)\n{\n\tassertHrtime(a);\n\n\treturn (Math.floor(a[0] * 1e9 + a[1]));\n}\n\n/*\n * Convert a hrtime reading from the array format returned by Node's\n * process.hrtime() into a scalar number of microseconds.\n */\nfunction hrtimeMicrosec(a)\n{\n\tassertHrtime(a);\n\n\treturn (Math.floor(a[0] * 1e6 + a[1] / 1e3));\n}\n\n/*\n * Convert a hrtime reading from the array format returned by Node's\n * process.hrtime() into a scalar number of milliseconds.\n */\nfunction hrtimeMillisec(a)\n{\n\tassertHrtime(a);\n\n\treturn (Math.floor(a[0] * 1e3 + a[1] / 1e6));\n}\n\n/*\n * Add two hrtime readings A and B, overwriting A with the result of the\n * addition.  This function is useful for accumulating several hrtime intervals\n * into a counter.  Returns A.\n */\nfunction hrtimeAccum(a, b)\n{\n\tassertHrtime(a);\n\tassertHrtime(b);\n\n\t/*\n\t * Accumulate the nanosecond component.\n\t */\n\ta[1] += b[1];\n\tif (a[1] >= 1e9) {\n\t\t/*\n\t\t * The nanosecond component overflowed, so carry to the seconds\n\t\t * field.\n\t\t */\n\t\ta[0]++;\n\t\ta[1] -= 1e9;\n\t}\n\n\t/*\n\t * Accumulate the seconds component.\n\t */\n\ta[0] += b[0];\n\n\treturn (a);\n}\n\n/*\n * Add two hrtime readings A and B, returning the result as a new hrtime array.\n * Does not modify either input argument.\n */\nfunction hrtimeAdd(a, b)\n{\n\tassertHrtime(a);\n\n\tvar rv = [ a[0], a[1] ];\n\n\treturn (hrtimeAccum(rv, b));\n}\n\n\n/*\n * Check an object for unexpected properties.  Accepts the object to check, and\n * an array of allowed property names (strings).  Returns an array of key names\n * that were found on the object, but did not appear in the list of allowed\n * properties.  If no properties were found, the returned array will be of\n * zero length.\n */\nfunction extraProperties(obj, allowed)\n{\n\tmod_assert.ok(typeof (obj) === 'object' && obj !== null,\n\t    'obj argument must be a non-null object');\n\tmod_assert.ok(Array.isArray(allowed),\n\t    'allowed argument must be an array of strings');\n\tfor (var i = 0; i < allowed.length; i++) {\n\t\tmod_assert.ok(typeof (allowed[i]) === 'string',\n\t\t    'allowed argument must be an array of strings');\n\t}\n\n\treturn (Object.keys(obj).filter(function (key) {\n\t\treturn (allowed.indexOf(key) === -1);\n\t}));\n}\n\n/*\n * Given three sets of properties \"provided\" (may be undefined), \"overrides\"\n * (required), and \"defaults\" (may be undefined), construct an object containing\n * the union of these sets with \"overrides\" overriding \"provided\", and\n * \"provided\" overriding \"defaults\".  None of the input objects are modified.\n */\nfunction mergeObjects(provided, overrides, defaults)\n{\n\tvar rv, k;\n\n\trv = {};\n\tif (defaults) {\n\t\tfor (k in defaults)\n\t\t\trv[k] = defaults[k];\n\t}\n\n\tif (provided) {\n\t\tfor (k in provided)\n\t\t\trv[k] = provided[k];\n\t}\n\n\tif (overrides) {\n\t\tfor (k in overrides)\n\t\t\trv[k] = overrides[k];\n\t}\n\n\treturn (rv);\n}\n", "// Copyright 2012 Joyent, Inc.  All rights reserved.\n\nvar assert = require('assert-plus');\nvar crypto = require('crypto');\nvar http = require('http');\nvar util = require('util');\nvar sshpk = require('sshpk');\nvar jsprim = require('jsprim');\nvar utils = require('./utils');\n\nvar sprintf = require('util').format;\n\nvar HASH_ALGOS = utils.HASH_ALGOS;\nvar PK_ALGOS = utils.PK_ALGOS;\nvar InvalidAlgorithmError = utils.InvalidAlgorithmError;\nvar HttpSignatureError = utils.HttpSignatureError;\nvar validateAlgorithm = utils.validateAlgorithm;\n\n///--- Globals\n\nvar AUTHZ_FMT =\n  'Signature keyId=\"%s\",algorithm=\"%s\",headers=\"%s\",signature=\"%s\"';\n\n///--- Specific Errors\n\nfunction MissingHeaderError(message) {\n  HttpSignatureError.call(this, message, MissingHeaderError);\n}\nutil.inherits(MissingHeaderError, HttpSignatureError);\n\nfunction StrictParsingError(message) {\n  HttpSignatureError.call(this, message, StrictParsingError);\n}\nutil.inherits(StrictParsingError, HttpSignatureError);\n\n/* See createSigner() */\nfunction RequestSigner(options) {\n  assert.object(options, 'options');\n\n  var alg = [];\n  if (options.algorithm !== undefined) {\n    assert.string(options.algorithm, 'options.algorithm');\n    alg = validateAlgorithm(options.algorithm);\n  }\n  this.rs_alg = alg;\n\n  /*\n   * RequestSigners come in two varieties: ones with an rs_signFunc, and ones\n   * with an rs_signer.\n   *\n   * rs_signFunc-based RequestSigners have to build up their entire signing\n   * string within the rs_lines array and give it to rs_signFunc as a single\n   * concat'd blob. rs_signer-based RequestSigners can add a line at a time to\n   * their signing state by using rs_signer.update(), thus only needing to\n   * buffer the hash function state and one line at a time.\n   */\n  if (options.sign !== undefined) {\n    assert.func(options.sign, 'options.sign');\n    this.rs_signFunc = options.sign;\n\n  } else if (alg[0] === 'hmac' && options.key !== undefined) {\n    assert.string(options.keyId, 'options.keyId');\n    this.rs_keyId = options.keyId;\n\n    if (typeof (options.key) !== 'string' && !Buffer.isBuffer(options.key))\n      throw (new TypeError('options.key for HMAC must be a string or Buffer'));\n\n    /*\n     * Make an rs_signer for HMACs, not a rs_signFunc -- HMACs digest their\n     * data in chunks rather than requiring it all to be given in one go\n     * at the end, so they are more similar to signers than signFuncs.\n     */\n    this.rs_signer = crypto.createHmac(alg[1].toUpperCase(), options.key);\n    this.rs_signer.sign = function () {\n      var digest = this.digest('base64');\n      return ({\n        hashAlgorithm: alg[1],\n        toString: function () { return (digest); }\n      });\n    };\n\n  } else if (options.key !== undefined) {\n    var key = options.key;\n    if (typeof (key) === 'string' || Buffer.isBuffer(key))\n      key = sshpk.parsePrivateKey(key);\n\n    assert.ok(sshpk.PrivateKey.isPrivateKey(key, [1, 2]),\n      'options.key must be a sshpk.PrivateKey');\n    this.rs_key = key;\n\n    assert.string(options.keyId, 'options.keyId');\n    this.rs_keyId = options.keyId;\n\n    if (!PK_ALGOS[key.type]) {\n      throw (new InvalidAlgorithmError(key.type.toUpperCase() + ' type ' +\n        'keys are not supported'));\n    }\n\n    if (alg[0] !== undefined && key.type !== alg[0]) {\n      throw (new InvalidAlgorithmError('options.key must be a ' +\n        alg[0].toUpperCase() + ' key, was given a ' +\n        key.type.toUpperCase() + ' key instead'));\n    }\n\n    this.rs_signer = key.createSign(alg[1]);\n\n  } else {\n    throw (new TypeError('options.sign (func) or options.key is required'));\n  }\n\n  this.rs_headers = [];\n  this.rs_lines = [];\n}\n\n/**\n * Adds a header to be signed, with its value, into this signer.\n *\n * @param {String} header\n * @param {String} value\n * @return {String} value written\n */\nRequestSigner.prototype.writeHeader = function (header, value) {\n  assert.string(header, 'header');\n  header = header.toLowerCase();\n  assert.string(value, 'value');\n\n  this.rs_headers.push(header);\n\n  if (this.rs_signFunc) {\n    this.rs_lines.push(header + ': ' + value);\n\n  } else {\n    var line = header + ': ' + value;\n    if (this.rs_headers.length > 0)\n      line = '\\n' + line;\n    this.rs_signer.update(line);\n  }\n\n  return (value);\n};\n\n/**\n * Adds a default Date header, returning its value.\n *\n * @return {String}\n */\nRequestSigner.prototype.writeDateHeader = function () {\n  return (this.writeHeader('date', jsprim.rfc1123(new Date())));\n};\n\n/**\n * Adds the request target line to be signed.\n *\n * @param {String} method, HTTP method (e.g. 'get', 'post', 'put')\n * @param {String} path\n */\nRequestSigner.prototype.writeTarget = function (method, path) {\n  assert.string(method, 'method');\n  assert.string(path, 'path');\n  method = method.toLowerCase();\n  this.writeHeader('(request-target)', method + ' ' + path);\n};\n\n/**\n * Calculate the value for the Authorization header on this request\n * asynchronously.\n *\n * @param {Func} callback (err, authz)\n */\nRequestSigner.prototype.sign = function (cb) {\n  assert.func(cb, 'callback');\n\n  if (this.rs_headers.length < 1)\n    throw (new Error('At least one header must be signed'));\n\n  var alg, authz;\n  if (this.rs_signFunc) {\n    var data = this.rs_lines.join('\\n');\n    var self = this;\n    this.rs_signFunc(data, function (err, sig) {\n      if (err) {\n        cb(err);\n        return;\n      }\n      try {\n        assert.object(sig, 'signature');\n        assert.string(sig.keyId, 'signature.keyId');\n        assert.string(sig.algorithm, 'signature.algorithm');\n        assert.string(sig.signature, 'signature.signature');\n        alg = validateAlgorithm(sig.algorithm);\n\n        authz = sprintf(AUTHZ_FMT,\n          sig.keyId,\n          sig.algorithm,\n          self.rs_headers.join(' '),\n          sig.signature);\n      } catch (e) {\n        cb(e);\n        return;\n      }\n      cb(null, authz);\n    });\n\n  } else {\n    try {\n      var sigObj = this.rs_signer.sign();\n    } catch (e) {\n      cb(e);\n      return;\n    }\n    alg = (this.rs_alg[0] || this.rs_key.type) + '-' + sigObj.hashAlgorithm;\n    var signature = sigObj.toString();\n    authz = sprintf(AUTHZ_FMT,\n      this.rs_keyId,\n      alg,\n      this.rs_headers.join(' '),\n      signature);\n    cb(null, authz);\n  }\n};\n\n///--- Exported API\n\nmodule.exports = {\n  /**\n   * Identifies whether a given object is a request signer or not.\n   *\n   * @param {Object} object, the object to identify\n   * @returns {Boolean}\n   */\n  isSigner: function (obj) {\n    if (typeof (obj) === 'object' && obj instanceof RequestSigner)\n      return (true);\n    return (false);\n  },\n\n  /**\n   * Creates a request signer, used to asynchronously build a signature\n   * for a request (does not have to be an http.ClientRequest).\n   *\n   * @param {Object} options, either:\n   *                   - {String} keyId\n   *                   - {String|Buffer} key\n   *                   - {String} algorithm (optional, required for HMAC)\n   *                 or:\n   *                   - {Func} sign (data, cb)\n   * @return {RequestSigner}\n   */\n  createSigner: function createSigner(options) {\n    return (new RequestSigner(options));\n  },\n\n  /**\n   * Adds an 'Authorization' header to an http.ClientRequest object.\n   *\n   * Note that this API will add a Date header if it's not already set. Any\n   * other headers in the options.headers array MUST be present, or this\n   * will throw.\n   *\n   * You shouldn't need to check the return type; it's just there if you want\n   * to be pedantic.\n   *\n   * The optional flag indicates whether parsing should use strict enforcement\n   * of the version draft-cavage-http-signatures-04 of the spec or beyond.\n   * The default is to be loose and support\n   * older versions for compatibility.\n   *\n   * @param {Object} request an instance of http.ClientRequest.\n   * @param {Object} options signing parameters object:\n   *                   - {String} keyId required.\n   *                   - {String} key required (either a PEM or HMAC key).\n   *                   - {Array} headers optional; defaults to ['date'].\n   *                   - {String} algorithm optional (unless key is HMAC);\n   *                              default is the same as the sshpk default\n   *                              signing algorithm for the type of key given\n   *                   - {String} httpVersion optional; defaults to '1.1'.\n   *                   - {Boolean} strict optional; defaults to 'false'.\n   * @return {Boolean} true if Authorization (and optionally Date) were added.\n   * @throws {TypeError} on bad parameter types (input).\n   * @throws {InvalidAlgorithmError} if algorithm was bad or incompatible with\n   *                                 the given key.\n   * @throws {sshpk.KeyParseError} if key was bad.\n   * @throws {MissingHeaderError} if a header to be signed was specified but\n   *                              was not present.\n   */\n  signRequest: function signRequest(request, options) {\n    assert.object(request, 'request');\n    assert.object(options, 'options');\n    assert.optionalString(options.algorithm, 'options.algorithm');\n    assert.string(options.keyId, 'options.keyId');\n    assert.optionalArrayOfString(options.headers, 'options.headers');\n    assert.optionalString(options.httpVersion, 'options.httpVersion');\n\n    if (!request.getHeader('Date'))\n      request.setHeader('Date', jsprim.rfc1123(new Date()));\n    if (!options.headers)\n      options.headers = ['date'];\n    if (!options.httpVersion)\n      options.httpVersion = '1.1';\n\n    var alg = [];\n    if (options.algorithm) {\n      options.algorithm = options.algorithm.toLowerCase();\n      alg = validateAlgorithm(options.algorithm);\n    }\n\n    var i;\n    var stringToSign = '';\n    for (i = 0; i < options.headers.length; i++) {\n      if (typeof (options.headers[i]) !== 'string')\n        throw new TypeError('options.headers must be an array of Strings');\n\n      var h = options.headers[i].toLowerCase();\n\n      if (h === 'request-line') {\n        if (!options.strict) {\n          /**\n           * We allow headers from the older spec drafts if strict parsing isn't\n           * specified in options.\n           */\n          stringToSign +=\n            request.method + ' ' + request.path + ' HTTP/' +\n            options.httpVersion;\n        } else {\n          /* Strict parsing doesn't allow older draft headers. */\n          throw (new StrictParsingError('request-line is not a valid header ' +\n            'with strict parsing enabled.'));\n        }\n      } else if (h === '(request-target)') {\n        stringToSign +=\n          '(request-target): ' + request.method.toLowerCase() + ' ' +\n          request.path;\n      } else {\n        var value = request.getHeader(h);\n        if (value === undefined || value === '') {\n          throw new MissingHeaderError(h + ' was not in the request');\n        }\n        stringToSign += h + ': ' + value;\n      }\n\n      if ((i + 1) < options.headers.length)\n        stringToSign += '\\n';\n    }\n\n    /* This is just for unit tests. */\n    if (request.hasOwnProperty('_stringToSign')) {\n      request._stringToSign = stringToSign;\n    }\n\n    var signature;\n    if (alg[0] === 'hmac') {\n      if (typeof (options.key) !== 'string' && !Buffer.isBuffer(options.key))\n        throw (new TypeError('options.key must be a string or Buffer'));\n\n      var hmac = crypto.createHmac(alg[1].toUpperCase(), options.key);\n      hmac.update(stringToSign);\n      signature = hmac.digest('base64');\n\n    } else {\n      var key = options.key;\n      if (typeof (key) === 'string' || Buffer.isBuffer(key))\n        key = sshpk.parsePrivateKey(options.key);\n\n      assert.ok(sshpk.PrivateKey.isPrivateKey(key, [1, 2]),\n        'options.key must be a sshpk.PrivateKey');\n\n      if (!PK_ALGOS[key.type]) {\n        throw (new InvalidAlgorithmError(key.type.toUpperCase() + ' type ' +\n          'keys are not supported'));\n      }\n\n      if (alg[0] !== undefined && key.type !== alg[0]) {\n        throw (new InvalidAlgorithmError('options.key must be a ' +\n          alg[0].toUpperCase() + ' key, was given a ' +\n          key.type.toUpperCase() + ' key instead'));\n      }\n\n      var signer = key.createSign(alg[1]);\n      signer.update(stringToSign);\n      var sigObj = signer.sign();\n      if (!HASH_ALGOS[sigObj.hashAlgorithm]) {\n        throw (new InvalidAlgorithmError(sigObj.hashAlgorithm.toUpperCase() +\n          ' is not a supported hash algorithm'));\n      }\n      options.algorithm = key.type + '-' + sigObj.hashAlgorithm;\n      signature = sigObj.toString();\n      assert.notStrictEqual(signature, '', 'empty signature produced');\n    }\n\n    var authzHeaderName = options.authorizationHeaderName || 'Authorization';\n\n    request.setHeader(authzHeaderName, sprintf(AUTHZ_FMT,\n                                               options.keyId,\n                                               options.algorithm,\n                                               options.headers.join(' '),\n                                               signature));\n\n    return true;\n  }\n\n};\n", "// Copyright 2015 Joyent, Inc.\n\nvar assert = require('assert-plus');\nvar crypto = require('crypto');\nvar sshpk = require('sshpk');\nvar utils = require('./utils');\n\nvar HASH_ALGOS = utils.HASH_ALGOS;\nvar PK_ALGOS = utils.PK_ALGOS;\nvar InvalidAlgorithmError = utils.InvalidAlgorithmError;\nvar HttpSignatureError = utils.HttpSignatureError;\nvar validateAlgorithm = utils.validateAlgorithm;\n\n///--- Exported API\n\nmodule.exports = {\n  /**\n   * Verify RSA/DSA signature against public key.  You are expected to pass in\n   * an object that was returned from `parse()`.\n   *\n   * @param {Object} parsedSignature the object you got from `parse`.\n   * @param {String} pubkey RSA/DSA private key PEM.\n   * @return {Boolean} true if valid, false otherwise.\n   * @throws {TypeError} if you pass in bad arguments.\n   * @throws {InvalidAlgorithmError}\n   */\n  verifySignature: function verifySignature(parsedSignature, pubkey) {\n    assert.object(parsedSignature, 'parsedSignature');\n    if (typeof (pubkey) === 'string' || Buffer.isBuffer(pubkey))\n      pubkey = sshpk.parseKey(pubkey);\n    assert.ok(sshpk.Key.isKey(pubkey, [1, 1]), 'pubkey must be a sshpk.Key');\n\n    var alg = validateAlgorithm(parsedSignature.algorithm);\n    if (alg[0] === 'hmac' || alg[0] !== pubkey.type)\n      return (false);\n\n    var v = pubkey.createVerify(alg[1]);\n    v.update(parsedSignature.signingString);\n    return (v.verify(parsedSignature.params.signature, 'base64'));\n  },\n\n  /**\n   * Verify HMAC against shared secret.  You are expected to pass in an object\n   * that was returned from `parse()`.\n   *\n   * @param {Object} parsedSignature the object you got from `parse`.\n   * @param {String} secret HMAC shared secret.\n   * @return {Boolean} true if valid, false otherwise.\n   * @throws {TypeError} if you pass in bad arguments.\n   * @throws {InvalidAlgorithmError}\n   */\n  verifyHMAC: function verifyHMAC(parsedSignature, secret) {\n    assert.object(parsedSignature, 'parsedHMAC');\n    assert.string(secret, 'secret');\n\n    var alg = validateAlgorithm(parsedSignature.algorithm);\n    if (alg[0] !== 'hmac')\n      return (false);\n\n    var hashAlg = alg[1].toUpperCase();\n\n    var hmac = crypto.createHmac(hashAlg, secret);\n    hmac.update(parsedSignature.signingString);\n\n    /*\n     * Now double-hash to avoid leaking timing information - there's\n     * no easy constant-time compare in JS, so we use this approach\n     * instead. See for more info:\n     * https://www.isecpartners.com/blog/2011/february/double-hmac-\n     * verification.aspx\n     */\n    var h1 = crypto.createHmac(hashAlg, secret);\n    h1.update(hmac.digest());\n    h1 = h1.digest();\n    var h2 = crypto.createHmac(hashAlg, secret);\n    h2.update(new Buffer(parsedSignature.params.signature, 'base64'));\n    h2 = h2.digest();\n\n    /* Node 0.8 returns strings from .digest(). */\n    if (typeof (h1) === 'string')\n      return (h1 === h2);\n    /* And node 0.10 lacks the .equals() method on Buffers. */\n    if (Buffer.isBuffer(h1) && !h1.equals)\n      return (h1.toString('binary') === h2.toString('binary'));\n\n    return (h1.equals(h2));\n  }\n};\n", "// Copyright 2015 Joyent, Inc.\n\nvar parser = require('./parser');\nvar signer = require('./signer');\nvar verify = require('./verify');\nvar utils = require('./utils');\n\n\n\n///--- API\n\nmodule.exports = {\n\n  parse: parser.parseRequest,\n  parseRequest: parser.parseRequest,\n\n  sign: signer.signRequest,\n  signRequest: signer.signRequest,\n  createSigner: signer.createSigner,\n  isSigner: signer.isSigner,\n\n  sshKeyToPEM: utils.sshKeyToPEM,\n  sshKeyFingerprint: utils.fingerprint,\n  pemToRsaSSHKey: utils.pemToRsaSSHKey,\n\n  verify: verify.verifySignature,\n  verifySignature: verify.verifySignature,\n  verifyHMAC: verify.verifyHMAC\n};\n", "/*!\n * mime-db\n * Copyright(c) 2014 Jonathan Ong\n * MIT Licensed\n */\n\n/**\n * Module exports.\n */\n\nmodule.exports = require('./db.json')\n", "/*!\n * mime-types\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar db = require('mime-db')\nvar extname = require('path').extname\n\n/**\n * Module variables.\n * @private\n */\n\nvar EXTRACT_TYPE_REGEXP = /^\\s*([^;\\s]*)(?:;|\\s|$)/\nvar TEXT_TYPE_REGEXP = /^text\\//i\n\n/**\n * Module exports.\n * @public\n */\n\nexports.charset = charset\nexports.charsets = { lookup: charset }\nexports.contentType = contentType\nexports.extension = extension\nexports.extensions = Object.create(null)\nexports.lookup = lookup\nexports.types = Object.create(null)\n\n// Populate the extensions/types maps\npopulateMaps(exports.extensions, exports.types)\n\n/**\n * Get the default charset for a MIME type.\n *\n * @param {string} type\n * @return {boolean|string}\n */\n\nfunction charset (type) {\n  if (!type || typeof type !== 'string') {\n    return false\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type)\n  var mime = match && db[match[1].toLowerCase()]\n\n  if (mime && mime.charset) {\n    return mime.charset\n  }\n\n  // default text/* to utf-8\n  if (match && TEXT_TYPE_REGEXP.test(match[1])) {\n    return 'UTF-8'\n  }\n\n  return false\n}\n\n/**\n * Create a full Content-Type header given a MIME type or extension.\n *\n * @param {string} str\n * @return {boolean|string}\n */\n\nfunction contentType (str) {\n  // TODO: should this even be in this module?\n  if (!str || typeof str !== 'string') {\n    return false\n  }\n\n  var mime = str.indexOf('/') === -1\n    ? exports.lookup(str)\n    : str\n\n  if (!mime) {\n    return false\n  }\n\n  // TODO: use content-type or other module\n  if (mime.indexOf('charset') === -1) {\n    var charset = exports.charset(mime)\n    if (charset) mime += '; charset=' + charset.toLowerCase()\n  }\n\n  return mime\n}\n\n/**\n * Get the default extension for a MIME type.\n *\n * @param {string} type\n * @return {boolean|string}\n */\n\nfunction extension (type) {\n  if (!type || typeof type !== 'string') {\n    return false\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type)\n\n  // get extensions\n  var exts = match && exports.extensions[match[1].toLowerCase()]\n\n  if (!exts || !exts.length) {\n    return false\n  }\n\n  return exts[0]\n}\n\n/**\n * Lookup the MIME type for a file path/extension.\n *\n * @param {string} path\n * @return {boolean|string}\n */\n\nfunction lookup (path) {\n  if (!path || typeof path !== 'string') {\n    return false\n  }\n\n  // get the extension (\"ext\" or \".ext\" or full path)\n  var extension = extname('x.' + path)\n    .toLowerCase()\n    .substr(1)\n\n  if (!extension) {\n    return false\n  }\n\n  return exports.types[extension] || false\n}\n\n/**\n * Populate the extensions and types maps.\n * @private\n */\n\nfunction populateMaps (extensions, types) {\n  // source preference (least -> most)\n  var preference = ['nginx', 'apache', undefined, 'iana']\n\n  Object.keys(db).forEach(function forEachMimeType (type) {\n    var mime = db[type]\n    var exts = mime.extensions\n\n    if (!exts || !exts.length) {\n      return\n    }\n\n    // mime -> extensions\n    extensions[type] = exts\n\n    // extension -> mime\n    for (var i = 0; i < exts.length; i++) {\n      var extension = exts[i]\n\n      if (types[extension]) {\n        var from = preference.indexOf(db[types[extension]].source)\n        var to = preference.indexOf(mime.source)\n\n        if (types[extension] !== 'application/octet-stream' &&\n          (from > to || (from === to && types[extension].substr(0, 12) === 'application/'))) {\n          // skip the remapping\n          continue\n        }\n      }\n\n      // set the extension -> mime\n      types[extension] = type\n    }\n  })\n}\n", "function Caseless (dict) {\n  this.dict = dict || {}\n}\nCaseless.prototype.set = function (name, value, clobber) {\n  if (typeof name === 'object') {\n    for (var i in name) {\n      this.set(i, name[i], value)\n    }\n  } else {\n    if (typeof clobber === 'undefined') clobber = true\n    var has = this.has(name)\n\n    if (!clobber && has) this.dict[has] = this.dict[has] + ',' + value\n    else this.dict[has || name] = value\n    return has\n  }\n}\nCaseless.prototype.has = function (name) {\n  var keys = Object.keys(this.dict)\n    , name = name.toLowerCase()\n    ;\n  for (var i=0;i<keys.length;i++) {\n    if (keys[i].toLowerCase() === name) return keys[i]\n  }\n  return false\n}\nCaseless.prototype.get = function (name) {\n  name = name.toLowerCase()\n  var result, _key\n  var headers = this.dict\n  Object.keys(headers).forEach(function (key) {\n    _key = key.toLowerCase()\n    if (name === _key) result = headers[key]\n  })\n  return result\n}\nCaseless.prototype.swap = function (name) {\n  var has = this.has(name)\n  if (has === name) return\n  if (!has) throw new Error('There is no header than matches \"'+name+'\"')\n  this.dict[name] = this.dict[has]\n  delete this.dict[has]\n}\nCaseless.prototype.del = function (name) {\n  var has = this.has(name)\n  return delete this.dict[has || name]\n}\n\nmodule.exports = function (dict) {return new Caseless(dict)}\nmodule.exports.httpify = function (resp, headers) {\n  var c = new Caseless(headers)\n  resp.setHeader = function (key, value, clobber) {\n    if (typeof value === 'undefined') return\n    return c.set(key, value, clobber)\n  }\n  resp.hasHeader = function (key) {\n    return c.has(key)\n  }\n  resp.getHeader = function (key) {\n    return c.get(key)\n  }\n  resp.removeHeader = function (key) {\n    return c.del(key)\n  }\n  resp.headers = c.dict\n  return c\n}\n", "module.exports = ForeverAgent\nForeverAgent.SSL = ForeverAgentSSL\n\nvar util = require('util')\n  , Agent = require('http').Agent\n  , net = require('net')\n  , tls = require('tls')\n  , AgentSSL = require('https').Agent\n  \nfunction getConnectionName(host, port) {  \n  var name = ''\n  if (typeof host === 'string') {\n    name = host + ':' + port\n  } else {\n    // For node.js v012.0 and iojs-v1.5.1, host is an object. And any existing localAddress is part of the connection name.\n    name = host.host + ':' + host.port + ':' + (host.localAddress ? (host.localAddress + ':') : ':')\n  }\n  return name\n}    \n\nfunction ForeverAgent(options) {\n  var self = this\n  self.options = options || {}\n  self.requests = {}\n  self.sockets = {}\n  self.freeSockets = {}\n  self.maxSockets = self.options.maxSockets || Agent.defaultMaxSockets\n  self.minSockets = self.options.minSockets || ForeverAgent.defaultMinSockets\n  self.on('free', function(socket, host, port) {\n    var name = getConnectionName(host, port)\n\n    if (self.requests[name] && self.requests[name].length) {\n      self.requests[name].shift().onSocket(socket)\n    } else if (self.sockets[name].length < self.minSockets) {\n      if (!self.freeSockets[name]) self.freeSockets[name] = []\n      self.freeSockets[name].push(socket)\n      \n      // if an error happens while we don't use the socket anyway, meh, throw the socket away\n      var onIdleError = function() {\n        socket.destroy()\n      }\n      socket._onIdleError = onIdleError\n      socket.on('error', onIdleError)\n    } else {\n      // If there are no pending requests just destroy the\n      // socket and it will get removed from the pool. This\n      // gets us out of timeout issues and allows us to\n      // default to Connection:keep-alive.\n      socket.destroy()\n    }\n  })\n\n}\nutil.inherits(ForeverAgent, Agent)\n\nForeverAgent.defaultMinSockets = 5\n\n\nForeverAgent.prototype.createConnection = net.createConnection\nForeverAgent.prototype.addRequestNoreuse = Agent.prototype.addRequest\nForeverAgent.prototype.addRequest = function(req, host, port) {\n  var name = getConnectionName(host, port)\n  \n  if (typeof host !== 'string') {\n    var options = host\n    port = options.port\n    host = options.host\n  }\n\n  if (this.freeSockets[name] && this.freeSockets[name].length > 0 && !req.useChunkedEncodingByDefault) {\n    var idleSocket = this.freeSockets[name].pop()\n    idleSocket.removeListener('error', idleSocket._onIdleError)\n    delete idleSocket._onIdleError\n    req._reusedSocket = true\n    req.onSocket(idleSocket)\n  } else {\n    this.addRequestNoreuse(req, host, port)\n  }\n}\n\nForeverAgent.prototype.removeSocket = function(s, name, host, port) {\n  if (this.sockets[name]) {\n    var index = this.sockets[name].indexOf(s)\n    if (index !== -1) {\n      this.sockets[name].splice(index, 1)\n    }\n  } else if (this.sockets[name] && this.sockets[name].length === 0) {\n    // don't leak\n    delete this.sockets[name]\n    delete this.requests[name]\n  }\n  \n  if (this.freeSockets[name]) {\n    var index = this.freeSockets[name].indexOf(s)\n    if (index !== -1) {\n      this.freeSockets[name].splice(index, 1)\n      if (this.freeSockets[name].length === 0) {\n        delete this.freeSockets[name]\n      }\n    }\n  }\n\n  if (this.requests[name] && this.requests[name].length) {\n    // If we have pending requests and a socket gets closed a new one\n    // needs to be created to take over in the pool for the one that closed.\n    this.createSocket(name, host, port).emit('free')\n  }\n}\n\nfunction ForeverAgentSSL (options) {\n  ForeverAgent.call(this, options)\n}\nutil.inherits(ForeverAgentSSL, ForeverAgent)\n\nForeverAgentSSL.prototype.createConnection = createConnectionSSL\nForeverAgentSSL.prototype.addRequestNoreuse = AgentSSL.prototype.addRequest\n\nfunction createConnectionSSL (port, host, options) {\n  if (typeof port === 'object') {\n    options = port;\n  } else if (typeof host === 'object') {\n    options = host;\n  } else if (typeof options === 'object') {\n    options = options;\n  } else {\n    options = {};\n  }\n\n  if (typeof port === 'number') {\n    options.port = port;\n  }\n\n  if (typeof host === 'string') {\n    options.host = host;\n  }\n\n  return tls.connect(options);\n}\n", "var Stream = require('stream').Stream;\nvar util = require('util');\n\nmodule.exports = DelayedStream;\nfunction DelayedStream() {\n  this.source = null;\n  this.dataSize = 0;\n  this.maxDataSize = 1024 * 1024;\n  this.pauseStream = true;\n\n  this._maxDataSizeExceeded = false;\n  this._released = false;\n  this._bufferedEvents = [];\n}\nutil.inherits(DelayedStream, Stream);\n\nDelayedStream.create = function(source, options) {\n  var delayedStream = new this();\n\n  options = options || {};\n  for (var option in options) {\n    delayedStream[option] = options[option];\n  }\n\n  delayedStream.source = source;\n\n  var realEmit = source.emit;\n  source.emit = function() {\n    delayedStream._handleEmit(arguments);\n    return realEmit.apply(source, arguments);\n  };\n\n  source.on('error', function() {});\n  if (delayedStream.pauseStream) {\n    source.pause();\n  }\n\n  return delayedStream;\n};\n\nObject.defineProperty(DelayedStream.prototype, 'readable', {\n  configurable: true,\n  enumerable: true,\n  get: function() {\n    return this.source.readable;\n  }\n});\n\nDelayedStream.prototype.setEncoding = function() {\n  return this.source.setEncoding.apply(this.source, arguments);\n};\n\nDelayedStream.prototype.resume = function() {\n  if (!this._released) {\n    this.release();\n  }\n\n  this.source.resume();\n};\n\nDelayedStream.prototype.pause = function() {\n  this.source.pause();\n};\n\nDelayedStream.prototype.release = function() {\n  this._released = true;\n\n  this._bufferedEvents.forEach(function(args) {\n    this.emit.apply(this, args);\n  }.bind(this));\n  this._bufferedEvents = [];\n};\n\nDelayedStream.prototype.pipe = function() {\n  var r = Stream.prototype.pipe.apply(this, arguments);\n  this.resume();\n  return r;\n};\n\nDelayedStream.prototype._handleEmit = function(args) {\n  if (this._released) {\n    this.emit.apply(this, args);\n    return;\n  }\n\n  if (args[0] === 'data') {\n    this.dataSize += args[1].length;\n    this._checkIfMaxDataSizeExceeded();\n  }\n\n  this._bufferedEvents.push(args);\n};\n\nDelayedStream.prototype._checkIfMaxDataSizeExceeded = function() {\n  if (this._maxDataSizeExceeded) {\n    return;\n  }\n\n  if (this.dataSize <= this.maxDataSize) {\n    return;\n  }\n\n  this._maxDataSizeExceeded = true;\n  var message =\n    'DelayedStream#maxDataSize of ' + this.maxDataSize + ' bytes exceeded.'\n  this.emit('error', new Error(message));\n};\n", "var util = require('util');\nvar Stream = require('stream').Stream;\nvar DelayedStream = require('delayed-stream');\n\nmodule.exports = CombinedStream;\nfunction CombinedStream() {\n  this.writable = false;\n  this.readable = true;\n  this.dataSize = 0;\n  this.maxDataSize = 2 * 1024 * 1024;\n  this.pauseStreams = true;\n\n  this._released = false;\n  this._streams = [];\n  this._currentStream = null;\n  this._insideLoop = false;\n  this._pendingNext = false;\n}\nutil.inherits(CombinedStream, Stream);\n\nCombinedStream.create = function(options) {\n  var combinedStream = new this();\n\n  options = options || {};\n  for (var option in options) {\n    combinedStream[option] = options[option];\n  }\n\n  return combinedStream;\n};\n\nCombinedStream.isStreamLike = function(stream) {\n  return (typeof stream !== 'function')\n    && (typeof stream !== 'string')\n    && (typeof stream !== 'boolean')\n    && (typeof stream !== 'number')\n    && (!Buffer.isBuffer(stream));\n};\n\nCombinedStream.prototype.append = function(stream) {\n  var isStreamLike = CombinedStream.isStreamLike(stream);\n\n  if (isStreamLike) {\n    if (!(stream instanceof DelayedStream)) {\n      var newStream = DelayedStream.create(stream, {\n        maxDataSize: Infinity,\n        pauseStream: this.pauseStreams,\n      });\n      stream.on('data', this._checkDataSize.bind(this));\n      stream = newStream;\n    }\n\n    this._handleErrors(stream);\n\n    if (this.pauseStreams) {\n      stream.pause();\n    }\n  }\n\n  this._streams.push(stream);\n  return this;\n};\n\nCombinedStream.prototype.pipe = function(dest, options) {\n  Stream.prototype.pipe.call(this, dest, options);\n  this.resume();\n  return dest;\n};\n\nCombinedStream.prototype._getNext = function() {\n  this._currentStream = null;\n\n  if (this._insideLoop) {\n    this._pendingNext = true;\n    return; // defer call\n  }\n\n  this._insideLoop = true;\n  try {\n    do {\n      this._pendingNext = false;\n      this._realGetNext();\n    } while (this._pendingNext);\n  } finally {\n    this._insideLoop = false;\n  }\n};\n\nCombinedStream.prototype._realGetNext = function() {\n  var stream = this._streams.shift();\n\n\n  if (typeof stream == 'undefined') {\n    this.end();\n    return;\n  }\n\n  if (typeof stream !== 'function') {\n    this._pipeNext(stream);\n    return;\n  }\n\n  var getStream = stream;\n  getStream(function(stream) {\n    var isStreamLike = CombinedStream.isStreamLike(stream);\n    if (isStreamLike) {\n      stream.on('data', this._checkDataSize.bind(this));\n      this._handleErrors(stream);\n    }\n\n    this._pipeNext(stream);\n  }.bind(this));\n};\n\nCombinedStream.prototype._pipeNext = function(stream) {\n  this._currentStream = stream;\n\n  var isStreamLike = CombinedStream.isStreamLike(stream);\n  if (isStreamLike) {\n    stream.on('end', this._getNext.bind(this));\n    stream.pipe(this, {end: false});\n    return;\n  }\n\n  var value = stream;\n  this.write(value);\n  this._getNext();\n};\n\nCombinedStream.prototype._handleErrors = function(stream) {\n  var self = this;\n  stream.on('error', function(err) {\n    self._emitError(err);\n  });\n};\n\nCombinedStream.prototype.write = function(data) {\n  this.emit('data', data);\n};\n\nCombinedStream.prototype.pause = function() {\n  if (!this.pauseStreams) {\n    return;\n  }\n\n  if(this.pauseStreams && this._currentStream && typeof(this._currentStream.pause) == 'function') this._currentStream.pause();\n  this.emit('pause');\n};\n\nCombinedStream.prototype.resume = function() {\n  if (!this._released) {\n    this._released = true;\n    this.writable = true;\n    this._getNext();\n  }\n\n  if(this.pauseStreams && this._currentStream && typeof(this._currentStream.resume) == 'function') this._currentStream.resume();\n  this.emit('resume');\n};\n\nCombinedStream.prototype.end = function() {\n  this._reset();\n  this.emit('end');\n};\n\nCombinedStream.prototype.destroy = function() {\n  this._reset();\n  this.emit('close');\n};\n\nCombinedStream.prototype._reset = function() {\n  this.writable = false;\n  this._streams = [];\n  this._currentStream = null;\n};\n\nCombinedStream.prototype._checkDataSize = function() {\n  this._updateDataSize();\n  if (this.dataSize <= this.maxDataSize) {\n    return;\n  }\n\n  var message =\n    'DelayedStream#maxDataSize of ' + this.maxDataSize + ' bytes exceeded.';\n  this._emitError(new Error(message));\n};\n\nCombinedStream.prototype._updateDataSize = function() {\n  this.dataSize = 0;\n\n  var self = this;\n  this._streams.forEach(function(stream) {\n    if (!stream.dataSize) {\n      return;\n    }\n\n    self.dataSize += stream.dataSize;\n  });\n\n  if (this._currentStream && this._currentStream.dataSize) {\n    this.dataSize += this._currentStream.dataSize;\n  }\n};\n\nCombinedStream.prototype._emitError = function(err) {\n  this._reset();\n  this.emit('error', err);\n};\n", "module.exports = defer;\n\n/**\n * Runs provided function on next iteration of the event loop\n *\n * @param {function} fn - function to run\n */\nfunction defer(fn)\n{\n  var nextTick = typeof setImmediate == 'function'\n    ? setImmediate\n    : (\n      typeof process == 'object' && typeof process.nextTick == 'function'\n      ? process.nextTick\n      : null\n    );\n\n  if (nextTick)\n  {\n    nextTick(fn);\n  }\n  else\n  {\n    setTimeout(fn, 0);\n  }\n}\n", "var defer = require('./defer.js');\n\n// API\nmodule.exports = async;\n\n/**\n * Runs provided callback asynchronously\n * even if callback itself is not\n *\n * @param   {function} callback - callback to invoke\n * @returns {function} - augmented callback\n */\nfunction async(callback)\n{\n  var isAsync = false;\n\n  // check if async happened\n  defer(function() { isAsync = true; });\n\n  return function async_callback(err, result)\n  {\n    if (isAsync)\n    {\n      callback(err, result);\n    }\n    else\n    {\n      defer(function nextTick_callback()\n      {\n        callback(err, result);\n      });\n    }\n  };\n}\n", "// API\nmodule.exports = abort;\n\n/**\n * Aborts leftover active jobs\n *\n * @param {object} state - current state object\n */\nfunction abort(state)\n{\n  Object.keys(state.jobs).forEach(clean.bind(state));\n\n  // reset leftover jobs\n  state.jobs = {};\n}\n\n/**\n * Cleans up leftover job by invoking abort function for the provided job id\n *\n * @this  state\n * @param {string|number} key - job id to abort\n */\nfunction clean(key)\n{\n  if (typeof this.jobs[key] == 'function')\n  {\n    this.jobs[key]();\n  }\n}\n", "var async = require('./async.js')\n  , abort = require('./abort.js')\n  ;\n\n// API\nmodule.exports = iterate;\n\n/**\n * Iterates over each job object\n *\n * @param {array|object} list - array or object (named list) to iterate over\n * @param {function} iterator - iterator to run\n * @param {object} state - current job status\n * @param {function} callback - invoked when all elements processed\n */\nfunction iterate(list, iterator, state, callback)\n{\n  // store current index\n  var key = state['keyedList'] ? state['keyedList'][state.index] : state.index;\n\n  state.jobs[key] = runJob(iterator, key, list[key], function(error, output)\n  {\n    // don't repeat yourself\n    // skip secondary callbacks\n    if (!(key in state.jobs))\n    {\n      return;\n    }\n\n    // clean up jobs\n    delete state.jobs[key];\n\n    if (error)\n    {\n      // don't process rest of the results\n      // stop still active jobs\n      // and reset the list\n      abort(state);\n    }\n    else\n    {\n      state.results[key] = output;\n    }\n\n    // return salvaged results\n    callback(error, state.results);\n  });\n}\n\n/**\n * Runs iterator over provided job element\n *\n * @param   {function} iterator - iterator to invoke\n * @param   {string|number} key - key/index of the element in the list of jobs\n * @param   {mixed} item - job description\n * @param   {function} callback - invoked after iterator is done with the job\n * @returns {function|mixed} - job abort function or something else\n */\nfunction runJob(iterator, key, item, callback)\n{\n  var aborter;\n\n  // allow shortcut if iterator expects only two arguments\n  if (iterator.length == 2)\n  {\n    aborter = iterator(item, async(callback));\n  }\n  // otherwise go with full three arguments\n  else\n  {\n    aborter = iterator(item, key, async(callback));\n  }\n\n  return aborter;\n}\n", "// API\nmodule.exports = state;\n\n/**\n * Creates initial state object\n * for iteration over list\n *\n * @param   {array|object} list - list to iterate over\n * @param   {function|null} sortMethod - function to use for keys sort,\n *                                     or `null` to keep them as is\n * @returns {object} - initial state object\n */\nfunction state(list, sortMethod)\n{\n  var isNamedList = !Array.isArray(list)\n    , initState =\n    {\n      index    : 0,\n      keyedList: isNamedList || sortMethod ? Object.keys(list) : null,\n      jobs     : {},\n      results  : isNamedList ? {} : [],\n      size     : isNamedList ? Object.keys(list).length : list.length\n    }\n    ;\n\n  if (sortMethod)\n  {\n    // sort array keys based on it's values\n    // sort object's keys just on own merit\n    initState.keyedList.sort(isNamedList ? sortMethod : function(a, b)\n    {\n      return sortMethod(list[a], list[b]);\n    });\n  }\n\n  return initState;\n}\n", "var abort = require('./abort.js')\n  , async = require('./async.js')\n  ;\n\n// API\nmodule.exports = terminator;\n\n/**\n * Terminates jobs in the attached state context\n *\n * @this  AsyncKitState#\n * @param {function} callback - final callback to invoke after termination\n */\nfunction terminator(callback)\n{\n  if (!Object.keys(this.jobs).length)\n  {\n    return;\n  }\n\n  // fast forward iteration index\n  this.index = this.size;\n\n  // abort jobs\n  abort(this);\n\n  // send back results we have so far\n  async(callback)(null, this.results);\n}\n", "var iterate    = require('./lib/iterate.js')\n  , initState  = require('./lib/state.js')\n  , terminator = require('./lib/terminator.js')\n  ;\n\n// Public API\nmodule.exports = parallel;\n\n/**\n * Runs iterator over provided array elements in parallel\n *\n * @param   {array|object} list - array or object (named list) to iterate over\n * @param   {function} iterator - iterator to run\n * @param   {function} callback - invoked when all elements processed\n * @returns {function} - jobs terminator\n */\nfunction parallel(list, iterator, callback)\n{\n  var state = initState(list);\n\n  while (state.index < (state['keyedList'] || list).length)\n  {\n    iterate(list, iterator, state, function(error, result)\n    {\n      if (error)\n      {\n        callback(error, result);\n        return;\n      }\n\n      // looks like it's the last one\n      if (Object.keys(state.jobs).length === 0)\n      {\n        callback(null, state.results);\n        return;\n      }\n    });\n\n    state.index++;\n  }\n\n  return terminator.bind(state, callback);\n}\n", "var iterate    = require('./lib/iterate.js')\n  , initState  = require('./lib/state.js')\n  , terminator = require('./lib/terminator.js')\n  ;\n\n// Public API\nmodule.exports = serialOrdered;\n// sorting helpers\nmodule.exports.ascending  = ascending;\nmodule.exports.descending = descending;\n\n/**\n * Runs iterator over provided sorted array elements in series\n *\n * @param   {array|object} list - array or object (named list) to iterate over\n * @param   {function} iterator - iterator to run\n * @param   {function} sortMethod - custom sort function\n * @param   {function} callback - invoked when all elements processed\n * @returns {function} - jobs terminator\n */\nfunction serialOrdered(list, iterator, sortMethod, callback)\n{\n  var state = initState(list, sortMethod);\n\n  iterate(list, iterator, state, function iteratorHandler(error, result)\n  {\n    if (error)\n    {\n      callback(error, result);\n      return;\n    }\n\n    state.index++;\n\n    // are we there yet?\n    if (state.index < (state['keyedList'] || list).length)\n    {\n      iterate(list, iterator, state, iteratorHandler);\n      return;\n    }\n\n    // done here\n    callback(null, state.results);\n  });\n\n  return terminator.bind(state, callback);\n}\n\n/*\n * -- Sort methods\n */\n\n/**\n * sort helper to sort array elements in ascending order\n *\n * @param   {mixed} a - an item to compare\n * @param   {mixed} b - an item to compare\n * @returns {number} - comparison result\n */\nfunction ascending(a, b)\n{\n  return a < b ? -1 : a > b ? 1 : 0;\n}\n\n/**\n * sort helper to sort array elements in descending order\n *\n * @param   {mixed} a - an item to compare\n * @param   {mixed} b - an item to compare\n * @returns {number} - comparison result\n */\nfunction descending(a, b)\n{\n  return -1 * ascending(a, b);\n}\n", "var serialOrdered = require('./serialOrdered.js');\n\n// Public API\nmodule.exports = serial;\n\n/**\n * Runs iterator over provided array elements in series\n *\n * @param   {array|object} list - array or object (named list) to iterate over\n * @param   {function} iterator - iterator to run\n * @param   {function} callback - invoked when all elements processed\n * @returns {function} - jobs terminator\n */\nfunction serial(list, iterator, callback)\n{\n  return serialOrdered(list, iterator, null, callback);\n}\n", "module.exports =\n{\n  parallel      : require('./parallel.js'),\n  serial        : require('./serial.js'),\n  serialOrdered : require('./serialOrdered.js')\n};\n", "// populates missing values\nmodule.exports = function(dst, src) {\n\n  Object.keys(src).forEach(function(prop)\n  {\n    dst[prop] = dst[prop] || src[prop];\n  });\n\n  return dst;\n};\n", "var CombinedStream = require('combined-stream');\nvar util = require('util');\nvar path = require('path');\nvar http = require('http');\nvar https = require('https');\nvar parseUrl = require('url').parse;\nvar fs = require('fs');\nvar mime = require('mime-types');\nvar asynckit = require('asynckit');\nvar populate = require('./populate.js');\n\n// Public API\nmodule.exports = FormData;\n\n// make it a Stream\nutil.inherits(FormData, CombinedStream);\n\n/**\n * Create readable \"multipart/form-data\" streams.\n * Can be used to submit forms\n * and file uploads to other web applications.\n *\n * @constructor\n * @param {Object} options - Properties to be added/overriden for FormData and CombinedStream\n */\nfunction FormData(options) {\n  if (!(this instanceof FormData)) {\n    return new FormData();\n  }\n\n  this._overheadLength = 0;\n  this._valueLength = 0;\n  this._valuesToMeasure = [];\n\n  CombinedStream.call(this);\n\n  options = options || {};\n  for (var option in options) {\n    this[option] = options[option];\n  }\n}\n\nFormData.LINE_BREAK = '\\r\\n';\nFormData.DEFAULT_CONTENT_TYPE = 'application/octet-stream';\n\nFormData.prototype.append = function(field, value, options) {\n\n  options = options || {};\n\n  // allow filename as single option\n  if (typeof options == 'string') {\n    options = {filename: options};\n  }\n\n  var append = CombinedStream.prototype.append.bind(this);\n\n  // all that streamy business can't handle numbers\n  if (typeof value == 'number') {\n    value = '' + value;\n  }\n\n  // https://github.com/felixge/node-form-data/issues/38\n  if (util.isArray(value)) {\n    // Please convert your array into string\n    // the way web server expects it\n    this._error(new Error('Arrays are not supported.'));\n    return;\n  }\n\n  var header = this._multiPartHeader(field, value, options);\n  var footer = this._multiPartFooter();\n\n  append(header);\n  append(value);\n  append(footer);\n\n  // pass along options.knownLength\n  this._trackLength(header, value, options);\n};\n\nFormData.prototype._trackLength = function(header, value, options) {\n  var valueLength = 0;\n\n  // used w/ getLengthSync(), when length is known.\n  // e.g. for streaming directly from a remote server,\n  // w/ a known file a size, and not wanting to wait for\n  // incoming file to finish to get its size.\n  if (options.knownLength != null) {\n    valueLength += +options.knownLength;\n  } else if (Buffer.isBuffer(value)) {\n    valueLength = value.length;\n  } else if (typeof value === 'string') {\n    valueLength = Buffer.byteLength(value);\n  }\n\n  this._valueLength += valueLength;\n\n  // @check why add CRLF? does this account for custom/multiple CRLFs?\n  this._overheadLength +=\n    Buffer.byteLength(header) +\n    FormData.LINE_BREAK.length;\n\n  // empty or either doesn't have path or not an http response\n  if (!value || ( !value.path && !(value.readable && value.hasOwnProperty('httpVersion')) )) {\n    return;\n  }\n\n  // no need to bother with the length\n  if (!options.knownLength) {\n    this._valuesToMeasure.push(value);\n  }\n};\n\nFormData.prototype._lengthRetriever = function(value, callback) {\n\n  if (value.hasOwnProperty('fd')) {\n\n    // take read range into a account\n    // `end` = Infinity \u2013> read file till the end\n    //\n    // TODO: Looks like there is bug in Node fs.createReadStream\n    // it doesn't respect `end` options without `start` options\n    // Fix it when node fixes it.\n    // https://github.com/joyent/node/issues/7819\n    if (value.end != undefined && value.end != Infinity && value.start != undefined) {\n\n      // when end specified\n      // no need to calculate range\n      // inclusive, starts with 0\n      callback(null, value.end + 1 - (value.start ? value.start : 0));\n\n    // not that fast snoopy\n    } else {\n      // still need to fetch file size from fs\n      fs.stat(value.path, function(err, stat) {\n\n        var fileSize;\n\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        // update final size based on the range options\n        fileSize = stat.size - (value.start ? value.start : 0);\n        callback(null, fileSize);\n      });\n    }\n\n  // or http response\n  } else if (value.hasOwnProperty('httpVersion')) {\n    callback(null, +value.headers['content-length']);\n\n  // or request stream http://github.com/mikeal/request\n  } else if (value.hasOwnProperty('httpModule')) {\n    // wait till response come back\n    value.on('response', function(response) {\n      value.pause();\n      callback(null, +response.headers['content-length']);\n    });\n    value.resume();\n\n  // something else\n  } else {\n    callback('Unknown stream');\n  }\n};\n\nFormData.prototype._multiPartHeader = function(field, value, options) {\n  // custom header specified (as string)?\n  // it becomes responsible for boundary\n  // (e.g. to handle extra CRLFs on .NET servers)\n  if (typeof options.header == 'string') {\n    return options.header;\n  }\n\n  var contentDisposition = this._getContentDisposition(value, options);\n  var contentType = this._getContentType(value, options);\n\n  var contents = '';\n  var headers  = {\n    // add custom disposition as third element or keep it two elements if not\n    'Content-Disposition': ['form-data', 'name=\"' + field + '\"'].concat(contentDisposition || []),\n    // if no content type. allow it to be empty array\n    'Content-Type': [].concat(contentType || [])\n  };\n\n  // allow custom headers.\n  if (typeof options.header == 'object') {\n    populate(headers, options.header);\n  }\n\n  var header;\n  for (var prop in headers) {\n    if (!headers.hasOwnProperty(prop)) continue;\n    header = headers[prop];\n\n    // skip nullish headers.\n    if (header == null) {\n      continue;\n    }\n\n    // convert all headers to arrays.\n    if (!Array.isArray(header)) {\n      header = [header];\n    }\n\n    // add non-empty headers.\n    if (header.length) {\n      contents += prop + ': ' + header.join('; ') + FormData.LINE_BREAK;\n    }\n  }\n\n  return '--' + this.getBoundary() + FormData.LINE_BREAK + contents + FormData.LINE_BREAK;\n};\n\nFormData.prototype._getContentDisposition = function(value, options) {\n\n  var filename\n    , contentDisposition\n    ;\n\n  if (typeof options.filepath === 'string') {\n    // custom filepath for relative paths\n    filename = path.normalize(options.filepath).replace(/\\\\/g, '/');\n  } else if (options.filename || value.name || value.path) {\n    // custom filename take precedence\n    // formidable and the browser add a name property\n    // fs- and request- streams have path property\n    filename = path.basename(options.filename || value.name || value.path);\n  } else if (value.readable && value.hasOwnProperty('httpVersion')) {\n    // or try http response\n    filename = path.basename(value.client._httpMessage.path);\n  }\n\n  if (filename) {\n    contentDisposition = 'filename=\"' + filename + '\"';\n  }\n\n  return contentDisposition;\n};\n\nFormData.prototype._getContentType = function(value, options) {\n\n  // use custom content-type above all\n  var contentType = options.contentType;\n\n  // or try `name` from formidable, browser\n  if (!contentType && value.name) {\n    contentType = mime.lookup(value.name);\n  }\n\n  // or try `path` from fs-, request- streams\n  if (!contentType && value.path) {\n    contentType = mime.lookup(value.path);\n  }\n\n  // or if it's http-reponse\n  if (!contentType && value.readable && value.hasOwnProperty('httpVersion')) {\n    contentType = value.headers['content-type'];\n  }\n\n  // or guess it from the filepath or filename\n  if (!contentType && (options.filepath || options.filename)) {\n    contentType = mime.lookup(options.filepath || options.filename);\n  }\n\n  // fallback to the default content type if `value` is not simple value\n  if (!contentType && typeof value == 'object') {\n    contentType = FormData.DEFAULT_CONTENT_TYPE;\n  }\n\n  return contentType;\n};\n\nFormData.prototype._multiPartFooter = function() {\n  return function(next) {\n    var footer = FormData.LINE_BREAK;\n\n    var lastPart = (this._streams.length === 0);\n    if (lastPart) {\n      footer += this._lastBoundary();\n    }\n\n    next(footer);\n  }.bind(this);\n};\n\nFormData.prototype._lastBoundary = function() {\n  return '--' + this.getBoundary() + '--' + FormData.LINE_BREAK;\n};\n\nFormData.prototype.getHeaders = function(userHeaders) {\n  var header;\n  var formHeaders = {\n    'content-type': 'multipart/form-data; boundary=' + this.getBoundary()\n  };\n\n  for (header in userHeaders) {\n    if (userHeaders.hasOwnProperty(header)) {\n      formHeaders[header.toLowerCase()] = userHeaders[header];\n    }\n  }\n\n  return formHeaders;\n};\n\nFormData.prototype.getBoundary = function() {\n  if (!this._boundary) {\n    this._generateBoundary();\n  }\n\n  return this._boundary;\n};\n\nFormData.prototype._generateBoundary = function() {\n  // This generates a 50 character boundary similar to those used by Firefox.\n  // They are optimized for boyer-moore parsing.\n  var boundary = '--------------------------';\n  for (var i = 0; i < 24; i++) {\n    boundary += Math.floor(Math.random() * 10).toString(16);\n  }\n\n  this._boundary = boundary;\n};\n\n// Note: getLengthSync DOESN'T calculate streams length\n// As workaround one can calculate file size manually\n// and add it as knownLength option\nFormData.prototype.getLengthSync = function() {\n  var knownLength = this._overheadLength + this._valueLength;\n\n  // Don't get confused, there are 3 \"internal\" streams for each keyval pair\n  // so it basically checks if there is any value added to the form\n  if (this._streams.length) {\n    knownLength += this._lastBoundary().length;\n  }\n\n  // https://github.com/form-data/form-data/issues/40\n  if (!this.hasKnownLength()) {\n    // Some async length retrievers are present\n    // therefore synchronous length calculation is false.\n    // Please use getLength(callback) to get proper length\n    this._error(new Error('Cannot calculate proper length in synchronous way.'));\n  }\n\n  return knownLength;\n};\n\n// Public API to check if length of added values is known\n// https://github.com/form-data/form-data/issues/196\n// https://github.com/form-data/form-data/issues/262\nFormData.prototype.hasKnownLength = function() {\n  var hasKnownLength = true;\n\n  if (this._valuesToMeasure.length) {\n    hasKnownLength = false;\n  }\n\n  return hasKnownLength;\n};\n\nFormData.prototype.getLength = function(cb) {\n  var knownLength = this._overheadLength + this._valueLength;\n\n  if (this._streams.length) {\n    knownLength += this._lastBoundary().length;\n  }\n\n  if (!this._valuesToMeasure.length) {\n    process.nextTick(cb.bind(this, null, knownLength));\n    return;\n  }\n\n  asynckit.parallel(this._valuesToMeasure, this._lengthRetriever, function(err, values) {\n    if (err) {\n      cb(err);\n      return;\n    }\n\n    values.forEach(function(length) {\n      knownLength += length;\n    });\n\n    cb(null, knownLength);\n  });\n};\n\nFormData.prototype.submit = function(params, cb) {\n  var request\n    , options\n    , defaults = {method: 'post'}\n    ;\n\n  // parse provided url if it's string\n  // or treat it as options object\n  if (typeof params == 'string') {\n\n    params = parseUrl(params);\n    options = populate({\n      port: params.port,\n      path: params.pathname,\n      host: params.hostname,\n      protocol: params.protocol\n    }, defaults);\n\n  // use custom params\n  } else {\n\n    options = populate(params, defaults);\n    // if no port provided use default one\n    if (!options.port) {\n      options.port = options.protocol == 'https:' ? 443 : 80;\n    }\n  }\n\n  // put that good code in getHeaders to some use\n  options.headers = this.getHeaders(params.headers);\n\n  // https if specified, fallback to http in any other case\n  if (options.protocol == 'https:') {\n    request = https.request(options);\n  } else {\n    request = http.request(options);\n  }\n\n  // get content length and fire away\n  this.getLength(function(err, length) {\n    if (err) {\n      this._error(err);\n      return;\n    }\n\n    // add content length\n    request.setHeader('Content-Length', length);\n\n    this.pipe(request);\n    if (cb) {\n      request.on('error', cb);\n      request.on('response', cb.bind(this, null));\n    }\n  }.bind(this));\n\n  return request;\n};\n\nFormData.prototype._error = function(err) {\n  if (!this.error) {\n    this.error = err;\n    this.pause();\n    this.emit('error', err);\n  }\n};\n\nFormData.prototype.toString = function () {\n  return '[object FormData]';\n};\n", "var stream = require('stream')\n\n\nfunction isStream (obj) {\n  return obj instanceof stream.Stream\n}\n\n\nfunction isReadable (obj) {\n  return isStream(obj) && typeof obj._read == 'function' && typeof obj._readableState == 'object'\n}\n\n\nfunction isWritable (obj) {\n  return isStream(obj) && typeof obj._write == 'function' && typeof obj._writableState == 'object'\n}\n\n\nfunction isDuplex (obj) {\n  return isReadable(obj) && isWritable(obj)\n}\n\n\nmodule.exports            = isStream\nmodule.exports.isReadable = isReadable\nmodule.exports.isWritable = isWritable\nmodule.exports.isDuplex   = isDuplex\n", "module.exports      = isTypedArray\nisTypedArray.strict = isStrictTypedArray\nisTypedArray.loose  = isLooseTypedArray\n\nvar toString = Object.prototype.toString\nvar names = {\n    '[object Int8Array]': true\n  , '[object Int16Array]': true\n  , '[object Int32Array]': true\n  , '[object Uint8Array]': true\n  , '[object Uint8ClampedArray]': true\n  , '[object Uint16Array]': true\n  , '[object Uint32Array]': true\n  , '[object Float32Array]': true\n  , '[object Float64Array]': true\n}\n\nfunction isTypedArray(arr) {\n  return (\n       isStrictTypedArray(arr)\n    || isLooseTypedArray(arr)\n  )\n}\n\nfunction isStrictTypedArray(arr) {\n  return (\n       arr instanceof Int8Array\n    || arr instanceof Int16Array\n    || arr instanceof Int32Array\n    || arr instanceof Uint8Array\n    || arr instanceof Uint8ClampedArray\n    || arr instanceof Uint16Array\n    || arr instanceof Uint32Array\n    || arr instanceof Float32Array\n    || arr instanceof Float64Array\n  )\n}\n\nfunction isLooseTypedArray(arr) {\n  return names[toString.call(arr)]\n}\n", "'use strict'\n\nfunction formatHostname (hostname) {\n  // canonicalize the hostname, so that 'oogle.com' won't match 'google.com'\n  return hostname.replace(/^\\.*/, '.').toLowerCase()\n}\n\nfunction parseNoProxyZone (zone) {\n  zone = zone.trim().toLowerCase()\n\n  var zoneParts = zone.split(':', 2)\n  var zoneHost = formatHostname(zoneParts[0])\n  var zonePort = zoneParts[1]\n  var hasPort = zone.indexOf(':') > -1\n\n  return {hostname: zoneHost, port: zonePort, hasPort: hasPort}\n}\n\nfunction uriInNoProxy (uri, noProxy) {\n  var port = uri.port || (uri.protocol === 'https:' ? '443' : '80')\n  var hostname = formatHostname(uri.hostname)\n  var noProxyList = noProxy.split(',')\n\n  // iterate through the noProxyList until it finds a match.\n  return noProxyList.map(parseNoProxyZone).some(function (noProxyZone) {\n    var isMatchedAt = hostname.indexOf(noProxyZone.hostname)\n    var hostnameMatched = (\n      isMatchedAt > -1 &&\n        (isMatchedAt === hostname.length - noProxyZone.hostname.length)\n    )\n\n    if (noProxyZone.hasPort) {\n      return (port === noProxyZone.port) && hostnameMatched\n    }\n\n    return hostnameMatched\n  })\n}\n\nfunction getProxyFromURI (uri) {\n  // Decide the proper request proxy to use based on the request URI object and the\n  // environmental variables (NO_PROXY, HTTP_PROXY, etc.)\n  // respect NO_PROXY environment variables (see: https://lynx.invisible-island.net/lynx2.8.7/breakout/lynx_help/keystrokes/environments.html)\n\n  var noProxy = process.env.NO_PROXY || process.env.no_proxy || ''\n\n  // if the noProxy is a wildcard then return null\n\n  if (noProxy === '*') {\n    return null\n  }\n\n  // if the noProxy is not empty and the uri is found return null\n\n  if (noProxy !== '' && uriInNoProxy(uri, noProxy)) {\n    return null\n  }\n\n  // Check for HTTP or HTTPS Proxy in environment Else default to null\n\n  if (uri.protocol === 'http:') {\n    return process.env.HTTP_PROXY ||\n      process.env.http_proxy || null\n  }\n\n  if (uri.protocol === 'https:') {\n    return process.env.HTTPS_PROXY ||\n      process.env.https_proxy ||\n      process.env.HTTP_PROXY ||\n      process.env.http_proxy || null\n  }\n\n  // if none of that works, return null\n  // (What uri protocol are you using then?)\n\n  return null\n}\n\nmodule.exports = getProxyFromURI\n", "'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    var obj;\n\n    while (queue.length) {\n        var item = queue.pop();\n        obj = item.obj[item.prop];\n\n        if (Array.isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n\n    return obj;\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (Array.isArray(target)) {\n            target.push(source);\n        } else if (typeof target === 'object') {\n            if (options.plainObjects || options.allowPrototypes || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (Array.isArray(target) && !Array.isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (Array.isArray(target) && Array.isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                if (target[i] && typeof target[i] === 'object') {\n                    target[i] = merge(target[i], item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str) {\n    try {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    } catch (e) {\n        return str;\n    }\n};\n\nvar encode = function encode(str) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = typeof str === 'string' ? str : String(str);\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    return compactQueue(queue);\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (obj === null || typeof obj === 'undefined') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    merge: merge\n};\n", "'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nmodule.exports = {\n    'default': 'RFC3986',\n    formatters: {\n        RFC1738: function (value) {\n            return replace.call(value, percentTwenties, '+');\n        },\n        RFC3986: function (value) {\n            return value;\n        }\n    },\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n", "'use strict';\n\nvar utils = require('./utils');\nvar formats = require('./formats');\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) { // eslint-disable-line func-name-matching\n        return prefix + '[]';\n    },\n    indices: function indices(prefix, key) { // eslint-disable-line func-name-matching\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) { // eslint-disable-line func-name-matching\n        return prefix;\n    }\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaults = {\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    serializeDate: function serializeDate(date) { // eslint-disable-line func-name-matching\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar stringify = function stringify( // eslint-disable-line func-name-matching\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    formatter,\n    encodeValuesOnly\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean' || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder);\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (Array.isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        if (Array.isArray(obj)) {\n            values = values.concat(stringify(\n                obj[key],\n                generateArrayPrefix(prefix, key),\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly\n            ));\n        } else {\n            values = values.concat(stringify(\n                obj[key],\n                prefix + (allowDots ? '.' + key : '[' + key + ']'),\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly\n            ));\n        }\n    }\n\n    return values;\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = opts ? utils.assign({}, opts) : {};\n\n    if (options.encoder !== null && options.encoder !== undefined && typeof options.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var delimiter = typeof options.delimiter === 'undefined' ? defaults.delimiter : options.delimiter;\n    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : defaults.strictNullHandling;\n    var skipNulls = typeof options.skipNulls === 'boolean' ? options.skipNulls : defaults.skipNulls;\n    var encode = typeof options.encode === 'boolean' ? options.encode : defaults.encode;\n    var encoder = typeof options.encoder === 'function' ? options.encoder : defaults.encoder;\n    var sort = typeof options.sort === 'function' ? options.sort : null;\n    var allowDots = typeof options.allowDots === 'undefined' ? false : options.allowDots;\n    var serializeDate = typeof options.serializeDate === 'function' ? options.serializeDate : defaults.serializeDate;\n    var encodeValuesOnly = typeof options.encodeValuesOnly === 'boolean' ? options.encodeValuesOnly : defaults.encodeValuesOnly;\n    if (typeof options.format === 'undefined') {\n        options.format = formats['default'];\n    } else if (!Object.prototype.hasOwnProperty.call(formats.formatters, options.format)) {\n        throw new TypeError('Unknown format option provided.');\n    }\n    var formatter = formats.formatters[options.format];\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (Array.isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (options.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = options.arrayFormat;\n    } else if ('indices' in options) {\n        arrayFormat = options.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (sort) {\n        objKeys.sort(sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        keys = keys.concat(stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            strictNullHandling,\n            skipNulls,\n            encode ? encoder : null,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            formatter,\n            encodeValuesOnly\n        ));\n    }\n\n    var joined = keys.join(delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n", "'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    arrayLimit: 20,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    parameterLimit: 1000,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n\n    for (var i = 0; i < parts.length; ++i) {\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder);\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder);\n            val = options.decoder(part.slice(pos + 1), defaults.decoder);\n        }\n        if (has.call(obj, key)) {\n            obj[key] = [].concat(obj[key]).concat(val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options) {\n    var leaf = val;\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]') {\n            obj = [];\n            obj = obj.concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj;\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys\n        // that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while ((segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options);\n};\n\nmodule.exports = function (str, opts) {\n    var options = opts ? utils.assign({}, opts) : {};\n\n    if (options.decoder !== null && options.decoder !== undefined && typeof options.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    options.ignoreQueryPrefix = options.ignoreQueryPrefix === true;\n    options.delimiter = typeof options.delimiter === 'string' || utils.isRegExp(options.delimiter) ? options.delimiter : defaults.delimiter;\n    options.depth = typeof options.depth === 'number' ? options.depth : defaults.depth;\n    options.arrayLimit = typeof options.arrayLimit === 'number' ? options.arrayLimit : defaults.arrayLimit;\n    options.parseArrays = options.parseArrays !== false;\n    options.decoder = typeof options.decoder === 'function' ? options.decoder : defaults.decoder;\n    options.allowDots = typeof options.allowDots === 'boolean' ? options.allowDots : defaults.allowDots;\n    options.plainObjects = typeof options.plainObjects === 'boolean' ? options.plainObjects : defaults.plainObjects;\n    options.allowPrototypes = typeof options.allowPrototypes === 'boolean' ? options.allowPrototypes : defaults.allowPrototypes;\n    options.parameterLimit = typeof options.parameterLimit === 'number' ? options.parameterLimit : defaults.parameterLimit;\n    options.strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : defaults.strictNullHandling;\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options);\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    return utils.compact(obj);\n};\n", "'use strict';\n\nvar stringify = require('./stringify');\nvar parse = require('./parse');\nvar formats = require('./formats');\n\nmodule.exports = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n", "'use strict'\n\nvar qs = require('qs')\nvar querystring = require('querystring')\n\nfunction Querystring (request) {\n  this.request = request\n  this.lib = null\n  this.useQuerystring = null\n  this.parseOptions = null\n  this.stringifyOptions = null\n}\n\nQuerystring.prototype.init = function (options) {\n  if (this.lib) { return }\n\n  this.useQuerystring = options.useQuerystring\n  this.lib = (this.useQuerystring ? querystring : qs)\n\n  this.parseOptions = options.qsParseOptions || {}\n  this.stringifyOptions = options.qsStringifyOptions || {}\n}\n\nQuerystring.prototype.stringify = function (obj) {\n  return (this.useQuerystring)\n    ? this.rfc3986(this.lib.stringify(obj,\n      this.stringifyOptions.sep || null,\n      this.stringifyOptions.eq || null,\n      this.stringifyOptions))\n    : this.lib.stringify(obj, this.stringifyOptions)\n}\n\nQuerystring.prototype.parse = function (str) {\n  return (this.useQuerystring)\n    ? this.lib.parse(str,\n      this.parseOptions.sep || null,\n      this.parseOptions.eq || null,\n      this.parseOptions)\n    : this.lib.parse(str, this.parseOptions)\n}\n\nQuerystring.prototype.rfc3986 = function (str) {\n  return str.replace(/[!'()*]/g, function (c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase()\n  })\n}\n\nQuerystring.prototype.unescape = querystring.unescape\n\nexports.Querystring = Querystring\n", "import { SCHEMES } from \"./uri\";\n\nimport http from \"./schemes/http\";\nSCHEMES[http.scheme] = http;\n\nimport https from \"./schemes/https\";\nSCHEMES[https.scheme] = https;\n\nimport ws from \"./schemes/ws\";\nSCHEMES[ws.scheme] = ws;\n\nimport wss from \"./schemes/wss\";\nSCHEMES[wss.scheme] = wss;\n\nimport mailto from \"./schemes/mailto\";\nSCHEMES[mailto.scheme] = mailto;\n\nimport urn from \"./schemes/urn\";\nSCHEMES[urn.scheme] = urn;\n\nimport uuid from \"./schemes/urn-uuid\";\nSCHEMES[uuid.scheme] = uuid;\n\nexport * from \"./uri\";\n", "import { URISchemeHandler, URIComponents, URIOptions } from \"../uri\";\nimport { URNComponents } from \"./urn\";\nimport { SCHEMES } from \"../uri\";\n\nexport interface UUIDComponents extends URNComponents {\n\tuuid?: string;\n}\n\nconst UUID = /^[0-9A-Fa-f]{8}(?:\\-[0-9A-Fa-f]{4}){3}\\-[0-9A-Fa-f]{12}$/;\nconst UUID_PARSE = /^[0-9A-Fa-f\\-]{36}/;\n\n//RFC 4122\nconst handler:URISchemeHandler<UUIDComponents, URIOptions, URNComponents> = {\n\tscheme : \"urn:uuid\",\n\n\tparse : function (urnComponents:URNComponents, options:URIOptions):UUIDComponents {\n\t\tconst uuidComponents = urnComponents as UUIDComponents;\n\t\tuuidComponents.uuid = uuidComponents.nss;\n\t\tuuidComponents.nss = undefined;\n\n\t\tif (!options.tolerant && (!uuidComponents.uuid || !uuidComponents.uuid.match(UUID))) {\n\t\t\tuuidComponents.error = uuidComponents.error || \"UUID is not valid.\";\n\t\t}\n\n\t\treturn uuidComponents;\n\t},\n\n\tserialize : function (uuidComponents:UUIDComponents, options:URIOptions):URNComponents {\n\t\tconst urnComponents = uuidComponents as URNComponents;\n\t\t//normalize UUID\n\t\turnComponents.nss = (uuidComponents.uuid || \"\").toLowerCase();\n\t\treturn urnComponents;\n\t},\n};\n\nexport default handler;", "import { URISchemeHandler, URIComponents, URIOptions } from \"../uri\";\nimport { pctEncChar, SCHEMES } from \"../uri\";\n\nexport interface URNComponents extends URIComponents {\n\tnid?:string;\n\tnss?:string;\n}\n\nexport interface URNOptions extends URIOptions {\n\tnid?:string;\n}\n\nconst NID$ = \"(?:[0-9A-Za-z][0-9A-Za-z\\\\-]{1,31})\";\nconst PCT_ENCODED$ = \"(?:\\\\%[0-9A-Fa-f]{2})\";\nconst TRANS$$ = \"[0-9A-Za-z\\\\(\\\\)\\\\+\\\\,\\\\-\\\\.\\\\:\\\\=\\\\@\\\\;\\\\$\\\\_\\\\!\\\\*\\\\'\\\\/\\\\?\\\\#]\";\nconst NSS$ = \"(?:(?:\" + PCT_ENCODED$ + \"|\" + TRANS$$ + \")+)\";\nconst URN_SCHEME = new RegExp(\"^urn\\\\:(\" + NID$ + \")$\");\nconst URN_PATH = new RegExp(\"^(\" + NID$ + \")\\\\:(\" + NSS$ + \")$\");\nconst URN_PARSE = /^([^\\:]+)\\:(.*)/;\nconst URN_EXCLUDED = /[\\x00-\\x20\\\\\\\"\\&\\<\\>\\[\\]\\^\\`\\{\\|\\}\\~\\x7F-\\xFF]/g;\n\n//RFC 2141\nconst handler:URISchemeHandler<URNComponents,URNOptions> = {\n\tscheme : \"urn\",\n\n\tparse : function (components:URIComponents, options:URNOptions):URNComponents {\n\t\tconst matches = components.path && components.path.match(URN_PARSE);\n\t\tlet urnComponents = components as URNComponents;\n\n\t\tif (matches) {\n\t\t\tconst scheme = options.scheme || urnComponents.scheme || \"urn\";\n\t\t\tconst nid = matches[1].toLowerCase();\n\t\t\tconst nss = matches[2];\n\t\t\tconst urnScheme = `${scheme}:${options.nid || nid}`;\n\t\t\tconst schemeHandler = SCHEMES[urnScheme];\n\n\t\t\turnComponents.nid = nid;\n\t\t\turnComponents.nss = nss;\n\t\t\turnComponents.path = undefined;\n\n\t\t\tif (schemeHandler) {\n\t\t\t\turnComponents = schemeHandler.parse(urnComponents, options) as URNComponents;\n\t\t\t}\n\t\t} else {\n\t\t\turnComponents.error = urnComponents.error || \"URN can not be parsed.\";\n\t\t}\n\n\t\treturn urnComponents;\n\t},\n\n\tserialize : function (urnComponents:URNComponents, options:URNOptions):URIComponents {\n\t\tconst scheme = options.scheme || urnComponents.scheme || \"urn\";\n\t\tconst nid = urnComponents.nid;\n\t\tconst urnScheme = `${scheme}:${options.nid || nid}`;\n\t\tconst schemeHandler = SCHEMES[urnScheme];\n\n\t\tif (schemeHandler) {\n\t\t\turnComponents = schemeHandler.serialize(urnComponents, options) as URNComponents;\n\t\t}\n\n\t\tconst uriComponents = urnComponents as URIComponents;\n\t\tconst nss = urnComponents.nss;\n\t\turiComponents.path = `${nid || options.nid}:${nss}`;\n\n\t\treturn uriComponents;\n\t},\n};\n\nexport default handler;", "import { URISchemeHandler, URIComponents, URIOptions } from \"../uri\";\nimport { pctEncChar, pctDecChars, unescapeComponent } from \"../uri\";\nimport punycode from \"punycode\";\nimport { merge, subexp, toUpperCase, toArray } from \"../util\";\n\nexport interface MailtoHeaders {\n\t[hfname:string]:string\n}\n\nexport interface MailtoComponents extends URIComponents {\n\tto:Array<string>,\n\theaders?:MailtoHeaders,\n\tsubject?:string,\n\tbody?:string\n}\n\nconst O:MailtoHeaders = {};\nconst isIRI = true;\n\n//RFC 3986\nconst UNRESERVED$$ = \"[A-Za-z0-9\\\\-\\\\.\\\\_\\\\~\" + (isIRI ? \"\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF\" : \"\") + \"]\";\nconst HEXDIG$$ = \"[0-9A-Fa-f]\";  //case-insensitive\nconst PCT_ENCODED$ = subexp(subexp(\"%[EFef]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%[89A-Fa-f]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%\" + HEXDIG$$ + HEXDIG$$));  //expanded\n\n//RFC 5322, except these symbols as per RFC 6068: @ : / ? # [ ] & ; =\n//const ATEXT$$ = \"[A-Za-z0-9\\\\!\\\\#\\\\$\\\\%\\\\&\\\\'\\\\*\\\\+\\\\-\\\\/\\\\=\\\\?\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]\";\n//const WSP$$ = \"[\\\\x20\\\\x09]\";\n//const OBS_QTEXT$$ = \"[\\\\x01-\\\\x08\\\\x0B\\\\x0C\\\\x0E-\\\\x1F\\\\x7F]\";  //(%d1-8 / %d11-12 / %d14-31 / %d127)\n//const QTEXT$$ = merge(\"[\\\\x21\\\\x23-\\\\x5B\\\\x5D-\\\\x7E]\", OBS_QTEXT$$);  //%d33 / %d35-91 / %d93-126 / obs-qtext\n//const VCHAR$$ = \"[\\\\x21-\\\\x7E]\";\n//const WSP$$ = \"[\\\\x20\\\\x09]\";\n//const OBS_QP$ = subexp(\"\\\\\\\\\" + merge(\"[\\\\x00\\\\x0D\\\\x0A]\", OBS_QTEXT$$));  //%d0 / CR / LF / obs-qtext\n//const FWS$ = subexp(subexp(WSP$$ + \"*\" + \"\\\\x0D\\\\x0A\") + \"?\" + WSP$$ + \"+\");\n//const QUOTED_PAIR$ = subexp(subexp(\"\\\\\\\\\" + subexp(VCHAR$$ + \"|\" + WSP$$)) + \"|\" + OBS_QP$);\n//const QUOTED_STRING$ = subexp('\\\\\"' + subexp(FWS$ + \"?\" + QCONTENT$) + \"*\" + FWS$ + \"?\" + '\\\\\"');\nconst ATEXT$$ = \"[A-Za-z0-9\\\\!\\\\$\\\\%\\\\'\\\\*\\\\+\\\\-\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]\";\nconst QTEXT$$ = \"[\\\\!\\\\$\\\\%\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\-\\\\.0-9\\\\<\\\\>A-Z\\\\x5E-\\\\x7E]\";\nconst VCHAR$$ = merge(QTEXT$$, \"[\\\\\\\"\\\\\\\\]\");\nconst DOT_ATOM_TEXT$ = subexp(ATEXT$$ + \"+\" + subexp(\"\\\\.\" + ATEXT$$ + \"+\") + \"*\");\nconst QUOTED_PAIR$ = subexp(\"\\\\\\\\\" + VCHAR$$);\nconst QCONTENT$ = subexp(QTEXT$$ + \"|\" + QUOTED_PAIR$);\nconst QUOTED_STRING$ = subexp('\\\\\"' + QCONTENT$ + \"*\" + '\\\\\"');\n\n//RFC 6068\nconst DTEXT_NO_OBS$$ = \"[\\\\x21-\\\\x5A\\\\x5E-\\\\x7E]\";  //%d33-90 / %d94-126\nconst SOME_DELIMS$$ = \"[\\\\!\\\\$\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\:\\\\@]\";\nconst QCHAR$ = subexp(UNRESERVED$$ + \"|\" + PCT_ENCODED$ + \"|\" + SOME_DELIMS$$);\nconst DOMAIN$ = subexp(DOT_ATOM_TEXT$ + \"|\" + \"\\\\[\" + DTEXT_NO_OBS$$ + \"*\" + \"\\\\]\");\nconst LOCAL_PART$ = subexp(DOT_ATOM_TEXT$ + \"|\" + QUOTED_STRING$);\nconst ADDR_SPEC$ = subexp(LOCAL_PART$ + \"\\\\@\" + DOMAIN$);\nconst TO$ = subexp(ADDR_SPEC$ + subexp(\"\\\\,\" + ADDR_SPEC$) + \"*\");\nconst HFNAME$ = subexp(QCHAR$ + \"*\");\nconst HFVALUE$ = HFNAME$;\nconst HFIELD$ = subexp(HFNAME$ + \"\\\\=\" + HFVALUE$);\nconst HFIELDS2$ = subexp(HFIELD$ + subexp(\"\\\\&\" + HFIELD$) + \"*\");\nconst HFIELDS$ = subexp(\"\\\\?\" + HFIELDS2$);\nconst MAILTO_URI = new RegExp(\"^mailto\\\\:\" + TO$ + \"?\" + HFIELDS$ + \"?$\");\n\nconst UNRESERVED = new RegExp(UNRESERVED$$, \"g\");\nconst PCT_ENCODED = new RegExp(PCT_ENCODED$, \"g\");\nconst NOT_LOCAL_PART = new RegExp(merge(\"[^]\", ATEXT$$, \"[\\\\.]\", '[\\\\\"]', VCHAR$$), \"g\");\nconst NOT_DOMAIN = new RegExp(merge(\"[^]\", ATEXT$$, \"[\\\\.]\", \"[\\\\[]\", DTEXT_NO_OBS$$, \"[\\\\]]\"), \"g\");\nconst NOT_HFNAME = new RegExp(merge(\"[^]\", UNRESERVED$$, SOME_DELIMS$$), \"g\");\nconst NOT_HFVALUE = NOT_HFNAME;\nconst TO = new RegExp(\"^\" + TO$ + \"$\");\nconst HFIELDS = new RegExp(\"^\" + HFIELDS2$ + \"$\");\n\nfunction decodeUnreserved(str:string):string {\n\tconst decStr = pctDecChars(str);\n\treturn (!decStr.match(UNRESERVED) ? str : decStr);\n}\n\nconst handler:URISchemeHandler<MailtoComponents> =  {\n\tscheme : \"mailto\",\n\n\tparse : function (components:URIComponents, options:URIOptions):MailtoComponents {\n\t\tconst mailtoComponents = components as MailtoComponents;\n\t\tconst to = mailtoComponents.to = (mailtoComponents.path ? mailtoComponents.path.split(\",\") : []);\n\t\tmailtoComponents.path = undefined;\n\n\t\tif (mailtoComponents.query) {\n\t\t\tlet unknownHeaders = false\n\t\t\tconst headers:MailtoHeaders = {};\n\t\t\tconst hfields = mailtoComponents.query.split(\"&\");\n\n\t\t\tfor (let x = 0, xl = hfields.length; x < xl; ++x) {\n\t\t\t\tconst hfield = hfields[x].split(\"=\");\n\n\t\t\t\tswitch (hfield[0]) {\n\t\t\t\t\tcase \"to\":\n\t\t\t\t\t\tconst toAddrs = hfield[1].split(\",\");\n\t\t\t\t\t\tfor (let x = 0, xl = toAddrs.length; x < xl; ++x) {\n\t\t\t\t\t\t\tto.push(toAddrs[x]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"subject\":\n\t\t\t\t\t\tmailtoComponents.subject = unescapeComponent(hfield[1], options);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"body\":\n\t\t\t\t\t\tmailtoComponents.body = unescapeComponent(hfield[1], options);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tunknownHeaders = true;\n\t\t\t\t\t\theaders[unescapeComponent(hfield[0], options)] = unescapeComponent(hfield[1], options);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (unknownHeaders) mailtoComponents.headers = headers;\n\t\t}\n\n\t\tmailtoComponents.query = undefined;\n\n\t\tfor (let x = 0, xl = to.length; x < xl; ++x) {\n\t\t\tconst addr = to[x].split(\"@\");\n\n\t\t\taddr[0] = unescapeComponent(addr[0]);\n\n\t\t\tif (!options.unicodeSupport) {\n\t\t\t\t//convert Unicode IDN -> ASCII IDN\n\t\t\t\ttry {\n\t\t\t\t\taddr[1] = punycode.toASCII(unescapeComponent(addr[1], options).toLowerCase());\n\t\t\t\t} catch (e) {\n\t\t\t\t\tmailtoComponents.error = mailtoComponents.error || \"Email address's domain name can not be converted to ASCII via punycode: \" + e;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\taddr[1] = unescapeComponent(addr[1], options).toLowerCase();\n\t\t\t}\n\n\t\t\tto[x] = addr.join(\"@\");\n\t\t}\n\n\t\treturn mailtoComponents;\n\t},\n\n\tserialize : function (mailtoComponents:MailtoComponents, options:URIOptions):URIComponents {\n\t\tconst components = mailtoComponents as URIComponents;\n\t\tconst to = toArray(mailtoComponents.to);\n\t\tif (to) {\n\t\t\tfor (let x = 0, xl = to.length; x < xl; ++x) {\n\t\t\t\tconst toAddr = String(to[x]);\n\t\t\t\tconst atIdx = toAddr.lastIndexOf(\"@\");\n\t\t\t\tconst localPart = (toAddr.slice(0, atIdx)).replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_LOCAL_PART, pctEncChar);\n\t\t\t\tlet domain = toAddr.slice(atIdx + 1);\n\n\t\t\t\t//convert IDN via punycode\n\t\t\t\ttry {\n\t\t\t\t\tdomain = (!options.iri ? punycode.toASCII(unescapeComponent(domain, options).toLowerCase()) : punycode.toUnicode(domain));\n\t\t\t\t} catch (e) {\n\t\t\t\t\tcomponents.error = components.error || \"Email address's domain name can not be converted to \" + (!options.iri ? \"ASCII\" : \"Unicode\") + \" via punycode: \" + e;\n\t\t\t\t}\n\n\t\t\t\tto[x] = localPart + \"@\" + domain;\n\t\t\t}\n\n\t\t\tcomponents.path = to.join(\",\");\n\t\t}\n\n\t\tconst headers = mailtoComponents.headers = mailtoComponents.headers || {};\n\n\t\tif (mailtoComponents.subject) headers[\"subject\"] = mailtoComponents.subject;\n\t\tif (mailtoComponents.body) headers[\"body\"] = mailtoComponents.body;\n\n\t\tconst fields = [];\n\t\tfor (const name in headers) {\n\t\t\tif (headers[name] !== O[name]) {\n\t\t\t\tfields.push(\n\t\t\t\t\tname.replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFNAME, pctEncChar) +\n\t\t\t\t\t\"=\" +\n\t\t\t\t\theaders[name].replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFVALUE, pctEncChar)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tif (fields.length) {\n\t\t\tcomponents.query = fields.join(\"&\");\n\t\t}\n\n\t\treturn components;\n\t}\n}\n\nexport default handler;", "import { URISchemeHandler, URIComponents, URIOptions } from \"../uri\";\nimport ws from \"./ws\";\n\nconst handler:URISchemeHandler = {\n\tscheme : \"wss\",\n\tdomainHost : ws.domainHost,\n\tparse : ws.parse,\n\tserialize : ws.serialize\n}\n\nexport default handler;", "import { URISchemeHandler, URIComponents, URIOptions } from \"../uri\";\n\nexport interface WSComponents extends URIComponents {\n\tresourceName?: string;\n\tsecure?: boolean;\n}\n\nfunction isSecure(wsComponents:WSComponents):boolean {\n\treturn typeof wsComponents.secure === 'boolean' ? wsComponents.secure : String(wsComponents.scheme).toLowerCase() === \"wss\";\n}\n\n//RFC 6455\nconst handler:URISchemeHandler = {\n\tscheme : \"ws\",\n\n\tdomainHost : true,\n\n\tparse : function (components:URIComponents, options:URIOptions):WSComponents {\n\t\tconst wsComponents = components as WSComponents;\n\n\t\t//indicate if the secure flag is set\n\t\twsComponents.secure = isSecure(wsComponents);\n\n\t\t//construct resouce name\n\t\twsComponents.resourceName = (wsComponents.path || '/') + (wsComponents.query ? '?' + wsComponents.query : '');\n\t\twsComponents.path = undefined;\n\t\twsComponents.query = undefined;\n\n\t\treturn wsComponents;\n\t},\n\n\tserialize : function (wsComponents:WSComponents, options:URIOptions):URIComponents {\n\t\t//normalize the default port\n\t\tif (wsComponents.port === (isSecure(wsComponents) ? 443 : 80) || wsComponents.port === \"\") {\n\t\t\twsComponents.port = undefined;\n\t\t}\n\n\t\t//ensure scheme matches secure flag\n\t\tif (typeof wsComponents.secure === 'boolean') {\n\t\t\twsComponents.scheme = (wsComponents.secure ? 'wss' : 'ws');\n\t\t\twsComponents.secure = undefined;\n\t\t}\n\n\t\t//reconstruct path from resource name\n\t\tif (wsComponents.resourceName) {\n\t\t\tconst [path, query] = wsComponents.resourceName.split('?');\n\t\t\twsComponents.path = (path && path !== '/' ? path : undefined);\n\t\t\twsComponents.query = query;\n\t\t\twsComponents.resourceName = undefined;\n\t\t}\n\n\t\t//forbid fragment component\n\t\twsComponents.fragment = undefined;\n\n\t\treturn wsComponents;\n\t}\n};\n\nexport default handler;", "import { URISchemeHandler, URIComponents, URIOptions } from \"../uri\";\nimport http from \"./http\";\n\nconst handler:URISchemeHandler = {\n\tscheme : \"https\",\n\tdomainHost : http.domainHost,\n\tparse : http.parse,\n\tserialize : http.serialize\n}\n\nexport default handler;", "import { URISchemeHandler, URIComponents, URIOptions } from \"../uri\";\n\nconst handler:URISchemeHandler = {\n\tscheme : \"http\",\n\n\tdomainHost : true,\n\n\tparse : function (components:URIComponents, options:URIOptions):URIComponents {\n\t\t//report missing host\n\t\tif (!components.host) {\n\t\t\tcomponents.error = components.error || \"HTTP URIs must have a host.\";\n\t\t}\n\n\t\treturn components;\n\t},\n\n\tserialize : function (components:URIComponents, options:URIOptions):URIComponents {\n\t\tconst secure = String(components.scheme).toLowerCase() === \"https\";\n\n\t\t//normalize the default port\n\t\tif (components.port === (secure ? 443 : 80) || components.port === \"\") {\n\t\t\tcomponents.port = undefined;\n\t\t}\n\t\t\n\t\t//normalize the empty path\n\t\tif (!components.path) {\n\t\t\tcomponents.path = \"/\";\n\t\t}\n\n\t\t//NOTE: We do not parse query strings for HTTP URIs\n\t\t//as WWW Form Url Encoded query strings are part of the HTML4+ spec,\n\t\t//and not the HTTP spec.\n\n\t\treturn components;\n\t}\n};\n\nexport default handler;", "/**\n * URI.js\n *\n * @fileoverview An RFC 3986 compliant, scheme extendable URI parsing/validating/resolving library for JavaScript.\n * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\n * @see http://github.com/garycourt/uri-js\n */\n\n/**\n * Copyright 2011 Gary Court. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification, are\n * permitted provided that the following conditions are met:\n *\n *    1. Redistributions of source code must retain the above copyright notice, this list of\n *       conditions and the following disclaimer.\n *\n *    2. Redistributions in binary form must reproduce the above copyright notice, this list\n *       of conditions and the following disclaimer in the documentation and/or other materials\n *       provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY GARY COURT ``AS IS'' AND ANY EXPRESS OR IMPLIED\n * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GARY COURT OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * The views and conclusions contained in the software and documentation are those of the\n * authors and should not be interpreted as representing official policies, either expressed\n * or implied, of Gary Court.\n */\n\nimport URI_PROTOCOL from \"./regexps-uri\";\nimport IRI_PROTOCOL from \"./regexps-iri\";\nimport punycode from \"punycode\";\nimport { toUpperCase, typeOf, assign } from \"./util\";\n\nexport interface URIComponents {\n\tscheme?:string;\n\tuserinfo?:string;\n\thost?:string;\n\tport?:number|string;\n\tpath?:string;\n\tquery?:string;\n\tfragment?:string;\n\treference?:string;\n\terror?:string;\n}\n\nexport interface URIOptions {\n\tscheme?:string;\n\treference?:string;\n\ttolerant?:boolean;\n\tabsolutePath?:boolean;\n\tiri?:boolean;\n\tunicodeSupport?:boolean;\n\tdomainHost?:boolean;\n}\n\nexport interface URISchemeHandler<Components extends URIComponents = URIComponents, Options extends URIOptions = URIOptions, ParentComponents extends URIComponents = URIComponents> {\n\tscheme:string;\n\tparse(components:ParentComponents, options:Options):Components;\n\tserialize(components:Components, options:Options):ParentComponents;\n\tunicodeSupport?:boolean;\n\tdomainHost?:boolean;\n\tabsolutePath?:boolean;\n}\n\nexport interface URIRegExps {\n\tNOT_SCHEME : RegExp,\n\tNOT_USERINFO : RegExp,\n\tNOT_HOST : RegExp,\n\tNOT_PATH : RegExp,\n\tNOT_PATH_NOSCHEME : RegExp,\n\tNOT_QUERY : RegExp,\n\tNOT_FRAGMENT : RegExp,\n\tESCAPE : RegExp,\n\tUNRESERVED : RegExp,\n\tOTHER_CHARS : RegExp,\n\tPCT_ENCODED : RegExp,\n\tIPV4ADDRESS : RegExp,\n\tIPV6ADDRESS : RegExp,\n}\n\nexport const SCHEMES:{[scheme:string]:URISchemeHandler} = {};\n\nexport function pctEncChar(chr:string):string {\n\tconst c = chr.charCodeAt(0);\n\tlet e:string;\n\n\tif (c < 16) e = \"%0\" + c.toString(16).toUpperCase();\n\telse if (c < 128) e = \"%\" + c.toString(16).toUpperCase();\n\telse if (c < 2048) e = \"%\" + ((c >> 6) | 192).toString(16).toUpperCase() + \"%\" + ((c & 63) | 128).toString(16).toUpperCase();\n\telse e = \"%\" + ((c >> 12) | 224).toString(16).toUpperCase() + \"%\" + (((c >> 6) & 63) | 128).toString(16).toUpperCase() + \"%\" + ((c & 63) | 128).toString(16).toUpperCase();\n\n\treturn e;\n}\n\nexport function pctDecChars(str:string):string {\n\tlet newStr = \"\";\n\tlet i = 0;\n\tconst il = str.length;\n\n\twhile (i < il) {\n\t\tconst c = parseInt(str.substr(i + 1, 2), 16);\n\n\t\tif (c < 128) {\n\t\t\tnewStr += String.fromCharCode(c);\n\t\t\ti += 3;\n\t\t}\n\t\telse if (c >= 194 && c < 224) {\n\t\t\tif ((il - i) >= 6) {\n\t\t\t\tconst c2 = parseInt(str.substr(i + 4, 2), 16);\n\t\t\t\tnewStr += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n\t\t\t} else {\n\t\t\t\tnewStr += str.substr(i, 6);\n\t\t\t}\n\t\t\ti += 6;\n\t\t}\n\t\telse if (c >= 224) {\n\t\t\tif ((il - i) >= 9) {\n\t\t\t\tconst c2 = parseInt(str.substr(i + 4, 2), 16);\n\t\t\t\tconst c3 = parseInt(str.substr(i + 7, 2), 16);\n\t\t\t\tnewStr += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n\t\t\t} else {\n\t\t\t\tnewStr += str.substr(i, 9);\n\t\t\t}\n\t\t\ti += 9;\n\t\t}\n\t\telse {\n\t\t\tnewStr += str.substr(i, 3);\n\t\t\ti += 3;\n\t\t}\n\t}\n\n\treturn newStr;\n}\n\nfunction _normalizeComponentEncoding(components:URIComponents, protocol:URIRegExps) {\n\tfunction decodeUnreserved(str:string):string {\n\t\tconst decStr = pctDecChars(str);\n\t\treturn (!decStr.match(protocol.UNRESERVED) ? str : decStr);\n\t}\n\n\tif (components.scheme) components.scheme = String(components.scheme).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_SCHEME, \"\");\n\tif (components.userinfo !== undefined) components.userinfo = String(components.userinfo).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_USERINFO, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n\tif (components.host !== undefined) components.host = String(components.host).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_HOST, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n\tif (components.path !== undefined) components.path = String(components.path).replace(protocol.PCT_ENCODED, decodeUnreserved).replace((components.scheme ? protocol.NOT_PATH : protocol.NOT_PATH_NOSCHEME), pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n\tif (components.query !== undefined) components.query = String(components.query).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_QUERY, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n\tif (components.fragment !== undefined) components.fragment = String(components.fragment).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_FRAGMENT, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n\n\treturn components;\n};\n\nfunction _stripLeadingZeros(str:string):string {\n\treturn str.replace(/^0*(.*)/, \"$1\") || \"0\";\n}\n\nfunction _normalizeIPv4(host:string, protocol:URIRegExps):string {\n\tconst matches = host.match(protocol.IPV4ADDRESS) || [];\n\tconst [, address] = matches;\n\t\n\tif (address) {\n\t\treturn address.split(\".\").map(_stripLeadingZeros).join(\".\");\n\t} else {\n\t\treturn host;\n\t}\n}\n\nfunction _normalizeIPv6(host:string, protocol:URIRegExps):string {\n\tconst matches = host.match(protocol.IPV6ADDRESS) || [];\n\tconst [, address, zone] = matches;\n\n\tif (address) {\n\t\tconst [last, first] = address.toLowerCase().split('::').reverse();\n\t\tconst firstFields = first ? first.split(\":\").map(_stripLeadingZeros) : [];\n\t\tconst lastFields = last.split(\":\").map(_stripLeadingZeros);\n\t\tconst isLastFieldIPv4Address = protocol.IPV4ADDRESS.test(lastFields[lastFields.length - 1]);\n\t\tconst fieldCount = isLastFieldIPv4Address ? 7 : 8;\n\t\tconst lastFieldsStart = lastFields.length - fieldCount;\n\t\tconst fields = Array<string>(fieldCount);\n\n\t\tfor (let x = 0; x < fieldCount; ++x) {\n\t\t\tfields[x] = firstFields[x] || lastFields[lastFieldsStart + x] || '';\n\t\t}\n\n\t\tif (isLastFieldIPv4Address) {\n\t\t\tfields[fieldCount - 1] = _normalizeIPv4(fields[fieldCount - 1], protocol);\n\t\t}\n\n\t\tconst allZeroFields = fields.reduce<Array<{index:number,length:number}>>((acc, field, index) => {\n\t\t\tif (!field || field === \"0\") {\n\t\t\t\tconst lastLongest = acc[acc.length - 1];\n\t\t\t\tif (lastLongest && lastLongest.index + lastLongest.length === index) {\n\t\t\t\t\tlastLongest.length++;\n\t\t\t\t} else {\n\t\t\t\t\tacc.push({ index, length : 1 });\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn acc;\n\t\t}, []);\n\n\t\tconst longestZeroFields = allZeroFields.sort((a, b) => b.length - a.length)[0];\n\n\t\tlet newHost:string;\n\t\tif (longestZeroFields && longestZeroFields.length > 1) {\n\t\t\tconst newFirst = fields.slice(0, longestZeroFields.index) ;\n\t\t\tconst newLast = fields.slice(longestZeroFields.index + longestZeroFields.length);\n\t\t\tnewHost = newFirst.join(\":\") + \"::\" + newLast.join(\":\");\n\t\t} else {\n\t\t\tnewHost = fields.join(\":\");\n\t\t}\n\n\t\tif (zone) {\n\t\t\tnewHost += \"%\" + zone;\n\t\t}\n\n\t\treturn newHost;\n\t} else {\n\t\treturn host;\n\t}\n}\n\nconst URI_PARSE = /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:([^\\/?#@]*)@)?(\\[[^\\/?#\\]]+\\]|[^\\/?#:]*)(?:\\:(\\d*))?))?([^?#]*)(?:\\?([^#]*))?(?:#((?:.|\\n|\\r)*))?/i;\nconst NO_MATCH_IS_UNDEFINED = (<RegExpMatchArray>(\"\").match(/(){0}/))[1] === undefined;\n\nexport function parse(uriString:string, options:URIOptions = {}):URIComponents {\n\tconst components:URIComponents = {};\n\tconst protocol = (options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL);\n\n\tif (options.reference === \"suffix\") uriString = (options.scheme ? options.scheme + \":\" : \"\") + \"//\" + uriString;\n\n\tconst matches = uriString.match(URI_PARSE);\n\n\tif (matches) {\n\t\tif (NO_MATCH_IS_UNDEFINED) {\n\t\t\t//store each component\n\t\t\tcomponents.scheme = matches[1];\n\t\t\tcomponents.userinfo = matches[3];\n\t\t\tcomponents.host = matches[4];\n\t\t\tcomponents.port = parseInt(matches[5], 10);\n\t\t\tcomponents.path = matches[6] || \"\";\n\t\t\tcomponents.query = matches[7];\n\t\t\tcomponents.fragment = matches[8];\n\n\t\t\t//fix port number\n\t\t\tif (isNaN(components.port)) {\n\t\t\t\tcomponents.port = matches[5];\n\t\t\t}\n\t\t} else {  //IE FIX for improper RegExp matching\n\t\t\t//store each component\n\t\t\tcomponents.scheme = matches[1] || undefined;\n\t\t\tcomponents.userinfo = (uriString.indexOf(\"@\") !== -1 ? matches[3] : undefined);\n\t\t\tcomponents.host = (uriString.indexOf(\"//\") !== -1 ? matches[4] : undefined);\n\t\t\tcomponents.port = parseInt(matches[5], 10);\n\t\t\tcomponents.path = matches[6] || \"\";\n\t\t\tcomponents.query = (uriString.indexOf(\"?\") !== -1 ? matches[7] : undefined);\n\t\t\tcomponents.fragment = (uriString.indexOf(\"#\") !== -1 ? matches[8] : undefined);\n\n\t\t\t//fix port number\n\t\t\tif (isNaN(components.port)) {\n\t\t\t\tcomponents.port = (uriString.match(/\\/\\/(?:.|\\n)*\\:(?:\\/|\\?|\\#|$)/) ? matches[4] : undefined);\n\t\t\t}\n\t\t}\n\n\t\tif (components.host) {\n\t\t\t//normalize IP hosts\n\t\t\tcomponents.host = _normalizeIPv6(_normalizeIPv4(components.host, protocol), protocol);\n\t\t}\n\n\t\t//determine reference type\n\t\tif (components.scheme === undefined && components.userinfo === undefined && components.host === undefined && components.port === undefined && !components.path && components.query === undefined) {\n\t\t\tcomponents.reference = \"same-document\";\n\t\t} else if (components.scheme === undefined) {\n\t\t\tcomponents.reference = \"relative\";\n\t\t} else if (components.fragment === undefined) {\n\t\t\tcomponents.reference = \"absolute\";\n\t\t} else {\n\t\t\tcomponents.reference = \"uri\";\n\t\t}\n\n\t\t//check for reference errors\n\t\tif (options.reference && options.reference !== \"suffix\" && options.reference !== components.reference) {\n\t\t\tcomponents.error = components.error || \"URI is not a \" + options.reference + \" reference.\";\n\t\t}\n\n\t\t//find scheme handler\n\t\tconst schemeHandler = SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\n\n\t\t//check if scheme can't handle IRIs\n\t\tif (!options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\n\t\t\t//if host component is a domain name\n\t\t\tif (components.host && (options.domainHost || (schemeHandler && schemeHandler.domainHost))) {\n\t\t\t\t//convert Unicode IDN -> ASCII IDN\n\t\t\t\ttry {\n\t\t\t\t\tcomponents.host = punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase());\n\t\t\t\t} catch (e) {\n\t\t\t\t\tcomponents.error = components.error || \"Host's domain name can not be converted to ASCII via punycode: \" + e;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//convert IRI -> URI\n\t\t\t_normalizeComponentEncoding(components, URI_PROTOCOL);\n\t\t} else {\n\t\t\t//normalize encodings\n\t\t\t_normalizeComponentEncoding(components, protocol);\n\t\t}\n\n\t\t//perform scheme specific parsing\n\t\tif (schemeHandler && schemeHandler.parse) {\n\t\t\tschemeHandler.parse(components, options);\n\t\t}\n\t} else {\n\t\tcomponents.error = components.error || \"URI can not be parsed.\";\n\t}\n\n\treturn components;\n};\n\nfunction _recomposeAuthority(components:URIComponents, options:URIOptions):string|undefined {\n\tconst protocol = (options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL);\n\tconst uriTokens:Array<string> = [];\n\n\tif (components.userinfo !== undefined) {\n\t\turiTokens.push(components.userinfo);\n\t\turiTokens.push(\"@\");\n\t}\n\n\tif (components.host !== undefined) {\n\t\t//normalize IP hosts, add brackets and escape zone separator for IPv6\n\t\turiTokens.push(_normalizeIPv6(_normalizeIPv4(String(components.host), protocol), protocol).replace(protocol.IPV6ADDRESS, (_, $1, $2) => \"[\" + $1 + ($2 ? \"%25\" + $2 : \"\") + \"]\"));\n\t}\n\n\tif (typeof components.port === \"number\" || typeof components.port === \"string\") {\n\t\turiTokens.push(\":\");\n\t\turiTokens.push(String(components.port));\n\t}\n\n\treturn uriTokens.length ? uriTokens.join(\"\") : undefined;\n};\n\nconst RDS1 = /^\\.\\.?\\//;\nconst RDS2 = /^\\/\\.(\\/|$)/;\nconst RDS3 = /^\\/\\.\\.(\\/|$)/;\nconst RDS4 = /^\\.\\.?$/;\nconst RDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/;\n\nexport function removeDotSegments(input:string):string {\n\tconst output:Array<string> = [];\n\n\twhile (input.length) {\n\t\tif (input.match(RDS1)) {\n\t\t\tinput = input.replace(RDS1, \"\");\n\t\t} else if (input.match(RDS2)) {\n\t\t\tinput = input.replace(RDS2, \"/\");\n\t\t} else if (input.match(RDS3)) {\n\t\t\tinput = input.replace(RDS3, \"/\");\n\t\t\toutput.pop();\n\t\t} else if (input === \".\" || input === \"..\") {\n\t\t\tinput = \"\";\n\t\t} else {\n\t\t\tconst im = input.match(RDS5);\n\t\t\tif (im) {\n\t\t\t\tconst s = im[0];\n\t\t\t\tinput = input.slice(s.length);\n\t\t\t\toutput.push(s);\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"Unexpected dot segment condition\");\n\t\t\t}\n\t\t}\n\t}\n\n\treturn output.join(\"\");\n};\n\nexport function serialize(components:URIComponents, options:URIOptions = {}):string {\n\tconst protocol = (options.iri ? IRI_PROTOCOL : URI_PROTOCOL);\n\tconst uriTokens:Array<string> = [];\n\n\t//find scheme handler\n\tconst schemeHandler = SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\n\n\t//perform scheme specific serialization\n\tif (schemeHandler && schemeHandler.serialize) schemeHandler.serialize(components, options);\n\n\tif (components.host) {\n\t\t//if host component is an IPv6 address\n\t\tif (protocol.IPV6ADDRESS.test(components.host)) {\n\t\t\t//TODO: normalize IPv6 address as per RFC 5952\n\t\t}\n\n\t\t//if host component is a domain name\n\t\telse if (options.domainHost || (schemeHandler && schemeHandler.domainHost)) {\n\t\t\t//convert IDN via punycode\n\t\t\ttry {\n\t\t\t\tcomponents.host = (!options.iri ? punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase()) : punycode.toUnicode(components.host));\n\t\t\t} catch (e) {\n\t\t\t\tcomponents.error = components.error || \"Host's domain name can not be converted to \" + (!options.iri ? \"ASCII\" : \"Unicode\") + \" via punycode: \" + e;\n\t\t\t}\n\t\t}\n\t}\n\n\t//normalize encoding\n\t_normalizeComponentEncoding(components, protocol);\n\n\tif (options.reference !== \"suffix\" && components.scheme) {\n\t\turiTokens.push(components.scheme);\n\t\turiTokens.push(\":\");\n\t}\n\n\tconst authority = _recomposeAuthority(components, options);\n\tif (authority !== undefined) {\n\t\tif (options.reference !== \"suffix\") {\n\t\t\turiTokens.push(\"//\");\n\t\t}\n\n\t\turiTokens.push(authority);\n\n\t\tif (components.path && components.path.charAt(0) !== \"/\") {\n\t\t\turiTokens.push(\"/\");\n\t\t}\n\t}\n\n\tif (components.path !== undefined) {\n\t\tlet s = components.path;\n\n\t\tif (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\n\t\t\ts = removeDotSegments(s);\n\t\t}\n\n\t\tif (authority === undefined) {\n\t\t\ts = s.replace(/^\\/\\//, \"/%2F\");  //don't allow the path to start with \"//\"\n\t\t}\n\n\t\turiTokens.push(s);\n\t}\n\n\tif (components.query !== undefined) {\n\t\turiTokens.push(\"?\");\n\t\turiTokens.push(components.query);\n\t}\n\n\tif (components.fragment !== undefined) {\n\t\turiTokens.push(\"#\");\n\t\turiTokens.push(components.fragment);\n\t}\n\n\treturn uriTokens.join(\"\");  //merge tokens into a string\n};\n\nexport function resolveComponents(base:URIComponents, relative:URIComponents, options:URIOptions = {}, skipNormalization?:boolean):URIComponents {\n\tconst target:URIComponents = {};\n\n\tif (!skipNormalization) {\n\t\tbase = parse(serialize(base, options), options);  //normalize base components\n\t\trelative = parse(serialize(relative, options), options);  //normalize relative components\n\t}\n\toptions = options || {};\n\n\tif (!options.tolerant && relative.scheme) {\n\t\ttarget.scheme = relative.scheme;\n\t\t//target.authority = relative.authority;\n\t\ttarget.userinfo = relative.userinfo;\n\t\ttarget.host = relative.host;\n\t\ttarget.port = relative.port;\n\t\ttarget.path = removeDotSegments(relative.path || \"\");\n\t\ttarget.query = relative.query;\n\t} else {\n\t\tif (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\n\t\t\t//target.authority = relative.authority;\n\t\t\ttarget.userinfo = relative.userinfo;\n\t\t\ttarget.host = relative.host;\n\t\t\ttarget.port = relative.port;\n\t\t\ttarget.path = removeDotSegments(relative.path || \"\");\n\t\t\ttarget.query = relative.query;\n\t\t} else {\n\t\t\tif (!relative.path) {\n\t\t\t\ttarget.path = base.path;\n\t\t\t\tif (relative.query !== undefined) {\n\t\t\t\t\ttarget.query = relative.query;\n\t\t\t\t} else {\n\t\t\t\t\ttarget.query = base.query;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (relative.path.charAt(0) === \"/\") {\n\t\t\t\t\ttarget.path = removeDotSegments(relative.path);\n\t\t\t\t} else {\n\t\t\t\t\tif ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\n\t\t\t\t\t\ttarget.path = \"/\" + relative.path;\n\t\t\t\t\t} else if (!base.path) {\n\t\t\t\t\t\ttarget.path = relative.path;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget.path = base.path.slice(0, base.path.lastIndexOf(\"/\") + 1) + relative.path;\n\t\t\t\t\t}\n\t\t\t\t\ttarget.path = removeDotSegments(target.path);\n\t\t\t\t}\n\t\t\t\ttarget.query = relative.query;\n\t\t\t}\n\t\t\t//target.authority = base.authority;\n\t\t\ttarget.userinfo = base.userinfo;\n\t\t\ttarget.host = base.host;\n\t\t\ttarget.port = base.port;\n\t\t}\n\t\ttarget.scheme = base.scheme;\n\t}\n\n\ttarget.fragment = relative.fragment;\n\n\treturn target;\n};\n\nexport function resolve(baseURI:string, relativeURI:string, options?:URIOptions):string {\n\tconst schemelessOptions = assign({ scheme : 'null' }, options);\n\treturn serialize(resolveComponents(parse(baseURI, schemelessOptions), parse(relativeURI, schemelessOptions), schemelessOptions, true), schemelessOptions);\n};\n\nexport function normalize(uri:string, options?:URIOptions):string;\nexport function normalize(uri:URIComponents, options?:URIOptions):URIComponents;\nexport function normalize(uri:any, options?:URIOptions):any {\n\tif (typeof uri === \"string\") {\n\t\turi = serialize(parse(uri, options), options);\n\t} else if (typeOf(uri) === \"object\") {\n\t\turi = parse(serialize(<URIComponents>uri, options), options);\n\t}\n\n\treturn uri;\n};\n\nexport function equal(uriA:string, uriB:string, options?: URIOptions):boolean;\nexport function equal(uriA:URIComponents, uriB:URIComponents, options?:URIOptions):boolean;\nexport function equal(uriA:any, uriB:any, options?:URIOptions):boolean {\n\tif (typeof uriA === \"string\") {\n\t\turiA = serialize(parse(uriA, options), options);\n\t} else if (typeOf(uriA) === \"object\") {\n\t\turiA = serialize(<URIComponents>uriA, options);\n\t}\n\n\tif (typeof uriB === \"string\") {\n\t\turiB = serialize(parse(uriB, options), options);\n\t} else if (typeOf(uriB) === \"object\") {\n\t\turiB = serialize(<URIComponents>uriB, options);\n\t}\n\n\treturn uriA === uriB;\n};\n\nexport function escapeComponent(str:string, options?:URIOptions):string {\n\treturn str && str.toString().replace((!options || !options.iri ? URI_PROTOCOL.ESCAPE : IRI_PROTOCOL.ESCAPE), pctEncChar);\n};\n\nexport function unescapeComponent(str:string, options?:URIOptions):string {\n\treturn str && str.toString().replace((!options || !options.iri ? URI_PROTOCOL.PCT_ENCODED : IRI_PROTOCOL.PCT_ENCODED), pctDecChars);\n};\n", "'use strict';\n\n/** Highest positive signed 32-bit float value */\nconst maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\n\n/** Bootstring parameters */\nconst base = 36;\nconst tMin = 1;\nconst tMax = 26;\nconst skew = 38;\nconst damp = 700;\nconst initialBias = 72;\nconst initialN = 128; // 0x80\nconst delimiter = '-'; // '\\x2D'\n\n/** Regular expressions */\nconst regexPunycode = /^xn--/;\nconst regexNonASCII = /[^\\0-\\x7E]/; // non-ASCII chars\nconst regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\n\n/** Error messages */\nconst errors = {\n\t'overflow': 'Overflow: input needs wider integers to process',\n\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t'invalid-input': 'Invalid input'\n};\n\n/** Convenience shortcuts */\nconst baseMinusTMin = base - tMin;\nconst floor = Math.floor;\nconst stringFromCharCode = String.fromCharCode;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * A generic error utility function.\n * @private\n * @param {String} type The error type.\n * @returns {Error} Throws a `RangeError` with the applicable error message.\n */\nfunction error(type) {\n\tthrow new RangeError(errors[type]);\n}\n\n/**\n * A generic `Array#map` utility function.\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function that gets called for every array\n * item.\n * @returns {Array} A new array of values returned by the callback function.\n */\nfunction map(array, fn) {\n\tconst result = [];\n\tlet length = array.length;\n\twhile (length--) {\n\t\tresult[length] = fn(array[length]);\n\t}\n\treturn result;\n}\n\n/**\n * A simple `Array#map`-like wrapper to work with domain name strings or email\n * addresses.\n * @private\n * @param {String} domain The domain name or email address.\n * @param {Function} callback The function that gets called for every\n * character.\n * @returns {Array} A new string of characters returned by the callback\n * function.\n */\nfunction mapDomain(string, fn) {\n\tconst parts = string.split('@');\n\tlet result = '';\n\tif (parts.length > 1) {\n\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t// the local part (i.e. everything up to `@`) intact.\n\t\tresult = parts[0] + '@';\n\t\tstring = parts[1];\n\t}\n\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\tstring = string.replace(regexSeparators, '\\x2E');\n\tconst labels = string.split('.');\n\tconst encoded = map(labels, fn).join('.');\n\treturn result + encoded;\n}\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n\tconst output = [];\n\tlet counter = 0;\n\tconst length = string.length;\n\twhile (counter < length) {\n\t\tconst value = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// It's a high surrogate, and there is a next character.\n\t\t\tconst extra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // Low surrogate.\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// It's an unmatched surrogate; only append this code unit, in case the\n\t\t\t\t// next code unit is the high surrogate of a surrogate pair.\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n/**\n * Creates a string based on an array of numeric code points.\n * @see `punycode.ucs2.decode`\n * @memberOf punycode.ucs2\n * @name encode\n * @param {Array} codePoints The array of numeric code points.\n * @returns {String} The new Unicode string (UCS-2).\n */\nconst ucs2encode = array => String.fromCodePoint(...array);\n\n/**\n * Converts a basic code point into a digit/integer.\n * @see `digitToBasic()`\n * @private\n * @param {Number} codePoint The basic numeric code point value.\n * @returns {Number} The numeric value of a basic code point (for use in\n * representing integers) in the range `0` to `base - 1`, or `base` if\n * the code point does not represent a value.\n */\nconst basicToDigit = function(codePoint) {\n\tif (codePoint - 0x30 < 0x0A) {\n\t\treturn codePoint - 0x16;\n\t}\n\tif (codePoint - 0x41 < 0x1A) {\n\t\treturn codePoint - 0x41;\n\t}\n\tif (codePoint - 0x61 < 0x1A) {\n\t\treturn codePoint - 0x61;\n\t}\n\treturn base;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n * @see `basicToDigit()`\n * @private\n * @param {Number} digit The numeric value of a basic code point.\n * @returns {Number} The basic code point whose value (when used for\n * representing integers) is `digit`, which needs to be in the range\n * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n * used; else, the lowercase form is used. The behavior is undefined\n * if `flag` is non-zero and `digit` has no uppercase form.\n */\nconst digitToBasic = function(digit, flag) {\n\t//  0..25 map to ASCII a..z or A..Z\n\t// 26..35 map to ASCII 0..9\n\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n * @private\n */\nconst adapt = function(delta, numPoints, firstTime) {\n\tlet k = 0;\n\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\tdelta += floor(delta / numPoints);\n\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\tdelta = floor(delta / baseMinusTMin);\n\t}\n\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n * symbols.\n * @memberOf punycode\n * @param {String} input The Punycode string of ASCII-only symbols.\n * @returns {String} The resulting string of Unicode symbols.\n */\nconst decode = function(input) {\n\t// Don't use UCS-2.\n\tconst output = [];\n\tconst inputLength = input.length;\n\tlet i = 0;\n\tlet n = initialN;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points: let `basic` be the number of input code\n\t// points before the last delimiter, or `0` if there is none, then copy\n\t// the first basic code points to the output.\n\n\tlet basic = input.lastIndexOf(delimiter);\n\tif (basic < 0) {\n\t\tbasic = 0;\n\t}\n\n\tfor (let j = 0; j < basic; ++j) {\n\t\t// if it's not a basic code point\n\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\terror('not-basic');\n\t\t}\n\t\toutput.push(input.charCodeAt(j));\n\t}\n\n\t// Main decoding loop: start just after the last delimiter if any basic code\n\t// points were copied; start at the beginning otherwise.\n\n\tfor (let index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t// `index` is the index of the next character to be consumed.\n\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t// which gets added to `i`. The overflow checking is easier\n\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t// value at the end to obtain `delta`.\n\t\tlet oldi = i;\n\t\tfor (let w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\tif (index >= inputLength) {\n\t\t\t\terror('invalid-input');\n\t\t\t}\n\n\t\t\tconst digit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\ti += digit * w;\n\t\t\tconst t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\tif (digit < t) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst baseMinusT = base - t;\n\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tw *= baseMinusT;\n\n\t\t}\n\n\t\tconst out = output.length + 1;\n\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t// incrementing `n` each time, so we'll fix that now:\n\t\tif (floor(i / out) > maxInt - n) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tn += floor(i / out);\n\t\ti %= out;\n\n\t\t// Insert `n` at position `i` of the output.\n\t\toutput.splice(i++, 0, n);\n\n\t}\n\n\treturn String.fromCodePoint(...output);\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n * @memberOf punycode\n * @param {String} input The string of Unicode symbols.\n * @returns {String} The resulting Punycode string of ASCII-only symbols.\n */\nconst encode = function(input) {\n\tconst output = [];\n\n\t// Convert the input in UCS-2 to an array of Unicode code points.\n\tinput = ucs2decode(input);\n\n\t// Cache the length.\n\tlet inputLength = input.length;\n\n\t// Initialize the state.\n\tlet n = initialN;\n\tlet delta = 0;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points.\n\tfor (const currentValue of input) {\n\t\tif (currentValue < 0x80) {\n\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t}\n\t}\n\n\tlet basicLength = output.length;\n\tlet handledCPCount = basicLength;\n\n\t// `handledCPCount` is the number of code points that have been handled;\n\t// `basicLength` is the number of basic code points.\n\n\t// Finish the basic string with a delimiter unless it's empty.\n\tif (basicLength) {\n\t\toutput.push(delimiter);\n\t}\n\n\t// Main encoding loop:\n\twhile (handledCPCount < inputLength) {\n\n\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t// larger one:\n\t\tlet m = maxInt;\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\tm = currentValue;\n\t\t\t}\n\t\t}\n\n\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t// but guard against overflow.\n\t\tconst handledCPCountPlusOne = handledCPCount + 1;\n\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\tn = m;\n\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\t\t\tif (currentValue == n) {\n\t\t\t\t// Represent delta as a generalized variable-length integer.\n\t\t\t\tlet q = delta;\n\t\t\t\tfor (let k = base; /* no condition */; k += base) {\n\t\t\t\t\tconst t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconst qMinusT = q - t;\n\t\t\t\t\tconst baseMinusT = base - t;\n\t\t\t\t\toutput.push(\n\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t);\n\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t}\n\n\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\tdelta = 0;\n\t\t\t\t++handledCPCount;\n\t\t\t}\n\t\t}\n\n\t\t++delta;\n\t\t++n;\n\n\t}\n\treturn output.join('');\n};\n\n/**\n * Converts a Punycode string representing a domain name or an email address\n * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n * it doesn't matter if you call it on a string that has already been\n * converted to Unicode.\n * @memberOf punycode\n * @param {String} input The Punycoded domain name or email address to\n * convert to Unicode.\n * @returns {String} The Unicode representation of the given Punycode\n * string.\n */\nconst toUnicode = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexPunycode.test(string)\n\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t: string;\n\t});\n};\n\n/**\n * Converts a Unicode string representing a domain name or an email address to\n * Punycode. Only the non-ASCII parts of the domain name will be converted,\n * i.e. it doesn't matter if you call it with a domain that's already in\n * ASCII.\n * @memberOf punycode\n * @param {String} input The domain name or email address to convert, as a\n * Unicode string.\n * @returns {String} The Punycode representation of the given domain name or\n * email address.\n */\nconst toASCII = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexNonASCII.test(string)\n\t\t\t? 'xn--' + encode(string)\n\t\t\t: string;\n\t});\n};\n\n/*--------------------------------------------------------------------------*/\n\n/** Define the public API */\nconst punycode = {\n\t/**\n\t * A string representing the current Punycode.js version number.\n\t * @memberOf punycode\n\t * @type String\n\t */\n\t'version': '2.1.0',\n\t/**\n\t * An object of methods to convert from JavaScript's internal character\n\t * representation (UCS-2) to Unicode code points, and back.\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode\n\t * @type Object\n\t */\n\t'ucs2': {\n\t\t'decode': ucs2decode,\n\t\t'encode': ucs2encode\n\t},\n\t'decode': decode,\n\t'encode': encode,\n\t'toASCII': toASCII,\n\t'toUnicode': toUnicode\n};\n\nexport default punycode;\n", "import { URIRegExps } from \"./uri\";\nimport { buildExps } from \"./regexps-uri\";\n\nexport default buildExps(true);\n", "import { URIRegExps } from \"./uri\";\nimport { merge, subexp } from \"./util\";\n\nexport function buildExps(isIRI:boolean):URIRegExps {\n\tconst\n\t\tALPHA$$ = \"[A-Za-z]\",\n\t\tCR$ = \"[\\\\x0D]\",\n\t\tDIGIT$$ = \"[0-9]\",\n\t\tDQUOTE$$ = \"[\\\\x22]\",\n\t\tHEXDIG$$ = merge(DIGIT$$, \"[A-Fa-f]\"),  //case-insensitive\n\t\tLF$$ = \"[\\\\x0A]\",\n\t\tSP$$ = \"[\\\\x20]\",\n\t\tPCT_ENCODED$ = subexp(subexp(\"%[EFef]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%[89A-Fa-f]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%\" + HEXDIG$$ + HEXDIG$$)),  //expanded\n\t\tGEN_DELIMS$$ = \"[\\\\:\\\\/\\\\?\\\\#\\\\[\\\\]\\\\@]\",\n\t\tSUB_DELIMS$$ = \"[\\\\!\\\\$\\\\&\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\=]\",\n\t\tRESERVED$$ = merge(GEN_DELIMS$$, SUB_DELIMS$$),\n\t\tUCSCHAR$$ = isIRI ? \"[\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF]\" : \"[]\",  //subset, excludes bidi control characters\n\t\tIPRIVATE$$ = isIRI ? \"[\\\\uE000-\\\\uF8FF]\" : \"[]\",  //subset\n\t\tUNRESERVED$$ = merge(ALPHA$$, DIGIT$$, \"[\\\\-\\\\.\\\\_\\\\~]\", UCSCHAR$$),\n\t\tSCHEME$ = subexp(ALPHA$$ + merge(ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\") + \"*\"),\n\t\tUSERINFO$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\")) + \"*\"),\n\t\tDEC_OCTET$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"[1-9]\" + DIGIT$$) + \"|\" + DIGIT$$),\n\t\tDEC_OCTET_RELAXED$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"0?[1-9]\" + DIGIT$$) + \"|0?0?\" + DIGIT$$),  //relaxed parsing rules\n\t\tIPV4ADDRESS$ = subexp(DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$),\n\t\tH16$ = subexp(HEXDIG$$ + \"{1,4}\"),\n\t\tLS32$ = subexp(subexp(H16$ + \"\\\\:\" + H16$) + \"|\" + IPV4ADDRESS$),\n\t\tIPV6ADDRESS1$ = subexp(                                                            subexp(H16$ + \"\\\\:\") + \"{6}\" + LS32$), //                           6( h16 \":\" ) ls32\n\t\tIPV6ADDRESS2$ = subexp(                                                 \"\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{5}\" + LS32$), //                      \"::\" 5( h16 \":\" ) ls32\n\t\tIPV6ADDRESS3$ = subexp(subexp(                                 H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{4}\" + LS32$), //[               h16 ] \"::\" 4( h16 \":\" ) ls32\n\t\tIPV6ADDRESS4$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,1}\" + H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{3}\" + LS32$), //[ *1( h16 \":\" ) h16 ] \"::\" 3( h16 \":\" ) ls32\n\t\tIPV6ADDRESS5$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,2}\" + H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{2}\" + LS32$), //[ *2( h16 \":\" ) h16 ] \"::\" 2( h16 \":\" ) ls32\n\t\tIPV6ADDRESS6$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,3}\" + H16$) + \"?\\\\:\\\\:\" +        H16$ + \"\\\\:\"          + LS32$), //[ *3( h16 \":\" ) h16 ] \"::\"    h16 \":\"   ls32\n\t\tIPV6ADDRESS7$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,4}\" + H16$) + \"?\\\\:\\\\:\"                                + LS32$), //[ *4( h16 \":\" ) h16 ] \"::\"              ls32\n\t\tIPV6ADDRESS8$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,5}\" + H16$) + \"?\\\\:\\\\:\"                                + H16$ ), //[ *5( h16 \":\" ) h16 ] \"::\"              h16\n\t\tIPV6ADDRESS9$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,6}\" + H16$) + \"?\\\\:\\\\:\"                                       ), //[ *6( h16 \":\" ) h16 ] \"::\"\n\t\tIPV6ADDRESS$ = subexp([IPV6ADDRESS1$, IPV6ADDRESS2$, IPV6ADDRESS3$, IPV6ADDRESS4$, IPV6ADDRESS5$, IPV6ADDRESS6$, IPV6ADDRESS7$, IPV6ADDRESS8$, IPV6ADDRESS9$].join(\"|\")),\n\t\tZONEID$ = subexp(subexp(UNRESERVED$$ + \"|\" + PCT_ENCODED$) + \"+\"),  //RFC 6874\n\t\tIPV6ADDRZ$ = subexp(IPV6ADDRESS$ + \"\\\\%25\" + ZONEID$),  //RFC 6874\n\t\tIPV6ADDRZ_RELAXED$ = subexp(IPV6ADDRESS$ + subexp(\"\\\\%25|\\\\%(?!\" + HEXDIG$$ + \"{2})\") + ZONEID$),  //RFC 6874, with relaxed parsing rules\n\t\tIPVFUTURE$ = subexp(\"[vV]\" + HEXDIG$$ + \"+\\\\.\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\") + \"+\"),\n\t\tIP_LITERAL$ = subexp(\"\\\\[\" + subexp(IPV6ADDRZ_RELAXED$ + \"|\" + IPV6ADDRESS$ + \"|\" + IPVFUTURE$) + \"\\\\]\"),  //RFC 6874\n\t\tREG_NAME$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$)) + \"*\"),\n\t\tHOST$ = subexp(IP_LITERAL$ + \"|\" + IPV4ADDRESS$ + \"(?!\" + REG_NAME$ + \")\" + \"|\" + REG_NAME$),\n\t\tPORT$ = subexp(DIGIT$$ + \"*\"),\n\t\tAUTHORITY$ = subexp(subexp(USERINFO$ + \"@\") + \"?\" + HOST$ + subexp(\"\\\\:\" + PORT$) + \"?\"),\n\t\tPCHAR$ = subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@]\")),\n\t\tSEGMENT$ = subexp(PCHAR$ + \"*\"),\n\t\tSEGMENT_NZ$ = subexp(PCHAR$ + \"+\"),\n\t\tSEGMENT_NZ_NC$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\@]\")) + \"+\"),\n\t\tPATH_ABEMPTY$ = subexp(subexp(\"\\\\/\" + SEGMENT$) + \"*\"),\n\t\tPATH_ABSOLUTE$ = subexp(\"\\\\/\" + subexp(SEGMENT_NZ$ + PATH_ABEMPTY$) + \"?\"),  //simplified\n\t\tPATH_NOSCHEME$ = subexp(SEGMENT_NZ_NC$ + PATH_ABEMPTY$),  //simplified\n\t\tPATH_ROOTLESS$ = subexp(SEGMENT_NZ$ + PATH_ABEMPTY$),  //simplified\n\t\tPATH_EMPTY$ = \"(?!\" + PCHAR$ + \")\",\n\t\tPATH$ = subexp(PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\n\t\tQUERY$ = subexp(subexp(PCHAR$ + \"|\" + merge(\"[\\\\/\\\\?]\", IPRIVATE$$)) + \"*\"),\n\t\tFRAGMENT$ = subexp(subexp(PCHAR$ + \"|[\\\\/\\\\?]\") + \"*\"),\n\t\tHIER_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\n\t\tURI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\n\t\tRELATIVE_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$),\n\t\tRELATIVE$ = subexp(RELATIVE_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\n\t\tURI_REFERENCE$ = subexp(URI$ + \"|\" + RELATIVE$),\n\t\tABSOLUTE_URI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\"),\n\n\t\tGENERIC_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n\t\tRELATIVE_REF$ = \"^(){0}\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n\t\tABSOLUTE_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?$\",\n\t\tSAMEDOC_REF$ = \"^\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n\t\tAUTHORITY_REF$ = \"^\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?$\"\n\t;\n\n\treturn {\n\t\tNOT_SCHEME : new RegExp(merge(\"[^]\", ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\"), \"g\"),\n\t\tNOT_USERINFO : new RegExp(merge(\"[^\\\\%\\\\:]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n\t\tNOT_HOST : new RegExp(merge(\"[^\\\\%\\\\[\\\\]\\\\:]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n\t\tNOT_PATH : new RegExp(merge(\"[^\\\\%\\\\/\\\\:\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n\t\tNOT_PATH_NOSCHEME : new RegExp(merge(\"[^\\\\%\\\\/\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n\t\tNOT_QUERY : new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\", IPRIVATE$$), \"g\"),\n\t\tNOT_FRAGMENT : new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\"), \"g\"),\n\t\tESCAPE : new RegExp(merge(\"[^]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n\t\tUNRESERVED : new RegExp(UNRESERVED$$, \"g\"),\n\t\tOTHER_CHARS : new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, RESERVED$$), \"g\"),\n\t\tPCT_ENCODED : new RegExp(PCT_ENCODED$, \"g\"),\n\t\tIPV4ADDRESS : new RegExp(\"^(\" + IPV4ADDRESS$ + \")$\"),\n\t\tIPV6ADDRESS : new RegExp(\"^\\\\[?(\" + IPV6ADDRESS$ + \")\" + subexp(subexp(\"\\\\%25|\\\\%(?!\" + HEXDIG$$ + \"{2})\") + \"(\" + ZONEID$ + \")\") + \"?\\\\]?$\")  //RFC 6874, with relaxed parsing rules\n\t};\n}\n\nexport default buildExps(false);\n", "export function merge(...sets:Array<string>):string {\n\tif (sets.length > 1) {\n\t\tsets[0] = sets[0].slice(0, -1);\n\t\tconst xl = sets.length - 1;\n\t\tfor (let x = 1; x < xl; ++x) {\n\t\t\tsets[x] = sets[x].slice(1, -1);\n\t\t}\n\t\tsets[xl] = sets[xl].slice(1);\n\t\treturn sets.join('');\n\t} else {\n\t\treturn sets[0];\n\t}\n}\n\nexport function subexp(str:string):string {\n\treturn \"(?:\" + str + \")\";\n}\n\nexport function typeOf(o:any):string {\n\treturn o === undefined ? \"undefined\" : (o === null ? \"null\" : Object.prototype.toString.call(o).split(\" \").pop().split(\"]\").shift().toLowerCase());\n}\n\nexport function toUpperCase(str:string):string {\n\treturn str.toUpperCase();\n}\n\nexport function toArray(obj:any):Array<any> {\n\treturn obj !== undefined && obj !== null ? (obj instanceof Array ? obj : (typeof obj.length !== \"number\" || obj.split || obj.setInterval || obj.call ? [obj] : Array.prototype.slice.call(obj))) : [];\n}\n\n\nexport function assign(target: object, source: any): any {\n\tconst obj = target as any;\n\tif (source) {\n\t\tfor (const key in source) {\n\t\t\tobj[key] = source[key];\n\t\t}\n\t}\n\treturn obj;\n}", "'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n", "'use strict';\n\n// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nmodule.exports = function ucs2length(str) {\n  var length = 0\n    , len = str.length\n    , pos = 0\n    , value;\n  while (pos < len) {\n    length++;\n    value = str.charCodeAt(pos++);\n    if (value >= 0xD800 && value <= 0xDBFF && pos < len) {\n      // high surrogate, and there is a next character\n      value = str.charCodeAt(pos);\n      if ((value & 0xFC00) == 0xDC00) pos++; // low surrogate\n    }\n  }\n  return length;\n};\n", "'use strict';\n\n\nmodule.exports = {\n  copy: copy,\n  checkDataType: checkDataType,\n  checkDataTypes: checkDataTypes,\n  coerceToTypes: coerceToTypes,\n  toHash: toHash,\n  getProperty: getProperty,\n  escapeQuotes: escapeQuotes,\n  equal: require('fast-deep-equal'),\n  ucs2length: require('./ucs2length'),\n  varOccurences: varOccurences,\n  varReplace: varReplace,\n  schemaHasRules: schemaHasRules,\n  schemaHasRulesExcept: schemaHasRulesExcept,\n  schemaUnknownRules: schemaUnknownRules,\n  toQuotedString: toQuotedString,\n  getPathExpr: getPathExpr,\n  getPath: getPath,\n  getData: getData,\n  unescapeFragment: unescapeFragment,\n  unescapeJsonPointer: unescapeJsonPointer,\n  escapeFragment: escapeFragment,\n  escapeJsonPointer: escapeJsonPointer\n};\n\n\nfunction copy(o, to) {\n  to = to || {};\n  for (var key in o) to[key] = o[key];\n  return to;\n}\n\n\nfunction checkDataType(dataType, data, strictNumbers, negate) {\n  var EQUAL = negate ? ' !== ' : ' === '\n    , AND = negate ? ' || ' : ' && '\n    , OK = negate ? '!' : ''\n    , NOT = negate ? '' : '!';\n  switch (dataType) {\n    case 'null': return data + EQUAL + 'null';\n    case 'array': return OK + 'Array.isArray(' + data + ')';\n    case 'object': return '(' + OK + data + AND +\n                          'typeof ' + data + EQUAL + '\"object\"' + AND +\n                          NOT + 'Array.isArray(' + data + '))';\n    case 'integer': return '(typeof ' + data + EQUAL + '\"number\"' + AND +\n                           NOT + '(' + data + ' % 1)' +\n                           AND + data + EQUAL + data +\n                           (strictNumbers ? (AND + OK + 'isFinite(' + data + ')') : '') + ')';\n    case 'number': return '(typeof ' + data + EQUAL + '\"' + dataType + '\"' +\n                          (strictNumbers ? (AND + OK + 'isFinite(' + data + ')') : '') + ')';\n    default: return 'typeof ' + data + EQUAL + '\"' + dataType + '\"';\n  }\n}\n\n\nfunction checkDataTypes(dataTypes, data, strictNumbers) {\n  switch (dataTypes.length) {\n    case 1: return checkDataType(dataTypes[0], data, strictNumbers, true);\n    default:\n      var code = '';\n      var types = toHash(dataTypes);\n      if (types.array && types.object) {\n        code = types.null ? '(': '(!' + data + ' || ';\n        code += 'typeof ' + data + ' !== \"object\")';\n        delete types.null;\n        delete types.array;\n        delete types.object;\n      }\n      if (types.number) delete types.integer;\n      for (var t in types)\n        code += (code ? ' && ' : '' ) + checkDataType(t, data, strictNumbers, true);\n\n      return code;\n  }\n}\n\n\nvar COERCE_TO_TYPES = toHash([ 'string', 'number', 'integer', 'boolean', 'null' ]);\nfunction coerceToTypes(optionCoerceTypes, dataTypes) {\n  if (Array.isArray(dataTypes)) {\n    var types = [];\n    for (var i=0; i<dataTypes.length; i++) {\n      var t = dataTypes[i];\n      if (COERCE_TO_TYPES[t]) types[types.length] = t;\n      else if (optionCoerceTypes === 'array' && t === 'array') types[types.length] = t;\n    }\n    if (types.length) return types;\n  } else if (COERCE_TO_TYPES[dataTypes]) {\n    return [dataTypes];\n  } else if (optionCoerceTypes === 'array' && dataTypes === 'array') {\n    return ['array'];\n  }\n}\n\n\nfunction toHash(arr) {\n  var hash = {};\n  for (var i=0; i<arr.length; i++) hash[arr[i]] = true;\n  return hash;\n}\n\n\nvar IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i;\nvar SINGLE_QUOTE = /'|\\\\/g;\nfunction getProperty(key) {\n  return typeof key == 'number'\n          ? '[' + key + ']'\n          : IDENTIFIER.test(key)\n            ? '.' + key\n            : \"['\" + escapeQuotes(key) + \"']\";\n}\n\n\nfunction escapeQuotes(str) {\n  return str.replace(SINGLE_QUOTE, '\\\\$&')\n            .replace(/\\n/g, '\\\\n')\n            .replace(/\\r/g, '\\\\r')\n            .replace(/\\f/g, '\\\\f')\n            .replace(/\\t/g, '\\\\t');\n}\n\n\nfunction varOccurences(str, dataVar) {\n  dataVar += '[^0-9]';\n  var matches = str.match(new RegExp(dataVar, 'g'));\n  return matches ? matches.length : 0;\n}\n\n\nfunction varReplace(str, dataVar, expr) {\n  dataVar += '([^0-9])';\n  expr = expr.replace(/\\$/g, '$$$$');\n  return str.replace(new RegExp(dataVar, 'g'), expr + '$1');\n}\n\n\nfunction schemaHasRules(schema, rules) {\n  if (typeof schema == 'boolean') return !schema;\n  for (var key in schema) if (rules[key]) return true;\n}\n\n\nfunction schemaHasRulesExcept(schema, rules, exceptKeyword) {\n  if (typeof schema == 'boolean') return !schema && exceptKeyword != 'not';\n  for (var key in schema) if (key != exceptKeyword && rules[key]) return true;\n}\n\n\nfunction schemaUnknownRules(schema, rules) {\n  if (typeof schema == 'boolean') return;\n  for (var key in schema) if (!rules[key]) return key;\n}\n\n\nfunction toQuotedString(str) {\n  return '\\'' + escapeQuotes(str) + '\\'';\n}\n\n\nfunction getPathExpr(currentPath, expr, jsonPointers, isNumber) {\n  var path = jsonPointers // false by default\n              ? '\\'/\\' + ' + expr + (isNumber ? '' : '.replace(/~/g, \\'~0\\').replace(/\\\\//g, \\'~1\\')')\n              : (isNumber ? '\\'[\\' + ' + expr + ' + \\']\\'' : '\\'[\\\\\\'\\' + ' + expr + ' + \\'\\\\\\']\\'');\n  return joinPaths(currentPath, path);\n}\n\n\nfunction getPath(currentPath, prop, jsonPointers) {\n  var path = jsonPointers // false by default\n              ? toQuotedString('/' + escapeJsonPointer(prop))\n              : toQuotedString(getProperty(prop));\n  return joinPaths(currentPath, path);\n}\n\n\nvar JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/;\nvar RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, lvl, paths) {\n  var up, jsonPointer, data, matches;\n  if ($data === '') return 'rootData';\n  if ($data[0] == '/') {\n    if (!JSON_POINTER.test($data)) throw new Error('Invalid JSON-pointer: ' + $data);\n    jsonPointer = $data;\n    data = 'rootData';\n  } else {\n    matches = $data.match(RELATIVE_JSON_POINTER);\n    if (!matches) throw new Error('Invalid JSON-pointer: ' + $data);\n    up = +matches[1];\n    jsonPointer = matches[2];\n    if (jsonPointer == '#') {\n      if (up >= lvl) throw new Error('Cannot access property/index ' + up + ' levels up, current level is ' + lvl);\n      return paths[lvl - up];\n    }\n\n    if (up > lvl) throw new Error('Cannot access data ' + up + ' levels up, current level is ' + lvl);\n    data = 'data' + ((lvl - up) || '');\n    if (!jsonPointer) return data;\n  }\n\n  var expr = data;\n  var segments = jsonPointer.split('/');\n  for (var i=0; i<segments.length; i++) {\n    var segment = segments[i];\n    if (segment) {\n      data += getProperty(unescapeJsonPointer(segment));\n      expr += ' && ' + data;\n    }\n  }\n  return expr;\n}\n\n\nfunction joinPaths (a, b) {\n  if (a == '\"\"') return b;\n  return (a + ' + ' + b).replace(/([^\\\\])' \\+ '/g, '$1');\n}\n\n\nfunction unescapeFragment(str) {\n  return unescapeJsonPointer(decodeURIComponent(str));\n}\n\n\nfunction escapeFragment(str) {\n  return encodeURIComponent(escapeJsonPointer(str));\n}\n\n\nfunction escapeJsonPointer(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n\n\nfunction unescapeJsonPointer(str) {\n  return str.replace(/~1/g, '/').replace(/~0/g, '~');\n}\n", "'use strict';\n\nvar util = require('./util');\n\nmodule.exports = SchemaObject;\n\nfunction SchemaObject(obj) {\n  util.copy(obj, this);\n}\n", "'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n", "'use strict';\n\nvar URI = require('uri-js')\n  , equal = require('fast-deep-equal')\n  , util = require('./util')\n  , SchemaObject = require('./schema_obj')\n  , traverse = require('json-schema-traverse');\n\nmodule.exports = resolve;\n\nresolve.normalizeId = normalizeId;\nresolve.fullPath = getFullPath;\nresolve.url = resolveUrl;\nresolve.ids = resolveIds;\nresolve.inlineRef = inlineRef;\nresolve.schema = resolveSchema;\n\n/**\n * [resolve and compile the references ($ref)]\n * @this   Ajv\n * @param  {Function} compile reference to schema compilation funciton (localCompile)\n * @param  {Object} root object with information about the root schema for the current schema\n * @param  {String} ref reference to resolve\n * @return {Object|Function} schema object (if the schema can be inlined) or validation function\n */\nfunction resolve(compile, root, ref) {\n  /* jshint validthis: true */\n  var refVal = this._refs[ref];\n  if (typeof refVal == 'string') {\n    if (this._refs[refVal]) refVal = this._refs[refVal];\n    else return resolve.call(this, compile, root, refVal);\n  }\n\n  refVal = refVal || this._schemas[ref];\n  if (refVal instanceof SchemaObject) {\n    return inlineRef(refVal.schema, this._opts.inlineRefs)\n            ? refVal.schema\n            : refVal.validate || this._compile(refVal);\n  }\n\n  var res = resolveSchema.call(this, root, ref);\n  var schema, v, baseId;\n  if (res) {\n    schema = res.schema;\n    root = res.root;\n    baseId = res.baseId;\n  }\n\n  if (schema instanceof SchemaObject) {\n    v = schema.validate || compile.call(this, schema.schema, root, undefined, baseId);\n  } else if (schema !== undefined) {\n    v = inlineRef(schema, this._opts.inlineRefs)\n        ? schema\n        : compile.call(this, schema, root, undefined, baseId);\n  }\n\n  return v;\n}\n\n\n/**\n * Resolve schema, its root and baseId\n * @this Ajv\n * @param  {Object} root root object with properties schema, refVal, refs\n * @param  {String} ref  reference to resolve\n * @return {Object} object with properties schema, root, baseId\n */\nfunction resolveSchema(root, ref) {\n  /* jshint validthis: true */\n  var p = URI.parse(ref)\n    , refPath = _getFullPath(p)\n    , baseId = getFullPath(this._getId(root.schema));\n  if (Object.keys(root.schema).length === 0 || refPath !== baseId) {\n    var id = normalizeId(refPath);\n    var refVal = this._refs[id];\n    if (typeof refVal == 'string') {\n      return resolveRecursive.call(this, root, refVal, p);\n    } else if (refVal instanceof SchemaObject) {\n      if (!refVal.validate) this._compile(refVal);\n      root = refVal;\n    } else {\n      refVal = this._schemas[id];\n      if (refVal instanceof SchemaObject) {\n        if (!refVal.validate) this._compile(refVal);\n        if (id == normalizeId(ref))\n          return { schema: refVal, root: root, baseId: baseId };\n        root = refVal;\n      } else {\n        return;\n      }\n    }\n    if (!root.schema) return;\n    baseId = getFullPath(this._getId(root.schema));\n  }\n  return getJsonPointer.call(this, p, baseId, root.schema, root);\n}\n\n\n/* @this Ajv */\nfunction resolveRecursive(root, ref, parsedRef) {\n  /* jshint validthis: true */\n  var res = resolveSchema.call(this, root, ref);\n  if (res) {\n    var schema = res.schema;\n    var baseId = res.baseId;\n    root = res.root;\n    var id = this._getId(schema);\n    if (id) baseId = resolveUrl(baseId, id);\n    return getJsonPointer.call(this, parsedRef, baseId, schema, root);\n  }\n}\n\n\nvar PREVENT_SCOPE_CHANGE = util.toHash(['properties', 'patternProperties', 'enum', 'dependencies', 'definitions']);\n/* @this Ajv */\nfunction getJsonPointer(parsedRef, baseId, schema, root) {\n  /* jshint validthis: true */\n  parsedRef.fragment = parsedRef.fragment || '';\n  if (parsedRef.fragment.slice(0,1) != '/') return;\n  var parts = parsedRef.fragment.split('/');\n\n  for (var i = 1; i < parts.length; i++) {\n    var part = parts[i];\n    if (part) {\n      part = util.unescapeFragment(part);\n      schema = schema[part];\n      if (schema === undefined) break;\n      var id;\n      if (!PREVENT_SCOPE_CHANGE[part]) {\n        id = this._getId(schema);\n        if (id) baseId = resolveUrl(baseId, id);\n        if (schema.$ref) {\n          var $ref = resolveUrl(baseId, schema.$ref);\n          var res = resolveSchema.call(this, root, $ref);\n          if (res) {\n            schema = res.schema;\n            root = res.root;\n            baseId = res.baseId;\n          }\n        }\n      }\n    }\n  }\n  if (schema !== undefined && schema !== root.schema)\n    return { schema: schema, root: root, baseId: baseId };\n}\n\n\nvar SIMPLE_INLINED = util.toHash([\n  'type', 'format', 'pattern',\n  'maxLength', 'minLength',\n  'maxProperties', 'minProperties',\n  'maxItems', 'minItems',\n  'maximum', 'minimum',\n  'uniqueItems', 'multipleOf',\n  'required', 'enum'\n]);\nfunction inlineRef(schema, limit) {\n  if (limit === false) return false;\n  if (limit === undefined || limit === true) return checkNoRef(schema);\n  else if (limit) return countKeys(schema) <= limit;\n}\n\n\nfunction checkNoRef(schema) {\n  var item;\n  if (Array.isArray(schema)) {\n    for (var i=0; i<schema.length; i++) {\n      item = schema[i];\n      if (typeof item == 'object' && !checkNoRef(item)) return false;\n    }\n  } else {\n    for (var key in schema) {\n      if (key == '$ref') return false;\n      item = schema[key];\n      if (typeof item == 'object' && !checkNoRef(item)) return false;\n    }\n  }\n  return true;\n}\n\n\nfunction countKeys(schema) {\n  var count = 0, item;\n  if (Array.isArray(schema)) {\n    for (var i=0; i<schema.length; i++) {\n      item = schema[i];\n      if (typeof item == 'object') count += countKeys(item);\n      if (count == Infinity) return Infinity;\n    }\n  } else {\n    for (var key in schema) {\n      if (key == '$ref') return Infinity;\n      if (SIMPLE_INLINED[key]) {\n        count++;\n      } else {\n        item = schema[key];\n        if (typeof item == 'object') count += countKeys(item) + 1;\n        if (count == Infinity) return Infinity;\n      }\n    }\n  }\n  return count;\n}\n\n\nfunction getFullPath(id, normalize) {\n  if (normalize !== false) id = normalizeId(id);\n  var p = URI.parse(id);\n  return _getFullPath(p);\n}\n\n\nfunction _getFullPath(p) {\n  return URI.serialize(p).split('#')[0] + '#';\n}\n\n\nvar TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n  return id ? id.replace(TRAILING_SLASH_HASH, '') : '';\n}\n\n\nfunction resolveUrl(baseId, id) {\n  id = normalizeId(id);\n  return URI.resolve(baseId, id);\n}\n\n\n/* @this Ajv */\nfunction resolveIds(schema) {\n  var schemaId = normalizeId(this._getId(schema));\n  var baseIds = {'': schemaId};\n  var fullPaths = {'': getFullPath(schemaId, false)};\n  var localRefs = {};\n  var self = this;\n\n  traverse(schema, {allKeys: true}, function(sch, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n    if (jsonPtr === '') return;\n    var id = self._getId(sch);\n    var baseId = baseIds[parentJsonPtr];\n    var fullPath = fullPaths[parentJsonPtr] + '/' + parentKeyword;\n    if (keyIndex !== undefined)\n      fullPath += '/' + (typeof keyIndex == 'number' ? keyIndex : util.escapeFragment(keyIndex));\n\n    if (typeof id == 'string') {\n      id = baseId = normalizeId(baseId ? URI.resolve(baseId, id) : id);\n\n      var refVal = self._refs[id];\n      if (typeof refVal == 'string') refVal = self._refs[refVal];\n      if (refVal && refVal.schema) {\n        if (!equal(sch, refVal.schema))\n          throw new Error('id \"' + id + '\" resolves to more than one schema');\n      } else if (id != normalizeId(fullPath)) {\n        if (id[0] == '#') {\n          if (localRefs[id] && !equal(sch, localRefs[id]))\n            throw new Error('id \"' + id + '\" resolves to more than one schema');\n          localRefs[id] = sch;\n        } else {\n          self._refs[id] = fullPath;\n        }\n      }\n    }\n    baseIds[jsonPtr] = baseId;\n    fullPaths[jsonPtr] = fullPath;\n  });\n\n  return localRefs;\n}\n", "'use strict';\n\nvar resolve = require('./resolve');\n\nmodule.exports = {\n  Validation: errorSubclass(ValidationError),\n  MissingRef: errorSubclass(MissingRefError)\n};\n\n\nfunction ValidationError(errors) {\n  this.message = 'validation failed';\n  this.errors = errors;\n  this.ajv = this.validation = true;\n}\n\n\nMissingRefError.message = function (baseId, ref) {\n  return 'can\\'t resolve reference ' + ref + ' from id ' + baseId;\n};\n\n\nfunction MissingRefError(baseId, ref, message) {\n  this.message = message || MissingRefError.message(baseId, ref);\n  this.missingRef = resolve.url(baseId, ref);\n  this.missingSchema = resolve.normalizeId(resolve.fullPath(this.missingRef));\n}\n\n\nfunction errorSubclass(Subclass) {\n  Subclass.prototype = Object.create(Error.prototype);\n  Subclass.prototype.constructor = Subclass;\n  return Subclass;\n}\n", "'use strict';\n\nmodule.exports = function (data, opts) {\n    if (!opts) opts = {};\n    if (typeof opts === 'function') opts = { cmp: opts };\n    var cycles = (typeof opts.cycles === 'boolean') ? opts.cycles : false;\n\n    var cmp = opts.cmp && (function (f) {\n        return function (node) {\n            return function (a, b) {\n                var aobj = { key: a, value: node[a] };\n                var bobj = { key: b, value: node[b] };\n                return f(aobj, bobj);\n            };\n        };\n    })(opts.cmp);\n\n    var seen = [];\n    return (function stringify (node) {\n        if (node && node.toJSON && typeof node.toJSON === 'function') {\n            node = node.toJSON();\n        }\n\n        if (node === undefined) return;\n        if (typeof node == 'number') return isFinite(node) ? '' + node : 'null';\n        if (typeof node !== 'object') return JSON.stringify(node);\n\n        var i, out;\n        if (Array.isArray(node)) {\n            out = '[';\n            for (i = 0; i < node.length; i++) {\n                if (i) out += ',';\n                out += stringify(node[i]) || 'null';\n            }\n            return out + ']';\n        }\n\n        if (node === null) return 'null';\n\n        if (seen.indexOf(node) !== -1) {\n            if (cycles) return JSON.stringify('__cycle__');\n            throw new TypeError('Converting circular structure to JSON');\n        }\n\n        var seenIndex = seen.push(node) - 1;\n        var keys = Object.keys(node).sort(cmp && cmp(node));\n        out = '';\n        for (i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var value = stringify(node[key]);\n\n            if (!value) continue;\n            if (out) out += ',';\n            out += JSON.stringify(key) + ':' + value;\n        }\n        seen.splice(seenIndex, 1);\n        return '{' + out + '}';\n    })(data);\n};\n", "'use strict';\nmodule.exports = function generate_validate(it, $keyword, $ruleType) {\n  var out = '';\n  var $async = it.schema.$async === true,\n    $refKeywords = it.util.schemaHasRulesExcept(it.schema, it.RULES.all, '$ref'),\n    $id = it.self._getId(it.schema);\n  if (it.opts.strictKeywords) {\n    var $unknownKwd = it.util.schemaUnknownRules(it.schema, it.RULES.keywords);\n    if ($unknownKwd) {\n      var $keywordsMsg = 'unknown keyword: ' + $unknownKwd;\n      if (it.opts.strictKeywords === 'log') it.logger.warn($keywordsMsg);\n      else throw new Error($keywordsMsg);\n    }\n  }\n  if (it.isTop) {\n    out += ' var validate = ';\n    if ($async) {\n      it.async = true;\n      out += 'async ';\n    }\n    out += 'function(data, dataPath, parentData, parentDataProperty, rootData) { \\'use strict\\'; ';\n    if ($id && (it.opts.sourceCode || it.opts.processCode)) {\n      out += ' ' + ('/\\*# sourceURL=' + $id + ' */') + ' ';\n    }\n  }\n  if (typeof it.schema == 'boolean' || !($refKeywords || it.schema.$ref)) {\n    var $keyword = 'false schema';\n    var $lvl = it.level;\n    var $dataLvl = it.dataLevel;\n    var $schema = it.schema[$keyword];\n    var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n    var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n    var $breakOnError = !it.opts.allErrors;\n    var $errorKeyword;\n    var $data = 'data' + ($dataLvl || '');\n    var $valid = 'valid' + $lvl;\n    if (it.schema === false) {\n      if (it.isTop) {\n        $breakOnError = true;\n      } else {\n        out += ' var ' + ($valid) + ' = false; ';\n      }\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = ''; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ($errorKeyword || 'false schema') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'boolean schema is false\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) {\n        /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError([' + (__err) + ']); ';\n        } else {\n          out += ' validate.errors = [' + (__err) + ']; return false; ';\n        }\n      } else {\n        out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      }\n    } else {\n      if (it.isTop) {\n        if ($async) {\n          out += ' return data; ';\n        } else {\n          out += ' validate.errors = null; return true; ';\n        }\n      } else {\n        out += ' var ' + ($valid) + ' = true; ';\n      }\n    }\n    if (it.isTop) {\n      out += ' }; return validate; ';\n    }\n    return out;\n  }\n  if (it.isTop) {\n    var $top = it.isTop,\n      $lvl = it.level = 0,\n      $dataLvl = it.dataLevel = 0,\n      $data = 'data';\n    it.rootId = it.resolve.fullPath(it.self._getId(it.root.schema));\n    it.baseId = it.baseId || it.rootId;\n    delete it.isTop;\n    it.dataPathArr = [\"\"];\n    if (it.schema.default !== undefined && it.opts.useDefaults && it.opts.strictDefaults) {\n      var $defaultMsg = 'default is ignored in the schema root';\n      if (it.opts.strictDefaults === 'log') it.logger.warn($defaultMsg);\n      else throw new Error($defaultMsg);\n    }\n    out += ' var vErrors = null; ';\n    out += ' var errors = 0;     ';\n    out += ' if (rootData === undefined) rootData = data; ';\n  } else {\n    var $lvl = it.level,\n      $dataLvl = it.dataLevel,\n      $data = 'data' + ($dataLvl || '');\n    if ($id) it.baseId = it.resolve.url(it.baseId, $id);\n    if ($async && !it.async) throw new Error('async schema in sync schema');\n    out += ' var errs_' + ($lvl) + ' = errors;';\n  }\n  var $valid = 'valid' + $lvl,\n    $breakOnError = !it.opts.allErrors,\n    $closingBraces1 = '',\n    $closingBraces2 = '';\n  var $errorKeyword;\n  var $typeSchema = it.schema.type,\n    $typeIsArray = Array.isArray($typeSchema);\n  if ($typeSchema && it.opts.nullable && it.schema.nullable === true) {\n    if ($typeIsArray) {\n      if ($typeSchema.indexOf('null') == -1) $typeSchema = $typeSchema.concat('null');\n    } else if ($typeSchema != 'null') {\n      $typeSchema = [$typeSchema, 'null'];\n      $typeIsArray = true;\n    }\n  }\n  if ($typeIsArray && $typeSchema.length == 1) {\n    $typeSchema = $typeSchema[0];\n    $typeIsArray = false;\n  }\n  if (it.schema.$ref && $refKeywords) {\n    if (it.opts.extendRefs == 'fail') {\n      throw new Error('$ref: validation keywords used in schema at path \"' + it.errSchemaPath + '\" (see option extendRefs)');\n    } else if (it.opts.extendRefs !== true) {\n      $refKeywords = false;\n      it.logger.warn('$ref: keywords ignored in schema at path \"' + it.errSchemaPath + '\"');\n    }\n  }\n  if (it.schema.$comment && it.opts.$comment) {\n    out += ' ' + (it.RULES.all.$comment.code(it, '$comment'));\n  }\n  if ($typeSchema) {\n    if (it.opts.coerceTypes) {\n      var $coerceToTypes = it.util.coerceToTypes(it.opts.coerceTypes, $typeSchema);\n    }\n    var $rulesGroup = it.RULES.types[$typeSchema];\n    if ($coerceToTypes || $typeIsArray || $rulesGroup === true || ($rulesGroup && !$shouldUseGroup($rulesGroup))) {\n      var $schemaPath = it.schemaPath + '.type',\n        $errSchemaPath = it.errSchemaPath + '/type';\n      var $schemaPath = it.schemaPath + '.type',\n        $errSchemaPath = it.errSchemaPath + '/type',\n        $method = $typeIsArray ? 'checkDataTypes' : 'checkDataType';\n      out += ' if (' + (it.util[$method]($typeSchema, $data, it.opts.strictNumbers, true)) + ') { ';\n      if ($coerceToTypes) {\n        var $dataType = 'dataType' + $lvl,\n          $coerced = 'coerced' + $lvl;\n        out += ' var ' + ($dataType) + ' = typeof ' + ($data) + '; var ' + ($coerced) + ' = undefined; ';\n        if (it.opts.coerceTypes == 'array') {\n          out += ' if (' + ($dataType) + ' == \\'object\\' && Array.isArray(' + ($data) + ') && ' + ($data) + '.length == 1) { ' + ($data) + ' = ' + ($data) + '[0]; ' + ($dataType) + ' = typeof ' + ($data) + '; if (' + (it.util.checkDataType(it.schema.type, $data, it.opts.strictNumbers)) + ') ' + ($coerced) + ' = ' + ($data) + '; } ';\n        }\n        out += ' if (' + ($coerced) + ' !== undefined) ; ';\n        var arr1 = $coerceToTypes;\n        if (arr1) {\n          var $type, $i = -1,\n            l1 = arr1.length - 1;\n          while ($i < l1) {\n            $type = arr1[$i += 1];\n            if ($type == 'string') {\n              out += ' else if (' + ($dataType) + ' == \\'number\\' || ' + ($dataType) + ' == \\'boolean\\') ' + ($coerced) + ' = \\'\\' + ' + ($data) + '; else if (' + ($data) + ' === null) ' + ($coerced) + ' = \\'\\'; ';\n            } else if ($type == 'number' || $type == 'integer') {\n              out += ' else if (' + ($dataType) + ' == \\'boolean\\' || ' + ($data) + ' === null || (' + ($dataType) + ' == \\'string\\' && ' + ($data) + ' && ' + ($data) + ' == +' + ($data) + ' ';\n              if ($type == 'integer') {\n                out += ' && !(' + ($data) + ' % 1)';\n              }\n              out += ')) ' + ($coerced) + ' = +' + ($data) + '; ';\n            } else if ($type == 'boolean') {\n              out += ' else if (' + ($data) + ' === \\'false\\' || ' + ($data) + ' === 0 || ' + ($data) + ' === null) ' + ($coerced) + ' = false; else if (' + ($data) + ' === \\'true\\' || ' + ($data) + ' === 1) ' + ($coerced) + ' = true; ';\n            } else if ($type == 'null') {\n              out += ' else if (' + ($data) + ' === \\'\\' || ' + ($data) + ' === 0 || ' + ($data) + ' === false) ' + ($coerced) + ' = null; ';\n            } else if (it.opts.coerceTypes == 'array' && $type == 'array') {\n              out += ' else if (' + ($dataType) + ' == \\'string\\' || ' + ($dataType) + ' == \\'number\\' || ' + ($dataType) + ' == \\'boolean\\' || ' + ($data) + ' == null) ' + ($coerced) + ' = [' + ($data) + ']; ';\n            }\n          }\n        }\n        out += ' else {   ';\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n          if ($typeIsArray) {\n            out += '' + ($typeSchema.join(\",\"));\n          } else {\n            out += '' + ($typeSchema);\n          }\n          out += '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should be ';\n            if ($typeIsArray) {\n              out += '' + ($typeSchema.join(\",\"));\n            } else {\n              out += '' + ($typeSchema);\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } if (' + ($coerced) + ' !== undefined) {  ';\n        var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n          $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n        out += ' ' + ($data) + ' = ' + ($coerced) + '; ';\n        if (!$dataLvl) {\n          out += 'if (' + ($parentData) + ' !== undefined)';\n        }\n        out += ' ' + ($parentData) + '[' + ($parentDataProperty) + '] = ' + ($coerced) + '; } ';\n      } else {\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n          if ($typeIsArray) {\n            out += '' + ($typeSchema.join(\",\"));\n          } else {\n            out += '' + ($typeSchema);\n          }\n          out += '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should be ';\n            if ($typeIsArray) {\n              out += '' + ($typeSchema.join(\",\"));\n            } else {\n              out += '' + ($typeSchema);\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n      }\n      out += ' } ';\n    }\n  }\n  if (it.schema.$ref && !$refKeywords) {\n    out += ' ' + (it.RULES.all.$ref.code(it, '$ref')) + ' ';\n    if ($breakOnError) {\n      out += ' } if (errors === ';\n      if ($top) {\n        out += '0';\n      } else {\n        out += 'errs_' + ($lvl);\n      }\n      out += ') { ';\n      $closingBraces2 += '}';\n    }\n  } else {\n    var arr2 = it.RULES;\n    if (arr2) {\n      var $rulesGroup, i2 = -1,\n        l2 = arr2.length - 1;\n      while (i2 < l2) {\n        $rulesGroup = arr2[i2 += 1];\n        if ($shouldUseGroup($rulesGroup)) {\n          if ($rulesGroup.type) {\n            out += ' if (' + (it.util.checkDataType($rulesGroup.type, $data, it.opts.strictNumbers)) + ') { ';\n          }\n          if (it.opts.useDefaults) {\n            if ($rulesGroup.type == 'object' && it.schema.properties) {\n              var $schema = it.schema.properties,\n                $schemaKeys = Object.keys($schema);\n              var arr3 = $schemaKeys;\n              if (arr3) {\n                var $propertyKey, i3 = -1,\n                  l3 = arr3.length - 1;\n                while (i3 < l3) {\n                  $propertyKey = arr3[i3 += 1];\n                  var $sch = $schema[$propertyKey];\n                  if ($sch.default !== undefined) {\n                    var $passData = $data + it.util.getProperty($propertyKey);\n                    if (it.compositeRule) {\n                      if (it.opts.strictDefaults) {\n                        var $defaultMsg = 'default is ignored for: ' + $passData;\n                        if (it.opts.strictDefaults === 'log') it.logger.warn($defaultMsg);\n                        else throw new Error($defaultMsg);\n                      }\n                    } else {\n                      out += ' if (' + ($passData) + ' === undefined ';\n                      if (it.opts.useDefaults == 'empty') {\n                        out += ' || ' + ($passData) + ' === null || ' + ($passData) + ' === \\'\\' ';\n                      }\n                      out += ' ) ' + ($passData) + ' = ';\n                      if (it.opts.useDefaults == 'shared') {\n                        out += ' ' + (it.useDefault($sch.default)) + ' ';\n                      } else {\n                        out += ' ' + (JSON.stringify($sch.default)) + ' ';\n                      }\n                      out += '; ';\n                    }\n                  }\n                }\n              }\n            } else if ($rulesGroup.type == 'array' && Array.isArray(it.schema.items)) {\n              var arr4 = it.schema.items;\n              if (arr4) {\n                var $sch, $i = -1,\n                  l4 = arr4.length - 1;\n                while ($i < l4) {\n                  $sch = arr4[$i += 1];\n                  if ($sch.default !== undefined) {\n                    var $passData = $data + '[' + $i + ']';\n                    if (it.compositeRule) {\n                      if (it.opts.strictDefaults) {\n                        var $defaultMsg = 'default is ignored for: ' + $passData;\n                        if (it.opts.strictDefaults === 'log') it.logger.warn($defaultMsg);\n                        else throw new Error($defaultMsg);\n                      }\n                    } else {\n                      out += ' if (' + ($passData) + ' === undefined ';\n                      if (it.opts.useDefaults == 'empty') {\n                        out += ' || ' + ($passData) + ' === null || ' + ($passData) + ' === \\'\\' ';\n                      }\n                      out += ' ) ' + ($passData) + ' = ';\n                      if (it.opts.useDefaults == 'shared') {\n                        out += ' ' + (it.useDefault($sch.default)) + ' ';\n                      } else {\n                        out += ' ' + (JSON.stringify($sch.default)) + ' ';\n                      }\n                      out += '; ';\n                    }\n                  }\n                }\n              }\n            }\n          }\n          var arr5 = $rulesGroup.rules;\n          if (arr5) {\n            var $rule, i5 = -1,\n              l5 = arr5.length - 1;\n            while (i5 < l5) {\n              $rule = arr5[i5 += 1];\n              if ($shouldUseRule($rule)) {\n                var $code = $rule.code(it, $rule.keyword, $rulesGroup.type);\n                if ($code) {\n                  out += ' ' + ($code) + ' ';\n                  if ($breakOnError) {\n                    $closingBraces1 += '}';\n                  }\n                }\n              }\n            }\n          }\n          if ($breakOnError) {\n            out += ' ' + ($closingBraces1) + ' ';\n            $closingBraces1 = '';\n          }\n          if ($rulesGroup.type) {\n            out += ' } ';\n            if ($typeSchema && $typeSchema === $rulesGroup.type && !$coerceToTypes) {\n              out += ' else { ';\n              var $schemaPath = it.schemaPath + '.type',\n                $errSchemaPath = it.errSchemaPath + '/type';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n                if ($typeIsArray) {\n                  out += '' + ($typeSchema.join(\",\"));\n                } else {\n                  out += '' + ($typeSchema);\n                }\n                out += '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'should be ';\n                  if ($typeIsArray) {\n                    out += '' + ($typeSchema.join(\",\"));\n                  } else {\n                    out += '' + ($typeSchema);\n                  }\n                  out += '\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) {\n                /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              out += ' } ';\n            }\n          }\n          if ($breakOnError) {\n            out += ' if (errors === ';\n            if ($top) {\n              out += '0';\n            } else {\n              out += 'errs_' + ($lvl);\n            }\n            out += ') { ';\n            $closingBraces2 += '}';\n          }\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces2) + ' ';\n  }\n  if ($top) {\n    if ($async) {\n      out += ' if (errors === 0) return data;           ';\n      out += ' else throw new ValidationError(vErrors); ';\n    } else {\n      out += ' validate.errors = vErrors; ';\n      out += ' return errors === 0;       ';\n    }\n    out += ' }; return validate;';\n  } else {\n    out += ' var ' + ($valid) + ' = errors === errs_' + ($lvl) + ';';\n  }\n\n  function $shouldUseGroup($rulesGroup) {\n    var rules = $rulesGroup.rules;\n    for (var i = 0; i < rules.length; i++)\n      if ($shouldUseRule(rules[i])) return true;\n  }\n\n  function $shouldUseRule($rule) {\n    return it.schema[$rule.keyword] !== undefined || ($rule.implements && $ruleImplementsSomeKeyword($rule));\n  }\n\n  function $ruleImplementsSomeKeyword($rule) {\n    var impl = $rule.implements;\n    for (var i = 0; i < impl.length; i++)\n      if (it.schema[impl[i]] !== undefined) return true;\n  }\n  return out;\n}\n", "'use strict';\n\nvar resolve = require('./resolve')\n  , util = require('./util')\n  , errorClasses = require('./error_classes')\n  , stableStringify = require('fast-json-stable-stringify');\n\nvar validateGenerator = require('../dotjs/validate');\n\n/**\n * Functions below are used inside compiled validations function\n */\n\nvar ucs2length = util.ucs2length;\nvar equal = require('fast-deep-equal');\n\n// this error is thrown by async schemas to return validation errors via exception\nvar ValidationError = errorClasses.Validation;\n\nmodule.exports = compile;\n\n\n/**\n * Compiles schema to validation function\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Object} root object with information about the root schema for this schema\n * @param  {Object} localRefs the hash of local references inside the schema (created by resolve.id), used for inline resolution\n * @param  {String} baseId base ID for IDs in the schema\n * @return {Function} validation function\n */\nfunction compile(schema, root, localRefs, baseId) {\n  /* jshint validthis: true, evil: true */\n  /* eslint no-shadow: 0 */\n  var self = this\n    , opts = this._opts\n    , refVal = [ undefined ]\n    , refs = {}\n    , patterns = []\n    , patternsHash = {}\n    , defaults = []\n    , defaultsHash = {}\n    , customRules = [];\n\n  root = root || { schema: schema, refVal: refVal, refs: refs };\n\n  var c = checkCompiling.call(this, schema, root, baseId);\n  var compilation = this._compilations[c.index];\n  if (c.compiling) return (compilation.callValidate = callValidate);\n\n  var formats = this._formats;\n  var RULES = this.RULES;\n\n  try {\n    var v = localCompile(schema, root, localRefs, baseId);\n    compilation.validate = v;\n    var cv = compilation.callValidate;\n    if (cv) {\n      cv.schema = v.schema;\n      cv.errors = null;\n      cv.refs = v.refs;\n      cv.refVal = v.refVal;\n      cv.root = v.root;\n      cv.$async = v.$async;\n      if (opts.sourceCode) cv.source = v.source;\n    }\n    return v;\n  } finally {\n    endCompiling.call(this, schema, root, baseId);\n  }\n\n  /* @this   {*} - custom context, see passContext option */\n  function callValidate() {\n    /* jshint validthis: true */\n    var validate = compilation.validate;\n    var result = validate.apply(this, arguments);\n    callValidate.errors = validate.errors;\n    return result;\n  }\n\n  function localCompile(_schema, _root, localRefs, baseId) {\n    var isRoot = !_root || (_root && _root.schema == _schema);\n    if (_root.schema != root.schema)\n      return compile.call(self, _schema, _root, localRefs, baseId);\n\n    var $async = _schema.$async === true;\n\n    var sourceCode = validateGenerator({\n      isTop: true,\n      schema: _schema,\n      isRoot: isRoot,\n      baseId: baseId,\n      root: _root,\n      schemaPath: '',\n      errSchemaPath: '#',\n      errorPath: '\"\"',\n      MissingRefError: errorClasses.MissingRef,\n      RULES: RULES,\n      validate: validateGenerator,\n      util: util,\n      resolve: resolve,\n      resolveRef: resolveRef,\n      usePattern: usePattern,\n      useDefault: useDefault,\n      useCustomRule: useCustomRule,\n      opts: opts,\n      formats: formats,\n      logger: self.logger,\n      self: self\n    });\n\n    sourceCode = vars(refVal, refValCode) + vars(patterns, patternCode)\n                   + vars(defaults, defaultCode) + vars(customRules, customRuleCode)\n                   + sourceCode;\n\n    if (opts.processCode) sourceCode = opts.processCode(sourceCode, _schema);\n    // console.log('\\n\\n\\n *** \\n', JSON.stringify(sourceCode));\n    var validate;\n    try {\n      var makeValidate = new Function(\n        'self',\n        'RULES',\n        'formats',\n        'root',\n        'refVal',\n        'defaults',\n        'customRules',\n        'equal',\n        'ucs2length',\n        'ValidationError',\n        sourceCode\n      );\n\n      validate = makeValidate(\n        self,\n        RULES,\n        formats,\n        root,\n        refVal,\n        defaults,\n        customRules,\n        equal,\n        ucs2length,\n        ValidationError\n      );\n\n      refVal[0] = validate;\n    } catch(e) {\n      self.logger.error('Error compiling schema, function code:', sourceCode);\n      throw e;\n    }\n\n    validate.schema = _schema;\n    validate.errors = null;\n    validate.refs = refs;\n    validate.refVal = refVal;\n    validate.root = isRoot ? validate : _root;\n    if ($async) validate.$async = true;\n    if (opts.sourceCode === true) {\n      validate.source = {\n        code: sourceCode,\n        patterns: patterns,\n        defaults: defaults\n      };\n    }\n\n    return validate;\n  }\n\n  function resolveRef(baseId, ref, isRoot) {\n    ref = resolve.url(baseId, ref);\n    var refIndex = refs[ref];\n    var _refVal, refCode;\n    if (refIndex !== undefined) {\n      _refVal = refVal[refIndex];\n      refCode = 'refVal[' + refIndex + ']';\n      return resolvedRef(_refVal, refCode);\n    }\n    if (!isRoot && root.refs) {\n      var rootRefId = root.refs[ref];\n      if (rootRefId !== undefined) {\n        _refVal = root.refVal[rootRefId];\n        refCode = addLocalRef(ref, _refVal);\n        return resolvedRef(_refVal, refCode);\n      }\n    }\n\n    refCode = addLocalRef(ref);\n    var v = resolve.call(self, localCompile, root, ref);\n    if (v === undefined) {\n      var localSchema = localRefs && localRefs[ref];\n      if (localSchema) {\n        v = resolve.inlineRef(localSchema, opts.inlineRefs)\n            ? localSchema\n            : compile.call(self, localSchema, root, localRefs, baseId);\n      }\n    }\n\n    if (v === undefined) {\n      removeLocalRef(ref);\n    } else {\n      replaceLocalRef(ref, v);\n      return resolvedRef(v, refCode);\n    }\n  }\n\n  function addLocalRef(ref, v) {\n    var refId = refVal.length;\n    refVal[refId] = v;\n    refs[ref] = refId;\n    return 'refVal' + refId;\n  }\n\n  function removeLocalRef(ref) {\n    delete refs[ref];\n  }\n\n  function replaceLocalRef(ref, v) {\n    var refId = refs[ref];\n    refVal[refId] = v;\n  }\n\n  function resolvedRef(refVal, code) {\n    return typeof refVal == 'object' || typeof refVal == 'boolean'\n            ? { code: code, schema: refVal, inline: true }\n            : { code: code, $async: refVal && !!refVal.$async };\n  }\n\n  function usePattern(regexStr) {\n    var index = patternsHash[regexStr];\n    if (index === undefined) {\n      index = patternsHash[regexStr] = patterns.length;\n      patterns[index] = regexStr;\n    }\n    return 'pattern' + index;\n  }\n\n  function useDefault(value) {\n    switch (typeof value) {\n      case 'boolean':\n      case 'number':\n        return '' + value;\n      case 'string':\n        return util.toQuotedString(value);\n      case 'object':\n        if (value === null) return 'null';\n        var valueStr = stableStringify(value);\n        var index = defaultsHash[valueStr];\n        if (index === undefined) {\n          index = defaultsHash[valueStr] = defaults.length;\n          defaults[index] = value;\n        }\n        return 'default' + index;\n    }\n  }\n\n  function useCustomRule(rule, schema, parentSchema, it) {\n    if (self._opts.validateSchema !== false) {\n      var deps = rule.definition.dependencies;\n      if (deps && !deps.every(function(keyword) {\n        return Object.prototype.hasOwnProperty.call(parentSchema, keyword);\n      }))\n        throw new Error('parent schema must have all required keywords: ' + deps.join(','));\n\n      var validateSchema = rule.definition.validateSchema;\n      if (validateSchema) {\n        var valid = validateSchema(schema);\n        if (!valid) {\n          var message = 'keyword schema is invalid: ' + self.errorsText(validateSchema.errors);\n          if (self._opts.validateSchema == 'log') self.logger.error(message);\n          else throw new Error(message);\n        }\n      }\n    }\n\n    var compile = rule.definition.compile\n      , inline = rule.definition.inline\n      , macro = rule.definition.macro;\n\n    var validate;\n    if (compile) {\n      validate = compile.call(self, schema, parentSchema, it);\n    } else if (macro) {\n      validate = macro.call(self, schema, parentSchema, it);\n      if (opts.validateSchema !== false) self.validateSchema(validate, true);\n    } else if (inline) {\n      validate = inline.call(self, it, rule.keyword, schema, parentSchema);\n    } else {\n      validate = rule.definition.validate;\n      if (!validate) return;\n    }\n\n    if (validate === undefined)\n      throw new Error('custom keyword \"' + rule.keyword + '\"failed to compile');\n\n    var index = customRules.length;\n    customRules[index] = validate;\n\n    return {\n      code: 'customRule' + index,\n      validate: validate\n    };\n  }\n}\n\n\n/**\n * Checks if the schema is currently compiled\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Object} object with properties \"index\" (compilation index) and \"compiling\" (boolean)\n */\nfunction checkCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var index = compIndex.call(this, schema, root, baseId);\n  if (index >= 0) return { index: index, compiling: true };\n  index = this._compilations.length;\n  this._compilations[index] = {\n    schema: schema,\n    root: root,\n    baseId: baseId\n  };\n  return { index: index, compiling: false };\n}\n\n\n/**\n * Removes the schema from the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n */\nfunction endCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var i = compIndex.call(this, schema, root, baseId);\n  if (i >= 0) this._compilations.splice(i, 1);\n}\n\n\n/**\n * Index of schema compilation in the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Integer} compilation index\n */\nfunction compIndex(schema, root, baseId) {\n  /* jshint validthis: true */\n  for (var i=0; i<this._compilations.length; i++) {\n    var c = this._compilations[i];\n    if (c.schema == schema && c.root == root && c.baseId == baseId) return i;\n  }\n  return -1;\n}\n\n\nfunction patternCode(i, patterns) {\n  return 'var pattern' + i + ' = new RegExp(' + util.toQuotedString(patterns[i]) + ');';\n}\n\n\nfunction defaultCode(i) {\n  return 'var default' + i + ' = defaults[' + i + '];';\n}\n\n\nfunction refValCode(i, refVal) {\n  return refVal[i] === undefined ? '' : 'var refVal' + i + ' = refVal[' + i + '];';\n}\n\n\nfunction customRuleCode(i) {\n  return 'var customRule' + i + ' = customRules[' + i + '];';\n}\n\n\nfunction vars(arr, statement) {\n  if (!arr.length) return '';\n  var code = '';\n  for (var i=0; i<arr.length; i++)\n    code += statement(i, arr);\n  return code;\n}\n", "'use strict';\n\n\nvar Cache = module.exports = function Cache() {\n  this._cache = {};\n};\n\n\nCache.prototype.put = function Cache_put(key, value) {\n  this._cache[key] = value;\n};\n\n\nCache.prototype.get = function Cache_get(key) {\n  return this._cache[key];\n};\n\n\nCache.prototype.del = function Cache_del(key) {\n  delete this._cache[key];\n};\n\n\nCache.prototype.clear = function Cache_clear() {\n  this._cache = {};\n};\n", "'use strict';\n\nvar util = require('./util');\n\nvar DATE = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/;\nvar DAYS = [0,31,28,31,30,31,30,31,31,30,31,30,31];\nvar TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d(?::?\\d\\d)?)?$/i;\nvar HOSTNAME = /^(?=.{1,253}\\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\\.?$/i;\nvar URI = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nvar URIREF = /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\n// uri-template: https://tools.ietf.org/html/rfc6570\nvar URITEMPLATE = /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i;\n// For the source: https://gist.github.com/dperini/729294\n// For test cases: https://mathiasbynens.be/demo/url-regex\n// @todo Delete current URL in favour of the commented out URL rule when this issue is fixed https://github.com/eslint/eslint/issues/7983.\n// var URL = /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u{00a1}-\\u{ffff}0-9]+-)*[a-z\\u{00a1}-\\u{ffff}0-9]+)(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}0-9]+-)*[a-z\\u{00a1}-\\u{ffff}0-9]+)*(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/iu;\nvar URL = /^(?:(?:http[s\\u017F]?|ftp):\\/\\/)(?:(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+(?::(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?@)?(?:(?!10(?:\\.[0-9]{1,3}){3})(?!127(?:\\.[0-9]{1,3}){3})(?!169\\.254(?:\\.[0-9]{1,3}){2})(?!192\\.168(?:\\.[0-9]{1,3}){2})(?!172\\.(?:1[6-9]|2[0-9]|3[01])(?:\\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-)*(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)(?:\\.(?:(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-)*(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)*(?:\\.(?:(?:[a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\\/(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?$/i;\nvar UUID = /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i;\nvar JSON_POINTER = /^(?:\\/(?:[^~/]|~0|~1)*)*$/;\nvar JSON_POINTER_URI_FRAGMENT = /^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i;\nvar RELATIVE_JSON_POINTER = /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/;\n\n\nmodule.exports = formats;\n\nfunction formats(mode) {\n  mode = mode == 'full' ? 'full' : 'fast';\n  return util.copy(formats[mode]);\n}\n\n\nformats.fast = {\n  // date: http://tools.ietf.org/html/rfc3339#section-5.6\n  date: /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/,\n  // date-time: http://tools.ietf.org/html/rfc3339#section-5.6\n  time: /^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i,\n  'date-time': /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s](?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i,\n  // uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js\n  uri: /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/)?[^\\s]*$/i,\n  'uri-reference': /^(?:(?:[a-z][a-z0-9+\\-.]*:)?\\/?\\/)?(?:[^\\\\\\s#][^\\s#]*)?(?:#[^\\\\\\s]*)?$/i,\n  'uri-template': URITEMPLATE,\n  url: URL,\n  // email (sources from jsen validator):\n  // http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363\n  // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'willful violation')\n  email: /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,\n  hostname: HOSTNAME,\n  // optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  // optimized http://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses\n  ipv6: /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,\n  regex: regex,\n  // uuid: http://tools.ietf.org/html/rfc4122\n  uuid: UUID,\n  // JSON-pointer: https://tools.ietf.org/html/rfc6901\n  // uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A\n  'json-pointer': JSON_POINTER,\n  'json-pointer-uri-fragment': JSON_POINTER_URI_FRAGMENT,\n  // relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00\n  'relative-json-pointer': RELATIVE_JSON_POINTER\n};\n\n\nformats.full = {\n  date: date,\n  time: time,\n  'date-time': date_time,\n  uri: uri,\n  'uri-reference': URIREF,\n  'uri-template': URITEMPLATE,\n  url: URL,\n  email: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,\n  hostname: HOSTNAME,\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  ipv6: /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,\n  regex: regex,\n  uuid: UUID,\n  'json-pointer': JSON_POINTER,\n  'json-pointer-uri-fragment': JSON_POINTER_URI_FRAGMENT,\n  'relative-json-pointer': RELATIVE_JSON_POINTER\n};\n\n\nfunction isLeapYear(year) {\n  // https://tools.ietf.org/html/rfc3339#appendix-C\n  return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\n\n\nfunction date(str) {\n  // full-date from http://tools.ietf.org/html/rfc3339#section-5.6\n  var matches = str.match(DATE);\n  if (!matches) return false;\n\n  var year = +matches[1];\n  var month = +matches[2];\n  var day = +matches[3];\n\n  return month >= 1 && month <= 12 && day >= 1 &&\n          day <= (month == 2 && isLeapYear(year) ? 29 : DAYS[month]);\n}\n\n\nfunction time(str, full) {\n  var matches = str.match(TIME);\n  if (!matches) return false;\n\n  var hour = matches[1];\n  var minute = matches[2];\n  var second = matches[3];\n  var timeZone = matches[5];\n  return ((hour <= 23 && minute <= 59 && second <= 59) ||\n          (hour == 23 && minute == 59 && second == 60)) &&\n         (!full || timeZone);\n}\n\n\nvar DATE_TIME_SEPARATOR = /t|\\s/i;\nfunction date_time(str) {\n  // http://tools.ietf.org/html/rfc3339#section-5.6\n  var dateTime = str.split(DATE_TIME_SEPARATOR);\n  return dateTime.length == 2 && date(dateTime[0]) && time(dateTime[1], true);\n}\n\n\nvar NOT_URI_FRAGMENT = /\\/|:/;\nfunction uri(str) {\n  // http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required \".\"\n  return NOT_URI_FRAGMENT.test(str) && URI.test(str);\n}\n\n\nvar Z_ANCHOR = /[^\\\\]\\\\Z/;\nfunction regex(str) {\n  if (Z_ANCHOR.test(str)) return false;\n  try {\n    new RegExp(str);\n    return true;\n  } catch(e) {\n    return false;\n  }\n}\n", "'use strict';\nmodule.exports = function generate_ref(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $async, $refCode;\n  if ($schema == '#' || $schema == '#/') {\n    if (it.isRoot) {\n      $async = it.async;\n      $refCode = 'validate';\n    } else {\n      $async = it.root.schema.$async === true;\n      $refCode = 'root.refVal[0]';\n    }\n  } else {\n    var $refVal = it.resolveRef(it.baseId, $schema, it.isRoot);\n    if ($refVal === undefined) {\n      var $message = it.MissingRefError.message(it.baseId, $schema);\n      if (it.opts.missingRefs == 'fail') {\n        it.logger.error($message);\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('$ref') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { ref: \\'' + (it.util.escapeQuotes($schema)) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'can\\\\\\'t resolve reference ' + (it.util.escapeQuotes($schema)) + '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: ' + (it.util.toQuotedString($schema)) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        if ($breakOnError) {\n          out += ' if (false) { ';\n        }\n      } else if (it.opts.missingRefs == 'ignore') {\n        it.logger.warn($message);\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n      } else {\n        throw new it.MissingRefError(it.baseId, $schema, $message);\n      }\n    } else if ($refVal.inline) {\n      var $it = it.util.copy(it);\n      $it.level++;\n      var $nextValid = 'valid' + $it.level;\n      $it.schema = $refVal.schema;\n      $it.schemaPath = '';\n      $it.errSchemaPath = $schema;\n      var $code = it.validate($it).replace(/validate\\.schema/g, $refVal.code);\n      out += ' ' + ($code) + ' ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n      }\n    } else {\n      $async = $refVal.$async === true || (it.async && $refVal.$async !== false);\n      $refCode = $refVal.code;\n    }\n  }\n  if ($refCode) {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    if (it.opts.passContext) {\n      out += ' ' + ($refCode) + '.call(this, ';\n    } else {\n      out += ' ' + ($refCode) + '( ';\n    }\n    out += ' ' + ($data) + ', (dataPath || \\'\\')';\n    if (it.errorPath != '\"\"') {\n      out += ' + ' + (it.errorPath);\n    }\n    var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n    out += ' , ' + ($parentData) + ' , ' + ($parentDataProperty) + ', rootData)  ';\n    var __callValidate = out;\n    out = $$outStack.pop();\n    if ($async) {\n      if (!it.async) throw new Error('async schema referenced by sync schema');\n      if ($breakOnError) {\n        out += ' var ' + ($valid) + '; ';\n      }\n      out += ' try { await ' + (__callValidate) + '; ';\n      if ($breakOnError) {\n        out += ' ' + ($valid) + ' = true; ';\n      }\n      out += ' } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ';\n      if ($breakOnError) {\n        out += ' ' + ($valid) + ' = false; ';\n      }\n      out += ' } ';\n      if ($breakOnError) {\n        out += ' if (' + ($valid) + ') { ';\n      }\n    } else {\n      out += ' if (!' + (__callValidate) + ') { if (vErrors === null) vErrors = ' + ($refCode) + '.errors; else vErrors = vErrors.concat(' + ($refCode) + '.errors); errors = vErrors.length; } ';\n      if ($breakOnError) {\n        out += ' else { ';\n      }\n    }\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_allOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $currentBaseId = $it.baseId,\n    $allSchemasEmpty = true;\n  var arr1 = $schema;\n  if (arr1) {\n    var $sch, $i = -1,\n      l1 = arr1.length - 1;\n    while ($i < l1) {\n      $sch = arr1[$i += 1];\n      if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n        $allSchemasEmpty = false;\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n        if ($breakOnError) {\n          out += ' if (' + ($nextValid) + ') { ';\n          $closingBraces += '}';\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    if ($allSchemasEmpty) {\n      out += ' if (true) { ';\n    } else {\n      out += ' ' + ($closingBraces.slice(0, -1)) + ' ';\n    }\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_anyOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $noEmptySchema = $schema.every(function($sch) {\n    return (it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all));\n  });\n  if ($noEmptySchema) {\n    var $currentBaseId = $it.baseId;\n    out += ' var ' + ($errs) + ' = errors; var ' + ($valid) + ' = false;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var arr1 = $schema;\n    if (arr1) {\n      var $sch, $i = -1,\n        l1 = arr1.length - 1;\n      while ($i < l1) {\n        $sch = arr1[$i += 1];\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n        out += ' ' + ($valid) + ' = ' + ($valid) + ' || ' + ($nextValid) + '; if (!' + ($valid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($closingBraces) + ' if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('anyOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should match some schema in anyOf\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    out += ' } else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n    if (it.opts.allErrors) {\n      out += ' } ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_comment(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $schema = it.schema[$keyword];\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $comment = it.util.toQuotedString($schema);\n  if (it.opts.$comment === true) {\n    out += ' console.log(' + ($comment) + ');';\n  } else if (typeof it.opts.$comment == 'function') {\n    out += ' self._opts.$comment(' + ($comment) + ', ' + (it.util.toQuotedString($errSchemaPath)) + ', validate.root.schema);';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_const(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!$isData) {\n    out += ' var schema' + ($lvl) + ' = validate.schema' + ($schemaPath) + ';';\n  }\n  out += 'var ' + ($valid) + ' = equal(' + ($data) + ', schema' + ($lvl) + '); if (!' + ($valid) + ') {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('const') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { allowedValue: schema' + ($lvl) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be equal to constant\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' }';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_contains(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $idx = 'i' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $currentBaseId = it.baseId,\n    $nonEmptySchema = (it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all));\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if ($nonEmptySchema) {\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($nextValid) + ' = false; for (var ' + ($idx) + ' = 0; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n    var $passData = $data + '[' + $idx + ']';\n    $it.dataPathArr[$dataNxt] = $idx;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    out += ' if (' + ($nextValid) + ') break; }  ';\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($closingBraces) + ' if (!' + ($nextValid) + ') {';\n  } else {\n    out += ' if (' + ($data) + '.length == 0) {';\n  }\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('contains') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should contain a valid item\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } else { ';\n  if ($nonEmptySchema) {\n    out += '  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n  }\n  if (it.opts.allErrors) {\n    out += ' } ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_dependencies(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $schemaDeps = {},\n    $propertyDeps = {},\n    $ownProperties = it.opts.ownProperties;\n  for ($property in $schema) {\n    if ($property == '__proto__') continue;\n    var $sch = $schema[$property];\n    var $deps = Array.isArray($sch) ? $propertyDeps : $schemaDeps;\n    $deps[$property] = $sch;\n  }\n  out += 'var ' + ($errs) + ' = errors;';\n  var $currentErrorPath = it.errorPath;\n  out += 'var missing' + ($lvl) + ';';\n  for (var $property in $propertyDeps) {\n    $deps = $propertyDeps[$property];\n    if ($deps.length) {\n      out += ' if ( ' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';\n      if ($ownProperties) {\n        out += ' && Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($property)) + '\\') ';\n      }\n      if ($breakOnError) {\n        out += ' && ( ';\n        var arr1 = $deps;\n        if (arr1) {\n          var $propertyKey, $i = -1,\n            l1 = arr1.length - 1;\n          while ($i < l1) {\n            $propertyKey = arr1[$i += 1];\n            if ($i) {\n              out += ' || ';\n            }\n            var $prop = it.util.getProperty($propertyKey),\n              $useData = $data + $prop;\n            out += ' ( ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') && (missing' + ($lvl) + ' = ' + (it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop)) + ') ) ';\n          }\n        }\n        out += ')) {  ';\n        var $propertyPath = 'missing' + $lvl,\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + ' + ' + $propertyPath;\n        }\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('dependencies') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { property: \\'' + (it.util.escapeQuotes($property)) + '\\', missingProperty: \\'' + ($missingProperty) + '\\', depsCount: ' + ($deps.length) + ', deps: \\'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \"))) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should have ';\n            if ($deps.length == 1) {\n              out += 'property ' + (it.util.escapeQuotes($deps[0]));\n            } else {\n              out += 'properties ' + (it.util.escapeQuotes($deps.join(\", \")));\n            }\n            out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n      } else {\n        out += ' ) { ';\n        var arr2 = $deps;\n        if (arr2) {\n          var $propertyKey, i2 = -1,\n            l2 = arr2.length - 1;\n          while (i2 < l2) {\n            $propertyKey = arr2[i2 += 1];\n            var $prop = it.util.getProperty($propertyKey),\n              $missingProperty = it.util.escapeQuotes($propertyKey),\n              $useData = $data + $prop;\n            if (it.opts._errorDataPathProperty) {\n              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n            }\n            out += ' if ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') {  var err =   '; /* istanbul ignore else */\n            if (it.createErrors !== false) {\n              out += ' { keyword: \\'' + ('dependencies') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { property: \\'' + (it.util.escapeQuotes($property)) + '\\', missingProperty: \\'' + ($missingProperty) + '\\', depsCount: ' + ($deps.length) + ', deps: \\'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \"))) + '\\' } ';\n              if (it.opts.messages !== false) {\n                out += ' , message: \\'should have ';\n                if ($deps.length == 1) {\n                  out += 'property ' + (it.util.escapeQuotes($deps[0]));\n                } else {\n                  out += 'properties ' + (it.util.escapeQuotes($deps.join(\", \")));\n                }\n                out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\\' ';\n              }\n              if (it.opts.verbose) {\n                out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n              }\n              out += ' } ';\n            } else {\n              out += ' {} ';\n            }\n            out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';\n          }\n        }\n      }\n      out += ' }   ';\n      if ($breakOnError) {\n        $closingBraces += '}';\n        out += ' else { ';\n      }\n    }\n  }\n  it.errorPath = $currentErrorPath;\n  var $currentBaseId = $it.baseId;\n  for (var $property in $schemaDeps) {\n    var $sch = $schemaDeps[$property];\n    if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n      out += ' ' + ($nextValid) + ' = true; if ( ' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';\n      if ($ownProperties) {\n        out += ' && Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($property)) + '\\') ';\n      }\n      out += ') { ';\n      $it.schema = $sch;\n      $it.schemaPath = $schemaPath + it.util.getProperty($property);\n      $it.errSchemaPath = $errSchemaPath + '/' + it.util.escapeFragment($property);\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' }  ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += '   ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_enum(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $i = 'i' + $lvl,\n    $vSchema = 'schema' + $lvl;\n  if (!$isData) {\n    out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + ';';\n  }\n  out += 'var ' + ($valid) + ';';\n  if ($isData) {\n    out += ' if (schema' + ($lvl) + ' === undefined) ' + ($valid) + ' = true; else if (!Array.isArray(schema' + ($lvl) + ')) ' + ($valid) + ' = false; else {';\n  }\n  out += '' + ($valid) + ' = false;for (var ' + ($i) + '=0; ' + ($i) + '<' + ($vSchema) + '.length; ' + ($i) + '++) if (equal(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + '])) { ' + ($valid) + ' = true; break; }';\n  if ($isData) {\n    out += '  }  ';\n  }\n  out += ' if (!' + ($valid) + ') {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('enum') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { allowedValues: schema' + ($lvl) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be equal to one of the allowed values\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' }';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_format(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  if (it.opts.format === false) {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n    return out;\n  }\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $unknownFormats = it.opts.unknownFormats,\n    $allowUnknown = Array.isArray($unknownFormats);\n  if ($isData) {\n    var $format = 'format' + $lvl,\n      $isObject = 'isObject' + $lvl,\n      $formatType = 'formatType' + $lvl;\n    out += ' var ' + ($format) + ' = formats[' + ($schemaValue) + ']; var ' + ($isObject) + ' = typeof ' + ($format) + ' == \\'object\\' && !(' + ($format) + ' instanceof RegExp) && ' + ($format) + '.validate; var ' + ($formatType) + ' = ' + ($isObject) + ' && ' + ($format) + '.type || \\'string\\'; if (' + ($isObject) + ') { ';\n    if (it.async) {\n      out += ' var async' + ($lvl) + ' = ' + ($format) + '.async; ';\n    }\n    out += ' ' + ($format) + ' = ' + ($format) + '.validate; } if (  ';\n    if ($isData) {\n      out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'string\\') || ';\n    }\n    out += ' (';\n    if ($unknownFormats != 'ignore') {\n      out += ' (' + ($schemaValue) + ' && !' + ($format) + ' ';\n      if ($allowUnknown) {\n        out += ' && self._opts.unknownFormats.indexOf(' + ($schemaValue) + ') == -1 ';\n      }\n      out += ') || ';\n    }\n    out += ' (' + ($format) + ' && ' + ($formatType) + ' == \\'' + ($ruleType) + '\\' && !(typeof ' + ($format) + ' == \\'function\\' ? ';\n    if (it.async) {\n      out += ' (async' + ($lvl) + ' ? await ' + ($format) + '(' + ($data) + ') : ' + ($format) + '(' + ($data) + ')) ';\n    } else {\n      out += ' ' + ($format) + '(' + ($data) + ') ';\n    }\n    out += ' : ' + ($format) + '.test(' + ($data) + '))))) {';\n  } else {\n    var $format = it.formats[$schema];\n    if (!$format) {\n      if ($unknownFormats == 'ignore') {\n        it.logger.warn('unknown format \"' + $schema + '\" ignored in schema at path \"' + it.errSchemaPath + '\"');\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n        return out;\n      } else if ($allowUnknown && $unknownFormats.indexOf($schema) >= 0) {\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n        return out;\n      } else {\n        throw new Error('unknown format \"' + $schema + '\" is used in schema at path \"' + it.errSchemaPath + '\"');\n      }\n    }\n    var $isObject = typeof $format == 'object' && !($format instanceof RegExp) && $format.validate;\n    var $formatType = $isObject && $format.type || 'string';\n    if ($isObject) {\n      var $async = $format.async === true;\n      $format = $format.validate;\n    }\n    if ($formatType != $ruleType) {\n      if ($breakOnError) {\n        out += ' if (true) { ';\n      }\n      return out;\n    }\n    if ($async) {\n      if (!it.async) throw new Error('async format in sync schema');\n      var $formatRef = 'formats' + it.util.getProperty($schema) + '.validate';\n      out += ' if (!(await ' + ($formatRef) + '(' + ($data) + '))) { ';\n    } else {\n      out += ' if (! ';\n      var $formatRef = 'formats' + it.util.getProperty($schema);\n      if ($isObject) $formatRef += '.validate';\n      if (typeof $format == 'function') {\n        out += ' ' + ($formatRef) + '(' + ($data) + ') ';\n      } else {\n        out += ' ' + ($formatRef) + '.test(' + ($data) + ') ';\n      }\n      out += ') { ';\n    }\n  }\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('format') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { format:  ';\n    if ($isData) {\n      out += '' + ($schemaValue);\n    } else {\n      out += '' + (it.util.toQuotedString($schema));\n    }\n    out += '  } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match format \"';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + (it.util.escapeQuotes($schema));\n      }\n      out += '\"\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + (it.util.toQuotedString($schema));\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_if(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $thenSch = it.schema['then'],\n    $elseSch = it.schema['else'],\n    $thenPresent = $thenSch !== undefined && (it.opts.strictKeywords ? (typeof $thenSch == 'object' && Object.keys($thenSch).length > 0) || $thenSch === false : it.util.schemaHasRules($thenSch, it.RULES.all)),\n    $elsePresent = $elseSch !== undefined && (it.opts.strictKeywords ? (typeof $elseSch == 'object' && Object.keys($elseSch).length > 0) || $elseSch === false : it.util.schemaHasRules($elseSch, it.RULES.all)),\n    $currentBaseId = $it.baseId;\n  if ($thenPresent || $elsePresent) {\n    var $ifClause;\n    $it.createErrors = false;\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($errs) + ' = errors; var ' + ($valid) + ' = true;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    out += '  ' + (it.validate($it)) + ' ';\n    $it.baseId = $currentBaseId;\n    $it.createErrors = true;\n    out += '  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; }  ';\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    if ($thenPresent) {\n      out += ' if (' + ($nextValid) + ') {  ';\n      $it.schema = it.schema['then'];\n      $it.schemaPath = it.schemaPath + '.then';\n      $it.errSchemaPath = it.errSchemaPath + '/then';\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' ' + ($valid) + ' = ' + ($nextValid) + '; ';\n      if ($thenPresent && $elsePresent) {\n        $ifClause = 'ifClause' + $lvl;\n        out += ' var ' + ($ifClause) + ' = \\'then\\'; ';\n      } else {\n        $ifClause = '\\'then\\'';\n      }\n      out += ' } ';\n      if ($elsePresent) {\n        out += ' else { ';\n      }\n    } else {\n      out += ' if (!' + ($nextValid) + ') { ';\n    }\n    if ($elsePresent) {\n      $it.schema = it.schema['else'];\n      $it.schemaPath = it.schemaPath + '.else';\n      $it.errSchemaPath = it.errSchemaPath + '/else';\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' ' + ($valid) + ' = ' + ($nextValid) + '; ';\n      if ($thenPresent && $elsePresent) {\n        $ifClause = 'ifClause' + $lvl;\n        out += ' var ' + ($ifClause) + ' = \\'else\\'; ';\n      } else {\n        $ifClause = '\\'else\\'';\n      }\n      out += ' } ';\n    }\n    out += ' if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('if') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { failingKeyword: ' + ($ifClause) + ' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should match \"\\' + ' + ($ifClause) + ' + \\'\" schema\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    out += ' }   ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_items(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $idx = 'i' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $currentBaseId = it.baseId;\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if (Array.isArray($schema)) {\n    var $additionalItems = it.schema.additionalItems;\n    if ($additionalItems === false) {\n      out += ' ' + ($valid) + ' = ' + ($data) + '.length <= ' + ($schema.length) + '; ';\n      var $currErrSchemaPath = $errSchemaPath;\n      $errSchemaPath = it.errSchemaPath + '/additionalItems';\n      out += '  if (!' + ($valid) + ') {   ';\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = ''; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ('additionalItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schema.length) + ' } ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'should NOT have more than ' + ($schema.length) + ' items\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) {\n        /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError([' + (__err) + ']); ';\n        } else {\n          out += ' validate.errors = [' + (__err) + ']; return false; ';\n        }\n      } else {\n        out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      }\n      out += ' } ';\n      $errSchemaPath = $currErrSchemaPath;\n      if ($breakOnError) {\n        $closingBraces += '}';\n        out += ' else { ';\n      }\n    }\n    var arr1 = $schema;\n    if (arr1) {\n      var $sch, $i = -1,\n        l1 = arr1.length - 1;\n      while ($i < l1) {\n        $sch = arr1[$i += 1];\n        if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n          out += ' ' + ($nextValid) + ' = true; if (' + ($data) + '.length > ' + ($i) + ') { ';\n          var $passData = $data + '[' + $i + ']';\n          $it.schema = $sch;\n          $it.schemaPath = $schemaPath + '[' + $i + ']';\n          $it.errSchemaPath = $errSchemaPath + '/' + $i;\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $i, it.opts.jsonPointers, true);\n          $it.dataPathArr[$dataNxt] = $i;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          out += ' }  ';\n          if ($breakOnError) {\n            out += ' if (' + ($nextValid) + ') { ';\n            $closingBraces += '}';\n          }\n        }\n      }\n    }\n    if (typeof $additionalItems == 'object' && (it.opts.strictKeywords ? (typeof $additionalItems == 'object' && Object.keys($additionalItems).length > 0) || $additionalItems === false : it.util.schemaHasRules($additionalItems, it.RULES.all))) {\n      $it.schema = $additionalItems;\n      $it.schemaPath = it.schemaPath + '.additionalItems';\n      $it.errSchemaPath = it.errSchemaPath + '/additionalItems';\n      out += ' ' + ($nextValid) + ' = true; if (' + ($data) + '.length > ' + ($schema.length) + ') {  for (var ' + ($idx) + ' = ' + ($schema.length) + '; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n      $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n      var $passData = $data + '[' + $idx + ']';\n      $it.dataPathArr[$dataNxt] = $idx;\n      var $code = it.validate($it);\n      $it.baseId = $currentBaseId;\n      if (it.util.varOccurences($code, $nextData) < 2) {\n        out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n      } else {\n        out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n      }\n      if ($breakOnError) {\n        out += ' if (!' + ($nextValid) + ') break; ';\n      }\n      out += ' } }  ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n  } else if ((it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all))) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += '  for (var ' + ($idx) + ' = ' + (0) + '; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n    var $passData = $data + '[' + $idx + ']';\n    $it.dataPathArr[$dataNxt] = $idx;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    if ($breakOnError) {\n      out += ' if (!' + ($nextValid) + ') break; ';\n    }\n    out += ' }';\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate__limit(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $isMax = $keyword == 'maximum',\n    $exclusiveKeyword = $isMax ? 'exclusiveMaximum' : 'exclusiveMinimum',\n    $schemaExcl = it.schema[$exclusiveKeyword],\n    $isDataExcl = it.opts.$data && $schemaExcl && $schemaExcl.$data,\n    $op = $isMax ? '<' : '>',\n    $notOp = $isMax ? '>' : '<',\n    $errorKeyword = undefined;\n  if (!($isData || typeof $schema == 'number' || $schema === undefined)) {\n    throw new Error($keyword + ' must be number');\n  }\n  if (!($isDataExcl || $schemaExcl === undefined || typeof $schemaExcl == 'number' || typeof $schemaExcl == 'boolean')) {\n    throw new Error($exclusiveKeyword + ' must be number or boolean');\n  }\n  if ($isDataExcl) {\n    var $schemaValueExcl = it.util.getData($schemaExcl.$data, $dataLvl, it.dataPathArr),\n      $exclusive = 'exclusive' + $lvl,\n      $exclType = 'exclType' + $lvl,\n      $exclIsNumber = 'exclIsNumber' + $lvl,\n      $opExpr = 'op' + $lvl,\n      $opStr = '\\' + ' + $opExpr + ' + \\'';\n    out += ' var schemaExcl' + ($lvl) + ' = ' + ($schemaValueExcl) + '; ';\n    $schemaValueExcl = 'schemaExcl' + $lvl;\n    out += ' var ' + ($exclusive) + '; var ' + ($exclType) + ' = typeof ' + ($schemaValueExcl) + '; if (' + ($exclType) + ' != \\'boolean\\' && ' + ($exclType) + ' != \\'undefined\\' && ' + ($exclType) + ' != \\'number\\') { ';\n    var $errorKeyword = $exclusiveKeyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ($errorKeyword || '_exclusiveLimit') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'' + ($exclusiveKeyword) + ' should be boolean\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } else if ( ';\n    if ($isData) {\n      out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n    }\n    out += ' ' + ($exclType) + ' == \\'number\\' ? ( (' + ($exclusive) + ' = ' + ($schemaValue) + ' === undefined || ' + ($schemaValueExcl) + ' ' + ($op) + '= ' + ($schemaValue) + ') ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaValueExcl) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) : ( (' + ($exclusive) + ' = ' + ($schemaValueExcl) + ' === true) ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaValue) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) || ' + ($data) + ' !== ' + ($data) + ') { var op' + ($lvl) + ' = ' + ($exclusive) + ' ? \\'' + ($op) + '\\' : \\'' + ($op) + '=\\'; ';\n    if ($schema === undefined) {\n      $errorKeyword = $exclusiveKeyword;\n      $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n      $schemaValue = $schemaValueExcl;\n      $isData = $isDataExcl;\n    }\n  } else {\n    var $exclIsNumber = typeof $schemaExcl == 'number',\n      $opStr = $op;\n    if ($exclIsNumber && $isData) {\n      var $opExpr = '\\'' + $opStr + '\\'';\n      out += ' if ( ';\n      if ($isData) {\n        out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n      }\n      out += ' ( ' + ($schemaValue) + ' === undefined || ' + ($schemaExcl) + ' ' + ($op) + '= ' + ($schemaValue) + ' ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaExcl) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) || ' + ($data) + ' !== ' + ($data) + ') { ';\n    } else {\n      if ($exclIsNumber && $schema === undefined) {\n        $exclusive = true;\n        $errorKeyword = $exclusiveKeyword;\n        $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n        $schemaValue = $schemaExcl;\n        $notOp += '=';\n      } else {\n        if ($exclIsNumber) $schemaValue = Math[$isMax ? 'min' : 'max']($schemaExcl, $schema);\n        if ($schemaExcl === ($exclIsNumber ? $schemaValue : true)) {\n          $exclusive = true;\n          $errorKeyword = $exclusiveKeyword;\n          $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n          $notOp += '=';\n        } else {\n          $exclusive = false;\n          $opStr += '=';\n        }\n      }\n      var $opExpr = '\\'' + $opStr + '\\'';\n      out += ' if ( ';\n      if ($isData) {\n        out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n      }\n      out += ' ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' || ' + ($data) + ' !== ' + ($data) + ') { ';\n    }\n  }\n  $errorKeyword = $errorKeyword || $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limit') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { comparison: ' + ($opExpr) + ', limit: ' + ($schemaValue) + ', exclusive: ' + ($exclusive) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be ' + ($opStr) + ' ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue);\n      } else {\n        out += '' + ($schemaValue) + '\\'';\n      }\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate__limitItems(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  var $op = $keyword == 'maxItems' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  out += ' ' + ($data) + '.length ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT have ';\n      if ($keyword == 'maxItems') {\n        out += 'more';\n      } else {\n        out += 'fewer';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' items\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate__limitLength(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  var $op = $keyword == 'maxLength' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  if (it.opts.unicode === false) {\n    out += ' ' + ($data) + '.length ';\n  } else {\n    out += ' ucs2length(' + ($data) + ') ';\n  }\n  out += ' ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitLength') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT be ';\n      if ($keyword == 'maxLength') {\n        out += 'longer';\n      } else {\n        out += 'shorter';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' characters\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate__limitProperties(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  var $op = $keyword == 'maxProperties' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  out += ' Object.keys(' + ($data) + ').length ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitProperties') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT have ';\n      if ($keyword == 'maxProperties') {\n        out += 'more';\n      } else {\n        out += 'fewer';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' properties\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_multipleOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  out += 'var division' + ($lvl) + ';if (';\n  if ($isData) {\n    out += ' ' + ($schemaValue) + ' !== undefined && ( typeof ' + ($schemaValue) + ' != \\'number\\' || ';\n  }\n  out += ' (division' + ($lvl) + ' = ' + ($data) + ' / ' + ($schemaValue) + ', ';\n  if (it.opts.multipleOfPrecision) {\n    out += ' Math.abs(Math.round(division' + ($lvl) + ') - division' + ($lvl) + ') > 1e-' + (it.opts.multipleOfPrecision) + ' ';\n  } else {\n    out += ' division' + ($lvl) + ' !== parseInt(division' + ($lvl) + ') ';\n  }\n  out += ' ) ';\n  if ($isData) {\n    out += '  )  ';\n  }\n  out += ' ) {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('multipleOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { multipleOf: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be multiple of ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue);\n      } else {\n        out += '' + ($schemaValue) + '\\'';\n      }\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_not(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  if ((it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all))) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($errs) + ' = errors;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    $it.createErrors = false;\n    var $allErrorsOption;\n    if ($it.opts.allErrors) {\n      $allErrorsOption = $it.opts.allErrors;\n      $it.opts.allErrors = false;\n    }\n    out += ' ' + (it.validate($it)) + ' ';\n    $it.createErrors = true;\n    if ($allErrorsOption) $it.opts.allErrors = $allErrorsOption;\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' if (' + ($nextValid) + ') {   ';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('not') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT be valid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n    if (it.opts.allErrors) {\n      out += ' } ';\n    }\n  } else {\n    out += '  var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('not') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT be valid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if ($breakOnError) {\n      out += ' if (false) { ';\n    }\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_oneOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $currentBaseId = $it.baseId,\n    $prevValid = 'prevValid' + $lvl,\n    $passingSchemas = 'passingSchemas' + $lvl;\n  out += 'var ' + ($errs) + ' = errors , ' + ($prevValid) + ' = false , ' + ($valid) + ' = false , ' + ($passingSchemas) + ' = null; ';\n  var $wasComposite = it.compositeRule;\n  it.compositeRule = $it.compositeRule = true;\n  var arr1 = $schema;\n  if (arr1) {\n    var $sch, $i = -1,\n      l1 = arr1.length - 1;\n    while ($i < l1) {\n      $sch = arr1[$i += 1];\n      if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n      } else {\n        out += ' var ' + ($nextValid) + ' = true; ';\n      }\n      if ($i) {\n        out += ' if (' + ($nextValid) + ' && ' + ($prevValid) + ') { ' + ($valid) + ' = false; ' + ($passingSchemas) + ' = [' + ($passingSchemas) + ', ' + ($i) + ']; } else { ';\n        $closingBraces += '}';\n      }\n      out += ' if (' + ($nextValid) + ') { ' + ($valid) + ' = ' + ($prevValid) + ' = true; ' + ($passingSchemas) + ' = ' + ($i) + '; }';\n    }\n  }\n  it.compositeRule = $it.compositeRule = $wasComposite;\n  out += '' + ($closingBraces) + 'if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('oneOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { passingSchemas: ' + ($passingSchemas) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match exactly one schema in oneOf\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError(vErrors); ';\n    } else {\n      out += ' validate.errors = vErrors; return false; ';\n    }\n  }\n  out += '} else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; }';\n  if (it.opts.allErrors) {\n    out += ' } ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_pattern(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $regexp = $isData ? '(new RegExp(' + $schemaValue + '))' : it.usePattern($schema);\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'string\\') || ';\n  }\n  out += ' !' + ($regexp) + '.test(' + ($data) + ') ) {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('pattern') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { pattern:  ';\n    if ($isData) {\n      out += '' + ($schemaValue);\n    } else {\n      out += '' + (it.util.toQuotedString($schema));\n    }\n    out += '  } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match pattern \"';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + (it.util.escapeQuotes($schema));\n      }\n      out += '\"\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + (it.util.toQuotedString($schema));\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_properties(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $key = 'key' + $lvl,\n    $idx = 'idx' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $dataProperties = 'dataProperties' + $lvl;\n  var $schemaKeys = Object.keys($schema || {}).filter(notProto),\n    $pProperties = it.schema.patternProperties || {},\n    $pPropertyKeys = Object.keys($pProperties).filter(notProto),\n    $aProperties = it.schema.additionalProperties,\n    $someProperties = $schemaKeys.length || $pPropertyKeys.length,\n    $noAdditional = $aProperties === false,\n    $additionalIsSchema = typeof $aProperties == 'object' && Object.keys($aProperties).length,\n    $removeAdditional = it.opts.removeAdditional,\n    $checkAdditional = $noAdditional || $additionalIsSchema || $removeAdditional,\n    $ownProperties = it.opts.ownProperties,\n    $currentBaseId = it.baseId;\n  var $required = it.schema.required;\n  if ($required && !(it.opts.$data && $required.$data) && $required.length < it.opts.loopRequired) {\n    var $requiredHash = it.util.toHash($required);\n  }\n\n  function notProto(p) {\n    return p !== '__proto__';\n  }\n  out += 'var ' + ($errs) + ' = errors;var ' + ($nextValid) + ' = true;';\n  if ($ownProperties) {\n    out += ' var ' + ($dataProperties) + ' = undefined;';\n  }\n  if ($checkAdditional) {\n    if ($ownProperties) {\n      out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n    } else {\n      out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n    }\n    if ($someProperties) {\n      out += ' var isAdditional' + ($lvl) + ' = !(false ';\n      if ($schemaKeys.length) {\n        if ($schemaKeys.length > 8) {\n          out += ' || validate.schema' + ($schemaPath) + '.hasOwnProperty(' + ($key) + ') ';\n        } else {\n          var arr1 = $schemaKeys;\n          if (arr1) {\n            var $propertyKey, i1 = -1,\n              l1 = arr1.length - 1;\n            while (i1 < l1) {\n              $propertyKey = arr1[i1 += 1];\n              out += ' || ' + ($key) + ' == ' + (it.util.toQuotedString($propertyKey)) + ' ';\n            }\n          }\n        }\n      }\n      if ($pPropertyKeys.length) {\n        var arr2 = $pPropertyKeys;\n        if (arr2) {\n          var $pProperty, $i = -1,\n            l2 = arr2.length - 1;\n          while ($i < l2) {\n            $pProperty = arr2[$i += 1];\n            out += ' || ' + (it.usePattern($pProperty)) + '.test(' + ($key) + ') ';\n          }\n        }\n      }\n      out += ' ); if (isAdditional' + ($lvl) + ') { ';\n    }\n    if ($removeAdditional == 'all') {\n      out += ' delete ' + ($data) + '[' + ($key) + ']; ';\n    } else {\n      var $currentErrorPath = it.errorPath;\n      var $additionalProperty = '\\' + ' + $key + ' + \\'';\n      if (it.opts._errorDataPathProperty) {\n        it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n      }\n      if ($noAdditional) {\n        if ($removeAdditional) {\n          out += ' delete ' + ($data) + '[' + ($key) + ']; ';\n        } else {\n          out += ' ' + ($nextValid) + ' = false; ';\n          var $currErrSchemaPath = $errSchemaPath;\n          $errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          var $$outStack = $$outStack || [];\n          $$outStack.push(out);\n          out = ''; /* istanbul ignore else */\n          if (it.createErrors !== false) {\n            out += ' { keyword: \\'' + ('additionalProperties') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { additionalProperty: \\'' + ($additionalProperty) + '\\' } ';\n            if (it.opts.messages !== false) {\n              out += ' , message: \\'';\n              if (it.opts._errorDataPathProperty) {\n                out += 'is an invalid additional property';\n              } else {\n                out += 'should NOT have additional properties';\n              }\n              out += '\\' ';\n            }\n            if (it.opts.verbose) {\n              out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n            }\n            out += ' } ';\n          } else {\n            out += ' {} ';\n          }\n          var __err = out;\n          out = $$outStack.pop();\n          if (!it.compositeRule && $breakOnError) {\n            /* istanbul ignore if */\n            if (it.async) {\n              out += ' throw new ValidationError([' + (__err) + ']); ';\n            } else {\n              out += ' validate.errors = [' + (__err) + ']; return false; ';\n            }\n          } else {\n            out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n          }\n          $errSchemaPath = $currErrSchemaPath;\n          if ($breakOnError) {\n            out += ' break; ';\n          }\n        }\n      } else if ($additionalIsSchema) {\n        if ($removeAdditional == 'failing') {\n          out += ' var ' + ($errs) + ' = errors;  ';\n          var $wasComposite = it.compositeRule;\n          it.compositeRule = $it.compositeRule = true;\n          $it.schema = $aProperties;\n          $it.schemaPath = it.schemaPath + '.additionalProperties';\n          $it.errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          out += ' if (!' + ($nextValid) + ') { errors = ' + ($errs) + '; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete ' + ($data) + '[' + ($key) + ']; }  ';\n          it.compositeRule = $it.compositeRule = $wasComposite;\n        } else {\n          $it.schema = $aProperties;\n          $it.schemaPath = it.schemaPath + '.additionalProperties';\n          $it.errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          if ($breakOnError) {\n            out += ' if (!' + ($nextValid) + ') break; ';\n          }\n        }\n      }\n      it.errorPath = $currentErrorPath;\n    }\n    if ($someProperties) {\n      out += ' } ';\n    }\n    out += ' }  ';\n    if ($breakOnError) {\n      out += ' if (' + ($nextValid) + ') { ';\n      $closingBraces += '}';\n    }\n  }\n  var $useDefaults = it.opts.useDefaults && !it.compositeRule;\n  if ($schemaKeys.length) {\n    var arr3 = $schemaKeys;\n    if (arr3) {\n      var $propertyKey, i3 = -1,\n        l3 = arr3.length - 1;\n      while (i3 < l3) {\n        $propertyKey = arr3[i3 += 1];\n        var $sch = $schema[$propertyKey];\n        if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n          var $prop = it.util.getProperty($propertyKey),\n            $passData = $data + $prop,\n            $hasDefault = $useDefaults && $sch.default !== undefined;\n          $it.schema = $sch;\n          $it.schemaPath = $schemaPath + $prop;\n          $it.errSchemaPath = $errSchemaPath + '/' + it.util.escapeFragment($propertyKey);\n          $it.errorPath = it.util.getPath(it.errorPath, $propertyKey, it.opts.jsonPointers);\n          $it.dataPathArr[$dataNxt] = it.util.toQuotedString($propertyKey);\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            $code = it.util.varReplace($code, $nextData, $passData);\n            var $useData = $passData;\n          } else {\n            var $useData = $nextData;\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ';\n          }\n          if ($hasDefault) {\n            out += ' ' + ($code) + ' ';\n          } else {\n            if ($requiredHash && $requiredHash[$propertyKey]) {\n              out += ' if ( ' + ($useData) + ' === undefined ';\n              if ($ownProperties) {\n                out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n              }\n              out += ') { ' + ($nextValid) + ' = false; ';\n              var $currentErrorPath = it.errorPath,\n                $currErrSchemaPath = $errSchemaPath,\n                $missingProperty = it.util.escapeQuotes($propertyKey);\n              if (it.opts._errorDataPathProperty) {\n                it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n              }\n              $errSchemaPath = it.errSchemaPath + '/required';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'';\n                  if (it.opts._errorDataPathProperty) {\n                    out += 'is a required property';\n                  } else {\n                    out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n                  }\n                  out += '\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) {\n                /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              $errSchemaPath = $currErrSchemaPath;\n              it.errorPath = $currentErrorPath;\n              out += ' } else { ';\n            } else {\n              if ($breakOnError) {\n                out += ' if ( ' + ($useData) + ' === undefined ';\n                if ($ownProperties) {\n                  out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n                }\n                out += ') { ' + ($nextValid) + ' = true; } else { ';\n              } else {\n                out += ' if (' + ($useData) + ' !== undefined ';\n                if ($ownProperties) {\n                  out += ' &&   Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n                }\n                out += ' ) { ';\n              }\n            }\n            out += ' ' + ($code) + ' } ';\n          }\n        }\n        if ($breakOnError) {\n          out += ' if (' + ($nextValid) + ') { ';\n          $closingBraces += '}';\n        }\n      }\n    }\n  }\n  if ($pPropertyKeys.length) {\n    var arr4 = $pPropertyKeys;\n    if (arr4) {\n      var $pProperty, i4 = -1,\n        l4 = arr4.length - 1;\n      while (i4 < l4) {\n        $pProperty = arr4[i4 += 1];\n        var $sch = $pProperties[$pProperty];\n        if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n          $it.schema = $sch;\n          $it.schemaPath = it.schemaPath + '.patternProperties' + it.util.getProperty($pProperty);\n          $it.errSchemaPath = it.errSchemaPath + '/patternProperties/' + it.util.escapeFragment($pProperty);\n          if ($ownProperties) {\n            out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n          } else {\n            out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n          }\n          out += ' if (' + (it.usePattern($pProperty)) + '.test(' + ($key) + ')) { ';\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          if ($breakOnError) {\n            out += ' if (!' + ($nextValid) + ') break; ';\n          }\n          out += ' } ';\n          if ($breakOnError) {\n            out += ' else ' + ($nextValid) + ' = true; ';\n          }\n          out += ' }  ';\n          if ($breakOnError) {\n            out += ' if (' + ($nextValid) + ') { ';\n            $closingBraces += '}';\n          }\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_propertyNames(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  out += 'var ' + ($errs) + ' = errors;';\n  if ((it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all))) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    var $key = 'key' + $lvl,\n      $idx = 'idx' + $lvl,\n      $i = 'i' + $lvl,\n      $invalidName = '\\' + ' + $key + ' + \\'',\n      $dataNxt = $it.dataLevel = it.dataLevel + 1,\n      $nextData = 'data' + $dataNxt,\n      $dataProperties = 'dataProperties' + $lvl,\n      $ownProperties = it.opts.ownProperties,\n      $currentBaseId = it.baseId;\n    if ($ownProperties) {\n      out += ' var ' + ($dataProperties) + ' = undefined; ';\n    }\n    if ($ownProperties) {\n      out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n    } else {\n      out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n    }\n    out += ' var startErrs' + ($lvl) + ' = errors; ';\n    var $passData = $key;\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' if (!' + ($nextValid) + ') { for (var ' + ($i) + '=startErrs' + ($lvl) + '; ' + ($i) + '<errors; ' + ($i) + '++) { vErrors[' + ($i) + '].propertyName = ' + ($key) + '; }   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('propertyNames') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { propertyName: \\'' + ($invalidName) + '\\' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'property name \\\\\\'' + ($invalidName) + '\\\\\\' is invalid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    if ($breakOnError) {\n      out += ' break; ';\n    }\n    out += ' } }';\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_required(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $vSchema = 'schema' + $lvl;\n  if (!$isData) {\n    if ($schema.length < it.opts.loopRequired && it.schema.properties && Object.keys(it.schema.properties).length) {\n      var $required = [];\n      var arr1 = $schema;\n      if (arr1) {\n        var $property, i1 = -1,\n          l1 = arr1.length - 1;\n        while (i1 < l1) {\n          $property = arr1[i1 += 1];\n          var $propertySch = it.schema.properties[$property];\n          if (!($propertySch && (it.opts.strictKeywords ? (typeof $propertySch == 'object' && Object.keys($propertySch).length > 0) || $propertySch === false : it.util.schemaHasRules($propertySch, it.RULES.all)))) {\n            $required[$required.length] = $property;\n          }\n        }\n      }\n    } else {\n      var $required = $schema;\n    }\n  }\n  if ($isData || $required.length) {\n    var $currentErrorPath = it.errorPath,\n      $loopRequired = $isData || $required.length >= it.opts.loopRequired,\n      $ownProperties = it.opts.ownProperties;\n    if ($breakOnError) {\n      out += ' var missing' + ($lvl) + '; ';\n      if ($loopRequired) {\n        if (!$isData) {\n          out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + '; ';\n        }\n        var $i = 'i' + $lvl,\n          $propertyPath = 'schema' + $lvl + '[' + $i + ']',\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);\n        }\n        out += ' var ' + ($valid) + ' = true; ';\n        if ($isData) {\n          out += ' if (schema' + ($lvl) + ' === undefined) ' + ($valid) + ' = true; else if (!Array.isArray(schema' + ($lvl) + ')) ' + ($valid) + ' = false; else {';\n        }\n        out += ' for (var ' + ($i) + ' = 0; ' + ($i) + ' < ' + ($vSchema) + '.length; ' + ($i) + '++) { ' + ($valid) + ' = ' + ($data) + '[' + ($vSchema) + '[' + ($i) + ']] !== undefined ';\n        if ($ownProperties) {\n          out += ' &&   Object.prototype.hasOwnProperty.call(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + ']) ';\n        }\n        out += '; if (!' + ($valid) + ') break; } ';\n        if ($isData) {\n          out += '  }  ';\n        }\n        out += '  if (!' + ($valid) + ') {   ';\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } else { ';\n      } else {\n        out += ' if ( ';\n        var arr2 = $required;\n        if (arr2) {\n          var $propertyKey, $i = -1,\n            l2 = arr2.length - 1;\n          while ($i < l2) {\n            $propertyKey = arr2[$i += 1];\n            if ($i) {\n              out += ' || ';\n            }\n            var $prop = it.util.getProperty($propertyKey),\n              $useData = $data + $prop;\n            out += ' ( ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') && (missing' + ($lvl) + ' = ' + (it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop)) + ') ) ';\n          }\n        }\n        out += ') {  ';\n        var $propertyPath = 'missing' + $lvl,\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + ' + ' + $propertyPath;\n        }\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } else { ';\n      }\n    } else {\n      if ($loopRequired) {\n        if (!$isData) {\n          out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + '; ';\n        }\n        var $i = 'i' + $lvl,\n          $propertyPath = 'schema' + $lvl + '[' + $i + ']',\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);\n        }\n        if ($isData) {\n          out += ' if (' + ($vSchema) + ' && !Array.isArray(' + ($vSchema) + ')) {  var err =   '; /* istanbul ignore else */\n          if (it.createErrors !== false) {\n            out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n            if (it.opts.messages !== false) {\n              out += ' , message: \\'';\n              if (it.opts._errorDataPathProperty) {\n                out += 'is a required property';\n              } else {\n                out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n              }\n              out += '\\' ';\n            }\n            if (it.opts.verbose) {\n              out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n            }\n            out += ' } ';\n          } else {\n            out += ' {} ';\n          }\n          out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if (' + ($vSchema) + ' !== undefined) { ';\n        }\n        out += ' for (var ' + ($i) + ' = 0; ' + ($i) + ' < ' + ($vSchema) + '.length; ' + ($i) + '++) { if (' + ($data) + '[' + ($vSchema) + '[' + ($i) + ']] === undefined ';\n        if ($ownProperties) {\n          out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + ']) ';\n        }\n        out += ') {  var err =   '; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ';\n        if ($isData) {\n          out += '  }  ';\n        }\n      } else {\n        var arr3 = $required;\n        if (arr3) {\n          var $propertyKey, i3 = -1,\n            l3 = arr3.length - 1;\n          while (i3 < l3) {\n            $propertyKey = arr3[i3 += 1];\n            var $prop = it.util.getProperty($propertyKey),\n              $missingProperty = it.util.escapeQuotes($propertyKey),\n              $useData = $data + $prop;\n            if (it.opts._errorDataPathProperty) {\n              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n            }\n            out += ' if ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') {  var err =   '; /* istanbul ignore else */\n            if (it.createErrors !== false) {\n              out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n              if (it.opts.messages !== false) {\n                out += ' , message: \\'';\n                if (it.opts._errorDataPathProperty) {\n                  out += 'is a required property';\n                } else {\n                  out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n                }\n                out += '\\' ';\n              }\n              if (it.opts.verbose) {\n                out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n              }\n              out += ' } ';\n            } else {\n              out += ' {} ';\n            }\n            out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';\n          }\n        }\n      }\n    }\n    it.errorPath = $currentErrorPath;\n  } else if ($breakOnError) {\n    out += ' if (true) {';\n  }\n  return out;\n}\n", "'use strict';\nmodule.exports = function generate_uniqueItems(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (($schema || $isData) && it.opts.uniqueItems !== false) {\n    if ($isData) {\n      out += ' var ' + ($valid) + '; if (' + ($schemaValue) + ' === false || ' + ($schemaValue) + ' === undefined) ' + ($valid) + ' = true; else if (typeof ' + ($schemaValue) + ' != \\'boolean\\') ' + ($valid) + ' = false; else { ';\n    }\n    out += ' var i = ' + ($data) + '.length , ' + ($valid) + ' = true , j; if (i > 1) { ';\n    var $itemType = it.schema.items && it.schema.items.type,\n      $typeIsArray = Array.isArray($itemType);\n    if (!$itemType || $itemType == 'object' || $itemType == 'array' || ($typeIsArray && ($itemType.indexOf('object') >= 0 || $itemType.indexOf('array') >= 0))) {\n      out += ' outer: for (;i--;) { for (j = i; j--;) { if (equal(' + ($data) + '[i], ' + ($data) + '[j])) { ' + ($valid) + ' = false; break outer; } } } ';\n    } else {\n      out += ' var itemIndices = {}, item; for (;i--;) { var item = ' + ($data) + '[i]; ';\n      var $method = 'checkDataType' + ($typeIsArray ? 's' : '');\n      out += ' if (' + (it.util[$method]($itemType, 'item', it.opts.strictNumbers, true)) + ') continue; ';\n      if ($typeIsArray) {\n        out += ' if (typeof item == \\'string\\') item = \\'\"\\' + item; ';\n      }\n      out += ' if (typeof itemIndices[item] == \\'number\\') { ' + ($valid) + ' = false; j = itemIndices[item]; break; } itemIndices[item] = i; } ';\n    }\n    out += ' } ';\n    if ($isData) {\n      out += '  }  ';\n    }\n    out += ' if (!' + ($valid) + ') {   ';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('uniqueItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { i: i, j: j } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT have duplicate items (items ## \\' + j + \\' and \\' + i + \\' are identical)\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema:  ';\n        if ($isData) {\n          out += 'validate.schema' + ($schemaPath);\n        } else {\n          out += '' + ($schema);\n        }\n        out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n", "'use strict';\n\n//all requires must be explicit because browserify won't work with dynamic requires\nmodule.exports = {\n  '$ref': require('./ref'),\n  allOf: require('./allOf'),\n  anyOf: require('./anyOf'),\n  '$comment': require('./comment'),\n  const: require('./const'),\n  contains: require('./contains'),\n  dependencies: require('./dependencies'),\n  'enum': require('./enum'),\n  format: require('./format'),\n  'if': require('./if'),\n  items: require('./items'),\n  maximum: require('./_limit'),\n  minimum: require('./_limit'),\n  maxItems: require('./_limitItems'),\n  minItems: require('./_limitItems'),\n  maxLength: require('./_limitLength'),\n  minLength: require('./_limitLength'),\n  maxProperties: require('./_limitProperties'),\n  minProperties: require('./_limitProperties'),\n  multipleOf: require('./multipleOf'),\n  not: require('./not'),\n  oneOf: require('./oneOf'),\n  pattern: require('./pattern'),\n  properties: require('./properties'),\n  propertyNames: require('./propertyNames'),\n  required: require('./required'),\n  uniqueItems: require('./uniqueItems'),\n  validate: require('./validate')\n};\n", "'use strict';\n\nvar ruleModules = require('../dotjs')\n  , toHash = require('./util').toHash;\n\nmodule.exports = function rules() {\n  var RULES = [\n    { type: 'number',\n      rules: [ { 'maximum': ['exclusiveMaximum'] },\n               { 'minimum': ['exclusiveMinimum'] }, 'multipleOf', 'format'] },\n    { type: 'string',\n      rules: [ 'maxLength', 'minLength', 'pattern', 'format' ] },\n    { type: 'array',\n      rules: [ 'maxItems', 'minItems', 'items', 'contains', 'uniqueItems' ] },\n    { type: 'object',\n      rules: [ 'maxProperties', 'minProperties', 'required', 'dependencies', 'propertyNames',\n               { 'properties': ['additionalProperties', 'patternProperties'] } ] },\n    { rules: [ '$ref', 'const', 'enum', 'not', 'anyOf', 'oneOf', 'allOf', 'if' ] }\n  ];\n\n  var ALL = [ 'type', '$comment' ];\n  var KEYWORDS = [\n    '$schema', '$id', 'id', '$data', '$async', 'title',\n    'description', 'default', 'definitions',\n    'examples', 'readOnly', 'writeOnly',\n    'contentMediaType', 'contentEncoding',\n    'additionalItems', 'then', 'else'\n  ];\n  var TYPES = [ 'number', 'integer', 'string', 'array', 'object', 'boolean', 'null' ];\n  RULES.all = toHash(ALL);\n  RULES.types = toHash(TYPES);\n\n  RULES.forEach(function (group) {\n    group.rules = group.rules.map(function (keyword) {\n      var implKeywords;\n      if (typeof keyword == 'object') {\n        var key = Object.keys(keyword)[0];\n        implKeywords = keyword[key];\n        keyword = key;\n        implKeywords.forEach(function (k) {\n          ALL.push(k);\n          RULES.all[k] = true;\n        });\n      }\n      ALL.push(keyword);\n      var rule = RULES.all[keyword] = {\n        keyword: keyword,\n        code: ruleModules[keyword],\n        implements: implKeywords\n      };\n      return rule;\n    });\n\n    RULES.all.$comment = {\n      keyword: '$comment',\n      code: ruleModules.$comment\n    };\n\n    if (group.type) RULES.types[group.type] = group;\n  });\n\n  RULES.keywords = toHash(ALL.concat(KEYWORDS));\n  RULES.custom = {};\n\n  return RULES;\n};\n", "'use strict';\n\nvar KEYWORDS = [\n  'multipleOf',\n  'maximum',\n  'exclusiveMaximum',\n  'minimum',\n  'exclusiveMinimum',\n  'maxLength',\n  'minLength',\n  'pattern',\n  'additionalItems',\n  'maxItems',\n  'minItems',\n  'uniqueItems',\n  'maxProperties',\n  'minProperties',\n  'required',\n  'additionalProperties',\n  'enum',\n  'format',\n  'const'\n];\n\nmodule.exports = function (metaSchema, keywordsJsonPointers) {\n  for (var i=0; i<keywordsJsonPointers.length; i++) {\n    metaSchema = JSON.parse(JSON.stringify(metaSchema));\n    var segments = keywordsJsonPointers[i].split('/');\n    var keywords = metaSchema;\n    var j;\n    for (j=1; j<segments.length; j++)\n      keywords = keywords[segments[j]];\n\n    for (j=0; j<KEYWORDS.length; j++) {\n      var key = KEYWORDS[j];\n      var schema = keywords[key];\n      if (schema) {\n        keywords[key] = {\n          anyOf: [\n            schema,\n            { $ref: 'https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#' }\n          ]\n        };\n      }\n    }\n  }\n\n  return metaSchema;\n};\n", "'use strict';\n\nvar MissingRefError = require('./error_classes').MissingRef;\n\nmodule.exports = compileAsync;\n\n\n/**\n * Creates validating function for passed schema with asynchronous loading of missing schemas.\n * `loadSchema` option should be a function that accepts schema uri and returns promise that resolves with the schema.\n * @this  Ajv\n * @param {Object}   schema schema object\n * @param {Boolean}  meta optional true to compile meta-schema; this parameter can be skipped\n * @param {Function} callback an optional node-style callback, it is called with 2 parameters: error (or null) and validating function.\n * @return {Promise} promise that resolves with a validating function.\n */\nfunction compileAsync(schema, meta, callback) {\n  /* eslint no-shadow: 0 */\n  /* global Promise */\n  /* jshint validthis: true */\n  var self = this;\n  if (typeof this._opts.loadSchema != 'function')\n    throw new Error('options.loadSchema should be a function');\n\n  if (typeof meta == 'function') {\n    callback = meta;\n    meta = undefined;\n  }\n\n  var p = loadMetaSchemaOf(schema).then(function () {\n    var schemaObj = self._addSchema(schema, undefined, meta);\n    return schemaObj.validate || _compileAsync(schemaObj);\n  });\n\n  if (callback) {\n    p.then(\n      function(v) { callback(null, v); },\n      callback\n    );\n  }\n\n  return p;\n\n\n  function loadMetaSchemaOf(sch) {\n    var $schema = sch.$schema;\n    return $schema && !self.getSchema($schema)\n            ? compileAsync.call(self, { $ref: $schema }, true)\n            : Promise.resolve();\n  }\n\n\n  function _compileAsync(schemaObj) {\n    try { return self._compile(schemaObj); }\n    catch(e) {\n      if (e instanceof MissingRefError) return loadMissingSchema(e);\n      throw e;\n    }\n\n\n    function loadMissingSchema(e) {\n      var ref = e.missingSchema;\n      if (added(ref)) throw new Error('Schema ' + ref + ' is loaded but ' + e.missingRef + ' cannot be resolved');\n\n      var schemaPromise = self._loadingSchemas[ref];\n      if (!schemaPromise) {\n        schemaPromise = self._loadingSchemas[ref] = self._opts.loadSchema(ref);\n        schemaPromise.then(removePromise, removePromise);\n      }\n\n      return schemaPromise.then(function (sch) {\n        if (!added(ref)) {\n          return loadMetaSchemaOf(sch).then(function () {\n            if (!added(ref)) self.addSchema(sch, ref, undefined, meta);\n          });\n        }\n      }).then(function() {\n        return _compileAsync(schemaObj);\n      });\n\n      function removePromise() {\n        delete self._loadingSchemas[ref];\n      }\n\n      function added(ref) {\n        return self._refs[ref] || self._schemas[ref];\n      }\n    }\n  }\n}\n", "'use strict';\nmodule.exports = function generate_custom(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $rule = this,\n    $definition = 'definition' + $lvl,\n    $rDef = $rule.definition,\n    $closingBraces = '';\n  var $compile, $inline, $macro, $ruleValidate, $validateCode;\n  if ($isData && $rDef.$data) {\n    $validateCode = 'keywordValidate' + $lvl;\n    var $validateSchema = $rDef.validateSchema;\n    out += ' var ' + ($definition) + ' = RULES.custom[\\'' + ($keyword) + '\\'].definition; var ' + ($validateCode) + ' = ' + ($definition) + '.validate;';\n  } else {\n    $ruleValidate = it.useCustomRule($rule, $schema, it.schema, it);\n    if (!$ruleValidate) return;\n    $schemaValue = 'validate.schema' + $schemaPath;\n    $validateCode = $ruleValidate.code;\n    $compile = $rDef.compile;\n    $inline = $rDef.inline;\n    $macro = $rDef.macro;\n  }\n  var $ruleErrs = $validateCode + '.errors',\n    $i = 'i' + $lvl,\n    $ruleErr = 'ruleErr' + $lvl,\n    $asyncKeyword = $rDef.async;\n  if ($asyncKeyword && !it.async) throw new Error('async keyword in sync schema');\n  if (!($inline || $macro)) {\n    out += '' + ($ruleErrs) + ' = null;';\n  }\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if ($isData && $rDef.$data) {\n    $closingBraces += '}';\n    out += ' if (' + ($schemaValue) + ' === undefined) { ' + ($valid) + ' = true; } else { ';\n    if ($validateSchema) {\n      $closingBraces += '}';\n      out += ' ' + ($valid) + ' = ' + ($definition) + '.validateSchema(' + ($schemaValue) + '); if (' + ($valid) + ') { ';\n    }\n  }\n  if ($inline) {\n    if ($rDef.statements) {\n      out += ' ' + ($ruleValidate.validate) + ' ';\n    } else {\n      out += ' ' + ($valid) + ' = ' + ($ruleValidate.validate) + '; ';\n    }\n  } else if ($macro) {\n    var $it = it.util.copy(it);\n    var $closingBraces = '';\n    $it.level++;\n    var $nextValid = 'valid' + $it.level;\n    $it.schema = $ruleValidate.validate;\n    $it.schemaPath = '';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it).replace(/validate\\.schema/g, $validateCode);\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($code);\n  } else {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    out += '  ' + ($validateCode) + '.call( ';\n    if (it.opts.passContext) {\n      out += 'this';\n    } else {\n      out += 'self';\n    }\n    if ($compile || $rDef.schema === false) {\n      out += ' , ' + ($data) + ' ';\n    } else {\n      out += ' , ' + ($schemaValue) + ' , ' + ($data) + ' , validate.schema' + (it.schemaPath) + ' ';\n    }\n    out += ' , (dataPath || \\'\\')';\n    if (it.errorPath != '\"\"') {\n      out += ' + ' + (it.errorPath);\n    }\n    var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n    out += ' , ' + ($parentData) + ' , ' + ($parentDataProperty) + ' , rootData )  ';\n    var def_callRuleValidate = out;\n    out = $$outStack.pop();\n    if ($rDef.errors === false) {\n      out += ' ' + ($valid) + ' = ';\n      if ($asyncKeyword) {\n        out += 'await ';\n      }\n      out += '' + (def_callRuleValidate) + '; ';\n    } else {\n      if ($asyncKeyword) {\n        $ruleErrs = 'customErrors' + $lvl;\n        out += ' var ' + ($ruleErrs) + ' = null; try { ' + ($valid) + ' = await ' + (def_callRuleValidate) + '; } catch (e) { ' + ($valid) + ' = false; if (e instanceof ValidationError) ' + ($ruleErrs) + ' = e.errors; else throw e; } ';\n      } else {\n        out += ' ' + ($ruleErrs) + ' = null; ' + ($valid) + ' = ' + (def_callRuleValidate) + '; ';\n      }\n    }\n  }\n  if ($rDef.modifying) {\n    out += ' if (' + ($parentData) + ') ' + ($data) + ' = ' + ($parentData) + '[' + ($parentDataProperty) + '];';\n  }\n  out += '' + ($closingBraces);\n  if ($rDef.valid) {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  } else {\n    out += ' if ( ';\n    if ($rDef.valid === undefined) {\n      out += ' !';\n      if ($macro) {\n        out += '' + ($nextValid);\n      } else {\n        out += '' + ($valid);\n      }\n    } else {\n      out += ' ' + (!$rDef.valid) + ' ';\n    }\n    out += ') { ';\n    $errorKeyword = $rule.keyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ($errorKeyword || 'custom') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { keyword: \\'' + ($rule.keyword) + '\\' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should pass \"' + ($rule.keyword) + '\" keyword validation\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    var def_customError = out;\n    out = $$outStack.pop();\n    if ($inline) {\n      if ($rDef.errors) {\n        if ($rDef.errors != 'full') {\n          out += '  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + '; if (' + ($ruleErr) + '.schemaPath === undefined) { ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\"; } ';\n          if (it.opts.verbose) {\n            out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n          }\n          out += ' } ';\n        }\n      } else {\n        if ($rDef.errors === false) {\n          out += ' ' + (def_customError) + ' ';\n        } else {\n          out += ' if (' + ($errs) + ' == errors) { ' + (def_customError) + ' } else {  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + '; if (' + ($ruleErr) + '.schemaPath === undefined) { ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\"; } ';\n          if (it.opts.verbose) {\n            out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n          }\n          out += ' } } ';\n        }\n      }\n    } else if ($macro) {\n      out += '   var err =   '; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ($errorKeyword || 'custom') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { keyword: \\'' + ($rule.keyword) + '\\' } ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'should pass \"' + ($rule.keyword) + '\" keyword validation\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      if (!it.compositeRule && $breakOnError) {\n        /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError(vErrors); ';\n        } else {\n          out += ' validate.errors = vErrors; return false; ';\n        }\n      }\n    } else {\n      if ($rDef.errors === false) {\n        out += ' ' + (def_customError) + ' ';\n      } else {\n        out += ' if (Array.isArray(' + ($ruleErrs) + ')) { if (vErrors === null) vErrors = ' + ($ruleErrs) + '; else vErrors = vErrors.concat(' + ($ruleErrs) + '); errors = vErrors.length;  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + ';  ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\";  ';\n        if (it.opts.verbose) {\n          out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n        }\n        out += ' } } else { ' + (def_customError) + ' } ';\n      }\n    }\n    out += ' } ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  }\n  return out;\n}\n", "'use strict';\n\nvar metaSchema = require('./refs/json-schema-draft-07.json');\n\nmodule.exports = {\n  $id: 'https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js',\n  definitions: {\n    simpleTypes: metaSchema.definitions.simpleTypes\n  },\n  type: 'object',\n  dependencies: {\n    schema: ['validate'],\n    $data: ['validate'],\n    statements: ['inline'],\n    valid: {not: {required: ['macro']}}\n  },\n  properties: {\n    type: metaSchema.properties.type,\n    schema: {type: 'boolean'},\n    statements: {type: 'boolean'},\n    dependencies: {\n      type: 'array',\n      items: {type: 'string'}\n    },\n    metaSchema: {type: 'object'},\n    modifying: {type: 'boolean'},\n    valid: {type: 'boolean'},\n    $data: {type: 'boolean'},\n    async: {type: 'boolean'},\n    errors: {\n      anyOf: [\n        {type: 'boolean'},\n        {const: 'full'}\n      ]\n    }\n  }\n};\n", "'use strict';\n\nvar IDENTIFIER = /^[a-z_$][a-z0-9_$-]*$/i;\nvar customRuleCode = require('./dotjs/custom');\nvar definitionSchema = require('./definition_schema');\n\nmodule.exports = {\n  add: addKeyword,\n  get: getKeyword,\n  remove: removeKeyword,\n  validate: validateKeyword\n};\n\n\n/**\n * Define custom keyword\n * @this  Ajv\n * @param {String} keyword custom keyword, should be unique (including different from all standard, custom and macro keywords).\n * @param {Object} definition keyword definition object with properties `type` (type(s) which the keyword applies to), `validate` or `compile`.\n * @return {Ajv} this for method chaining\n */\nfunction addKeyword(keyword, definition) {\n  /* jshint validthis: true */\n  /* eslint no-shadow: 0 */\n  var RULES = this.RULES;\n  if (RULES.keywords[keyword])\n    throw new Error('Keyword ' + keyword + ' is already defined');\n\n  if (!IDENTIFIER.test(keyword))\n    throw new Error('Keyword ' + keyword + ' is not a valid identifier');\n\n  if (definition) {\n    this.validateKeyword(definition, true);\n\n    var dataType = definition.type;\n    if (Array.isArray(dataType)) {\n      for (var i=0; i<dataType.length; i++)\n        _addRule(keyword, dataType[i], definition);\n    } else {\n      _addRule(keyword, dataType, definition);\n    }\n\n    var metaSchema = definition.metaSchema;\n    if (metaSchema) {\n      if (definition.$data && this._opts.$data) {\n        metaSchema = {\n          anyOf: [\n            metaSchema,\n            { '$ref': 'https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#' }\n          ]\n        };\n      }\n      definition.validateSchema = this.compile(metaSchema, true);\n    }\n  }\n\n  RULES.keywords[keyword] = RULES.all[keyword] = true;\n\n\n  function _addRule(keyword, dataType, definition) {\n    var ruleGroup;\n    for (var i=0; i<RULES.length; i++) {\n      var rg = RULES[i];\n      if (rg.type == dataType) {\n        ruleGroup = rg;\n        break;\n      }\n    }\n\n    if (!ruleGroup) {\n      ruleGroup = { type: dataType, rules: [] };\n      RULES.push(ruleGroup);\n    }\n\n    var rule = {\n      keyword: keyword,\n      definition: definition,\n      custom: true,\n      code: customRuleCode,\n      implements: definition.implements\n    };\n    ruleGroup.rules.push(rule);\n    RULES.custom[keyword] = rule;\n  }\n\n  return this;\n}\n\n\n/**\n * Get keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Object|Boolean} custom keyword definition, `true` if it is a predefined keyword, `false` otherwise.\n */\nfunction getKeyword(keyword) {\n  /* jshint validthis: true */\n  var rule = this.RULES.custom[keyword];\n  return rule ? rule.definition : this.RULES.keywords[keyword] || false;\n}\n\n\n/**\n * Remove keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Ajv} this for method chaining\n */\nfunction removeKeyword(keyword) {\n  /* jshint validthis: true */\n  var RULES = this.RULES;\n  delete RULES.keywords[keyword];\n  delete RULES.all[keyword];\n  delete RULES.custom[keyword];\n  for (var i=0; i<RULES.length; i++) {\n    var rules = RULES[i].rules;\n    for (var j=0; j<rules.length; j++) {\n      if (rules[j].keyword == keyword) {\n        rules.splice(j, 1);\n        break;\n      }\n    }\n  }\n  return this;\n}\n\n\n/**\n * Validate keyword definition\n * @this  Ajv\n * @param {Object} definition keyword definition object.\n * @param {Boolean} throwError true to throw exception if definition is invalid\n * @return {boolean} validation result\n */\nfunction validateKeyword(definition, throwError) {\n  validateKeyword.errors = null;\n  var v = this._validateKeyword = this._validateKeyword\n                                  || this.compile(definitionSchema, true);\n\n  if (v(definition)) return true;\n  validateKeyword.errors = v.errors;\n  if (throwError)\n    throw new Error('custom keyword definition is invalid: '  + this.errorsText(v.errors));\n  else\n    return false;\n}\n", "'use strict';\n\nvar compileSchema = require('./compile')\n  , resolve = require('./compile/resolve')\n  , Cache = require('./cache')\n  , SchemaObject = require('./compile/schema_obj')\n  , stableStringify = require('fast-json-stable-stringify')\n  , formats = require('./compile/formats')\n  , rules = require('./compile/rules')\n  , $dataMetaSchema = require('./data')\n  , util = require('./compile/util');\n\nmodule.exports = Ajv;\n\nAjv.prototype.validate = validate;\nAjv.prototype.compile = compile;\nAjv.prototype.addSchema = addSchema;\nAjv.prototype.addMetaSchema = addMetaSchema;\nAjv.prototype.validateSchema = validateSchema;\nAjv.prototype.getSchema = getSchema;\nAjv.prototype.removeSchema = removeSchema;\nAjv.prototype.addFormat = addFormat;\nAjv.prototype.errorsText = errorsText;\n\nAjv.prototype._addSchema = _addSchema;\nAjv.prototype._compile = _compile;\n\nAjv.prototype.compileAsync = require('./compile/async');\nvar customKeyword = require('./keyword');\nAjv.prototype.addKeyword = customKeyword.add;\nAjv.prototype.getKeyword = customKeyword.get;\nAjv.prototype.removeKeyword = customKeyword.remove;\nAjv.prototype.validateKeyword = customKeyword.validate;\n\nvar errorClasses = require('./compile/error_classes');\nAjv.ValidationError = errorClasses.Validation;\nAjv.MissingRefError = errorClasses.MissingRef;\nAjv.$dataMetaSchema = $dataMetaSchema;\n\nvar META_SCHEMA_ID = 'http://json-schema.org/draft-07/schema';\n\nvar META_IGNORE_OPTIONS = [ 'removeAdditional', 'useDefaults', 'coerceTypes', 'strictDefaults' ];\nvar META_SUPPORT_DATA = ['/properties'];\n\n/**\n * Creates validator instance.\n * Usage: `Ajv(opts)`\n * @param {Object} opts optional options\n * @return {Object} ajv instance\n */\nfunction Ajv(opts) {\n  if (!(this instanceof Ajv)) return new Ajv(opts);\n  opts = this._opts = util.copy(opts) || {};\n  setLogger(this);\n  this._schemas = {};\n  this._refs = {};\n  this._fragments = {};\n  this._formats = formats(opts.format);\n\n  this._cache = opts.cache || new Cache;\n  this._loadingSchemas = {};\n  this._compilations = [];\n  this.RULES = rules();\n  this._getId = chooseGetId(opts);\n\n  opts.loopRequired = opts.loopRequired || Infinity;\n  if (opts.errorDataPath == 'property') opts._errorDataPathProperty = true;\n  if (opts.serialize === undefined) opts.serialize = stableStringify;\n  this._metaOpts = getMetaSchemaOptions(this);\n\n  if (opts.formats) addInitialFormats(this);\n  if (opts.keywords) addInitialKeywords(this);\n  addDefaultMetaSchema(this);\n  if (typeof opts.meta == 'object') this.addMetaSchema(opts.meta);\n  if (opts.nullable) this.addKeyword('nullable', {metaSchema: {type: 'boolean'}});\n  addInitialSchemas(this);\n}\n\n\n\n/**\n * Validate data using schema\n * Schema will be compiled and cached (using serialized JSON as key. [fast-json-stable-stringify](https://github.com/epoberezkin/fast-json-stable-stringify) is used to serialize.\n * @this   Ajv\n * @param  {String|Object} schemaKeyRef key, ref or schema object\n * @param  {Any} data to be validated\n * @return {Boolean} validation result. Errors from the last validation will be available in `ajv.errors` (and also in compiled schema: `schema.errors`).\n */\nfunction validate(schemaKeyRef, data) {\n  var v;\n  if (typeof schemaKeyRef == 'string') {\n    v = this.getSchema(schemaKeyRef);\n    if (!v) throw new Error('no schema with key or ref \"' + schemaKeyRef + '\"');\n  } else {\n    var schemaObj = this._addSchema(schemaKeyRef);\n    v = schemaObj.validate || this._compile(schemaObj);\n  }\n\n  var valid = v(data);\n  if (v.$async !== true) this.errors = v.errors;\n  return valid;\n}\n\n\n/**\n * Create validating function for passed schema.\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Boolean} _meta true if schema is a meta-schema. Used internally to compile meta schemas of custom keywords.\n * @return {Function} validating function\n */\nfunction compile(schema, _meta) {\n  var schemaObj = this._addSchema(schema, undefined, _meta);\n  return schemaObj.validate || this._compile(schemaObj);\n}\n\n\n/**\n * Adds schema to the instance.\n * @this   Ajv\n * @param {Object|Array} schema schema or array of schemas. If array is passed, `key` and other parameters will be ignored.\n * @param {String} key Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n * @param {Boolean} _skipValidation true to skip schema validation. Used internally, option validateSchema should be used instead.\n * @param {Boolean} _meta true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n * @return {Ajv} this for method chaining\n */\nfunction addSchema(schema, key, _skipValidation, _meta) {\n  if (Array.isArray(schema)){\n    for (var i=0; i<schema.length; i++) this.addSchema(schema[i], undefined, _skipValidation, _meta);\n    return this;\n  }\n  var id = this._getId(schema);\n  if (id !== undefined && typeof id != 'string')\n    throw new Error('schema id must be string');\n  key = resolve.normalizeId(key || id);\n  checkUnique(this, key);\n  this._schemas[key] = this._addSchema(schema, _skipValidation, _meta, true);\n  return this;\n}\n\n\n/**\n * Add schema that will be used to validate other schemas\n * options in META_IGNORE_OPTIONS are alway set to false\n * @this   Ajv\n * @param {Object} schema schema object\n * @param {String} key optional schema key\n * @param {Boolean} skipValidation true to skip schema validation, can be used to override validateSchema option for meta-schema\n * @return {Ajv} this for method chaining\n */\nfunction addMetaSchema(schema, key, skipValidation) {\n  this.addSchema(schema, key, skipValidation, true);\n  return this;\n}\n\n\n/**\n * Validate schema\n * @this   Ajv\n * @param {Object} schema schema to validate\n * @param {Boolean} throwOrLogError pass true to throw (or log) an error if invalid\n * @return {Boolean} true if schema is valid\n */\nfunction validateSchema(schema, throwOrLogError) {\n  var $schema = schema.$schema;\n  if ($schema !== undefined && typeof $schema != 'string')\n    throw new Error('$schema must be a string');\n  $schema = $schema || this._opts.defaultMeta || defaultMeta(this);\n  if (!$schema) {\n    this.logger.warn('meta-schema not available');\n    this.errors = null;\n    return true;\n  }\n  var valid = this.validate($schema, schema);\n  if (!valid && throwOrLogError) {\n    var message = 'schema is invalid: ' + this.errorsText();\n    if (this._opts.validateSchema == 'log') this.logger.error(message);\n    else throw new Error(message);\n  }\n  return valid;\n}\n\n\nfunction defaultMeta(self) {\n  var meta = self._opts.meta;\n  self._opts.defaultMeta = typeof meta == 'object'\n                            ? self._getId(meta) || meta\n                            : self.getSchema(META_SCHEMA_ID)\n                              ? META_SCHEMA_ID\n                              : undefined;\n  return self._opts.defaultMeta;\n}\n\n\n/**\n * Get compiled schema from the instance by `key` or `ref`.\n * @this   Ajv\n * @param  {String} keyRef `key` that was passed to `addSchema` or full schema reference (`schema.id` or resolved id).\n * @return {Function} schema validating function (with property `schema`).\n */\nfunction getSchema(keyRef) {\n  var schemaObj = _getSchemaObj(this, keyRef);\n  switch (typeof schemaObj) {\n    case 'object': return schemaObj.validate || this._compile(schemaObj);\n    case 'string': return this.getSchema(schemaObj);\n    case 'undefined': return _getSchemaFragment(this, keyRef);\n  }\n}\n\n\nfunction _getSchemaFragment(self, ref) {\n  var res = resolve.schema.call(self, { schema: {} }, ref);\n  if (res) {\n    var schema = res.schema\n      , root = res.root\n      , baseId = res.baseId;\n    var v = compileSchema.call(self, schema, root, undefined, baseId);\n    self._fragments[ref] = new SchemaObject({\n      ref: ref,\n      fragment: true,\n      schema: schema,\n      root: root,\n      baseId: baseId,\n      validate: v\n    });\n    return v;\n  }\n}\n\n\nfunction _getSchemaObj(self, keyRef) {\n  keyRef = resolve.normalizeId(keyRef);\n  return self._schemas[keyRef] || self._refs[keyRef] || self._fragments[keyRef];\n}\n\n\n/**\n * Remove cached schema(s).\n * If no parameter is passed all schemas but meta-schemas are removed.\n * If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n * Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n * @this   Ajv\n * @param  {String|Object|RegExp} schemaKeyRef key, ref, pattern to match key/ref or schema object\n * @return {Ajv} this for method chaining\n */\nfunction removeSchema(schemaKeyRef) {\n  if (schemaKeyRef instanceof RegExp) {\n    _removeAllSchemas(this, this._schemas, schemaKeyRef);\n    _removeAllSchemas(this, this._refs, schemaKeyRef);\n    return this;\n  }\n  switch (typeof schemaKeyRef) {\n    case 'undefined':\n      _removeAllSchemas(this, this._schemas);\n      _removeAllSchemas(this, this._refs);\n      this._cache.clear();\n      return this;\n    case 'string':\n      var schemaObj = _getSchemaObj(this, schemaKeyRef);\n      if (schemaObj) this._cache.del(schemaObj.cacheKey);\n      delete this._schemas[schemaKeyRef];\n      delete this._refs[schemaKeyRef];\n      return this;\n    case 'object':\n      var serialize = this._opts.serialize;\n      var cacheKey = serialize ? serialize(schemaKeyRef) : schemaKeyRef;\n      this._cache.del(cacheKey);\n      var id = this._getId(schemaKeyRef);\n      if (id) {\n        id = resolve.normalizeId(id);\n        delete this._schemas[id];\n        delete this._refs[id];\n      }\n  }\n  return this;\n}\n\n\nfunction _removeAllSchemas(self, schemas, regex) {\n  for (var keyRef in schemas) {\n    var schemaObj = schemas[keyRef];\n    if (!schemaObj.meta && (!regex || regex.test(keyRef))) {\n      self._cache.del(schemaObj.cacheKey);\n      delete schemas[keyRef];\n    }\n  }\n}\n\n\n/* @this   Ajv */\nfunction _addSchema(schema, skipValidation, meta, shouldAddSchema) {\n  if (typeof schema != 'object' && typeof schema != 'boolean')\n    throw new Error('schema should be object or boolean');\n  var serialize = this._opts.serialize;\n  var cacheKey = serialize ? serialize(schema) : schema;\n  var cached = this._cache.get(cacheKey);\n  if (cached) return cached;\n\n  shouldAddSchema = shouldAddSchema || this._opts.addUsedSchema !== false;\n\n  var id = resolve.normalizeId(this._getId(schema));\n  if (id && shouldAddSchema) checkUnique(this, id);\n\n  var willValidate = this._opts.validateSchema !== false && !skipValidation;\n  var recursiveMeta;\n  if (willValidate && !(recursiveMeta = id && id == resolve.normalizeId(schema.$schema)))\n    this.validateSchema(schema, true);\n\n  var localRefs = resolve.ids.call(this, schema);\n\n  var schemaObj = new SchemaObject({\n    id: id,\n    schema: schema,\n    localRefs: localRefs,\n    cacheKey: cacheKey,\n    meta: meta\n  });\n\n  if (id[0] != '#' && shouldAddSchema) this._refs[id] = schemaObj;\n  this._cache.put(cacheKey, schemaObj);\n\n  if (willValidate && recursiveMeta) this.validateSchema(schema, true);\n\n  return schemaObj;\n}\n\n\n/* @this   Ajv */\nfunction _compile(schemaObj, root) {\n  if (schemaObj.compiling) {\n    schemaObj.validate = callValidate;\n    callValidate.schema = schemaObj.schema;\n    callValidate.errors = null;\n    callValidate.root = root ? root : callValidate;\n    if (schemaObj.schema.$async === true)\n      callValidate.$async = true;\n    return callValidate;\n  }\n  schemaObj.compiling = true;\n\n  var currentOpts;\n  if (schemaObj.meta) {\n    currentOpts = this._opts;\n    this._opts = this._metaOpts;\n  }\n\n  var v;\n  try { v = compileSchema.call(this, schemaObj.schema, root, schemaObj.localRefs); }\n  catch(e) {\n    delete schemaObj.validate;\n    throw e;\n  }\n  finally {\n    schemaObj.compiling = false;\n    if (schemaObj.meta) this._opts = currentOpts;\n  }\n\n  schemaObj.validate = v;\n  schemaObj.refs = v.refs;\n  schemaObj.refVal = v.refVal;\n  schemaObj.root = v.root;\n  return v;\n\n\n  /* @this   {*} - custom context, see passContext option */\n  function callValidate() {\n    /* jshint validthis: true */\n    var _validate = schemaObj.validate;\n    var result = _validate.apply(this, arguments);\n    callValidate.errors = _validate.errors;\n    return result;\n  }\n}\n\n\nfunction chooseGetId(opts) {\n  switch (opts.schemaId) {\n    case 'auto': return _get$IdOrId;\n    case 'id': return _getId;\n    default: return _get$Id;\n  }\n}\n\n/* @this   Ajv */\nfunction _getId(schema) {\n  if (schema.$id) this.logger.warn('schema $id ignored', schema.$id);\n  return schema.id;\n}\n\n/* @this   Ajv */\nfunction _get$Id(schema) {\n  if (schema.id) this.logger.warn('schema id ignored', schema.id);\n  return schema.$id;\n}\n\n\nfunction _get$IdOrId(schema) {\n  if (schema.$id && schema.id && schema.$id != schema.id)\n    throw new Error('schema $id is different from id');\n  return schema.$id || schema.id;\n}\n\n\n/**\n * Convert array of error message objects to string\n * @this   Ajv\n * @param  {Array<Object>} errors optional array of validation errors, if not passed errors from the instance are used.\n * @param  {Object} options optional options with properties `separator` and `dataVar`.\n * @return {String} human readable string with all errors descriptions\n */\nfunction errorsText(errors, options) {\n  errors = errors || this.errors;\n  if (!errors) return 'No errors';\n  options = options || {};\n  var separator = options.separator === undefined ? ', ' : options.separator;\n  var dataVar = options.dataVar === undefined ? 'data' : options.dataVar;\n\n  var text = '';\n  for (var i=0; i<errors.length; i++) {\n    var e = errors[i];\n    if (e) text += dataVar + e.dataPath + ' ' + e.message + separator;\n  }\n  return text.slice(0, -separator.length);\n}\n\n\n/**\n * Add custom format\n * @this   Ajv\n * @param {String} name format name\n * @param {String|RegExp|Function} format string is converted to RegExp; function should return boolean (true when valid)\n * @return {Ajv} this for method chaining\n */\nfunction addFormat(name, format) {\n  if (typeof format == 'string') format = new RegExp(format);\n  this._formats[name] = format;\n  return this;\n}\n\n\nfunction addDefaultMetaSchema(self) {\n  var $dataSchema;\n  if (self._opts.$data) {\n    $dataSchema = require('./refs/data.json');\n    self.addMetaSchema($dataSchema, $dataSchema.$id, true);\n  }\n  if (self._opts.meta === false) return;\n  var metaSchema = require('./refs/json-schema-draft-07.json');\n  if (self._opts.$data) metaSchema = $dataMetaSchema(metaSchema, META_SUPPORT_DATA);\n  self.addMetaSchema(metaSchema, META_SCHEMA_ID, true);\n  self._refs['http://json-schema.org/schema'] = META_SCHEMA_ID;\n}\n\n\nfunction addInitialSchemas(self) {\n  var optsSchemas = self._opts.schemas;\n  if (!optsSchemas) return;\n  if (Array.isArray(optsSchemas)) self.addSchema(optsSchemas);\n  else for (var key in optsSchemas) self.addSchema(optsSchemas[key], key);\n}\n\n\nfunction addInitialFormats(self) {\n  for (var name in self._opts.formats) {\n    var format = self._opts.formats[name];\n    self.addFormat(name, format);\n  }\n}\n\n\nfunction addInitialKeywords(self) {\n  for (var name in self._opts.keywords) {\n    var keyword = self._opts.keywords[name];\n    self.addKeyword(name, keyword);\n  }\n}\n\n\nfunction checkUnique(self, id) {\n  if (self._schemas[id] || self._refs[id])\n    throw new Error('schema with key or id \"' + id + '\" already exists');\n}\n\n\nfunction getMetaSchemaOptions(self) {\n  var metaOpts = util.copy(self._opts);\n  for (var i=0; i<META_IGNORE_OPTIONS.length; i++)\n    delete metaOpts[META_IGNORE_OPTIONS[i]];\n  return metaOpts;\n}\n\n\nfunction setLogger(self) {\n  var logger = self._opts.logger;\n  if (logger === false) {\n    self.logger = {log: noop, warn: noop, error: noop};\n  } else {\n    if (logger === undefined) logger = console;\n    if (!(typeof logger == 'object' && logger.log && logger.warn && logger.error))\n      throw new Error('logger must implement log, warn and error methods');\n    self.logger = logger;\n  }\n}\n\n\nfunction noop() {}\n", "function HARError (errors) {\n  var message = 'validation failed'\n\n  this.name = 'HARError'\n  this.message = message\n  this.errors = errors\n\n  if (typeof Error.captureStackTrace === 'function') {\n    Error.captureStackTrace(this, this.constructor)\n  } else {\n    this.stack = (new Error(message)).stack\n  }\n}\n\nHARError.prototype = Error.prototype\n\nmodule.exports = HARError\n", "'use strict'\n\nmodule.exports = {\n  afterRequest: require('./afterRequest.json'),\n  beforeRequest: require('./beforeRequest.json'),\n  browser: require('./browser.json'),\n  cache: require('./cache.json'),\n  content: require('./content.json'),\n  cookie: require('./cookie.json'),\n  creator: require('./creator.json'),\n  entry: require('./entry.json'),\n  har: require('./har.json'),\n  header: require('./header.json'),\n  log: require('./log.json'),\n  page: require('./page.json'),\n  pageTimings: require('./pageTimings.json'),\n  postData: require('./postData.json'),\n  query: require('./query.json'),\n  request: require('./request.json'),\n  response: require('./response.json'),\n  timings: require('./timings.json')\n}\n", "var Ajv = require('ajv')\nvar HARError = require('./error')\nvar schemas = require('har-schema')\n\nvar ajv\n\nfunction createAjvInstance () {\n  var ajv = new Ajv({\n    allErrors: true\n  })\n  ajv.addMetaSchema(require('ajv/lib/refs/json-schema-draft-06.json'))\n  ajv.addSchema(schemas)\n\n  return ajv\n}\n\nfunction validate (name, data) {\n  data = data || {}\n\n  // validator config\n  ajv = ajv || createAjvInstance()\n\n  var validate = ajv.getSchema(name + '.json')\n\n  return new Promise(function (resolve, reject) {\n    var valid = validate(data)\n\n    !valid ? reject(new HARError(validate.errors)) : resolve(data)\n  })\n}\n\nexports.afterRequest = function (data) {\n  return validate('afterRequest', data)\n}\n\nexports.beforeRequest = function (data) {\n  return validate('beforeRequest', data)\n}\n\nexports.browser = function (data) {\n  return validate('browser', data)\n}\n\nexports.cache = function (data) {\n  return validate('cache', data)\n}\n\nexports.content = function (data) {\n  return validate('content', data)\n}\n\nexports.cookie = function (data) {\n  return validate('cookie', data)\n}\n\nexports.creator = function (data) {\n  return validate('creator', data)\n}\n\nexports.entry = function (data) {\n  return validate('entry', data)\n}\n\nexports.har = function (data) {\n  return validate('har', data)\n}\n\nexports.header = function (data) {\n  return validate('header', data)\n}\n\nexports.log = function (data) {\n  return validate('log', data)\n}\n\nexports.page = function (data) {\n  return validate('page', data)\n}\n\nexports.pageTimings = function (data) {\n  return validate('pageTimings', data)\n}\n\nexports.postData = function (data) {\n  return validate('postData', data)\n}\n\nexports.query = function (data) {\n  return validate('query', data)\n}\n\nexports.request = function (data) {\n  return validate('request', data)\n}\n\nexports.response = function (data) {\n  return validate('response', data)\n}\n\nexports.timings = function (data) {\n  return validate('timings', data)\n}\n", "'use strict'\n\nvar fs = require('fs')\nvar qs = require('querystring')\nvar validate = require('har-validator')\nvar extend = require('extend')\n\nfunction Har (request) {\n  this.request = request\n}\n\nHar.prototype.reducer = function (obj, pair) {\n  // new property ?\n  if (obj[pair.name] === undefined) {\n    obj[pair.name] = pair.value\n    return obj\n  }\n\n  // existing? convert to array\n  var arr = [\n    obj[pair.name],\n    pair.value\n  ]\n\n  obj[pair.name] = arr\n\n  return obj\n}\n\nHar.prototype.prep = function (data) {\n  // construct utility properties\n  data.queryObj = {}\n  data.headersObj = {}\n  data.postData.jsonObj = false\n  data.postData.paramsObj = false\n\n  // construct query objects\n  if (data.queryString && data.queryString.length) {\n    data.queryObj = data.queryString.reduce(this.reducer, {})\n  }\n\n  // construct headers objects\n  if (data.headers && data.headers.length) {\n    // loweCase header keys\n    data.headersObj = data.headers.reduceRight(function (headers, header) {\n      headers[header.name] = header.value\n      return headers\n    }, {})\n  }\n\n  // construct Cookie header\n  if (data.cookies && data.cookies.length) {\n    var cookies = data.cookies.map(function (cookie) {\n      return cookie.name + '=' + cookie.value\n    })\n\n    if (cookies.length) {\n      data.headersObj.cookie = cookies.join('; ')\n    }\n  }\n\n  // prep body\n  function some (arr) {\n    return arr.some(function (type) {\n      return data.postData.mimeType.indexOf(type) === 0\n    })\n  }\n\n  if (some([\n    'multipart/mixed',\n    'multipart/related',\n    'multipart/form-data',\n    'multipart/alternative'])) {\n    // reset values\n    data.postData.mimeType = 'multipart/form-data'\n  } else if (some([\n    'application/x-www-form-urlencoded'])) {\n    if (!data.postData.params) {\n      data.postData.text = ''\n    } else {\n      data.postData.paramsObj = data.postData.params.reduce(this.reducer, {})\n\n      // always overwrite\n      data.postData.text = qs.stringify(data.postData.paramsObj)\n    }\n  } else if (some([\n    'text/json',\n    'text/x-json',\n    'application/json',\n    'application/x-json'])) {\n    data.postData.mimeType = 'application/json'\n\n    if (data.postData.text) {\n      try {\n        data.postData.jsonObj = JSON.parse(data.postData.text)\n      } catch (e) {\n        this.request.debug(e)\n\n        // force back to text/plain\n        data.postData.mimeType = 'text/plain'\n      }\n    }\n  }\n\n  return data\n}\n\nHar.prototype.options = function (options) {\n  // skip if no har property defined\n  if (!options.har) {\n    return options\n  }\n\n  var har = {}\n  extend(har, options.har)\n\n  // only process the first entry\n  if (har.log && har.log.entries) {\n    har = har.log.entries[0]\n  }\n\n  // add optional properties to make validation successful\n  har.url = har.url || options.url || options.uri || options.baseUrl || '/'\n  har.httpVersion = har.httpVersion || 'HTTP/1.1'\n  har.queryString = har.queryString || []\n  har.headers = har.headers || []\n  har.cookies = har.cookies || []\n  har.postData = har.postData || {}\n  har.postData.mimeType = har.postData.mimeType || 'application/octet-stream'\n\n  har.bodySize = 0\n  har.headersSize = 0\n  har.postData.size = 0\n\n  if (!validate.request(har)) {\n    return options\n  }\n\n  // clean up and get some utility properties\n  var req = this.prep(har)\n\n  // construct new options\n  if (req.url) {\n    options.url = req.url\n  }\n\n  if (req.method) {\n    options.method = req.method\n  }\n\n  if (Object.keys(req.queryObj).length) {\n    options.qs = req.queryObj\n  }\n\n  if (Object.keys(req.headersObj).length) {\n    options.headers = req.headersObj\n  }\n\n  function test (type) {\n    return req.postData.mimeType.indexOf(type) === 0\n  }\n  if (test('application/x-www-form-urlencoded')) {\n    options.form = req.postData.paramsObj\n  } else if (test('application/json')) {\n    if (req.postData.jsonObj) {\n      options.body = req.postData.jsonObj\n      options.json = true\n    }\n  } else if (test('multipart/form-data')) {\n    options.formData = {}\n\n    req.postData.params.forEach(function (param) {\n      var attachment = {}\n\n      if (!param.fileName && !param.contentType) {\n        options.formData[param.name] = param.value\n        return\n      }\n\n      // attempt to read from disk!\n      if (param.fileName && !param.value) {\n        attachment.value = fs.createReadStream(param.fileName)\n      } else if (param.value) {\n        attachment.value = param.value\n      }\n\n      if (param.fileName) {\n        attachment.options = {\n          filename: param.fileName,\n          contentType: param.contentType ? param.contentType : null\n        }\n      }\n\n      options.formData[param.name] = attachment\n    })\n  } else {\n    if (req.postData.text) {\n      options.body = req.postData.text\n    }\n  }\n\n  return options\n}\n\nexports.Har = Har\n", "// Unique ID creation requires a high quality random # generator.  In node.js\n// this is pretty straight-forward - we use the crypto API.\n\nvar crypto = require('crypto');\n\nmodule.exports = function nodeRNG() {\n  return crypto.randomBytes(16);\n};\n", "/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n", "var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n", "'use strict'\n\nvar caseless = require('caseless')\nvar uuid = require('uuid/v4')\nvar helpers = require('./helpers')\n\nvar md5 = helpers.md5\nvar toBase64 = helpers.toBase64\n\nfunction Auth (request) {\n  // define all public properties here\n  this.request = request\n  this.hasAuth = false\n  this.sentAuth = false\n  this.bearerToken = null\n  this.user = null\n  this.pass = null\n}\n\nAuth.prototype.basic = function (user, pass, sendImmediately) {\n  var self = this\n  if (typeof user !== 'string' || (pass !== undefined && typeof pass !== 'string')) {\n    self.request.emit('error', new Error('auth() received invalid user or password'))\n  }\n  self.user = user\n  self.pass = pass\n  self.hasAuth = true\n  var header = user + ':' + (pass || '')\n  if (sendImmediately || typeof sendImmediately === 'undefined') {\n    var authHeader = 'Basic ' + toBase64(header)\n    self.sentAuth = true\n    return authHeader\n  }\n}\n\nAuth.prototype.bearer = function (bearer, sendImmediately) {\n  var self = this\n  self.bearerToken = bearer\n  self.hasAuth = true\n  if (sendImmediately || typeof sendImmediately === 'undefined') {\n    if (typeof bearer === 'function') {\n      bearer = bearer()\n    }\n    var authHeader = 'Bearer ' + (bearer || '')\n    self.sentAuth = true\n    return authHeader\n  }\n}\n\nAuth.prototype.digest = function (method, path, authHeader) {\n  // TODO: More complete implementation of RFC 2617.\n  //   - handle challenge.domain\n  //   - support qop=\"auth-int\" only\n  //   - handle Authentication-Info (not necessarily?)\n  //   - check challenge.stale (not necessarily?)\n  //   - increase nc (not necessarily?)\n  // For reference:\n  // http://tools.ietf.org/html/rfc2617#section-3\n  // https://github.com/bagder/curl/blob/master/lib/http_digest.c\n\n  var self = this\n\n  var challenge = {}\n  var re = /([a-z0-9_-]+)=(?:\"([^\"]+)\"|([a-z0-9_-]+))/gi\n  while (true) {\n    var match = re.exec(authHeader)\n    if (!match) {\n      break\n    }\n    challenge[match[1]] = match[2] || match[3]\n  }\n\n  /**\n   * RFC 2617: handle both MD5 and MD5-sess algorithms.\n   *\n   * If the algorithm directive's value is \"MD5\" or unspecified, then HA1 is\n   *   HA1=MD5(username:realm:password)\n   * If the algorithm directive's value is \"MD5-sess\", then HA1 is\n   *   HA1=MD5(MD5(username:realm:password):nonce:cnonce)\n   */\n  var ha1Compute = function (algorithm, user, realm, pass, nonce, cnonce) {\n    var ha1 = md5(user + ':' + realm + ':' + pass)\n    if (algorithm && algorithm.toLowerCase() === 'md5-sess') {\n      return md5(ha1 + ':' + nonce + ':' + cnonce)\n    } else {\n      return ha1\n    }\n  }\n\n  var qop = /(^|,)\\s*auth\\s*($|,)/.test(challenge.qop) && 'auth'\n  var nc = qop && '00000001'\n  var cnonce = qop && uuid().replace(/-/g, '')\n  var ha1 = ha1Compute(challenge.algorithm, self.user, challenge.realm, self.pass, challenge.nonce, cnonce)\n  var ha2 = md5(method + ':' + path)\n  var digestResponse = qop\n    ? md5(ha1 + ':' + challenge.nonce + ':' + nc + ':' + cnonce + ':' + qop + ':' + ha2)\n    : md5(ha1 + ':' + challenge.nonce + ':' + ha2)\n  var authValues = {\n    username: self.user,\n    realm: challenge.realm,\n    nonce: challenge.nonce,\n    uri: path,\n    qop: qop,\n    response: digestResponse,\n    nc: nc,\n    cnonce: cnonce,\n    algorithm: challenge.algorithm,\n    opaque: challenge.opaque\n  }\n\n  authHeader = []\n  for (var k in authValues) {\n    if (authValues[k]) {\n      if (k === 'qop' || k === 'nc' || k === 'algorithm') {\n        authHeader.push(k + '=' + authValues[k])\n      } else {\n        authHeader.push(k + '=\"' + authValues[k] + '\"')\n      }\n    }\n  }\n  authHeader = 'Digest ' + authHeader.join(', ')\n  self.sentAuth = true\n  return authHeader\n}\n\nAuth.prototype.onRequest = function (user, pass, sendImmediately, bearer) {\n  var self = this\n  var request = self.request\n\n  var authHeader\n  if (bearer === undefined && user === undefined) {\n    self.request.emit('error', new Error('no auth mechanism defined'))\n  } else if (bearer !== undefined) {\n    authHeader = self.bearer(bearer, sendImmediately)\n  } else {\n    authHeader = self.basic(user, pass, sendImmediately)\n  }\n  if (authHeader) {\n    request.setHeader('authorization', authHeader)\n  }\n}\n\nAuth.prototype.onResponse = function (response) {\n  var self = this\n  var request = self.request\n\n  if (!self.hasAuth || self.sentAuth) { return null }\n\n  var c = caseless(response.headers)\n\n  var authHeader = c.get('www-authenticate')\n  var authVerb = authHeader && authHeader.split(' ')[0].toLowerCase()\n  request.debug('reauth', authVerb)\n\n  switch (authVerb) {\n    case 'basic':\n      return self.basic(self.user, self.pass, true)\n\n    case 'bearer':\n      return self.bearer(self.bearerToken, true)\n\n    case 'digest':\n      return self.digest(request.method, request.path, authHeader)\n  }\n}\n\nexports.Auth = Auth\n", "var crypto = require('crypto')\n\nfunction sha (key, body, algorithm) {\n  return crypto.createHmac(algorithm, key).update(body).digest('base64')\n}\n\nfunction rsa (key, body) {\n  return crypto.createSign('RSA-SHA1').update(body).sign(key, 'base64')\n}\n\nfunction rfc3986 (str) {\n  return encodeURIComponent(str)\n    .replace(/!/g,'%21')\n    .replace(/\\*/g,'%2A')\n    .replace(/\\(/g,'%28')\n    .replace(/\\)/g,'%29')\n    .replace(/'/g,'%27')\n}\n\n// Maps object to bi-dimensional array\n// Converts { foo: 'A', bar: [ 'b', 'B' ]} to\n// [ ['foo', 'A'], ['bar', 'b'], ['bar', 'B'] ]\nfunction map (obj) {\n  var key, val, arr = []\n  for (key in obj) {\n    val = obj[key]\n    if (Array.isArray(val))\n      for (var i = 0; i < val.length; i++)\n        arr.push([key, val[i]])\n    else if (typeof val === 'object')\n      for (var prop in val)\n        arr.push([key + '[' + prop + ']', val[prop]])\n    else\n      arr.push([key, val])\n  }\n  return arr\n}\n\n// Compare function for sort\nfunction compare (a, b) {\n  return a > b ? 1 : a < b ? -1 : 0\n}\n\nfunction generateBase (httpMethod, base_uri, params) {\n  // adapted from https://dev.twitter.com/docs/auth/oauth and \n  // https://dev.twitter.com/docs/auth/creating-signature\n\n  // Parameter normalization\n  // http://tools.ietf.org/html/rfc5849#section-3.4.1.3.2\n  var normalized = map(params)\n  // 1.  First, the name and value of each parameter are encoded\n  .map(function (p) {\n    return [ rfc3986(p[0]), rfc3986(p[1] || '') ]\n  })\n  // 2.  The parameters are sorted by name, using ascending byte value\n  //     ordering.  If two or more parameters share the same name, they\n  //     are sorted by their value.\n  .sort(function (a, b) {\n    return compare(a[0], b[0]) || compare(a[1], b[1])\n  })\n  // 3.  The name of each parameter is concatenated to its corresponding\n  //     value using an \"=\" character (ASCII code 61) as a separator, even\n  //     if the value is empty.\n  .map(function (p) { return p.join('=') })\n   // 4.  The sorted name/value pairs are concatenated together into a\n   //     single string by using an \"&\" character (ASCII code 38) as\n   //     separator.\n  .join('&')\n\n  var base = [\n    rfc3986(httpMethod ? httpMethod.toUpperCase() : 'GET'),\n    rfc3986(base_uri),\n    rfc3986(normalized)\n  ].join('&')\n\n  return base\n}\n\nfunction hmacsign (httpMethod, base_uri, params, consumer_secret, token_secret) {\n  var base = generateBase(httpMethod, base_uri, params)\n  var key = [\n    consumer_secret || '',\n    token_secret || ''\n  ].map(rfc3986).join('&')\n\n  return sha(key, base, 'sha1')\n}\n\nfunction hmacsign256 (httpMethod, base_uri, params, consumer_secret, token_secret) {\n  var base = generateBase(httpMethod, base_uri, params)\n  var key = [\n    consumer_secret || '',\n    token_secret || ''\n  ].map(rfc3986).join('&')\n\n  return sha(key, base, 'sha256')\n}\n\nfunction rsasign (httpMethod, base_uri, params, private_key, token_secret) {\n  var base = generateBase(httpMethod, base_uri, params)\n  var key = private_key || ''\n\n  return rsa(key, base)\n}\n\nfunction plaintext (consumer_secret, token_secret) {\n  var key = [\n    consumer_secret || '',\n    token_secret || ''\n  ].map(rfc3986).join('&')\n\n  return key\n}\n\nfunction sign (signMethod, httpMethod, base_uri, params, consumer_secret, token_secret) {\n  var method\n  var skipArgs = 1\n\n  switch (signMethod) {\n    case 'RSA-SHA1':\n      method = rsasign\n      break\n    case 'HMAC-SHA1':\n      method = hmacsign\n      break\n    case 'HMAC-SHA256':\n      method = hmacsign256\n      break\n    case 'PLAINTEXT':\n      method = plaintext\n      skipArgs = 4\n      break\n    default:\n     throw new Error('Signature method not supported: ' + signMethod)\n  }\n\n  return method.apply(null, [].slice.call(arguments, skipArgs))\n}\n\nexports.hmacsign = hmacsign\nexports.hmacsign256 = hmacsign256\nexports.rsasign = rsasign\nexports.plaintext = plaintext\nexports.sign = sign\nexports.rfc3986 = rfc3986\nexports.generateBase = generateBase", "'use strict'\n\nvar url = require('url')\nvar qs = require('qs')\nvar caseless = require('caseless')\nvar uuid = require('uuid/v4')\nvar oauth = require('oauth-sign')\nvar crypto = require('crypto')\nvar Buffer = require('safe-buffer').Buffer\n\nfunction OAuth (request) {\n  this.request = request\n  this.params = null\n}\n\nOAuth.prototype.buildParams = function (_oauth, uri, method, query, form, qsLib) {\n  var oa = {}\n  for (var i in _oauth) {\n    oa['oauth_' + i] = _oauth[i]\n  }\n  if (!oa.oauth_version) {\n    oa.oauth_version = '1.0'\n  }\n  if (!oa.oauth_timestamp) {\n    oa.oauth_timestamp = Math.floor(Date.now() / 1000).toString()\n  }\n  if (!oa.oauth_nonce) {\n    oa.oauth_nonce = uuid().replace(/-/g, '')\n  }\n  if (!oa.oauth_signature_method) {\n    oa.oauth_signature_method = 'HMAC-SHA1'\n  }\n\n  var consumer_secret_or_private_key = oa.oauth_consumer_secret || oa.oauth_private_key // eslint-disable-line camelcase\n  delete oa.oauth_consumer_secret\n  delete oa.oauth_private_key\n\n  var token_secret = oa.oauth_token_secret // eslint-disable-line camelcase\n  delete oa.oauth_token_secret\n\n  var realm = oa.oauth_realm\n  delete oa.oauth_realm\n  delete oa.oauth_transport_method\n\n  var baseurl = uri.protocol + '//' + uri.host + uri.pathname\n  var params = qsLib.parse([].concat(query, form, qsLib.stringify(oa)).join('&'))\n\n  oa.oauth_signature = oauth.sign(\n    oa.oauth_signature_method,\n    method,\n    baseurl,\n    params,\n    consumer_secret_or_private_key, // eslint-disable-line camelcase\n    token_secret // eslint-disable-line camelcase\n  )\n\n  if (realm) {\n    oa.realm = realm\n  }\n\n  return oa\n}\n\nOAuth.prototype.buildBodyHash = function (_oauth, body) {\n  if (['HMAC-SHA1', 'RSA-SHA1'].indexOf(_oauth.signature_method || 'HMAC-SHA1') < 0) {\n    this.request.emit('error', new Error('oauth: ' + _oauth.signature_method +\n      ' signature_method not supported with body_hash signing.'))\n  }\n\n  var shasum = crypto.createHash('sha1')\n  shasum.update(body || '')\n  var sha1 = shasum.digest('hex')\n\n  return Buffer.from(sha1, 'hex').toString('base64')\n}\n\nOAuth.prototype.concatParams = function (oa, sep, wrap) {\n  wrap = wrap || ''\n\n  var params = Object.keys(oa).filter(function (i) {\n    return i !== 'realm' && i !== 'oauth_signature'\n  }).sort()\n\n  if (oa.realm) {\n    params.splice(0, 0, 'realm')\n  }\n  params.push('oauth_signature')\n\n  return params.map(function (i) {\n    return i + '=' + wrap + oauth.rfc3986(oa[i]) + wrap\n  }).join(sep)\n}\n\nOAuth.prototype.onRequest = function (_oauth) {\n  var self = this\n  self.params = _oauth\n\n  var uri = self.request.uri || {}\n  var method = self.request.method || ''\n  var headers = caseless(self.request.headers)\n  var body = self.request.body || ''\n  var qsLib = self.request.qsLib || qs\n\n  var form\n  var query\n  var contentType = headers.get('content-type') || ''\n  var formContentType = 'application/x-www-form-urlencoded'\n  var transport = _oauth.transport_method || 'header'\n\n  if (contentType.slice(0, formContentType.length) === formContentType) {\n    contentType = formContentType\n    form = body\n  }\n  if (uri.query) {\n    query = uri.query\n  }\n  if (transport === 'body' && (method !== 'POST' || contentType !== formContentType)) {\n    self.request.emit('error', new Error('oauth: transport_method of body requires POST ' +\n      'and content-type ' + formContentType))\n  }\n\n  if (!form && typeof _oauth.body_hash === 'boolean') {\n    _oauth.body_hash = self.buildBodyHash(_oauth, self.request.body.toString())\n  }\n\n  var oa = self.buildParams(_oauth, uri, method, query, form, qsLib)\n\n  switch (transport) {\n    case 'header':\n      self.request.setHeader('Authorization', 'OAuth ' + self.concatParams(oa, ',', '\"'))\n      break\n\n    case 'query':\n      var href = self.request.uri.href += (query ? '&' : '?') + self.concatParams(oa, '&')\n      self.request.uri = url.parse(href)\n      self.request.path = self.request.uri.path\n      break\n\n    case 'body':\n      self.request.body = (form ? form + '&' : '') + self.concatParams(oa, '&')\n      break\n\n    default:\n      self.request.emit('error', new Error('oauth: transport_method invalid'))\n  }\n}\n\nexports.OAuth = OAuth\n", "'use strict'\n\nvar crypto = require('crypto')\n\nfunction randomString (size) {\n  var bits = (size + 1) * 6\n  var buffer = crypto.randomBytes(Math.ceil(bits / 8))\n  var string = buffer.toString('base64').replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=/g, '')\n  return string.slice(0, size)\n}\n\nfunction calculatePayloadHash (payload, algorithm, contentType) {\n  var hash = crypto.createHash(algorithm)\n  hash.update('hawk.1.payload\\n')\n  hash.update((contentType ? contentType.split(';')[0].trim().toLowerCase() : '') + '\\n')\n  hash.update(payload || '')\n  hash.update('\\n')\n  return hash.digest('base64')\n}\n\nexports.calculateMac = function (credentials, opts) {\n  var normalized = 'hawk.1.header\\n' +\n    opts.ts + '\\n' +\n    opts.nonce + '\\n' +\n    (opts.method || '').toUpperCase() + '\\n' +\n    opts.resource + '\\n' +\n    opts.host.toLowerCase() + '\\n' +\n    opts.port + '\\n' +\n    (opts.hash || '') + '\\n'\n\n  if (opts.ext) {\n    normalized = normalized + opts.ext.replace('\\\\', '\\\\\\\\').replace('\\n', '\\\\n')\n  }\n\n  normalized = normalized + '\\n'\n\n  if (opts.app) {\n    normalized = normalized + opts.app + '\\n' + (opts.dlg || '') + '\\n'\n  }\n\n  var hmac = crypto.createHmac(credentials.algorithm, credentials.key).update(normalized)\n  var digest = hmac.digest('base64')\n  return digest\n}\n\nexports.header = function (uri, method, opts) {\n  var timestamp = opts.timestamp || Math.floor((Date.now() + (opts.localtimeOffsetMsec || 0)) / 1000)\n  var credentials = opts.credentials\n  if (!credentials || !credentials.id || !credentials.key || !credentials.algorithm) {\n    return ''\n  }\n\n  if (['sha1', 'sha256'].indexOf(credentials.algorithm) === -1) {\n    return ''\n  }\n\n  var artifacts = {\n    ts: timestamp,\n    nonce: opts.nonce || randomString(6),\n    method: method,\n    resource: uri.pathname + (uri.search || ''),\n    host: uri.hostname,\n    port: uri.port || (uri.protocol === 'http:' ? 80 : 443),\n    hash: opts.hash,\n    ext: opts.ext,\n    app: opts.app,\n    dlg: opts.dlg\n  }\n\n  if (!artifacts.hash && (opts.payload || opts.payload === '')) {\n    artifacts.hash = calculatePayloadHash(opts.payload, credentials.algorithm, opts.contentType)\n  }\n\n  var mac = exports.calculateMac(credentials, artifacts)\n\n  var hasExt = artifacts.ext !== null && artifacts.ext !== undefined && artifacts.ext !== ''\n  var header = 'Hawk id=\"' + credentials.id +\n    '\", ts=\"' + artifacts.ts +\n    '\", nonce=\"' + artifacts.nonce +\n    (artifacts.hash ? '\", hash=\"' + artifacts.hash : '') +\n    (hasExt ? '\", ext=\"' + artifacts.ext.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"') : '') +\n    '\", mac=\"' + mac + '\"'\n\n  if (artifacts.app) {\n    header = header + ', app=\"' + artifacts.app + (artifacts.dlg ? '\", dlg=\"' + artifacts.dlg : '') + '\"'\n  }\n\n  return header\n}\n", "'use strict'\n\nvar uuid = require('uuid/v4')\nvar CombinedStream = require('combined-stream')\nvar isstream = require('isstream')\nvar Buffer = require('safe-buffer').Buffer\n\nfunction Multipart (request) {\n  this.request = request\n  this.boundary = uuid()\n  this.chunked = false\n  this.body = null\n}\n\nMultipart.prototype.isChunked = function (options) {\n  var self = this\n  var chunked = false\n  var parts = options.data || options\n\n  if (!parts.forEach) {\n    self.request.emit('error', new Error('Argument error, options.multipart.'))\n  }\n\n  if (options.chunked !== undefined) {\n    chunked = options.chunked\n  }\n\n  if (self.request.getHeader('transfer-encoding') === 'chunked') {\n    chunked = true\n  }\n\n  if (!chunked) {\n    parts.forEach(function (part) {\n      if (typeof part.body === 'undefined') {\n        self.request.emit('error', new Error('Body attribute missing in multipart.'))\n      }\n      if (isstream(part.body)) {\n        chunked = true\n      }\n    })\n  }\n\n  return chunked\n}\n\nMultipart.prototype.setHeaders = function (chunked) {\n  var self = this\n\n  if (chunked && !self.request.hasHeader('transfer-encoding')) {\n    self.request.setHeader('transfer-encoding', 'chunked')\n  }\n\n  var header = self.request.getHeader('content-type')\n\n  if (!header || header.indexOf('multipart') === -1) {\n    self.request.setHeader('content-type', 'multipart/related; boundary=' + self.boundary)\n  } else {\n    if (header.indexOf('boundary') !== -1) {\n      self.boundary = header.replace(/.*boundary=([^\\s;]+).*/, '$1')\n    } else {\n      self.request.setHeader('content-type', header + '; boundary=' + self.boundary)\n    }\n  }\n}\n\nMultipart.prototype.build = function (parts, chunked) {\n  var self = this\n  var body = chunked ? new CombinedStream() : []\n\n  function add (part) {\n    if (typeof part === 'number') {\n      part = part.toString()\n    }\n    return chunked ? body.append(part) : body.push(Buffer.from(part))\n  }\n\n  if (self.request.preambleCRLF) {\n    add('\\r\\n')\n  }\n\n  parts.forEach(function (part) {\n    var preamble = '--' + self.boundary + '\\r\\n'\n    Object.keys(part).forEach(function (key) {\n      if (key === 'body') { return }\n      preamble += key + ': ' + part[key] + '\\r\\n'\n    })\n    preamble += '\\r\\n'\n    add(preamble)\n    add(part.body)\n    add('\\r\\n')\n  })\n  add('--' + self.boundary + '--')\n\n  if (self.request.postambleCRLF) {\n    add('\\r\\n')\n  }\n\n  return body\n}\n\nMultipart.prototype.onRequest = function (options) {\n  var self = this\n\n  var chunked = self.isChunked(options)\n  var parts = options.data || options\n\n  self.setHeaders(chunked)\n  self.chunked = chunked\n  self.body = self.build(parts, chunked)\n}\n\nexports.Multipart = Multipart\n", "'use strict'\n\nvar url = require('url')\nvar isUrl = /^https?:/\n\nfunction Redirect (request) {\n  this.request = request\n  this.followRedirect = true\n  this.followRedirects = true\n  this.followAllRedirects = false\n  this.followOriginalHttpMethod = false\n  this.allowRedirect = function () { return true }\n  this.maxRedirects = 10\n  this.redirects = []\n  this.redirectsFollowed = 0\n  this.removeRefererHeader = false\n}\n\nRedirect.prototype.onRequest = function (options) {\n  var self = this\n\n  if (options.maxRedirects !== undefined) {\n    self.maxRedirects = options.maxRedirects\n  }\n  if (typeof options.followRedirect === 'function') {\n    self.allowRedirect = options.followRedirect\n  }\n  if (options.followRedirect !== undefined) {\n    self.followRedirects = !!options.followRedirect\n  }\n  if (options.followAllRedirects !== undefined) {\n    self.followAllRedirects = options.followAllRedirects\n  }\n  if (self.followRedirects || self.followAllRedirects) {\n    self.redirects = self.redirects || []\n  }\n  if (options.removeRefererHeader !== undefined) {\n    self.removeRefererHeader = options.removeRefererHeader\n  }\n  if (options.followOriginalHttpMethod !== undefined) {\n    self.followOriginalHttpMethod = options.followOriginalHttpMethod\n  }\n}\n\nRedirect.prototype.redirectTo = function (response) {\n  var self = this\n  var request = self.request\n\n  var redirectTo = null\n  if (response.statusCode >= 300 && response.statusCode < 400 && response.caseless.has('location')) {\n    var location = response.caseless.get('location')\n    request.debug('redirect', location)\n\n    if (self.followAllRedirects) {\n      redirectTo = location\n    } else if (self.followRedirects) {\n      switch (request.method) {\n        case 'PATCH':\n        case 'PUT':\n        case 'POST':\n        case 'DELETE':\n          // Do not follow redirects\n          break\n        default:\n          redirectTo = location\n          break\n      }\n    }\n  } else if (response.statusCode === 401) {\n    var authHeader = request._auth.onResponse(response)\n    if (authHeader) {\n      request.setHeader('authorization', authHeader)\n      redirectTo = request.uri\n    }\n  }\n  return redirectTo\n}\n\nRedirect.prototype.onResponse = function (response) {\n  var self = this\n  var request = self.request\n\n  var redirectTo = self.redirectTo(response)\n  if (!redirectTo || !self.allowRedirect.call(request, response)) {\n    return false\n  }\n\n  request.debug('redirect to', redirectTo)\n\n  // ignore any potential response body.  it cannot possibly be useful\n  // to us at this point.\n  // response.resume should be defined, but check anyway before calling. Workaround for browserify.\n  if (response.resume) {\n    response.resume()\n  }\n\n  if (self.redirectsFollowed >= self.maxRedirects) {\n    request.emit('error', new Error('Exceeded maxRedirects. Probably stuck in a redirect loop ' + request.uri.href))\n    return false\n  }\n  self.redirectsFollowed += 1\n\n  if (!isUrl.test(redirectTo)) {\n    redirectTo = url.resolve(request.uri.href, redirectTo)\n  }\n\n  var uriPrev = request.uri\n  request.uri = url.parse(redirectTo)\n\n  // handle the case where we change protocol from https to http or vice versa\n  if (request.uri.protocol !== uriPrev.protocol) {\n    delete request.agent\n  }\n\n  self.redirects.push({ statusCode: response.statusCode, redirectUri: redirectTo })\n\n  if (self.followAllRedirects && request.method !== 'HEAD' &&\n    response.statusCode !== 401 && response.statusCode !== 307) {\n    request.method = self.followOriginalHttpMethod ? request.method : 'GET'\n  }\n  // request.method = 'GET' // Force all redirects to use GET || commented out fixes #215\n  delete request.src\n  delete request.req\n  delete request._started\n  if (response.statusCode !== 401 && response.statusCode !== 307) {\n    // Remove parameters from the previous response, unless this is the second request\n    // for a server that requires digest authentication.\n    delete request.body\n    delete request._form\n    if (request.headers) {\n      request.removeHeader('host')\n      request.removeHeader('content-type')\n      request.removeHeader('content-length')\n      if (request.uri.hostname !== request.originalHost.split(':')[0]) {\n        // Remove authorization if changing hostnames (but not if just\n        // changing ports or protocols).  This matches the behavior of curl:\n        // https://github.com/bagder/curl/blob/6beb0eee/lib/http.c#L710\n        request.removeHeader('authorization')\n      }\n    }\n  }\n\n  if (!self.removeRefererHeader) {\n    request.setHeader('referer', uriPrev.href)\n  }\n\n  request.emit('redirect')\n\n  request.init()\n\n  return true\n}\n\nexports.Redirect = Redirect\n", "'use strict'\n\nvar net = require('net')\n  , tls = require('tls')\n  , http = require('http')\n  , https = require('https')\n  , events = require('events')\n  , assert = require('assert')\n  , util = require('util')\n  , Buffer = require('safe-buffer').Buffer\n  ;\n\nexports.httpOverHttp = httpOverHttp\nexports.httpsOverHttp = httpsOverHttp\nexports.httpOverHttps = httpOverHttps\nexports.httpsOverHttps = httpsOverHttps\n\n\nfunction httpOverHttp(options) {\n  var agent = new TunnelingAgent(options)\n  agent.request = http.request\n  return agent\n}\n\nfunction httpsOverHttp(options) {\n  var agent = new TunnelingAgent(options)\n  agent.request = http.request\n  agent.createSocket = createSecureSocket\n  agent.defaultPort = 443\n  return agent\n}\n\nfunction httpOverHttps(options) {\n  var agent = new TunnelingAgent(options)\n  agent.request = https.request\n  return agent\n}\n\nfunction httpsOverHttps(options) {\n  var agent = new TunnelingAgent(options)\n  agent.request = https.request\n  agent.createSocket = createSecureSocket\n  agent.defaultPort = 443\n  return agent\n}\n\n\nfunction TunnelingAgent(options) {\n  var self = this\n  self.options = options || {}\n  self.proxyOptions = self.options.proxy || {}\n  self.maxSockets = self.options.maxSockets || http.Agent.defaultMaxSockets\n  self.requests = []\n  self.sockets = []\n\n  self.on('free', function onFree(socket, host, port) {\n    for (var i = 0, len = self.requests.length; i < len; ++i) {\n      var pending = self.requests[i]\n      if (pending.host === host && pending.port === port) {\n        // Detect the request to connect same origin server,\n        // reuse the connection.\n        self.requests.splice(i, 1)\n        pending.request.onSocket(socket)\n        return\n      }\n    }\n    socket.destroy()\n    self.removeSocket(socket)\n  })\n}\nutil.inherits(TunnelingAgent, events.EventEmitter)\n\nTunnelingAgent.prototype.addRequest = function addRequest(req, options) {\n  var self = this\n\n   // Legacy API: addRequest(req, host, port, path)\n  if (typeof options === 'string') {\n    options = {\n      host: options,\n      port: arguments[2],\n      path: arguments[3]\n    };\n  }\n\n  if (self.sockets.length >= this.maxSockets) {\n    // We are over limit so we'll add it to the queue.\n    self.requests.push({host: options.host, port: options.port, request: req})\n    return\n  }\n\n  // If we are under maxSockets create a new one.\n  self.createConnection({host: options.host, port: options.port, request: req})\n}\n\nTunnelingAgent.prototype.createConnection = function createConnection(pending) {\n  var self = this\n\n  self.createSocket(pending, function(socket) {\n    socket.on('free', onFree)\n    socket.on('close', onCloseOrRemove)\n    socket.on('agentRemove', onCloseOrRemove)\n    pending.request.onSocket(socket)\n\n    function onFree() {\n      self.emit('free', socket, pending.host, pending.port)\n    }\n\n    function onCloseOrRemove(err) {\n      self.removeSocket(socket)\n      socket.removeListener('free', onFree)\n      socket.removeListener('close', onCloseOrRemove)\n      socket.removeListener('agentRemove', onCloseOrRemove)\n    }\n  })\n}\n\nTunnelingAgent.prototype.createSocket = function createSocket(options, cb) {\n  var self = this\n  var placeholder = {}\n  self.sockets.push(placeholder)\n\n  var connectOptions = mergeOptions({}, self.proxyOptions,\n    { method: 'CONNECT'\n    , path: options.host + ':' + options.port\n    , agent: false\n    }\n  )\n  if (connectOptions.proxyAuth) {\n    connectOptions.headers = connectOptions.headers || {}\n    connectOptions.headers['Proxy-Authorization'] = 'Basic ' +\n        Buffer.from(connectOptions.proxyAuth).toString('base64')\n  }\n\n  debug('making CONNECT request')\n  var connectReq = self.request(connectOptions)\n  connectReq.useChunkedEncodingByDefault = false // for v0.6\n  connectReq.once('response', onResponse) // for v0.6\n  connectReq.once('upgrade', onUpgrade)   // for v0.6\n  connectReq.once('connect', onConnect)   // for v0.7 or later\n  connectReq.once('error', onError)\n  connectReq.end()\n\n  function onResponse(res) {\n    // Very hacky. This is necessary to avoid http-parser leaks.\n    res.upgrade = true\n  }\n\n  function onUpgrade(res, socket, head) {\n    // Hacky.\n    process.nextTick(function() {\n      onConnect(res, socket, head)\n    })\n  }\n\n  function onConnect(res, socket, head) {\n    connectReq.removeAllListeners()\n    socket.removeAllListeners()\n\n    if (res.statusCode === 200) {\n      assert.equal(head.length, 0)\n      debug('tunneling connection has established')\n      self.sockets[self.sockets.indexOf(placeholder)] = socket\n      cb(socket)\n    } else {\n      debug('tunneling socket could not be established, statusCode=%d', res.statusCode)\n      var error = new Error('tunneling socket could not be established, ' + 'statusCode=' + res.statusCode)\n      error.code = 'ECONNRESET'\n      options.request.emit('error', error)\n      self.removeSocket(placeholder)\n    }\n  }\n\n  function onError(cause) {\n    connectReq.removeAllListeners()\n\n    debug('tunneling socket could not be established, cause=%s\\n', cause.message, cause.stack)\n    var error = new Error('tunneling socket could not be established, ' + 'cause=' + cause.message)\n    error.code = 'ECONNRESET'\n    options.request.emit('error', error)\n    self.removeSocket(placeholder)\n  }\n}\n\nTunnelingAgent.prototype.removeSocket = function removeSocket(socket) {\n  var pos = this.sockets.indexOf(socket)\n  if (pos === -1) return\n\n  this.sockets.splice(pos, 1)\n\n  var pending = this.requests.shift()\n  if (pending) {\n    // If we have pending requests and a socket gets closed a new one\n    // needs to be created to take over in the pool for the one that closed.\n    this.createConnection(pending)\n  }\n}\n\nfunction createSecureSocket(options, cb) {\n  var self = this\n  TunnelingAgent.prototype.createSocket.call(self, options, function(socket) {\n    // 0 is dummy port for v0.6\n    var secureSocket = tls.connect(0, mergeOptions({}, self.options,\n      { servername: options.host\n      , socket: socket\n      }\n    ))\n    self.sockets[self.sockets.indexOf(socket)] = secureSocket\n    cb(secureSocket)\n  })\n}\n\n\nfunction mergeOptions(target) {\n  for (var i = 1, len = arguments.length; i < len; ++i) {\n    var overrides = arguments[i]\n    if (typeof overrides === 'object') {\n      var keys = Object.keys(overrides)\n      for (var j = 0, keyLen = keys.length; j < keyLen; ++j) {\n        var k = keys[j]\n        if (overrides[k] !== undefined) {\n          target[k] = overrides[k]\n        }\n      }\n    }\n  }\n  return target\n}\n\n\nvar debug\nif (process.env.NODE_DEBUG && /\\btunnel\\b/.test(process.env.NODE_DEBUG)) {\n  debug = function() {\n    var args = Array.prototype.slice.call(arguments)\n    if (typeof args[0] === 'string') {\n      args[0] = 'TUNNEL: ' + args[0]\n    } else {\n      args.unshift('TUNNEL:')\n    }\n    console.error.apply(console, args)\n  }\n} else {\n  debug = function() {}\n}\nexports.debug = debug // for test\n", "'use strict'\n\nvar url = require('url')\nvar tunnel = require('tunnel-agent')\n\nvar defaultProxyHeaderWhiteList = [\n  'accept',\n  'accept-charset',\n  'accept-encoding',\n  'accept-language',\n  'accept-ranges',\n  'cache-control',\n  'content-encoding',\n  'content-language',\n  'content-location',\n  'content-md5',\n  'content-range',\n  'content-type',\n  'connection',\n  'date',\n  'expect',\n  'max-forwards',\n  'pragma',\n  'referer',\n  'te',\n  'user-agent',\n  'via'\n]\n\nvar defaultProxyHeaderExclusiveList = [\n  'proxy-authorization'\n]\n\nfunction constructProxyHost (uriObject) {\n  var port = uriObject.port\n  var protocol = uriObject.protocol\n  var proxyHost = uriObject.hostname + ':'\n\n  if (port) {\n    proxyHost += port\n  } else if (protocol === 'https:') {\n    proxyHost += '443'\n  } else {\n    proxyHost += '80'\n  }\n\n  return proxyHost\n}\n\nfunction constructProxyHeaderWhiteList (headers, proxyHeaderWhiteList) {\n  var whiteList = proxyHeaderWhiteList\n    .reduce(function (set, header) {\n      set[header.toLowerCase()] = true\n      return set\n    }, {})\n\n  return Object.keys(headers)\n    .filter(function (header) {\n      return whiteList[header.toLowerCase()]\n    })\n    .reduce(function (set, header) {\n      set[header] = headers[header]\n      return set\n    }, {})\n}\n\nfunction constructTunnelOptions (request, proxyHeaders) {\n  var proxy = request.proxy\n\n  var tunnelOptions = {\n    proxy: {\n      host: proxy.hostname,\n      port: +proxy.port,\n      proxyAuth: proxy.auth,\n      headers: proxyHeaders\n    },\n    headers: request.headers,\n    ca: request.ca,\n    cert: request.cert,\n    key: request.key,\n    passphrase: request.passphrase,\n    pfx: request.pfx,\n    ciphers: request.ciphers,\n    rejectUnauthorized: request.rejectUnauthorized,\n    secureOptions: request.secureOptions,\n    secureProtocol: request.secureProtocol\n  }\n\n  return tunnelOptions\n}\n\nfunction constructTunnelFnName (uri, proxy) {\n  var uriProtocol = (uri.protocol === 'https:' ? 'https' : 'http')\n  var proxyProtocol = (proxy.protocol === 'https:' ? 'Https' : 'Http')\n  return [uriProtocol, proxyProtocol].join('Over')\n}\n\nfunction getTunnelFn (request) {\n  var uri = request.uri\n  var proxy = request.proxy\n  var tunnelFnName = constructTunnelFnName(uri, proxy)\n  return tunnel[tunnelFnName]\n}\n\nfunction Tunnel (request) {\n  this.request = request\n  this.proxyHeaderWhiteList = defaultProxyHeaderWhiteList\n  this.proxyHeaderExclusiveList = []\n  if (typeof request.tunnel !== 'undefined') {\n    this.tunnelOverride = request.tunnel\n  }\n}\n\nTunnel.prototype.isEnabled = function () {\n  var self = this\n  var request = self.request\n    // Tunnel HTTPS by default. Allow the user to override this setting.\n\n  // If self.tunnelOverride is set (the user specified a value), use it.\n  if (typeof self.tunnelOverride !== 'undefined') {\n    return self.tunnelOverride\n  }\n\n  // If the destination is HTTPS, tunnel.\n  if (request.uri.protocol === 'https:') {\n    return true\n  }\n\n  // Otherwise, do not use tunnel.\n  return false\n}\n\nTunnel.prototype.setup = function (options) {\n  var self = this\n  var request = self.request\n\n  options = options || {}\n\n  if (typeof request.proxy === 'string') {\n    request.proxy = url.parse(request.proxy)\n  }\n\n  if (!request.proxy || !request.tunnel) {\n    return false\n  }\n\n  // Setup Proxy Header Exclusive List and White List\n  if (options.proxyHeaderWhiteList) {\n    self.proxyHeaderWhiteList = options.proxyHeaderWhiteList\n  }\n  if (options.proxyHeaderExclusiveList) {\n    self.proxyHeaderExclusiveList = options.proxyHeaderExclusiveList\n  }\n\n  var proxyHeaderExclusiveList = self.proxyHeaderExclusiveList.concat(defaultProxyHeaderExclusiveList)\n  var proxyHeaderWhiteList = self.proxyHeaderWhiteList.concat(proxyHeaderExclusiveList)\n\n  // Setup Proxy Headers and Proxy Headers Host\n  // Only send the Proxy White Listed Header names\n  var proxyHeaders = constructProxyHeaderWhiteList(request.headers, proxyHeaderWhiteList)\n  proxyHeaders.host = constructProxyHost(request.uri)\n\n  proxyHeaderExclusiveList.forEach(request.removeHeader, request)\n\n  // Set Agent from Tunnel Data\n  var tunnelFn = getTunnelFn(request)\n  var tunnelOptions = constructTunnelOptions(request, proxyHeaders)\n  request.agent = tunnelFn(tunnelOptions)\n\n  return true\n}\n\nTunnel.defaultProxyHeaderWhiteList = defaultProxyHeaderWhiteList\nTunnel.defaultProxyHeaderExclusiveList = defaultProxyHeaderExclusiveList\nexports.Tunnel = Tunnel\n", null, "'use strict'\n\nvar http = require('http')\nvar https = require('https')\nvar url = require('url')\nvar util = require('util')\nvar stream = require('stream')\nvar zlib = require('zlib')\nvar aws2 = require('aws-sign2')\nvar aws4 = require('aws4')\nvar httpSignature = require('http-signature')\nvar mime = require('mime-types')\nvar caseless = require('caseless')\nvar ForeverAgent = require('forever-agent')\nvar FormData = require('form-data')\nvar extend = require('extend')\nvar isstream = require('isstream')\nvar isTypedArray = require('is-typedarray').strict\nvar helpers = require('./lib/helpers')\nvar cookies = require('./lib/cookies')\nvar getProxyFromURI = require('./lib/getProxyFromURI')\nvar Querystring = require('./lib/querystring').Querystring\nvar Har = require('./lib/har').Har\nvar Auth = require('./lib/auth').Auth\nvar OAuth = require('./lib/oauth').OAuth\nvar hawk = require('./lib/hawk')\nvar Multipart = require('./lib/multipart').Multipart\nvar Redirect = require('./lib/redirect').Redirect\nvar Tunnel = require('./lib/tunnel').Tunnel\nvar now = require('performance-now')\nvar Buffer = require('safe-buffer').Buffer\n\nvar safeStringify = helpers.safeStringify\nvar isReadStream = helpers.isReadStream\nvar toBase64 = helpers.toBase64\nvar defer = helpers.defer\nvar copy = helpers.copy\nvar version = helpers.version\nvar globalCookieJar = cookies.jar()\n\nvar globalPool = {}\n\nfunction filterForNonReserved (reserved, options) {\n  // Filter out properties that are not reserved.\n  // Reserved values are passed in at call site.\n\n  var object = {}\n  for (var i in options) {\n    var notReserved = (reserved.indexOf(i) === -1)\n    if (notReserved) {\n      object[i] = options[i]\n    }\n  }\n  return object\n}\n\nfunction filterOutReservedFunctions (reserved, options) {\n  // Filter out properties that are functions and are reserved.\n  // Reserved values are passed in at call site.\n\n  var object = {}\n  for (var i in options) {\n    var isReserved = !(reserved.indexOf(i) === -1)\n    var isFunction = (typeof options[i] === 'function')\n    if (!(isReserved && isFunction)) {\n      object[i] = options[i]\n    }\n  }\n  return object\n}\n\n// Return a simpler request object to allow serialization\nfunction requestToJSON () {\n  var self = this\n  return {\n    uri: self.uri,\n    method: self.method,\n    headers: self.headers\n  }\n}\n\n// Return a simpler response object to allow serialization\nfunction responseToJSON () {\n  var self = this\n  return {\n    statusCode: self.statusCode,\n    body: self.body,\n    headers: self.headers,\n    request: requestToJSON.call(self.request)\n  }\n}\n\nfunction Request (options) {\n  // if given the method property in options, set property explicitMethod to true\n\n  // extend the Request instance with any non-reserved properties\n  // remove any reserved functions from the options object\n  // set Request instance to be readable and writable\n  // call init\n\n  var self = this\n\n  // start with HAR, then override with additional options\n  if (options.har) {\n    self._har = new Har(self)\n    options = self._har.options(options)\n  }\n\n  stream.Stream.call(self)\n  var reserved = Object.keys(Request.prototype)\n  var nonReserved = filterForNonReserved(reserved, options)\n\n  extend(self, nonReserved)\n  options = filterOutReservedFunctions(reserved, options)\n\n  self.readable = true\n  self.writable = true\n  if (options.method) {\n    self.explicitMethod = true\n  }\n  self._qs = new Querystring(self)\n  self._auth = new Auth(self)\n  self._oauth = new OAuth(self)\n  self._multipart = new Multipart(self)\n  self._redirect = new Redirect(self)\n  self._tunnel = new Tunnel(self)\n  self.init(options)\n}\n\nutil.inherits(Request, stream.Stream)\n\n// Debugging\nRequest.debug = process.env.NODE_DEBUG && /\\brequest\\b/.test(process.env.NODE_DEBUG)\nfunction debug () {\n  if (Request.debug) {\n    console.error('REQUEST %s', util.format.apply(util, arguments))\n  }\n}\nRequest.prototype.debug = debug\n\nRequest.prototype.init = function (options) {\n  // init() contains all the code to setup the request object.\n  // the actual outgoing request is not started until start() is called\n  // this function is called from both the constructor and on redirect.\n  var self = this\n  if (!options) {\n    options = {}\n  }\n  self.headers = self.headers ? copy(self.headers) : {}\n\n  // Delete headers with value undefined since they break\n  // ClientRequest.OutgoingMessage.setHeader in node 0.12\n  for (var headerName in self.headers) {\n    if (typeof self.headers[headerName] === 'undefined') {\n      delete self.headers[headerName]\n    }\n  }\n\n  caseless.httpify(self, self.headers)\n\n  if (!self.method) {\n    self.method = options.method || 'GET'\n  }\n  if (!self.localAddress) {\n    self.localAddress = options.localAddress\n  }\n\n  self._qs.init(options)\n\n  debug(options)\n  if (!self.pool && self.pool !== false) {\n    self.pool = globalPool\n  }\n  self.dests = self.dests || []\n  self.__isRequestRequest = true\n\n  // Protect against double callback\n  if (!self._callback && self.callback) {\n    self._callback = self.callback\n    self.callback = function () {\n      if (self._callbackCalled) {\n        return // Print a warning maybe?\n      }\n      self._callbackCalled = true\n      self._callback.apply(self, arguments)\n    }\n    self.on('error', self.callback.bind())\n    self.on('complete', self.callback.bind(self, null))\n  }\n\n  // People use this property instead all the time, so support it\n  if (!self.uri && self.url) {\n    self.uri = self.url\n    delete self.url\n  }\n\n  // If there's a baseUrl, then use it as the base URL (i.e. uri must be\n  // specified as a relative path and is appended to baseUrl).\n  if (self.baseUrl) {\n    if (typeof self.baseUrl !== 'string') {\n      return self.emit('error', new Error('options.baseUrl must be a string'))\n    }\n\n    if (typeof self.uri !== 'string') {\n      return self.emit('error', new Error('options.uri must be a string when using options.baseUrl'))\n    }\n\n    if (self.uri.indexOf('//') === 0 || self.uri.indexOf('://') !== -1) {\n      return self.emit('error', new Error('options.uri must be a path when using options.baseUrl'))\n    }\n\n    // Handle all cases to make sure that there's only one slash between\n    // baseUrl and uri.\n    var baseUrlEndsWithSlash = self.baseUrl.lastIndexOf('/') === self.baseUrl.length - 1\n    var uriStartsWithSlash = self.uri.indexOf('/') === 0\n\n    if (baseUrlEndsWithSlash && uriStartsWithSlash) {\n      self.uri = self.baseUrl + self.uri.slice(1)\n    } else if (baseUrlEndsWithSlash || uriStartsWithSlash) {\n      self.uri = self.baseUrl + self.uri\n    } else if (self.uri === '') {\n      self.uri = self.baseUrl\n    } else {\n      self.uri = self.baseUrl + '/' + self.uri\n    }\n    delete self.baseUrl\n  }\n\n  // A URI is needed by this point, emit error if we haven't been able to get one\n  if (!self.uri) {\n    return self.emit('error', new Error('options.uri is a required argument'))\n  }\n\n  // If a string URI/URL was given, parse it into a URL object\n  if (typeof self.uri === 'string') {\n    self.uri = url.parse(self.uri)\n  }\n\n  // Some URL objects are not from a URL parsed string and need href added\n  if (!self.uri.href) {\n    self.uri.href = url.format(self.uri)\n  }\n\n  // DEPRECATED: Warning for users of the old Unix Sockets URL Scheme\n  if (self.uri.protocol === 'unix:') {\n    return self.emit('error', new Error('`unix://` URL scheme is no longer supported. Please use the format `http://unix:SOCKET:PATH`'))\n  }\n\n  // Support Unix Sockets\n  if (self.uri.host === 'unix') {\n    self.enableUnixSocket()\n  }\n\n  if (self.strictSSL === false) {\n    self.rejectUnauthorized = false\n  }\n\n  if (!self.uri.pathname) { self.uri.pathname = '/' }\n\n  if (!(self.uri.host || (self.uri.hostname && self.uri.port)) && !self.uri.isUnix) {\n    // Invalid URI: it may generate lot of bad errors, like 'TypeError: Cannot call method `indexOf` of undefined' in CookieJar\n    // Detect and reject it as soon as possible\n    var faultyUri = url.format(self.uri)\n    var message = 'Invalid URI \"' + faultyUri + '\"'\n    if (Object.keys(options).length === 0) {\n      // No option ? This can be the sign of a redirect\n      // As this is a case where the user cannot do anything (they didn't call request directly with this URL)\n      // they should be warned that it can be caused by a redirection (can save some hair)\n      message += '. This can be caused by a crappy redirection.'\n    }\n    // This error was fatal\n    self.abort()\n    return self.emit('error', new Error(message))\n  }\n\n  if (!self.hasOwnProperty('proxy')) {\n    self.proxy = getProxyFromURI(self.uri)\n  }\n\n  self.tunnel = self._tunnel.isEnabled()\n  if (self.proxy) {\n    self._tunnel.setup(options)\n  }\n\n  self._redirect.onRequest(options)\n\n  self.setHost = false\n  if (!self.hasHeader('host')) {\n    var hostHeaderName = self.originalHostHeaderName || 'host'\n    self.setHeader(hostHeaderName, self.uri.host)\n    // Drop :port suffix from Host header if known protocol.\n    if (self.uri.port) {\n      if ((self.uri.port === '80' && self.uri.protocol === 'http:') ||\n          (self.uri.port === '443' && self.uri.protocol === 'https:')) {\n        self.setHeader(hostHeaderName, self.uri.hostname)\n      }\n    }\n    self.setHost = true\n  }\n\n  self.jar(self._jar || options.jar)\n\n  if (!self.uri.port) {\n    if (self.uri.protocol === 'http:') { self.uri.port = 80 } else if (self.uri.protocol === 'https:') { self.uri.port = 443 }\n  }\n\n  if (self.proxy && !self.tunnel) {\n    self.port = self.proxy.port\n    self.host = self.proxy.hostname\n  } else {\n    self.port = self.uri.port\n    self.host = self.uri.hostname\n  }\n\n  if (options.form) {\n    self.form(options.form)\n  }\n\n  if (options.formData) {\n    var formData = options.formData\n    var requestForm = self.form()\n    var appendFormValue = function (key, value) {\n      if (value && value.hasOwnProperty('value') && value.hasOwnProperty('options')) {\n        requestForm.append(key, value.value, value.options)\n      } else {\n        requestForm.append(key, value)\n      }\n    }\n    for (var formKey in formData) {\n      if (formData.hasOwnProperty(formKey)) {\n        var formValue = formData[formKey]\n        if (formValue instanceof Array) {\n          for (var j = 0; j < formValue.length; j++) {\n            appendFormValue(formKey, formValue[j])\n          }\n        } else {\n          appendFormValue(formKey, formValue)\n        }\n      }\n    }\n  }\n\n  if (options.qs) {\n    self.qs(options.qs)\n  }\n\n  if (self.uri.path) {\n    self.path = self.uri.path\n  } else {\n    self.path = self.uri.pathname + (self.uri.search || '')\n  }\n\n  if (self.path.length === 0) {\n    self.path = '/'\n  }\n\n  // Auth must happen last in case signing is dependent on other headers\n  if (options.aws) {\n    self.aws(options.aws)\n  }\n\n  if (options.hawk) {\n    self.hawk(options.hawk)\n  }\n\n  if (options.httpSignature) {\n    self.httpSignature(options.httpSignature)\n  }\n\n  if (options.auth) {\n    if (Object.prototype.hasOwnProperty.call(options.auth, 'username')) {\n      options.auth.user = options.auth.username\n    }\n    if (Object.prototype.hasOwnProperty.call(options.auth, 'password')) {\n      options.auth.pass = options.auth.password\n    }\n\n    self.auth(\n      options.auth.user,\n      options.auth.pass,\n      options.auth.sendImmediately,\n      options.auth.bearer\n    )\n  }\n\n  if (self.gzip && !self.hasHeader('accept-encoding')) {\n    self.setHeader('accept-encoding', 'gzip, deflate')\n  }\n\n  if (self.uri.auth && !self.hasHeader('authorization')) {\n    var uriAuthPieces = self.uri.auth.split(':').map(function (item) { return self._qs.unescape(item) })\n    self.auth(uriAuthPieces[0], uriAuthPieces.slice(1).join(':'), true)\n  }\n\n  if (!self.tunnel && self.proxy && self.proxy.auth && !self.hasHeader('proxy-authorization')) {\n    var proxyAuthPieces = self.proxy.auth.split(':').map(function (item) { return self._qs.unescape(item) })\n    var authHeader = 'Basic ' + toBase64(proxyAuthPieces.join(':'))\n    self.setHeader('proxy-authorization', authHeader)\n  }\n\n  if (self.proxy && !self.tunnel) {\n    self.path = (self.uri.protocol + '//' + self.uri.host + self.path)\n  }\n\n  if (options.json) {\n    self.json(options.json)\n  }\n  if (options.multipart) {\n    self.multipart(options.multipart)\n  }\n\n  if (options.time) {\n    self.timing = true\n\n    // NOTE: elapsedTime is deprecated in favor of .timings\n    self.elapsedTime = self.elapsedTime || 0\n  }\n\n  function setContentLength () {\n    if (isTypedArray(self.body)) {\n      self.body = Buffer.from(self.body)\n    }\n\n    if (!self.hasHeader('content-length')) {\n      var length\n      if (typeof self.body === 'string') {\n        length = Buffer.byteLength(self.body)\n      } else if (Array.isArray(self.body)) {\n        length = self.body.reduce(function (a, b) { return a + b.length }, 0)\n      } else {\n        length = self.body.length\n      }\n\n      if (length) {\n        self.setHeader('content-length', length)\n      } else {\n        self.emit('error', new Error('Argument error, options.body.'))\n      }\n    }\n  }\n  if (self.body && !isstream(self.body)) {\n    setContentLength()\n  }\n\n  if (options.oauth) {\n    self.oauth(options.oauth)\n  } else if (self._oauth.params && self.hasHeader('authorization')) {\n    self.oauth(self._oauth.params)\n  }\n\n  var protocol = self.proxy && !self.tunnel ? self.proxy.protocol : self.uri.protocol\n  var defaultModules = {'http:': http, 'https:': https}\n  var httpModules = self.httpModules || {}\n\n  self.httpModule = httpModules[protocol] || defaultModules[protocol]\n\n  if (!self.httpModule) {\n    return self.emit('error', new Error('Invalid protocol: ' + protocol))\n  }\n\n  if (options.ca) {\n    self.ca = options.ca\n  }\n\n  if (!self.agent) {\n    if (options.agentOptions) {\n      self.agentOptions = options.agentOptions\n    }\n\n    if (options.agentClass) {\n      self.agentClass = options.agentClass\n    } else if (options.forever) {\n      var v = version()\n      // use ForeverAgent in node 0.10- only\n      if (v.major === 0 && v.minor <= 10) {\n        self.agentClass = protocol === 'http:' ? ForeverAgent : ForeverAgent.SSL\n      } else {\n        self.agentClass = self.httpModule.Agent\n        self.agentOptions = self.agentOptions || {}\n        self.agentOptions.keepAlive = true\n      }\n    } else {\n      self.agentClass = self.httpModule.Agent\n    }\n  }\n\n  if (self.pool === false) {\n    self.agent = false\n  } else {\n    self.agent = self.agent || self.getNewAgent()\n  }\n\n  self.on('pipe', function (src) {\n    if (self.ntick && self._started) {\n      self.emit('error', new Error('You cannot pipe to this stream after the outbound request has started.'))\n    }\n    self.src = src\n    if (isReadStream(src)) {\n      if (!self.hasHeader('content-type')) {\n        self.setHeader('content-type', mime.lookup(src.path))\n      }\n    } else {\n      if (src.headers) {\n        for (var i in src.headers) {\n          if (!self.hasHeader(i)) {\n            self.setHeader(i, src.headers[i])\n          }\n        }\n      }\n      if (self._json && !self.hasHeader('content-type')) {\n        self.setHeader('content-type', 'application/json')\n      }\n      if (src.method && !self.explicitMethod) {\n        self.method = src.method\n      }\n    }\n\n  // self.on('pipe', function () {\n  //   console.error('You have already piped to this stream. Pipeing twice is likely to break the request.')\n  // })\n  })\n\n  defer(function () {\n    if (self._aborted) {\n      return\n    }\n\n    var end = function () {\n      if (self._form) {\n        if (!self._auth.hasAuth) {\n          self._form.pipe(self)\n        } else if (self._auth.hasAuth && self._auth.sentAuth) {\n          self._form.pipe(self)\n        }\n      }\n      if (self._multipart && self._multipart.chunked) {\n        self._multipart.body.pipe(self)\n      }\n      if (self.body) {\n        if (isstream(self.body)) {\n          self.body.pipe(self)\n        } else {\n          setContentLength()\n          if (Array.isArray(self.body)) {\n            self.body.forEach(function (part) {\n              self.write(part)\n            })\n          } else {\n            self.write(self.body)\n          }\n          self.end()\n        }\n      } else if (self.requestBodyStream) {\n        console.warn('options.requestBodyStream is deprecated, please pass the request object to stream.pipe.')\n        self.requestBodyStream.pipe(self)\n      } else if (!self.src) {\n        if (self._auth.hasAuth && !self._auth.sentAuth) {\n          self.end()\n          return\n        }\n        if (self.method !== 'GET' && typeof self.method !== 'undefined') {\n          self.setHeader('content-length', 0)\n        }\n        self.end()\n      }\n    }\n\n    if (self._form && !self.hasHeader('content-length')) {\n      // Before ending the request, we had to compute the length of the whole form, asyncly\n      self.setHeader(self._form.getHeaders(), true)\n      self._form.getLength(function (err, length) {\n        if (!err && !isNaN(length)) {\n          self.setHeader('content-length', length)\n        }\n        end()\n      })\n    } else {\n      end()\n    }\n\n    self.ntick = true\n  })\n}\n\nRequest.prototype.getNewAgent = function () {\n  var self = this\n  var Agent = self.agentClass\n  var options = {}\n  if (self.agentOptions) {\n    for (var i in self.agentOptions) {\n      options[i] = self.agentOptions[i]\n    }\n  }\n  if (self.ca) {\n    options.ca = self.ca\n  }\n  if (self.ciphers) {\n    options.ciphers = self.ciphers\n  }\n  if (self.secureProtocol) {\n    options.secureProtocol = self.secureProtocol\n  }\n  if (self.secureOptions) {\n    options.secureOptions = self.secureOptions\n  }\n  if (typeof self.rejectUnauthorized !== 'undefined') {\n    options.rejectUnauthorized = self.rejectUnauthorized\n  }\n\n  if (self.cert && self.key) {\n    options.key = self.key\n    options.cert = self.cert\n  }\n\n  if (self.pfx) {\n    options.pfx = self.pfx\n  }\n\n  if (self.passphrase) {\n    options.passphrase = self.passphrase\n  }\n\n  var poolKey = ''\n\n  // different types of agents are in different pools\n  if (Agent !== self.httpModule.Agent) {\n    poolKey += Agent.name\n  }\n\n  // ca option is only relevant if proxy or destination are https\n  var proxy = self.proxy\n  if (typeof proxy === 'string') {\n    proxy = url.parse(proxy)\n  }\n  var isHttps = (proxy && proxy.protocol === 'https:') || this.uri.protocol === 'https:'\n\n  if (isHttps) {\n    if (options.ca) {\n      if (poolKey) {\n        poolKey += ':'\n      }\n      poolKey += options.ca\n    }\n\n    if (typeof options.rejectUnauthorized !== 'undefined') {\n      if (poolKey) {\n        poolKey += ':'\n      }\n      poolKey += options.rejectUnauthorized\n    }\n\n    if (options.cert) {\n      if (poolKey) {\n        poolKey += ':'\n      }\n      poolKey += options.cert.toString('ascii') + options.key.toString('ascii')\n    }\n\n    if (options.pfx) {\n      if (poolKey) {\n        poolKey += ':'\n      }\n      poolKey += options.pfx.toString('ascii')\n    }\n\n    if (options.ciphers) {\n      if (poolKey) {\n        poolKey += ':'\n      }\n      poolKey += options.ciphers\n    }\n\n    if (options.secureProtocol) {\n      if (poolKey) {\n        poolKey += ':'\n      }\n      poolKey += options.secureProtocol\n    }\n\n    if (options.secureOptions) {\n      if (poolKey) {\n        poolKey += ':'\n      }\n      poolKey += options.secureOptions\n    }\n  }\n\n  if (self.pool === globalPool && !poolKey && Object.keys(options).length === 0 && self.httpModule.globalAgent) {\n    // not doing anything special.  Use the globalAgent\n    return self.httpModule.globalAgent\n  }\n\n  // we're using a stored agent.  Make sure it's protocol-specific\n  poolKey = self.uri.protocol + poolKey\n\n  // generate a new agent for this setting if none yet exists\n  if (!self.pool[poolKey]) {\n    self.pool[poolKey] = new Agent(options)\n    // properly set maxSockets on new agents\n    if (self.pool.maxSockets) {\n      self.pool[poolKey].maxSockets = self.pool.maxSockets\n    }\n  }\n\n  return self.pool[poolKey]\n}\n\nRequest.prototype.start = function () {\n  // start() is called once we are ready to send the outgoing HTTP request.\n  // this is usually called on the first write(), end() or on nextTick()\n  var self = this\n\n  if (self.timing) {\n    // All timings will be relative to this request's startTime.  In order to do this,\n    // we need to capture the wall-clock start time (via Date), immediately followed\n    // by the high-resolution timer (via now()).  While these two won't be set\n    // at the _exact_ same time, they should be close enough to be able to calculate\n    // high-resolution, monotonically non-decreasing timestamps relative to startTime.\n    var startTime = new Date().getTime()\n    var startTimeNow = now()\n  }\n\n  if (self._aborted) {\n    return\n  }\n\n  self._started = true\n  self.method = self.method || 'GET'\n  self.href = self.uri.href\n\n  if (self.src && self.src.stat && self.src.stat.size && !self.hasHeader('content-length')) {\n    self.setHeader('content-length', self.src.stat.size)\n  }\n  if (self._aws) {\n    self.aws(self._aws, true)\n  }\n\n  // We have a method named auth, which is completely different from the http.request\n  // auth option.  If we don't remove it, we're gonna have a bad time.\n  var reqOptions = copy(self)\n  delete reqOptions.auth\n\n  debug('make request', self.uri.href)\n\n  // node v6.8.0 now supports a `timeout` value in `http.request()`, but we\n  // should delete it for now since we handle timeouts manually for better\n  // consistency with node versions before v6.8.0\n  delete reqOptions.timeout\n\n  try {\n    self.req = self.httpModule.request(reqOptions)\n  } catch (err) {\n    self.emit('error', err)\n    return\n  }\n\n  if (self.timing) {\n    self.startTime = startTime\n    self.startTimeNow = startTimeNow\n\n    // Timing values will all be relative to startTime (by comparing to startTimeNow\n    // so we have an accurate clock)\n    self.timings = {}\n  }\n\n  var timeout\n  if (self.timeout && !self.timeoutTimer) {\n    if (self.timeout < 0) {\n      timeout = 0\n    } else if (typeof self.timeout === 'number' && isFinite(self.timeout)) {\n      timeout = self.timeout\n    }\n  }\n\n  self.req.on('response', self.onRequestResponse.bind(self))\n  self.req.on('error', self.onRequestError.bind(self))\n  self.req.on('drain', function () {\n    self.emit('drain')\n  })\n\n  self.req.on('socket', function (socket) {\n    // `._connecting` was the old property which was made public in node v6.1.0\n    var isConnecting = socket._connecting || socket.connecting\n    if (self.timing) {\n      self.timings.socket = now() - self.startTimeNow\n\n      if (isConnecting) {\n        var onLookupTiming = function () {\n          self.timings.lookup = now() - self.startTimeNow\n        }\n\n        var onConnectTiming = function () {\n          self.timings.connect = now() - self.startTimeNow\n        }\n\n        socket.once('lookup', onLookupTiming)\n        socket.once('connect', onConnectTiming)\n\n        // clean up timing event listeners if needed on error\n        self.req.once('error', function () {\n          socket.removeListener('lookup', onLookupTiming)\n          socket.removeListener('connect', onConnectTiming)\n        })\n      }\n    }\n\n    var setReqTimeout = function () {\n      // This timeout sets the amount of time to wait *between* bytes sent\n      // from the server once connected.\n      //\n      // In particular, it's useful for erroring if the server fails to send\n      // data halfway through streaming a response.\n      self.req.setTimeout(timeout, function () {\n        if (self.req) {\n          self.abort()\n          var e = new Error('ESOCKETTIMEDOUT')\n          e.code = 'ESOCKETTIMEDOUT'\n          e.connect = false\n          self.emit('error', e)\n        }\n      })\n    }\n    if (timeout !== undefined) {\n      // Only start the connection timer if we're actually connecting a new\n      // socket, otherwise if we're already connected (because this is a\n      // keep-alive connection) do not bother. This is important since we won't\n      // get a 'connect' event for an already connected socket.\n      if (isConnecting) {\n        var onReqSockConnect = function () {\n          socket.removeListener('connect', onReqSockConnect)\n          self.clearTimeout()\n          setReqTimeout()\n        }\n\n        socket.on('connect', onReqSockConnect)\n\n        self.req.on('error', function (err) { // eslint-disable-line handle-callback-err\n          socket.removeListener('connect', onReqSockConnect)\n        })\n\n        // Set a timeout in memory - this block will throw if the server takes more\n        // than `timeout` to write the HTTP status and headers (corresponding to\n        // the on('response') event on the client). NB: this measures wall-clock\n        // time, not the time between bytes sent by the server.\n        self.timeoutTimer = setTimeout(function () {\n          socket.removeListener('connect', onReqSockConnect)\n          self.abort()\n          var e = new Error('ETIMEDOUT')\n          e.code = 'ETIMEDOUT'\n          e.connect = true\n          self.emit('error', e)\n        }, timeout)\n      } else {\n        // We're already connected\n        setReqTimeout()\n      }\n    }\n    self.emit('socket', socket)\n  })\n\n  self.emit('request', self.req)\n}\n\nRequest.prototype.onRequestError = function (error) {\n  var self = this\n  if (self._aborted) {\n    return\n  }\n  if (self.req && self.req._reusedSocket && error.code === 'ECONNRESET' &&\n    self.agent.addRequestNoreuse) {\n    self.agent = { addRequest: self.agent.addRequestNoreuse.bind(self.agent) }\n    self.start()\n    self.req.end()\n    return\n  }\n  self.clearTimeout()\n  self.emit('error', error)\n}\n\nRequest.prototype.onRequestResponse = function (response) {\n  var self = this\n\n  if (self.timing) {\n    self.timings.response = now() - self.startTimeNow\n  }\n\n  debug('onRequestResponse', self.uri.href, response.statusCode, response.headers)\n  response.on('end', function () {\n    if (self.timing) {\n      self.timings.end = now() - self.startTimeNow\n      response.timingStart = self.startTime\n\n      // fill in the blanks for any periods that didn't trigger, such as\n      // no lookup or connect due to keep alive\n      if (!self.timings.socket) {\n        self.timings.socket = 0\n      }\n      if (!self.timings.lookup) {\n        self.timings.lookup = self.timings.socket\n      }\n      if (!self.timings.connect) {\n        self.timings.connect = self.timings.lookup\n      }\n      if (!self.timings.response) {\n        self.timings.response = self.timings.connect\n      }\n\n      debug('elapsed time', self.timings.end)\n\n      // elapsedTime includes all redirects\n      self.elapsedTime += Math.round(self.timings.end)\n\n      // NOTE: elapsedTime is deprecated in favor of .timings\n      response.elapsedTime = self.elapsedTime\n\n      // timings is just for the final fetch\n      response.timings = self.timings\n\n      // pre-calculate phase timings as well\n      response.timingPhases = {\n        wait: self.timings.socket,\n        dns: self.timings.lookup - self.timings.socket,\n        tcp: self.timings.connect - self.timings.lookup,\n        firstByte: self.timings.response - self.timings.connect,\n        download: self.timings.end - self.timings.response,\n        total: self.timings.end\n      }\n    }\n    debug('response end', self.uri.href, response.statusCode, response.headers)\n  })\n\n  if (self._aborted) {\n    debug('aborted', self.uri.href)\n    response.resume()\n    return\n  }\n\n  self.response = response\n  response.request = self\n  response.toJSON = responseToJSON\n\n  // XXX This is different on 0.10, because SSL is strict by default\n  if (self.httpModule === https &&\n    self.strictSSL && (!response.hasOwnProperty('socket') ||\n    !response.socket.authorized)) {\n    debug('strict ssl error', self.uri.href)\n    var sslErr = response.hasOwnProperty('socket') ? response.socket.authorizationError : self.uri.href + ' does not support SSL'\n    self.emit('error', new Error('SSL Error: ' + sslErr))\n    return\n  }\n\n  // Save the original host before any redirect (if it changes, we need to\n  // remove any authorization headers).  Also remember the case of the header\n  // name because lots of broken servers expect Host instead of host and we\n  // want the caller to be able to specify this.\n  self.originalHost = self.getHeader('host')\n  if (!self.originalHostHeaderName) {\n    self.originalHostHeaderName = self.hasHeader('host')\n  }\n  if (self.setHost) {\n    self.removeHeader('host')\n  }\n  self.clearTimeout()\n\n  var targetCookieJar = (self._jar && self._jar.setCookie) ? self._jar : globalCookieJar\n  var addCookie = function (cookie) {\n    // set the cookie if it's domain in the href's domain.\n    try {\n      targetCookieJar.setCookie(cookie, self.uri.href, {ignoreError: true})\n    } catch (e) {\n      self.emit('error', e)\n    }\n  }\n\n  response.caseless = caseless(response.headers)\n\n  if (response.caseless.has('set-cookie') && (!self._disableCookies)) {\n    var headerName = response.caseless.has('set-cookie')\n    if (Array.isArray(response.headers[headerName])) {\n      response.headers[headerName].forEach(addCookie)\n    } else {\n      addCookie(response.headers[headerName])\n    }\n  }\n\n  if (self._redirect.onResponse(response)) {\n    return // Ignore the rest of the response\n  } else {\n    // Be a good stream and emit end when the response is finished.\n    // Hack to emit end on close because of a core bug that never fires end\n    response.on('close', function () {\n      if (!self._ended) {\n        self.response.emit('end')\n      }\n    })\n\n    response.once('end', function () {\n      self._ended = true\n    })\n\n    var noBody = function (code) {\n      return (\n        self.method === 'HEAD' ||\n        // Informational\n        (code >= 100 && code < 200) ||\n        // No Content\n        code === 204 ||\n        // Not Modified\n        code === 304\n      )\n    }\n\n    var responseContent\n    if (self.gzip && !noBody(response.statusCode)) {\n      var contentEncoding = response.headers['content-encoding'] || 'identity'\n      contentEncoding = contentEncoding.trim().toLowerCase()\n\n      // Be more lenient with decoding compressed responses, since (very rarely)\n      // servers send slightly invalid gzip responses that are still accepted\n      // by common browsers.\n      // Always using Z_SYNC_FLUSH is what cURL does.\n      var zlibOptions = {\n        flush: zlib.Z_SYNC_FLUSH,\n        finishFlush: zlib.Z_SYNC_FLUSH\n      }\n\n      if (contentEncoding === 'gzip') {\n        responseContent = zlib.createGunzip(zlibOptions)\n        response.pipe(responseContent)\n      } else if (contentEncoding === 'deflate') {\n        responseContent = zlib.createInflate(zlibOptions)\n        response.pipe(responseContent)\n      } else {\n        // Since previous versions didn't check for Content-Encoding header,\n        // ignore any invalid values to preserve backwards-compatibility\n        if (contentEncoding !== 'identity') {\n          debug('ignoring unrecognized Content-Encoding ' + contentEncoding)\n        }\n        responseContent = response\n      }\n    } else {\n      responseContent = response\n    }\n\n    if (self.encoding) {\n      if (self.dests.length !== 0) {\n        console.error('Ignoring encoding parameter as this stream is being piped to another stream which makes the encoding option invalid.')\n      } else {\n        responseContent.setEncoding(self.encoding)\n      }\n    }\n\n    if (self._paused) {\n      responseContent.pause()\n    }\n\n    self.responseContent = responseContent\n\n    self.emit('response', response)\n\n    self.dests.forEach(function (dest) {\n      self.pipeDest(dest)\n    })\n\n    responseContent.on('data', function (chunk) {\n      if (self.timing && !self.responseStarted) {\n        self.responseStartTime = (new Date()).getTime()\n\n        // NOTE: responseStartTime is deprecated in favor of .timings\n        response.responseStartTime = self.responseStartTime\n      }\n      self._destdata = true\n      self.emit('data', chunk)\n    })\n    responseContent.once('end', function (chunk) {\n      self.emit('end', chunk)\n    })\n    responseContent.on('error', function (error) {\n      self.emit('error', error)\n    })\n    responseContent.on('close', function () { self.emit('close') })\n\n    if (self.callback) {\n      self.readResponseBody(response)\n    } else { // if no callback\n      self.on('end', function () {\n        if (self._aborted) {\n          debug('aborted', self.uri.href)\n          return\n        }\n        self.emit('complete', response)\n      })\n    }\n  }\n  debug('finish init function', self.uri.href)\n}\n\nRequest.prototype.readResponseBody = function (response) {\n  var self = this\n  debug(\"reading response's body\")\n  var buffers = []\n  var bufferLength = 0\n  var strings = []\n\n  self.on('data', function (chunk) {\n    if (!Buffer.isBuffer(chunk)) {\n      strings.push(chunk)\n    } else if (chunk.length) {\n      bufferLength += chunk.length\n      buffers.push(chunk)\n    }\n  })\n  self.on('end', function () {\n    debug('end event', self.uri.href)\n    if (self._aborted) {\n      debug('aborted', self.uri.href)\n      // `buffer` is defined in the parent scope and used in a closure it exists for the life of the request.\n      // This can lead to leaky behavior if the user retains a reference to the request object.\n      buffers = []\n      bufferLength = 0\n      return\n    }\n\n    if (bufferLength) {\n      debug('has body', self.uri.href, bufferLength)\n      response.body = Buffer.concat(buffers, bufferLength)\n      if (self.encoding !== null) {\n        response.body = response.body.toString(self.encoding)\n      }\n      // `buffer` is defined in the parent scope and used in a closure it exists for the life of the Request.\n      // This can lead to leaky behavior if the user retains a reference to the request object.\n      buffers = []\n      bufferLength = 0\n    } else if (strings.length) {\n      // The UTF8 BOM [0xEF,0xBB,0xBF] is converted to [0xFE,0xFF] in the JS UTC16/UCS2 representation.\n      // Strip this value out when the encoding is set to 'utf8', as upstream consumers won't expect it and it breaks JSON.parse().\n      if (self.encoding === 'utf8' && strings[0].length > 0 && strings[0][0] === '\\uFEFF') {\n        strings[0] = strings[0].substring(1)\n      }\n      response.body = strings.join('')\n    }\n\n    if (self._json) {\n      try {\n        response.body = JSON.parse(response.body, self._jsonReviver)\n      } catch (e) {\n        debug('invalid JSON received', self.uri.href)\n      }\n    }\n    debug('emitting complete', self.uri.href)\n    if (typeof response.body === 'undefined' && !self._json) {\n      response.body = self.encoding === null ? Buffer.alloc(0) : ''\n    }\n    self.emit('complete', response, response.body)\n  })\n}\n\nRequest.prototype.abort = function () {\n  var self = this\n  self._aborted = true\n\n  if (self.req) {\n    self.req.abort()\n  } else if (self.response) {\n    self.response.destroy()\n  }\n\n  self.clearTimeout()\n  self.emit('abort')\n}\n\nRequest.prototype.pipeDest = function (dest) {\n  var self = this\n  var response = self.response\n  // Called after the response is received\n  if (dest.headers && !dest.headersSent) {\n    if (response.caseless.has('content-type')) {\n      var ctname = response.caseless.has('content-type')\n      if (dest.setHeader) {\n        dest.setHeader(ctname, response.headers[ctname])\n      } else {\n        dest.headers[ctname] = response.headers[ctname]\n      }\n    }\n\n    if (response.caseless.has('content-length')) {\n      var clname = response.caseless.has('content-length')\n      if (dest.setHeader) {\n        dest.setHeader(clname, response.headers[clname])\n      } else {\n        dest.headers[clname] = response.headers[clname]\n      }\n    }\n  }\n  if (dest.setHeader && !dest.headersSent) {\n    for (var i in response.headers) {\n      // If the response content is being decoded, the Content-Encoding header\n      // of the response doesn't represent the piped content, so don't pass it.\n      if (!self.gzip || i !== 'content-encoding') {\n        dest.setHeader(i, response.headers[i])\n      }\n    }\n    dest.statusCode = response.statusCode\n  }\n  if (self.pipefilter) {\n    self.pipefilter(response, dest)\n  }\n}\n\nRequest.prototype.qs = function (q, clobber) {\n  var self = this\n  var base\n  if (!clobber && self.uri.query) {\n    base = self._qs.parse(self.uri.query)\n  } else {\n    base = {}\n  }\n\n  for (var i in q) {\n    base[i] = q[i]\n  }\n\n  var qs = self._qs.stringify(base)\n\n  if (qs === '') {\n    return self\n  }\n\n  self.uri = url.parse(self.uri.href.split('?')[0] + '?' + qs)\n  self.url = self.uri\n  self.path = self.uri.path\n\n  if (self.uri.host === 'unix') {\n    self.enableUnixSocket()\n  }\n\n  return self\n}\nRequest.prototype.form = function (form) {\n  var self = this\n  if (form) {\n    if (!/^application\\/x-www-form-urlencoded\\b/.test(self.getHeader('content-type'))) {\n      self.setHeader('content-type', 'application/x-www-form-urlencoded')\n    }\n    self.body = (typeof form === 'string')\n      ? self._qs.rfc3986(form.toString('utf8'))\n      : self._qs.stringify(form).toString('utf8')\n    return self\n  }\n  // create form-data object\n  self._form = new FormData()\n  self._form.on('error', function (err) {\n    err.message = 'form-data: ' + err.message\n    self.emit('error', err)\n    self.abort()\n  })\n  return self._form\n}\nRequest.prototype.multipart = function (multipart) {\n  var self = this\n\n  self._multipart.onRequest(multipart)\n\n  if (!self._multipart.chunked) {\n    self.body = self._multipart.body\n  }\n\n  return self\n}\nRequest.prototype.json = function (val) {\n  var self = this\n\n  if (!self.hasHeader('accept')) {\n    self.setHeader('accept', 'application/json')\n  }\n\n  if (typeof self.jsonReplacer === 'function') {\n    self._jsonReplacer = self.jsonReplacer\n  }\n\n  self._json = true\n  if (typeof val === 'boolean') {\n    if (self.body !== undefined) {\n      if (!/^application\\/x-www-form-urlencoded\\b/.test(self.getHeader('content-type'))) {\n        self.body = safeStringify(self.body, self._jsonReplacer)\n      } else {\n        self.body = self._qs.rfc3986(self.body)\n      }\n      if (!self.hasHeader('content-type')) {\n        self.setHeader('content-type', 'application/json')\n      }\n    }\n  } else {\n    self.body = safeStringify(val, self._jsonReplacer)\n    if (!self.hasHeader('content-type')) {\n      self.setHeader('content-type', 'application/json')\n    }\n  }\n\n  if (typeof self.jsonReviver === 'function') {\n    self._jsonReviver = self.jsonReviver\n  }\n\n  return self\n}\nRequest.prototype.getHeader = function (name, headers) {\n  var self = this\n  var result, re, match\n  if (!headers) {\n    headers = self.headers\n  }\n  Object.keys(headers).forEach(function (key) {\n    if (key.length !== name.length) {\n      return\n    }\n    re = new RegExp(name, 'i')\n    match = key.match(re)\n    if (match) {\n      result = headers[key]\n    }\n  })\n  return result\n}\nRequest.prototype.enableUnixSocket = function () {\n  // Get the socket & request paths from the URL\n  var unixParts = this.uri.path.split(':')\n  var host = unixParts[0]\n  var path = unixParts[1]\n  // Apply unix properties to request\n  this.socketPath = host\n  this.uri.pathname = path\n  this.uri.path = path\n  this.uri.host = host\n  this.uri.hostname = host\n  this.uri.isUnix = true\n}\n\nRequest.prototype.auth = function (user, pass, sendImmediately, bearer) {\n  var self = this\n\n  self._auth.onRequest(user, pass, sendImmediately, bearer)\n\n  return self\n}\nRequest.prototype.aws = function (opts, now) {\n  var self = this\n\n  if (!now) {\n    self._aws = opts\n    return self\n  }\n\n  if (opts.sign_version === 4 || opts.sign_version === '4') {\n    // use aws4\n    var options = {\n      host: self.uri.host,\n      path: self.uri.path,\n      method: self.method,\n      headers: self.headers,\n      body: self.body\n    }\n    if (opts.service) {\n      options.service = opts.service\n    }\n    var signRes = aws4.sign(options, {\n      accessKeyId: opts.key,\n      secretAccessKey: opts.secret,\n      sessionToken: opts.session\n    })\n    self.setHeader('authorization', signRes.headers.Authorization)\n    self.setHeader('x-amz-date', signRes.headers['X-Amz-Date'])\n    if (signRes.headers['X-Amz-Security-Token']) {\n      self.setHeader('x-amz-security-token', signRes.headers['X-Amz-Security-Token'])\n    }\n  } else {\n    // default: use aws-sign2\n    var date = new Date()\n    self.setHeader('date', date.toUTCString())\n    var auth = {\n      key: opts.key,\n      secret: opts.secret,\n      verb: self.method.toUpperCase(),\n      date: date,\n      contentType: self.getHeader('content-type') || '',\n      md5: self.getHeader('content-md5') || '',\n      amazonHeaders: aws2.canonicalizeHeaders(self.headers)\n    }\n    var path = self.uri.path\n    if (opts.bucket && path) {\n      auth.resource = '/' + opts.bucket + path\n    } else if (opts.bucket && !path) {\n      auth.resource = '/' + opts.bucket\n    } else if (!opts.bucket && path) {\n      auth.resource = path\n    } else if (!opts.bucket && !path) {\n      auth.resource = '/'\n    }\n    auth.resource = aws2.canonicalizeResource(auth.resource)\n    self.setHeader('authorization', aws2.authorization(auth))\n  }\n\n  return self\n}\nRequest.prototype.httpSignature = function (opts) {\n  var self = this\n  httpSignature.signRequest({\n    getHeader: function (header) {\n      return self.getHeader(header, self.headers)\n    },\n    setHeader: function (header, value) {\n      self.setHeader(header, value)\n    },\n    method: self.method,\n    path: self.path\n  }, opts)\n  debug('httpSignature authorization', self.getHeader('authorization'))\n\n  return self\n}\nRequest.prototype.hawk = function (opts) {\n  var self = this\n  self.setHeader('Authorization', hawk.header(self.uri, self.method, opts))\n}\nRequest.prototype.oauth = function (_oauth) {\n  var self = this\n\n  self._oauth.onRequest(_oauth)\n\n  return self\n}\n\nRequest.prototype.jar = function (jar) {\n  var self = this\n  var cookies\n\n  if (self._redirect.redirectsFollowed === 0) {\n    self.originalCookieHeader = self.getHeader('cookie')\n  }\n\n  if (!jar) {\n    // disable cookies\n    cookies = false\n    self._disableCookies = true\n  } else {\n    var targetCookieJar = jar.getCookieString ? jar : globalCookieJar\n    var urihref = self.uri.href\n    // fetch cookie in the Specified host\n    if (targetCookieJar) {\n      cookies = targetCookieJar.getCookieString(urihref)\n    }\n  }\n\n  // if need cookie and cookie is not empty\n  if (cookies && cookies.length) {\n    if (self.originalCookieHeader) {\n      // Don't overwrite existing Cookie header\n      self.setHeader('cookie', self.originalCookieHeader + '; ' + cookies)\n    } else {\n      self.setHeader('cookie', cookies)\n    }\n  }\n  self._jar = jar\n  return self\n}\n\n// Stream API\nRequest.prototype.pipe = function (dest, opts) {\n  var self = this\n\n  if (self.response) {\n    if (self._destdata) {\n      self.emit('error', new Error('You cannot pipe after data has been emitted from the response.'))\n    } else if (self._ended) {\n      self.emit('error', new Error('You cannot pipe after the response has been ended.'))\n    } else {\n      stream.Stream.prototype.pipe.call(self, dest, opts)\n      self.pipeDest(dest)\n      return dest\n    }\n  } else {\n    self.dests.push(dest)\n    stream.Stream.prototype.pipe.call(self, dest, opts)\n    return dest\n  }\n}\nRequest.prototype.write = function () {\n  var self = this\n  if (self._aborted) { return }\n\n  if (!self._started) {\n    self.start()\n  }\n  if (self.req) {\n    return self.req.write.apply(self.req, arguments)\n  }\n}\nRequest.prototype.end = function (chunk) {\n  var self = this\n  if (self._aborted) { return }\n\n  if (chunk) {\n    self.write(chunk)\n  }\n  if (!self._started) {\n    self.start()\n  }\n  if (self.req) {\n    self.req.end()\n  }\n}\nRequest.prototype.pause = function () {\n  var self = this\n  if (!self.responseContent) {\n    self._paused = true\n  } else {\n    self.responseContent.pause.apply(self.responseContent, arguments)\n  }\n}\nRequest.prototype.resume = function () {\n  var self = this\n  if (!self.responseContent) {\n    self._paused = false\n  } else {\n    self.responseContent.resume.apply(self.responseContent, arguments)\n  }\n}\nRequest.prototype.destroy = function () {\n  var self = this\n  this.clearTimeout()\n  if (!self._ended) {\n    self.end()\n  } else if (self.response) {\n    self.response.destroy()\n  }\n}\n\nRequest.prototype.clearTimeout = function () {\n  if (this.timeoutTimer) {\n    clearTimeout(this.timeoutTimer)\n    this.timeoutTimer = null\n  }\n}\n\nRequest.defaultProxyHeaderWhiteList =\n  Tunnel.defaultProxyHeaderWhiteList.slice()\n\nRequest.defaultProxyHeaderExclusiveList =\n  Tunnel.defaultProxyHeaderExclusiveList.slice()\n\n// Exports\n\nRequest.prototype.toJSON = requestToJSON\nmodule.exports = Request\n", "// Copyright 2010-2012 Mikeal Rogers\n//\n//    Licensed under the Apache License, Version 2.0 (the \"License\");\n//    you may not use this file except in compliance with the License.\n//    You may obtain a copy of the License at\n//\n//        http://www.apache.org/licenses/LICENSE-2.0\n//\n//    Unless required by applicable law or agreed to in writing, software\n//    distributed under the License is distributed on an \"AS IS\" BASIS,\n//    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n//    See the License for the specific language governing permissions and\n//    limitations under the License.\n\n'use strict'\n\nvar extend = require('extend')\nvar cookies = require('./lib/cookies')\nvar helpers = require('./lib/helpers')\n\nvar paramsHaveRequestBody = helpers.paramsHaveRequestBody\n\n// organize params for patch, post, put, head, del\nfunction initParams (uri, options, callback) {\n  if (typeof options === 'function') {\n    callback = options\n  }\n\n  var params = {}\n  if (options !== null && typeof options === 'object') {\n    extend(params, options, {uri: uri})\n  } else if (typeof uri === 'string') {\n    extend(params, {uri: uri})\n  } else {\n    extend(params, uri)\n  }\n\n  params.callback = callback || params.callback\n  return params\n}\n\nfunction request (uri, options, callback) {\n  if (typeof uri === 'undefined') {\n    throw new Error('undefined is not a valid uri or options object.')\n  }\n\n  var params = initParams(uri, options, callback)\n\n  if (params.method === 'HEAD' && paramsHaveRequestBody(params)) {\n    throw new Error('HTTP HEAD requests MUST NOT include a request body.')\n  }\n\n  return new request.Request(params)\n}\n\nfunction verbFunc (verb) {\n  var method = verb.toUpperCase()\n  return function (uri, options, callback) {\n    var params = initParams(uri, options, callback)\n    params.method = method\n    return request(params, params.callback)\n  }\n}\n\n// define like this to please codeintel/intellisense IDEs\nrequest.get = verbFunc('get')\nrequest.head = verbFunc('head')\nrequest.options = verbFunc('options')\nrequest.post = verbFunc('post')\nrequest.put = verbFunc('put')\nrequest.patch = verbFunc('patch')\nrequest.del = verbFunc('delete')\nrequest['delete'] = verbFunc('delete')\n\nrequest.jar = function (store) {\n  return cookies.jar(store)\n}\n\nrequest.cookie = function (str) {\n  return cookies.parse(str)\n}\n\nfunction wrapRequestMethod (method, options, requester, verb) {\n  return function (uri, opts, callback) {\n    var params = initParams(uri, opts, callback)\n\n    var target = {}\n    extend(true, target, options, params)\n\n    target.pool = params.pool || options.pool\n\n    if (verb) {\n      target.method = verb.toUpperCase()\n    }\n\n    if (typeof requester === 'function') {\n      method = requester\n    }\n\n    return method(target, target.callback)\n  }\n}\n\nrequest.defaults = function (options, requester) {\n  var self = this\n\n  options = options || {}\n\n  if (typeof options === 'function') {\n    requester = options\n    options = {}\n  }\n\n  var defaults = wrapRequestMethod(self, options, requester)\n\n  var verbs = ['get', 'head', 'post', 'put', 'patch', 'del', 'delete']\n  verbs.forEach(function (verb) {\n    defaults[verb] = wrapRequestMethod(self[verb], options, requester, verb)\n  })\n\n  defaults.cookie = wrapRequestMethod(self.cookie, options, requester)\n  defaults.jar = self.jar\n  defaults.defaults = self.defaults\n  return defaults\n}\n\nrequest.forever = function (agentOptions, optionsArg) {\n  var options = {}\n  if (optionsArg) {\n    extend(options, optionsArg)\n  }\n  if (agentOptions) {\n    options.agentOptions = agentOptions\n  }\n\n  options.forever = true\n  return request.defaults(options)\n}\n\n// Exports\n\nmodule.exports = request\nrequest.Request = require('./request')\nrequest.initParams = initParams\n\n// Backwards compatibility for request.debug\nObject.defineProperty(request, 'debug', {\n  enumerable: true,\n  get: function () {\n    return request.Request.debug\n  },\n  set: function (debug) {\n    request.Request.debug = debug\n  }\n})\n", "\n/**\n * Module exports.\n */\n\nmodule.exports = dataUriToBuffer;\n\n/**\n * Returns a `Buffer` instance from the given data URI `uri`.\n *\n * @param {String} uri Data URI to turn into a Buffer instance\n * @return {Buffer} Buffer instance from Data URI\n * @api public\n */\n\nfunction dataUriToBuffer (uri) {\n  if (!/^data\\:/i.test(uri)) {\n    throw new TypeError('`uri` does not appear to be a Data URI (must begin with \"data:\")');\n  }\n\n  // strip newlines\n  uri = uri.replace(/\\r?\\n/g, '');\n\n  // split the URI up into the \"metadata\" and the \"data\" portions\n  var firstComma = uri.indexOf(',');\n  if (-1 === firstComma || firstComma <= 4) throw new TypeError('malformed data: URI');\n\n  // remove the \"data:\" scheme and parse the metadata\n  var meta = uri.substring(5, firstComma).split(';');\n\n  var base64 = false;\n  var charset = 'US-ASCII';\n  for (var i = 0; i < meta.length; i++) {\n    if ('base64' == meta[i]) {\n      base64 = true;\n    } else if (0 == meta[i].indexOf('charset=')) {\n      charset = meta[i].substring(8);\n    }\n  }\n\n  // get the encoded data portion and decode URI-encoded chars\n  var data = unescape(uri.substring(firstComma + 1));\n\n  var encoding = base64 ? 'base64' : 'ascii';\n  var buffer = new Buffer(data, encoding);\n\n  // set `.type` property to MIME type\n  buffer.type = meta[0] || 'text/plain';\n\n  // set the `.charset` property\n  buffer.charset = charset;\n\n  return buffer;\n}\n", "var toBuffer = require('data-uri-to-buffer')\n\nfunction parseDataUri (dataUri) {\n\n  return {\n    mimeType: normalizeMimeType(parseMimeType(dataUri)),\n    data: toBuffer(dataUri)\n  }\n}\n\nfunction parseMimeType(uri) {\n  return uri.substring(5, uri.indexOf(';'))\n}\n\nvar prefix = /^(\\w+\\/)+/\nfunction normalizeMimeType(mime) {\n  mime = mime.toLowerCase()\n  var once = mime.match(prefix)\n  if (!once || !(once = once[1])) {\n    return mime\n  }\n  return mime.replace(prefix, once)\n\n}\n\nmodule.exports = parseDataUri", "'use strict'\n\nvar ndarray       = require('ndarray')\nvar path          = require('path')\nvar PNG           = require('pngjs').PNG\nvar jpeg          = require('jpeg-js')\nvar pack          = require('ndarray-pack')\nvar GifReader     = require('omggif').GifReader\nvar Bitmap        = require('node-bitmap')\nvar fs            = require('fs')\nvar request       = require('request')\nvar mime          = require('mime-types')\nvar parseDataURI  = require('parse-data-uri')\n\nfunction handlePNG(data, cb) {\n  var png = new PNG();\n  png.parse(data, function(err, img_data) {\n    if(err) {\n      cb(err)\n      return\n    }\n    cb(null, ndarray(new Uint8Array(img_data.data),\n      [img_data.width|0, img_data.height|0, 4],\n      [4, 4*img_data.width|0, 1],\n      0))\n  })\n}\n\nfunction handleJPEG(data, cb) {\n  var jpegData\n  try {\n    jpegData = jpeg.decode(data)\n  }\n  catch(e) {\n    cb(e)\n    return\n  }\n  if(!jpegData) {\n    cb(new Error(\"Error decoding jpeg\"))\n    return\n  }\n  var nshape = [ jpegData.height, jpegData.width, 4 ]\n  var result = ndarray(jpegData.data, nshape)\n  cb(null, result.transpose(1,0))\n}\n\nfunction handleGIF(data, cb) {\n  var reader\n  try {\n    reader = new GifReader(data)\n  } catch(err) {\n    cb(err)\n    return\n  }\n  if(reader.numFrames() > 0) {\n    var nshape = [reader.numFrames(), reader.height, reader.width, 4]\n    try  {\n      var ndata = new Uint8Array(nshape[0] * nshape[1] * nshape[2] * nshape[3])\n    } catch(err) {\n      cb(err)\n      return\n    }\n    var result = ndarray(ndata, nshape)\n    try {\n      for(var i=0; i<reader.numFrames(); ++i) {\n        reader.decodeAndBlitFrameRGBA(i, ndata.subarray(\n          result.index(i, 0, 0, 0),\n          result.index(i+1, 0, 0, 0)))\n      }\n    } catch(err) {\n      cb(err)\n      return\n    }\n    cb(null, result.transpose(0,2,1))\n  } else {\n    var nshape = [reader.height, reader.width, 4]\n    var ndata = new Uint8Array(nshape[0] * nshape[1] * nshape[2])\n    var result = ndarray(ndata, nshape)\n    try {\n      reader.decodeAndBlitFrameRGBA(0, ndata)\n    } catch(err) {\n      cb(err)\n      return\n    }\n    cb(null, result.transpose(1,0))\n  }\n}\n\nfunction handleBMP(data, cb) {\n  var bmp = new Bitmap(data)\n  try {\n    bmp.init()\n  } catch(e) {\n    cb(e)\n    return\n  }\n  var bmpData = bmp.getData()\n  var nshape = [ bmpData.getHeight(), bmpData.getWidth(), 4 ]\n  var ndata = new Uint8Array(nshape[0] * nshape[1] * nshape[2])\n  var result = ndarray(ndata, nshape)\n  pack(bmpData, result)\n  cb(null, result.transpose(1,0))\n}\n\n\nfunction doParse(mimeType, data, cb) {\n  switch(mimeType) {\n    case 'image/png':\n      handlePNG(data, cb)\n    break\n\n    case 'image/jpg':\n    case 'image/jpeg':\n      handleJPEG(data, cb)\n    break\n\n    case 'image/gif':\n      handleGIF(data, cb)\n    break\n\n    case 'image/bmp':\n      handleBMP(data, cb)\n    break\n\n    default:\n      cb(new Error(\"Unsupported file type: \" + mimeType))\n  }\n}\n\nmodule.exports = function getPixels(url, type, cb) {\n  if(!cb) {\n    cb = type\n    type = ''\n  }\n  if(Buffer.isBuffer(url)) {\n    if(!type) {\n      cb(new Error('Invalid file type'))\n      return\n    }\n    doParse(type, url, cb)\n  } else if(url.indexOf('data:') === 0) {\n    try {\n      var buffer = parseDataURI(url)\n      if(buffer) {\n        process.nextTick(function() {\n          doParse(type || buffer.mimeType, buffer.data, cb)\n        })\n      } else {\n        process.nextTick(function() {\n          cb(new Error('Error parsing data URI'))\n        })\n      }\n    } catch(err) {\n      process.nextTick(function() {\n        cb(err)\n      })\n    }\n  } else if(url.indexOf('http://') === 0 || url.indexOf('https://') === 0) {\n    request({url:url, encoding:null}, function(err, response, body) {\n      if(err) {\n        cb(err)\n        return\n      }\n\n      type = type;\n      if(!type){\n        if(response.getHeader !== undefined){\n\t  type = response.getHeader('content-type');\n\t}else if(response.headers !== undefined){\n\t  type = response.headers['content-type'];\n\t}\n      }\n      if(!type) {\n        cb(new Error('Invalid content-type'))\n        return\n      }\n      doParse(type, body, cb)\n    })\n  } else {\n    fs.readFile(url, function(err, data) {\n      if(err) {\n        cb(err)\n        return\n      }\n      type = type || mime.lookup(url)\n      if(!type) {\n        cb(new Error('Invalid file type'))\n        return\n      }\n      doParse(type, data, cb)\n    })\n  }\n}\n", "/// <reference lib=\"es2015.symbol\" />\n\nconst SymbolPolyfill: (description?: string) => symbol =\n  typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ?\n    Symbol :\n    description => `Symbol(${description})` as any as symbol;\n\nexport default SymbolPolyfill;\n", "/// <reference lib=\"dom\" />\n\nexport function noop(): undefined {\n  return undefined;\n}\n\nfunction getGlobals() {\n  if (typeof self !== 'undefined') {\n    return self;\n  } else if (typeof window !== 'undefined') {\n    return window;\n  } else if (typeof global !== 'undefined') {\n    return global;\n  }\n  return undefined;\n}\n\nexport const globals = getGlobals();\n", "import { noop } from '../../utils';\nimport { AssertionError } from '../../stub/assert';\n\nexport function typeIsObject(x: any): x is object {\n  return (typeof x === 'object' && x !== null) || typeof x === 'function';\n}\n\nexport const rethrowAssertionErrorRejection: (e: any) => void =\n  DEBUG ? e => {\n    // Used throughout the reference implementation, as `.catch(rethrowAssertionErrorRejection)`, to ensure any errors\n    // get shown. There are places in the spec where we do promise transformations and purposefully ignore or don't\n    // expect any errors, but assertion errors are always problematic.\n    if (e && e instanceof AssertionError) {\n      setTimeout(() => {\n        throw e;\n      }, 0);\n    }\n  } : noop;\n", "import { globals } from '../../utils';\nimport { rethrowAssertionErrorRejection } from './miscellaneous';\nimport assert from '../../stub/assert';\n\nconst originalPromise = Promise;\nconst originalPromiseThen = Promise.prototype.then;\nconst originalPromiseResolve = Promise.resolve.bind(originalPromise);\nconst originalPromiseReject = Promise.reject.bind(originalPromise);\n\nexport function newPromise<T>(executor: (\n  resolve: (value: T | PromiseLike<T>) => void,\n  reject: (reason?: any) => void\n) => void): Promise<T> {\n  return new originalPromise(executor);\n}\n\nexport function promiseResolvedWith<T>(value: T | PromiseLike<T>): Promise<T> {\n  return originalPromiseResolve(value);\n}\n\nexport function promiseRejectedWith<T = never>(reason: any): Promise<T> {\n  return originalPromiseReject(reason);\n}\n\nexport function PerformPromiseThen<T, TResult1 = T, TResult2 = never>(\n  promise: Promise<T>,\n  onFulfilled?: (value: T) => TResult1 | PromiseLike<TResult1>,\n  onRejected?: (reason: any) => TResult2 | PromiseLike<TResult2>): Promise<TResult1 | TResult2> {\n  // There doesn't appear to be any way to correctly emulate the behaviour from JavaScript, so this is just an\n  // approximation.\n  return originalPromiseThen.call(promise, onFulfilled, onRejected) as Promise<TResult1 | TResult2>;\n}\n\nexport function uponPromise<T>(\n  promise: Promise<T>,\n  onFulfilled?: (value: T) => void | PromiseLike<void>,\n  onRejected?: (reason: any) => void | PromiseLike<void>): void {\n  PerformPromiseThen(\n    PerformPromiseThen(promise, onFulfilled, onRejected),\n    undefined,\n    rethrowAssertionErrorRejection\n  );\n}\n\nexport function uponFulfillment<T>(promise: Promise<T>, onFulfilled: (value: T) => void | PromiseLike<void>): void {\n  uponPromise(promise, onFulfilled);\n}\n\nexport function uponRejection(promise: Promise<unknown>, onRejected: (reason: any) => void | PromiseLike<void>): void {\n  uponPromise(promise, undefined, onRejected);\n}\n\nexport function transformPromiseWith<T, TResult1 = T, TResult2 = never>(\n  promise: Promise<T>,\n  fulfillmentHandler?: (value: T) => TResult1 | PromiseLike<TResult1>,\n  rejectionHandler?: (reason: any) => TResult2 | PromiseLike<TResult2>): Promise<TResult1 | TResult2> {\n  return PerformPromiseThen(promise, fulfillmentHandler, rejectionHandler);\n}\n\nexport function setPromiseIsHandledToTrue(promise: Promise<unknown>): void {\n  PerformPromiseThen(promise, undefined, rethrowAssertionErrorRejection);\n}\n\nexport const queueMicrotask: (fn: () => void) => void = (() => {\n  const globalQueueMicrotask = globals && globals.queueMicrotask;\n  if (typeof globalQueueMicrotask === 'function') {\n    return globalQueueMicrotask;\n  }\n\n  const resolvedPromise = promiseResolvedWith(undefined);\n  return (fn: () => void) => PerformPromiseThen(resolvedPromise, fn);\n})();\n\nexport function reflectCall<T, A extends any[], R>(F: (this: T, ...fnArgs: A) => R, V: T, args: A): R {\n  if (typeof F !== 'function') {\n    throw new TypeError('Argument is not a function');\n  }\n  return Function.prototype.apply.call(F, V, args);\n}\n\nexport function promiseCall<T, A extends any[], R>(F: (this: T, ...fnArgs: A) => R | PromiseLike<R>,\n                                                   V: T,\n                                                   args: A): Promise<R> {\n  assert(typeof F === 'function');\n  assert(V !== undefined);\n  assert(Array.isArray(args));\n  try {\n    return promiseResolvedWith(reflectCall(F, V, args));\n  } catch (value) {\n    return promiseRejectedWith(value);\n  }\n}\n", "import assert from '../stub/assert';\n\n// Original from Chromium\n// https://chromium.googlesource.com/chromium/src/+/0aee4434a4dba42a42abaea9bfbc0cd196a63bc1/third_party/blink/renderer/core/streams/SimpleQueue.js\n\nconst QUEUE_MAX_ARRAY_SIZE = 16384;\n\ninterface Node<T> {\n  _elements: T[];\n  _next: Node<T> | undefined;\n}\n\n/**\n * Simple queue structure.\n *\n * Avoids scalability issues with using a packed array directly by using\n * multiple arrays in a linked list and keeping the array size bounded.\n */\nexport class SimpleQueue<T> {\n  private _front: Node<T>;\n  private _back: Node<T>;\n  private _cursor = 0;\n  private _size = 0;\n\n  constructor() {\n    // _front and _back are always defined.\n    this._front = {\n      _elements: [],\n      _next: undefined\n    };\n    this._back = this._front;\n    // The cursor is used to avoid calling Array.shift().\n    // It contains the index of the front element of the array inside the\n    // front-most node. It is always in the range [0, QUEUE_MAX_ARRAY_SIZE).\n    this._cursor = 0;\n    // When there is only one node, size === elements.length - cursor.\n    this._size = 0;\n  }\n\n  get length(): number {\n    return this._size;\n  }\n\n  // For exception safety, this method is structured in order:\n  // 1. Read state\n  // 2. Calculate required state mutations\n  // 3. Perform state mutations\n  push(element: T): void {\n    const oldBack = this._back;\n    let newBack = oldBack;\n    assert(oldBack._next === undefined);\n    if (oldBack._elements.length === QUEUE_MAX_ARRAY_SIZE - 1) {\n      newBack = {\n        _elements: [],\n        _next: undefined\n      };\n    }\n\n    // push() is the mutation most likely to throw an exception, so it\n    // goes first.\n    oldBack._elements.push(element);\n    if (newBack !== oldBack) {\n      this._back = newBack;\n      oldBack._next = newBack;\n    }\n    ++this._size;\n  }\n\n  // Like push(), shift() follows the read -> calculate -> mutate pattern for\n  // exception safety.\n  shift(): T {\n    assert(this._size > 0); // must not be called on an empty queue\n\n    const oldFront = this._front;\n    let newFront = oldFront;\n    const oldCursor = this._cursor;\n    let newCursor = oldCursor + 1;\n\n    const elements = oldFront._elements;\n    const element = elements[oldCursor];\n\n    if (newCursor === QUEUE_MAX_ARRAY_SIZE) {\n      assert(elements.length === QUEUE_MAX_ARRAY_SIZE);\n      assert(oldFront._next !== undefined);\n      newFront = oldFront._next!;\n      newCursor = 0;\n    }\n\n    // No mutations before this point.\n    --this._size;\n    this._cursor = newCursor;\n    if (oldFront !== newFront) {\n      this._front = newFront;\n    }\n\n    // Permit shifted element to be garbage collected.\n    elements[oldCursor] = undefined!;\n\n    return element;\n  }\n\n  // The tricky thing about forEach() is that it can be called\n  // re-entrantly. The queue may be mutated inside the callback. It is easy to\n  // see that push() within the callback has no negative effects since the end\n  // of the queue is checked for on every iteration. If shift() is called\n  // repeatedly within the callback then the next iteration may return an\n  // element that has been removed. In this case the callback will be called\n  // with undefined values until we either \"catch up\" with elements that still\n  // exist or reach the back of the queue.\n  forEach(callback: (element: T) => void): void {\n    let i = this._cursor;\n    let node = this._front;\n    let elements = node._elements;\n    while (i !== elements.length || node._next !== undefined) {\n      if (i === elements.length) {\n        assert(node._next !== undefined);\n        assert(i === QUEUE_MAX_ARRAY_SIZE);\n        node = node._next!;\n        elements = node._elements;\n        i = 0;\n        if (elements.length === 0) {\n          break;\n        }\n      }\n      callback(elements[i]);\n      ++i;\n    }\n  }\n\n  // Return the element that would be returned if shift() was called now,\n  // without modifying the queue.\n  peek() {\n    assert(this._size > 0); // must not be called on an empty queue\n\n    const front = this._front;\n    const cursor = this._cursor;\n    return front._elements[cursor];\n  }\n}\n", "import assert from '../../stub/assert';\nimport { ReadableStream, ReadableStreamCancel, ReadableStreamReader } from '../readable-stream';\nimport { newPromise, setPromiseIsHandledToTrue } from '../helpers/webidl';\n\nexport function ReadableStreamReaderGenericInitialize<R>(reader: ReadableStreamReader<R>, stream: ReadableStream<R>) {\n  reader._ownerReadableStream = stream;\n  stream._reader = reader;\n\n  if (stream._state === 'readable') {\n    defaultReaderClosedPromiseInitialize(reader);\n  } else if (stream._state === 'closed') {\n    defaultReaderClosedPromiseInitializeAsResolved(reader);\n  } else {\n    assert(stream._state === 'errored');\n\n    defaultReaderClosedPromiseInitializeAsRejected(reader, stream._storedError);\n  }\n}\n\n// A client of ReadableStreamDefaultReader and ReadableStreamBYOBReader may use these functions directly to bypass state\n// check.\n\nexport function ReadableStreamReaderGenericCancel(reader: ReadableStreamReader<any>, reason: any): Promise<undefined> {\n  const stream = reader._ownerReadableStream;\n  assert(stream !== undefined);\n  return ReadableStreamCancel(stream, reason);\n}\n\nexport function ReadableStreamReaderGenericRelease(reader: ReadableStreamReader<any>) {\n  assert(reader._ownerReadableStream !== undefined);\n  assert(reader._ownerReadableStream._reader === reader);\n\n  if (reader._ownerReadableStream._state === 'readable') {\n    defaultReaderClosedPromiseReject(\n      reader,\n      new TypeError(`Reader was released and can no longer be used to monitor the stream's closedness`));\n  } else {\n    defaultReaderClosedPromiseResetToRejected(\n      reader,\n      new TypeError(`Reader was released and can no longer be used to monitor the stream's closedness`));\n  }\n\n  reader._ownerReadableStream._reader = undefined;\n  reader._ownerReadableStream = undefined!;\n}\n\n// Helper functions for the readers.\n\nexport function readerLockException(name: string): TypeError {\n  return new TypeError('Cannot ' + name + ' a stream using a released reader');\n}\n\n// Helper functions for the ReadableStreamDefaultReader.\n\nexport function defaultReaderClosedPromiseInitialize(reader: ReadableStreamReader<any>) {\n  reader._closedPromise = newPromise((resolve, reject) => {\n    reader._closedPromise_resolve = resolve;\n    reader._closedPromise_reject = reject;\n  });\n}\n\nexport function defaultReaderClosedPromiseInitializeAsRejected(reader: ReadableStreamReader<any>, reason: any) {\n  defaultReaderClosedPromiseInitialize(reader);\n  defaultReaderClosedPromiseReject(reader, reason);\n}\n\nexport function defaultReaderClosedPromiseInitializeAsResolved(reader: ReadableStreamReader<any>) {\n  defaultReaderClosedPromiseInitialize(reader);\n  defaultReaderClosedPromiseResolve(reader);\n}\n\nexport function defaultReaderClosedPromiseReject(reader: ReadableStreamReader<any>, reason: any) {\n  if (reader._closedPromise_reject === undefined) {\n    return;\n  }\n\n  setPromiseIsHandledToTrue(reader._closedPromise);\n  reader._closedPromise_reject(reason);\n  reader._closedPromise_resolve = undefined;\n  reader._closedPromise_reject = undefined;\n}\n\nexport function defaultReaderClosedPromiseResetToRejected(reader: ReadableStreamReader<any>, reason: any) {\n  assert(reader._closedPromise_resolve === undefined);\n  assert(reader._closedPromise_reject === undefined);\n\n  defaultReaderClosedPromiseInitializeAsRejected(reader, reason);\n}\n\nexport function defaultReaderClosedPromiseResolve(reader: ReadableStreamReader<any>) {\n  if (reader._closedPromise_resolve === undefined) {\n    return;\n  }\n\n  reader._closedPromise_resolve(undefined);\n  reader._closedPromise_resolve = undefined;\n  reader._closedPromise_reject = undefined;\n}\n", "export const AbortSteps = Symbol('[[AbortSteps]]');\nexport const ErrorSteps = Symbol('[[ErrorSteps]]');\nexport const CancelSteps = Symbol('[[CancelSteps]]');\nexport const PullSteps = Symbol('[[PullSteps]]');\n", "/// <reference lib=\"es2015.core\" />\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite#Polyfill\nconst NumberIsFinite: typeof Number.isFinite = Number.isFinite || function (x) {\n  return typeof x === 'number' && isFinite(x);\n};\n\nexport default NumberIsFinite;\n", "/// <reference lib=\"es2015.core\" />\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc#Polyfill\nconst MathTrunc: typeof Math.trunc = Math.trunc || function (v) {\n  return v < 0 ? Math.ceil(v) : Math.floor(v);\n};\n\nexport default MathTrunc;\n", "import NumberIsFinite from '../../stub/number-isfinite';\nimport MathTrunc from '../../stub/math-trunc';\n\n// https://heycam.github.io/webidl/#idl-dictionaries\nexport function isDictionary(x: any): x is object | null {\n  return typeof x === 'object' || typeof x === 'function';\n}\n\nexport function assertDictionary(obj: unknown,\n                                 context: string): asserts obj is object | null | undefined {\n  if (obj !== undefined && !isDictionary(obj)) {\n    throw new TypeError(`${context} is not an object.`);\n  }\n}\n\nexport type AnyFunction = (...args: any[]) => any;\n\n// https://heycam.github.io/webidl/#idl-callback-functions\nexport function assertFunction(x: unknown, context: string): asserts x is AnyFunction {\n  if (typeof x !== 'function') {\n    throw new TypeError(`${context} is not a function.`);\n  }\n}\n\n// https://heycam.github.io/webidl/#idl-object\nexport function isObject(x: any): x is object {\n  return (typeof x === 'object' && x !== null) || typeof x === 'function';\n}\n\nexport function assertObject(x: unknown,\n                             context: string): asserts x is object {\n  if (!isObject(x)) {\n    throw new TypeError(`${context} is not an object.`);\n  }\n}\n\nexport function assertRequiredArgument<T extends any>(x: T | undefined,\n                                                      position: number,\n                                                      context: string): asserts x is T {\n  if (x === undefined) {\n    throw new TypeError(`Parameter ${position} is required in '${context}'.`);\n  }\n}\n\nexport function assertRequiredField<T extends any>(x: T | undefined,\n                                                   field: string,\n                                                   context: string): asserts x is T {\n  if (x === undefined) {\n    throw new TypeError(`${field} is required in '${context}'.`);\n  }\n}\n\n// https://heycam.github.io/webidl/#idl-unrestricted-double\nexport function convertUnrestrictedDouble(value: unknown): number {\n  return Number(value);\n}\n\nfunction censorNegativeZero(x: number): number {\n  return x === 0 ? 0 : x;\n}\n\nfunction integerPart(x: number): number {\n  return censorNegativeZero(MathTrunc(x));\n}\n\n// https://heycam.github.io/webidl/#idl-unsigned-long-long\nexport function convertUnsignedLongLongWithEnforceRange(value: unknown, context: string): number {\n  const lowerBound = 0;\n  const upperBound = Number.MAX_SAFE_INTEGER;\n\n  let x = Number(value);\n  x = censorNegativeZero(x);\n\n  if (!NumberIsFinite(x)) {\n    throw new TypeError(`${context} is not a finite number`);\n  }\n\n  x = integerPart(x);\n\n  if (x < lowerBound || x > upperBound) {\n    throw new TypeError(`${context} is outside the accepted range of ${lowerBound} to ${upperBound}, inclusive`);\n  }\n\n  if (!NumberIsFinite(x) || x === 0) {\n    return 0;\n  }\n\n  // TODO Use BigInt if supported?\n  // let xBigInt = BigInt(integerPart(x));\n  // xBigInt = BigInt.asUintN(64, xBigInt);\n  // return Number(xBigInt);\n\n  return x;\n}\n", "import { IsReadableStream, ReadableStream } from '../readable-stream';\n\nexport function assertReadableStream(x: unknown, context: string): asserts x is ReadableStream {\n  if (!IsReadableStream(x)) {\n    throw new TypeError(`${context} is not a ReadableStream.`);\n  }\n}\n", "import assert from '../../stub/assert';\nimport { SimpleQueue } from '../simple-queue';\nimport {\n  ReadableStreamReaderGenericCancel,\n  ReadableStreamReaderGenericInitialize,\n  ReadableStreamReaderGenericRelease,\n  readerLockException\n} from './generic-reader';\nimport { IsReadableStreamLocked, ReadableStream } from '../readable-stream';\nimport { typeIsObject } from '../helpers/miscellaneous';\nimport { PullSteps } from '../abstract-ops/internal-methods';\nimport { newPromise, promiseRejectedWith } from '../helpers/webidl';\nimport { assertRequiredArgument } from '../validators/basic';\nimport { assertReadableStream } from '../validators/readable-stream';\n\n/**\n * A result returned by {@link ReadableStreamDefaultReader.read}.\n *\n * @public\n */\nexport type ReadableStreamDefaultReadResult<T> = {\n  done: false;\n  value: T;\n} | {\n  done: true;\n  value: undefined;\n}\n\n// Abstract operations for the ReadableStream.\n\nexport function AcquireReadableStreamDefaultReader<R>(stream: ReadableStream): ReadableStreamDefaultReader<R> {\n  return new ReadableStreamDefaultReader(stream);\n}\n\n// ReadableStream API exposed for controllers.\n\nexport function ReadableStreamAddReadRequest<R>(stream: ReadableStream<R>,\n                                                readRequest: ReadRequest<R>): void {\n  assert(IsReadableStreamDefaultReader(stream._reader));\n  assert(stream._state === 'readable');\n\n  (stream._reader! as ReadableStreamDefaultReader<R>)._readRequests.push(readRequest);\n}\n\nexport function ReadableStreamFulfillReadRequest<R>(stream: ReadableStream<R>, chunk: R | undefined, done: boolean) {\n  const reader = stream._reader as ReadableStreamDefaultReader<R>;\n\n  assert(reader._readRequests.length > 0);\n\n  const readRequest = reader._readRequests.shift()!;\n  if (done) {\n    readRequest._closeSteps();\n  } else {\n    readRequest._chunkSteps(chunk!);\n  }\n}\n\nexport function ReadableStreamGetNumReadRequests<R>(stream: ReadableStream<R>): number {\n  return (stream._reader as ReadableStreamDefaultReader<R>)._readRequests.length;\n}\n\nexport function ReadableStreamHasDefaultReader(stream: ReadableStream): boolean {\n  const reader = stream._reader;\n\n  if (reader === undefined) {\n    return false;\n  }\n\n  if (!IsReadableStreamDefaultReader(reader)) {\n    return false;\n  }\n\n  return true;\n}\n\n// Readers\n\nexport interface ReadRequest<R> {\n  _chunkSteps(chunk: R): void;\n\n  _closeSteps(): void;\n\n  _errorSteps(e: any): void;\n}\n\n/**\n * A default reader vended by a {@link ReadableStream}.\n *\n * @public\n */\nexport class ReadableStreamDefaultReader<R = any> {\n  /** @internal */\n  _ownerReadableStream!: ReadableStream<R>;\n  /** @internal */\n  _closedPromise!: Promise<undefined>;\n  /** @internal */\n  _closedPromise_resolve?: (value?: undefined) => void;\n  /** @internal */\n  _closedPromise_reject?: (reason: any) => void;\n  /** @internal */\n  _readRequests: SimpleQueue<ReadRequest<R>>;\n\n  constructor(stream: ReadableStream<R>) {\n    assertRequiredArgument(stream, 1, 'ReadableStreamDefaultReader');\n    assertReadableStream(stream, 'First parameter');\n\n    if (IsReadableStreamLocked(stream)) {\n      throw new TypeError('This stream has already been locked for exclusive reading by another reader');\n    }\n\n    ReadableStreamReaderGenericInitialize(this, stream);\n\n    this._readRequests = new SimpleQueue();\n  }\n\n  /**\n   * Returns a promise that will be fulfilled when the stream becomes closed,\n   * or rejected if the stream ever errors or the reader's lock is released before the stream finishes closing.\n   */\n  get closed(): Promise<undefined> {\n    if (!IsReadableStreamDefaultReader(this)) {\n      return promiseRejectedWith(defaultReaderBrandCheckException('closed'));\n    }\n\n    return this._closedPromise;\n  }\n\n  /**\n   * If the reader is active, behaves the same as {@link ReadableStream.cancel | stream.cancel(reason)}.\n   */\n  cancel(reason: any = undefined): Promise<undefined> {\n    if (!IsReadableStreamDefaultReader(this)) {\n      return promiseRejectedWith(defaultReaderBrandCheckException('cancel'));\n    }\n\n    if (this._ownerReadableStream === undefined) {\n      return promiseRejectedWith(readerLockException('cancel'));\n    }\n\n    return ReadableStreamReaderGenericCancel(this, reason);\n  }\n\n  /**\n   * Returns a promise that allows access to the next chunk from the stream's internal queue, if available.\n   *\n   * If reading a chunk causes the queue to become empty, more data will be pulled from the underlying source.\n   */\n  read(): Promise<ReadableStreamDefaultReadResult<R>> {\n    if (!IsReadableStreamDefaultReader(this)) {\n      return promiseRejectedWith(defaultReaderBrandCheckException('read'));\n    }\n\n    if (this._ownerReadableStream === undefined) {\n      return promiseRejectedWith(readerLockException('read from'));\n    }\n\n    let resolvePromise!: (result: ReadableStreamDefaultReadResult<R>) => void;\n    let rejectPromise!: (reason: any) => void;\n    const promise = newPromise<ReadableStreamDefaultReadResult<R>>((resolve, reject) => {\n      resolvePromise = resolve;\n      rejectPromise = reject;\n    });\n    const readRequest: ReadRequest<R> = {\n      _chunkSteps: chunk => resolvePromise({ value: chunk, done: false }),\n      _closeSteps: () => resolvePromise({ value: undefined, done: true }),\n      _errorSteps: e => rejectPromise(e)\n    };\n    ReadableStreamDefaultReaderRead(this, readRequest);\n    return promise;\n  }\n\n  /**\n   * Releases the reader's lock on the corresponding stream. After the lock is released, the reader is no longer active.\n   * If the associated stream is errored when the lock is released, the reader will appear errored in the same way\n   * from now on; otherwise, the reader will appear closed.\n   *\n   * A reader's lock cannot be released while it still has a pending read request, i.e., if a promise returned by\n   * the reader's {@link ReadableStreamDefaultReader.read | read()} method has not yet been settled. Attempting to\n   * do so will throw a `TypeError` and leave the reader locked to the stream.\n   */\n  releaseLock(): void {\n    if (!IsReadableStreamDefaultReader(this)) {\n      throw defaultReaderBrandCheckException('releaseLock');\n    }\n\n    if (this._ownerReadableStream === undefined) {\n      return;\n    }\n\n    if (this._readRequests.length > 0) {\n      throw new TypeError('Tried to release a reader lock when that reader has pending read() calls un-settled');\n    }\n\n    ReadableStreamReaderGenericRelease(this);\n  }\n}\n\nObject.defineProperties(ReadableStreamDefaultReader.prototype, {\n  cancel: { enumerable: true },\n  read: { enumerable: true },\n  releaseLock: { enumerable: true },\n  closed: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(ReadableStreamDefaultReader.prototype, Symbol.toStringTag, {\n    value: 'ReadableStreamDefaultReader',\n    configurable: true\n  });\n}\n\n// Abstract operations for the readers.\n\nexport function IsReadableStreamDefaultReader<R = any>(x: any): x is ReadableStreamDefaultReader<R> {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_readRequests')) {\n    return false;\n  }\n\n  return true;\n}\n\nexport function ReadableStreamDefaultReaderRead<R>(reader: ReadableStreamDefaultReader<R>,\n                                                   readRequest: ReadRequest<R>): void {\n  const stream = reader._ownerReadableStream;\n\n  assert(stream !== undefined);\n\n  stream._disturbed = true;\n\n  if (stream._state === 'closed') {\n    readRequest._closeSteps();\n  } else if (stream._state === 'errored') {\n    readRequest._errorSteps(stream._storedError);\n  } else {\n    assert(stream._state === 'readable');\n    stream._readableStreamController[PullSteps](readRequest as ReadRequest<any>);\n  }\n}\n\n// Helper functions for the ReadableStreamDefaultReader.\n\nfunction defaultReaderBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `ReadableStreamDefaultReader.prototype.${name} can only be used on a ReadableStreamDefaultReader`);\n}\n", "/// <reference lib=\"es2018.asynciterable\" />\n\nexport let AsyncIteratorPrototype: AsyncIterable<any> | undefined;\n\nif (typeof Symbol.asyncIterator === 'symbol') {\n  // We're running inside a ES2018+ environment, but we're compiling to an older syntax.\n  // We cannot access %AsyncIteratorPrototype% without non-ES2018 syntax, but we can re-create it.\n  AsyncIteratorPrototype = {\n    // 25.1.3.1 %AsyncIteratorPrototype% [ @@asyncIterator ] ( )\n    // https://tc39.github.io/ecma262/#sec-asynciteratorprototype-asynciterator\n    [Symbol.asyncIterator]() {\n      return this as any;\n    }\n  };\n  Object.defineProperty(AsyncIteratorPrototype, Symbol.asyncIterator, { enumerable: false });\n}\n", "/// <reference lib=\"es2018.asynciterable\" />\n\nimport { ReadableStream } from '../readable-stream';\nimport {\n  AcquireReadableStreamDefaultReader,\n  ReadableStreamDefaultReader,\n  ReadableStreamDefaultReaderRead,\n  ReadableStreamDefaultReadResult,\n  ReadRequest\n} from './default-reader';\nimport {\n  ReadableStreamReaderGenericCancel,\n  ReadableStreamReaderGenericRelease,\n  readerLockException\n} from './generic-reader';\nimport assert from '../../stub/assert';\nimport { AsyncIteratorPrototype } from '@@target/stub/async-iterator-prototype';\nimport { typeIsObject } from '../helpers/miscellaneous';\nimport {\n  newPromise,\n  promiseRejectedWith,\n  promiseResolvedWith,\n  queueMicrotask,\n  transformPromiseWith\n} from '../helpers/webidl';\n\n/**\n * An async iterator returned by {@link ReadableStream.values}.\n *\n * @public\n */\nexport interface ReadableStreamAsyncIterator<R> extends AsyncIterator<R> {\n  next(): Promise<IteratorResult<R>>;\n\n  return(value?: any): Promise<IteratorResult<any>>;\n}\n\nexport class ReadableStreamAsyncIteratorImpl<R> {\n  private readonly _reader: ReadableStreamDefaultReader<R>;\n  private readonly _preventCancel: boolean;\n  private _ongoingPromise: Promise<ReadableStreamDefaultReadResult<R>> | undefined = undefined;\n  private _isFinished = false;\n\n  constructor(reader: ReadableStreamDefaultReader<R>, preventCancel: boolean) {\n    this._reader = reader;\n    this._preventCancel = preventCancel;\n  }\n\n  next(): Promise<ReadableStreamDefaultReadResult<R>> {\n    const nextSteps = () => this._nextSteps();\n    this._ongoingPromise = this._ongoingPromise ?\n      transformPromiseWith(this._ongoingPromise, nextSteps, nextSteps) :\n      nextSteps();\n    return this._ongoingPromise;\n  }\n\n  return(value: any): Promise<ReadableStreamDefaultReadResult<any>> {\n    const returnSteps = () => this._returnSteps(value);\n    return this._ongoingPromise ?\n      transformPromiseWith(this._ongoingPromise, returnSteps, returnSteps) :\n      returnSteps();\n  }\n\n  private _nextSteps(): Promise<ReadableStreamDefaultReadResult<R>> {\n    if (this._isFinished) {\n      return Promise.resolve({ value: undefined, done: true });\n    }\n\n    const reader = this._reader;\n    if (reader._ownerReadableStream === undefined) {\n      return promiseRejectedWith(readerLockException('iterate'));\n    }\n\n    let resolvePromise!: (result: ReadableStreamDefaultReadResult<R>) => void;\n    let rejectPromise!: (reason: any) => void;\n    const promise = newPromise<ReadableStreamDefaultReadResult<R>>((resolve, reject) => {\n      resolvePromise = resolve;\n      rejectPromise = reject;\n    });\n    const readRequest: ReadRequest<R> = {\n      _chunkSteps: chunk => {\n        this._ongoingPromise = undefined;\n        // This needs to be delayed by one microtask, otherwise we stop pulling too early which breaks a test.\n        // FIXME Is this a bug in the specification, or in the test?\n        queueMicrotask(() => resolvePromise({ value: chunk, done: false }));\n      },\n      _closeSteps: () => {\n        this._ongoingPromise = undefined;\n        this._isFinished = true;\n        ReadableStreamReaderGenericRelease(reader);\n        resolvePromise({ value: undefined, done: true });\n      },\n      _errorSteps: reason => {\n        this._ongoingPromise = undefined;\n        this._isFinished = true;\n        ReadableStreamReaderGenericRelease(reader);\n        rejectPromise(reason);\n      }\n    };\n    ReadableStreamDefaultReaderRead(reader, readRequest);\n    return promise;\n  }\n\n  private _returnSteps(value: any): Promise<ReadableStreamDefaultReadResult<any>> {\n    if (this._isFinished) {\n      return Promise.resolve({ value, done: true });\n    }\n    this._isFinished = true;\n\n    const reader = this._reader;\n    if (reader._ownerReadableStream === undefined) {\n      return promiseRejectedWith(readerLockException('finish iterating'));\n    }\n\n    assert(reader._readRequests.length === 0);\n\n    if (!this._preventCancel) {\n      const result = ReadableStreamReaderGenericCancel(reader, value);\n      ReadableStreamReaderGenericRelease(reader);\n      return transformPromiseWith(result, () => ({ value, done: true }));\n    }\n\n    ReadableStreamReaderGenericRelease(reader);\n    return promiseResolvedWith({ value, done: true });\n  }\n}\n\ndeclare class ReadableStreamAsyncIteratorInstance<R> implements ReadableStreamAsyncIterator<R> {\n  /** @interal */\n  _asyncIteratorImpl: ReadableStreamAsyncIteratorImpl<R>;\n\n  next(): Promise<ReadableStreamDefaultReadResult<R>>;\n\n  return(value?: any): Promise<ReadableStreamDefaultReadResult<any>>;\n}\n\nconst ReadableStreamAsyncIteratorPrototype: ReadableStreamAsyncIteratorInstance<any> = {\n  next(this: ReadableStreamAsyncIteratorInstance<any>): Promise<ReadableStreamDefaultReadResult<any>> {\n    if (!IsReadableStreamAsyncIterator(this)) {\n      return promiseRejectedWith(streamAsyncIteratorBrandCheckException('next'));\n    }\n    return this._asyncIteratorImpl.next();\n  },\n\n  return(this: ReadableStreamAsyncIteratorInstance<any>, value: any): Promise<ReadableStreamDefaultReadResult<any>> {\n    if (!IsReadableStreamAsyncIterator(this)) {\n      return promiseRejectedWith(streamAsyncIteratorBrandCheckException('return'));\n    }\n    return this._asyncIteratorImpl.return(value);\n  }\n} as any;\nif (AsyncIteratorPrototype !== undefined) {\n  Object.setPrototypeOf(ReadableStreamAsyncIteratorPrototype, AsyncIteratorPrototype);\n}\n\n// Abstract operations for the ReadableStream.\n\nexport function AcquireReadableStreamAsyncIterator<R>(stream: ReadableStream<R>,\n                                                      preventCancel: boolean): ReadableStreamAsyncIterator<R> {\n  const reader = AcquireReadableStreamDefaultReader<R>(stream);\n  const impl = new ReadableStreamAsyncIteratorImpl(reader, preventCancel);\n  const iterator: ReadableStreamAsyncIteratorInstance<R> = Object.create(ReadableStreamAsyncIteratorPrototype);\n  iterator._asyncIteratorImpl = impl;\n  return iterator;\n}\n\nfunction IsReadableStreamAsyncIterator<R = any>(x: any): x is ReadableStreamAsyncIterator<R> {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_asyncIteratorImpl')) {\n    return false;\n  }\n\n  return true;\n}\n\n// Helper functions for the ReadableStream.\n\nfunction streamAsyncIteratorBrandCheckException(name: string): TypeError {\n  return new TypeError(`ReadableStreamAsyncIterator.${name} can only be used on a ReadableSteamAsyncIterator`);\n}\n", "/// <reference lib=\"es2015.core\" />\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN#Polyfill\nconst NumberIsNaN: typeof Number.isNaN = Number.isNaN || function (x) {\n  // eslint-disable-next-line no-self-compare\n  return x !== x;\n};\n\nexport default NumberIsNaN;\n", "import NumberIsNaN from '../../stub/number-isnan';\n\nexport function IsFiniteNonNegativeNumber(v: number): boolean {\n  if (!IsNonNegativeNumber(v)) {\n    return false;\n  }\n\n  if (v === Infinity) {\n    return false;\n  }\n\n  return true;\n}\n\nexport function IsNonNegativeNumber(v: number): boolean {\n  if (typeof v !== 'number') {\n    return false;\n  }\n\n  if (NumberIsNaN(v)) {\n    return false;\n  }\n\n  if (v < 0) {\n    return false;\n  }\n\n  return true;\n}\n", "import assert from '../../stub/assert';\nimport { SimpleQueue } from '../simple-queue';\nimport { IsFiniteNonNegativeNumber } from './miscellaneous';\n\nexport interface QueueContainer<T> {\n  _queue: SimpleQueue<T>;\n  _queueTotalSize: number;\n}\n\nexport interface QueuePair<T> {\n  value: T;\n  size: number;\n}\n\nexport function DequeueValue<T>(container: QueueContainer<QueuePair<T>>): T {\n  assert('_queue' in container && '_queueTotalSize' in container);\n  assert(container._queue.length > 0);\n\n  const pair = container._queue.shift()!;\n  container._queueTotalSize -= pair.size;\n  if (container._queueTotalSize < 0) {\n    container._queueTotalSize = 0;\n  }\n\n  return pair.value;\n}\n\nexport function EnqueueValueWithSize<T>(container: QueueContainer<QueuePair<T>>, value: T, size: number) {\n  assert('_queue' in container && '_queueTotalSize' in container);\n\n  size = Number(size);\n  if (!IsFiniteNonNegativeNumber(size)) {\n    throw new RangeError('Size must be a finite, non-NaN, non-negative number.');\n  }\n\n  container._queue.push({ value, size });\n  container._queueTotalSize += size;\n}\n\nexport function PeekQueueValue<T>(container: QueueContainer<QueuePair<T>>): T {\n  assert('_queue' in container && '_queueTotalSize' in container);\n  assert(container._queue.length > 0);\n\n  const pair = container._queue.peek();\n  return pair.value;\n}\n\nexport function ResetQueue<T>(container: QueueContainer<T>) {\n  assert('_queue' in container && '_queueTotalSize' in container);\n\n  container._queue = new SimpleQueue<T>();\n  container._queueTotalSize = 0;\n}\n", "export function CreateArrayFromList<T extends any[]>(elements: T): T {\n  // We use arrays to represent lists, so this is basically a no-op.\n  // Do a slice though just in case we happen to depend on the unique-ness.\n  return elements.slice() as T;\n}\n\nexport function CopyDataBlockBytes(dest: ArrayBuffer,\n                                   destOffset: number,\n                                   src: ArrayBuffer,\n                                   srcOffset: number,\n                                   n: number) {\n  new Uint8Array(dest).set(new Uint8Array(src, srcOffset, n), destOffset);\n}\n\n// Not implemented correctly\nexport function TransferArrayBuffer<T extends ArrayBufferLike>(O: T): T {\n  return O;\n}\n\n// Not implemented correctly\nexport function IsDetachedBuffer(O: ArrayBufferLike): boolean { // eslint-disable-line @typescript-eslint/no-unused-vars\n  return false;\n}\n", "import assert from '../../stub/assert';\nimport { SimpleQueue } from '../simple-queue';\nimport { ResetQueue } from '../abstract-ops/queue-with-sizes';\nimport {\n  ReadableStreamAddReadRequest,\n  ReadableStreamFulfillReadRequest,\n  ReadableStreamGetNumReadRequests,\n  ReadableStreamHasDefaultReader,\n  ReadRequest\n} from './default-reader';\nimport {\n  ReadableStreamAddReadIntoRequest,\n  ReadableStreamFulfillReadIntoRequest,\n  ReadableStreamGetNumReadIntoRequests,\n  ReadableStreamHasBYOBReader,\n  ReadIntoRequest\n} from './byob-reader';\nimport NumberIsInteger from '../../stub/number-isinteger';\nimport {\n  IsReadableStreamLocked,\n  ReadableByteStream,\n  ReadableStreamClose,\n  ReadableStreamError\n} from '../readable-stream';\nimport { ValidatedUnderlyingByteSource } from './underlying-source';\nimport { typeIsObject } from '../helpers/miscellaneous';\nimport { CopyDataBlockBytes, IsDetachedBuffer, TransferArrayBuffer } from '../abstract-ops/ecmascript';\nimport { CancelSteps, PullSteps } from '../abstract-ops/internal-methods';\nimport { IsFiniteNonNegativeNumber } from '../abstract-ops/miscellaneous';\nimport { promiseResolvedWith, uponPromise } from '../helpers/webidl';\nimport { assertRequiredArgument, convertUnsignedLongLongWithEnforceRange } from '../validators/basic';\n\n/**\n * A pull-into request in a {@link ReadableByteStreamController}.\n *\n * @public\n */\nexport class ReadableStreamBYOBRequest {\n  /** @internal */\n  _associatedReadableByteStreamController!: ReadableByteStreamController;\n  /** @internal */\n  _view!: ArrayBufferView | null;\n\n  private constructor() {\n    throw new TypeError('Illegal constructor');\n  }\n\n  /**\n   * Returns the view for writing in to, or `null` if the BYOB request has already been responded to.\n   */\n  get view(): ArrayBufferView | null {\n    if (!IsReadableStreamBYOBRequest(this)) {\n      throw byobRequestBrandCheckException('view');\n    }\n\n    return this._view;\n  }\n\n  /**\n   * Indicates to the associated readable byte stream that `bytesWritten` bytes were written into\n   * {@link ReadableStreamBYOBRequest.view | view}, causing the result be surfaced to the consumer.\n   *\n   * After this method is called, {@link ReadableStreamBYOBRequest.view | view} will be transferred and no longer\n   * modifiable.\n   */\n  respond(bytesWritten: number): void;\n  respond(bytesWritten: number | undefined): void {\n    if (!IsReadableStreamBYOBRequest(this)) {\n      throw byobRequestBrandCheckException('respond');\n    }\n    assertRequiredArgument(bytesWritten, 1, 'respond');\n    bytesWritten = convertUnsignedLongLongWithEnforceRange(bytesWritten, 'First parameter');\n\n    if (this._associatedReadableByteStreamController === undefined) {\n      throw new TypeError('This BYOB request has been invalidated');\n    }\n\n    if (IsDetachedBuffer(this._view!.buffer)) {\n      throw new TypeError(`The BYOB request's buffer has been detached and so cannot be used as a response`);\n    }\n\n    assert(this._view!.byteLength > 0);\n    assert(this._view!.buffer.byteLength > 0);\n\n    ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController, bytesWritten);\n  }\n\n  /**\n   * Indicates to the associated readable byte stream that instead of writing into\n   * {@link ReadableStreamBYOBRequest.view | view}, the underlying byte source is providing a new `ArrayBufferView`,\n   * which will be given to the consumer of the readable byte stream.\n   *\n   * After this method is called, `view` will be transferred and no longer modifiable.\n   */\n  respondWithNewView(view: ArrayBufferView): void;\n  respondWithNewView(view: ArrayBufferView | undefined): void {\n    if (!IsReadableStreamBYOBRequest(this)) {\n      throw byobRequestBrandCheckException('respondWithNewView');\n    }\n    assertRequiredArgument(view, 1, 'respondWithNewView');\n\n    if (!ArrayBuffer.isView(view)) {\n      throw new TypeError('You can only respond with array buffer views');\n    }\n    if (view.byteLength === 0) {\n      throw new TypeError('chunk must have non-zero byteLength');\n    }\n    if (view.buffer.byteLength === 0) {\n      throw new TypeError(`chunk's buffer must have non-zero byteLength`);\n    }\n\n    if (this._associatedReadableByteStreamController === undefined) {\n      throw new TypeError('This BYOB request has been invalidated');\n    }\n\n    ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController, view);\n  }\n}\n\nObject.defineProperties(ReadableStreamBYOBRequest.prototype, {\n  respond: { enumerable: true },\n  respondWithNewView: { enumerable: true },\n  view: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(ReadableStreamBYOBRequest.prototype, Symbol.toStringTag, {\n    value: 'ReadableStreamBYOBRequest',\n    configurable: true\n  });\n}\n\ninterface ArrayBufferViewConstructor<T extends ArrayBufferView = ArrayBufferView> {\n  new(buffer: ArrayBufferLike, byteOffset: number, length?: number): T;\n\n  readonly prototype: T;\n  readonly BYTES_PER_ELEMENT: number;\n}\n\ninterface ByteQueueElement {\n  buffer: ArrayBufferLike;\n  byteOffset: number;\n  byteLength: number;\n}\n\ntype PullIntoDescriptor<T extends ArrayBufferView = ArrayBufferView> =\n  DefaultPullIntoDescriptor\n  | BYOBPullIntoDescriptor<T>;\n\ninterface DefaultPullIntoDescriptor {\n  buffer: ArrayBufferLike;\n  byteOffset: number;\n  byteLength: number;\n  bytesFilled: number;\n  elementSize: number;\n  viewConstructor: ArrayBufferViewConstructor<Uint8Array>;\n  readerType: 'default';\n}\n\ninterface BYOBPullIntoDescriptor<T extends ArrayBufferView = ArrayBufferView> {\n  buffer: ArrayBufferLike;\n  byteOffset: number;\n  byteLength: number;\n  bytesFilled: number;\n  elementSize: number;\n  viewConstructor: ArrayBufferViewConstructor<T>;\n  readerType: 'byob';\n}\n\n/**\n * Allows control of a {@link ReadableStream | readable byte stream}'s state and internal queue.\n *\n * @public\n */\nexport class ReadableByteStreamController {\n  /** @internal */\n  _controlledReadableByteStream!: ReadableByteStream;\n  /** @internal */\n  _queue!: SimpleQueue<ByteQueueElement>;\n  /** @internal */\n  _queueTotalSize!: number;\n  /** @internal */\n  _started!: boolean;\n  /** @internal */\n  _closeRequested!: boolean;\n  /** @internal */\n  _pullAgain!: boolean;\n  /** @internal */\n  _pulling !: boolean;\n  /** @internal */\n  _strategyHWM!: number;\n  /** @internal */\n  _pullAlgorithm!: () => Promise<void>;\n  /** @internal */\n  _cancelAlgorithm!: (reason: any) => Promise<void>;\n  /** @internal */\n  _autoAllocateChunkSize: number | undefined;\n  /** @internal */\n  _byobRequest: ReadableStreamBYOBRequest | null;\n  /** @internal */\n  _pendingPullIntos!: SimpleQueue<PullIntoDescriptor>;\n\n  private constructor() {\n    throw new TypeError('Illegal constructor');\n  }\n\n  /**\n   * Returns the current BYOB pull request, or `null` if there isn't one.\n   */\n  get byobRequest(): ReadableStreamBYOBRequest | null {\n    if (!IsReadableByteStreamController(this)) {\n      throw byteStreamControllerBrandCheckException('byobRequest');\n    }\n\n    if (this._byobRequest === null && this._pendingPullIntos.length > 0) {\n      const firstDescriptor = this._pendingPullIntos.peek();\n      const view = new Uint8Array(firstDescriptor.buffer,\n                                  firstDescriptor.byteOffset + firstDescriptor.bytesFilled,\n                                  firstDescriptor.byteLength - firstDescriptor.bytesFilled);\n\n      const byobRequest: ReadableStreamBYOBRequest = Object.create(ReadableStreamBYOBRequest.prototype);\n      SetUpReadableStreamBYOBRequest(byobRequest, this, view);\n      this._byobRequest = byobRequest;\n    }\n\n    return this._byobRequest;\n  }\n\n  /**\n   * Returns the desired size to fill the controlled stream's internal queue. It can be negative, if the queue is\n   * over-full. An underlying byte source ought to use this information to determine when and how to apply backpressure.\n   */\n  get desiredSize(): number | null {\n    if (!IsReadableByteStreamController(this)) {\n      throw byteStreamControllerBrandCheckException('desiredSize');\n    }\n\n    return ReadableByteStreamControllerGetDesiredSize(this);\n  }\n\n  /**\n   * Closes the controlled readable stream. Consumers will still be able to read any previously-enqueued chunks from\n   * the stream, but once those are read, the stream will become closed.\n   */\n  close(): void {\n    if (!IsReadableByteStreamController(this)) {\n      throw byteStreamControllerBrandCheckException('close');\n    }\n\n    if (this._closeRequested) {\n      throw new TypeError('The stream has already been closed; do not close it again!');\n    }\n\n    const state = this._controlledReadableByteStream._state;\n    if (state !== 'readable') {\n      throw new TypeError(`The stream (in ${state} state) is not in the readable state and cannot be closed`);\n    }\n\n    ReadableByteStreamControllerClose(this);\n  }\n\n  /**\n   * Enqueues the given chunk chunk in the controlled readable stream.\n   * The chunk has to be an `ArrayBufferView` instance, or else a `TypeError` will be thrown.\n   */\n  enqueue(chunk: ArrayBufferView): void;\n  enqueue(chunk: ArrayBufferView | undefined): void {\n    if (!IsReadableByteStreamController(this)) {\n      throw byteStreamControllerBrandCheckException('enqueue');\n    }\n\n    assertRequiredArgument(chunk, 1, 'enqueue');\n    if (!ArrayBuffer.isView(chunk)) {\n      throw new TypeError('chunk must be an array buffer view');\n    }\n    if (chunk.byteLength === 0) {\n      throw new TypeError('chunk must have non-zero byteLength');\n    }\n    if (chunk.buffer.byteLength === 0) {\n      throw new TypeError(`chunk's buffer must have non-zero byteLength`);\n    }\n\n    if (this._closeRequested) {\n      throw new TypeError('stream is closed or draining');\n    }\n\n    const state = this._controlledReadableByteStream._state;\n    if (state !== 'readable') {\n      throw new TypeError(`The stream (in ${state} state) is not in the readable state and cannot be enqueued to`);\n    }\n\n    ReadableByteStreamControllerEnqueue(this, chunk);\n  }\n\n  /**\n   * Errors the controlled readable stream, making all future interactions with it fail with the given error `e`.\n   */\n  error(e: any = undefined): void {\n    if (!IsReadableByteStreamController(this)) {\n      throw byteStreamControllerBrandCheckException('error');\n    }\n\n    ReadableByteStreamControllerError(this, e);\n  }\n\n  /** @internal */\n  [CancelSteps](reason: any): Promise<void> {\n    if (this._pendingPullIntos.length > 0) {\n      const firstDescriptor = this._pendingPullIntos.peek();\n      firstDescriptor.bytesFilled = 0;\n    }\n\n    ResetQueue(this);\n\n    const result = this._cancelAlgorithm(reason);\n    ReadableByteStreamControllerClearAlgorithms(this);\n    return result;\n  }\n\n  /** @internal */\n  [PullSteps](readRequest: ReadRequest<Uint8Array>): void {\n    const stream = this._controlledReadableByteStream;\n    assert(ReadableStreamHasDefaultReader(stream));\n\n    if (this._queueTotalSize > 0) {\n      assert(ReadableStreamGetNumReadRequests(stream) === 0);\n\n      const entry = this._queue.shift()!;\n      this._queueTotalSize -= entry.byteLength;\n\n      ReadableByteStreamControllerHandleQueueDrain(this);\n\n      const view = new Uint8Array(entry.buffer, entry.byteOffset, entry.byteLength);\n\n      readRequest._chunkSteps(view);\n      return;\n    }\n\n    const autoAllocateChunkSize = this._autoAllocateChunkSize;\n    if (autoAllocateChunkSize !== undefined) {\n      let buffer: ArrayBuffer;\n      try {\n        buffer = new ArrayBuffer(autoAllocateChunkSize);\n      } catch (bufferE) {\n        readRequest._errorSteps(bufferE);\n        return;\n      }\n\n      const pullIntoDescriptor: DefaultPullIntoDescriptor = {\n        buffer,\n        byteOffset: 0,\n        byteLength: autoAllocateChunkSize,\n        bytesFilled: 0,\n        elementSize: 1,\n        viewConstructor: Uint8Array,\n        readerType: 'default'\n      };\n\n      this._pendingPullIntos.push(pullIntoDescriptor);\n    }\n\n    ReadableStreamAddReadRequest(stream, readRequest);\n    ReadableByteStreamControllerCallPullIfNeeded(this);\n  }\n}\n\nObject.defineProperties(ReadableByteStreamController.prototype, {\n  close: { enumerable: true },\n  enqueue: { enumerable: true },\n  error: { enumerable: true },\n  byobRequest: { enumerable: true },\n  desiredSize: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(ReadableByteStreamController.prototype, Symbol.toStringTag, {\n    value: 'ReadableByteStreamController',\n    configurable: true\n  });\n}\n\n// Abstract operations for the ReadableByteStreamController.\n\nexport function IsReadableByteStreamController(x: any): x is ReadableByteStreamController {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_controlledReadableByteStream')) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction IsReadableStreamBYOBRequest(x: any): x is ReadableStreamBYOBRequest {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_associatedReadableByteStreamController')) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction ReadableByteStreamControllerCallPullIfNeeded(controller: ReadableByteStreamController): void {\n  const shouldPull = ReadableByteStreamControllerShouldCallPull(controller);\n  if (!shouldPull) {\n    return;\n  }\n\n  if (controller._pulling) {\n    controller._pullAgain = true;\n    return;\n  }\n\n  assert(!controller._pullAgain);\n\n  controller._pulling = true;\n\n  // TODO: Test controller argument\n  const pullPromise = controller._pullAlgorithm();\n  uponPromise(\n    pullPromise,\n    () => {\n      controller._pulling = false;\n\n      if (controller._pullAgain) {\n        controller._pullAgain = false;\n        ReadableByteStreamControllerCallPullIfNeeded(controller);\n      }\n    },\n    e => {\n      ReadableByteStreamControllerError(controller, e);\n    }\n  );\n}\n\nfunction ReadableByteStreamControllerClearPendingPullIntos(controller: ReadableByteStreamController) {\n  ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n  controller._pendingPullIntos = new SimpleQueue();\n}\n\nfunction ReadableByteStreamControllerCommitPullIntoDescriptor<T extends ArrayBufferView>(stream: ReadableByteStream,\n                                                                                         pullIntoDescriptor: PullIntoDescriptor<T>) {\n  assert(stream._state !== 'errored');\n\n  let done = false;\n  if (stream._state === 'closed') {\n    assert(pullIntoDescriptor.bytesFilled === 0);\n    done = true;\n  }\n\n  const filledView = ReadableByteStreamControllerConvertPullIntoDescriptor<T>(pullIntoDescriptor);\n  if (pullIntoDescriptor.readerType === 'default') {\n    ReadableStreamFulfillReadRequest(stream, filledView as unknown as Uint8Array, done);\n  } else {\n    assert(pullIntoDescriptor.readerType === 'byob');\n    ReadableStreamFulfillReadIntoRequest(stream, filledView, done);\n  }\n}\n\nfunction ReadableByteStreamControllerConvertPullIntoDescriptor<T extends ArrayBufferView>(pullIntoDescriptor: PullIntoDescriptor<T>): T {\n  const bytesFilled = pullIntoDescriptor.bytesFilled;\n  const elementSize = pullIntoDescriptor.elementSize;\n\n  assert(bytesFilled <= pullIntoDescriptor.byteLength);\n  assert(bytesFilled % elementSize === 0);\n\n  return new pullIntoDescriptor.viewConstructor(\n    pullIntoDescriptor.buffer, pullIntoDescriptor.byteOffset, bytesFilled / elementSize) as T;\n}\n\nfunction ReadableByteStreamControllerEnqueueChunkToQueue(controller: ReadableByteStreamController,\n                                                         buffer: ArrayBufferLike,\n                                                         byteOffset: number,\n                                                         byteLength: number) {\n  controller._queue.push({ buffer, byteOffset, byteLength });\n  controller._queueTotalSize += byteLength;\n}\n\nfunction ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller: ReadableByteStreamController,\n                                                                     pullIntoDescriptor: PullIntoDescriptor) {\n  const elementSize = pullIntoDescriptor.elementSize;\n\n  const currentAlignedBytes = pullIntoDescriptor.bytesFilled - pullIntoDescriptor.bytesFilled % elementSize;\n\n  const maxBytesToCopy = Math.min(controller._queueTotalSize,\n                                  pullIntoDescriptor.byteLength - pullIntoDescriptor.bytesFilled);\n  const maxBytesFilled = pullIntoDescriptor.bytesFilled + maxBytesToCopy;\n  const maxAlignedBytes = maxBytesFilled - maxBytesFilled % elementSize;\n\n  let totalBytesToCopyRemaining = maxBytesToCopy;\n  let ready = false;\n  if (maxAlignedBytes > currentAlignedBytes) {\n    totalBytesToCopyRemaining = maxAlignedBytes - pullIntoDescriptor.bytesFilled;\n    ready = true;\n  }\n\n  const queue = controller._queue;\n\n  while (totalBytesToCopyRemaining > 0) {\n    const headOfQueue = queue.peek();\n\n    const bytesToCopy = Math.min(totalBytesToCopyRemaining, headOfQueue.byteLength);\n\n    const destStart = pullIntoDescriptor.byteOffset + pullIntoDescriptor.bytesFilled;\n    CopyDataBlockBytes(pullIntoDescriptor.buffer, destStart, headOfQueue.buffer, headOfQueue.byteOffset, bytesToCopy);\n\n    if (headOfQueue.byteLength === bytesToCopy) {\n      queue.shift();\n    } else {\n      headOfQueue.byteOffset += bytesToCopy;\n      headOfQueue.byteLength -= bytesToCopy;\n    }\n    controller._queueTotalSize -= bytesToCopy;\n\n    ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, bytesToCopy, pullIntoDescriptor);\n\n    totalBytesToCopyRemaining -= bytesToCopy;\n  }\n\n  if (!ready) {\n    assert(controller._queueTotalSize === 0);\n    assert(pullIntoDescriptor.bytesFilled > 0);\n    assert(pullIntoDescriptor.bytesFilled < pullIntoDescriptor.elementSize);\n  }\n\n  return ready;\n}\n\nfunction ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller: ReadableByteStreamController,\n                                                                size: number,\n                                                                pullIntoDescriptor: PullIntoDescriptor) {\n  assert(controller._pendingPullIntos.length === 0 || controller._pendingPullIntos.peek() === pullIntoDescriptor);\n\n  ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n  pullIntoDescriptor.bytesFilled += size;\n}\n\nfunction ReadableByteStreamControllerHandleQueueDrain(controller: ReadableByteStreamController) {\n  assert(controller._controlledReadableByteStream._state === 'readable');\n\n  if (controller._queueTotalSize === 0 && controller._closeRequested) {\n    ReadableByteStreamControllerClearAlgorithms(controller);\n    ReadableStreamClose(controller._controlledReadableByteStream);\n  } else {\n    ReadableByteStreamControllerCallPullIfNeeded(controller);\n  }\n}\n\nfunction ReadableByteStreamControllerInvalidateBYOBRequest(controller: ReadableByteStreamController) {\n  if (controller._byobRequest === null) {\n    return;\n  }\n\n  controller._byobRequest._associatedReadableByteStreamController = undefined!;\n  controller._byobRequest._view = null!;\n  controller._byobRequest = null;\n}\n\nfunction ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller: ReadableByteStreamController) {\n  assert(!controller._closeRequested);\n\n  while (controller._pendingPullIntos.length > 0) {\n    if (controller._queueTotalSize === 0) {\n      return;\n    }\n\n    const pullIntoDescriptor = controller._pendingPullIntos.peek();\n\n    if (ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor)) {\n      ReadableByteStreamControllerShiftPendingPullInto(controller);\n\n      ReadableByteStreamControllerCommitPullIntoDescriptor(\n        controller._controlledReadableByteStream,\n        pullIntoDescriptor\n      );\n    }\n  }\n}\n\nexport function ReadableByteStreamControllerPullInto<T extends ArrayBufferView>(\n  controller: ReadableByteStreamController,\n  view: T,\n  readIntoRequest: ReadIntoRequest<T>\n): void {\n  const stream = controller._controlledReadableByteStream;\n\n  let elementSize = 1;\n  if (view.constructor !== DataView) {\n    elementSize = (view.constructor as ArrayBufferViewConstructor<T>).BYTES_PER_ELEMENT;\n  }\n\n  const ctor = view.constructor as ArrayBufferViewConstructor<T>;\n\n  const buffer = TransferArrayBuffer(view.buffer);\n  const pullIntoDescriptor: BYOBPullIntoDescriptor<T> = {\n    buffer,\n    byteOffset: view.byteOffset,\n    byteLength: view.byteLength,\n    bytesFilled: 0,\n    elementSize,\n    viewConstructor: ctor,\n    readerType: 'byob'\n  };\n\n  if (controller._pendingPullIntos.length > 0) {\n    controller._pendingPullIntos.push(pullIntoDescriptor);\n\n    // No ReadableByteStreamControllerCallPullIfNeeded() call since:\n    // - No change happens on desiredSize\n    // - The source has already been notified of that there's at least 1 pending read(view)\n\n    ReadableStreamAddReadIntoRequest(stream, readIntoRequest);\n    return;\n  }\n\n  if (stream._state === 'closed') {\n    const emptyView = new ctor(pullIntoDescriptor.buffer, pullIntoDescriptor.byteOffset, 0);\n    readIntoRequest._closeSteps(emptyView);\n    return;\n  }\n\n  if (controller._queueTotalSize > 0) {\n    if (ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor)) {\n      const filledView = ReadableByteStreamControllerConvertPullIntoDescriptor<T>(pullIntoDescriptor);\n\n      ReadableByteStreamControllerHandleQueueDrain(controller);\n\n      readIntoRequest._chunkSteps(filledView);\n      return;\n    }\n\n    if (controller._closeRequested) {\n      const e = new TypeError('Insufficient bytes to fill elements in the given buffer');\n      ReadableByteStreamControllerError(controller, e);\n\n      readIntoRequest._errorSteps(e);\n      return;\n    }\n  }\n\n  controller._pendingPullIntos.push(pullIntoDescriptor);\n\n  ReadableStreamAddReadIntoRequest<T>(stream, readIntoRequest);\n  ReadableByteStreamControllerCallPullIfNeeded(controller);\n}\n\nfunction ReadableByteStreamControllerRespondInClosedState(controller: ReadableByteStreamController,\n                                                          firstDescriptor: PullIntoDescriptor) {\n  firstDescriptor.buffer = TransferArrayBuffer(firstDescriptor.buffer);\n\n  assert(firstDescriptor.bytesFilled === 0);\n\n  const stream = controller._controlledReadableByteStream;\n  if (ReadableStreamHasBYOBReader(stream)) {\n    while (ReadableStreamGetNumReadIntoRequests(stream) > 0) {\n      const pullIntoDescriptor = ReadableByteStreamControllerShiftPendingPullInto(controller);\n      ReadableByteStreamControllerCommitPullIntoDescriptor(stream, pullIntoDescriptor);\n    }\n  }\n}\n\nfunction ReadableByteStreamControllerRespondInReadableState(controller: ReadableByteStreamController,\n                                                            bytesWritten: number,\n                                                            pullIntoDescriptor: PullIntoDescriptor) {\n  if (pullIntoDescriptor.bytesFilled + bytesWritten > pullIntoDescriptor.byteLength) {\n    throw new RangeError('bytesWritten out of range');\n  }\n\n  ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, bytesWritten, pullIntoDescriptor);\n\n  if (pullIntoDescriptor.bytesFilled < pullIntoDescriptor.elementSize) {\n    // TODO: Figure out whether we should detach the buffer or not here.\n    return;\n  }\n\n  ReadableByteStreamControllerShiftPendingPullInto(controller);\n\n  const remainderSize = pullIntoDescriptor.bytesFilled % pullIntoDescriptor.elementSize;\n  if (remainderSize > 0) {\n    const end = pullIntoDescriptor.byteOffset + pullIntoDescriptor.bytesFilled;\n    const remainder = pullIntoDescriptor.buffer.slice(end - remainderSize, end);\n    ReadableByteStreamControllerEnqueueChunkToQueue(controller, remainder, 0, remainder.byteLength);\n  }\n\n  pullIntoDescriptor.buffer = TransferArrayBuffer(pullIntoDescriptor.buffer);\n  pullIntoDescriptor.bytesFilled -= remainderSize;\n  ReadableByteStreamControllerCommitPullIntoDescriptor(controller._controlledReadableByteStream, pullIntoDescriptor);\n\n  ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);\n}\n\nfunction ReadableByteStreamControllerRespondInternal(controller: ReadableByteStreamController, bytesWritten: number) {\n  const firstDescriptor = controller._pendingPullIntos.peek();\n\n  const state = controller._controlledReadableByteStream._state;\n\n  if (state === 'closed') {\n    if (bytesWritten !== 0) {\n      throw new TypeError('bytesWritten must be 0 when calling respond() on a closed stream');\n    }\n\n    ReadableByteStreamControllerRespondInClosedState(controller, firstDescriptor);\n  } else {\n    assert(state === 'readable');\n\n    ReadableByteStreamControllerRespondInReadableState(controller, bytesWritten, firstDescriptor);\n  }\n\n  ReadableByteStreamControllerCallPullIfNeeded(controller);\n}\n\nfunction ReadableByteStreamControllerShiftPendingPullInto(controller: ReadableByteStreamController): PullIntoDescriptor {\n  const descriptor = controller._pendingPullIntos.shift()!;\n  ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n  return descriptor;\n}\n\nfunction ReadableByteStreamControllerShouldCallPull(controller: ReadableByteStreamController): boolean {\n  const stream = controller._controlledReadableByteStream;\n\n  if (stream._state !== 'readable') {\n    return false;\n  }\n\n  if (controller._closeRequested) {\n    return false;\n  }\n\n  if (!controller._started) {\n    return false;\n  }\n\n  if (ReadableStreamHasDefaultReader(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n    return true;\n  }\n\n  if (ReadableStreamHasBYOBReader(stream) && ReadableStreamGetNumReadIntoRequests(stream) > 0) {\n    return true;\n  }\n\n  const desiredSize = ReadableByteStreamControllerGetDesiredSize(controller);\n  assert(desiredSize !== null);\n  if (desiredSize! > 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction ReadableByteStreamControllerClearAlgorithms(controller: ReadableByteStreamController) {\n  controller._pullAlgorithm = undefined!;\n  controller._cancelAlgorithm = undefined!;\n}\n\n// A client of ReadableByteStreamController may use these functions directly to bypass state check.\n\nfunction ReadableByteStreamControllerClose(controller: ReadableByteStreamController) {\n  const stream = controller._controlledReadableByteStream;\n\n  if (controller._closeRequested || stream._state !== 'readable') {\n    return;\n  }\n\n  if (controller._queueTotalSize > 0) {\n    controller._closeRequested = true;\n\n    return;\n  }\n\n  if (controller._pendingPullIntos.length > 0) {\n    const firstPendingPullInto = controller._pendingPullIntos.peek();\n    if (firstPendingPullInto.bytesFilled > 0) {\n      const e = new TypeError('Insufficient bytes to fill elements in the given buffer');\n      ReadableByteStreamControllerError(controller, e);\n\n      throw e;\n    }\n  }\n\n  ReadableByteStreamControllerClearAlgorithms(controller);\n  ReadableStreamClose(stream);\n}\n\nfunction ReadableByteStreamControllerEnqueue(controller: ReadableByteStreamController, chunk: ArrayBufferView) {\n  const stream = controller._controlledReadableByteStream;\n\n  if (controller._closeRequested || stream._state !== 'readable') {\n    return;\n  }\n\n  const buffer = chunk.buffer;\n  const byteOffset = chunk.byteOffset;\n  const byteLength = chunk.byteLength;\n  const transferredBuffer = TransferArrayBuffer(buffer);\n\n  if (ReadableStreamHasDefaultReader(stream)) {\n    if (ReadableStreamGetNumReadRequests(stream) === 0) {\n      ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n    } else {\n      assert(controller._queue.length === 0);\n\n      const transferredView = new Uint8Array(transferredBuffer, byteOffset, byteLength);\n      ReadableStreamFulfillReadRequest(stream, transferredView, false);\n    }\n  } else if (ReadableStreamHasBYOBReader(stream)) {\n    // TODO: Ideally in this branch detaching should happen only if the buffer is not consumed fully.\n    ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n    ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);\n  } else {\n    assert(!IsReadableStreamLocked(stream));\n    ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n  }\n\n  ReadableByteStreamControllerCallPullIfNeeded(controller);\n}\n\nfunction ReadableByteStreamControllerError(controller: ReadableByteStreamController, e: any) {\n  const stream = controller._controlledReadableByteStream;\n\n  if (stream._state !== 'readable') {\n    return;\n  }\n\n  ReadableByteStreamControllerClearPendingPullIntos(controller);\n\n  ResetQueue(controller);\n  ReadableByteStreamControllerClearAlgorithms(controller);\n  ReadableStreamError(stream, e);\n}\n\nfunction ReadableByteStreamControllerGetDesiredSize(controller: ReadableByteStreamController): number | null {\n  const state = controller._controlledReadableByteStream._state;\n\n  if (state === 'errored') {\n    return null;\n  }\n  if (state === 'closed') {\n    return 0;\n  }\n\n  return controller._strategyHWM - controller._queueTotalSize;\n}\n\nfunction ReadableByteStreamControllerRespond(controller: ReadableByteStreamController, bytesWritten: number) {\n  bytesWritten = Number(bytesWritten);\n  if (!IsFiniteNonNegativeNumber(bytesWritten)) {\n    throw new RangeError('bytesWritten must be a finite');\n  }\n\n  assert(controller._pendingPullIntos.length > 0);\n\n  ReadableByteStreamControllerRespondInternal(controller, bytesWritten);\n}\n\nfunction ReadableByteStreamControllerRespondWithNewView(controller: ReadableByteStreamController,\n                                                        view: ArrayBufferView) {\n  assert(controller._pendingPullIntos.length > 0);\n\n  const firstDescriptor = controller._pendingPullIntos.peek();\n\n  if (firstDescriptor.byteOffset + firstDescriptor.bytesFilled !== view.byteOffset) {\n    throw new RangeError('The region specified by view does not match byobRequest');\n  }\n  if (firstDescriptor.byteLength !== view.byteLength) {\n    throw new RangeError('The buffer of view has different capacity than byobRequest');\n  }\n\n  firstDescriptor.buffer = view.buffer;\n\n  ReadableByteStreamControllerRespondInternal(controller, view.byteLength);\n}\n\nexport function SetUpReadableByteStreamController(stream: ReadableByteStream,\n                                                  controller: ReadableByteStreamController,\n                                                  startAlgorithm: () => void | PromiseLike<void>,\n                                                  pullAlgorithm: () => Promise<void>,\n                                                  cancelAlgorithm: (reason: any) => Promise<void>,\n                                                  highWaterMark: number,\n                                                  autoAllocateChunkSize: number | undefined) {\n  assert(stream._readableStreamController === undefined);\n  if (autoAllocateChunkSize !== undefined) {\n    assert(NumberIsInteger(autoAllocateChunkSize));\n    assert(autoAllocateChunkSize > 0);\n  }\n\n  controller._controlledReadableByteStream = stream;\n\n  controller._pullAgain = false;\n  controller._pulling = false;\n\n  controller._byobRequest = null;\n\n  // Need to set the slots so that the assert doesn't fire. In the spec the slots already exist implicitly.\n  controller._queue = controller._queueTotalSize = undefined!;\n  ResetQueue(controller);\n\n  controller._closeRequested = false;\n  controller._started = false;\n\n  controller._strategyHWM = highWaterMark;\n\n  controller._pullAlgorithm = pullAlgorithm;\n  controller._cancelAlgorithm = cancelAlgorithm;\n\n  controller._autoAllocateChunkSize = autoAllocateChunkSize;\n\n  controller._pendingPullIntos = new SimpleQueue();\n\n  stream._readableStreamController = controller;\n\n  const startResult = startAlgorithm();\n  uponPromise(\n    promiseResolvedWith(startResult),\n    () => {\n      controller._started = true;\n\n      assert(!controller._pulling);\n      assert(!controller._pullAgain);\n\n      ReadableByteStreamControllerCallPullIfNeeded(controller);\n    },\n    r => {\n      ReadableByteStreamControllerError(controller, r);\n    }\n  );\n}\n\nexport function SetUpReadableByteStreamControllerFromUnderlyingSource(\n  stream: ReadableByteStream,\n  underlyingByteSource: ValidatedUnderlyingByteSource,\n  highWaterMark: number\n) {\n  const controller: ReadableByteStreamController = Object.create(ReadableByteStreamController.prototype);\n\n  let startAlgorithm: () => void | PromiseLike<void> = () => undefined;\n  let pullAlgorithm: () => Promise<void> = () => promiseResolvedWith(undefined);\n  let cancelAlgorithm: (reason: any) => Promise<void> = () => promiseResolvedWith(undefined);\n\n  if (underlyingByteSource.start !== undefined) {\n    startAlgorithm = () => underlyingByteSource.start!(controller);\n  }\n  if (underlyingByteSource.pull !== undefined) {\n    pullAlgorithm = () => underlyingByteSource.pull!(controller);\n  }\n  if (underlyingByteSource.cancel !== undefined) {\n    cancelAlgorithm = reason => underlyingByteSource.cancel!(reason);\n  }\n\n  const autoAllocateChunkSize = underlyingByteSource.autoAllocateChunkSize;\n  if (autoAllocateChunkSize === 0) {\n    throw new TypeError('autoAllocateChunkSize must be greater than 0');\n  }\n\n  SetUpReadableByteStreamController(\n    stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, autoAllocateChunkSize\n  );\n}\n\nfunction SetUpReadableStreamBYOBRequest(request: ReadableStreamBYOBRequest,\n                                        controller: ReadableByteStreamController,\n                                        view: ArrayBufferView) {\n  assert(IsReadableByteStreamController(controller));\n  assert(typeof view === 'object');\n  assert(ArrayBuffer.isView(view));\n  assert(!IsDetachedBuffer(view.buffer));\n  request._associatedReadableByteStreamController = controller;\n  request._view = view;\n}\n\n// Helper functions for the ReadableStreamBYOBRequest.\n\nfunction byobRequestBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `ReadableStreamBYOBRequest.prototype.${name} can only be used on a ReadableStreamBYOBRequest`);\n}\n\n// Helper functions for the ReadableByteStreamController.\n\nfunction byteStreamControllerBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `ReadableByteStreamController.prototype.${name} can only be used on a ReadableByteStreamController`);\n}\n", "import assert from '../../stub/assert';\nimport { SimpleQueue } from '../simple-queue';\nimport {\n  ReadableStreamReaderGenericCancel,\n  ReadableStreamReaderGenericInitialize,\n  ReadableStreamReaderGenericRelease,\n  readerLockException\n} from './generic-reader';\nimport { IsReadableStreamLocked, ReadableByteStream, ReadableStream } from '../readable-stream';\nimport {\n  IsReadableByteStreamController,\n  ReadableByteStreamController,\n  ReadableByteStreamControllerPullInto\n} from './byte-stream-controller';\nimport { typeIsObject } from '../helpers/miscellaneous';\nimport { newPromise, promiseRejectedWith } from '../helpers/webidl';\nimport { assertRequiredArgument } from '../validators/basic';\nimport { assertReadableStream } from '../validators/readable-stream';\n\n/**\n * A result returned by {@link ReadableStreamBYOBReader.read}.\n *\n * @public\n */\nexport type ReadableStreamBYOBReadResult<T extends ArrayBufferView> = {\n  done: boolean;\n  value: T;\n};\n\n// Abstract operations for the ReadableStream.\n\nexport function AcquireReadableStreamBYOBReader(stream: ReadableStream<Uint8Array>): ReadableStreamBYOBReader {\n  return new ReadableStreamBYOBReader(stream);\n}\n\n// ReadableStream API exposed for controllers.\n\nexport function ReadableStreamAddReadIntoRequest<T extends ArrayBufferView>(stream: ReadableByteStream,\n                                                                            readIntoRequest: ReadIntoRequest<T>): void {\n  assert(IsReadableStreamBYOBReader(stream._reader));\n  assert(stream._state === 'readable' || stream._state === 'closed');\n\n  (stream._reader! as ReadableStreamBYOBReader)._readIntoRequests.push(readIntoRequest);\n}\n\nexport function ReadableStreamFulfillReadIntoRequest(stream: ReadableByteStream,\n                                                     chunk: ArrayBufferView,\n                                                     done: boolean) {\n  const reader = stream._reader as ReadableStreamBYOBReader;\n\n  assert(reader._readIntoRequests.length > 0);\n\n  const readIntoRequest = reader._readIntoRequests.shift()!;\n  if (done) {\n    readIntoRequest._closeSteps(chunk);\n  } else {\n    readIntoRequest._chunkSteps(chunk);\n  }\n}\n\nexport function ReadableStreamGetNumReadIntoRequests(stream: ReadableByteStream): number {\n  return (stream._reader as ReadableStreamBYOBReader)._readIntoRequests.length;\n}\n\nexport function ReadableStreamHasBYOBReader(stream: ReadableByteStream): boolean {\n  const reader = stream._reader;\n\n  if (reader === undefined) {\n    return false;\n  }\n\n  if (!IsReadableStreamBYOBReader(reader)) {\n    return false;\n  }\n\n  return true;\n}\n\n// Readers\n\nexport interface ReadIntoRequest<T extends ArrayBufferView> {\n  _chunkSteps(chunk: T): void;\n\n  _closeSteps(chunk: T): void;\n\n  _errorSteps(e: any): void;\n}\n\n/**\n * A BYOB reader vended by a {@link ReadableStream}.\n *\n * @public\n */\nexport class ReadableStreamBYOBReader {\n  /** @internal */\n  _ownerReadableStream!: ReadableByteStream;\n  /** @internal */\n  _closedPromise!: Promise<undefined>;\n  /** @internal */\n  _closedPromise_resolve?: (value?: undefined) => void;\n  /** @internal */\n  _closedPromise_reject?: (reason: any) => void;\n  /** @internal */\n  _readIntoRequests: SimpleQueue<ReadIntoRequest<any>>;\n\n  constructor(stream: ReadableByteStream) {\n    assertRequiredArgument(stream, 1, 'ReadableStreamBYOBReader');\n    assertReadableStream(stream, 'First parameter');\n\n    if (IsReadableStreamLocked(stream)) {\n      throw new TypeError('This stream has already been locked for exclusive reading by another reader');\n    }\n\n    if (!IsReadableByteStreamController(stream._readableStreamController)) {\n      throw new TypeError('Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte ' +\n        'source');\n    }\n\n    ReadableStreamReaderGenericInitialize(this, stream);\n\n    this._readIntoRequests = new SimpleQueue();\n  }\n\n  /**\n   * Returns a promise that will be fulfilled when the stream becomes closed, or rejected if the stream ever errors or\n   * the reader's lock is released before the stream finishes closing.\n   */\n  get closed(): Promise<undefined> {\n    if (!IsReadableStreamBYOBReader(this)) {\n      return promiseRejectedWith(byobReaderBrandCheckException('closed'));\n    }\n\n    return this._closedPromise;\n  }\n\n  /**\n   * If the reader is active, behaves the same as {@link ReadableStream.cancel | stream.cancel(reason)}.\n   */\n  cancel(reason: any = undefined): Promise<undefined> {\n    if (!IsReadableStreamBYOBReader(this)) {\n      return promiseRejectedWith(byobReaderBrandCheckException('cancel'));\n    }\n\n    if (this._ownerReadableStream === undefined) {\n      return promiseRejectedWith(readerLockException('cancel'));\n    }\n\n    return ReadableStreamReaderGenericCancel(this, reason);\n  }\n\n  /**\n   * Attempts to reads bytes into view, and returns a promise resolved with the result.\n   *\n   * If reading a chunk causes the queue to become empty, more data will be pulled from the underlying source.\n   */\n  read<T extends ArrayBufferView>(view: T): Promise<ReadableStreamBYOBReadResult<T>> {\n    if (!IsReadableStreamBYOBReader(this)) {\n      return promiseRejectedWith(byobReaderBrandCheckException('read'));\n    }\n\n    if (!ArrayBuffer.isView(view)) {\n      return promiseRejectedWith(new TypeError('view must be an array buffer view'));\n    }\n    if (view.byteLength === 0) {\n      return promiseRejectedWith(new TypeError('view must have non-zero byteLength'));\n    }\n    if (view.buffer.byteLength === 0) {\n      return promiseRejectedWith(new TypeError(`view's buffer must have non-zero byteLength`));\n    }\n\n    if (this._ownerReadableStream === undefined) {\n      return promiseRejectedWith(readerLockException('read from'));\n    }\n\n    let resolvePromise!: (result: ReadableStreamBYOBReadResult<T>) => void;\n    let rejectPromise!: (reason: any) => void;\n    const promise = newPromise<ReadableStreamBYOBReadResult<T>>((resolve, reject) => {\n      resolvePromise = resolve;\n      rejectPromise = reject;\n    });\n    const readIntoRequest: ReadIntoRequest<T> = {\n      _chunkSteps: chunk => resolvePromise({ value: chunk, done: false }),\n      _closeSteps: chunk => resolvePromise({ value: chunk, done: true }),\n      _errorSteps: e => rejectPromise(e)\n    };\n    ReadableStreamBYOBReaderRead(this, view, readIntoRequest);\n    return promise;\n  }\n\n  /**\n   * Releases the reader's lock on the corresponding stream. After the lock is released, the reader is no longer active.\n   * If the associated stream is errored when the lock is released, the reader will appear errored in the same way\n   * from now on; otherwise, the reader will appear closed.\n   *\n   * A reader's lock cannot be released while it still has a pending read request, i.e., if a promise returned by\n   * the reader's {@link ReadableStreamBYOBReader.read | read()} method has not yet been settled. Attempting to\n   * do so will throw a `TypeError` and leave the reader locked to the stream.\n   */\n  releaseLock(): void {\n    if (!IsReadableStreamBYOBReader(this)) {\n      throw byobReaderBrandCheckException('releaseLock');\n    }\n\n    if (this._ownerReadableStream === undefined) {\n      return;\n    }\n\n    if (this._readIntoRequests.length > 0) {\n      throw new TypeError('Tried to release a reader lock when that reader has pending read() calls un-settled');\n    }\n\n    ReadableStreamReaderGenericRelease(this);\n  }\n}\n\nObject.defineProperties(ReadableStreamBYOBReader.prototype, {\n  cancel: { enumerable: true },\n  read: { enumerable: true },\n  releaseLock: { enumerable: true },\n  closed: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(ReadableStreamBYOBReader.prototype, Symbol.toStringTag, {\n    value: 'ReadableStreamBYOBReader',\n    configurable: true\n  });\n}\n\n// Abstract operations for the readers.\n\nexport function IsReadableStreamBYOBReader(x: any): x is ReadableStreamBYOBReader {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_readIntoRequests')) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction ReadableStreamBYOBReaderRead<T extends ArrayBufferView>(reader: ReadableStreamBYOBReader,\n                                                                 view: T,\n                                                                 readIntoRequest: ReadIntoRequest<T>): void {\n  const stream = reader._ownerReadableStream;\n\n  assert(stream !== undefined);\n\n  stream._disturbed = true;\n\n  if (stream._state === 'errored') {\n    readIntoRequest._errorSteps(stream._storedError);\n  } else {\n    ReadableByteStreamControllerPullInto(\n      stream._readableStreamController as ReadableByteStreamController,\n      view,\n      readIntoRequest\n    );\n  }\n}\n\n// Helper functions for the ReadableStreamBYOBReader.\n\nfunction byobReaderBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `ReadableStreamBYOBReader.prototype.${name} can only be used on a ReadableStreamBYOBReader`);\n}\n", "import { QueuingStrategy, QueuingStrategySizeCallback } from '../queuing-strategy';\nimport NumberIsNaN from '../../stub/number-isnan';\n\nexport function ExtractHighWaterMark(strategy: QueuingStrategy, defaultHWM: number): number {\n  const { highWaterMark } = strategy;\n\n  if (highWaterMark === undefined) {\n    return defaultHWM;\n  }\n\n  if (NumberIsNaN(highWaterMark) || highWaterMark < 0) {\n    throw new RangeError('Invalid highWaterMark');\n  }\n\n  return highWaterMark;\n}\n\nexport function ExtractSizeAlgorithm<T>(strategy: QueuingStrategy<T>): QueuingStrategySizeCallback<T> {\n  const { size } = strategy;\n\n  if (!size) {\n    return () => 1;\n  }\n\n  return size;\n}\n", "import { QueuingStrategy, QueuingStrategySizeCallback } from '../queuing-strategy';\nimport { assertDictionary, assertFunction, convertUnrestrictedDouble } from './basic';\n\nexport function convertQueuingStrategy<T>(init: QueuingStrategy<T> | null | undefined,\n                                          context: string): QueuingStrategy<T> {\n  assertDictionary(init, context);\n  const highWaterMark = init?.highWaterMark;\n  const size = init?.size;\n  return {\n    highWaterMark: highWaterMark === undefined ? undefined : convertUnrestrictedDouble(highWaterMark),\n    size: size === undefined ? undefined : convertQueuingStrategySize(size, `${context} has member 'size' that`)\n  };\n}\n\nfunction convertQueuingStrategySize<T>(fn: QueuingStrategySizeCallback<T>,\n                                       context: string): QueuingStrategySizeCallback<T> {\n  assertFunction(fn, context);\n  return chunk => convertUnrestrictedDouble(fn(chunk));\n}\n", "import { assertDictionary, assertFunction } from './basic';\nimport { promiseCall, reflectCall } from '../helpers/webidl';\nimport {\n  UnderlyingSink,\n  UnderlyingSinkAbortCallback,\n  UnderlyingSinkCloseCallback,\n  UnderlyingSinkStartCallback,\n  UnderlyingSinkWriteCallback,\n  ValidatedUnderlyingSink\n} from '../writable-stream/underlying-sink';\nimport { WritableStreamDefaultController } from '../writable-stream';\n\nexport function convertUnderlyingSink<W>(original: UnderlyingSink<W> | null,\n                                         context: string): ValidatedUnderlyingSink<W> {\n  assertDictionary(original, context);\n  const abort = original?.abort;\n  const close = original?.close;\n  const start = original?.start;\n  const type = original?.type;\n  const write = original?.write;\n  return {\n    abort: abort === undefined ?\n      undefined :\n      convertUnderlyingSinkAbortCallback(abort, original!, `${context} has member 'abort' that`),\n    close: close === undefined ?\n      undefined :\n      convertUnderlyingSinkCloseCallback(close, original!, `${context} has member 'close' that`),\n    start: start === undefined ?\n      undefined :\n      convertUnderlyingSinkStartCallback(start, original!, `${context} has member 'start' that`),\n    write: write === undefined ?\n      undefined :\n      convertUnderlyingSinkWriteCallback(write, original!, `${context} has member 'write' that`),\n    type\n  };\n}\n\nfunction convertUnderlyingSinkAbortCallback(\n  fn: UnderlyingSinkAbortCallback,\n  original: UnderlyingSink,\n  context: string\n): (reason: any) => Promise<void> {\n  assertFunction(fn, context);\n  return (reason: any) => promiseCall(fn, original, [reason]);\n}\n\nfunction convertUnderlyingSinkCloseCallback(\n  fn: UnderlyingSinkCloseCallback,\n  original: UnderlyingSink,\n  context: string\n): () => Promise<void> {\n  assertFunction(fn, context);\n  return () => promiseCall(fn, original, []);\n}\n\nfunction convertUnderlyingSinkStartCallback(\n  fn: UnderlyingSinkStartCallback,\n  original: UnderlyingSink,\n  context: string\n): UnderlyingSinkStartCallback {\n  assertFunction(fn, context);\n  return (controller: WritableStreamDefaultController) => reflectCall(fn, original, [controller]);\n}\n\nfunction convertUnderlyingSinkWriteCallback<W>(\n  fn: UnderlyingSinkWriteCallback<W>,\n  original: UnderlyingSink<W>,\n  context: string\n): (chunk: W, controller: WritableStreamDefaultController) => Promise<void> {\n  assertFunction(fn, context);\n  return (chunk: W, controller: WritableStreamDefaultController) => promiseCall(fn, original, [chunk, controller]);\n}\n", "import { IsWritableStream, WritableStream } from '../writable-stream';\n\nexport function assertWritableStream(x: unknown, context: string): asserts x is WritableStream {\n  if (!IsWritableStream(x)) {\n    throw new TypeError(`${context} is not a WritableStream.`);\n  }\n}\n", "import assert from '../stub/assert';\nimport {\n  newPromise,\n  promiseRejectedWith,\n  promiseResolvedWith,\n  setPromiseIsHandledToTrue,\n  uponPromise\n} from './helpers/webidl';\nimport {\n  DequeueValue,\n  EnqueueValueWithSize,\n  PeekQueueValue,\n  QueuePair,\n  ResetQueue\n} from './abstract-ops/queue-with-sizes';\nimport { QueuingStrategy, QueuingStrategySizeCallback } from './queuing-strategy';\nimport { SimpleQueue } from './simple-queue';\nimport { typeIsObject } from './helpers/miscellaneous';\nimport { AbortSteps, ErrorSteps } from './abstract-ops/internal-methods';\nimport { IsNonNegativeNumber } from './abstract-ops/miscellaneous';\nimport { ExtractHighWaterMark, ExtractSizeAlgorithm } from './abstract-ops/queuing-strategy';\nimport { convertQueuingStrategy } from './validators/queuing-strategy';\nimport {\n  UnderlyingSink,\n  UnderlyingSinkAbortCallback,\n  UnderlyingSinkCloseCallback,\n  UnderlyingSinkStartCallback,\n  UnderlyingSinkWriteCallback,\n  ValidatedUnderlyingSink\n} from './writable-stream/underlying-sink';\nimport { assertObject, assertRequiredArgument } from './validators/basic';\nimport { convertUnderlyingSink } from './validators/underlying-sink';\nimport { assertWritableStream } from './validators/writable-stream';\n\ntype WritableStreamState = 'writable' | 'closed' | 'erroring' | 'errored';\n\ninterface WriteOrCloseRequest {\n  _resolve: (value?: undefined) => void;\n  _reject: (reason: any) => void;\n}\n\ntype WriteRequest = WriteOrCloseRequest;\ntype CloseRequest = WriteOrCloseRequest;\n\ninterface PendingAbortRequest {\n  _promise: Promise<undefined>;\n  _resolve: (value?: undefined) => void;\n  _reject: (reason: any) => void;\n  _reason: any;\n  _wasAlreadyErroring: boolean;\n}\n\n/**\n * A writable stream represents a destination for data, into which you can write.\n *\n * @public\n */\nclass WritableStream<W = any> {\n  /** @internal */\n  _state!: WritableStreamState;\n  /** @internal */\n  _storedError: any;\n  /** @internal */\n  _writer: WritableStreamDefaultWriter<W> | undefined;\n  /** @internal */\n  _writableStreamController!: WritableStreamDefaultController<W>;\n  /** @internal */\n  _writeRequests!: SimpleQueue<WriteRequest>;\n  /** @internal */\n  _inFlightWriteRequest: WriteRequest | undefined;\n  /** @internal */\n  _closeRequest: CloseRequest | undefined;\n  /** @internal */\n  _inFlightCloseRequest: CloseRequest | undefined;\n  /** @internal */\n  _pendingAbortRequest: PendingAbortRequest | undefined;\n  /** @internal */\n  _backpressure!: boolean;\n\n  constructor(underlyingSink?: UnderlyingSink<W>, strategy?: QueuingStrategy<W>);\n  constructor(rawUnderlyingSink: UnderlyingSink<W> | null | undefined = {},\n              rawStrategy: QueuingStrategy<W> | null | undefined = {}) {\n    if (rawUnderlyingSink === undefined) {\n      rawUnderlyingSink = null;\n    } else {\n      assertObject(rawUnderlyingSink, 'First parameter');\n    }\n\n    const strategy = convertQueuingStrategy(rawStrategy, 'Second parameter');\n    const underlyingSink = convertUnderlyingSink(rawUnderlyingSink, 'First parameter');\n\n    InitializeWritableStream(this);\n\n    const type = underlyingSink.type;\n    if (type !== undefined) {\n      throw new RangeError('Invalid type is specified');\n    }\n\n    const sizeAlgorithm = ExtractSizeAlgorithm(strategy);\n    const highWaterMark = ExtractHighWaterMark(strategy, 1);\n\n    SetUpWritableStreamDefaultControllerFromUnderlyingSink(this, underlyingSink, highWaterMark, sizeAlgorithm);\n  }\n\n  /**\n   * Returns whether or not the writable stream is locked to a writer.\n   */\n  get locked(): boolean {\n    if (!IsWritableStream(this)) {\n      throw streamBrandCheckException('locked');\n    }\n\n    return IsWritableStreamLocked(this);\n  }\n\n  /**\n   * Aborts the stream, signaling that the producer can no longer successfully write to the stream and it is to be\n   * immediately moved to an errored state, with any queued-up writes discarded. This will also execute any abort\n   * mechanism of the underlying sink.\n   *\n   * The returned promise will fulfill if the stream shuts down successfully, or reject if the underlying sink signaled\n   * that there was an error doing so. Additionally, it will reject with a `TypeError` (without attempting to cancel\n   * the stream) if the stream is currently locked.\n   */\n  abort(reason: any = undefined): Promise<undefined> {\n    if (!IsWritableStream(this)) {\n      return promiseRejectedWith(streamBrandCheckException('abort'));\n    }\n\n    if (IsWritableStreamLocked(this)) {\n      return promiseRejectedWith(new TypeError('Cannot abort a stream that already has a writer'));\n    }\n\n    return WritableStreamAbort(this, reason);\n  }\n\n  /**\n   * Closes the stream. The underlying sink will finish processing any previously-written chunks, before invoking its\n   * close behavior. During this time any further attempts to write will fail (without erroring the stream).\n   *\n   * The method returns a promise that will fulfill if all remaining chunks are successfully written and the stream\n   * successfully closes, or rejects if an error is encountered during this process. Additionally, it will reject with\n   * a `TypeError` (without attempting to cancel the stream) if the stream is currently locked.\n   */\n  close() {\n    if (!IsWritableStream(this)) {\n      return promiseRejectedWith(streamBrandCheckException('close'));\n    }\n\n    if (IsWritableStreamLocked(this)) {\n      return promiseRejectedWith(new TypeError('Cannot close a stream that already has a writer'));\n    }\n\n    if (WritableStreamCloseQueuedOrInFlight(this)) {\n      return promiseRejectedWith(new TypeError('Cannot close an already-closing stream'));\n    }\n\n    return WritableStreamClose(this);\n  }\n\n  /**\n   * Creates a {@link WritableStreamDefaultWriter | writer} and locks the stream to the new writer. While the stream\n   * is locked, no other writer can be acquired until this one is released.\n   *\n   * This functionality is especially useful for creating abstractions that desire the ability to write to a stream\n   * without interruption or interleaving. By getting a writer for the stream, you can ensure nobody else can write at\n   * the same time, which would cause the resulting written data to be unpredictable and probably useless.\n   */\n  getWriter(): WritableStreamDefaultWriter<W> {\n    if (!IsWritableStream(this)) {\n      throw streamBrandCheckException('getWriter');\n    }\n\n    return AcquireWritableStreamDefaultWriter(this);\n  }\n}\n\nObject.defineProperties(WritableStream.prototype, {\n  abort: { enumerable: true },\n  close: { enumerable: true },\n  getWriter: { enumerable: true },\n  locked: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(WritableStream.prototype, Symbol.toStringTag, {\n    value: 'WritableStream',\n    configurable: true\n  });\n}\n\nexport {\n  AcquireWritableStreamDefaultWriter,\n  CreateWritableStream,\n  IsWritableStream,\n  IsWritableStreamLocked,\n  WritableStream,\n  WritableStreamAbort,\n  WritableStreamDefaultControllerErrorIfNeeded,\n  WritableStreamDefaultWriterCloseWithErrorPropagation,\n  WritableStreamDefaultWriterRelease,\n  WritableStreamDefaultWriterWrite,\n  WritableStreamCloseQueuedOrInFlight,\n  UnderlyingSink,\n  UnderlyingSinkStartCallback,\n  UnderlyingSinkWriteCallback,\n  UnderlyingSinkCloseCallback,\n  UnderlyingSinkAbortCallback\n};\n\n// Abstract operations for the WritableStream.\n\nfunction AcquireWritableStreamDefaultWriter<W>(stream: WritableStream<W>): WritableStreamDefaultWriter<W> {\n  return new WritableStreamDefaultWriter(stream);\n}\n\n// Throws if and only if startAlgorithm throws.\nfunction CreateWritableStream<W>(startAlgorithm: () => void | PromiseLike<void>,\n                                 writeAlgorithm: (chunk: W) => Promise<void>,\n                                 closeAlgorithm: () => Promise<void>,\n                                 abortAlgorithm: (reason: any) => Promise<void>,\n                                 highWaterMark = 1,\n                                 sizeAlgorithm: QueuingStrategySizeCallback<W> = () => 1) {\n  assert(IsNonNegativeNumber(highWaterMark));\n\n  const stream: WritableStream<W> = Object.create(WritableStream.prototype);\n  InitializeWritableStream(stream);\n\n  const controller: WritableStreamDefaultController<W> = Object.create(WritableStreamDefaultController.prototype);\n\n  SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm,\n                                       abortAlgorithm, highWaterMark, sizeAlgorithm);\n  return stream;\n}\n\nfunction InitializeWritableStream<W>(stream: WritableStream<W>) {\n  stream._state = 'writable';\n\n  // The error that will be reported by new method calls once the state becomes errored. Only set when [[state]] is\n  // 'erroring' or 'errored'. May be set to an undefined value.\n  stream._storedError = undefined;\n\n  stream._writer = undefined;\n\n  // Initialize to undefined first because the constructor of the controller checks this\n  // variable to validate the caller.\n  stream._writableStreamController = undefined!;\n\n  // This queue is placed here instead of the writer class in order to allow for passing a writer to the next data\n  // producer without waiting for the queued writes to finish.\n  stream._writeRequests = new SimpleQueue();\n\n  // Write requests are removed from _writeRequests when write() is called on the underlying sink. This prevents\n  // them from being erroneously rejected on error. If a write() call is in-flight, the request is stored here.\n  stream._inFlightWriteRequest = undefined;\n\n  // The promise that was returned from writer.close(). Stored here because it may be fulfilled after the writer\n  // has been detached.\n  stream._closeRequest = undefined;\n\n  // Close request is removed from _closeRequest when close() is called on the underlying sink. This prevents it\n  // from being erroneously rejected on error. If a close() call is in-flight, the request is stored here.\n  stream._inFlightCloseRequest = undefined;\n\n  // The promise that was returned from writer.abort(). This may also be fulfilled after the writer has detached.\n  stream._pendingAbortRequest = undefined;\n\n  // The backpressure signal set by the controller.\n  stream._backpressure = false;\n}\n\nfunction IsWritableStream(x: unknown): x is WritableStream {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_writableStreamController')) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction IsWritableStreamLocked(stream: WritableStream): boolean {\n  assert(IsWritableStream(stream));\n\n  if (stream._writer === undefined) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction WritableStreamAbort(stream: WritableStream, reason: any): Promise<undefined> {\n  const state = stream._state;\n  if (state === 'closed' || state === 'errored') {\n    return promiseResolvedWith(undefined);\n  }\n  if (stream._pendingAbortRequest !== undefined) {\n    return stream._pendingAbortRequest._promise;\n  }\n\n  assert(state === 'writable' || state === 'erroring');\n\n  let wasAlreadyErroring = false;\n  if (state === 'erroring') {\n    wasAlreadyErroring = true;\n    // reason will not be used, so don't keep a reference to it.\n    reason = undefined;\n  }\n\n  const promise = newPromise<undefined>((resolve, reject) => {\n    stream._pendingAbortRequest = {\n      _promise: undefined!,\n      _resolve: resolve,\n      _reject: reject,\n      _reason: reason,\n      _wasAlreadyErroring: wasAlreadyErroring\n    };\n  });\n  stream._pendingAbortRequest!._promise = promise;\n\n  if (!wasAlreadyErroring) {\n    WritableStreamStartErroring(stream, reason);\n  }\n\n  return promise;\n}\n\nfunction WritableStreamClose(stream: WritableStream<any>): Promise<undefined> {\n  const state = stream._state;\n  if (state === 'closed' || state === 'errored') {\n    return promiseRejectedWith(new TypeError(\n      `The stream (in ${state} state) is not in the writable state and cannot be closed`));\n  }\n\n  assert(state === 'writable' || state === 'erroring');\n  assert(!WritableStreamCloseQueuedOrInFlight(stream));\n\n  const promise = newPromise<undefined>((resolve, reject) => {\n    const closeRequest: CloseRequest = {\n      _resolve: resolve,\n      _reject: reject\n    };\n\n    stream._closeRequest = closeRequest;\n  });\n\n  const writer = stream._writer;\n  if (writer !== undefined && stream._backpressure && state === 'writable') {\n    defaultWriterReadyPromiseResolve(writer);\n  }\n\n  WritableStreamDefaultControllerClose(stream._writableStreamController);\n\n  return promise;\n}\n\n// WritableStream API exposed for controllers.\n\nfunction WritableStreamAddWriteRequest(stream: WritableStream): Promise<undefined> {\n  assert(IsWritableStreamLocked(stream));\n  assert(stream._state === 'writable');\n\n  const promise = newPromise<undefined>((resolve, reject) => {\n    const writeRequest: WriteRequest = {\n      _resolve: resolve,\n      _reject: reject\n    };\n\n    stream._writeRequests.push(writeRequest);\n  });\n\n  return promise;\n}\n\nfunction WritableStreamDealWithRejection(stream: WritableStream, error: any) {\n  const state = stream._state;\n\n  if (state === 'writable') {\n    WritableStreamStartErroring(stream, error);\n    return;\n  }\n\n  assert(state === 'erroring');\n  WritableStreamFinishErroring(stream);\n}\n\nfunction WritableStreamStartErroring(stream: WritableStream, reason: any) {\n  assert(stream._storedError === undefined);\n  assert(stream._state === 'writable');\n\n  const controller = stream._writableStreamController;\n  assert(controller !== undefined);\n\n  stream._state = 'erroring';\n  stream._storedError = reason;\n  const writer = stream._writer;\n  if (writer !== undefined) {\n    WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, reason);\n  }\n\n  if (!WritableStreamHasOperationMarkedInFlight(stream) && controller._started) {\n    WritableStreamFinishErroring(stream);\n  }\n}\n\nfunction WritableStreamFinishErroring(stream: WritableStream) {\n  assert(stream._state === 'erroring');\n  assert(!WritableStreamHasOperationMarkedInFlight(stream));\n  stream._state = 'errored';\n  stream._writableStreamController[ErrorSteps]();\n\n  const storedError = stream._storedError;\n  stream._writeRequests.forEach(writeRequest => {\n    writeRequest._reject(storedError);\n  });\n  stream._writeRequests = new SimpleQueue();\n\n  if (stream._pendingAbortRequest === undefined) {\n    WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n    return;\n  }\n\n  const abortRequest = stream._pendingAbortRequest;\n  stream._pendingAbortRequest = undefined;\n\n  if (abortRequest._wasAlreadyErroring) {\n    abortRequest._reject(storedError);\n    WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n    return;\n  }\n\n  const promise = stream._writableStreamController[AbortSteps](abortRequest._reason);\n  uponPromise(\n    promise,\n    () => {\n      abortRequest._resolve();\n      WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n    },\n    (reason: any) => {\n      abortRequest._reject(reason);\n      WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n    });\n}\n\nfunction WritableStreamFinishInFlightWrite(stream: WritableStream) {\n  assert(stream._inFlightWriteRequest !== undefined);\n  stream._inFlightWriteRequest!._resolve(undefined);\n  stream._inFlightWriteRequest = undefined;\n}\n\nfunction WritableStreamFinishInFlightWriteWithError(stream: WritableStream, error: any) {\n  assert(stream._inFlightWriteRequest !== undefined);\n  stream._inFlightWriteRequest!._reject(error);\n  stream._inFlightWriteRequest = undefined;\n\n  assert(stream._state === 'writable' || stream._state === 'erroring');\n\n  WritableStreamDealWithRejection(stream, error);\n}\n\nfunction WritableStreamFinishInFlightClose(stream: WritableStream) {\n  assert(stream._inFlightCloseRequest !== undefined);\n  stream._inFlightCloseRequest!._resolve(undefined);\n  stream._inFlightCloseRequest = undefined;\n\n  const state = stream._state;\n\n  assert(state === 'writable' || state === 'erroring');\n\n  if (state === 'erroring') {\n    // The error was too late to do anything, so it is ignored.\n    stream._storedError = undefined;\n    if (stream._pendingAbortRequest !== undefined) {\n      stream._pendingAbortRequest._resolve();\n      stream._pendingAbortRequest = undefined;\n    }\n  }\n\n  stream._state = 'closed';\n\n  const writer = stream._writer;\n  if (writer !== undefined) {\n    defaultWriterClosedPromiseResolve(writer);\n  }\n\n  assert(stream._pendingAbortRequest === undefined);\n  assert(stream._storedError === undefined);\n}\n\nfunction WritableStreamFinishInFlightCloseWithError(stream: WritableStream, error: any) {\n  assert(stream._inFlightCloseRequest !== undefined);\n  stream._inFlightCloseRequest!._reject(error);\n  stream._inFlightCloseRequest = undefined;\n\n  assert(stream._state === 'writable' || stream._state === 'erroring');\n\n  // Never execute sink abort() after sink close().\n  if (stream._pendingAbortRequest !== undefined) {\n    stream._pendingAbortRequest._reject(error);\n    stream._pendingAbortRequest = undefined;\n  }\n  WritableStreamDealWithRejection(stream, error);\n}\n\n// TODO(ricea): Fix alphabetical order.\nfunction WritableStreamCloseQueuedOrInFlight(stream: WritableStream): boolean {\n  if (stream._closeRequest === undefined && stream._inFlightCloseRequest === undefined) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction WritableStreamHasOperationMarkedInFlight(stream: WritableStream): boolean {\n  if (stream._inFlightWriteRequest === undefined && stream._inFlightCloseRequest === undefined) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction WritableStreamMarkCloseRequestInFlight(stream: WritableStream) {\n  assert(stream._inFlightCloseRequest === undefined);\n  assert(stream._closeRequest !== undefined);\n  stream._inFlightCloseRequest = stream._closeRequest;\n  stream._closeRequest = undefined;\n}\n\nfunction WritableStreamMarkFirstWriteRequestInFlight(stream: WritableStream) {\n  assert(stream._inFlightWriteRequest === undefined);\n  assert(stream._writeRequests.length !== 0);\n  stream._inFlightWriteRequest = stream._writeRequests.shift();\n}\n\nfunction WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream: WritableStream) {\n  assert(stream._state === 'errored');\n  if (stream._closeRequest !== undefined) {\n    assert(stream._inFlightCloseRequest === undefined);\n\n    stream._closeRequest._reject(stream._storedError);\n    stream._closeRequest = undefined;\n  }\n  const writer = stream._writer;\n  if (writer !== undefined) {\n    defaultWriterClosedPromiseReject(writer, stream._storedError);\n  }\n}\n\nfunction WritableStreamUpdateBackpressure(stream: WritableStream, backpressure: boolean) {\n  assert(stream._state === 'writable');\n  assert(!WritableStreamCloseQueuedOrInFlight(stream));\n\n  const writer = stream._writer;\n  if (writer !== undefined && backpressure !== stream._backpressure) {\n    if (backpressure) {\n      defaultWriterReadyPromiseReset(writer);\n    } else {\n      assert(!backpressure);\n\n      defaultWriterReadyPromiseResolve(writer);\n    }\n  }\n\n  stream._backpressure = backpressure;\n}\n\n/**\n * A default writer vended by a {@link WritableStream}.\n *\n * @public\n */\nexport class WritableStreamDefaultWriter<W = any> {\n  /** @internal */\n  _ownerWritableStream: WritableStream<W>;\n  /** @internal */\n  _closedPromise!: Promise<undefined>;\n  /** @internal */\n  _closedPromise_resolve?: (value?: undefined) => void;\n  /** @internal */\n  _closedPromise_reject?: (reason: any) => void;\n  /** @internal */\n  _closedPromiseState!: 'pending' | 'resolved' | 'rejected';\n  /** @internal */\n  _readyPromise!: Promise<undefined>;\n  /** @internal */\n  _readyPromise_resolve?: (value?: undefined) => void;\n  /** @internal */\n  _readyPromise_reject?: (reason: any) => void;\n  /** @internal */\n  _readyPromiseState!: 'pending' | 'fulfilled' | 'rejected';\n\n  constructor(stream: WritableStream<W>) {\n    assertRequiredArgument(stream, 1, 'WritableStreamDefaultWriter');\n    assertWritableStream(stream, 'First parameter');\n\n    if (IsWritableStreamLocked(stream)) {\n      throw new TypeError('This stream has already been locked for exclusive writing by another writer');\n    }\n\n    this._ownerWritableStream = stream;\n    stream._writer = this;\n\n    const state = stream._state;\n\n    if (state === 'writable') {\n      if (!WritableStreamCloseQueuedOrInFlight(stream) && stream._backpressure) {\n        defaultWriterReadyPromiseInitialize(this);\n      } else {\n        defaultWriterReadyPromiseInitializeAsResolved(this);\n      }\n\n      defaultWriterClosedPromiseInitialize(this);\n    } else if (state === 'erroring') {\n      defaultWriterReadyPromiseInitializeAsRejected(this, stream._storedError);\n      defaultWriterClosedPromiseInitialize(this);\n    } else if (state === 'closed') {\n      defaultWriterReadyPromiseInitializeAsResolved(this);\n      defaultWriterClosedPromiseInitializeAsResolved(this);\n    } else {\n      assert(state === 'errored');\n\n      const storedError = stream._storedError;\n      defaultWriterReadyPromiseInitializeAsRejected(this, storedError);\n      defaultWriterClosedPromiseInitializeAsRejected(this, storedError);\n    }\n  }\n\n  /**\n   * Returns a promise that will be fulfilled when the stream becomes closed, or rejected if the stream ever errors or\n   * the writer\u2019s lock is released before the stream finishes closing.\n   */\n  get closed(): Promise<undefined> {\n    if (!IsWritableStreamDefaultWriter(this)) {\n      return promiseRejectedWith(defaultWriterBrandCheckException('closed'));\n    }\n\n    return this._closedPromise;\n  }\n\n  /**\n   * Returns the desired size to fill the stream\u2019s internal queue. It can be negative, if the queue is over-full.\n   * A producer can use this information to determine the right amount of data to write.\n   *\n   * It will be `null` if the stream cannot be successfully written to (due to either being errored, or having an abort\n   * queued up). It will return zero if the stream is closed. And the getter will throw an exception if invoked when\n   * the writer\u2019s lock is released.\n   */\n  get desiredSize(): number | null {\n    if (!IsWritableStreamDefaultWriter(this)) {\n      throw defaultWriterBrandCheckException('desiredSize');\n    }\n\n    if (this._ownerWritableStream === undefined) {\n      throw defaultWriterLockException('desiredSize');\n    }\n\n    return WritableStreamDefaultWriterGetDesiredSize(this);\n  }\n\n  /**\n   * Returns a promise that will be fulfilled when the desired size to fill the stream\u2019s internal queue transitions\n   * from non-positive to positive, signaling that it is no longer applying backpressure. Once the desired size dips\n   * back to zero or below, the getter will return a new promise that stays pending until the next transition.\n   *\n   * If the stream becomes errored or aborted, or the writer\u2019s lock is released, the returned promise will become\n   * rejected.\n   */\n  get ready(): Promise<undefined> {\n    if (!IsWritableStreamDefaultWriter(this)) {\n      return promiseRejectedWith(defaultWriterBrandCheckException('ready'));\n    }\n\n    return this._readyPromise;\n  }\n\n  /**\n   * If the reader is active, behaves the same as {@link WritableStream.abort | stream.abort(reason)}.\n   */\n  abort(reason: any = undefined): Promise<undefined> {\n    if (!IsWritableStreamDefaultWriter(this)) {\n      return promiseRejectedWith(defaultWriterBrandCheckException('abort'));\n    }\n\n    if (this._ownerWritableStream === undefined) {\n      return promiseRejectedWith(defaultWriterLockException('abort'));\n    }\n\n    return WritableStreamDefaultWriterAbort(this, reason);\n  }\n\n  /**\n   * If the reader is active, behaves the same as {@link WritableStream.close | stream.close()}.\n   */\n  close(): Promise<undefined> {\n    if (!IsWritableStreamDefaultWriter(this)) {\n      return promiseRejectedWith(defaultWriterBrandCheckException('close'));\n    }\n\n    const stream = this._ownerWritableStream;\n\n    if (stream === undefined) {\n      return promiseRejectedWith(defaultWriterLockException('close'));\n    }\n\n    if (WritableStreamCloseQueuedOrInFlight(stream)) {\n      return promiseRejectedWith(new TypeError('Cannot close an already-closing stream'));\n    }\n\n    return WritableStreamDefaultWriterClose(this);\n  }\n\n  /**\n   * Releases the writer\u2019s lock on the corresponding stream. After the lock is released, the writer is no longer active.\n   * If the associated stream is errored when the lock is released, the writer will appear errored in the same way from\n   * now on; otherwise, the writer will appear closed.\n   *\n   * Note that the lock can still be released even if some ongoing writes have not yet finished (i.e. even if the\n   * promises returned from previous calls to {@link WritableStreamDefaultWriter.write | write()} have not yet settled).\n   * It\u2019s not necessary to hold the lock on the writer for the duration of the write; the lock instead simply prevents\n   * other producers from writing in an interleaved manner.\n   */\n  releaseLock(): void {\n    if (!IsWritableStreamDefaultWriter(this)) {\n      throw defaultWriterBrandCheckException('releaseLock');\n    }\n\n    const stream = this._ownerWritableStream;\n\n    if (stream === undefined) {\n      return;\n    }\n\n    assert(stream._writer !== undefined);\n\n    WritableStreamDefaultWriterRelease(this);\n  }\n\n  /**\n   * Writes the given chunk to the writable stream, by waiting until any previous writes have finished successfully,\n   * and then sending the chunk to the underlying sink's {@link UnderlyingSink.write | write()} method. It will return\n   * a promise that fulfills with undefined upon a successful write, or rejects if the write fails or stream becomes\n   * errored before the writing process is initiated.\n   *\n   * Note that what \"success\" means is up to the underlying sink; it might indicate simply that the chunk has been\n   * accepted, and not necessarily that it is safely saved to its ultimate destination.\n   */\n  write(chunk: W): Promise<undefined>;\n  write(chunk: W = undefined!): Promise<undefined> {\n    if (!IsWritableStreamDefaultWriter(this)) {\n      return promiseRejectedWith(defaultWriterBrandCheckException('write'));\n    }\n\n    if (this._ownerWritableStream === undefined) {\n      return promiseRejectedWith(defaultWriterLockException('write to'));\n    }\n\n    return WritableStreamDefaultWriterWrite(this, chunk);\n  }\n}\n\nObject.defineProperties(WritableStreamDefaultWriter.prototype, {\n  abort: { enumerable: true },\n  close: { enumerable: true },\n  releaseLock: { enumerable: true },\n  write: { enumerable: true },\n  closed: { enumerable: true },\n  desiredSize: { enumerable: true },\n  ready: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(WritableStreamDefaultWriter.prototype, Symbol.toStringTag, {\n    value: 'WritableStreamDefaultWriter',\n    configurable: true\n  });\n}\n\n// Abstract operations for the WritableStreamDefaultWriter.\n\nfunction IsWritableStreamDefaultWriter<W = any>(x: any): x is WritableStreamDefaultWriter<W> {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_ownerWritableStream')) {\n    return false;\n  }\n\n  return true;\n}\n\n// A client of WritableStreamDefaultWriter may use these functions directly to bypass state check.\n\nfunction WritableStreamDefaultWriterAbort(writer: WritableStreamDefaultWriter, reason: any) {\n  const stream = writer._ownerWritableStream;\n\n  assert(stream !== undefined);\n\n  return WritableStreamAbort(stream, reason);\n}\n\nfunction WritableStreamDefaultWriterClose(writer: WritableStreamDefaultWriter): Promise<undefined> {\n  const stream = writer._ownerWritableStream;\n\n  assert(stream !== undefined);\n\n  return WritableStreamClose(stream);\n}\n\nfunction WritableStreamDefaultWriterCloseWithErrorPropagation(writer: WritableStreamDefaultWriter): Promise<undefined> {\n  const stream = writer._ownerWritableStream;\n\n  assert(stream !== undefined);\n\n  const state = stream._state;\n  if (WritableStreamCloseQueuedOrInFlight(stream) || state === 'closed') {\n    return promiseResolvedWith(undefined);\n  }\n\n  if (state === 'errored') {\n    return promiseRejectedWith(stream._storedError);\n  }\n\n  assert(state === 'writable' || state === 'erroring');\n\n  return WritableStreamDefaultWriterClose(writer);\n}\n\nfunction WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer: WritableStreamDefaultWriter, error: any) {\n  if (writer._closedPromiseState === 'pending') {\n    defaultWriterClosedPromiseReject(writer, error);\n  } else {\n    defaultWriterClosedPromiseResetToRejected(writer, error);\n  }\n}\n\nfunction WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer: WritableStreamDefaultWriter, error: any) {\n  if (writer._readyPromiseState === 'pending') {\n    defaultWriterReadyPromiseReject(writer, error);\n  } else {\n    defaultWriterReadyPromiseResetToRejected(writer, error);\n  }\n}\n\nfunction WritableStreamDefaultWriterGetDesiredSize(writer: WritableStreamDefaultWriter): number | null {\n  const stream = writer._ownerWritableStream;\n  const state = stream._state;\n\n  if (state === 'errored' || state === 'erroring') {\n    return null;\n  }\n\n  if (state === 'closed') {\n    return 0;\n  }\n\n  return WritableStreamDefaultControllerGetDesiredSize(stream._writableStreamController);\n}\n\nfunction WritableStreamDefaultWriterRelease(writer: WritableStreamDefaultWriter) {\n  const stream = writer._ownerWritableStream;\n  assert(stream !== undefined);\n  assert(stream._writer === writer);\n\n  const releasedError = new TypeError(\n    `Writer was released and can no longer be used to monitor the stream's closedness`);\n\n  WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, releasedError);\n\n  // The state transitions to \"errored\" before the sink abort() method runs, but the writer.closed promise is not\n  // rejected until afterwards. This means that simply testing state will not work.\n  WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer, releasedError);\n\n  stream._writer = undefined;\n  writer._ownerWritableStream = undefined!;\n}\n\nfunction WritableStreamDefaultWriterWrite<W>(writer: WritableStreamDefaultWriter<W>, chunk: W): Promise<undefined> {\n  const stream = writer._ownerWritableStream;\n\n  assert(stream !== undefined);\n\n  const controller = stream._writableStreamController;\n\n  const chunkSize = WritableStreamDefaultControllerGetChunkSize(controller, chunk);\n\n  if (stream !== writer._ownerWritableStream) {\n    return promiseRejectedWith(defaultWriterLockException('write to'));\n  }\n\n  const state = stream._state;\n  if (state === 'errored') {\n    return promiseRejectedWith(stream._storedError);\n  }\n  if (WritableStreamCloseQueuedOrInFlight(stream) || state === 'closed') {\n    return promiseRejectedWith(new TypeError('The stream is closing or closed and cannot be written to'));\n  }\n  if (state === 'erroring') {\n    return promiseRejectedWith(stream._storedError);\n  }\n\n  assert(state === 'writable');\n\n  const promise = WritableStreamAddWriteRequest(stream);\n\n  WritableStreamDefaultControllerWrite(controller, chunk, chunkSize);\n\n  return promise;\n}\n\nconst closeSentinel: unique symbol = {} as any;\n\ntype QueueRecord<W> = W | typeof closeSentinel;\n\n/**\n * Allows control of a {@link WritableStream | writable stream}'s state and internal queue.\n *\n * @public\n */\nexport class WritableStreamDefaultController<W = any> {\n  /** @internal */\n  _controlledWritableStream!: WritableStream<W>;\n  /** @internal */\n  _queue!: SimpleQueue<QueuePair<QueueRecord<W>>>;\n  /** @internal */\n  _queueTotalSize!: number;\n  /** @internal */\n  _started!: boolean;\n  /** @internal */\n  _strategySizeAlgorithm!: QueuingStrategySizeCallback<W>;\n  /** @internal */\n  _strategyHWM!: number;\n  /** @internal */\n  _writeAlgorithm!: (chunk: W) => Promise<void>;\n  /** @internal */\n  _closeAlgorithm!: () => Promise<void>;\n  /** @internal */\n  _abortAlgorithm!: (reason: any) => Promise<void>;\n\n  private constructor() {\n    throw new TypeError('Illegal constructor');\n  }\n\n  /**\n   * Closes the controlled writable stream, making all future interactions with it fail with the given error `e`.\n   *\n   * This method is rarely used, since usually it suffices to return a rejected promise from one of the underlying\n   * sink's methods. However, it can be useful for suddenly shutting down a stream in response to an event outside the\n   * normal lifecycle of interactions with the underlying sink.\n   */\n  error(e: any = undefined): void {\n    if (!IsWritableStreamDefaultController(this)) {\n      throw new TypeError(\n        'WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController');\n    }\n    const state = this._controlledWritableStream._state;\n    if (state !== 'writable') {\n      // The stream is closed, errored or will be soon. The sink can't do anything useful if it gets an error here, so\n      // just treat it as a no-op.\n      return;\n    }\n\n    WritableStreamDefaultControllerError(this, e);\n  }\n\n  /** @internal */\n  [AbortSteps](reason: any): Promise<void> {\n    const result = this._abortAlgorithm(reason);\n    WritableStreamDefaultControllerClearAlgorithms(this);\n    return result;\n  }\n\n  /** @internal */\n  [ErrorSteps]() {\n    ResetQueue(this);\n  }\n}\n\nObject.defineProperties(WritableStreamDefaultController.prototype, {\n  error: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(WritableStreamDefaultController.prototype, Symbol.toStringTag, {\n    value: 'WritableStreamDefaultController',\n    configurable: true\n  });\n}\n\n// Abstract operations implementing interface required by the WritableStream.\n\nfunction IsWritableStreamDefaultController(x: any): x is WritableStreamDefaultController<any> {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_controlledWritableStream')) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction SetUpWritableStreamDefaultController<W>(stream: WritableStream<W>,\n                                                 controller: WritableStreamDefaultController<W>,\n                                                 startAlgorithm: () => void | PromiseLike<void>,\n                                                 writeAlgorithm: (chunk: W) => Promise<void>,\n                                                 closeAlgorithm: () => Promise<void>,\n                                                 abortAlgorithm: (reason: any) => Promise<void>,\n                                                 highWaterMark: number,\n                                                 sizeAlgorithm: QueuingStrategySizeCallback<W>) {\n  assert(IsWritableStream(stream));\n  assert(stream._writableStreamController === undefined);\n\n  controller._controlledWritableStream = stream;\n  stream._writableStreamController = controller;\n\n  // Need to set the slots so that the assert doesn't fire. In the spec the slots already exist implicitly.\n  controller._queue = undefined!;\n  controller._queueTotalSize = undefined!;\n  ResetQueue(controller);\n\n  controller._started = false;\n\n  controller._strategySizeAlgorithm = sizeAlgorithm;\n  controller._strategyHWM = highWaterMark;\n\n  controller._writeAlgorithm = writeAlgorithm;\n  controller._closeAlgorithm = closeAlgorithm;\n  controller._abortAlgorithm = abortAlgorithm;\n\n  const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n  WritableStreamUpdateBackpressure(stream, backpressure);\n\n  const startResult = startAlgorithm();\n  const startPromise = promiseResolvedWith(startResult);\n  uponPromise(\n    startPromise,\n    () => {\n      assert(stream._state === 'writable' || stream._state === 'erroring');\n      controller._started = true;\n      WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n    },\n    r => {\n      assert(stream._state === 'writable' || stream._state === 'erroring');\n      controller._started = true;\n      WritableStreamDealWithRejection(stream, r);\n    }\n  );\n}\n\nfunction SetUpWritableStreamDefaultControllerFromUnderlyingSink<W>(stream: WritableStream<W>,\n                                                                   underlyingSink: ValidatedUnderlyingSink<W>,\n                                                                   highWaterMark: number,\n                                                                   sizeAlgorithm: QueuingStrategySizeCallback<W>) {\n  const controller = Object.create(WritableStreamDefaultController.prototype);\n\n  let startAlgorithm: () => void | PromiseLike<void> = () => undefined;\n  let writeAlgorithm: (chunk: W) => Promise<void> = () => promiseResolvedWith(undefined);\n  let closeAlgorithm: () => Promise<void> = () => promiseResolvedWith(undefined);\n  let abortAlgorithm: (reason: any) => Promise<void> = () => promiseResolvedWith(undefined);\n\n  if (underlyingSink.start !== undefined) {\n    startAlgorithm = () => underlyingSink.start!(controller);\n  }\n  if (underlyingSink.write !== undefined) {\n    writeAlgorithm = chunk => underlyingSink.write!(chunk, controller);\n  }\n  if (underlyingSink.close !== undefined) {\n    closeAlgorithm = () => underlyingSink.close!();\n  }\n  if (underlyingSink.abort !== undefined) {\n    abortAlgorithm = reason => underlyingSink.abort!(reason);\n  }\n\n  SetUpWritableStreamDefaultController(\n    stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm\n  );\n}\n\n// ClearAlgorithms may be called twice. Erroring the same stream in multiple ways will often result in redundant calls.\nfunction WritableStreamDefaultControllerClearAlgorithms(controller: WritableStreamDefaultController<any>) {\n  controller._writeAlgorithm = undefined!;\n  controller._closeAlgorithm = undefined!;\n  controller._abortAlgorithm = undefined!;\n  controller._strategySizeAlgorithm = undefined!;\n}\n\nfunction WritableStreamDefaultControllerClose<W>(controller: WritableStreamDefaultController<W>) {\n  EnqueueValueWithSize(controller, closeSentinel, 0);\n  WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n}\n\nfunction WritableStreamDefaultControllerGetChunkSize<W>(controller: WritableStreamDefaultController<W>,\n                                                        chunk: W): number {\n  try {\n    return controller._strategySizeAlgorithm(chunk);\n  } catch (chunkSizeE) {\n    WritableStreamDefaultControllerErrorIfNeeded(controller, chunkSizeE);\n    return 1;\n  }\n}\n\nfunction WritableStreamDefaultControllerGetDesiredSize(controller: WritableStreamDefaultController<any>): number {\n  return controller._strategyHWM - controller._queueTotalSize;\n}\n\nfunction WritableStreamDefaultControllerWrite<W>(controller: WritableStreamDefaultController<W>,\n                                                 chunk: W,\n                                                 chunkSize: number) {\n  try {\n    EnqueueValueWithSize(controller, chunk, chunkSize);\n  } catch (enqueueE) {\n    WritableStreamDefaultControllerErrorIfNeeded(controller, enqueueE);\n    return;\n  }\n\n  const stream = controller._controlledWritableStream;\n  if (!WritableStreamCloseQueuedOrInFlight(stream) && stream._state === 'writable') {\n    const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n    WritableStreamUpdateBackpressure(stream, backpressure);\n  }\n\n  WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n}\n\n// Abstract operations for the WritableStreamDefaultController.\n\nfunction WritableStreamDefaultControllerAdvanceQueueIfNeeded<W>(controller: WritableStreamDefaultController<W>) {\n  const stream = controller._controlledWritableStream;\n\n  if (!controller._started) {\n    return;\n  }\n\n  if (stream._inFlightWriteRequest !== undefined) {\n    return;\n  }\n\n  const state = stream._state;\n  assert(state !== 'closed' && state !== 'errored');\n  if (state === 'erroring') {\n    WritableStreamFinishErroring(stream);\n    return;\n  }\n\n  if (controller._queue.length === 0) {\n    return;\n  }\n\n  const value = PeekQueueValue(controller);\n  if (value === closeSentinel) {\n    WritableStreamDefaultControllerProcessClose(controller);\n  } else {\n    WritableStreamDefaultControllerProcessWrite(controller, value);\n  }\n}\n\nfunction WritableStreamDefaultControllerErrorIfNeeded(controller: WritableStreamDefaultController<any>, error: any) {\n  if (controller._controlledWritableStream._state === 'writable') {\n    WritableStreamDefaultControllerError(controller, error);\n  }\n}\n\nfunction WritableStreamDefaultControllerProcessClose(controller: WritableStreamDefaultController<any>) {\n  const stream = controller._controlledWritableStream;\n\n  WritableStreamMarkCloseRequestInFlight(stream);\n\n  DequeueValue(controller);\n  assert(controller._queue.length === 0);\n\n  const sinkClosePromise = controller._closeAlgorithm();\n  WritableStreamDefaultControllerClearAlgorithms(controller);\n  uponPromise(\n    sinkClosePromise,\n    () => {\n      WritableStreamFinishInFlightClose(stream);\n    },\n    reason => {\n      WritableStreamFinishInFlightCloseWithError(stream, reason);\n    }\n  );\n}\n\nfunction WritableStreamDefaultControllerProcessWrite<W>(controller: WritableStreamDefaultController<W>, chunk: W) {\n  const stream = controller._controlledWritableStream;\n\n  WritableStreamMarkFirstWriteRequestInFlight(stream);\n\n  const sinkWritePromise = controller._writeAlgorithm(chunk);\n  uponPromise(\n    sinkWritePromise,\n    () => {\n      WritableStreamFinishInFlightWrite(stream);\n\n      const state = stream._state;\n      assert(state === 'writable' || state === 'erroring');\n\n      DequeueValue(controller);\n\n      if (!WritableStreamCloseQueuedOrInFlight(stream) && state === 'writable') {\n        const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n        WritableStreamUpdateBackpressure(stream, backpressure);\n      }\n\n      WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n    },\n    reason => {\n      if (stream._state === 'writable') {\n        WritableStreamDefaultControllerClearAlgorithms(controller);\n      }\n      WritableStreamFinishInFlightWriteWithError(stream, reason);\n    }\n  );\n}\n\nfunction WritableStreamDefaultControllerGetBackpressure(controller: WritableStreamDefaultController<any>): boolean {\n  const desiredSize = WritableStreamDefaultControllerGetDesiredSize(controller);\n  return desiredSize <= 0;\n}\n\n// A client of WritableStreamDefaultController may use these functions directly to bypass state check.\n\nfunction WritableStreamDefaultControllerError(controller: WritableStreamDefaultController<any>, error: any) {\n  const stream = controller._controlledWritableStream;\n\n  assert(stream._state === 'writable');\n\n  WritableStreamDefaultControllerClearAlgorithms(controller);\n  WritableStreamStartErroring(stream, error);\n}\n\n// Helper functions for the WritableStream.\n\nfunction streamBrandCheckException(name: string): TypeError {\n  return new TypeError(`WritableStream.prototype.${name} can only be used on a WritableStream`);\n}\n\n// Helper functions for the WritableStreamDefaultWriter.\n\nfunction defaultWriterBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `WritableStreamDefaultWriter.prototype.${name} can only be used on a WritableStreamDefaultWriter`);\n}\n\nfunction defaultWriterLockException(name: string): TypeError {\n  return new TypeError('Cannot ' + name + ' a stream using a released writer');\n}\n\nfunction defaultWriterClosedPromiseInitialize(writer: WritableStreamDefaultWriter) {\n  writer._closedPromise = newPromise((resolve, reject) => {\n    writer._closedPromise_resolve = resolve;\n    writer._closedPromise_reject = reject;\n    writer._closedPromiseState = 'pending';\n  });\n}\n\nfunction defaultWriterClosedPromiseInitializeAsRejected(writer: WritableStreamDefaultWriter, reason: any) {\n  defaultWriterClosedPromiseInitialize(writer);\n  defaultWriterClosedPromiseReject(writer, reason);\n}\n\nfunction defaultWriterClosedPromiseInitializeAsResolved(writer: WritableStreamDefaultWriter) {\n  defaultWriterClosedPromiseInitialize(writer);\n  defaultWriterClosedPromiseResolve(writer);\n}\n\nfunction defaultWriterClosedPromiseReject(writer: WritableStreamDefaultWriter, reason: any) {\n  if (writer._closedPromise_reject === undefined) {\n    return;\n  }\n  assert(writer._closedPromiseState === 'pending');\n\n  setPromiseIsHandledToTrue(writer._closedPromise);\n  writer._closedPromise_reject(reason);\n  writer._closedPromise_resolve = undefined;\n  writer._closedPromise_reject = undefined;\n  writer._closedPromiseState = 'rejected';\n}\n\nfunction defaultWriterClosedPromiseResetToRejected(writer: WritableStreamDefaultWriter, reason: any) {\n  assert(writer._closedPromise_resolve === undefined);\n  assert(writer._closedPromise_reject === undefined);\n  assert(writer._closedPromiseState !== 'pending');\n\n  defaultWriterClosedPromiseInitializeAsRejected(writer, reason);\n}\n\nfunction defaultWriterClosedPromiseResolve(writer: WritableStreamDefaultWriter) {\n  if (writer._closedPromise_resolve === undefined) {\n    return;\n  }\n  assert(writer._closedPromiseState === 'pending');\n\n  writer._closedPromise_resolve(undefined);\n  writer._closedPromise_resolve = undefined;\n  writer._closedPromise_reject = undefined;\n  writer._closedPromiseState = 'resolved';\n}\n\nfunction defaultWriterReadyPromiseInitialize(writer: WritableStreamDefaultWriter) {\n  writer._readyPromise = newPromise((resolve, reject) => {\n    writer._readyPromise_resolve = resolve;\n    writer._readyPromise_reject = reject;\n  });\n  writer._readyPromiseState = 'pending';\n}\n\nfunction defaultWriterReadyPromiseInitializeAsRejected(writer: WritableStreamDefaultWriter, reason: any) {\n  defaultWriterReadyPromiseInitialize(writer);\n  defaultWriterReadyPromiseReject(writer, reason);\n}\n\nfunction defaultWriterReadyPromiseInitializeAsResolved(writer: WritableStreamDefaultWriter) {\n  defaultWriterReadyPromiseInitialize(writer);\n  defaultWriterReadyPromiseResolve(writer);\n}\n\nfunction defaultWriterReadyPromiseReject(writer: WritableStreamDefaultWriter, reason: any) {\n  if (writer._readyPromise_reject === undefined) {\n    return;\n  }\n\n  setPromiseIsHandledToTrue(writer._readyPromise);\n  writer._readyPromise_reject(reason);\n  writer._readyPromise_resolve = undefined;\n  writer._readyPromise_reject = undefined;\n  writer._readyPromiseState = 'rejected';\n}\n\nfunction defaultWriterReadyPromiseReset(writer: WritableStreamDefaultWriter) {\n  assert(writer._readyPromise_resolve === undefined);\n  assert(writer._readyPromise_reject === undefined);\n\n  defaultWriterReadyPromiseInitialize(writer);\n}\n\nfunction defaultWriterReadyPromiseResetToRejected(writer: WritableStreamDefaultWriter, reason: any) {\n  assert(writer._readyPromise_resolve === undefined);\n  assert(writer._readyPromise_reject === undefined);\n\n  defaultWriterReadyPromiseInitializeAsRejected(writer, reason);\n}\n\nfunction defaultWriterReadyPromiseResolve(writer: WritableStreamDefaultWriter) {\n  if (writer._readyPromise_resolve === undefined) {\n    return;\n  }\n\n  writer._readyPromise_resolve(undefined);\n  writer._readyPromise_resolve = undefined;\n  writer._readyPromise_reject = undefined;\n  writer._readyPromiseState = 'fulfilled';\n}\n", "/**\n * A signal object that allows you to communicate with a request and abort it if required\n * via its associated `AbortController` object.\n *\n * @remarks\n *   This interface is compatible with the `AbortSignal` interface defined in TypeScript's DOM types.\n *   It is redefined here, so it can be polyfilled without a DOM, for example with\n *   {@link https://www.npmjs.com/package/abortcontroller-polyfill | abortcontroller-polyfill} in a Node environment.\n *\n * @public\n */\nexport interface AbortSignal {\n  /**\n   * Whether the request is aborted.\n   */\n  readonly aborted: boolean;\n\n  /**\n   * Add an event listener to be triggered when this signal becomes aborted.\n   */\n  addEventListener(type: 'abort', listener: () => void): void;\n\n  /**\n   * Remove an event listener that was previously added with {@link AbortSignal.addEventListener}.\n   */\n  removeEventListener(type: 'abort', listener: () => void): void;\n}\n\nexport function isAbortSignal(value: unknown): value is AbortSignal {\n  if (typeof value !== 'object' || value === null) {\n    return false;\n  }\n  try {\n    return typeof (value as AbortSignal).aborted === 'boolean';\n  } catch {\n    // AbortSignal.prototype.aborted throws if its brand check fails\n    return false;\n  }\n}\n", "/// <reference lib=\"dom\" />\nexport const NativeDOMException: typeof DOMException | undefined = typeof DOMException !== 'undefined' ? DOMException : undefined;\n", "/// <reference types=\"node\" />\nimport { NativeDOMException } from './native';\n\ndeclare class DOMExceptionClass extends Error {\n  constructor(message?: string, name?: string);\n\n  name: string;\n  message: string;\n}\n\ntype DOMException = DOMExceptionClass;\ntype DOMExceptionConstructor = typeof DOMExceptionClass;\n\nfunction isDOMExceptionConstructor(ctor: unknown): ctor is DOMExceptionConstructor {\n  if (!(typeof ctor === 'function' || typeof ctor === 'object')) {\n    return false;\n  }\n  try {\n    new (ctor as DOMExceptionConstructor)();\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nfunction createDOMExceptionPolyfill(): DOMExceptionConstructor {\n  // eslint-disable-next-line no-shadow\n  const ctor = function DOMException(this: DOMException, message?: string, name?: string) {\n    this.message = message || '';\n    this.name = name || 'Error';\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  } as any;\n  ctor.prototype = Object.create(Error.prototype);\n  Object.defineProperty(ctor.prototype, 'constructor', { value: ctor, writable: true, configurable: true });\n  return ctor;\n}\n\n// eslint-disable-next-line no-redeclare\nconst DOMException: DOMExceptionConstructor =\n  isDOMExceptionConstructor(NativeDOMException) ? NativeDOMException : createDOMExceptionPolyfill();\n\nexport { DOMException };\n", "import { IsReadableStream, IsReadableStreamLocked, ReadableStream, ReadableStreamCancel } from '../readable-stream';\nimport { AcquireReadableStreamDefaultReader, ReadableStreamDefaultReaderRead } from './default-reader';\nimport { ReadableStreamReaderGenericRelease } from './generic-reader';\nimport {\n  AcquireWritableStreamDefaultWriter,\n  IsWritableStream,\n  IsWritableStreamLocked,\n  WritableStream,\n  WritableStreamAbort,\n  WritableStreamCloseQueuedOrInFlight,\n  WritableStreamDefaultWriterCloseWithErrorPropagation,\n  WritableStreamDefaultWriterRelease,\n  WritableStreamDefaultWriterWrite\n} from '../writable-stream';\nimport assert from '../../stub/assert';\nimport {\n  newPromise,\n  PerformPromiseThen,\n  promiseResolvedWith,\n  setPromiseIsHandledToTrue,\n  uponFulfillment,\n  uponPromise,\n  uponRejection\n} from '../helpers/webidl';\nimport { noop } from '../../utils';\nimport { AbortSignal, isAbortSignal } from '../abort-signal';\nimport { DOMException } from '../../stub/dom-exception';\n\nexport function ReadableStreamPipeTo<T>(source: ReadableStream<T>,\n                                        dest: WritableStream<T>,\n                                        preventClose: boolean,\n                                        preventAbort: boolean,\n                                        preventCancel: boolean,\n                                        signal: AbortSignal | undefined): Promise<undefined> {\n  assert(IsReadableStream(source));\n  assert(IsWritableStream(dest));\n  assert(typeof preventClose === 'boolean');\n  assert(typeof preventAbort === 'boolean');\n  assert(typeof preventCancel === 'boolean');\n  assert(signal === undefined || isAbortSignal(signal));\n  assert(!IsReadableStreamLocked(source));\n  assert(!IsWritableStreamLocked(dest));\n\n  const reader = AcquireReadableStreamDefaultReader<T>(source);\n  const writer = AcquireWritableStreamDefaultWriter<T>(dest);\n\n  source._disturbed = true;\n\n  let shuttingDown = false;\n\n  // This is used to keep track of the spec's requirement that we wait for ongoing writes during shutdown.\n  let currentWrite = promiseResolvedWith<void>(undefined);\n\n  return newPromise((resolve, reject) => {\n    let abortAlgorithm: () => void;\n    if (signal !== undefined) {\n      abortAlgorithm = () => {\n        const error = new DOMException('Aborted', 'AbortError');\n        const actions: Array<() => Promise<void>> = [];\n        if (!preventAbort) {\n          actions.push(() => {\n            if (dest._state === 'writable') {\n              return WritableStreamAbort(dest, error);\n            }\n            return promiseResolvedWith(undefined);\n          });\n        }\n        if (!preventCancel) {\n          actions.push(() => {\n            if (source._state === 'readable') {\n              return ReadableStreamCancel(source, error);\n            }\n            return promiseResolvedWith(undefined);\n          });\n        }\n        shutdownWithAction(() => Promise.all(actions.map(action => action())), true, error);\n      };\n\n      if (signal.aborted) {\n        abortAlgorithm();\n        return;\n      }\n\n      signal.addEventListener('abort', abortAlgorithm);\n    }\n\n    // Using reader and writer, read all chunks from this and write them to dest\n    // - Backpressure must be enforced\n    // - Shutdown must stop all activity\n    function pipeLoop() {\n      return newPromise<void>((resolveLoop, rejectLoop) => {\n        function next(done: boolean) {\n          if (done) {\n            resolveLoop();\n          } else {\n            // Use `PerformPromiseThen` instead of `uponPromise` to avoid\n            // adding unnecessary `.catch(rethrowAssertionErrorRejection)` handlers\n            PerformPromiseThen(pipeStep(), next, rejectLoop);\n          }\n        }\n\n        next(false);\n      });\n    }\n\n    function pipeStep(): Promise<boolean> {\n      if (shuttingDown) {\n        return promiseResolvedWith(true);\n      }\n\n      return PerformPromiseThen(writer._readyPromise, () => {\n        return newPromise<boolean>((resolveRead, rejectRead) => {\n          ReadableStreamDefaultReaderRead(\n            reader,\n            {\n              _chunkSteps: chunk => {\n                currentWrite = PerformPromiseThen(WritableStreamDefaultWriterWrite(writer, chunk), undefined, noop);\n                resolveRead(false);\n              },\n              _closeSteps: () => resolveRead(true),\n              _errorSteps: rejectRead\n            }\n          );\n        });\n      });\n    }\n\n    // Errors must be propagated forward\n    isOrBecomesErrored(source, reader._closedPromise, storedError => {\n      if (!preventAbort) {\n        shutdownWithAction(() => WritableStreamAbort(dest, storedError), true, storedError);\n      } else {\n        shutdown(true, storedError);\n      }\n    });\n\n    // Errors must be propagated backward\n    isOrBecomesErrored(dest, writer._closedPromise, storedError => {\n      if (!preventCancel) {\n        shutdownWithAction(() => ReadableStreamCancel(source, storedError), true, storedError);\n      } else {\n        shutdown(true, storedError);\n      }\n    });\n\n    // Closing must be propagated forward\n    isOrBecomesClosed(source, reader._closedPromise, () => {\n      if (!preventClose) {\n        shutdownWithAction(() => WritableStreamDefaultWriterCloseWithErrorPropagation(writer));\n      } else {\n        shutdown();\n      }\n    });\n\n    // Closing must be propagated backward\n    if (WritableStreamCloseQueuedOrInFlight(dest) || dest._state === 'closed') {\n      const destClosed = new TypeError('the destination writable stream closed before all data could be piped to it');\n\n      if (!preventCancel) {\n        shutdownWithAction(() => ReadableStreamCancel(source, destClosed), true, destClosed);\n      } else {\n        shutdown(true, destClosed);\n      }\n    }\n\n    setPromiseIsHandledToTrue(pipeLoop());\n\n    function waitForWritesToFinish(): Promise<void> {\n      // Another write may have started while we were waiting on this currentWrite, so we have to be sure to wait\n      // for that too.\n      const oldCurrentWrite = currentWrite;\n      return PerformPromiseThen(\n        currentWrite,\n        () => oldCurrentWrite !== currentWrite ? waitForWritesToFinish() : undefined\n      );\n    }\n\n    function isOrBecomesErrored(stream: ReadableStream | WritableStream,\n                                promise: Promise<void>,\n                                action: (reason: any) => void) {\n      if (stream._state === 'errored') {\n        action(stream._storedError);\n      } else {\n        uponRejection(promise, action);\n      }\n    }\n\n    function isOrBecomesClosed(stream: ReadableStream | WritableStream, promise: Promise<void>, action: () => void) {\n      if (stream._state === 'closed') {\n        action();\n      } else {\n        uponFulfillment(promise, action);\n      }\n    }\n\n    function shutdownWithAction(action: () => Promise<unknown>, originalIsError?: boolean, originalError?: any) {\n      if (shuttingDown) {\n        return;\n      }\n      shuttingDown = true;\n\n      if (dest._state === 'writable' && !WritableStreamCloseQueuedOrInFlight(dest)) {\n        uponFulfillment(waitForWritesToFinish(), doTheRest);\n      } else {\n        doTheRest();\n      }\n\n      function doTheRest() {\n        uponPromise(\n          action(),\n          () => finalize(originalIsError, originalError),\n          newError => finalize(true, newError)\n        );\n      }\n    }\n\n    function shutdown(isError?: boolean, error?: any) {\n      if (shuttingDown) {\n        return;\n      }\n      shuttingDown = true;\n\n      if (dest._state === 'writable' && !WritableStreamCloseQueuedOrInFlight(dest)) {\n        uponFulfillment(waitForWritesToFinish(), () => finalize(isError, error));\n      } else {\n        finalize(isError, error);\n      }\n    }\n\n    function finalize(isError?: boolean, error?: any) {\n      WritableStreamDefaultWriterRelease(writer);\n      ReadableStreamReaderGenericRelease(reader);\n\n      if (signal !== undefined) {\n        signal.removeEventListener('abort', abortAlgorithm);\n      }\n      if (isError) {\n        reject(error);\n      } else {\n        resolve(undefined);\n      }\n    }\n  });\n}\n", "import { QueuingStrategySizeCallback } from '../queuing-strategy';\nimport assert from '../../stub/assert';\nimport { DequeueValue, EnqueueValueWithSize, QueuePair, ResetQueue } from '../abstract-ops/queue-with-sizes';\nimport {\n  ReadableStreamAddReadRequest,\n  ReadableStreamFulfillReadRequest,\n  ReadableStreamGetNumReadRequests,\n  ReadRequest\n} from './default-reader';\nimport { SimpleQueue } from '../simple-queue';\nimport { IsReadableStreamLocked, ReadableStream, ReadableStreamClose, ReadableStreamError } from '../readable-stream';\nimport { ValidatedUnderlyingSource } from './underlying-source';\nimport { typeIsObject } from '../helpers/miscellaneous';\nimport { CancelSteps, PullSteps } from '../abstract-ops/internal-methods';\nimport { promiseResolvedWith, uponPromise } from '../helpers/webidl';\n\n/**\n * Allows control of a {@link ReadableStream | readable stream}'s state and internal queue.\n *\n * @public\n */\nexport class ReadableStreamDefaultController<R> {\n  /** @internal */\n  _controlledReadableStream!: ReadableStream<R>;\n  /** @internal */\n  _queue!: SimpleQueue<QueuePair<R>>;\n  /** @internal */\n  _queueTotalSize!: number;\n  /** @internal */\n  _started!: boolean;\n  /** @internal */\n  _closeRequested!: boolean;\n  /** @internal */\n  _pullAgain!: boolean;\n  /** @internal */\n  _pulling !: boolean;\n  /** @internal */\n  _strategySizeAlgorithm!: QueuingStrategySizeCallback<R>;\n  /** @internal */\n  _strategyHWM!: number;\n  /** @internal */\n  _pullAlgorithm!: () => Promise<void>;\n  /** @internal */\n  _cancelAlgorithm!: (reason: any) => Promise<void>;\n\n  private constructor() {\n    throw new TypeError('Illegal constructor');\n  }\n\n  /**\n   * Returns the desired size to fill the controlled stream's internal queue. It can be negative, if the queue is\n   * over-full. An underlying source ought to use this information to determine when and how to apply backpressure.\n   */\n  get desiredSize(): number | null {\n    if (!IsReadableStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('desiredSize');\n    }\n\n    return ReadableStreamDefaultControllerGetDesiredSize(this);\n  }\n\n  /**\n   * Closes the controlled readable stream. Consumers will still be able to read any previously-enqueued chunks from\n   * the stream, but once those are read, the stream will become closed.\n   */\n  close(): void {\n    if (!IsReadableStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('close');\n    }\n\n    if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(this)) {\n      throw new TypeError('The stream is not in a state that permits close');\n    }\n\n    ReadableStreamDefaultControllerClose(this);\n  }\n\n  /**\n   * Enqueues the given chunk `chunk` in the controlled readable stream.\n   */\n  enqueue(chunk: R): void;\n  enqueue(chunk: R = undefined!): void {\n    if (!IsReadableStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('enqueue');\n    }\n\n    if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(this)) {\n      throw new TypeError('The stream is not in a state that permits enqueue');\n    }\n\n    return ReadableStreamDefaultControllerEnqueue(this, chunk);\n  }\n\n  /**\n   * Errors the controlled readable stream, making all future interactions with it fail with the given error `e`.\n   */\n  error(e: any = undefined): void {\n    if (!IsReadableStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('error');\n    }\n\n    ReadableStreamDefaultControllerError(this, e);\n  }\n\n  /** @internal */\n  [CancelSteps](reason: any): Promise<void> {\n    ResetQueue(this);\n    const result = this._cancelAlgorithm(reason);\n    ReadableStreamDefaultControllerClearAlgorithms(this);\n    return result;\n  }\n\n  /** @internal */\n  [PullSteps](readRequest: ReadRequest<R>): void {\n    const stream = this._controlledReadableStream;\n\n    if (this._queue.length > 0) {\n      const chunk = DequeueValue(this);\n\n      if (this._closeRequested && this._queue.length === 0) {\n        ReadableStreamDefaultControllerClearAlgorithms(this);\n        ReadableStreamClose(stream);\n      } else {\n        ReadableStreamDefaultControllerCallPullIfNeeded(this);\n      }\n\n      readRequest._chunkSteps(chunk);\n    } else {\n      ReadableStreamAddReadRequest(stream, readRequest);\n      ReadableStreamDefaultControllerCallPullIfNeeded(this);\n    }\n  }\n}\n\nObject.defineProperties(ReadableStreamDefaultController.prototype, {\n  close: { enumerable: true },\n  enqueue: { enumerable: true },\n  error: { enumerable: true },\n  desiredSize: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(ReadableStreamDefaultController.prototype, Symbol.toStringTag, {\n    value: 'ReadableStreamDefaultController',\n    configurable: true\n  });\n}\n\n// Abstract operations for the ReadableStreamDefaultController.\n\nfunction IsReadableStreamDefaultController<R = any>(x: any): x is ReadableStreamDefaultController<R> {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_controlledReadableStream')) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction ReadableStreamDefaultControllerCallPullIfNeeded(controller: ReadableStreamDefaultController<any>): void {\n  const shouldPull = ReadableStreamDefaultControllerShouldCallPull(controller);\n  if (!shouldPull) {\n    return;\n  }\n\n  if (controller._pulling) {\n    controller._pullAgain = true;\n    return;\n  }\n\n  assert(!controller._pullAgain);\n\n  controller._pulling = true;\n\n  const pullPromise = controller._pullAlgorithm();\n  uponPromise(\n    pullPromise,\n    () => {\n      controller._pulling = false;\n\n      if (controller._pullAgain) {\n        controller._pullAgain = false;\n        ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n      }\n    },\n    e => {\n      ReadableStreamDefaultControllerError(controller, e);\n    }\n  );\n}\n\nfunction ReadableStreamDefaultControllerShouldCallPull(controller: ReadableStreamDefaultController<any>): boolean {\n  const stream = controller._controlledReadableStream;\n\n  if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n    return false;\n  }\n\n  if (!controller._started) {\n    return false;\n  }\n\n  if (IsReadableStreamLocked(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n    return true;\n  }\n\n  const desiredSize = ReadableStreamDefaultControllerGetDesiredSize(controller);\n  assert(desiredSize !== null);\n  if (desiredSize! > 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction ReadableStreamDefaultControllerClearAlgorithms(controller: ReadableStreamDefaultController<any>) {\n  controller._pullAlgorithm = undefined!;\n  controller._cancelAlgorithm = undefined!;\n  controller._strategySizeAlgorithm = undefined!;\n}\n\n// A client of ReadableStreamDefaultController may use these functions directly to bypass state check.\n\nexport function ReadableStreamDefaultControllerClose(controller: ReadableStreamDefaultController<any>) {\n  if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n    return;\n  }\n\n  const stream = controller._controlledReadableStream;\n\n  controller._closeRequested = true;\n\n  if (controller._queue.length === 0) {\n    ReadableStreamDefaultControllerClearAlgorithms(controller);\n    ReadableStreamClose(stream);\n  }\n}\n\nexport function ReadableStreamDefaultControllerEnqueue<R>(controller: ReadableStreamDefaultController<R>, chunk: R): void {\n  if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n    return;\n  }\n\n  const stream = controller._controlledReadableStream;\n\n  if (IsReadableStreamLocked(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n    ReadableStreamFulfillReadRequest(stream, chunk, false);\n  } else {\n    let chunkSize;\n    try {\n      chunkSize = controller._strategySizeAlgorithm(chunk);\n    } catch (chunkSizeE) {\n      ReadableStreamDefaultControllerError(controller, chunkSizeE);\n      throw chunkSizeE;\n    }\n\n    try {\n      EnqueueValueWithSize(controller, chunk, chunkSize);\n    } catch (enqueueE) {\n      ReadableStreamDefaultControllerError(controller, enqueueE);\n      throw enqueueE;\n    }\n  }\n\n  ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n}\n\nexport function ReadableStreamDefaultControllerError(controller: ReadableStreamDefaultController<any>, e: any) {\n  const stream = controller._controlledReadableStream;\n\n  if (stream._state !== 'readable') {\n    return;\n  }\n\n  ResetQueue(controller);\n\n  ReadableStreamDefaultControllerClearAlgorithms(controller);\n  ReadableStreamError(stream, e);\n}\n\nexport function ReadableStreamDefaultControllerGetDesiredSize(controller: ReadableStreamDefaultController<any>): number | null {\n  const state = controller._controlledReadableStream._state;\n\n  if (state === 'errored') {\n    return null;\n  }\n  if (state === 'closed') {\n    return 0;\n  }\n\n  return controller._strategyHWM - controller._queueTotalSize;\n}\n\n// This is used in the implementation of TransformStream.\nexport function ReadableStreamDefaultControllerHasBackpressure(controller: ReadableStreamDefaultController<any>): boolean {\n  if (ReadableStreamDefaultControllerShouldCallPull(controller)) {\n    return false;\n  }\n\n  return true;\n}\n\nexport function ReadableStreamDefaultControllerCanCloseOrEnqueue(controller: ReadableStreamDefaultController<any>): boolean {\n  const state = controller._controlledReadableStream._state;\n\n  if (!controller._closeRequested && state === 'readable') {\n    return true;\n  }\n\n  return false;\n}\n\nexport function SetUpReadableStreamDefaultController<R>(stream: ReadableStream<R>,\n                                                        controller: ReadableStreamDefaultController<R>,\n                                                        startAlgorithm: () => void | PromiseLike<void>,\n                                                        pullAlgorithm: () => Promise<void>,\n                                                        cancelAlgorithm: (reason: any) => Promise<void>,\n                                                        highWaterMark: number,\n                                                        sizeAlgorithm: QueuingStrategySizeCallback<R>) {\n  assert(stream._readableStreamController === undefined);\n\n  controller._controlledReadableStream = stream;\n\n  controller._queue = undefined!;\n  controller._queueTotalSize = undefined!;\n  ResetQueue(controller);\n\n  controller._started = false;\n  controller._closeRequested = false;\n  controller._pullAgain = false;\n  controller._pulling = false;\n\n  controller._strategySizeAlgorithm = sizeAlgorithm;\n  controller._strategyHWM = highWaterMark;\n\n  controller._pullAlgorithm = pullAlgorithm;\n  controller._cancelAlgorithm = cancelAlgorithm;\n\n  stream._readableStreamController = controller;\n\n  const startResult = startAlgorithm();\n  uponPromise(\n    promiseResolvedWith(startResult),\n    () => {\n      controller._started = true;\n\n      assert(!controller._pulling);\n      assert(!controller._pullAgain);\n\n      ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n    },\n    r => {\n      ReadableStreamDefaultControllerError(controller, r);\n    }\n  );\n}\n\nexport function SetUpReadableStreamDefaultControllerFromUnderlyingSource<R>(\n  stream: ReadableStream<R>,\n  underlyingSource: ValidatedUnderlyingSource<R>,\n  highWaterMark: number,\n  sizeAlgorithm: QueuingStrategySizeCallback<R>\n) {\n  const controller: ReadableStreamDefaultController<R> = Object.create(ReadableStreamDefaultController.prototype);\n\n  let startAlgorithm: () => void | PromiseLike<void> = () => undefined;\n  let pullAlgorithm: () => Promise<void> = () => promiseResolvedWith(undefined);\n  let cancelAlgorithm: (reason: any) => Promise<void> = () => promiseResolvedWith(undefined);\n\n  if (underlyingSource.start !== undefined) {\n    startAlgorithm = () => underlyingSource.start!(controller);\n  }\n  if (underlyingSource.pull !== undefined) {\n    pullAlgorithm = () => underlyingSource.pull!(controller);\n  }\n  if (underlyingSource.cancel !== undefined) {\n    cancelAlgorithm = reason => underlyingSource.cancel!(reason);\n  }\n\n  SetUpReadableStreamDefaultController(\n    stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm\n  );\n}\n\n// Helper functions for the ReadableStreamDefaultController.\n\nfunction defaultControllerBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `ReadableStreamDefaultController.prototype.${name} can only be used on a ReadableStreamDefaultController`);\n}\n", "import { CreateReadableStream, IsReadableStream, ReadableStream, ReadableStreamCancel } from '../readable-stream';\nimport { AcquireReadableStreamDefaultReader, ReadableStreamDefaultReaderRead, ReadRequest } from './default-reader';\nimport assert from '../../stub/assert';\nimport { newPromise, promiseResolvedWith, queueMicrotask, uponRejection } from '../helpers/webidl';\nimport {\n  ReadableStreamDefaultController,\n  ReadableStreamDefaultControllerClose,\n  ReadableStreamDefaultControllerEnqueue,\n  ReadableStreamDefaultControllerError\n} from './default-controller';\nimport { CreateArrayFromList } from '../abstract-ops/ecmascript';\n\nexport function ReadableStreamTee<R>(stream: ReadableStream<R>,\n                                     cloneForBranch2: boolean): [ReadableStream<R>, ReadableStream<R>] {\n  assert(IsReadableStream(stream));\n  assert(typeof cloneForBranch2 === 'boolean');\n\n  const reader = AcquireReadableStreamDefaultReader<R>(stream);\n\n  let reading = false;\n  let canceled1 = false;\n  let canceled2 = false;\n  let reason1: any;\n  let reason2: any;\n  let branch1: ReadableStream<R>;\n  let branch2: ReadableStream<R>;\n\n  let resolveCancelPromise: (reason: any) => void;\n  const cancelPromise = newPromise<any>(resolve => {\n    resolveCancelPromise = resolve;\n  });\n\n  function pullAlgorithm(): Promise<void> {\n    if (reading) {\n      return promiseResolvedWith(undefined);\n    }\n\n    reading = true;\n\n    const readRequest: ReadRequest<R> = {\n      _chunkSteps: value => {\n        // This needs to be delayed a microtask because it takes at least a microtask to detect errors (using\n        // reader._closedPromise below), and we want errors in stream to error both branches immediately. We cannot let\n        // successful synchronously-available reads get ahead of asynchronously-available errors.\n        queueMicrotask(() => {\n          reading = false;\n          const value1 = value;\n          const value2 = value;\n\n          // There is no way to access the cloning code right now in the reference implementation.\n          // If we add one then we'll need an implementation for serializable objects.\n          // if (!canceled2 && cloneForBranch2) {\n          //   value2 = StructuredDeserialize(StructuredSerialize(value2));\n          // }\n\n          if (!canceled1) {\n            ReadableStreamDefaultControllerEnqueue(\n              branch1._readableStreamController as ReadableStreamDefaultController<R>,\n              value1\n            );\n          }\n\n          if (!canceled2) {\n            ReadableStreamDefaultControllerEnqueue(\n              branch2._readableStreamController as ReadableStreamDefaultController<R>,\n              value2\n            );\n          }\n        });\n      },\n      _closeSteps: () => {\n        reading = false;\n        if (!canceled1) {\n          ReadableStreamDefaultControllerClose(branch1._readableStreamController as ReadableStreamDefaultController<R>);\n        }\n        if (!canceled2) {\n          ReadableStreamDefaultControllerClose(branch2._readableStreamController as ReadableStreamDefaultController<R>);\n        }\n\n        if (!canceled1 || !canceled2) {\n          resolveCancelPromise(undefined);\n        }\n      },\n      _errorSteps: () => {\n        reading = false;\n      }\n    };\n    ReadableStreamDefaultReaderRead(reader, readRequest);\n\n    return promiseResolvedWith(undefined);\n  }\n\n  function cancel1Algorithm(reason: any): Promise<void> {\n    canceled1 = true;\n    reason1 = reason;\n    if (canceled2) {\n      const compositeReason = CreateArrayFromList([reason1, reason2]);\n      const cancelResult = ReadableStreamCancel(stream, compositeReason);\n      resolveCancelPromise(cancelResult);\n    }\n    return cancelPromise;\n  }\n\n  function cancel2Algorithm(reason: any): Promise<void> {\n    canceled2 = true;\n    reason2 = reason;\n    if (canceled1) {\n      const compositeReason = CreateArrayFromList([reason1, reason2]);\n      const cancelResult = ReadableStreamCancel(stream, compositeReason);\n      resolveCancelPromise(cancelResult);\n    }\n    return cancelPromise;\n  }\n\n  function startAlgorithm() {\n    // do nothing\n  }\n\n  branch1 = CreateReadableStream(startAlgorithm, pullAlgorithm, cancel1Algorithm);\n  branch2 = CreateReadableStream(startAlgorithm, pullAlgorithm, cancel2Algorithm);\n\n  uponRejection(reader._closedPromise, (r: any) => {\n    ReadableStreamDefaultControllerError(branch1._readableStreamController as ReadableStreamDefaultController<R>, r);\n    ReadableStreamDefaultControllerError(branch2._readableStreamController as ReadableStreamDefaultController<R>, r);\n    if (!canceled1 || !canceled2) {\n      resolveCancelPromise(undefined);\n    }\n  });\n\n  return [branch1, branch2];\n}\n", "import { assertDictionary, assertFunction, convertUnsignedLongLongWithEnforceRange } from './basic';\nimport {\n  ReadableStreamController,\n  UnderlyingByteSource,\n  UnderlyingDefaultOrByteSource,\n  UnderlyingDefaultOrByteSourcePullCallback,\n  UnderlyingDefaultOrByteSourceStartCallback,\n  UnderlyingSource,\n  UnderlyingSourceCancelCallback,\n  ValidatedUnderlyingDefaultOrByteSource\n} from '../readable-stream/underlying-source';\nimport { promiseCall, reflectCall } from '../helpers/webidl';\n\nexport function convertUnderlyingDefaultOrByteSource<R>(\n  source: UnderlyingSource<R> | UnderlyingByteSource | null,\n  context: string\n): ValidatedUnderlyingDefaultOrByteSource<R> {\n  assertDictionary(source, context);\n  const original = source as (UnderlyingDefaultOrByteSource<R> | null);\n  const autoAllocateChunkSize = original?.autoAllocateChunkSize;\n  const cancel = original?.cancel;\n  const pull = original?.pull;\n  const start = original?.start;\n  const type = original?.type;\n  return {\n    autoAllocateChunkSize: autoAllocateChunkSize === undefined ?\n      undefined :\n      convertUnsignedLongLongWithEnforceRange(\n        autoAllocateChunkSize,\n        `${context} has member 'autoAllocateChunkSize' that`\n      ),\n    cancel: cancel === undefined ?\n      undefined :\n      convertUnderlyingSourceCancelCallback(cancel, original!, `${context} has member 'cancel' that`),\n    pull: pull === undefined ?\n      undefined :\n      convertUnderlyingSourcePullCallback(pull, original!, `${context} has member 'pull' that`),\n    start: start === undefined ?\n      undefined :\n      convertUnderlyingSourceStartCallback(start, original!, `${context} has member 'start' that`),\n    type: type === undefined ? undefined : convertReadableStreamType(type, `${context} has member 'type' that`)\n  };\n}\n\nfunction convertUnderlyingSourceCancelCallback(\n  fn: UnderlyingSourceCancelCallback,\n  original: UnderlyingDefaultOrByteSource,\n  context: string\n): (reason: any) => Promise<void> {\n  assertFunction(fn, context);\n  return (reason: any) => promiseCall(fn, original, [reason]);\n}\n\nfunction convertUnderlyingSourcePullCallback<R>(\n  fn: UnderlyingDefaultOrByteSourcePullCallback<R>,\n  original: UnderlyingDefaultOrByteSource<R>,\n  context: string\n): (controller: ReadableStreamController<R>) => Promise<void> {\n  assertFunction(fn, context);\n  return (controller: ReadableStreamController<R>) => promiseCall(fn, original, [controller]);\n}\n\nfunction convertUnderlyingSourceStartCallback<R>(\n  fn: UnderlyingDefaultOrByteSourceStartCallback<R>,\n  original: UnderlyingDefaultOrByteSource<R>,\n  context: string\n): UnderlyingDefaultOrByteSourceStartCallback<R> {\n  assertFunction(fn, context);\n  return (controller: ReadableStreamController<R>) => reflectCall(fn, original, [controller]);\n}\n\nfunction convertReadableStreamType(type: string, context: string): 'bytes' {\n  type = `${type}`;\n  if (type !== 'bytes') {\n    throw new TypeError(`${context} '${type}' is not a valid enumeration value for ReadableStreamType`);\n  }\n  return type;\n}\n", "import { assertDictionary } from './basic';\nimport { ReadableStreamGetReaderOptions } from '../readable-stream/reader-options';\n\nexport function convertReaderOptions(options: ReadableStreamGetReaderOptions | null | undefined,\n                                     context: string): ReadableStreamGetReaderOptions {\n  assertDictionary(options, context);\n  const mode = options?.mode;\n  return {\n    mode: mode === undefined ? undefined : convertReadableStreamReaderMode(mode, `${context} has member 'mode' that`)\n  };\n}\n\nfunction convertReadableStreamReaderMode(mode: string, context: string): 'byob' {\n  mode = `${mode}`;\n  if (mode !== 'byob') {\n    throw new TypeError(`${context} '${mode}' is not a valid enumeration value for ReadableStreamReaderMode`);\n  }\n  return mode;\n}\n", "import { assertDictionary } from './basic';\nimport {\n  ReadableStreamIteratorOptions,\n  ValidatedReadableStreamIteratorOptions\n} from '../readable-stream/iterator-options';\n\nexport function convertIteratorOptions(options: ReadableStreamIteratorOptions | null | undefined,\n                                       context: string): ValidatedReadableStreamIteratorOptions {\n  assertDictionary(options, context);\n  const preventCancel = options?.preventCancel;\n  return { preventCancel: Boolean(preventCancel) };\n}\n", "import { assertDictionary } from './basic';\nimport { StreamPipeOptions, ValidatedStreamPipeOptions } from '../readable-stream/pipe-options';\nimport { AbortSignal, isAbortSignal } from '../abort-signal';\n\nexport function convertPipeOptions(options: StreamPipeOptions | null | undefined,\n                                   context: string): ValidatedStreamPipeOptions {\n  assertDictionary(options, context);\n  const preventAbort = options?.preventAbort;\n  const preventCancel = options?.preventCancel;\n  const preventClose = options?.preventClose;\n  const signal = options?.signal;\n  if (signal !== undefined) {\n    assertAbortSignal(signal, `${context} has member 'signal' that`);\n  }\n  return {\n    preventAbort: Boolean(preventAbort),\n    preventCancel: Boolean(preventCancel),\n    preventClose: Boolean(preventClose),\n    signal\n  };\n}\n\nfunction assertAbortSignal(signal: unknown, context: string): asserts signal is AbortSignal {\n  if (!isAbortSignal(signal)) {\n    throw new TypeError(`${context} is not an AbortSignal.`);\n  }\n}\n", "import { assertDictionary, assertRequiredField } from './basic';\nimport { ReadableWritablePair } from '../readable-stream/readable-writable-pair';\nimport { assertReadableStream } from './readable-stream';\nimport { assertWritableStream } from './writable-stream';\n\nexport function convertReadableWritablePair<R, W>(pair: ReadableWritablePair<R, W> | null | undefined,\n                                                  context: string): ReadableWritablePair<R, W> {\n  assertDictionary(pair, context);\n\n  const readable = pair?.readable;\n  assertRequiredField(readable, 'readable', 'ReadableWritablePair');\n  assertReadableStream(readable, `${context} has member 'readable' that`);\n\n  const writable = pair?.writable;\n  assertRequiredField(writable, 'writable', 'ReadableWritablePair');\n  assertWritableStream(writable, `${context} has member 'writable' that`);\n\n  return { readable, writable };\n}\n", "import assert from '../stub/assert';\nimport {\n  promiseRejectedWith,\n  promiseResolvedWith,\n  setPromiseIsHandledToTrue,\n  transformPromiseWith\n} from './helpers/webidl';\nimport { QueuingStrategy, QueuingStrategySizeCallback } from './queuing-strategy';\nimport { AcquireReadableStreamAsyncIterator, ReadableStreamAsyncIterator } from './readable-stream/async-iterator';\nimport { defaultReaderClosedPromiseReject, defaultReaderClosedPromiseResolve } from './readable-stream/generic-reader';\nimport {\n  AcquireReadableStreamDefaultReader,\n  IsReadableStreamDefaultReader,\n  ReadableStreamDefaultReader,\n  ReadableStreamDefaultReadResult\n} from './readable-stream/default-reader';\nimport {\n  AcquireReadableStreamBYOBReader,\n  IsReadableStreamBYOBReader,\n  ReadableStreamBYOBReader,\n  ReadableStreamBYOBReadResult\n} from './readable-stream/byob-reader';\nimport { ReadableStreamPipeTo } from './readable-stream/pipe';\nimport { ReadableStreamTee } from './readable-stream/tee';\nimport { IsWritableStream, IsWritableStreamLocked, WritableStream } from './writable-stream';\nimport NumberIsInteger from '../stub/number-isinteger';\nimport { SimpleQueue } from './simple-queue';\nimport {\n  ReadableByteStreamController,\n  ReadableStreamBYOBRequest,\n  SetUpReadableByteStreamController,\n  SetUpReadableByteStreamControllerFromUnderlyingSource\n} from './readable-stream/byte-stream-controller';\nimport {\n  ReadableStreamDefaultController,\n  SetUpReadableStreamDefaultController,\n  SetUpReadableStreamDefaultControllerFromUnderlyingSource\n} from './readable-stream/default-controller';\nimport {\n  UnderlyingByteSource,\n  UnderlyingByteSourcePullCallback,\n  UnderlyingByteSourceStartCallback,\n  UnderlyingSource,\n  UnderlyingSourceCancelCallback,\n  UnderlyingSourcePullCallback,\n  UnderlyingSourceStartCallback\n} from './readable-stream/underlying-source';\nimport { noop } from '../utils';\nimport { typeIsObject } from './helpers/miscellaneous';\nimport { CreateArrayFromList } from './abstract-ops/ecmascript';\nimport { CancelSteps } from './abstract-ops/internal-methods';\nimport { IsNonNegativeNumber } from './abstract-ops/miscellaneous';\nimport { assertObject, assertRequiredArgument } from './validators/basic';\nimport { convertQueuingStrategy } from './validators/queuing-strategy';\nimport { ExtractHighWaterMark, ExtractSizeAlgorithm } from './abstract-ops/queuing-strategy';\nimport { convertUnderlyingDefaultOrByteSource } from './validators/underlying-source';\nimport { ReadableStreamGetReaderOptions } from './readable-stream/reader-options';\nimport { convertReaderOptions } from './validators/reader-options';\nimport { StreamPipeOptions, ValidatedStreamPipeOptions } from './readable-stream/pipe-options';\nimport { ReadableStreamIteratorOptions } from './readable-stream/iterator-options';\nimport { convertIteratorOptions } from './validators/iterator-options';\nimport { convertPipeOptions } from './validators/pipe-options';\nimport { ReadableWritablePair } from './readable-stream/readable-writable-pair';\nimport { convertReadableWritablePair } from './validators/readable-writable-pair';\n\nexport type ReadableByteStream = ReadableStream<Uint8Array>;\n\ntype ReadableStreamState = 'readable' | 'closed' | 'errored';\n\n/**\n * A readable stream represents a source of data, from which you can read.\n *\n * @public\n */\nexport class ReadableStream<R = any> {\n  /** @internal */\n  _state!: ReadableStreamState;\n  /** @internal */\n  _reader: ReadableStreamReader<R> | undefined;\n  /** @internal */\n  _storedError: any;\n  /** @internal */\n  _disturbed!: boolean;\n  /** @internal */\n  _readableStreamController!: ReadableStreamDefaultController<R> | ReadableByteStreamController;\n\n  constructor(underlyingSource: UnderlyingByteSource, strategy?: { highWaterMark?: number; size?: undefined });\n  constructor(underlyingSource?: UnderlyingSource<R>, strategy?: QueuingStrategy<R>);\n  constructor(rawUnderlyingSource: UnderlyingSource<R> | UnderlyingByteSource | null | undefined = {},\n              rawStrategy: QueuingStrategy<R> | null | undefined = {}) {\n    if (rawUnderlyingSource === undefined) {\n      rawUnderlyingSource = null;\n    } else {\n      assertObject(rawUnderlyingSource, 'First parameter');\n    }\n\n    const strategy = convertQueuingStrategy(rawStrategy, 'Second parameter');\n    const underlyingSource = convertUnderlyingDefaultOrByteSource(rawUnderlyingSource, 'First parameter');\n\n    InitializeReadableStream(this);\n\n    if (underlyingSource.type === 'bytes') {\n      if (strategy.size !== undefined) {\n        throw new RangeError('The strategy for a byte stream cannot have a size function');\n      }\n      const highWaterMark = ExtractHighWaterMark(strategy, 0);\n      SetUpReadableByteStreamControllerFromUnderlyingSource(\n        this as unknown as ReadableByteStream,\n        underlyingSource,\n        highWaterMark\n      );\n    } else {\n      assert(underlyingSource.type === undefined);\n      const sizeAlgorithm = ExtractSizeAlgorithm(strategy);\n      const highWaterMark = ExtractHighWaterMark(strategy, 1);\n      SetUpReadableStreamDefaultControllerFromUnderlyingSource(\n        this,\n        underlyingSource,\n        highWaterMark,\n        sizeAlgorithm\n      );\n    }\n  }\n\n  /**\n   * Whether or not the readable stream is locked to a {@link ReadableStreamDefaultReader | reader}.\n   */\n  get locked(): boolean {\n    if (!IsReadableStream(this)) {\n      throw streamBrandCheckException('locked');\n    }\n\n    return IsReadableStreamLocked(this);\n  }\n\n  /**\n   * Cancels the stream, signaling a loss of interest in the stream by a consumer.\n   *\n   * The supplied `reason` argument will be given to the underlying source's {@link UnderlyingSource.cancel | cancel()}\n   * method, which might or might not use it.\n   */\n  cancel(reason: any = undefined): Promise<undefined> {\n    if (!IsReadableStream(this)) {\n      return promiseRejectedWith(streamBrandCheckException('cancel'));\n    }\n\n    if (IsReadableStreamLocked(this)) {\n      return promiseRejectedWith(new TypeError('Cannot cancel a stream that already has a reader'));\n    }\n\n    return ReadableStreamCancel(this, reason);\n  }\n\n  /**\n   * Creates a {@link ReadableStreamBYOBReader} and locks the stream to the new reader.\n   *\n   * This call behaves the same way as the no-argument variant, except that it only works on readable byte streams,\n   * i.e. streams which were constructed specifically with the ability to handle \"bring your own buffer\" reading.\n   * The returned BYOB reader provides the ability to directly read individual chunks from the stream via its\n   * {@link ReadableStreamBYOBReader.read | read()} method, into developer-supplied buffers, allowing more precise\n   * control over allocation.\n   */\n  getReader({ mode }: { mode: 'byob' }): ReadableStreamBYOBReader;\n  /**\n   * Creates a {@link ReadableStreamDefaultReader} and locks the stream to the new reader.\n   * While the stream is locked, no other reader can be acquired until this one is released.\n   *\n   * This functionality is especially useful for creating abstractions that desire the ability to consume a stream\n   * in its entirety. By getting a reader for the stream, you can ensure nobody else can interleave reads with yours\n   * or cancel the stream, which would interfere with your abstraction.\n   */\n  getReader(): ReadableStreamDefaultReader<R>;\n  getReader(\n    rawOptions: ReadableStreamGetReaderOptions | null | undefined = undefined\n  ): ReadableStreamDefaultReader<R> | ReadableStreamBYOBReader {\n    if (!IsReadableStream(this)) {\n      throw streamBrandCheckException('getReader');\n    }\n\n    const options = convertReaderOptions(rawOptions, 'First parameter');\n\n    if (options.mode === undefined) {\n      return AcquireReadableStreamDefaultReader(this);\n    }\n\n    assert(options.mode === 'byob');\n    return AcquireReadableStreamBYOBReader(this as unknown as ReadableByteStream);\n  }\n\n  /**\n   * Provides a convenient, chainable way of piping this readable stream through a transform stream\n   * (or any other `{ writable, readable }` pair). It simply {@link ReadableStream.pipeTo | pipes} the stream\n   * into the writable side of the supplied pair, and returns the readable side for further use.\n   *\n   * Piping a stream will lock it for the duration of the pipe, preventing any other consumer from acquiring a reader.\n   */\n  pipeThrough<T>(transform: ReadableWritablePair<T, R>, options?: StreamPipeOptions): ReadableStream<T>;\n  pipeThrough<T>(rawTransform: ReadableWritablePair<T, R> | null | undefined,\n                 rawOptions: StreamPipeOptions | null | undefined = {}): ReadableStream<T> {\n    if (!IsReadableStream(this)) {\n      throw streamBrandCheckException('pipeThrough');\n    }\n    assertRequiredArgument(rawTransform, 1, 'pipeThrough');\n\n    const transform = convertReadableWritablePair(rawTransform, 'First parameter');\n    const options = convertPipeOptions(rawOptions, 'Second parameter');\n\n    if (IsReadableStreamLocked(this)) {\n      throw new TypeError('ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream');\n    }\n    if (IsWritableStreamLocked(transform.writable)) {\n      throw new TypeError('ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream');\n    }\n\n    const promise = ReadableStreamPipeTo(\n      this, transform.writable, options.preventClose, options.preventAbort, options.preventCancel, options.signal\n    );\n\n    setPromiseIsHandledToTrue(promise);\n\n    return transform.readable;\n  }\n\n  /**\n   * Pipes this readable stream to a given writable stream. The way in which the piping process behaves under\n   * various error conditions can be customized with a number of passed options. It returns a promise that fulfills\n   * when the piping process completes successfully, or rejects if any errors were encountered.\n   *\n   * Piping a stream will lock it for the duration of the pipe, preventing any other consumer from acquiring a reader.\n   */\n  pipeTo(destination: WritableStream<R>, options?: StreamPipeOptions): Promise<undefined>;\n  pipeTo(destination: WritableStream<R> | null | undefined,\n         rawOptions: StreamPipeOptions | null | undefined = {}): Promise<undefined> {\n    if (!IsReadableStream(this)) {\n      return promiseRejectedWith(streamBrandCheckException('pipeTo'));\n    }\n\n    if (destination === undefined) {\n      return promiseRejectedWith(`Parameter 1 is required in 'pipeTo'.`);\n    }\n    if (!IsWritableStream(destination)) {\n      return promiseRejectedWith(\n        new TypeError(`ReadableStream.prototype.pipeTo's first argument must be a WritableStream`)\n      );\n    }\n\n    let options: ValidatedStreamPipeOptions;\n    try {\n      options = convertPipeOptions(rawOptions, 'Second parameter');\n    } catch (e) {\n      return promiseRejectedWith(e);\n    }\n\n    if (IsReadableStreamLocked(this)) {\n      return promiseRejectedWith(\n        new TypeError('ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream')\n      );\n    }\n    if (IsWritableStreamLocked(destination)) {\n      return promiseRejectedWith(\n        new TypeError('ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream')\n      );\n    }\n\n    return ReadableStreamPipeTo<R>(\n      this, destination, options.preventClose, options.preventAbort, options.preventCancel, options.signal\n    );\n  }\n\n  /**\n   * Tees this readable stream, returning a two-element array containing the two resulting branches as\n   * new {@link ReadableStream} instances.\n   *\n   * Teeing a stream will lock it, preventing any other consumer from acquiring a reader.\n   * To cancel the stream, cancel both of the resulting branches; a composite cancellation reason will then be\n   * propagated to the stream's underlying source.\n   *\n   * Note that the chunks seen in each branch will be the same object. If the chunks are not immutable,\n   * this could allow interference between the two branches.\n   */\n  tee(): [ReadableStream<R>, ReadableStream<R>] {\n    if (!IsReadableStream(this)) {\n      throw streamBrandCheckException('tee');\n    }\n\n    const branches = ReadableStreamTee(this, false);\n    return CreateArrayFromList(branches);\n  }\n\n  /**\n   * Asynchronously iterates over the chunks in the stream's internal queue.\n   *\n   * Asynchronously iterating over the stream will lock it, preventing any other consumer from acquiring a reader.\n   * The lock will be released if the async iterator's {@link ReadableStreamAsyncIterator.return | return()} method\n   * is called, e.g. by breaking out of the loop.\n   *\n   * By default, calling the async iterator's {@link ReadableStreamAsyncIterator.return | return()} method will also\n   * cancel the stream. To prevent this, use the stream's {@link ReadableStream.values | values()} method, passing\n   * `true` for the `preventCancel` option.\n   */\n  values(options?: ReadableStreamIteratorOptions): ReadableStreamAsyncIterator<R>;\n  values(rawOptions: ReadableStreamIteratorOptions | null | undefined = undefined): ReadableStreamAsyncIterator<R> {\n    if (!IsReadableStream(this)) {\n      throw streamBrandCheckException('values');\n    }\n\n    const options = convertIteratorOptions(rawOptions, 'First parameter');\n    return AcquireReadableStreamAsyncIterator<R>(this, options.preventCancel);\n  }\n\n  /**\n   * {@inheritDoc ReadableStream.values}\n   */\n  [Symbol.asyncIterator]: (options?: ReadableStreamIteratorOptions) => ReadableStreamAsyncIterator<R>;\n}\n\nObject.defineProperties(ReadableStream.prototype, {\n  cancel: { enumerable: true },\n  getReader: { enumerable: true },\n  pipeThrough: { enumerable: true },\n  pipeTo: { enumerable: true },\n  tee: { enumerable: true },\n  values: { enumerable: true },\n  locked: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(ReadableStream.prototype, Symbol.toStringTag, {\n    value: 'ReadableStream',\n    configurable: true\n  });\n}\nif (typeof Symbol.asyncIterator === 'symbol') {\n  Object.defineProperty(ReadableStream.prototype, Symbol.asyncIterator, {\n    value: ReadableStream.prototype.values,\n    writable: true,\n    configurable: true\n  });\n}\n\nexport {\n  ReadableStreamAsyncIterator,\n  ReadableStreamDefaultReadResult,\n  ReadableStreamBYOBReadResult,\n  UnderlyingByteSource,\n  UnderlyingSource,\n  UnderlyingSourceStartCallback,\n  UnderlyingSourcePullCallback,\n  UnderlyingSourceCancelCallback,\n  UnderlyingByteSourceStartCallback,\n  UnderlyingByteSourcePullCallback,\n  StreamPipeOptions,\n  ReadableWritablePair,\n  ReadableStreamIteratorOptions\n};\n\n// Abstract operations for the ReadableStream.\n\n// Throws if and only if startAlgorithm throws.\nexport function CreateReadableStream<R>(startAlgorithm: () => void | PromiseLike<void>,\n                                        pullAlgorithm: () => Promise<void>,\n                                        cancelAlgorithm: (reason: any) => Promise<void>,\n                                        highWaterMark = 1,\n                                        sizeAlgorithm: QueuingStrategySizeCallback<R> = () => 1): ReadableStream<R> {\n  assert(IsNonNegativeNumber(highWaterMark));\n\n  const stream: ReadableStream<R> = Object.create(ReadableStream.prototype);\n  InitializeReadableStream(stream);\n\n  const controller: ReadableStreamDefaultController<R> = Object.create(ReadableStreamDefaultController.prototype);\n  SetUpReadableStreamDefaultController(\n    stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm\n  );\n\n  return stream;\n}\n\n// Throws if and only if startAlgorithm throws.\nexport function CreateReadableByteStream(startAlgorithm: () => void | PromiseLike<void>,\n                                         pullAlgorithm: () => Promise<void>,\n                                         cancelAlgorithm: (reason: any) => Promise<void>,\n                                         highWaterMark = 0,\n                                         autoAllocateChunkSize: number | undefined = undefined): ReadableStream<Uint8Array> {\n  assert(IsNonNegativeNumber(highWaterMark));\n  if (autoAllocateChunkSize !== undefined) {\n    assert(NumberIsInteger(autoAllocateChunkSize));\n    assert(autoAllocateChunkSize > 0);\n  }\n\n  const stream: ReadableStream<Uint8Array> = Object.create(ReadableStream.prototype);\n  InitializeReadableStream(stream);\n\n  const controller: ReadableByteStreamController = Object.create(ReadableByteStreamController.prototype);\n\n  SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark,\n                                    autoAllocateChunkSize);\n\n  return stream;\n}\n\nfunction InitializeReadableStream(stream: ReadableStream) {\n  stream._state = 'readable';\n  stream._reader = undefined;\n  stream._storedError = undefined;\n  stream._disturbed = false;\n}\n\nexport function IsReadableStream(x: unknown): x is ReadableStream {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_readableStreamController')) {\n    return false;\n  }\n\n  return true;\n}\n\nexport function IsReadableStreamDisturbed(stream: ReadableStream): boolean {\n  assert(IsReadableStream(stream));\n\n  return stream._disturbed;\n}\n\nexport function IsReadableStreamLocked(stream: ReadableStream): boolean {\n  assert(IsReadableStream(stream));\n\n  if (stream._reader === undefined) {\n    return false;\n  }\n\n  return true;\n}\n\n// ReadableStream API exposed for controllers.\n\nexport function ReadableStreamCancel<R>(stream: ReadableStream<R>, reason: any): Promise<undefined> {\n  stream._disturbed = true;\n\n  if (stream._state === 'closed') {\n    return promiseResolvedWith(undefined);\n  }\n  if (stream._state === 'errored') {\n    return promiseRejectedWith(stream._storedError);\n  }\n\n  ReadableStreamClose(stream);\n\n  const sourceCancelPromise = stream._readableStreamController[CancelSteps](reason);\n  return transformPromiseWith(sourceCancelPromise, noop);\n}\n\nexport function ReadableStreamClose<R>(stream: ReadableStream<R>): void {\n  assert(stream._state === 'readable');\n\n  stream._state = 'closed';\n\n  const reader = stream._reader;\n\n  if (reader === undefined) {\n    return;\n  }\n\n  defaultReaderClosedPromiseResolve(reader);\n\n  if (IsReadableStreamDefaultReader<R>(reader)) {\n    reader._readRequests.forEach(readRequest => {\n      readRequest._closeSteps();\n    });\n    reader._readRequests = new SimpleQueue();\n  }\n}\n\nexport function ReadableStreamError<R>(stream: ReadableStream<R>, e: any): void {\n  assert(IsReadableStream(stream));\n  assert(stream._state === 'readable');\n\n  stream._state = 'errored';\n  stream._storedError = e;\n\n  const reader = stream._reader;\n\n  if (reader === undefined) {\n    return;\n  }\n\n  defaultReaderClosedPromiseReject(reader, e);\n\n  if (IsReadableStreamDefaultReader<R>(reader)) {\n    reader._readRequests.forEach(readRequest => {\n      readRequest._errorSteps(e);\n    });\n\n    reader._readRequests = new SimpleQueue();\n  } else {\n    assert(IsReadableStreamBYOBReader(reader));\n\n    reader._readIntoRequests.forEach(readIntoRequest => {\n      readIntoRequest._errorSteps(e);\n    });\n\n    reader._readIntoRequests = new SimpleQueue();\n  }\n}\n\n// Readers\n\nexport type ReadableStreamReader<R> = ReadableStreamDefaultReader<R> | ReadableStreamBYOBReader;\n\nexport {\n  ReadableStreamDefaultReader,\n  ReadableStreamBYOBReader\n};\n\n// Controllers\n\nexport {\n  ReadableStreamDefaultController,\n  ReadableStreamBYOBRequest,\n  ReadableByteStreamController\n};\n\n// Helper functions for the ReadableStream.\n\nfunction streamBrandCheckException(name: string): TypeError {\n  return new TypeError(`ReadableStream.prototype.${name} can only be used on a ReadableStream`);\n}\n", "import { QueuingStrategyInit } from '../queuing-strategy';\nimport { assertDictionary, assertRequiredField, convertUnrestrictedDouble } from './basic';\n\nexport function convertQueuingStrategyInit(init: QueuingStrategyInit | null | undefined,\n                                           context: string): QueuingStrategyInit {\n  assertDictionary(init, context);\n  const highWaterMark = init?.highWaterMark;\n  assertRequiredField(highWaterMark, 'highWaterMark', 'QueuingStrategyInit');\n  return {\n    highWaterMark: convertUnrestrictedDouble(highWaterMark)\n  };\n}\n", "import { QueuingStrategy, QueuingStrategyInit } from './queuing-strategy';\nimport { typeIsObject } from './helpers/miscellaneous';\nimport { assertRequiredArgument } from './validators/basic';\nimport { convertQueuingStrategyInit } from './validators/queuing-strategy-init';\n\nconst byteLengthSizeFunction = function size(chunk: ArrayBufferView): number {\n  return chunk.byteLength;\n};\n\n/**\n * A queuing strategy that counts the number of bytes in each chunk.\n *\n * @public\n */\nexport default class ByteLengthQueuingStrategy implements QueuingStrategy<ArrayBufferView> {\n  /** @internal */\n  readonly _byteLengthQueuingStrategyHighWaterMark: number;\n\n  constructor(options: QueuingStrategyInit) {\n    assertRequiredArgument(options, 1, 'ByteLengthQueuingStrategy');\n    options = convertQueuingStrategyInit(options, 'First parameter');\n    this._byteLengthQueuingStrategyHighWaterMark = options.highWaterMark;\n  }\n\n  /**\n   * Returns the high water mark provided to the constructor.\n   */\n  get highWaterMark(): number {\n    if (!IsByteLengthQueuingStrategy(this)) {\n      throw byteLengthBrandCheckException('highWaterMark');\n    }\n    return this._byteLengthQueuingStrategyHighWaterMark;\n  }\n\n  /**\n   * Measures the size of `chunk` by returning the value of its `byteLength` property.\n   */\n  get size(): (chunk: ArrayBufferView) => number {\n    if (!IsByteLengthQueuingStrategy(this)) {\n      throw byteLengthBrandCheckException('size');\n    }\n    return byteLengthSizeFunction;\n  }\n}\n\nObject.defineProperties(ByteLengthQueuingStrategy.prototype, {\n  highWaterMark: { enumerable: true },\n  size: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(ByteLengthQueuingStrategy.prototype, Symbol.toStringTag, {\n    value: 'ByteLengthQueuingStrategy',\n    configurable: true\n  });\n}\n\n// Helper functions for the ByteLengthQueuingStrategy.\n\nfunction byteLengthBrandCheckException(name: string): TypeError {\n  return new TypeError(`ByteLengthQueuingStrategy.prototype.${name} can only be used on a ByteLengthQueuingStrategy`);\n}\n\nexport function IsByteLengthQueuingStrategy(x: any): x is ByteLengthQueuingStrategy {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_byteLengthQueuingStrategyHighWaterMark')) {\n    return false;\n  }\n\n  return true;\n}\n", "import { QueuingStrategy, QueuingStrategyInit } from './queuing-strategy';\nimport { typeIsObject } from './helpers/miscellaneous';\nimport { assertRequiredArgument } from './validators/basic';\nimport { convertQueuingStrategyInit } from './validators/queuing-strategy-init';\n\nconst countSizeFunction = function size(): 1 {\n  return 1;\n};\n\n/**\n * A queuing strategy that counts the number of chunks.\n *\n * @public\n */\nexport default class CountQueuingStrategy implements QueuingStrategy<any> {\n  /** @internal */\n  readonly _countQueuingStrategyHighWaterMark!: number;\n\n  constructor(options: QueuingStrategyInit) {\n    assertRequiredArgument(options, 1, 'CountQueuingStrategy');\n    options = convertQueuingStrategyInit(options, 'First parameter');\n    this._countQueuingStrategyHighWaterMark = options.highWaterMark;\n  }\n\n  /**\n   * Returns the high water mark provided to the constructor.\n   */\n  get highWaterMark(): number {\n    if (!IsCountQueuingStrategy(this)) {\n      throw countBrandCheckException('highWaterMark');\n    }\n    return this._countQueuingStrategyHighWaterMark;\n  }\n\n  /**\n   * Measures the size of `chunk` by always returning 1.\n   * This ensures that the total queue size is a count of the number of chunks in the queue.\n   */\n  get size(): (chunk: any) => 1 {\n    if (!IsCountQueuingStrategy(this)) {\n      throw countBrandCheckException('size');\n    }\n    return countSizeFunction;\n  }\n}\n\nObject.defineProperties(CountQueuingStrategy.prototype, {\n  highWaterMark: { enumerable: true },\n  size: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(CountQueuingStrategy.prototype, Symbol.toStringTag, {\n    value: 'CountQueuingStrategy',\n    configurable: true\n  });\n}\n\n// Helper functions for the CountQueuingStrategy.\n\nfunction countBrandCheckException(name: string): TypeError {\n  return new TypeError(`CountQueuingStrategy.prototype.${name} can only be used on a CountQueuingStrategy`);\n}\n\nexport function IsCountQueuingStrategy(x: any): x is CountQueuingStrategy {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_countQueuingStrategyHighWaterMark')) {\n    return false;\n  }\n\n  return true;\n}\n", "import { assertDictionary, assertFunction } from './basic';\nimport { promiseCall, reflectCall } from '../helpers/webidl';\nimport {\n  Transformer,\n  TransformerFlushCallback,\n  TransformerStartCallback,\n  TransformerTransformCallback,\n  ValidatedTransformer\n} from '../transform-stream/transformer';\nimport { TransformStreamDefaultController } from '../transform-stream';\n\nexport function convertTransformer<I, O>(original: Transformer<I, O> | null,\n                                         context: string): ValidatedTransformer<I, O> {\n  assertDictionary(original, context);\n  const flush = original?.flush;\n  const readableType = original?.readableType;\n  const start = original?.start;\n  const transform = original?.transform;\n  const writableType = original?.writableType;\n  return {\n    flush: flush === undefined ?\n      undefined :\n      convertTransformerFlushCallback(flush, original!, `${context} has member 'flush' that`),\n    readableType,\n    start: start === undefined ?\n      undefined :\n      convertTransformerStartCallback(start, original!, `${context} has member 'start' that`),\n    transform: transform === undefined ?\n      undefined :\n      convertTransformerTransformCallback(transform, original!, `${context} has member 'transform' that`),\n    writableType\n  };\n}\n\nfunction convertTransformerFlushCallback<I, O>(\n  fn: TransformerFlushCallback<O>,\n  original: Transformer<I, O>,\n  context: string\n): (controller: TransformStreamDefaultController<O>) => Promise<void> {\n  assertFunction(fn, context);\n  return (controller: TransformStreamDefaultController<O>) => promiseCall(fn, original, [controller]);\n}\n\nfunction convertTransformerStartCallback<I, O>(\n  fn: TransformerStartCallback<O>,\n  original: Transformer<I, O>,\n  context: string\n): TransformerStartCallback<O> {\n  assertFunction(fn, context);\n  return (controller: TransformStreamDefaultController<O>) => reflectCall(fn, original, [controller]);\n}\n\nfunction convertTransformerTransformCallback<I, O>(\n  fn: TransformerTransformCallback<I, O>,\n  original: Transformer<I, O>,\n  context: string\n): (chunk: I, controller: TransformStreamDefaultController<O>) => Promise<void> {\n  assertFunction(fn, context);\n  return (chunk: I, controller: TransformStreamDefaultController<O>) => promiseCall(fn, original, [chunk, controller]);\n}\n", "import assert from '../stub/assert';\nimport { newPromise, promiseRejectedWith, promiseResolvedWith, transformPromiseWith } from './helpers/webidl';\nimport { CreateReadableStream, ReadableStream, ReadableStreamDefaultController } from './readable-stream';\nimport {\n  ReadableStreamDefaultControllerCanCloseOrEnqueue,\n  ReadableStreamDefaultControllerClose,\n  ReadableStreamDefaultControllerEnqueue,\n  ReadableStreamDefaultControllerError,\n  ReadableStreamDefaultControllerGetDesiredSize,\n  ReadableStreamDefaultControllerHasBackpressure\n} from './readable-stream/default-controller';\nimport { QueuingStrategy, QueuingStrategySizeCallback } from './queuing-strategy';\nimport { CreateWritableStream, WritableStream, WritableStreamDefaultControllerErrorIfNeeded } from './writable-stream';\nimport { typeIsObject } from './helpers/miscellaneous';\nimport { IsNonNegativeNumber } from './abstract-ops/miscellaneous';\nimport { convertQueuingStrategy } from './validators/queuing-strategy';\nimport { ExtractHighWaterMark, ExtractSizeAlgorithm } from './abstract-ops/queuing-strategy';\nimport {\n  Transformer,\n  TransformerFlushCallback,\n  TransformerStartCallback,\n  TransformerTransformCallback,\n  ValidatedTransformer\n} from './transform-stream/transformer';\nimport { convertTransformer } from './validators/transformer';\n\n// Class TransformStream\n\n/**\n * A transform stream consists of a pair of streams: a {@link WritableStream | writable stream},\n * known as its writable side, and a {@link ReadableStream | readable stream}, known as its readable side.\n * In a manner specific to the transform stream in question, writes to the writable side result in new data being\n * made available for reading from the readable side.\n *\n * @public\n */\nexport class TransformStream<I = any, O = any> {\n  /** @internal */\n  _writable!: WritableStream<I>;\n  /** @internal */\n  _readable!: ReadableStream<O>;\n  /** @internal */\n  _backpressure!: boolean;\n  /** @internal */\n  _backpressureChangePromise!: Promise<void>;\n  /** @internal */\n  _backpressureChangePromise_resolve!: () => void;\n  /** @internal */\n  _transformStreamController!: TransformStreamDefaultController<O>;\n\n  constructor(\n    transformer?: Transformer<I, O>,\n    writableStrategy?: QueuingStrategy<I>,\n    readableStrategy?: QueuingStrategy<O>\n  );\n  constructor(rawTransformer: Transformer<I, O> | null | undefined = {},\n              rawWritableStrategy: QueuingStrategy<I> | null | undefined = {},\n              rawReadableStrategy: QueuingStrategy<O> | null | undefined = {}) {\n    if (rawTransformer === undefined) {\n      rawTransformer = null;\n    }\n\n    const writableStrategy = convertQueuingStrategy(rawWritableStrategy, 'Second parameter');\n    const readableStrategy = convertQueuingStrategy(rawReadableStrategy, 'Third parameter');\n\n    const transformer = convertTransformer(rawTransformer, 'First parameter');\n    if (transformer.readableType !== undefined) {\n      throw new RangeError('Invalid readableType specified');\n    }\n    if (transformer.writableType !== undefined) {\n      throw new RangeError('Invalid writableType specified');\n    }\n\n    const readableHighWaterMark = ExtractHighWaterMark(readableStrategy, 0);\n    const readableSizeAlgorithm = ExtractSizeAlgorithm(readableStrategy);\n    const writableHighWaterMark = ExtractHighWaterMark(writableStrategy, 1);\n    const writableSizeAlgorithm = ExtractSizeAlgorithm(writableStrategy);\n\n    let startPromise_resolve!: (value: void | PromiseLike<void>) => void;\n    const startPromise = newPromise<void>(resolve => {\n      startPromise_resolve = resolve;\n    });\n\n    InitializeTransformStream(\n      this, startPromise, writableHighWaterMark, writableSizeAlgorithm, readableHighWaterMark, readableSizeAlgorithm\n    );\n    SetUpTransformStreamDefaultControllerFromTransformer(this, transformer);\n\n    if (transformer.start !== undefined) {\n      startPromise_resolve(transformer.start(this._transformStreamController));\n    } else {\n      startPromise_resolve(undefined);\n    }\n  }\n\n  /**\n   * The readable side of the transform stream.\n   */\n  get readable(): ReadableStream<O> {\n    if (!IsTransformStream(this)) {\n      throw streamBrandCheckException('readable');\n    }\n\n    return this._readable;\n  }\n\n  /**\n   * The writable side of the transform stream.\n   */\n  get writable(): WritableStream<I> {\n    if (!IsTransformStream(this)) {\n      throw streamBrandCheckException('writable');\n    }\n\n    return this._writable;\n  }\n}\n\nObject.defineProperties(TransformStream.prototype, {\n  readable: { enumerable: true },\n  writable: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(TransformStream.prototype, Symbol.toStringTag, {\n    value: 'TransformStream',\n    configurable: true\n  });\n}\n\nexport {\n  Transformer,\n  TransformerStartCallback,\n  TransformerFlushCallback,\n  TransformerTransformCallback\n};\n\n// Transform Stream Abstract Operations\n\nexport function CreateTransformStream<I, O>(startAlgorithm: () => void | PromiseLike<void>,\n                                            transformAlgorithm: (chunk: I) => Promise<void>,\n                                            flushAlgorithm: () => Promise<void>,\n                                            writableHighWaterMark = 1,\n                                            writableSizeAlgorithm: QueuingStrategySizeCallback<I> = () => 1,\n                                            readableHighWaterMark = 0,\n                                            readableSizeAlgorithm: QueuingStrategySizeCallback<O> = () => 1) {\n  assert(IsNonNegativeNumber(writableHighWaterMark));\n  assert(IsNonNegativeNumber(readableHighWaterMark));\n\n  const stream: TransformStream<I, O> = Object.create(TransformStream.prototype);\n\n  let startPromise_resolve!: (value: void | PromiseLike<void>) => void;\n  const startPromise = newPromise<void>(resolve => {\n    startPromise_resolve = resolve;\n  });\n\n  InitializeTransformStream(stream, startPromise, writableHighWaterMark, writableSizeAlgorithm, readableHighWaterMark,\n                            readableSizeAlgorithm);\n\n  const controller: TransformStreamDefaultController<O> = Object.create(TransformStreamDefaultController.prototype);\n\n  SetUpTransformStreamDefaultController(stream, controller, transformAlgorithm, flushAlgorithm);\n\n  const startResult = startAlgorithm();\n  startPromise_resolve(startResult);\n  return stream;\n}\n\nfunction InitializeTransformStream<I, O>(stream: TransformStream<I, O>,\n                                         startPromise: Promise<void>,\n                                         writableHighWaterMark: number,\n                                         writableSizeAlgorithm: QueuingStrategySizeCallback<I>,\n                                         readableHighWaterMark: number,\n                                         readableSizeAlgorithm: QueuingStrategySizeCallback<O>) {\n  function startAlgorithm(): Promise<void> {\n    return startPromise;\n  }\n\n  function writeAlgorithm(chunk: I): Promise<void> {\n    return TransformStreamDefaultSinkWriteAlgorithm(stream, chunk);\n  }\n\n  function abortAlgorithm(reason: any): Promise<void> {\n    return TransformStreamDefaultSinkAbortAlgorithm(stream, reason);\n  }\n\n  function closeAlgorithm(): Promise<void> {\n    return TransformStreamDefaultSinkCloseAlgorithm(stream);\n  }\n\n  stream._writable = CreateWritableStream(startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm,\n                                          writableHighWaterMark, writableSizeAlgorithm);\n\n  function pullAlgorithm(): Promise<void> {\n    return TransformStreamDefaultSourcePullAlgorithm(stream);\n  }\n\n  function cancelAlgorithm(reason: any): Promise<void> {\n    TransformStreamErrorWritableAndUnblockWrite(stream, reason);\n    return promiseResolvedWith(undefined);\n  }\n\n  stream._readable = CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, readableHighWaterMark,\n                                          readableSizeAlgorithm);\n\n  // The [[backpressure]] slot is set to undefined so that it can be initialised by TransformStreamSetBackpressure.\n  stream._backpressure = undefined!;\n  stream._backpressureChangePromise = undefined!;\n  stream._backpressureChangePromise_resolve = undefined!;\n  TransformStreamSetBackpressure(stream, true);\n\n  stream._transformStreamController = undefined!;\n}\n\nfunction IsTransformStream(x: unknown): x is TransformStream {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_transformStreamController')) {\n    return false;\n  }\n\n  return true;\n}\n\n// This is a no-op if both sides are already errored.\nfunction TransformStreamError(stream: TransformStream, e: any) {\n  ReadableStreamDefaultControllerError(stream._readable._readableStreamController as ReadableStreamDefaultController<any>,\n                                       e);\n  TransformStreamErrorWritableAndUnblockWrite(stream, e);\n}\n\nfunction TransformStreamErrorWritableAndUnblockWrite(stream: TransformStream, e: any) {\n  TransformStreamDefaultControllerClearAlgorithms(stream._transformStreamController);\n  WritableStreamDefaultControllerErrorIfNeeded(stream._writable._writableStreamController, e);\n  if (stream._backpressure) {\n    // Pretend that pull() was called to permit any pending write() calls to complete. TransformStreamSetBackpressure()\n    // cannot be called from enqueue() or pull() once the ReadableStream is errored, so this will will be the final time\n    // _backpressure is set.\n    TransformStreamSetBackpressure(stream, false);\n  }\n}\n\nfunction TransformStreamSetBackpressure(stream: TransformStream, backpressure: boolean) {\n  // Passes also when called during construction.\n  assert(stream._backpressure !== backpressure);\n\n  if (stream._backpressureChangePromise !== undefined) {\n    stream._backpressureChangePromise_resolve();\n  }\n\n  stream._backpressureChangePromise = newPromise(resolve => {\n    stream._backpressureChangePromise_resolve = resolve;\n  });\n\n  stream._backpressure = backpressure;\n}\n\n// Class TransformStreamDefaultController\n\n/**\n * Allows control of the {@link ReadableStream} and {@link WritableStream} of the associated {@link TransformStream}.\n *\n * @public\n */\nexport class TransformStreamDefaultController<O> {\n  /** @internal */\n  _controlledTransformStream: TransformStream<any, O>;\n  /** @internal */\n  _transformAlgorithm: (chunk: any) => Promise<void>;\n  /** @internal */\n  _flushAlgorithm: () => Promise<void>;\n\n  private constructor() {\n    throw new TypeError('Illegal constructor');\n  }\n\n  /**\n   * Returns the desired size to fill the readable side\u2019s internal queue. It can be negative, if the queue is over-full.\n   */\n  get desiredSize(): number | null {\n    if (!IsTransformStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('desiredSize');\n    }\n\n    const readableController = this._controlledTransformStream._readable._readableStreamController;\n    return ReadableStreamDefaultControllerGetDesiredSize(readableController as ReadableStreamDefaultController<O>);\n  }\n\n  /**\n   * Enqueues the given chunk `chunk` in the readable side of the controlled transform stream.\n   */\n  enqueue(chunk: O): void;\n  enqueue(chunk: O = undefined!): void {\n    if (!IsTransformStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('enqueue');\n    }\n\n    TransformStreamDefaultControllerEnqueue(this, chunk);\n  }\n\n  /**\n   * Errors both the readable side and the writable side of the controlled transform stream, making all future\n   * interactions with it fail with the given error `e`. Any chunks queued for transformation will be discarded.\n   */\n  error(reason: any = undefined): void {\n    if (!IsTransformStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('error');\n    }\n\n    TransformStreamDefaultControllerError(this, reason);\n  }\n\n  /**\n   * Closes the readable side and errors the writable side of the controlled transform stream. This is useful when the\n   * transformer only needs to consume a portion of the chunks written to the writable side.\n   */\n  terminate(): void {\n    if (!IsTransformStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('terminate');\n    }\n\n    TransformStreamDefaultControllerTerminate(this);\n  }\n}\n\nObject.defineProperties(TransformStreamDefaultController.prototype, {\n  enqueue: { enumerable: true },\n  error: { enumerable: true },\n  terminate: { enumerable: true },\n  desiredSize: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(TransformStreamDefaultController.prototype, Symbol.toStringTag, {\n    value: 'TransformStreamDefaultController',\n    configurable: true\n  });\n}\n\n// Transform Stream Default Controller Abstract Operations\n\nfunction IsTransformStreamDefaultController<O = any>(x: any): x is TransformStreamDefaultController<O> {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_controlledTransformStream')) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction SetUpTransformStreamDefaultController<I, O>(stream: TransformStream<I, O>,\n                                                     controller: TransformStreamDefaultController<O>,\n                                                     transformAlgorithm: (chunk: I) => Promise<void>,\n                                                     flushAlgorithm: () => Promise<void>) {\n  assert(IsTransformStream(stream));\n  assert(stream._transformStreamController === undefined);\n\n  controller._controlledTransformStream = stream;\n  stream._transformStreamController = controller;\n\n  controller._transformAlgorithm = transformAlgorithm;\n  controller._flushAlgorithm = flushAlgorithm;\n}\n\nfunction SetUpTransformStreamDefaultControllerFromTransformer<I, O>(stream: TransformStream<I, O>,\n                                                                    transformer: ValidatedTransformer<I, O>) {\n  const controller: TransformStreamDefaultController<O> = Object.create(TransformStreamDefaultController.prototype);\n\n  let transformAlgorithm = (chunk: I): Promise<void> => {\n    try {\n      TransformStreamDefaultControllerEnqueue(controller, chunk as unknown as O);\n      return promiseResolvedWith(undefined);\n    } catch (transformResultE) {\n      return promiseRejectedWith(transformResultE);\n    }\n  };\n\n  let flushAlgorithm: () => Promise<void> = () => promiseResolvedWith(undefined);\n\n  if (transformer.transform !== undefined) {\n    transformAlgorithm = chunk => transformer.transform!(chunk, controller);\n  }\n  if (transformer.flush !== undefined) {\n    flushAlgorithm = () => transformer.flush!(controller);\n  }\n\n  SetUpTransformStreamDefaultController(stream, controller, transformAlgorithm, flushAlgorithm);\n}\n\nfunction TransformStreamDefaultControllerClearAlgorithms(controller: TransformStreamDefaultController<any>) {\n  controller._transformAlgorithm = undefined!;\n  controller._flushAlgorithm = undefined!;\n}\n\nfunction TransformStreamDefaultControllerEnqueue<O>(controller: TransformStreamDefaultController<O>, chunk: O) {\n  const stream = controller._controlledTransformStream;\n  const readableController = stream._readable._readableStreamController as ReadableStreamDefaultController<O>;\n  if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(readableController)) {\n    throw new TypeError('Readable side is not in a state that permits enqueue');\n  }\n\n  // We throttle transform invocations based on the backpressure of the ReadableStream, but we still\n  // accept TransformStreamDefaultControllerEnqueue() calls.\n\n  try {\n    ReadableStreamDefaultControllerEnqueue(readableController, chunk);\n  } catch (e) {\n    // This happens when readableStrategy.size() throws.\n    TransformStreamErrorWritableAndUnblockWrite(stream, e);\n\n    throw stream._readable._storedError;\n  }\n\n  const backpressure = ReadableStreamDefaultControllerHasBackpressure(readableController);\n  if (backpressure !== stream._backpressure) {\n    assert(backpressure);\n    TransformStreamSetBackpressure(stream, true);\n  }\n}\n\nfunction TransformStreamDefaultControllerError(controller: TransformStreamDefaultController<any>, e: any) {\n  TransformStreamError(controller._controlledTransformStream, e);\n}\n\nfunction TransformStreamDefaultControllerPerformTransform<I, O>(controller: TransformStreamDefaultController<O>,\n                                                                chunk: I) {\n  const transformPromise = controller._transformAlgorithm(chunk);\n  return transformPromiseWith(transformPromise, undefined, r => {\n    TransformStreamError(controller._controlledTransformStream, r);\n    throw r;\n  });\n}\n\nfunction TransformStreamDefaultControllerTerminate<O>(controller: TransformStreamDefaultController<O>) {\n  const stream = controller._controlledTransformStream;\n  const readableController = stream._readable._readableStreamController as ReadableStreamDefaultController<O>;\n\n  ReadableStreamDefaultControllerClose(readableController);\n\n  const error = new TypeError('TransformStream terminated');\n  TransformStreamErrorWritableAndUnblockWrite(stream, error);\n}\n\n// TransformStreamDefaultSink Algorithms\n\nfunction TransformStreamDefaultSinkWriteAlgorithm<I, O>(stream: TransformStream<I, O>, chunk: I): Promise<void> {\n  assert(stream._writable._state === 'writable');\n\n  const controller = stream._transformStreamController;\n\n  if (stream._backpressure) {\n    const backpressureChangePromise = stream._backpressureChangePromise;\n    assert(backpressureChangePromise !== undefined);\n    return transformPromiseWith(backpressureChangePromise, () => {\n      const writable = stream._writable;\n      const state = writable._state;\n      if (state === 'erroring') {\n        throw writable._storedError;\n      }\n      assert(state === 'writable');\n      return TransformStreamDefaultControllerPerformTransform<I, O>(controller, chunk);\n    });\n  }\n\n  return TransformStreamDefaultControllerPerformTransform<I, O>(controller, chunk);\n}\n\nfunction TransformStreamDefaultSinkAbortAlgorithm(stream: TransformStream, reason: any): Promise<void> {\n  // abort() is not called synchronously, so it is possible for abort() to be called when the stream is already\n  // errored.\n  TransformStreamError(stream, reason);\n  return promiseResolvedWith(undefined);\n}\n\nfunction TransformStreamDefaultSinkCloseAlgorithm<I, O>(stream: TransformStream<I, O>): Promise<void> {\n  // stream._readable cannot change after construction, so caching it across a call to user code is safe.\n  const readable = stream._readable;\n\n  const controller = stream._transformStreamController;\n  const flushPromise = controller._flushAlgorithm();\n  TransformStreamDefaultControllerClearAlgorithms(controller);\n\n  // Return a promise that is fulfilled with undefined on success.\n  return transformPromiseWith(flushPromise, () => {\n    if (readable._state === 'errored') {\n      throw readable._storedError;\n    }\n    ReadableStreamDefaultControllerClose(readable._readableStreamController as ReadableStreamDefaultController<O>);\n  }, r => {\n    TransformStreamError(stream, r);\n    throw readable._storedError;\n  });\n}\n\n// TransformStreamDefaultSource Algorithms\n\nfunction TransformStreamDefaultSourcePullAlgorithm(stream: TransformStream): Promise<void> {\n  // Invariant. Enforced by the promises returned by start() and pull().\n  assert(stream._backpressure);\n\n  assert(stream._backpressureChangePromise !== undefined);\n\n  TransformStreamSetBackpressure(stream, false);\n\n  // Prevent the next pull() call until there is backpressure.\n  return stream._backpressureChangePromise;\n}\n\n// Helper functions for the TransformStreamDefaultController.\n\nfunction defaultControllerBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `TransformStreamDefaultController.prototype.${name} can only be used on a TransformStreamDefaultController`);\n}\n\n// Helper functions for the TransformStream.\n\nfunction streamBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `TransformStream.prototype.${name} can only be used on a TransformStream`);\n}\n", "import {\n  ByteLengthQueuingStrategy,\n  CountQueuingStrategy,\n  ReadableByteStreamController,\n  ReadableStream,\n  ReadableStreamBYOBReader,\n  ReadableStreamBYOBRequest,\n  ReadableStreamDefaultController,\n  ReadableStreamDefaultReader,\n  TransformStream,\n  TransformStreamDefaultController,\n  WritableStream,\n  WritableStreamDefaultController,\n  WritableStreamDefaultWriter\n} from './ponyfill';\nimport { globals } from './utils';\n\n// Export\nexport * from './ponyfill';\n\nconst exports = {\n  ReadableStream,\n  ReadableStreamDefaultController,\n  ReadableByteStreamController,\n  ReadableStreamBYOBRequest,\n  ReadableStreamDefaultReader,\n  ReadableStreamBYOBReader,\n\n  WritableStream,\n  WritableStreamDefaultController,\n  WritableStreamDefaultWriter,\n\n  ByteLengthQueuingStrategy,\n  CountQueuingStrategy,\n\n  TransformStream,\n  TransformStreamDefaultController\n};\n\n// Add classes to global scope\nif (typeof globals !== 'undefined') {\n  for (const prop in exports) {\n    if (Object.prototype.hasOwnProperty.call(exports, prop)) {\n      Object.defineProperty(globals, prop, {\n        value: exports[prop as (keyof typeof exports)],\n        writable: true,\n        configurable: true\n      });\n    }\n  }\n}\n", "// Version constant cannot be imported, it needs to correspond to the build version of **this** module.\n// __VERSION__ is injected by babel-plugin-version-inline\n\n// Change to `latest` on production branches\nconst DEFAULT_VERSION = 'latest';\ndeclare let __VERSION__: string;\nexport const VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : DEFAULT_VERSION;\nif (typeof __VERSION__ === 'undefined') {\n  // eslint-disable-next-line\n  console.error(\n    'loaders.gl: The __VERSION__ variable is not injected using babel plugin. Latest unstable workers would be fetched from the CDN.'\n  );\n}\n", "// Replacement for the external assert method to reduce bundle size\n// Note: We don't use the second \"message\" argument in calling code,\n// so no need to support it here\n\n/** Throws an `Error` with the optional `message` if `condition` is falsy */\nexport function assert(condition: any, message?: string): void {\n  if (!condition) {\n    throw new Error(message || 'loaders.gl assertion failed.');\n  }\n}\n", "// Purpose: include this in your module to avoids adding dependencies on\n// micro modules like 'global' and 'is-browser';\n\n/* eslint-disable no-restricted-globals */\nconst globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\n\nconst self_: {[key: string]: any} = globals.self || globals.window || globals.global || {};\nconst window_: {[key: string]: any} = globals.window || globals.self || globals.global || {};\nconst global_: {[key: string]: any} = globals.global || globals.self || globals.window || {};\nconst document_: {[key: string]: any} = globals.document || {};\n\nexport {self_ as self, window_ as window, global_ as global, document_ as document};\n\n/** true if running in the browser, false if running in Node.js */\nexport const isBrowser: boolean =\n  // @ts-ignore process.browser\n  typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\n\n/** true if running on a worker thread */\nexport const isWorker: boolean = typeof importScripts === 'function';\n\n/** true if running on a mobile device */\nexport const isMobile: boolean =\n  typeof window !== 'undefined' && typeof window.orientation !== 'undefined';\n\n// Extract node major version\nconst matches =\n  typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\n\n/** Version of Node.js if running under Node, otherwise 0 */\nexport const nodeVersion: number = (matches && parseFloat(matches[1])) || 0;\n", "// NOTE - there is a copy of this function is both in core and loader-utils\n// core does not need all the utils in loader-utils, just this one.\n\n/**\n * Returns an array of Transferrable objects that can be used with postMessage\n * https://developer.mozilla.org/en-US/docs/Web/API/Worker/postMessage\n * @param object data to be sent via postMessage\n * @param recursive - not for application use\n * @param transfers - not for application use\n * @returns a transfer list that can be passed to postMessage\n */\nexport function getTransferList(\n  object: any,\n  recursive: boolean = true,\n  transfers?: Set<any>\n): Transferable[] {\n  // Make sure that items in the transfer list is unique\n  const transfersSet = transfers || new Set();\n\n  if (!object) {\n    // ignore\n  } else if (isTransferable(object)) {\n    transfersSet.add(object);\n  } else if (isTransferable(object.buffer)) {\n    // Typed array\n    transfersSet.add(object.buffer);\n  } else if (ArrayBuffer.isView(object)) {\n    // object is a TypeArray viewing into a SharedArrayBuffer (not transferable)\n    // Do not iterate through the content in this case\n  } else if (recursive && typeof object === 'object') {\n    for (const key in object) {\n      // Avoid perf hit - only go one level deep\n      getTransferList(object[key], recursive, transfersSet);\n    }\n  }\n\n  // If transfers is defined, is internal recursive call\n  // Otherwise it's called by the user\n  return transfers === undefined ? Array.from(transfersSet) : [];\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Transferable\nfunction isTransferable(object: unknown) {\n  if (!object) {\n    return false;\n  }\n  if (object instanceof ArrayBuffer) {\n    return true;\n  }\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n  if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n    return true;\n  }\n  // @ts-ignore\n  if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Recursively drop non serializable values like functions and regexps.\n * @param object\n */\nexport function getTransferListForWriter(object: object | null): object {\n  if (object === null) {\n    return {};\n  }\n  const clone = Object.assign({}, object);\n\n  Object.keys(clone).forEach((key) => {\n    // Checking if it is an object and not a typed array.\n    if (typeof object[key] === 'object' && !ArrayBuffer.isView(object[key])) {\n      clone[key] = getTransferListForWriter(object[key]);\n    } else if (typeof clone[key] === 'function' || clone[key] instanceof RegExp) {\n      clone[key] = {};\n    } else {\n      clone[key] = object[key];\n    }\n  });\n\n  return clone;\n}\n", "import type {WorkerMessageData, WorkerMessageType, WorkerMessagePayload} from '../../types';\nimport {getTransferList} from '../worker-utils/get-transfer-list';\n\n/** Vile hack to defeat over-zealous bundlers from stripping out the require */\nfunction getParentPort() {\n  // const isNode = globalThis.process;\n  let parentPort;\n  try {\n    // prettier-ignore\n    eval('globalThis.parentPort = require(\\'worker_threads\\').parentPort'); // eslint-disable-line no-eval\n    parentPort = globalThis.parentPort;\n    // eslint-disable-next-line no-empty\n  } catch {}\n  return parentPort;\n}\n\nconst onMessageWrapperMap = new Map();\n\n/**\n * Type safe wrapper for worker code\n */\nexport default class WorkerBody {\n  /** Check that we are actually in a worker thread */\n  static inWorkerThread(): boolean {\n    return typeof self !== 'undefined' || Boolean(getParentPort());\n  }\n\n  /*\n   * (type: WorkerMessageType, payload: WorkerMessagePayload) => any\n   */\n  static set onmessage(onMessage: (type: WorkerMessageType, payload: WorkerMessagePayload) => any) {\n    function handleMessage(message) {\n      // Confusingly the message itself also has a 'type' field which is always set to 'message'\n      const parentPort = getParentPort();\n      const {type, payload} = parentPort ? message : message.data;\n      // if (!isKnownMessage(message)) {\n      //   return;\n      // }\n      onMessage(type, payload);\n    }\n\n    const parentPort = getParentPort();\n    if (parentPort) {\n      parentPort.on('message', handleMessage);\n      // if (message == 'exit') { parentPort.unref(); }\n      // eslint-disable-next-line\n      parentPort.on('exit', () => console.debug('Node worker closing'));\n    } else {\n      // eslint-disable-next-line no-restricted-globals\n      globalThis.onmessage = handleMessage;\n    }\n  }\n\n  static addEventListener(\n    onMessage: (type: WorkerMessageType, payload: WorkerMessagePayload) => any\n  ) {\n    let onMessageWrapper = onMessageWrapperMap.get(onMessage);\n\n    if (!onMessageWrapper) {\n      onMessageWrapper = (message: MessageEvent<any>) => {\n        if (!isKnownMessage(message)) {\n          return;\n        }\n\n        // Confusingly in the browser, the message itself also has a 'type' field which is always set to 'message'\n        const parentPort = getParentPort();\n        const {type, payload} = parentPort ? message : message.data;\n        onMessage(type, payload);\n      };\n    }\n\n    const parentPort = getParentPort();\n    if (parentPort) {\n      console.error('not implemented'); // eslint-disable-line\n    } else {\n      globalThis.addEventListener('message', onMessageWrapper);\n    }\n  }\n\n  static removeEventListener(\n    onMessage: (type: WorkerMessageType, payload: WorkerMessagePayload) => any\n  ) {\n    const onMessageWrapper = onMessageWrapperMap.get(onMessage);\n    onMessageWrapperMap.delete(onMessage);\n    const parentPort = getParentPort();\n    if (parentPort) {\n      console.error('not implemented'); // eslint-disable-line\n    } else {\n      globalThis.removeEventListener('message', onMessageWrapper);\n    }\n  }\n\n  /**\n   * Send a message from a worker to creating thread (main thread)\n   * @param type\n   * @param payload\n   */\n  static postMessage(type: WorkerMessageType, payload: WorkerMessagePayload): void {\n    const data: WorkerMessageData = {source: 'loaders.gl', type, payload};\n    // console.log('posting message', data);\n    const transferList = getTransferList(payload);\n\n    const parentPort = getParentPort();\n    if (parentPort) {\n      parentPort.postMessage(data, transferList);\n      // console.log('posted message', data);\n    } else {\n      // @ts-ignore\n      globalThis.postMessage(data, transferList);\n    }\n  }\n}\n\n// Filter out noise messages sent to workers\nfunction isKnownMessage(message: MessageEvent<any>) {\n  const {type, data} = message;\n  return (\n    type === 'message' &&\n    data &&\n    typeof data.source === 'string' &&\n    data.source.startsWith('loaders.gl')\n  );\n}\n", "// Fork of https://github.com/floatdrop/require-from-string/blob/master/index.js\n// Copyright (c) Vsevolod Strukchinsky <floatdrop@gmail.com> (github.com/floatdrop)\n// MIT license\n\n// this file is not visible to webpack (it is excluded in the package.json \"browser\" field).\n\nimport Module from 'module';\nimport path from 'path';\n\n// Node.js Dynamically require from file\n// Relative names are resolved relative to cwd\n// This indirect function is provided because webpack will try to bundle `module.require`.\n// this file is not visible to webpack (it is excluded in the package.json \"browser\" field).\nexport async function requireFromFile(filename: string): Promise<any> {\n  if (filename.startsWith('http')) {\n    const response = await fetch(filename);\n    const code = await response.text();\n    return requireFromString(code);\n  }\n\n  if (!filename.startsWith('/')) {\n    filename = `${process.cwd()}/${filename}`;\n  }\n  return require(filename);\n}\n\n// Dynamically require from string\n// - `code` - Required - Type: string - Module code.\n// - `filename` - Type: string - Default: '' - Optional filename.\n// - `options.appendPaths` Type: Array List of paths, that will be appended to module paths.\n// Useful, when you want to be able require modules from these paths.\n// - `options.prependPaths` Type: Array Same as appendPaths, but paths will be prepended.\nexport function requireFromString(\n  code: string,\n  filename = '',\n  options?: {\n    prependPaths?: string[];\n    appendPaths?: string[];\n  }\n): any {\n  if (typeof filename === 'object') {\n    options = filename;\n    filename = '';\n  }\n\n  if (typeof code !== 'string') {\n    throw new Error(`code must be a string, not ${typeof code}`);\n  }\n\n  // @ts-ignore\n  const paths = Module._nodeModulePaths(path.dirname(filename));\n\n  const parent = module.parent;\n  // @ts-ignore\n  const newModule = new Module(filename, parent);\n  newModule.filename = filename;\n  newModule.paths = ([] as string[])\n    .concat(options?.prependPaths || [])\n    .concat(paths)\n    .concat(options?.appendPaths || []);\n  // @ts-ignore\n  newModule._compile(code, filename);\n\n  if (parent && parent.children) {\n    parent.children.splice(parent.children.indexOf(newModule), 1);\n  }\n\n  return newModule.exports;\n}\n", "/* global importScripts */\nimport {global, isBrowser, isWorker} from '../env-utils/globals';\nimport * as node from '../node/require-utils.node';\nimport {assert} from '../env-utils/assert';\nimport {VERSION as __VERSION__} from '../env-utils/version';\n\n// TODO - unpkg.com doesn't seem to have a `latest` specifier for alpha releases...\nconst LATEST = 'latest';\nconst VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : LATEST;\n\nconst loadLibraryPromises: Record<string, Promise<any>> = {}; // promises\n\n/**\n * Dynamically loads a library (\"module\")\n *\n * - wasm library: Array buffer is returned\n * - js library: Parse JS is returned\n *\n * Method depends on environment\n * - browser - script element is created and installed on document\n * - worker - eval is called on global context\n * - node - file is required\n *\n * @param libraryUrl\n * @param moduleName\n * @param options\n */\nexport async function loadLibrary(\n  libraryUrl: string,\n  moduleName: string | null = null,\n  options: object = {}\n): Promise<any> {\n  if (moduleName) {\n    libraryUrl = getLibraryUrl(libraryUrl, moduleName, options);\n  }\n\n  // Ensure libraries are only loaded once\n\n  loadLibraryPromises[libraryUrl] =\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    loadLibraryPromises[libraryUrl] || loadLibraryFromFile(libraryUrl);\n  return await loadLibraryPromises[libraryUrl];\n}\n\n// TODO - sort out how to resolve paths for main/worker and dev/prod\nexport function getLibraryUrl(library: string, moduleName?: string, options?: any): string {\n  // Check if already a URL\n  if (library.startsWith('http')) {\n    return library;\n  }\n\n  // Allow application to import and supply libraries through `options.modules`\n  const modules = options.modules || {};\n  if (modules[library]) {\n    return modules[library];\n  }\n\n  // Load from local files, not from CDN scripts in Node.js\n  // TODO - needs to locate the modules directory when installed!\n  if (!isBrowser) {\n    return `modules/${moduleName}/dist/libs/${library}`;\n  }\n\n  // In browser, load from external scripts\n  if (options.CDN) {\n    assert(options.CDN.startsWith('http'));\n    return `${options.CDN}/${moduleName}@${VERSION}/dist/libs/${library}`;\n  }\n\n  // TODO - loading inside workers requires paths relative to worker script location...\n  if (isWorker) {\n    return `../src/libs/${library}`;\n  }\n\n  return `modules/${moduleName}/src/libs/${library}`;\n}\n\nasync function loadLibraryFromFile(libraryUrl: string): Promise<any> {\n  if (libraryUrl.endsWith('wasm')) {\n    const response = await fetch(libraryUrl);\n    return await response.arrayBuffer();\n  }\n\n  if (!isBrowser) {\n    try {\n      return node && node.requireFromFile && (await node.requireFromFile(libraryUrl));\n    } catch {\n      return null;\n    }\n  }\n  if (isWorker) {\n    return importScripts(libraryUrl);\n  }\n  // TODO - fix - should be more secure than string parsing since observes CORS\n  // if (isBrowser) {\n  //   return await loadScriptFromFile(libraryUrl);\n  // }\n\n  const response = await fetch(libraryUrl);\n  const scriptSource = await response.text();\n  return loadLibraryFromString(scriptSource, libraryUrl);\n}\n\n/*\nasync function loadScriptFromFile(libraryUrl) {\n  const script = document.createElement('script');\n  script.src = libraryUrl;\n  return await new Promise((resolve, reject) => {\n    script.onload = data => {\n      resolve(data);\n    };\n    script.onerror = reject;\n  });\n}\n*/\n\n// TODO - Needs security audit...\n//  - Raw eval call\n//  - Potentially bypasses CORS\n// Upside is that this separates fetching and parsing\n// we could create a`LibraryLoader` or`ModuleLoader`\nfunction loadLibraryFromString(scriptSource: string, id: string): null | any {\n  if (!isBrowser) {\n    return node.requireFromString && node.requireFromString(scriptSource, id);\n  }\n\n  if (isWorker) {\n    // Use lvalue trick to make eval run in global scope\n    eval.call(global, scriptSource); // eslint-disable-line no-eval\n    // https://stackoverflow.com/questions/9107240/1-evalthis-vs-evalthis-in-javascript\n    // http://perfectionkills.com/global-eval-what-are-the-options/\n    return null;\n  }\n\n  const script = document.createElement('script');\n  script.id = id;\n  // most browsers like a separate text node but some throw an error. The second method covers those.\n  try {\n    script.appendChild(document.createTextNode(scriptSource));\n  } catch (e) {\n    script.text = scriptSource;\n  }\n  document.body.appendChild(script);\n  return null;\n}\n\n// TODO - technique for module injection into worker, from THREE.DracoLoader...\n/*\nfunction combineWorkerWithLibrary(worker, jsContent) {\n  var fn = wWorker.toString();\n  var body = [\n    '// injected',\n    jsContent,\n    '',\n    '// worker',\n    fn.substring(fn.indexOf('{') + 1, fn.lastIndexOf('}'))\n  ].join('\\n');\n  this.workerSourceURL = URL.createObjectURL(new Blob([body]));\n}\n*/\n", "/* eslint-disable dot-notation */\nimport {DOMParser} from '@xmldom/xmldom';\nimport {isBrowser, global} from './utils/globals';\n\nimport {TextDecoder, TextEncoder} from './lib/encoding';\nimport {allSettled} from './promise/all-settled';\n\n// Node specific\nimport * as base64 from './node/buffer/btoa.node';\n\nimport HeadersNode from './node/fetch/headers.node';\nimport ResponseNode from './node/fetch/response.node';\nimport fetchNode from './node/fetch/fetch.node';\n\nimport {encodeImageNode} from './node/images/encode-image.node';\nimport {parseImageNode} from './node/images/parse-image.node';\n\nexport {ReadableStreamPolyfill} from './node/file/readable-stream';\nexport {BlobPolyfill} from './node/file/blob';\nexport {FileReaderPolyfill} from './node/file/file-reader';\nexport {FilePolyfill} from './node/file/file';\nexport {installFilePolyfills} from './node/file/install-file-polyfills';\n\n// POLYFILLS: TextEncoder, TextDecoder\n// - Recent Node versions have these classes but virtually no encodings unless special build.\n// - Browser: Edge, IE11 do not have these\n\nconst installTextEncoder = !isBrowser || !('TextEncoder' in global);\nif (installTextEncoder) {\n  global['TextEncoder'] = TextEncoder;\n}\n\nconst installTextDecoder = !isBrowser || !('TextDecoder' in global);\nif (installTextDecoder) {\n  global['TextDecoder'] = TextDecoder;\n}\n\n// POLYFILLS: btoa, atob\n// - Node: Yes\n// - Browser: No\n\nif (!isBrowser && !('atob' in global) && base64.atob) {\n  global['atob'] = base64.atob;\n}\nif (!isBrowser && !('btoa' in global) && base64.btoa) {\n  global['btoa'] = base64.btoa;\n}\n\n// POLYFILL: fetch\n// - Node: Yes\n// - Browser: No. For This polyfill is node only, IE11 etc, install external polyfill\n\nif (!isBrowser && !('Headers' in global) && HeadersNode) {\n  global['Headers'] = HeadersNode;\n}\n\nif (!isBrowser && !('Response' in global) && ResponseNode) {\n  global['Response'] = ResponseNode;\n}\n\nif (!isBrowser && !('fetch' in global) && fetchNode) {\n  global['fetch'] = fetchNode;\n}\n\n// POLYFILL: DOMParser\n// - Node: Yes\n// - Browser: No\n\nif (!isBrowser && !('DOMParser' in global) && DOMParser) {\n  global['DOMParser'] = DOMParser;\n}\n\n// NODE IMAGE FUNCTIONS:\n// These are not official polyfills but used by the @loaders.gl/images module if installed\n// TODO - is there an appropriate Image API we could polyfill using an adapter?\n\nif (!isBrowser && !('_encodeImageNode' in global) && encodeImageNode) {\n  global['_encodeImageNode'] = encodeImageNode;\n}\n\nif (!isBrowser && !('_parseImageNode' in global) && parseImageNode) {\n  global['_parseImageNode'] = parseImageNode;\n}\n\nif (!('allSettled' in Promise)) {\n  // @ts-ignore\n  Promise.allSettled = allSettled;\n}\n", "// Copyright (c) 2015 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n// Purpose: include this in your module to avoids adding dependencies on\n// micro modules like 'global' and 'is-browser';\n\n/* eslint-disable no-restricted-globals */\nconst isBrowser: boolean =\n  // @ts-ignore process.browser\n  typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\n\nconst globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global\n};\n\nconst global_: object = (globals.global || globals.self || globals.window) as object;\n\nexport {isBrowser, global_ as global};\n", "/* eslint-disable */\n// Copied from https://github.com/inexorabletash/text-encoding/blob/b4e5bc26e26e51f56e3daa9f13138c79f49d3c34/lib/encoding-indexes.js\n// License: Public domain https://github.com/inexorabletash/text-encoding/blob/b4e5bc26e26e51f56e3daa9f13138c79f49d3c34/LICENSE.md\n\n// prettier-ignore\nexport default {\n  \"ibm866\":[1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,9617,9618,9619,9474,9508,9569,9570,9558,9557,9571,9553,9559,9565,9564,9563,9488,9492,9524,9516,9500,9472,9532,9566,9567,9562,9556,9577,9574,9568,9552,9580,9575,9576,9572,9573,9561,9560,9554,9555,9579,9578,9496,9484,9608,9604,9612,9616,9600,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1025,1105,1028,1108,1031,1111,1038,1118,176,8729,183,8730,8470,164,9632,160],\n  \"iso-8859-2\":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,260,728,321,164,317,346,167,168,352,350,356,377,173,381,379,176,261,731,322,180,318,347,711,184,353,351,357,378,733,382,380,340,193,194,258,196,313,262,199,268,201,280,203,282,205,206,270,272,323,327,211,212,336,214,215,344,366,218,368,220,221,354,223,341,225,226,259,228,314,263,231,269,233,281,235,283,237,238,271,273,324,328,243,244,337,246,247,345,367,250,369,252,253,355,729],\n  \"iso-8859-3\":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,294,728,163,164,null,292,167,168,304,350,286,308,173,null,379,176,295,178,179,180,181,293,183,184,305,351,287,309,189,null,380,192,193,194,null,196,266,264,199,200,201,202,203,204,205,206,207,null,209,210,211,212,288,214,215,284,217,218,219,220,364,348,223,224,225,226,null,228,267,265,231,232,233,234,235,236,237,238,239,null,241,242,243,244,289,246,247,285,249,250,251,252,365,349,729],\n  \"iso-8859-4\":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,260,312,342,164,296,315,167,168,352,274,290,358,173,381,175,176,261,731,343,180,297,316,711,184,353,275,291,359,330,382,331,256,193,194,195,196,197,198,302,268,201,280,203,278,205,206,298,272,325,332,310,212,213,214,215,216,370,218,219,220,360,362,223,257,225,226,227,228,229,230,303,269,233,281,235,279,237,238,299,273,326,333,311,244,245,246,247,248,371,250,251,252,361,363,729],\n  \"iso-8859-5\":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,173,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,8470,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,167,1118,1119],\n  \"iso-8859-6\":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,null,null,null,164,null,null,null,null,null,null,null,1548,173,null,null,null,null,null,null,null,null,null,null,null,null,null,1563,null,null,null,1567,null,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,null,null,null,null,null,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1611,1612,1613,1614,1615,1616,1617,1618,null,null,null,null,null,null,null,null,null,null,null,null,null],\n  \"iso-8859-7\":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,8216,8217,163,8364,8367,166,167,168,169,890,171,172,173,null,8213,176,177,178,179,900,901,902,183,904,905,906,187,908,189,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,null,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,null],\n  \"iso-8859-8\":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,null,162,163,164,165,166,167,168,169,215,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,247,187,188,189,190,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,8215,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,null,null,8206,8207,null],\n  \"iso-8859-10\":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,260,274,290,298,296,310,167,315,272,352,358,381,173,362,330,176,261,275,291,299,297,311,183,316,273,353,359,382,8213,363,331,256,193,194,195,196,197,198,302,268,201,280,203,278,205,206,207,208,325,332,211,212,213,214,360,216,370,218,219,220,221,222,223,257,225,226,227,228,229,230,303,269,233,281,235,279,237,238,239,240,326,333,243,244,245,246,361,248,371,250,251,252,253,254,312],\n  \"iso-8859-13\":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,8221,162,163,164,8222,166,167,216,169,342,171,172,173,174,198,176,177,178,179,8220,181,182,183,248,185,343,187,188,189,190,230,260,302,256,262,196,197,280,274,268,201,377,278,290,310,298,315,352,323,325,211,332,213,214,215,370,321,346,362,220,379,381,223,261,303,257,263,228,229,281,275,269,233,378,279,291,311,299,316,353,324,326,243,333,245,246,247,371,322,347,363,252,380,382,8217],\n  \"iso-8859-14\":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,7682,7683,163,266,267,7690,167,7808,169,7810,7691,7922,173,174,376,7710,7711,288,289,7744,7745,182,7766,7809,7767,7811,7776,7923,7812,7813,7777,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,372,209,210,211,212,213,214,7786,216,217,218,219,220,221,374,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,373,241,242,243,244,245,246,7787,248,249,250,251,252,253,375,255],\n  \"iso-8859-15\":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,8364,165,352,167,353,169,170,171,172,173,174,175,176,177,178,179,381,181,182,183,382,185,186,187,338,339,376,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255],\n  \"iso-8859-16\":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,260,261,321,8364,8222,352,167,353,169,536,171,377,173,378,379,176,177,268,322,381,8221,182,183,382,269,537,187,338,339,376,380,192,193,194,258,196,262,198,199,200,201,202,203,204,205,206,207,272,323,210,211,212,336,214,346,368,217,218,219,220,280,538,223,224,225,226,259,228,263,230,231,232,233,234,235,236,237,238,239,273,324,242,243,244,337,246,347,369,249,250,251,252,281,539,255],\n  \"koi8-r\":[9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9600,9604,9608,9612,9616,9617,9618,9619,8992,9632,8729,8730,8776,8804,8805,160,8993,176,178,183,247,9552,9553,9554,1105,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,1025,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,169,1102,1072,1073,1094,1076,1077,1092,1075,1093,1080,1081,1082,1083,1084,1085,1086,1087,1103,1088,1089,1090,1091,1078,1074,1100,1099,1079,1096,1101,1097,1095,1098,1070,1040,1041,1062,1044,1045,1060,1043,1061,1048,1049,1050,1051,1052,1053,1054,1055,1071,1056,1057,1058,1059,1046,1042,1068,1067,1047,1064,1069,1065,1063,1066],\n  \"koi8-u\":[9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9600,9604,9608,9612,9616,9617,9618,9619,8992,9632,8729,8730,8776,8804,8805,160,8993,176,178,183,247,9552,9553,9554,1105,1108,9556,1110,1111,9559,9560,9561,9562,9563,1169,1118,9566,9567,9568,9569,1025,1028,9571,1030,1031,9574,9575,9576,9577,9578,1168,1038,169,1102,1072,1073,1094,1076,1077,1092,1075,1093,1080,1081,1082,1083,1084,1085,1086,1087,1103,1088,1089,1090,1091,1078,1074,1100,1099,1079,1096,1101,1097,1095,1098,1070,1040,1041,1062,1044,1045,1060,1043,1061,1048,1049,1050,1051,1052,1053,1054,1055,1071,1056,1057,1058,1059,1046,1042,1068,1067,1047,1064,1069,1065,1063,1066],\n  \"macintosh\":[196,197,199,201,209,214,220,225,224,226,228,227,229,231,233,232,234,235,237,236,238,239,241,243,242,244,246,245,250,249,251,252,8224,176,162,163,167,8226,182,223,174,169,8482,180,168,8800,198,216,8734,177,8804,8805,165,181,8706,8721,8719,960,8747,170,186,937,230,248,191,161,172,8730,402,8776,8710,171,187,8230,160,192,195,213,338,339,8211,8212,8220,8221,8216,8217,247,9674,255,376,8260,8364,8249,8250,64257,64258,8225,183,8218,8222,8240,194,202,193,203,200,205,206,207,204,211,212,63743,210,218,219,217,305,710,732,175,728,729,730,184,733,731,711],\n  \"windows-874\":[8364,129,130,131,132,8230,134,135,136,137,138,139,140,141,142,143,144,8216,8217,8220,8221,8226,8211,8212,152,153,154,155,156,157,158,159,160,3585,3586,3587,3588,3589,3590,3591,3592,3593,3594,3595,3596,3597,3598,3599,3600,3601,3602,3603,3604,3605,3606,3607,3608,3609,3610,3611,3612,3613,3614,3615,3616,3617,3618,3619,3620,3621,3622,3623,3624,3625,3626,3627,3628,3629,3630,3631,3632,3633,3634,3635,3636,3637,3638,3639,3640,3641,3642,null,null,null,null,3647,3648,3649,3650,3651,3652,3653,3654,3655,3656,3657,3658,3659,3660,3661,3662,3663,3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3674,3675,null,null,null,null],\n  \"windows-1250\":[8364,129,8218,131,8222,8230,8224,8225,136,8240,352,8249,346,356,381,377,144,8216,8217,8220,8221,8226,8211,8212,152,8482,353,8250,347,357,382,378,160,711,728,321,164,260,166,167,168,169,350,171,172,173,174,379,176,177,731,322,180,181,182,183,184,261,351,187,317,733,318,380,340,193,194,258,196,313,262,199,268,201,280,203,282,205,206,270,272,323,327,211,212,336,214,215,344,366,218,368,220,221,354,223,341,225,226,259,228,314,263,231,269,233,281,235,283,237,238,271,273,324,328,243,244,337,246,247,345,367,250,369,252,253,355,729],\n  \"windows-1251\":[1026,1027,8218,1107,8222,8230,8224,8225,8364,8240,1033,8249,1034,1036,1035,1039,1106,8216,8217,8220,8221,8226,8211,8212,152,8482,1113,8250,1114,1116,1115,1119,160,1038,1118,1032,164,1168,166,167,1025,169,1028,171,172,173,174,1031,176,177,1030,1110,1169,181,182,183,1105,8470,1108,187,1112,1029,1109,1111,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103],\n  \"windows-1252\":[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255],\n  \"windows-1253\":[8364,129,8218,402,8222,8230,8224,8225,136,8240,138,8249,140,141,142,143,144,8216,8217,8220,8221,8226,8211,8212,152,8482,154,8250,156,157,158,159,160,901,902,163,164,165,166,167,168,169,null,171,172,173,174,8213,176,177,178,179,900,181,182,183,904,905,906,187,908,189,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,null,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,null],\n  \"windows-1254\":[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,142,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,158,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,286,209,210,211,212,213,214,215,216,217,218,219,220,304,350,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,287,241,242,243,244,245,246,247,248,249,250,251,252,305,351,255],\n  \"windows-1255\":[8364,129,8218,402,8222,8230,8224,8225,710,8240,138,8249,140,141,142,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,154,8250,156,157,158,159,160,161,162,163,8362,165,166,167,168,169,215,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,247,187,188,189,190,191,1456,1457,1458,1459,1460,1461,1462,1463,1464,1465,1466,1467,1468,1469,1470,1471,1472,1473,1474,1475,1520,1521,1522,1523,1524,null,null,null,null,null,null,null,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,null,null,8206,8207,null],\n  \"windows-1256\":[8364,1662,8218,402,8222,8230,8224,8225,710,8240,1657,8249,338,1670,1688,1672,1711,8216,8217,8220,8221,8226,8211,8212,1705,8482,1681,8250,339,8204,8205,1722,160,1548,162,163,164,165,166,167,168,169,1726,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,1563,187,188,189,190,1567,1729,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,215,1591,1592,1593,1594,1600,1601,1602,1603,224,1604,226,1605,1606,1607,1608,231,232,233,234,235,1609,1610,238,239,1611,1612,1613,1614,244,1615,1616,247,1617,249,1618,251,252,8206,8207,1746],\n  \"windows-1257\":[8364,129,8218,131,8222,8230,8224,8225,136,8240,138,8249,140,168,711,184,144,8216,8217,8220,8221,8226,8211,8212,152,8482,154,8250,156,175,731,159,160,null,162,163,164,null,166,167,216,169,342,171,172,173,174,198,176,177,178,179,180,181,182,183,248,185,343,187,188,189,190,230,260,302,256,262,196,197,280,274,268,201,377,278,290,310,298,315,352,323,325,211,332,213,214,215,370,321,346,362,220,379,381,223,261,303,257,263,228,229,281,275,269,233,378,279,291,311,299,316,353,324,326,243,333,245,246,247,371,322,347,363,252,380,382,729],\n  \"windows-1258\":[8364,129,8218,402,8222,8230,8224,8225,710,8240,138,8249,338,141,142,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,154,8250,339,157,158,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,258,196,197,198,199,200,201,202,203,768,205,206,207,272,209,777,211,212,416,214,215,216,217,218,219,220,431,771,223,224,225,226,259,228,229,230,231,232,233,234,235,769,237,238,239,273,241,803,243,244,417,246,247,248,249,250,251,252,432,8363,255],\n  \"x-mac-cyrillic\":[1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,8224,176,1168,163,167,8226,182,1030,174,169,8482,1026,1106,8800,1027,1107,8734,177,8804,8805,1110,181,1169,1032,1028,1108,1031,1111,1033,1113,1034,1114,1112,1029,172,8730,402,8776,8710,171,187,8230,160,1035,1115,1036,1116,1109,8211,8212,8220,8221,8216,8217,247,8222,1038,1118,1039,1119,8470,1025,1105,1103,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,8364]\n};\n", "// @ts-nocheck\n/* eslint-disable */\n\n// Copied from https://github.com/inexorabletash/text-encoding/blob/b4e5bc26e26e51f56e3daa9f13138c79f49d3c34/lib/encoding.js\n// This is free and unencumbered software released into the public domain.\n// See LICENSE.md for more information.\n\nimport indexes from './encoding-indexes';\n// Note: Aaian character indices add half a megabyte to bundle. Ignore, since we really only want the built-in UTF8...\n// import indexes from './encoding-indexes-asian.js';\nglobal['encoding-indexes'] = indexes || {};\n\n//\n// Utilities\n//\n\n/**\n * @param {number} a The number to test.\n * @param {number} min The minimum value in the range, inclusive.\n * @param {number} max The maximum value in the range, inclusive.\n * @return {boolean} True if a >= min and a <= max.\n */\nfunction inRange(a, min, max) {\n  return min <= a && a <= max;\n}\n\n/**\n * @param {!Array.<*>} array The array to check.\n * @param {*} item The item to look for in the array.\n * @return {boolean} True if the item appears in the array.\n */\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}\n\nvar floor = Math.floor;\n\n/**\n * @param {*} o\n * @return {Object}\n */\nfunction ToDictionary(o) {\n  if (o === undefined) return {};\n  if (o === Object(o)) return o;\n  throw TypeError('Could not convert argument to dictionary');\n}\n\n/**\n * @param {string} string Input string of UTF-16 code units.\n * @return {!Array.<number>} Code points.\n */\nfunction stringToCodePoints(string) {\n  // https://heycam.github.io/webidl/#dfn-obtain-unicode\n\n  // 1. Let S be the DOMString value.\n  var s = String(string);\n\n  // 2. Let n be the length of S.\n  var n = s.length;\n\n  // 3. Initialize i to 0.\n  var i = 0;\n\n  // 4. Initialize U to be an empty sequence of Unicode characters.\n  var u = [];\n\n  // 5. While i < n:\n  while (i < n) {\n    // 1. Let c be the code unit in S at index i.\n    var c = s.charCodeAt(i);\n\n    // 2. Depending on the value of c:\n\n    // c < 0xD800 or c > 0xDFFF\n    if (c < 0xd800 || c > 0xdfff) {\n      // Append to U the Unicode character with code point c.\n      u.push(c);\n    }\n\n    // 0xDC00 \u2264 c \u2264 0xDFFF\n    else if (0xdc00 <= c && c <= 0xdfff) {\n      // Append to U a U+FFFD REPLACEMENT CHARACTER.\n      u.push(0xfffd);\n    }\n\n    // 0xD800 \u2264 c \u2264 0xDBFF\n    else if (0xd800 <= c && c <= 0xdbff) {\n      // 1. If i = n\u22121, then append to U a U+FFFD REPLACEMENT\n      // CHARACTER.\n      if (i === n - 1) {\n        u.push(0xfffd);\n      }\n      // 2. Otherwise, i < n\u22121:\n      else {\n        // 1. Let d be the code unit in S at index i+1.\n        var d = s.charCodeAt(i + 1);\n\n        // 2. If 0xDC00 \u2264 d \u2264 0xDFFF, then:\n        if (0xdc00 <= d && d <= 0xdfff) {\n          // 1. Let a be c & 0x3FF.\n          var a = c & 0x3ff;\n\n          // 2. Let b be d & 0x3FF.\n          var b = d & 0x3ff;\n\n          // 3. Append to U the Unicode character with code point\n          // 2^16+2^10*a+b.\n          u.push(0x10000 + (a << 10) + b);\n\n          // 4. Set i to i+1.\n          i += 1;\n        }\n\n        // 3. Otherwise, d < 0xDC00 or d > 0xDFFF. Append to U a\n        // U+FFFD REPLACEMENT CHARACTER.\n        else {\n          u.push(0xfffd);\n        }\n      }\n    }\n\n    // 3. Set i to i+1.\n    i += 1;\n  }\n\n  // 6. Return U.\n  return u;\n}\n\n/**\n * @param {!Array.<number>} code_points Array of code points.\n * @return {string} string String of UTF-16 code units.\n */\nfunction codePointsToString(code_points) {\n  var s = '';\n  for (var i = 0; i < code_points.length; ++i) {\n    var cp = code_points[i];\n    if (cp <= 0xffff) {\n      s += String.fromCharCode(cp);\n    } else {\n      cp -= 0x10000;\n      s += String.fromCharCode((cp >> 10) + 0xd800, (cp & 0x3ff) + 0xdc00);\n    }\n  }\n  return s;\n}\n\n//\n// Implementation of Encoding specification\n// https://encoding.spec.whatwg.org/\n//\n\n//\n// 4. Terminology\n//\n\n/**\n * An ASCII byte is a byte in the range 0x00 to 0x7F, inclusive.\n * @param {number} a The number to test.\n * @return {boolean} True if a is in the range 0x00 to 0x7F, inclusive.\n */\nfunction isASCIIByte(a) {\n  return 0x00 <= a && a <= 0x7f;\n}\n\n/**\n * An ASCII code point is a code point in the range U+0000 to\n * U+007F, inclusive.\n */\nvar isASCIICodePoint = isASCIIByte;\n\n/**\n * End-of-stream is a special token that signifies no more tokens\n * are in the stream.\n * @const\n */ var end_of_stream = -1;\n\n/**\n * A stream represents an ordered sequence of tokens.\n *\n * @constructor\n * @param {!(Array.<number>|Uint8Array)} tokens Array of tokens that provide\n * the stream.\n */\nfunction Stream(tokens) {\n  /** @type {!Array.<number>} */\n  this.tokens = [].slice.call(tokens);\n  // Reversed as push/pop is more efficient than shift/unshift.\n  this.tokens.reverse();\n}\n\nStream.prototype = {\n  /**\n   * @return {boolean} True if end-of-stream has been hit.\n   */\n  endOfStream: function () {\n    return !this.tokens.length;\n  },\n\n  /**\n   * When a token is read from a stream, the first token in the\n   * stream must be returned and subsequently removed, and\n   * end-of-stream must be returned otherwise.\n   *\n   * @return {number} Get the next token from the stream, or\n   * end_of_stream.\n   */\n  read: function () {\n    if (!this.tokens.length) return end_of_stream;\n    return this.tokens.pop();\n  },\n\n  /**\n   * When one or more tokens are prepended to a stream, those tokens\n   * must be inserted, in given order, before the first token in the\n   * stream.\n   *\n   * @param {(number|!Array.<number>)} token The token(s) to prepend to the\n   * stream.\n   */\n  prepend: function (token) {\n    if (Array.isArray(token)) {\n      var tokens = /**@type {!Array.<number>}*/ token;\n      while (tokens.length) this.tokens.push(tokens.pop());\n    } else {\n      this.tokens.push(token);\n    }\n  },\n\n  /**\n   * When one or more tokens are pushed to a stream, those tokens\n   * must be inserted, in given order, after the last token in the\n   * stream.\n   *\n   * @param {(number|!Array.<number>)} token The tokens(s) to push to the\n   * stream.\n   */\n  push: function (token) {\n    if (Array.isArray(token)) {\n      var tokens = /**@type {!Array.<number>}*/ token;\n      while (tokens.length) this.tokens.unshift(tokens.shift());\n    } else {\n      this.tokens.unshift(token);\n    }\n  }\n};\n\n//\n// 5. Encodings\n//\n\n// 5.1 Encoders and decoders\n\n/** @const */\nvar finished = -1;\n\n/**\n * @param {boolean} fatal If true, decoding errors raise an exception.\n * @param {number=} opt_code_point Override the standard fallback code point.\n * @return {number} The code point to insert on a decoding error.\n */\nfunction decoderError(fatal, opt_code_point) {\n  if (fatal) throw TypeError('Decoder error');\n  return opt_code_point || 0xfffd;\n}\n\n/**\n * @param {number} code_point The code point that could not be encoded.\n * @return {number} Always throws, no value is actually returned.\n */\nfunction encoderError(code_point) {\n  throw TypeError('The code point ' + code_point + ' could not be encoded.');\n}\n\n/** @interface */\nfunction Decoder() {}\nDecoder.prototype = {\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point, or |finished|.\n   */\n  handler: function (stream, bite) {}\n};\n\n/** @interface */\nfunction Encoder() {}\nEncoder.prototype = {\n  /**\n   * @param {Stream} stream The stream of code points being encoded.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit, or |finished|.\n   */\n  handler: function (stream, code_point) {}\n};\n\n// 5.2 Names and labels\n\n// TODO: Define @typedef for Encoding: {name:string,labels:Array.<string>}\n// https://github.com/google/closure-compiler/issues/247\n\n/**\n * @param {string} label The encoding label.\n * @return {?{name:string,labels:Array.<string>}}\n */\nfunction getEncoding(label) {\n  // 1. Remove any leading and trailing ASCII whitespace from label.\n  label = String(label).trim().toLowerCase();\n\n  // 2. If label is an ASCII case-insensitive match for any of the\n  // labels listed in the table below, return the corresponding\n  // encoding, and failure otherwise.\n  if (Object.prototype.hasOwnProperty.call(label_to_encoding, label)) {\n    return label_to_encoding[label];\n  }\n  return null;\n}\n\n/**\n * Encodings table: https://encoding.spec.whatwg.org/encodings.json\n * @const\n * @type {!Array.<{\n *          heading: string,\n *          encodings: Array.<{name:string,labels:Array.<string>}>\n *        }>}\n */\nvar encodings = [\n  {\n    encodings: [\n      {\n        labels: ['unicode-1-1-utf-8', 'utf-8', 'utf8'],\n        name: 'UTF-8'\n      }\n    ],\n    heading: 'The Encoding'\n  },\n  {\n    encodings: [\n      {\n        labels: ['866', 'cp866', 'csibm866', 'ibm866'],\n        name: 'IBM866'\n      },\n      {\n        labels: [\n          'csisolatin2',\n          'iso-8859-2',\n          'iso-ir-101',\n          'iso8859-2',\n          'iso88592',\n          'iso_8859-2',\n          'iso_8859-2:1987',\n          'l2',\n          'latin2'\n        ],\n        name: 'ISO-8859-2'\n      },\n      {\n        labels: [\n          'csisolatin3',\n          'iso-8859-3',\n          'iso-ir-109',\n          'iso8859-3',\n          'iso88593',\n          'iso_8859-3',\n          'iso_8859-3:1988',\n          'l3',\n          'latin3'\n        ],\n        name: 'ISO-8859-3'\n      },\n      {\n        labels: [\n          'csisolatin4',\n          'iso-8859-4',\n          'iso-ir-110',\n          'iso8859-4',\n          'iso88594',\n          'iso_8859-4',\n          'iso_8859-4:1988',\n          'l4',\n          'latin4'\n        ],\n        name: 'ISO-8859-4'\n      },\n      {\n        labels: [\n          'csisolatincyrillic',\n          'cyrillic',\n          'iso-8859-5',\n          'iso-ir-144',\n          'iso8859-5',\n          'iso88595',\n          'iso_8859-5',\n          'iso_8859-5:1988'\n        ],\n        name: 'ISO-8859-5'\n      },\n      {\n        labels: [\n          'arabic',\n          'asmo-708',\n          'csiso88596e',\n          'csiso88596i',\n          'csisolatinarabic',\n          'ecma-114',\n          'iso-8859-6',\n          'iso-8859-6-e',\n          'iso-8859-6-i',\n          'iso-ir-127',\n          'iso8859-6',\n          'iso88596',\n          'iso_8859-6',\n          'iso_8859-6:1987'\n        ],\n        name: 'ISO-8859-6'\n      },\n      {\n        labels: [\n          'csisolatingreek',\n          'ecma-118',\n          'elot_928',\n          'greek',\n          'greek8',\n          'iso-8859-7',\n          'iso-ir-126',\n          'iso8859-7',\n          'iso88597',\n          'iso_8859-7',\n          'iso_8859-7:1987',\n          'sun_eu_greek'\n        ],\n        name: 'ISO-8859-7'\n      },\n      {\n        labels: [\n          'csiso88598e',\n          'csisolatinhebrew',\n          'hebrew',\n          'iso-8859-8',\n          'iso-8859-8-e',\n          'iso-ir-138',\n          'iso8859-8',\n          'iso88598',\n          'iso_8859-8',\n          'iso_8859-8:1988',\n          'visual'\n        ],\n        name: 'ISO-8859-8'\n      },\n      {\n        labels: ['csiso88598i', 'iso-8859-8-i', 'logical'],\n        name: 'ISO-8859-8-I'\n      },\n      {\n        labels: [\n          'csisolatin6',\n          'iso-8859-10',\n          'iso-ir-157',\n          'iso8859-10',\n          'iso885910',\n          'l6',\n          'latin6'\n        ],\n        name: 'ISO-8859-10'\n      },\n      {\n        labels: ['iso-8859-13', 'iso8859-13', 'iso885913'],\n        name: 'ISO-8859-13'\n      },\n      {\n        labels: ['iso-8859-14', 'iso8859-14', 'iso885914'],\n        name: 'ISO-8859-14'\n      },\n      {\n        labels: ['csisolatin9', 'iso-8859-15', 'iso8859-15', 'iso885915', 'iso_8859-15', 'l9'],\n        name: 'ISO-8859-15'\n      },\n      {\n        labels: ['iso-8859-16'],\n        name: 'ISO-8859-16'\n      },\n      {\n        labels: ['cskoi8r', 'koi', 'koi8', 'koi8-r', 'koi8_r'],\n        name: 'KOI8-R'\n      },\n      {\n        labels: ['koi8-ru', 'koi8-u'],\n        name: 'KOI8-U'\n      },\n      {\n        labels: ['csmacintosh', 'mac', 'macintosh', 'x-mac-roman'],\n        name: 'macintosh'\n      },\n      {\n        labels: ['dos-874', 'iso-8859-11', 'iso8859-11', 'iso885911', 'tis-620', 'windows-874'],\n        name: 'windows-874'\n      },\n      {\n        labels: ['cp1250', 'windows-1250', 'x-cp1250'],\n        name: 'windows-1250'\n      },\n      {\n        labels: ['cp1251', 'windows-1251', 'x-cp1251'],\n        name: 'windows-1251'\n      },\n      {\n        labels: [\n          'ansi_x3.4-1968',\n          'ascii',\n          'cp1252',\n          'cp819',\n          'csisolatin1',\n          'ibm819',\n          'iso-8859-1',\n          'iso-ir-100',\n          'iso8859-1',\n          'iso88591',\n          'iso_8859-1',\n          'iso_8859-1:1987',\n          'l1',\n          'latin1',\n          'us-ascii',\n          'windows-1252',\n          'x-cp1252'\n        ],\n        name: 'windows-1252'\n      },\n      {\n        labels: ['cp1253', 'windows-1253', 'x-cp1253'],\n        name: 'windows-1253'\n      },\n      {\n        labels: [\n          'cp1254',\n          'csisolatin5',\n          'iso-8859-9',\n          'iso-ir-148',\n          'iso8859-9',\n          'iso88599',\n          'iso_8859-9',\n          'iso_8859-9:1989',\n          'l5',\n          'latin5',\n          'windows-1254',\n          'x-cp1254'\n        ],\n        name: 'windows-1254'\n      },\n      {\n        labels: ['cp1255', 'windows-1255', 'x-cp1255'],\n        name: 'windows-1255'\n      },\n      {\n        labels: ['cp1256', 'windows-1256', 'x-cp1256'],\n        name: 'windows-1256'\n      },\n      {\n        labels: ['cp1257', 'windows-1257', 'x-cp1257'],\n        name: 'windows-1257'\n      },\n      {\n        labels: ['cp1258', 'windows-1258', 'x-cp1258'],\n        name: 'windows-1258'\n      },\n      {\n        labels: ['x-mac-cyrillic', 'x-mac-ukrainian'],\n        name: 'x-mac-cyrillic'\n      }\n    ],\n    heading: 'Legacy single-byte encodings'\n  },\n  {\n    encodings: [\n      {\n        labels: [\n          'chinese',\n          'csgb2312',\n          'csiso58gb231280',\n          'gb2312',\n          'gb_2312',\n          'gb_2312-80',\n          'gbk',\n          'iso-ir-58',\n          'x-gbk'\n        ],\n        name: 'GBK'\n      },\n      {\n        labels: ['gb18030'],\n        name: 'gb18030'\n      }\n    ],\n    heading: 'Legacy multi-byte Chinese (simplified) encodings'\n  },\n  {\n    encodings: [\n      {\n        labels: ['big5', 'big5-hkscs', 'cn-big5', 'csbig5', 'x-x-big5'],\n        name: 'Big5'\n      }\n    ],\n    heading: 'Legacy multi-byte Chinese (traditional) encodings'\n  },\n  {\n    encodings: [\n      {\n        labels: ['cseucpkdfmtjapanese', 'euc-jp', 'x-euc-jp'],\n        name: 'EUC-JP'\n      },\n      {\n        labels: ['csiso2022jp', 'iso-2022-jp'],\n        name: 'ISO-2022-JP'\n      },\n      {\n        labels: [\n          'csshiftjis',\n          'ms932',\n          'ms_kanji',\n          'shift-jis',\n          'shift_jis',\n          'sjis',\n          'windows-31j',\n          'x-sjis'\n        ],\n        name: 'Shift_JIS'\n      }\n    ],\n    heading: 'Legacy multi-byte Japanese encodings'\n  },\n  {\n    encodings: [\n      {\n        labels: [\n          'cseuckr',\n          'csksc56011987',\n          'euc-kr',\n          'iso-ir-149',\n          'korean',\n          'ks_c_5601-1987',\n          'ks_c_5601-1989',\n          'ksc5601',\n          'ksc_5601',\n          'windows-949'\n        ],\n        name: 'EUC-KR'\n      }\n    ],\n    heading: 'Legacy multi-byte Korean encodings'\n  },\n  {\n    encodings: [\n      {\n        labels: ['csiso2022kr', 'hz-gb-2312', 'iso-2022-cn', 'iso-2022-cn-ext', 'iso-2022-kr'],\n        name: 'replacement'\n      },\n      {\n        labels: ['utf-16be'],\n        name: 'UTF-16BE'\n      },\n      {\n        labels: ['utf-16', 'utf-16le'],\n        name: 'UTF-16LE'\n      },\n      {\n        labels: ['x-user-defined'],\n        name: 'x-user-defined'\n      }\n    ],\n    heading: 'Legacy miscellaneous encodings'\n  }\n];\n\n// Label to encoding registry.\n/** @type {Object.<string,{name:string,labels:Array.<string>}>} */\nvar label_to_encoding = {};\nencodings.forEach(function (category) {\n  category.encodings.forEach(function (encoding) {\n    encoding.labels.forEach(function (label) {\n      label_to_encoding[label] = encoding;\n    });\n  });\n});\n\n// Registry of of encoder/decoder factories, by encoding name.\n/** @type {Object.<string, function({fatal:boolean}): Encoder>} */\nvar encoders = {};\n/** @type {Object.<string, function({fatal:boolean}): Decoder>} */\nvar decoders = {};\n\n//\n// 6. Indexes\n//\n\n/**\n * @param {number} pointer The |pointer| to search for.\n * @param {(!Array.<?number>|undefined)} index The |index| to search within.\n * @return {?number} The code point corresponding to |pointer| in |index|,\n *     or null if |code point| is not in |index|.\n */\nfunction indexCodePointFor(pointer, index) {\n  if (!index) return null;\n  return index[pointer] || null;\n}\n\n/**\n * @param {number} code_point The |code point| to search for.\n * @param {!Array.<?number>} index The |index| to search within.\n * @return {?number} The first pointer corresponding to |code point| in\n *     |index|, or null if |code point| is not in |index|.\n */\nfunction indexPointerFor(code_point, index) {\n  var pointer = index.indexOf(code_point);\n  return pointer === -1 ? null : pointer;\n}\n\n/**\n * @param {string} name Name of the index.\n * @return {(!Array.<number>|!Array.<Array.<number>>)}\n *  */\nfunction index(name) {\n  if (!('encoding-indexes' in global)) {\n    throw Error('Indexes missing.' + ' Did you forget to include encoding-indexes.js first?');\n  }\n  return global['encoding-indexes'][name];\n}\n\n/**\n * @param {number} pointer The |pointer| to search for in the gb18030 index.\n * @return {?number} The code point corresponding to |pointer| in |index|,\n *     or null if |code point| is not in the gb18030 index.\n */\nfunction indexGB18030RangesCodePointFor(pointer) {\n  // 1. If pointer is greater than 39419 and less than 189000, or\n  // pointer is greater than 1237575, return null.\n  if ((pointer > 39419 && pointer < 189000) || pointer > 1237575) return null;\n\n  // 2. If pointer is 7457, return code point U+E7C7.\n  if (pointer === 7457) return 0xe7c7;\n\n  // 3. Let offset be the last pointer in index gb18030 ranges that\n  // is equal to or less than pointer and let code point offset be\n  // its corresponding code point.\n  var offset = 0;\n  var code_point_offset = 0;\n  var idx = index('gb18030-ranges');\n  var i;\n  for (i = 0; i < idx.length; ++i) {\n    /** @type {!Array.<number>} */\n    var entry = idx[i];\n    if (entry[0] <= pointer) {\n      offset = entry[0];\n      code_point_offset = entry[1];\n    } else {\n      break;\n    }\n  }\n\n  // 4. Return a code point whose value is code point offset +\n  // pointer \u2212 offset.\n  return code_point_offset + pointer - offset;\n}\n\n/**\n * @param {number} code_point The |code point| to locate in the gb18030 index.\n * @return {number} The first pointer corresponding to |code point| in the\n *     gb18030 index.\n */\nfunction indexGB18030RangesPointerFor(code_point) {\n  // 1. If code point is U+E7C7, return pointer 7457.\n  if (code_point === 0xe7c7) return 7457;\n\n  // 2. Let offset be the last code point in index gb18030 ranges\n  // that is equal to or less than code point and let pointer offset\n  // be its corresponding pointer.\n  var offset = 0;\n  var pointer_offset = 0;\n  var idx = index('gb18030-ranges');\n  var i;\n  for (i = 0; i < idx.length; ++i) {\n    /** @type {!Array.<number>} */\n    var entry = idx[i];\n    if (entry[1] <= code_point) {\n      offset = entry[1];\n      pointer_offset = entry[0];\n    } else {\n      break;\n    }\n  }\n\n  // 3. Return a pointer whose value is pointer offset + code point\n  // \u2212 offset.\n  return pointer_offset + code_point - offset;\n}\n\n/**\n * @param {number} code_point The |code_point| to search for in the Shift_JIS\n *     index.\n * @return {?number} The code point corresponding to |pointer| in |index|,\n *     or null if |code point| is not in the Shift_JIS index.\n */\nfunction indexShiftJISPointerFor(code_point) {\n  // 1. Let index be index jis0208 excluding all entries whose\n  // pointer is in the range 8272 to 8835, inclusive.\n  shift_jis_index =\n    shift_jis_index ||\n    index('jis0208').map(function (code_point, pointer) {\n      return inRange(pointer, 8272, 8835) ? null : code_point;\n    });\n  var index_ = shift_jis_index;\n\n  // 2. Return the index pointer for code point in index.\n  return index_.indexOf(code_point);\n}\nvar shift_jis_index;\n\n/**\n * @param {number} code_point The |code_point| to search for in the big5\n *     index.\n * @return {?number} The code point corresponding to |pointer| in |index|,\n *     or null if |code point| is not in the big5 index.\n */\nfunction indexBig5PointerFor(code_point) {\n  // 1. Let index be index Big5 excluding all entries whose pointer\n  big5_index_no_hkscs =\n    big5_index_no_hkscs ||\n    index('big5').map(function (code_point, pointer) {\n      return pointer < (0xa1 - 0x81) * 157 ? null : code_point;\n    });\n  var index_ = big5_index_no_hkscs;\n\n  // 2. If code point is U+2550, U+255E, U+2561, U+256A, U+5341, or\n  // U+5345, return the last pointer corresponding to code point in\n  // index.\n  if (\n    code_point === 0x2550 ||\n    code_point === 0x255e ||\n    code_point === 0x2561 ||\n    code_point === 0x256a ||\n    code_point === 0x5341 ||\n    code_point === 0x5345\n  ) {\n    return index_.lastIndexOf(code_point);\n  }\n\n  // 3. Return the index pointer for code point in index.\n  return indexPointerFor(code_point, index_);\n}\nvar big5_index_no_hkscs;\n\n//\n// 8. API\n//\n\n/** @const */ var DEFAULT_ENCODING = 'utf-8';\n\n// 8.1 Interface TextDecoder\n\n/**\n * @constructor\n * @param {string=} label The label of the encoding;\n *     defaults to 'utf-8'.\n * @param {Object=} options\n */\nfunction TextDecoder(label, options) {\n  // Web IDL conventions\n  if (!(this instanceof TextDecoder))\n    throw TypeError(\"Called as a function. Did you forget 'new'?\");\n  label = label !== undefined ? String(label) : DEFAULT_ENCODING;\n  options = ToDictionary(options);\n\n  // A TextDecoder object has an associated encoding, decoder,\n  // stream, ignore BOM flag (initially unset), BOM seen flag\n  // (initially unset), error mode (initially replacement), and do\n  // not flush flag (initially unset).\n\n  /** @private */\n  this._encoding = null;\n  /** @private @type {?Decoder} */\n  this._decoder = null;\n  /** @private @type {boolean} */\n  this._ignoreBOM = false;\n  /** @private @type {boolean} */\n  this._BOMseen = false;\n  /** @private @type {string} */\n  this._error_mode = 'replacement';\n  /** @private @type {boolean} */\n  this._do_not_flush = false;\n\n  // 1. Let encoding be the result of getting an encoding from\n  // label.\n  var encoding = getEncoding(label);\n\n  // 2. If encoding is failure or replacement, throw a RangeError.\n  if (encoding === null || encoding.name === 'replacement')\n    throw RangeError('Unknown encoding: ' + label);\n  if (!decoders[encoding.name]) {\n    throw Error('Decoder not present.' + ' Did you forget to include encoding-indexes.js first?');\n  }\n\n  // 3. Let dec be a new TextDecoder object.\n  var dec = this;\n\n  // 4. Set dec's encoding to encoding.\n  dec._encoding = encoding;\n\n  // 5. If options's fatal member is true, set dec's error mode to\n  // fatal.\n  if (Boolean(options['fatal'])) dec._error_mode = 'fatal';\n\n  // 6. If options's ignoreBOM member is true, set dec's ignore BOM\n  // flag.\n  if (Boolean(options['ignoreBOM'])) dec._ignoreBOM = true;\n\n  // For pre-ES5 runtimes:\n  if (!Object.defineProperty) {\n    this.encoding = dec._encoding.name.toLowerCase();\n    this.fatal = dec._error_mode === 'fatal';\n    this.ignoreBOM = dec._ignoreBOM;\n  }\n\n  // 7. Return dec.\n  return dec;\n}\n\nif (Object.defineProperty) {\n  // The encoding attribute's getter must return encoding's name.\n  Object.defineProperty(TextDecoder.prototype, 'encoding', {\n    /** @this {TextDecoder} */\n    get: function () {\n      return this._encoding.name.toLowerCase();\n    }\n  });\n\n  // The fatal attribute's getter must return true if error mode\n  // is fatal, and false otherwise.\n  Object.defineProperty(TextDecoder.prototype, 'fatal', {\n    /** @this {TextDecoder} */\n    get: function () {\n      return this._error_mode === 'fatal';\n    }\n  });\n\n  // The ignoreBOM attribute's getter must return true if ignore\n  // BOM flag is set, and false otherwise.\n  Object.defineProperty(TextDecoder.prototype, 'ignoreBOM', {\n    /** @this {TextDecoder} */\n    get: function () {\n      return this._ignoreBOM;\n    }\n  });\n}\n\n/**\n * @param {BufferSource=} input The buffer of bytes to decode.\n * @param {Object=} options\n * @return {string} The decoded string.\n */\nTextDecoder.prototype.decode = function decode(input, options) {\n  var bytes;\n  if (typeof input === 'object' && input instanceof ArrayBuffer) {\n    bytes = new Uint8Array(input);\n  } else if (\n    typeof input === 'object' &&\n    'buffer' in input &&\n    input.buffer instanceof ArrayBuffer\n  ) {\n    bytes = new Uint8Array(input.buffer, input.byteOffset, input.byteLength);\n  } else {\n    bytes = new Uint8Array(0);\n  }\n\n  options = ToDictionary(options);\n\n  // 1. If the do not flush flag is unset, set decoder to a new\n  // encoding's decoder, set stream to a new stream, and unset the\n  // BOM seen flag.\n  if (!this._do_not_flush) {\n    this._decoder = decoders[this._encoding.name]({\n      fatal: this._error_mode === 'fatal'\n    });\n    this._BOMseen = false;\n  }\n\n  // 2. If options's stream is true, set the do not flush flag, and\n  // unset the do not flush flag otherwise.\n  this._do_not_flush = Boolean(options['stream']);\n\n  // 3. If input is given, push a copy of input to stream.\n  // TODO: Align with spec algorithm - maintain stream on instance.\n  var input_stream = new Stream(bytes);\n\n  // 4. Let output be a new stream.\n  var output = [];\n\n  /** @type {?(number|!Array.<number>)} */\n  var result;\n\n  // 5. While true:\n  while (true) {\n    // 1. Let token be the result of reading from stream.\n    var token = input_stream.read();\n\n    // 2. If token is end-of-stream and the do not flush flag is\n    // set, return output, serialized.\n    // TODO: Align with spec algorithm.\n    if (token === end_of_stream) break;\n\n    // 3. Otherwise, run these subsubsteps:\n\n    // 1. Let result be the result of processing token for decoder,\n    // stream, output, and error mode.\n    result = this._decoder.handler(input_stream, token);\n\n    // 2. If result is finished, return output, serialized.\n    if (result === finished) break;\n\n    if (result !== null) {\n      if (Array.isArray(result)) output.push.apply(output, /**@type {!Array.<number>}*/ result);\n      else output.push(result);\n    }\n\n    // 3. Otherwise, if result is error, throw a TypeError.\n    // (Thrown in handler)\n\n    // 4. Otherwise, do nothing.\n  }\n  // TODO: Align with spec algorithm.\n  if (!this._do_not_flush) {\n    do {\n      result = this._decoder.handler(input_stream, input_stream.read());\n      if (result === finished) break;\n      if (result === null) continue;\n      if (Array.isArray(result)) output.push.apply(output, /**@type {!Array.<number>}*/ result);\n      else output.push(result);\n    } while (!input_stream.endOfStream());\n    this._decoder = null;\n  }\n\n  // A TextDecoder object also has an associated serialize stream\n  // algorithm...\n  /**\n   * @param {!Array.<number>} stream\n   * @return {string}\n   * @this {TextDecoder}\n   */\n  function serializeStream(stream) {\n    // 1. Let token be the result of reading from stream.\n    // (Done in-place on array, rather than as a stream)\n\n    // 2. If encoding is UTF-8, UTF-16BE, or UTF-16LE, and ignore\n    // BOM flag and BOM seen flag are unset, run these subsubsteps:\n    if (\n      includes(['UTF-8', 'UTF-16LE', 'UTF-16BE'], this._encoding.name) &&\n      !this._ignoreBOM &&\n      !this._BOMseen\n    ) {\n      if (stream.length > 0 && stream[0] === 0xfeff) {\n        // 1. If token is U+FEFF, set BOM seen flag.\n        this._BOMseen = true;\n        stream.shift();\n      } else if (stream.length > 0) {\n        // 2. Otherwise, if token is not end-of-stream, set BOM seen\n        // flag and append token to stream.\n        this._BOMseen = true;\n      } else {\n        // 3. Otherwise, if token is not end-of-stream, append token\n        // to output.\n        // (no-op)\n      }\n    }\n    // 4. Otherwise, return output.\n    return codePointsToString(stream);\n  }\n\n  return serializeStream.call(this, output);\n};\n\n// 8.2 Interface TextEncoder\n\n/**\n * @constructor\n * @param {string=} label The label of the encoding. NONSTANDARD.\n * @param {Object=} options NONSTANDARD.\n */\nfunction TextEncoder(label, options) {\n  // Web IDL conventions\n  if (!(this instanceof TextEncoder))\n    throw TypeError(\"Called as a function. Did you forget 'new'?\");\n  options = ToDictionary(options);\n\n  // A TextEncoder object has an associated encoding and encoder.\n\n  /** @private */\n  this._encoding = null;\n  /** @private @type {?Encoder} */\n  this._encoder = null;\n\n  // Non-standard\n  /** @private @type {boolean} */\n  this._do_not_flush = false;\n  /** @private @type {string} */\n  this._fatal = Boolean(options['fatal']) ? 'fatal' : 'replacement';\n\n  // 1. Let enc be a new TextEncoder object.\n  var enc = this;\n\n  // 2. Set enc's encoding to UTF-8's encoder.\n  if (Boolean(options['NONSTANDARD_allowLegacyEncoding'])) {\n    // NONSTANDARD behavior.\n    label = label !== undefined ? String(label) : DEFAULT_ENCODING;\n    var encoding = getEncoding(label);\n    if (encoding === null || encoding.name === 'replacement')\n      throw RangeError('Unknown encoding: ' + label);\n    if (!encoders[encoding.name]) {\n      throw Error('Encoder not present.' + ' Did you forget to include encoding-indexes.js first?');\n    }\n    enc._encoding = encoding;\n  } else {\n    // Standard behavior.\n    enc._encoding = getEncoding('utf-8');\n\n    if (label !== undefined && 'console' in global) {\n      console.warn('TextEncoder constructor called with encoding label, ' + 'which is ignored.');\n    }\n  }\n\n  // For pre-ES5 runtimes:\n  if (!Object.defineProperty) this.encoding = enc._encoding.name.toLowerCase();\n\n  // 3. Return enc.\n  return enc;\n}\n\nif (Object.defineProperty) {\n  // The encoding attribute's getter must return encoding's name.\n  Object.defineProperty(TextEncoder.prototype, 'encoding', {\n    /** @this {TextEncoder} */\n    get: function () {\n      return this._encoding.name.toLowerCase();\n    }\n  });\n}\n\n/**\n * @param {string=} opt_string The string to encode.\n * @param {Object=} options\n * @return {!Uint8Array} Encoded bytes, as a Uint8Array.\n */\nTextEncoder.prototype.encode = function encode(opt_string, options) {\n  opt_string = opt_string === undefined ? '' : String(opt_string);\n  options = ToDictionary(options);\n\n  // NOTE: This option is nonstandard. None of the encodings\n  // permitted for encoding (i.e. UTF-8, UTF-16) are stateful when\n  // the input is a USVString so streaming is not necessary.\n  if (!this._do_not_flush)\n    this._encoder = encoders[this._encoding.name]({\n      fatal: this._fatal === 'fatal'\n    });\n  this._do_not_flush = Boolean(options['stream']);\n\n  // 1. Convert input to a stream.\n  var input = new Stream(stringToCodePoints(opt_string));\n\n  // 2. Let output be a new stream\n  var output = [];\n\n  /** @type {?(number|!Array.<number>)} */\n  var result;\n  // 3. While true, run these substeps:\n  while (true) {\n    // 1. Let token be the result of reading from input.\n    var token = input.read();\n    if (token === end_of_stream) break;\n    // 2. Let result be the result of processing token for encoder,\n    // input, output.\n    result = this._encoder.handler(input, token);\n    if (result === finished) break;\n    if (Array.isArray(result)) output.push.apply(output, /**@type {!Array.<number>}*/ result);\n    else output.push(result);\n  }\n  // TODO: Align with spec algorithm.\n  if (!this._do_not_flush) {\n    while (true) {\n      result = this._encoder.handler(input, input.read());\n      if (result === finished) break;\n      if (Array.isArray(result)) output.push.apply(output, /**@type {!Array.<number>}*/ result);\n      else output.push(result);\n    }\n    this._encoder = null;\n  }\n  // 3. If result is finished, convert output into a byte sequence,\n  // and then return a Uint8Array object wrapping an ArrayBuffer\n  // containing output.\n  return new Uint8Array(output);\n};\n\n//\n// 9. The encoding\n//\n\n// 9.1 utf-8\n\n// 9.1.1 utf-8 decoder\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\nfunction UTF8Decoder(options) {\n  var fatal = options.fatal;\n\n  // utf-8's decoder's has an associated utf-8 code point, utf-8\n  // bytes seen, and utf-8 bytes needed (all initially 0), a utf-8\n  // lower boundary (initially 0x80), and a utf-8 upper boundary\n  // (initially 0xBF).\n  var /** @type {number} */ utf8_code_point = 0,\n    /** @type {number} */ utf8_bytes_seen = 0,\n    /** @type {number} */ utf8_bytes_needed = 0,\n    /** @type {number} */ utf8_lower_boundary = 0x80,\n    /** @type {number} */ utf8_upper_boundary = 0xbf;\n\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream and utf-8 bytes needed is not 0,\n    // set utf-8 bytes needed to 0 and return error.\n    if (bite === end_of_stream && utf8_bytes_needed !== 0) {\n      utf8_bytes_needed = 0;\n      return decoderError(fatal);\n    }\n\n    // 2. If byte is end-of-stream, return finished.\n    if (bite === end_of_stream) return finished;\n\n    // 3. If utf-8 bytes needed is 0, based on byte:\n    if (utf8_bytes_needed === 0) {\n      // 0x00 to 0x7F\n      if (inRange(bite, 0x00, 0x7f)) {\n        // Return a code point whose value is byte.\n        return bite;\n      }\n\n      // 0xC2 to 0xDF\n      else if (inRange(bite, 0xc2, 0xdf)) {\n        // 1. Set utf-8 bytes needed to 1.\n        utf8_bytes_needed = 1;\n\n        // 2. Set UTF-8 code point to byte & 0x1F.\n        utf8_code_point = bite & 0x1f;\n      }\n\n      // 0xE0 to 0xEF\n      else if (inRange(bite, 0xe0, 0xef)) {\n        // 1. If byte is 0xE0, set utf-8 lower boundary to 0xA0.\n        if (bite === 0xe0) utf8_lower_boundary = 0xa0;\n        // 2. If byte is 0xED, set utf-8 upper boundary to 0x9F.\n        if (bite === 0xed) utf8_upper_boundary = 0x9f;\n        // 3. Set utf-8 bytes needed to 2.\n        utf8_bytes_needed = 2;\n        // 4. Set UTF-8 code point to byte & 0xF.\n        utf8_code_point = bite & 0xf;\n      }\n\n      // 0xF0 to 0xF4\n      else if (inRange(bite, 0xf0, 0xf4)) {\n        // 1. If byte is 0xF0, set utf-8 lower boundary to 0x90.\n        if (bite === 0xf0) utf8_lower_boundary = 0x90;\n        // 2. If byte is 0xF4, set utf-8 upper boundary to 0x8F.\n        if (bite === 0xf4) utf8_upper_boundary = 0x8f;\n        // 3. Set utf-8 bytes needed to 3.\n        utf8_bytes_needed = 3;\n        // 4. Set UTF-8 code point to byte & 0x7.\n        utf8_code_point = bite & 0x7;\n      }\n\n      // Otherwise\n      else {\n        // Return error.\n        return decoderError(fatal);\n      }\n\n      // Return continue.\n      return null;\n    }\n\n    // 4. If byte is not in the range utf-8 lower boundary to utf-8\n    // upper boundary, inclusive, run these substeps:\n    if (!inRange(bite, utf8_lower_boundary, utf8_upper_boundary)) {\n      // 1. Set utf-8 code point, utf-8 bytes needed, and utf-8\n      // bytes seen to 0, set utf-8 lower boundary to 0x80, and set\n      // utf-8 upper boundary to 0xBF.\n      utf8_code_point = utf8_bytes_needed = utf8_bytes_seen = 0;\n      utf8_lower_boundary = 0x80;\n      utf8_upper_boundary = 0xbf;\n\n      // 2. Prepend byte to stream.\n      stream.prepend(bite);\n\n      // 3. Return error.\n      return decoderError(fatal);\n    }\n\n    // 5. Set utf-8 lower boundary to 0x80 and utf-8 upper boundary\n    // to 0xBF.\n    utf8_lower_boundary = 0x80;\n    utf8_upper_boundary = 0xbf;\n\n    // 6. Set UTF-8 code point to (UTF-8 code point << 6) | (byte &\n    // 0x3F)\n    utf8_code_point = (utf8_code_point << 6) | (bite & 0x3f);\n\n    // 7. Increase utf-8 bytes seen by one.\n    utf8_bytes_seen += 1;\n\n    // 8. If utf-8 bytes seen is not equal to utf-8 bytes needed,\n    // continue.\n    if (utf8_bytes_seen !== utf8_bytes_needed) return null;\n\n    // 9. Let code point be utf-8 code point.\n    var code_point = utf8_code_point;\n\n    // 10. Set utf-8 code point, utf-8 bytes needed, and utf-8 bytes\n    // seen to 0.\n    utf8_code_point = utf8_bytes_needed = utf8_bytes_seen = 0;\n\n    // 11. Return a code point whose value is code point.\n    return code_point;\n  };\n}\n\n// 9.1.2 utf-8 encoder\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n */\nfunction UTF8Encoder(options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished;\n\n    // 2. If code point is an ASCII code point, return a byte whose\n    // value is code point.\n    if (isASCIICodePoint(code_point)) return code_point;\n\n    // 3. Set count and offset based on the range code point is in:\n    var count, offset;\n    // U+0080 to U+07FF, inclusive:\n    if (inRange(code_point, 0x0080, 0x07ff)) {\n      // 1 and 0xC0\n      count = 1;\n      offset = 0xc0;\n    }\n    // U+0800 to U+FFFF, inclusive:\n    else if (inRange(code_point, 0x0800, 0xffff)) {\n      // 2 and 0xE0\n      count = 2;\n      offset = 0xe0;\n    }\n    // U+10000 to U+10FFFF, inclusive:\n    else if (inRange(code_point, 0x10000, 0x10ffff)) {\n      // 3 and 0xF0\n      count = 3;\n      offset = 0xf0;\n    }\n\n    // 4. Let bytes be a byte sequence whose first byte is (code\n    // point >> (6 \u00D7 count)) + offset.\n    var bytes = [(code_point >> (6 * count)) + offset];\n\n    // 5. Run these substeps while count is greater than 0:\n    while (count > 0) {\n      // 1. Set temp to code point >> (6 \u00D7 (count \u2212 1)).\n      var temp = code_point >> (6 * (count - 1));\n\n      // 2. Append to bytes 0x80 | (temp & 0x3F).\n      bytes.push(0x80 | (temp & 0x3f));\n\n      // 3. Decrease count by one.\n      count -= 1;\n    }\n\n    // 6. Return bytes bytes, in order.\n    return bytes;\n  };\n}\n\n/** @param {{fatal: boolean}} options */\nencoders['UTF-8'] = function (options) {\n  return new UTF8Encoder(options);\n};\n/** @param {{fatal: boolean}} options */\ndecoders['UTF-8'] = function (options) {\n  return new UTF8Decoder(options);\n};\n\n//\n// 10. Legacy single-byte encodings\n//\n\n// 10.1 single-byte decoder\n/**\n * @constructor\n * @implements {Decoder}\n * @param {!Array.<number>} index The encoding index.\n * @param {{fatal: boolean}} options\n */\nfunction SingleByteDecoder(index, options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream, return finished.\n    if (bite === end_of_stream) return finished;\n\n    // 2. If byte is an ASCII byte, return a code point whose value\n    // is byte.\n    if (isASCIIByte(bite)) return bite;\n\n    // 3. Let code point be the index code point for byte \u2212 0x80 in\n    // index single-byte.\n    var code_point = index[bite - 0x80];\n\n    // 4. If code point is null, return error.\n    if (code_point === null) return decoderError(fatal);\n\n    // 5. Return a code point whose value is code point.\n    return code_point;\n  };\n}\n\n// 10.2 single-byte encoder\n/**\n * @constructor\n * @implements {Encoder}\n * @param {!Array.<?number>} index The encoding index.\n * @param {{fatal: boolean}} options\n */\nfunction SingleByteEncoder(index, options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished;\n\n    // 2. If code point is an ASCII code point, return a byte whose\n    // value is code point.\n    if (isASCIICodePoint(code_point)) return code_point;\n\n    // 3. Let pointer be the index pointer for code point in index\n    // single-byte.\n    var pointer = indexPointerFor(code_point, index);\n\n    // 4. If pointer is null, return error with code point.\n    if (pointer === null) encoderError(code_point);\n\n    // 5. Return a byte whose value is pointer + 0x80.\n    return pointer + 0x80;\n  };\n}\n\n(function () {\n  if (!('encoding-indexes' in global)) return;\n  encodings.forEach(function (category) {\n    if (category.heading !== 'Legacy single-byte encodings') return;\n    category.encodings.forEach(function (encoding) {\n      var name = encoding.name;\n      var idx = index(name.toLowerCase());\n      /** @param {{fatal: boolean}} options */\n      decoders[name] = function (options) {\n        return new SingleByteDecoder(idx, options);\n      };\n      /** @param {{fatal: boolean}} options */\n      encoders[name] = function (options) {\n        return new SingleByteEncoder(idx, options);\n      };\n    });\n  });\n})();\n\n//\n// 11. Legacy multi-byte Chinese (simplified) encodings\n//\n\n// 11.1 gbk\n\n// 11.1.1 gbk decoder\n// gbk's decoder is gb18030's decoder.\n/** @param {{fatal: boolean}} options */\ndecoders['GBK'] = function (options) {\n  return new GB18030Decoder(options);\n};\n\n// 11.1.2 gbk encoder\n// gbk's encoder is gb18030's encoder with its gbk flag set.\n/** @param {{fatal: boolean}} options */\nencoders['GBK'] = function (options) {\n  return new GB18030Encoder(options, true);\n};\n\n// 11.2 gb18030\n\n// 11.2.1 gb18030 decoder\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\nfunction GB18030Decoder(options) {\n  var fatal = options.fatal;\n  // gb18030's decoder has an associated gb18030 first, gb18030\n  // second, and gb18030 third (all initially 0x00).\n  var /** @type {number} */ gb18030_first = 0x00,\n    /** @type {number} */ gb18030_second = 0x00,\n    /** @type {number} */ gb18030_third = 0x00;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream and gb18030 first, gb18030\n    // second, and gb18030 third are 0x00, return finished.\n    if (\n      bite === end_of_stream &&\n      gb18030_first === 0x00 &&\n      gb18030_second === 0x00 &&\n      gb18030_third === 0x00\n    ) {\n      return finished;\n    }\n    // 2. If byte is end-of-stream, and gb18030 first, gb18030\n    // second, or gb18030 third is not 0x00, set gb18030 first,\n    // gb18030 second, and gb18030 third to 0x00, and return error.\n    if (\n      bite === end_of_stream &&\n      (gb18030_first !== 0x00 || gb18030_second !== 0x00 || gb18030_third !== 0x00)\n    ) {\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      gb18030_third = 0x00;\n      decoderError(fatal);\n    }\n    var code_point;\n    // 3. If gb18030 third is not 0x00, run these substeps:\n    if (gb18030_third !== 0x00) {\n      // 1. Let code point be null.\n      code_point = null;\n      // 2. If byte is in the range 0x30 to 0x39, inclusive, set\n      // code point to the index gb18030 ranges code point for\n      // (((gb18030 first \u2212 0x81) \u00D7 10 + gb18030 second \u2212 0x30) \u00D7\n      // 126 + gb18030 third \u2212 0x81) \u00D7 10 + byte \u2212 0x30.\n      if (inRange(bite, 0x30, 0x39)) {\n        code_point = indexGB18030RangesCodePointFor(\n          (((gb18030_first - 0x81) * 10 + gb18030_second - 0x30) * 126 + gb18030_third - 0x81) *\n            10 +\n            bite -\n            0x30\n        );\n      }\n\n      // 3. Let buffer be a byte sequence consisting of gb18030\n      // second, gb18030 third, and byte, in order.\n      var buffer = [gb18030_second, gb18030_third, bite];\n\n      // 4. Set gb18030 first, gb18030 second, and gb18030 third to\n      // 0x00.\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      gb18030_third = 0x00;\n\n      // 5. If code point is null, prepend buffer to stream and\n      // return error.\n      if (code_point === null) {\n        stream.prepend(buffer);\n        return decoderError(fatal);\n      }\n\n      // 6. Return a code point whose value is code point.\n      return code_point;\n    }\n\n    // 4. If gb18030 second is not 0x00, run these substeps:\n    if (gb18030_second !== 0x00) {\n      // 1. If byte is in the range 0x81 to 0xFE, inclusive, set\n      // gb18030 third to byte and return continue.\n      if (inRange(bite, 0x81, 0xfe)) {\n        gb18030_third = bite;\n        return null;\n      }\n\n      // 2. Prepend gb18030 second followed by byte to stream, set\n      // gb18030 first and gb18030 second to 0x00, and return error.\n      stream.prepend([gb18030_second, bite]);\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      return decoderError(fatal);\n    }\n\n    // 5. If gb18030 first is not 0x00, run these substeps:\n    if (gb18030_first !== 0x00) {\n      // 1. If byte is in the range 0x30 to 0x39, inclusive, set\n      // gb18030 second to byte and return continue.\n      if (inRange(bite, 0x30, 0x39)) {\n        gb18030_second = bite;\n        return null;\n      }\n\n      // 2. Let lead be gb18030 first, let pointer be null, and set\n      // gb18030 first to 0x00.\n      var lead = gb18030_first;\n      var pointer = null;\n      gb18030_first = 0x00;\n\n      // 3. Let offset be 0x40 if byte is less than 0x7F and 0x41\n      // otherwise.\n      var offset = bite < 0x7f ? 0x40 : 0x41;\n\n      // 4. If byte is in the range 0x40 to 0x7E, inclusive, or 0x80\n      // to 0xFE, inclusive, set pointer to (lead \u2212 0x81) \u00D7 190 +\n      // (byte \u2212 offset).\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0x80, 0xfe))\n        pointer = (lead - 0x81) * 190 + (bite - offset);\n\n      // 5. Let code point be null if pointer is null and the index\n      // code point for pointer in index gb18030 otherwise.\n      code_point = pointer === null ? null : indexCodePointFor(pointer, index('gb18030'));\n\n      // 6. If code point is null and byte is an ASCII byte, prepend\n      // byte to stream.\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite);\n\n      // 7. If code point is null, return error.\n      if (code_point === null) return decoderError(fatal);\n\n      // 8. Return a code point whose value is code point.\n      return code_point;\n    }\n\n    // 6. If byte is an ASCII byte, return a code point whose value\n    // is byte.\n    if (isASCIIByte(bite)) return bite;\n\n    // 7. If byte is 0x80, return code point U+20AC.\n    if (bite === 0x80) return 0x20ac;\n\n    // 8. If byte is in the range 0x81 to 0xFE, inclusive, set\n    // gb18030 first to byte and return continue.\n    if (inRange(bite, 0x81, 0xfe)) {\n      gb18030_first = bite;\n      return null;\n    }\n\n    // 9. Return error.\n    return decoderError(fatal);\n  };\n}\n\n// 11.2.2 gb18030 encoder\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n * @param {boolean=} gbk_flag\n */\nfunction GB18030Encoder(options, gbk_flag) {\n  var fatal = options.fatal;\n  // gb18030's decoder has an associated gbk flag (initially unset).\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished;\n\n    // 2. If code point is an ASCII code point, return a byte whose\n    // value is code point.\n    if (isASCIICodePoint(code_point)) return code_point;\n\n    // 3. If code point is U+E5E5, return error with code point.\n    if (code_point === 0xe5e5) return encoderError(code_point);\n\n    // 4. If the gbk flag is set and code point is U+20AC, return\n    // byte 0x80.\n    if (gbk_flag && code_point === 0x20ac) return 0x80;\n\n    // 5. Let pointer be the index pointer for code point in index\n    // gb18030.\n    var pointer = indexPointerFor(code_point, index('gb18030'));\n\n    // 6. If pointer is not null, run these substeps:\n    if (pointer !== null) {\n      // 1. Let lead be floor(pointer / 190) + 0x81.\n      var lead = floor(pointer / 190) + 0x81;\n\n      // 2. Let trail be pointer % 190.\n      var trail = pointer % 190;\n\n      // 3. Let offset be 0x40 if trail is less than 0x3F and 0x41 otherwise.\n      var offset = trail < 0x3f ? 0x40 : 0x41;\n\n      // 4. Return two bytes whose values are lead and trail + offset.\n      return [lead, trail + offset];\n    }\n\n    // 7. If gbk flag is set, return error with code point.\n    if (gbk_flag) return encoderError(code_point);\n\n    // 8. Set pointer to the index gb18030 ranges pointer for code\n    // point.\n    pointer = indexGB18030RangesPointerFor(code_point);\n\n    // 9. Let byte1 be floor(pointer / 10 / 126 / 10).\n    var byte1 = floor(pointer / 10 / 126 / 10);\n\n    // 10. Set pointer to pointer \u2212 byte1 \u00D7 10 \u00D7 126 \u00D7 10.\n    pointer = pointer - byte1 * 10 * 126 * 10;\n\n    // 11. Let byte2 be floor(pointer / 10 / 126).\n    var byte2 = floor(pointer / 10 / 126);\n\n    // 12. Set pointer to pointer \u2212 byte2 \u00D7 10 \u00D7 126.\n    pointer = pointer - byte2 * 10 * 126;\n\n    // 13. Let byte3 be floor(pointer / 10).\n    var byte3 = floor(pointer / 10);\n\n    // 14. Let byte4 be pointer \u2212 byte3 \u00D7 10.\n    var byte4 = pointer - byte3 * 10;\n\n    // 15. Return four bytes whose values are byte1 + 0x81, byte2 +\n    // 0x30, byte3 + 0x81, byte4 + 0x30.\n    return [byte1 + 0x81, byte2 + 0x30, byte3 + 0x81, byte4 + 0x30];\n  };\n}\n\n/** @param {{fatal: boolean}} options */\nencoders['gb18030'] = function (options) {\n  return new GB18030Encoder(options);\n};\n/** @param {{fatal: boolean}} options */\ndecoders['gb18030'] = function (options) {\n  return new GB18030Decoder(options);\n};\n\n//\n// 12. Legacy multi-byte Chinese (traditional) encodings\n//\n\n// 12.1 Big5\n\n// 12.1.1 Big5 decoder\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\nfunction Big5Decoder(options) {\n  var fatal = options.fatal;\n  // Big5's decoder has an associated Big5 lead (initially 0x00).\n  var /** @type {number} */ Big5_lead = 0x00;\n\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream and Big5 lead is not 0x00, set\n    // Big5 lead to 0x00 and return error.\n    if (bite === end_of_stream && Big5_lead !== 0x00) {\n      Big5_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    // 2. If byte is end-of-stream and Big5 lead is 0x00, return\n    // finished.\n    if (bite === end_of_stream && Big5_lead === 0x00) return finished;\n\n    // 3. If Big5 lead is not 0x00, let lead be Big5 lead, let\n    // pointer be null, set Big5 lead to 0x00, and then run these\n    // substeps:\n    if (Big5_lead !== 0x00) {\n      var lead = Big5_lead;\n      var pointer = null;\n      Big5_lead = 0x00;\n\n      // 1. Let offset be 0x40 if byte is less than 0x7F and 0x62\n      // otherwise.\n      var offset = bite < 0x7f ? 0x40 : 0x62;\n\n      // 2. If byte is in the range 0x40 to 0x7E, inclusive, or 0xA1\n      // to 0xFE, inclusive, set pointer to (lead \u2212 0x81) \u00D7 157 +\n      // (byte \u2212 offset).\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0xa1, 0xfe))\n        pointer = (lead - 0x81) * 157 + (bite - offset);\n\n      // 3. If there is a row in the table below whose first column\n      // is pointer, return the two code points listed in its second\n      // column\n      // Pointer | Code points\n      // --------+--------------\n      // 1133    | U+00CA U+0304\n      // 1135    | U+00CA U+030C\n      // 1164    | U+00EA U+0304\n      // 1166    | U+00EA U+030C\n      switch (pointer) {\n        case 1133:\n          return [0x00ca, 0x0304];\n        case 1135:\n          return [0x00ca, 0x030c];\n        case 1164:\n          return [0x00ea, 0x0304];\n        case 1166:\n          return [0x00ea, 0x030c];\n      }\n\n      // 4. Let code point be null if pointer is null and the index\n      // code point for pointer in index Big5 otherwise.\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('big5'));\n\n      // 5. If code point is null and byte is an ASCII byte, prepend\n      // byte to stream.\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite);\n\n      // 6. If code point is null, return error.\n      if (code_point === null) return decoderError(fatal);\n\n      // 7. Return a code point whose value is code point.\n      return code_point;\n    }\n\n    // 4. If byte is an ASCII byte, return a code point whose value\n    // is byte.\n    if (isASCIIByte(bite)) return bite;\n\n    // 5. If byte is in the range 0x81 to 0xFE, inclusive, set Big5\n    // lead to byte and return continue.\n    if (inRange(bite, 0x81, 0xfe)) {\n      Big5_lead = bite;\n      return null;\n    }\n\n    // 6. Return error.\n    return decoderError(fatal);\n  };\n}\n\n// 12.1.2 Big5 encoder\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n */\nfunction Big5Encoder(options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished;\n\n    // 2. If code point is an ASCII code point, return a byte whose\n    // value is code point.\n    if (isASCIICodePoint(code_point)) return code_point;\n\n    // 3. Let pointer be the index Big5 pointer for code point.\n    var pointer = indexBig5PointerFor(code_point);\n\n    // 4. If pointer is null, return error with code point.\n    if (pointer === null) return encoderError(code_point);\n\n    // 5. Let lead be floor(pointer / 157) + 0x81.\n    var lead = floor(pointer / 157) + 0x81;\n\n    // 6. If lead is less than 0xA1, return error with code point.\n    if (lead < 0xa1) return encoderError(code_point);\n\n    // 7. Let trail be pointer % 157.\n    var trail = pointer % 157;\n\n    // 8. Let offset be 0x40 if trail is less than 0x3F and 0x62\n    // otherwise.\n    var offset = trail < 0x3f ? 0x40 : 0x62;\n\n    // Return two bytes whose values are lead and trail + offset.\n    return [lead, trail + offset];\n  };\n}\n\n/** @param {{fatal: boolean}} options */\nencoders['Big5'] = function (options) {\n  return new Big5Encoder(options);\n};\n/** @param {{fatal: boolean}} options */\ndecoders['Big5'] = function (options) {\n  return new Big5Decoder(options);\n};\n\n//\n// 13. Legacy multi-byte Japanese encodings\n//\n\n// 13.1 euc-jp\n\n// 13.1.1 euc-jp decoder\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\nfunction EUCJPDecoder(options) {\n  var fatal = options.fatal;\n\n  // euc-jp's decoder has an associated euc-jp jis0212 flag\n  // (initially unset) and euc-jp lead (initially 0x00).\n  var /** @type {boolean} */ eucjp_jis0212_flag = false,\n    /** @type {number} */ eucjp_lead = 0x00;\n\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream and euc-jp lead is not 0x00, set\n    // euc-jp lead to 0x00, and return error.\n    if (bite === end_of_stream && eucjp_lead !== 0x00) {\n      eucjp_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    // 2. If byte is end-of-stream and euc-jp lead is 0x00, return\n    // finished.\n    if (bite === end_of_stream && eucjp_lead === 0x00) return finished;\n\n    // 3. If euc-jp lead is 0x8E and byte is in the range 0xA1 to\n    // 0xDF, inclusive, set euc-jp lead to 0x00 and return a code\n    // point whose value is 0xFF61 \u2212 0xA1 + byte.\n    if (eucjp_lead === 0x8e && inRange(bite, 0xa1, 0xdf)) {\n      eucjp_lead = 0x00;\n      return 0xff61 - 0xa1 + bite;\n    }\n\n    // 4. If euc-jp lead is 0x8F and byte is in the range 0xA1 to\n    // 0xFE, inclusive, set the euc-jp jis0212 flag, set euc-jp lead\n    // to byte, and return continue.\n    if (eucjp_lead === 0x8f && inRange(bite, 0xa1, 0xfe)) {\n      eucjp_jis0212_flag = true;\n      eucjp_lead = bite;\n      return null;\n    }\n\n    // 5. If euc-jp lead is not 0x00, let lead be euc-jp lead, set\n    // euc-jp lead to 0x00, and run these substeps:\n    if (eucjp_lead !== 0x00) {\n      var lead = eucjp_lead;\n      eucjp_lead = 0x00;\n\n      // 1. Let code point be null.\n      var code_point = null;\n\n      // 2. If lead and byte are both in the range 0xA1 to 0xFE,\n      // inclusive, set code point to the index code point for (lead\n      // \u2212 0xA1) \u00D7 94 + byte \u2212 0xA1 in index jis0208 if the euc-jp\n      // jis0212 flag is unset and in index jis0212 otherwise.\n      if (inRange(lead, 0xa1, 0xfe) && inRange(bite, 0xa1, 0xfe)) {\n        code_point = indexCodePointFor(\n          (lead - 0xa1) * 94 + (bite - 0xa1),\n          index(!eucjp_jis0212_flag ? 'jis0208' : 'jis0212')\n        );\n      }\n\n      // 3. Unset the euc-jp jis0212 flag.\n      eucjp_jis0212_flag = false;\n\n      // 4. If byte is not in the range 0xA1 to 0xFE, inclusive,\n      // prepend byte to stream.\n      if (!inRange(bite, 0xa1, 0xfe)) stream.prepend(bite);\n\n      // 5. If code point is null, return error.\n      if (code_point === null) return decoderError(fatal);\n\n      // 6. Return a code point whose value is code point.\n      return code_point;\n    }\n\n    // 6. If byte is an ASCII byte, return a code point whose value\n    // is byte.\n    if (isASCIIByte(bite)) return bite;\n\n    // 7. If byte is 0x8E, 0x8F, or in the range 0xA1 to 0xFE,\n    // inclusive, set euc-jp lead to byte and return continue.\n    if (bite === 0x8e || bite === 0x8f || inRange(bite, 0xa1, 0xfe)) {\n      eucjp_lead = bite;\n      return null;\n    }\n\n    // 8. Return error.\n    return decoderError(fatal);\n  };\n}\n\n// 13.1.2 euc-jp encoder\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n */\nfunction EUCJPEncoder(options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished;\n\n    // 2. If code point is an ASCII code point, return a byte whose\n    // value is code point.\n    if (isASCIICodePoint(code_point)) return code_point;\n\n    // 3. If code point is U+00A5, return byte 0x5C.\n    if (code_point === 0x00a5) return 0x5c;\n\n    // 4. If code point is U+203E, return byte 0x7E.\n    if (code_point === 0x203e) return 0x7e;\n\n    // 5. If code point is in the range U+FF61 to U+FF9F, inclusive,\n    // return two bytes whose values are 0x8E and code point \u2212\n    // 0xFF61 + 0xA1.\n    if (inRange(code_point, 0xff61, 0xff9f)) return [0x8e, code_point - 0xff61 + 0xa1];\n\n    // 6. If code point is U+2212, set it to U+FF0D.\n    if (code_point === 0x2212) code_point = 0xff0d;\n\n    // 7. Let pointer be the index pointer for code point in index\n    // jis0208.\n    var pointer = indexPointerFor(code_point, index('jis0208'));\n\n    // 8. If pointer is null, return error with code point.\n    if (pointer === null) return encoderError(code_point);\n\n    // 9. Let lead be floor(pointer / 94) + 0xA1.\n    var lead = floor(pointer / 94) + 0xa1;\n\n    // 10. Let trail be pointer % 94 + 0xA1.\n    var trail = (pointer % 94) + 0xa1;\n\n    // 11. Return two bytes whose values are lead and trail.\n    return [lead, trail];\n  };\n}\n\n/** @param {{fatal: boolean}} options */\nencoders['EUC-JP'] = function (options) {\n  return new EUCJPEncoder(options);\n};\n/** @param {{fatal: boolean}} options */\ndecoders['EUC-JP'] = function (options) {\n  return new EUCJPDecoder(options);\n};\n\n// 13.2 iso-2022-jp\n\n// 13.2.1 iso-2022-jp decoder\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\nfunction ISO2022JPDecoder(options) {\n  var fatal = options.fatal;\n  /** @enum */\n  var states = {\n    ASCII: 0,\n    Roman: 1,\n    Katakana: 2,\n    LeadByte: 3,\n    TrailByte: 4,\n    EscapeStart: 5,\n    Escape: 6\n  };\n  // iso-2022-jp's decoder has an associated iso-2022-jp decoder\n  // state (initially ASCII), iso-2022-jp decoder output state\n  // (initially ASCII), iso-2022-jp lead (initially 0x00), and\n  // iso-2022-jp output flag (initially unset).\n  var /** @type {number} */ iso2022jp_decoder_state = states.ASCII,\n    /** @type {number} */ iso2022jp_decoder_output_state = states.ASCII,\n    /** @type {number} */ iso2022jp_lead = 0x00,\n    /** @type {boolean} */ iso2022jp_output_flag = false;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n  this.handler = function (stream, bite) {\n    // switching on iso-2022-jp decoder state:\n    switch (iso2022jp_decoder_state) {\n      default:\n      case states.ASCII:\n        // ASCII\n        // Based on byte:\n\n        // 0x1B\n        if (bite === 0x1b) {\n          // Set iso-2022-jp decoder state to escape start and return\n          // continue.\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        // 0x00 to 0x7F, excluding 0x0E, 0x0F, and 0x1B\n        if (inRange(bite, 0x00, 0x7f) && bite !== 0x0e && bite !== 0x0f && bite !== 0x1b) {\n          // Unset the iso-2022-jp output flag and return a code point\n          // whose value is byte.\n          iso2022jp_output_flag = false;\n          return bite;\n        }\n\n        // end-of-stream\n        if (bite === end_of_stream) {\n          // Return finished.\n          return finished;\n        }\n\n        // Otherwise\n        // Unset the iso-2022-jp output flag and return error.\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.Roman:\n        // Roman\n        // Based on byte:\n\n        // 0x1B\n        if (bite === 0x1b) {\n          // Set iso-2022-jp decoder state to escape start and return\n          // continue.\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        // 0x5C\n        if (bite === 0x5c) {\n          // Unset the iso-2022-jp output flag and return code point\n          // U+00A5.\n          iso2022jp_output_flag = false;\n          return 0x00a5;\n        }\n\n        // 0x7E\n        if (bite === 0x7e) {\n          // Unset the iso-2022-jp output flag and return code point\n          // U+203E.\n          iso2022jp_output_flag = false;\n          return 0x203e;\n        }\n\n        // 0x00 to 0x7F, excluding 0x0E, 0x0F, 0x1B, 0x5C, and 0x7E\n        if (\n          inRange(bite, 0x00, 0x7f) &&\n          bite !== 0x0e &&\n          bite !== 0x0f &&\n          bite !== 0x1b &&\n          bite !== 0x5c &&\n          bite !== 0x7e\n        ) {\n          // Unset the iso-2022-jp output flag and return a code point\n          // whose value is byte.\n          iso2022jp_output_flag = false;\n          return bite;\n        }\n\n        // end-of-stream\n        if (bite === end_of_stream) {\n          // Return finished.\n          return finished;\n        }\n\n        // Otherwise\n        // Unset the iso-2022-jp output flag and return error.\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.Katakana:\n        // Katakana\n        // Based on byte:\n\n        // 0x1B\n        if (bite === 0x1b) {\n          // Set iso-2022-jp decoder state to escape start and return\n          // continue.\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        // 0x21 to 0x5F\n        if (inRange(bite, 0x21, 0x5f)) {\n          // Unset the iso-2022-jp output flag and return a code point\n          // whose value is 0xFF61 \u2212 0x21 + byte.\n          iso2022jp_output_flag = false;\n          return 0xff61 - 0x21 + bite;\n        }\n\n        // end-of-stream\n        if (bite === end_of_stream) {\n          // Return finished.\n          return finished;\n        }\n\n        // Otherwise\n        // Unset the iso-2022-jp output flag and return error.\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.LeadByte:\n        // Lead byte\n        // Based on byte:\n\n        // 0x1B\n        if (bite === 0x1b) {\n          // Set iso-2022-jp decoder state to escape start and return\n          // continue.\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        // 0x21 to 0x7E\n        if (inRange(bite, 0x21, 0x7e)) {\n          // Unset the iso-2022-jp output flag, set iso-2022-jp lead\n          // to byte, iso-2022-jp decoder state to trail byte, and\n          // return continue.\n          iso2022jp_output_flag = false;\n          iso2022jp_lead = bite;\n          iso2022jp_decoder_state = states.TrailByte;\n          return null;\n        }\n\n        // end-of-stream\n        if (bite === end_of_stream) {\n          // Return finished.\n          return finished;\n        }\n\n        // Otherwise\n        // Unset the iso-2022-jp output flag and return error.\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.TrailByte:\n        // Trail byte\n        // Based on byte:\n\n        // 0x1B\n        if (bite === 0x1b) {\n          // Set iso-2022-jp decoder state to escape start and return\n          // continue.\n          iso2022jp_decoder_state = states.EscapeStart;\n          return decoderError(fatal);\n        }\n\n        // 0x21 to 0x7E\n        if (inRange(bite, 0x21, 0x7e)) {\n          // 1. Set the iso-2022-jp decoder state to lead byte.\n          iso2022jp_decoder_state = states.LeadByte;\n\n          // 2. Let pointer be (iso-2022-jp lead \u2212 0x21) \u00D7 94 + byte \u2212 0x21.\n          var pointer = (iso2022jp_lead - 0x21) * 94 + bite - 0x21;\n\n          // 3. Let code point be the index code point for pointer in\n          // index jis0208.\n          var code_point = indexCodePointFor(pointer, index('jis0208'));\n\n          // 4. If code point is null, return error.\n          if (code_point === null) return decoderError(fatal);\n\n          // 5. Return a code point whose value is code point.\n          return code_point;\n        }\n\n        // end-of-stream\n        if (bite === end_of_stream) {\n          // Set the iso-2022-jp decoder state to lead byte, prepend\n          // byte to stream, and return error.\n          iso2022jp_decoder_state = states.LeadByte;\n          stream.prepend(bite);\n          return decoderError(fatal);\n        }\n\n        // Otherwise\n        // Set iso-2022-jp decoder state to lead byte and return\n        // error.\n        iso2022jp_decoder_state = states.LeadByte;\n        return decoderError(fatal);\n\n      case states.EscapeStart:\n        // Escape start\n\n        // 1. If byte is either 0x24 or 0x28, set iso-2022-jp lead to\n        // byte, iso-2022-jp decoder state to escape, and return\n        // continue.\n        if (bite === 0x24 || bite === 0x28) {\n          iso2022jp_lead = bite;\n          iso2022jp_decoder_state = states.Escape;\n          return null;\n        }\n\n        // 2. Prepend byte to stream.\n        stream.prepend(bite);\n\n        // 3. Unset the iso-2022-jp output flag, set iso-2022-jp\n        // decoder state to iso-2022-jp decoder output state, and\n        // return error.\n        iso2022jp_output_flag = false;\n        iso2022jp_decoder_state = iso2022jp_decoder_output_state;\n        return decoderError(fatal);\n\n      case states.Escape:\n        // Escape\n\n        // 1. Let lead be iso-2022-jp lead and set iso-2022-jp lead to\n        // 0x00.\n        var lead = iso2022jp_lead;\n        iso2022jp_lead = 0x00;\n\n        // 2. Let state be null.\n        var state = null;\n\n        // 3. If lead is 0x28 and byte is 0x42, set state to ASCII.\n        if (lead === 0x28 && bite === 0x42) state = states.ASCII;\n\n        // 4. If lead is 0x28 and byte is 0x4A, set state to Roman.\n        if (lead === 0x28 && bite === 0x4a) state = states.Roman;\n\n        // 5. If lead is 0x28 and byte is 0x49, set state to Katakana.\n        if (lead === 0x28 && bite === 0x49) state = states.Katakana;\n\n        // 6. If lead is 0x24 and byte is either 0x40 or 0x42, set\n        // state to lead byte.\n        if (lead === 0x24 && (bite === 0x40 || bite === 0x42)) state = states.LeadByte;\n\n        // 7. If state is non-null, run these substeps:\n        if (state !== null) {\n          // 1. Set iso-2022-jp decoder state and iso-2022-jp decoder\n          // output state to states.\n          iso2022jp_decoder_state = iso2022jp_decoder_state = state;\n\n          // 2. Let output flag be the iso-2022-jp output flag.\n          var output_flag = iso2022jp_output_flag;\n\n          // 3. Set the iso-2022-jp output flag.\n          iso2022jp_output_flag = true;\n\n          // 4. Return continue, if output flag is unset, and error\n          // otherwise.\n          return !output_flag ? null : decoderError(fatal);\n        }\n\n        // 8. Prepend lead and byte to stream.\n        stream.prepend([lead, bite]);\n\n        // 9. Unset the iso-2022-jp output flag, set iso-2022-jp\n        // decoder state to iso-2022-jp decoder output state and\n        // return error.\n        iso2022jp_output_flag = false;\n        iso2022jp_decoder_state = iso2022jp_decoder_output_state;\n        return decoderError(fatal);\n    }\n  };\n}\n\n// 13.2.2 iso-2022-jp encoder\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n */\nfunction ISO2022JPEncoder(options) {\n  var fatal = options.fatal;\n  // iso-2022-jp's encoder has an associated iso-2022-jp encoder\n  // state which is one of ASCII, Roman, and jis0208 (initially\n  // ASCII).\n  /** @enum */\n  var states = {\n    ASCII: 0,\n    Roman: 1,\n    jis0208: 2\n  };\n  var /** @type {number} */ iso2022jp_state = states.ASCII;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream and iso-2022-jp encoder\n    // state is not ASCII, prepend code point to stream, set\n    // iso-2022-jp encoder state to ASCII, and return three bytes\n    // 0x1B 0x28 0x42.\n    if (code_point === end_of_stream && iso2022jp_state !== states.ASCII) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.ASCII;\n      return [0x1b, 0x28, 0x42];\n    }\n\n    // 2. If code point is end-of-stream and iso-2022-jp encoder\n    // state is ASCII, return finished.\n    if (code_point === end_of_stream && iso2022jp_state === states.ASCII) return finished;\n\n    // 3. If ISO-2022-JP encoder state is ASCII or Roman, and code\n    // point is U+000E, U+000F, or U+001B, return error with U+FFFD.\n    if (\n      (iso2022jp_state === states.ASCII || iso2022jp_state === states.Roman) &&\n      (code_point === 0x000e || code_point === 0x000f || code_point === 0x001b)\n    ) {\n      return encoderError(0xfffd);\n    }\n\n    // 4. If iso-2022-jp encoder state is ASCII and code point is an\n    // ASCII code point, return a byte whose value is code point.\n    if (iso2022jp_state === states.ASCII && isASCIICodePoint(code_point)) return code_point;\n\n    // 5. If iso-2022-jp encoder state is Roman and code point is an\n    // ASCII code point, excluding U+005C and U+007E, or is U+00A5\n    // or U+203E, run these substeps:\n    if (\n      iso2022jp_state === states.Roman &&\n      ((isASCIICodePoint(code_point) && code_point !== 0x005c && code_point !== 0x007e) ||\n        code_point == 0x00a5 ||\n        code_point == 0x203e)\n    ) {\n      // 1. If code point is an ASCII code point, return a byte\n      // whose value is code point.\n      if (isASCIICodePoint(code_point)) return code_point;\n\n      // 2. If code point is U+00A5, return byte 0x5C.\n      if (code_point === 0x00a5) return 0x5c;\n\n      // 3. If code point is U+203E, return byte 0x7E.\n      if (code_point === 0x203e) return 0x7e;\n    }\n\n    // 6. If code point is an ASCII code point, and iso-2022-jp\n    // encoder state is not ASCII, prepend code point to stream, set\n    // iso-2022-jp encoder state to ASCII, and return three bytes\n    // 0x1B 0x28 0x42.\n    if (isASCIICodePoint(code_point) && iso2022jp_state !== states.ASCII) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.ASCII;\n      return [0x1b, 0x28, 0x42];\n    }\n\n    // 7. If code point is either U+00A5 or U+203E, and iso-2022-jp\n    // encoder state is not Roman, prepend code point to stream, set\n    // iso-2022-jp encoder state to Roman, and return three bytes\n    // 0x1B 0x28 0x4A.\n    if ((code_point === 0x00a5 || code_point === 0x203e) && iso2022jp_state !== states.Roman) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.Roman;\n      return [0x1b, 0x28, 0x4a];\n    }\n\n    // 8. If code point is U+2212, set it to U+FF0D.\n    if (code_point === 0x2212) code_point = 0xff0d;\n\n    // 9. Let pointer be the index pointer for code point in index\n    // jis0208.\n    var pointer = indexPointerFor(code_point, index('jis0208'));\n\n    // 10. If pointer is null, return error with code point.\n    if (pointer === null) return encoderError(code_point);\n\n    // 11. If iso-2022-jp encoder state is not jis0208, prepend code\n    // point to stream, set iso-2022-jp encoder state to jis0208,\n    // and return three bytes 0x1B 0x24 0x42.\n    if (iso2022jp_state !== states.jis0208) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.jis0208;\n      return [0x1b, 0x24, 0x42];\n    }\n\n    // 12. Let lead be floor(pointer / 94) + 0x21.\n    var lead = floor(pointer / 94) + 0x21;\n\n    // 13. Let trail be pointer % 94 + 0x21.\n    var trail = (pointer % 94) + 0x21;\n\n    // 14. Return two bytes whose values are lead and trail.\n    return [lead, trail];\n  };\n}\n\n/** @param {{fatal: boolean}} options */\nencoders['ISO-2022-JP'] = function (options) {\n  return new ISO2022JPEncoder(options);\n};\n/** @param {{fatal: boolean}} options */\ndecoders['ISO-2022-JP'] = function (options) {\n  return new ISO2022JPDecoder(options);\n};\n\n// 13.3 Shift_JIS\n\n// 13.3.1 Shift_JIS decoder\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\nfunction ShiftJISDecoder(options) {\n  var fatal = options.fatal;\n  // Shift_JIS's decoder has an associated Shift_JIS lead (initially\n  // 0x00).\n  var /** @type {number} */ Shift_JIS_lead = 0x00;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream and Shift_JIS lead is not 0x00,\n    // set Shift_JIS lead to 0x00 and return error.\n    if (bite === end_of_stream && Shift_JIS_lead !== 0x00) {\n      Shift_JIS_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    // 2. If byte is end-of-stream and Shift_JIS lead is 0x00,\n    // return finished.\n    if (bite === end_of_stream && Shift_JIS_lead === 0x00) return finished;\n\n    // 3. If Shift_JIS lead is not 0x00, let lead be Shift_JIS lead,\n    // let pointer be null, set Shift_JIS lead to 0x00, and then run\n    // these substeps:\n    if (Shift_JIS_lead !== 0x00) {\n      var lead = Shift_JIS_lead;\n      var pointer = null;\n      Shift_JIS_lead = 0x00;\n\n      // 1. Let offset be 0x40, if byte is less than 0x7F, and 0x41\n      // otherwise.\n      var offset = bite < 0x7f ? 0x40 : 0x41;\n\n      // 2. Let lead offset be 0x81, if lead is less than 0xA0, and\n      // 0xC1 otherwise.\n      var lead_offset = lead < 0xa0 ? 0x81 : 0xc1;\n\n      // 3. If byte is in the range 0x40 to 0x7E, inclusive, or 0x80\n      // to 0xFC, inclusive, set pointer to (lead \u2212 lead offset) \u00D7\n      // 188 + byte \u2212 offset.\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0x80, 0xfc))\n        pointer = (lead - lead_offset) * 188 + bite - offset;\n\n      // 4. If pointer is in the range 8836 to 10715, inclusive,\n      // return a code point whose value is 0xE000 \u2212 8836 + pointer.\n      if (inRange(pointer, 8836, 10715)) return 0xe000 - 8836 + pointer;\n\n      // 5. Let code point be null, if pointer is null, and the\n      // index code point for pointer in index jis0208 otherwise.\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('jis0208'));\n\n      // 6. If code point is null and byte is an ASCII byte, prepend\n      // byte to stream.\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite);\n\n      // 7. If code point is null, return error.\n      if (code_point === null) return decoderError(fatal);\n\n      // 8. Return a code point whose value is code point.\n      return code_point;\n    }\n\n    // 4. If byte is an ASCII byte or 0x80, return a code point\n    // whose value is byte.\n    if (isASCIIByte(bite) || bite === 0x80) return bite;\n\n    // 5. If byte is in the range 0xA1 to 0xDF, inclusive, return a\n    // code point whose value is 0xFF61 \u2212 0xA1 + byte.\n    if (inRange(bite, 0xa1, 0xdf)) return 0xff61 - 0xa1 + bite;\n\n    // 6. If byte is in the range 0x81 to 0x9F, inclusive, or 0xE0\n    // to 0xFC, inclusive, set Shift_JIS lead to byte and return\n    // continue.\n    if (inRange(bite, 0x81, 0x9f) || inRange(bite, 0xe0, 0xfc)) {\n      Shift_JIS_lead = bite;\n      return null;\n    }\n\n    // 7. Return error.\n    return decoderError(fatal);\n  };\n}\n\n// 13.3.2 Shift_JIS encoder\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n */\nfunction ShiftJISEncoder(options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished;\n\n    // 2. If code point is an ASCII code point or U+0080, return a\n    // byte whose value is code point.\n    if (isASCIICodePoint(code_point) || code_point === 0x0080) return code_point;\n\n    // 3. If code point is U+00A5, return byte 0x5C.\n    if (code_point === 0x00a5) return 0x5c;\n\n    // 4. If code point is U+203E, return byte 0x7E.\n    if (code_point === 0x203e) return 0x7e;\n\n    // 5. If code point is in the range U+FF61 to U+FF9F, inclusive,\n    // return a byte whose value is code point \u2212 0xFF61 + 0xA1.\n    if (inRange(code_point, 0xff61, 0xff9f)) return code_point - 0xff61 + 0xa1;\n\n    // 6. If code point is U+2212, set it to U+FF0D.\n    if (code_point === 0x2212) code_point = 0xff0d;\n\n    // 7. Let pointer be the index Shift_JIS pointer for code point.\n    var pointer = indexShiftJISPointerFor(code_point);\n\n    // 8. If pointer is null, return error with code point.\n    if (pointer === null) return encoderError(code_point);\n\n    // 9. Let lead be floor(pointer / 188).\n    var lead = floor(pointer / 188);\n\n    // 10. Let lead offset be 0x81, if lead is less than 0x1F, and\n    // 0xC1 otherwise.\n    var lead_offset = lead < 0x1f ? 0x81 : 0xc1;\n\n    // 11. Let trail be pointer % 188.\n    var trail = pointer % 188;\n\n    // 12. Let offset be 0x40, if trail is less than 0x3F, and 0x41\n    // otherwise.\n    var offset = trail < 0x3f ? 0x40 : 0x41;\n\n    // 13. Return two bytes whose values are lead + lead offset and\n    // trail + offset.\n    return [lead + lead_offset, trail + offset];\n  };\n}\n\n/** @param {{fatal: boolean}} options */\nencoders['Shift_JIS'] = function (options) {\n  return new ShiftJISEncoder(options);\n};\n/** @param {{fatal: boolean}} options */\ndecoders['Shift_JIS'] = function (options) {\n  return new ShiftJISDecoder(options);\n};\n\n//\n// 14. Legacy multi-byte Korean encodings\n//\n\n// 14.1 euc-kr\n\n// 14.1.1 euc-kr decoder\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\nfunction EUCKRDecoder(options) {\n  var fatal = options.fatal;\n\n  // euc-kr's decoder has an associated euc-kr lead (initially 0x00).\n  var /** @type {number} */ euckr_lead = 0x00;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream and euc-kr lead is not 0x00, set\n    // euc-kr lead to 0x00 and return error.\n    if (bite === end_of_stream && euckr_lead !== 0) {\n      euckr_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    // 2. If byte is end-of-stream and euc-kr lead is 0x00, return\n    // finished.\n    if (bite === end_of_stream && euckr_lead === 0) return finished;\n\n    // 3. If euc-kr lead is not 0x00, let lead be euc-kr lead, let\n    // pointer be null, set euc-kr lead to 0x00, and then run these\n    // substeps:\n    if (euckr_lead !== 0x00) {\n      var lead = euckr_lead;\n      var pointer = null;\n      euckr_lead = 0x00;\n\n      // 1. If byte is in the range 0x41 to 0xFE, inclusive, set\n      // pointer to (lead \u2212 0x81) \u00D7 190 + (byte \u2212 0x41).\n      if (inRange(bite, 0x41, 0xfe)) pointer = (lead - 0x81) * 190 + (bite - 0x41);\n\n      // 2. Let code point be null, if pointer is null, and the\n      // index code point for pointer in index euc-kr otherwise.\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('euc-kr'));\n\n      // 3. If code point is null and byte is an ASCII byte, prepend\n      // byte to stream.\n      if (pointer === null && isASCIIByte(bite)) stream.prepend(bite);\n\n      // 4. If code point is null, return error.\n      if (code_point === null) return decoderError(fatal);\n\n      // 5. Return a code point whose value is code point.\n      return code_point;\n    }\n\n    // 4. If byte is an ASCII byte, return a code point whose value\n    // is byte.\n    if (isASCIIByte(bite)) return bite;\n\n    // 5. If byte is in the range 0x81 to 0xFE, inclusive, set\n    // euc-kr lead to byte and return continue.\n    if (inRange(bite, 0x81, 0xfe)) {\n      euckr_lead = bite;\n      return null;\n    }\n\n    // 6. Return error.\n    return decoderError(fatal);\n  };\n}\n\n// 14.1.2 euc-kr encoder\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n */\nfunction EUCKREncoder(options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished;\n\n    // 2. If code point is an ASCII code point, return a byte whose\n    // value is code point.\n    if (isASCIICodePoint(code_point)) return code_point;\n\n    // 3. Let pointer be the index pointer for code point in index\n    // euc-kr.\n    var pointer = indexPointerFor(code_point, index('euc-kr'));\n\n    // 4. If pointer is null, return error with code point.\n    if (pointer === null) return encoderError(code_point);\n\n    // 5. Let lead be floor(pointer / 190) + 0x81.\n    var lead = floor(pointer / 190) + 0x81;\n\n    // 6. Let trail be pointer % 190 + 0x41.\n    var trail = (pointer % 190) + 0x41;\n\n    // 7. Return two bytes whose values are lead and trail.\n    return [lead, trail];\n  };\n}\n\n/** @param {{fatal: boolean}} options */\nencoders['EUC-KR'] = function (options) {\n  return new EUCKREncoder(options);\n};\n/** @param {{fatal: boolean}} options */\ndecoders['EUC-KR'] = function (options) {\n  return new EUCKRDecoder(options);\n};\n\n//\n// 15. Legacy miscellaneous encodings\n//\n\n// 15.1 replacement\n\n// Not needed - API throws RangeError\n\n// 15.2 Common infrastructure for utf-16be and utf-16le\n\n/**\n * @param {number} code_unit\n * @param {boolean} utf16be\n * @return {!Array.<number>} bytes\n */\nfunction convertCodeUnitToBytes(code_unit, utf16be) {\n  // 1. Let byte1 be code unit >> 8.\n  var byte1 = code_unit >> 8;\n\n  // 2. Let byte2 be code unit & 0x00FF.\n  var byte2 = code_unit & 0x00ff;\n\n  // 3. Then return the bytes in order:\n  // utf-16be flag is set: byte1, then byte2.\n  if (utf16be) return [byte1, byte2];\n  // utf-16be flag is unset: byte2, then byte1.\n  return [byte2, byte1];\n}\n\n// 15.2.1 shared utf-16 decoder\n/**\n * @constructor\n * @implements {Decoder}\n * @param {boolean} utf16_be True if big-endian, false if little-endian.\n * @param {{fatal: boolean}} options\n */\nfunction UTF16Decoder(utf16_be, options) {\n  var fatal = options.fatal;\n  var /** @type {?number} */ utf16_lead_byte = null,\n    /** @type {?number} */ utf16_lead_surrogate = null;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream and either utf-16 lead byte or\n    // utf-16 lead surrogate is not null, set utf-16 lead byte and\n    // utf-16 lead surrogate to null, and return error.\n    if (bite === end_of_stream && (utf16_lead_byte !== null || utf16_lead_surrogate !== null)) {\n      return decoderError(fatal);\n    }\n\n    // 2. If byte is end-of-stream and utf-16 lead byte and utf-16\n    // lead surrogate are null, return finished.\n    if (bite === end_of_stream && utf16_lead_byte === null && utf16_lead_surrogate === null) {\n      return finished;\n    }\n\n    // 3. If utf-16 lead byte is null, set utf-16 lead byte to byte\n    // and return continue.\n    if (utf16_lead_byte === null) {\n      utf16_lead_byte = bite;\n      return null;\n    }\n\n    // 4. Let code unit be the result of:\n    var code_unit;\n    if (utf16_be) {\n      // utf-16be decoder flag is set\n      //   (utf-16 lead byte << 8) + byte.\n      code_unit = (utf16_lead_byte << 8) + bite;\n    } else {\n      // utf-16be decoder flag is unset\n      //   (byte << 8) + utf-16 lead byte.\n      code_unit = (bite << 8) + utf16_lead_byte;\n    }\n    // Then set utf-16 lead byte to null.\n    utf16_lead_byte = null;\n\n    // 5. If utf-16 lead surrogate is not null, let lead surrogate\n    // be utf-16 lead surrogate, set utf-16 lead surrogate to null,\n    // and then run these substeps:\n    if (utf16_lead_surrogate !== null) {\n      var lead_surrogate = utf16_lead_surrogate;\n      utf16_lead_surrogate = null;\n\n      // 1. If code unit is in the range U+DC00 to U+DFFF,\n      // inclusive, return a code point whose value is 0x10000 +\n      // ((lead surrogate \u2212 0xD800) << 10) + (code unit \u2212 0xDC00).\n      if (inRange(code_unit, 0xdc00, 0xdfff)) {\n        return 0x10000 + (lead_surrogate - 0xd800) * 0x400 + (code_unit - 0xdc00);\n      }\n\n      // 2. Prepend the sequence resulting of converting code unit\n      // to bytes using utf-16be decoder flag to stream and return\n      // error.\n      stream.prepend(convertCodeUnitToBytes(code_unit, utf16_be));\n      return decoderError(fatal);\n    }\n\n    // 6. If code unit is in the range U+D800 to U+DBFF, inclusive,\n    // set utf-16 lead surrogate to code unit and return continue.\n    if (inRange(code_unit, 0xd800, 0xdbff)) {\n      utf16_lead_surrogate = code_unit;\n      return null;\n    }\n\n    // 7. If code unit is in the range U+DC00 to U+DFFF, inclusive,\n    // return error.\n    if (inRange(code_unit, 0xdc00, 0xdfff)) return decoderError(fatal);\n\n    // 8. Return code point code unit.\n    return code_unit;\n  };\n}\n\n// 15.2.2 shared utf-16 encoder\n/**\n * @constructor\n * @implements {Encoder}\n * @param {boolean} utf16_be True if big-endian, false if little-endian.\n * @param {{fatal: boolean}} options\n */\nfunction UTF16Encoder(utf16_be, options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished;\n\n    // 2. If code point is in the range U+0000 to U+FFFF, inclusive,\n    // return the sequence resulting of converting code point to\n    // bytes using utf-16be encoder flag.\n    if (inRange(code_point, 0x0000, 0xffff)) return convertCodeUnitToBytes(code_point, utf16_be);\n\n    // 3. Let lead be ((code point \u2212 0x10000) >> 10) + 0xD800,\n    // converted to bytes using utf-16be encoder flag.\n    var lead = convertCodeUnitToBytes(((code_point - 0x10000) >> 10) + 0xd800, utf16_be);\n\n    // 4. Let trail be ((code point \u2212 0x10000) & 0x3FF) + 0xDC00,\n    // converted to bytes using utf-16be encoder flag.\n    var trail = convertCodeUnitToBytes(((code_point - 0x10000) & 0x3ff) + 0xdc00, utf16_be);\n\n    // 5. Return a byte sequence of lead followed by trail.\n    return lead.concat(trail);\n  };\n}\n\n// 15.3 utf-16be\n// 15.3.1 utf-16be decoder\n/** @param {{fatal: boolean}} options */\nencoders['UTF-16BE'] = function (options) {\n  return new UTF16Encoder(true, options);\n};\n// 15.3.2 utf-16be encoder\n/** @param {{fatal: boolean}} options */\ndecoders['UTF-16BE'] = function (options) {\n  return new UTF16Decoder(true, options);\n};\n\n// 15.4 utf-16le\n// 15.4.1 utf-16le decoder\n/** @param {{fatal: boolean}} options */\nencoders['UTF-16LE'] = function (options) {\n  return new UTF16Encoder(false, options);\n};\n// 15.4.2 utf-16le encoder\n/** @param {{fatal: boolean}} options */\ndecoders['UTF-16LE'] = function (options) {\n  return new UTF16Decoder(false, options);\n};\n\n// 15.5 x-user-defined\n\n// 15.5.1 x-user-defined decoder\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\nfunction XUserDefinedDecoder(options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream, return finished.\n    if (bite === end_of_stream) return finished;\n\n    // 2. If byte is an ASCII byte, return a code point whose value\n    // is byte.\n    if (isASCIIByte(bite)) return bite;\n\n    // 3. Return a code point whose value is 0xF780 + byte \u2212 0x80.\n    return 0xf780 + bite - 0x80;\n  };\n}\n\n// 15.5.2 x-user-defined encoder\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n */\nfunction XUserDefinedEncoder(options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n  this.handler = function (stream, code_point) {\n    // 1.If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished;\n\n    // 2. If code point is an ASCII code point, return a byte whose\n    // value is code point.\n    if (isASCIICodePoint(code_point)) return code_point;\n\n    // 3. If code point is in the range U+F780 to U+F7FF, inclusive,\n    // return a byte whose value is code point \u2212 0xF780 + 0x80.\n    if (inRange(code_point, 0xf780, 0xf7ff)) return code_point - 0xf780 + 0x80;\n\n    // 4. Return error with code point.\n    return encoderError(code_point);\n  };\n}\n\n/** @param {{fatal: boolean}} options */\nencoders['x-user-defined'] = function (options) {\n  return new XUserDefinedEncoder(options);\n};\n/** @param {{fatal: boolean}} options */\ndecoders['x-user-defined'] = function (options) {\n  return new XUserDefinedDecoder(options);\n};\n\n// FORK\n// if (!global['TextEncoder']) global['TextEncoder'] = TextEncoder;\n// if (!global['TextDecoder']) global['TextDecoder'] = TextDecoder;\n// babel.config.js skip transpiling files in `libs/`\n// module.exports = {TextEncoder, TextDecoder};\nexport {TextEncoder, TextDecoder};\n", "export const REJECTED_STATUS = 'rejected';\nexport const FULFILLED_STATUS = 'fulfilled';\n\n/**\n * Handle list of promises and return all values regardless of results.\n * Polyfill for Promise.allSettled() method.\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/allSettled\n * @param promises\n */\nexport function allSettled(promises: Promise<any>[]): Promise<any> {\n  const mappedPromises = promises.map((promise) => {\n    return promise\n      .then((value) => {\n        return {status: FULFILLED_STATUS, value};\n      })\n      .catch((reason) => {\n        return {status: REJECTED_STATUS, reason};\n      });\n  });\n  return Promise.all(mappedPromises);\n}\n", "// btoa, atob polyfills for Node.js\n// Note: The atob and btoa functions (not just the polyfills!) are not unicode safe\n// But still useful for unit testing\n\nexport function atob(string) {\n  return Buffer.from(string).toString('base64');\n}\n\nexport function btoa(base64) {\n  return Buffer.from(base64, 'base64').toString('ascii');\n}\n", "/**\n * Polyfill for Browser Headers\n * Based on https://github.com/github/fetch under MIT license\n */\nexport default class Headers {\n  map: {};\n\n  constructor(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach((value, name) => this.append(name, value));\n    } else if (Array.isArray(headers)) {\n      headers.forEach((header) => this.append(header[0], header[1]));\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach((name) => this.append(name, headers[name]));\n    }\n  }\n\n  append(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    const oldValue = this.map[name];\n    this.map[name] = oldValue ? `${oldValue}, ${value}` : value;\n  }\n\n  delete(name) {\n    delete this.map[normalizeName(name)];\n  }\n\n  get(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null;\n  }\n\n  has(name) {\n    return this.map.hasOwnProperty(normalizeName(name));\n  }\n\n  set(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  }\n\n  forEach(visitor, thisArg = null) {\n    for (const name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        if (thisArg) {\n          visitor.call(thisArg, this.map[name], name, this);\n        } else {\n          visitor(this.map[name], name, this);\n        }\n      }\n    }\n  }\n\n  keys() {\n    const items: any[] = [];\n    this.forEach(function (value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items);\n  }\n\n  values() {\n    const items: any[] = [];\n    this.forEach(function (value) {\n      items.push(value);\n    });\n    return iteratorFor(items);\n  }\n\n  entries() {\n    const items: any[] = [];\n    this.forEach(function (value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items);\n  }\n\n  *[Symbol.iterator]() {\n    // @ts-ignore must have a '[Symbol.iterator]()' method that returns an iterator.\n    yield* this.entries();\n  }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name);\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name) || name === '') {\n    throw new TypeError('Invalid character in header field name');\n  }\n  return name.toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value);\n  }\n  return value;\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  const iterator = {\n    next() {\n      const value = items.shift();\n      return {done: value === undefined, value};\n    }\n  };\n\n  iterator[Symbol.iterator] = function () {\n    return iterator;\n  };\n\n  return iterator;\n}\n", "export function assert(condition: any, message?: string): void {\n  if (!condition) {\n    throw new Error(`@loaders.gl/polyfills assertion ${message}`);\n  }\n}\n", "import fs from 'fs'; // `fs` will be empty object in browsers (see package.json \"browser\" field).\nimport http from 'http';\nimport https from 'https';\nimport zlib from 'zlib';\n\nimport {toArrayBuffer} from './decode-data-uri.node';\n\nfunction isRequestURL(url: string): boolean {\n  return url.startsWith('http:') || url.startsWith('https:');\n}\n\n// Returns a promise that resolves to a readable stream\nexport async function createReadStream(url, options): Promise<any> {\n  // Handle file streams in node\n  if (!isRequestURL(url)) {\n    const noqueryUrl = url.split('?')[0];\n    // Now open the stream\n    return await new Promise((resolve, reject) => {\n      // @ts-ignore\n      const stream = fs.createReadStream(noqueryUrl, {encoding: null});\n      stream.once('readable', () => resolve(stream));\n      stream.on('error', (error) => reject(error));\n    });\n  }\n\n  // HANDLE HTTP/HTTPS REQUESTS IN NODE\n  // TODO: THIS IS BAD SINCE WE RETURN A PROMISE INSTEAD OF A STREAM\n  return await new Promise((resolve, reject) => {\n    const requestFunction = url.startsWith('https:') ? https.request : http.request;\n    const requestOptions = getRequestOptions(url, options);\n    const req = requestFunction(requestOptions, (res) => resolve(res));\n    req.on('error', (error) => reject(error));\n    req.end();\n  });\n}\n\nexport function decompressReadStream(readStream, headers) {\n  switch (headers.get('content-encoding')) {\n    case 'br':\n      return readStream.pipe(zlib.createBrotliDecompress());\n    case 'gzip':\n      return readStream.pipe(zlib.createGunzip());\n    case 'deflate':\n      return readStream.pipe(zlib.createDeflate());\n    default:\n      // No compression or an unknown one, just return it as is\n      return readStream;\n  }\n}\n\nexport async function concatenateReadStream(readStream): Promise<ArrayBuffer> {\n  const arrayBufferChunks: ArrayBuffer[] = [];\n\n  return await new Promise((resolve, reject) => {\n    readStream.on('error', (error) => reject(error));\n\n    // Once the readable callback has been added, stream switches to \"flowing mode\"\n    // In Node 10 (but not 12 and 14) this causes `data` and `end` to never be called unless we read data here\n    readStream.on('readable', () => readStream.read());\n\n    readStream.on('data', (chunk) => {\n      if (typeof chunk === 'string') {\n        reject(new Error('Read stream not binary'));\n      }\n      arrayBufferChunks.push(toArrayBuffer(chunk));\n    });\n\n    readStream.on('end', () => {\n      const arrayBuffer = concatenateArrayBuffers(arrayBufferChunks);\n      resolve(arrayBuffer);\n    });\n  });\n}\n\n// HELPERS\n\nfunction getRequestOptions(url: string, options?: {fetch?: typeof fetch; headers?}) {\n  // Ensure header keys are lower case so that we can merge without duplicates\n  const originalHeaders = options?.headers || {};\n  const headers = {};\n  for (const key of Object.keys(originalHeaders)) {\n    headers[key.toLowerCase()] = originalHeaders[key];\n  }\n\n  // Add default accept-encoding to headers\n  headers['accept-encoding'] = headers['accept-encoding'] || 'gzip,br,deflate';\n\n  const urlObject = new URL(url);\n  return {\n    hostname: urlObject.hostname,\n    path: urlObject.pathname,\n    method: 'GET',\n    // Add options and user provided 'options.fetch' overrides if available\n    ...options,\n    ...options?.fetch,\n    // Override with updated headers with accepted encodings:\n    headers,\n    port: urlObject.port\n  };\n}\n\n/**\n * Concatenate a sequence of ArrayBuffers\n * @return A concatenated ArrayBuffer\n * @note duplicates loader-utils since polyfills should be independent\n */\nexport function concatenateArrayBuffers(sources: (ArrayBuffer | Uint8Array)[]): ArrayBuffer {\n  // Make sure all inputs are wrapped in typed arrays\n  const sourceArrays = sources.map((source2) =>\n    source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2\n  );\n\n  // Get length of all inputs\n  const byteLength = sourceArrays.reduce((length, typedArray) => length + typedArray.byteLength, 0);\n\n  // Allocate array with space for all inputs\n  const result = new Uint8Array(byteLength);\n\n  // Copy the subarrays\n  let offset = 0;\n  for (const sourceArray of sourceArrays) {\n    result.set(sourceArray, offset);\n    offset += sourceArray.byteLength;\n  }\n\n  // We work with ArrayBuffers, discard the typed array wrapper\n  return result.buffer;\n}\n", "// Based on binary-gltf-utils under MIT license: Copyright (c) 2016-17 Karl Cheng\n\nconst isArrayBuffer = (x) => x && x instanceof ArrayBuffer;\nconst isBuffer = (x) => x && x instanceof Buffer;\n\n/**\n * Parses a data URI into a buffer, as well as retrieving its declared MIME type.\n *\n * @param {string} uri - a data URI (assumed to be valid)\n * @returns {Object} { buffer, mimeType }\n */\nexport function decodeDataUri(uri: string): {arrayBuffer: ArrayBuffer; mimeType: string} {\n  const dataIndex = uri.indexOf(',');\n\n  let buffer;\n  let mimeType;\n  if (uri.slice(dataIndex - 7, dataIndex) === ';base64') {\n    buffer = Buffer.from(uri.slice(dataIndex + 1), 'base64');\n    mimeType = uri.slice(5, dataIndex - 7).trim();\n  } else {\n    buffer = Buffer.from(decodeURIComponent(uri.slice(dataIndex + 1)));\n    mimeType = uri.slice(5, dataIndex).trim();\n  }\n\n  if (!mimeType) {\n    mimeType = 'text/plain;charset=US-ASCII';\n  } else if (mimeType.startsWith(';')) {\n    mimeType = `text/plain${mimeType}`;\n  }\n\n  return {arrayBuffer: toArrayBuffer(buffer), mimeType};\n}\n\n/**\n * @param data\n * @todo Duplicate of core\n */\nexport function toArrayBuffer(data: unknown): ArrayBuffer {\n  if (isArrayBuffer(data)) {\n    return data as ArrayBuffer;\n  }\n\n  // TODO - per docs we should just be able to call buffer.buffer, but there are issues\n  if (isBuffer(data)) {\n    // @ts-expect-error\n    const typedArray = new Uint8Array(data);\n    return typedArray.buffer;\n  }\n\n  // Careful - Node Buffers will look like ArrayBuffers (keep after isBuffer)\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    const text = data;\n    const uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  // HACK to support Blob polyfill\n  // @ts-expect-error\n  if (data && typeof data === 'object' && data._toArrayBuffer) {\n    // @ts-expect-error\n    return data._toArrayBuffer();\n  }\n\n  throw new Error(`toArrayBuffer(${JSON.stringify(data, null, 2).slice(10)})`);\n}\n", "import {assert} from '../../utils/assert';\nimport {decompressReadStream, concatenateReadStream} from './utils/stream-utils.node';\nimport Headers from './headers.node';\n\nconst isBoolean = (x) => typeof x === 'boolean';\nconst isFunction = (x) => typeof x === 'function';\nconst isObject = (x) => x !== null && typeof x === 'object';\nconst isReadableNodeStream = (x) =>\n  isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\n\n/**\n * Polyfill for Browser Response\n *\n * Under Node.js we return a mock \"fetch response object\"\n * so that apps can use the same API as in the browser.\n *\n * Note: This is intended to be a \"lightweight\" implementation and will have limitations.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/Response\n */\nimport {Readable} from 'stream';\n\nexport default class Response {\n  readonly ok: boolean;\n  readonly status: number;\n  readonly statusText: string;\n  readonly headers: Headers;\n  readonly url: string;\n  bodyUsed: boolean = false;\n  private readonly _body;\n\n  // TODO - handle ArrayBuffer, ArrayBufferView, Buffer\n  constructor(\n    body,\n    options: {\n      headers?;\n      status?: number;\n      statusText?: string;\n      url: string;\n    }\n  ) {\n    const {headers, status = 200, statusText = 'OK', url} = options || {};\n\n    this.url = url;\n    this.ok = status === 200;\n    this.status = status; // TODO - handle errors and set status\n    this.statusText = statusText;\n    this.headers = new Headers(options?.headers || {});\n\n    // Check for content-encoding and create a decompression stream\n    if (isReadableNodeStream(body)) {\n      this._body = decompressReadStream(body, headers);\n    } else if (typeof body === 'string') {\n      this._body = Readable.from([new TextEncoder().encode(body)]);\n    } else {\n      this._body = Readable.from([body || new ArrayBuffer(0)]);\n    }\n  }\n\n  // Subset of Properties\n\n  // Returns a readable stream to the \"body\" of the response (or file)\n  get body() {\n    assert(!this.bodyUsed);\n    assert(isReadableNodeStream(this._body)); // Not implemented: conversion of ArrayBuffer etc to stream\n    this.bodyUsed = true;\n    return this._body;\n  }\n\n  // Subset of Methods\n\n  async arrayBuffer() {\n    if (!isReadableNodeStream(this._body)) {\n      return this._body || new ArrayBuffer(0);\n    }\n    const data = await concatenateReadStream(this._body);\n    return data;\n  }\n\n  async text() {\n    const arrayBuffer = await this.arrayBuffer();\n    const textDecoder = new TextDecoder();\n    return textDecoder.decode(arrayBuffer);\n  }\n\n  async json() {\n    const text = await this.text();\n    return JSON.parse(text);\n  }\n\n  async blob() {\n    if (typeof Blob === 'undefined') {\n      throw new Error('Blob polyfill not installed');\n    }\n    return new Blob([await this.arrayBuffer()]);\n  }\n}\n", "import fs from 'fs'; // `fs` will be empty object in browsers (see package.json \"browser\" field).\nimport Response from './response.node';\nimport Headers from './headers.node';\n\nimport {decodeDataUri} from './utils/decode-data-uri.node';\nimport {createReadStream} from './utils/stream-utils.node';\n\nconst isDataURL = (url) => url.startsWith('data:');\nconst isRequestURL = (url) => url.startsWith('http:') || url.startsWith('https:');\n\n/**\n * Emulation of Browser fetch for Node.js\n * @param url\n * @param options\n */\nexport default async function fetchNode(url, options) {\n  try {\n    // Handle data urls in node, to match `fetch``\n    // Note - this loses the MIME type, data URIs are handled directly in fetch\n    if (isDataURL(url)) {\n      const {arrayBuffer, mimeType} = decodeDataUri(url);\n      const response = new Response(arrayBuffer, {\n        headers: {'content-type': mimeType},\n        url\n      });\n      return response;\n    }\n\n    // Automatically decompress gzipped files with .gz extension\n    const syntheticResponseHeaders = {};\n    const originalUrl = url;\n    if (url.endsWith('.gz')) {\n      url = url.slice(0, -3);\n      syntheticResponseHeaders['content-encoding'] = 'gzip';\n    }\n\n    // Need to create the stream in advance since Response constructor needs to be sync\n    const body = await createReadStream(originalUrl, options);\n    const headers = getHeaders(url, body, syntheticResponseHeaders);\n    const {status, statusText} = getStatus(body);\n\n    const followRedirect =\n      !options || options.followRedirect || options.followRedirect === undefined;\n\n    if (status >= 300 && status < 400 && headers.has('location') && followRedirect) {\n      const redirectUrl = generateRedirectUrl(url, headers.get('location'));\n\n      // Redirect\n      return await fetchNode(redirectUrl, options);\n    }\n    return new Response(body, {headers, status, statusText, url});\n  } catch (error) {\n    // TODO - what error code to use here?\n    return new Response(null, {status: 400, statusText: String(error), url});\n  }\n}\n\n/**\n * Generate redirect url from location without origin and protocol.\n * @param originalUrl\n * @param redirectUrl\n */\nfunction generateRedirectUrl(originalUrl: string, location: string): string {\n  if (location.startsWith('http')) {\n    return location;\n  }\n  // If url doesn't have origin and protocol just extend current url origin with location.\n  const url = new URL(originalUrl);\n  url.pathname = location;\n\n  return url.href;\n}\n\n// HELPER FUNCTIONS\n// PRIVATE\n\nfunction getStatus(httpResponse) {\n  if (httpResponse.statusCode) {\n    return {status: httpResponse.statusCode, statusText: httpResponse.statusMessage || 'NA'};\n  }\n  return {status: 200, statusText: 'OK'};\n}\n\nfunction getHeaders(url, httpResponse, additionalHeaders = {}) {\n  const headers = {};\n\n  if (httpResponse && httpResponse.headers) {\n    const httpHeaders = httpResponse.headers;\n    for (const key in httpHeaders) {\n      const header = httpHeaders[key];\n      headers[key.toLowerCase()] = String(header);\n    }\n  }\n\n  // Fix up content length if we can for best progress experience\n  if (!headers['content-length']) {\n    const contentLength = getContentLength(url);\n    if (Number.isFinite(contentLength)) {\n      headers['content-length'] = contentLength;\n    }\n  }\n\n  Object.assign(headers, additionalHeaders);\n\n  return new Headers(headers);\n}\n\nfunction getContentLength(url) {\n  if (isRequestURL(url)) {\n    // Needs to be read from actual headers\n    return null;\n  } else if (isDataURL(url)) {\n    // TODO - remove media type etc\n    return url.length - 'data:'.length;\n  }\n  // File URL\n  // TODO - how to handle non-existing file, this presumably just throws\n  try {\n    // strip query params from URL\n    const noqueryUrl = url.split('?')[0];\n    const stats = fs.statSync(noqueryUrl);\n    return stats.size;\n  } catch (error) {\n    // ignore for now\n  }\n\n  return null;\n}\n", "// Use stackgl modules for DOM-less reading and writing of images\n\nimport savePixels from 'save-pixels';\nimport ndarray from 'ndarray';\nimport {bufferToArrayBuffer} from '../buffer/to-array-buffer.node';\n\n/**\n * Returns data bytes representing a compressed image in PNG or JPG format,\n * This data can be saved using file system (f) methods or\n * used in a request.\n * @param image to save\n * @param options\n * @param options.type='png' - png, jpg or image/png, image/jpg are valid\n * @param options.dataURI - Whether to include a data URI header\n * @return {*} bytes\n */\nexport function encodeImageToStreamNode(\n  image: {data: any; width: number; height: number},\n  options: {type?: string; dataURI?: string}\n) {\n  // Support MIME type strings\n  const type = options.type ? options.type.replace('image/', '') : 'jpeg';\n  const pixels = ndarray(image.data, [image.width, image.height, 4], [4, image.width * 4, 1], 0);\n\n  // Note: savePixels returns a stream\n  return savePixels(pixels, type, options);\n}\n\nexport function encodeImageNode(image, options) {\n  const imageStream = encodeImageToStreamNode(image, options);\n\n  return new Promise((resolve) => {\n    const buffers: any[] = [];\n    imageStream.on('data', (buffer) => buffers.push(buffer));\n    // TODO - convert to arraybuffer?\n    imageStream.on('end', () => {\n      const buffer = Buffer.concat(buffers);\n      resolve(bufferToArrayBuffer(buffer));\n    });\n  });\n}\n", "export function bufferToArrayBuffer(buffer) {\n  // TODO - per docs we should just be able to call buffer.buffer, but there are issues\n  if (Buffer.isBuffer(buffer)) {\n    const typedArray = new Uint8Array(buffer);\n    return typedArray.buffer;\n  }\n  return buffer;\n}\n", "import getPixels from 'get-pixels';\nimport {assert} from '../../utils/assert';\nimport util from 'util';\n\n// Note: These types are also defined in @loaders.gl/images and need to be kept in sync\ntype NDArray = {\n  shape: number[];\n  data: Uint8Array;\n  width: number;\n  height: number;\n  components: number;\n  layers: number[];\n};\n\nexport async function parseImageNode(arrayBuffer: ArrayBuffer, mimeType: string): Promise<NDArray> {\n  assert(mimeType, 'MIMEType is required to parse image under Node.js');\n\n  // TODO - check if getPixels callback is asynchronous if provided with buffer input\n  // if not, parseImage can be a sync function\n  const getPixelsAsync = util.promisify(getPixels);\n\n  const buffer = arrayBuffer instanceof Buffer ? arrayBuffer : Buffer.from(arrayBuffer);\n\n  const ndarray = await getPixelsAsync(buffer, mimeType);\n\n  const shape = [...ndarray.shape];\n  const layers = ndarray.shape.length === 4 ? ndarray.shape.shift() : 1;\n\n  // extract width/height etc\n  return {\n    shape,\n    data: ndarray.data,\n    width: ndarray.shape[0],\n    height: ndarray.shape[1],\n    components: ndarray.shape[2],\n    layers\n  };\n}\n", "import {ReadableStream as WSPReadableStream} from 'web-streams-polyfill';\n\n// Want a polyfill, but please don't install it\n// @ts-ignore\ndelete global.ReadableStream;\n\n// @ts-ignore\nexport class ReadableStreamPolyfill<T> extends WSPReadableStream<T> implements ReadableStream {}\n", "/**\n * Forked from @gozala's web-blob under MIT license\n * @see https://github.com/Gozala/web-blob\n */\nexport class BlobStreamController {\n  private chunks: Iterator<Uint8Array>;\n  private isWorking: boolean = false;\n  private isCancelled: boolean = false;\n\n  /**\n   * @param chunks\n   */\n  constructor(chunks: Iterator<Uint8Array>) {\n    this.chunks = chunks;\n  }\n\n  /**\n   * @param controller\n   */\n  start(controller: ReadableStreamDefaultController) {\n    this.work(controller); // eslint-disable-line @typescript-eslint/no-floating-promises\n  }\n\n  /**\n   *\n   * @param controller\n   */\n  async work(controller: ReadableStreamDefaultController) {\n    const {chunks} = this;\n\n    this.isWorking = true;\n    while (!this.isCancelled && (controller.desiredSize || 0) > 0) {\n      let next: {done?: boolean; value?: Uint8Array} | undefined;\n      try {\n        next = chunks.next();\n      } catch (error) {\n        controller.error(error);\n        break;\n      }\n\n      if (next) {\n        if (!next.done && !this.isCancelled) {\n          controller.enqueue(next.value);\n        } else {\n          controller.close();\n        }\n      }\n    }\n\n    this.isWorking = false;\n  }\n\n  /**\n   *\n   * @param {ReadableStreamDefaultController} controller\n   */\n  pull(controller) {\n    if (!this.isWorking) {\n      this.work(controller); // eslint-disable-line @typescript-eslint/no-floating-promises\n    }\n  }\n  cancel() {\n    this.isCancelled = true;\n  }\n}\n", "/**\n * Forked from @gozala's web-blob under MIT license\n * @see https://github.com/Gozala/web-blob\n */\nimport {ReadableStreamPolyfill} from './readable-stream';\nimport {BlobStreamController} from './blob-stream-controller';\n\n/**\n * Blob stream is a `ReadableStream` extension optimized to have minimal\n * overhead when consumed as `AsyncIterable<Uint8Array>`.\n * extends {ReadableStream<Uint8Array>}\n * implements {AsyncIterable<Uint8Array>}\n */\n// @ts-ignore\nexport class BlobStream<T> extends ReadableStreamPolyfill<T> {\n  private readonly _chunks: Uint8Array[];\n  /**\n   * @param chunks\n   */\n  constructor(chunks) {\n    // @ts-ignore\n    super(new BlobStreamController(chunks.values()), {type: 'bytes'});\n    /** @private */\n    this._chunks = chunks;\n  }\n\n  /**\n   * @property [_options.preventCancel]\n   */\n  // @ts-ignore\n  async *[Symbol.asyncIterator](_options?: {preventCancel?: boolean}): AsyncIterable<Uint8Array> {\n    const reader = this.getReader();\n    yield* this._chunks;\n    reader.releaseLock();\n  }\n}\n", "// Forked from @gozala's web-blob under MIT license https://github.com/Gozala/web-blob\nimport {BlobStream} from './blob-stream';\n\n/**\n * Forked from @gozala's web-blob under MIT license\n * @see https://github.com/Gozala/web-blob\n */\nexport class BlobPolyfill {\n  // implements Blob {\n  /** The MIME type of the data contained in the Blob. If type is unknown, string is empty. */\n  readonly type: string;\n  /** The size, in bytes, of the data contained in the Blob object. */\n  size: number;\n  private parts: Uint8Array[];\n  /**\n   * @param [init]\n   * @param [options]\n   */\n  constructor(init: BlobPart[] = [], options: BlobPropertyBag = {}) {\n    this.parts = [];\n\n    this.size = 0;\n    for (const part of init) {\n      if (typeof part === 'string') {\n        const bytes = new TextEncoder().encode(part);\n        this.parts.push(bytes);\n        this.size += bytes.byteLength;\n      } else if (part instanceof BlobPolyfill) {\n        this.size += part.size;\n        // @ts-ignore - `parts` is marked private so TS will complain about\n        // accessing it.\n        this.parts.push(...part.parts);\n      } else if (part instanceof ArrayBuffer) {\n        this.parts.push(new Uint8Array(part));\n        this.size += part.byteLength;\n      } else if (part instanceof Uint8Array) {\n        this.parts.push(part);\n        this.size += part.byteLength;\n      } else if (ArrayBuffer.isView(part)) {\n        const {buffer, byteOffset, byteLength} = part;\n        this.parts.push(new Uint8Array(buffer, byteOffset, byteLength));\n        this.size += byteLength;\n      } else {\n        const bytes = new TextEncoder().encode(String(part));\n        this.parts.push(bytes);\n        this.size += bytes.byteLength;\n      }\n    }\n\n    /** @private */\n    this.type = readType(options.type);\n  }\n\n  /**\n   * Returns a new Blob object containing the data in the specified range of\n   * bytes of the blob on which it's called.\n   * @param start=0 - An index into the Blob indicating the first\n   * byte to include in the new Blob. If you specify a negative value, it's\n   * treated as an offset from the end of the Blob toward the beginning. For\n   * example, `-10` would be the 10th from last byte in the Blob. The default\n   * value is `0`. If you specify a value for start that is larger than the\n   * size of the source Blob, the returned Blob has size 0 and contains no\n   * data.\n   * @param end - An index into the `Blob` indicating the first byte\n   *  that will *not* be included in the new `Blob` (i.e. the byte exactly at\n   * this index is not included). If you specify a negative value, it's treated\n   * as an offset from the end of the Blob toward the beginning. For example,\n   * `-10` would be the 10th from last byte in the `Blob`. The default value is\n   * size.\n   * @param type - The content type to assign to the new Blob;\n   * this will be the value of its type property. The default value is an empty\n   * string.\n   */\n  slice(start: number = 0, end: number = this.size, type: string = ''): Blob {\n    const {size, parts: parts} = this;\n    let offset = start < 0 ? Math.max(size + start, 0) : Math.min(start, size);\n\n    let limit = end < 0 ? Math.max(size + end, 0) : Math.min(end, size);\n    const span = Math.max(limit - offset, 0);\n    const blob = new BlobPolyfill([], {type});\n\n    if (span === 0) {\n      // @ts-ignore\n      return blob;\n    }\n\n    let blobSize = 0;\n    const blobParts: Uint8Array[] = [];\n    for (const part of parts) {\n      const {byteLength} = part;\n      if (offset > 0 && byteLength <= offset) {\n        offset -= byteLength;\n        limit -= byteLength;\n      } else {\n        const chunk = part.subarray(offset, Math.min(byteLength, limit));\n        blobParts.push(chunk);\n        blobSize += chunk.byteLength;\n        // no longer need to take that into account\n        offset = 0;\n\n        // don't add the overflow to new blobParts\n        if (blobSize >= span) {\n          break;\n        }\n      }\n    }\n\n    blob.parts = blobParts;\n    blob.size = blobSize;\n\n    // @ts-ignore\n    return blob;\n  }\n\n  /**\n   * Returns a promise that resolves with an ArrayBuffer containing the entire\n   * contents of the Blob as binary data.\n   */\n  // eslint-disable-next-line require-await\n  async arrayBuffer(): Promise<ArrayBuffer> {\n    return this._toArrayBuffer();\n  }\n\n  /**\n   * Returns a promise that resolves with a USVString containing the entire\n   * contents of the Blob interpreted as UTF-8 text.\n   */\n  // eslint-disable-next-line require-await\n  async text(): Promise<string> {\n    const decoder = new TextDecoder();\n    let text = '';\n    for (const part of this.parts) {\n      text += decoder.decode(part);\n    }\n    return text;\n  }\n\n  /**\n   */\n  // @ts-ignore\n  stream(): BlobStream<any> {\n    return new BlobStream<any>(this.parts);\n  }\n\n  /**\n   * @returns {string}\n   */\n  toString() {\n    return '[object Blob]';\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'Blob';\n  }\n\n  _toArrayBuffer(): ArrayBuffer {\n    const buffer = new ArrayBuffer(this.size);\n    const bytes = new Uint8Array(buffer);\n    let offset = 0;\n    for (const part of this.parts) {\n      bytes.set(part, offset);\n      offset += part.byteLength;\n    }\n    return buffer;\n  }\n}\n\n/**\n */\nfunction readType(input: string = ''): string {\n  const type = String(input).toLowerCase();\n  return /[^\\u0020-\\u007E]/.test(type) ? '' : type;\n}\n", "// Forked from @gozala's web-file under MIT license https://github.com/Gozala/web-file\nimport {BlobPolyfill} from './blob';\n\n/**\n * Forked from @gozala's web-file under MIT license\n * @see https://github.com/Gozala/web-file\n */\n// @ts-ignore\nexport class FilePolyfill extends BlobPolyfill {\n  // implements File {\n  // public API\n  /** The name of the file referenced by the File object. */\n  name: string = '';\n  /** The path the URL of the File is relative to. */\n  webkitRelativePath: string = '';\n\n  /**\n   * Returns the last modified time of the file, in millisecond since the UNIX\n   * epoch (January 1st, 1970 at Midnight).\n   */\n  lastModified: number;\n\n  /**\n   * @param init\n   * @param name - A USVString representing the file name or the path\n   * to the file.\n   * @param [options]\n   */\n  constructor(init: BlobPart[], name: string, options: FilePropertyBag = {}) {\n    super(init, options);\n    // Per File API spec https://w3c.github.io/FileAPI/#file-constructor\n    // Every \"/\" character of file name must be replaced with a \":\".\n    /** @private */\n    this.name = String(name).replace(/\\//g, ':');\n    /** @private */\n    this.lastModified = options?.lastModified || Date.now();\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'File';\n  }\n}\n", "/* eslint-disable camelcase */\n// This code is inspired by example code in the DRACO repository\nimport type {\n  Draco3D,\n  DracoInt8Array,\n  Encoder,\n  Mesh,\n  MeshBuilder,\n  PointCloud,\n  Metadata,\n  MetadataBuilder,\n  draco_GeometryAttribute_Type\n} from '../draco3d/draco3d-types';\n\nimport type {TypedArray} from '@loaders.gl/schema';\nimport type {DracoMesh} from './draco-types';\n\nexport type DracoBuildOptions = {\n  pointcloud?: boolean;\n  metadata?: {[key: string]: string};\n  attributesMetadata?: {};\n  log?: any;\n\n  // draco encoding options\n  speed?: [number, number];\n  method?: string;\n  quantization?: {[attributeName: string]: number};\n};\n\n// Native Draco attribute names to GLTF attribute names.\nconst GLTF_TO_DRACO_ATTRIBUTE_NAME_MAP = {\n  POSITION: 'POSITION',\n  NORMAL: 'NORMAL',\n  COLOR_0: 'COLOR',\n  TEXCOORD_0: 'TEX_COORD'\n};\n\nconst noop = () => {};\n\nexport default class DracoBuilder {\n  draco: Draco3D;\n  dracoEncoder: Encoder;\n  dracoMeshBuilder: MeshBuilder;\n  dracoMetadataBuilder: MetadataBuilder;\n  log: any;\n\n  // draco - the draco decoder, either import `draco3d` or load dynamically\n  constructor(draco: Draco3D) {\n    this.draco = draco;\n    this.dracoEncoder = new this.draco.Encoder();\n    this.dracoMeshBuilder = new this.draco.MeshBuilder();\n    this.dracoMetadataBuilder = new this.draco.MetadataBuilder();\n  }\n\n  destroy(): void {\n    this.destroyEncodedObject(this.dracoMeshBuilder);\n    this.destroyEncodedObject(this.dracoEncoder);\n    this.destroyEncodedObject(this.dracoMetadataBuilder);\n    // @ts-ignore\n    this.dracoMeshBuilder = null;\n    // @ts-ignore\n    this.dracoEncoder = null;\n    // @ts-ignore\n    this.draco = null;\n  }\n\n  // TBD - when does this need to be called?\n  destroyEncodedObject(object): void {\n    if (object) {\n      this.draco.destroy(object);\n    }\n  }\n\n  /**\n   * Encode mesh or point cloud\n   * @param mesh =({})\n   * @param options\n   */\n  encodeSync(mesh: DracoMesh, options: DracoBuildOptions = {}): ArrayBuffer {\n    this.log = noop; // TODO\n    this._setOptions(options);\n\n    return options.pointcloud\n      ? this._encodePointCloud(mesh, options)\n      : this._encodeMesh(mesh, options);\n  }\n\n  // PRIVATE\n\n  _getAttributesFromMesh(mesh: DracoMesh) {\n    // TODO - Change the encodePointCloud interface instead?\n    const attributes = {...mesh, ...mesh.attributes};\n    // Fold indices into the attributes\n    if (mesh.indices) {\n      attributes.indices = mesh.indices;\n    }\n    return attributes;\n  }\n\n  _encodePointCloud(pointcloud: DracoMesh, options: DracoBuildOptions): ArrayBuffer {\n    const dracoPointCloud = new this.draco.PointCloud();\n\n    if (options.metadata) {\n      this._addGeometryMetadata(dracoPointCloud, options.metadata);\n    }\n\n    const attributes = this._getAttributesFromMesh(pointcloud);\n\n    // Build a `DracoPointCloud` from the input data\n    this._createDracoPointCloud(dracoPointCloud, attributes, options);\n\n    const dracoData = new this.draco.DracoInt8Array();\n\n    try {\n      const encodedLen = this.dracoEncoder.EncodePointCloudToDracoBuffer(\n        dracoPointCloud,\n        false,\n        dracoData\n      );\n\n      if (!(encodedLen > 0)) {\n        throw new Error('Draco encoding failed.');\n      }\n\n      this.log(`DRACO encoded ${dracoPointCloud.num_points()} points\n        with ${dracoPointCloud.num_attributes()} attributes into ${encodedLen} bytes`);\n\n      return dracoInt8ArrayToArrayBuffer(dracoData);\n    } finally {\n      this.destroyEncodedObject(dracoData);\n      this.destroyEncodedObject(dracoPointCloud);\n    }\n  }\n\n  _encodeMesh(mesh: DracoMesh, options: DracoBuildOptions): ArrayBuffer {\n    const dracoMesh = new this.draco.Mesh();\n\n    if (options.metadata) {\n      this._addGeometryMetadata(dracoMesh, options.metadata);\n    }\n\n    const attributes = this._getAttributesFromMesh(mesh);\n\n    // Build a `DracoMesh` from the input data\n    this._createDracoMesh(dracoMesh, attributes, options);\n\n    const dracoData = new this.draco.DracoInt8Array();\n\n    try {\n      const encodedLen = this.dracoEncoder.EncodeMeshToDracoBuffer(dracoMesh, dracoData);\n      if (encodedLen <= 0) {\n        throw new Error('Draco encoding failed.');\n      }\n\n      this.log(`DRACO encoded ${dracoMesh.num_points()} points\n        with ${dracoMesh.num_attributes()} attributes into ${encodedLen} bytes`);\n\n      return dracoInt8ArrayToArrayBuffer(dracoData);\n    } finally {\n      this.destroyEncodedObject(dracoData);\n      this.destroyEncodedObject(dracoMesh);\n    }\n  }\n\n  /**\n   * Set encoding options.\n   * @param {{speed?: any; method?: any; quantization?: any;}} options\n   */\n  _setOptions(options: DracoBuildOptions): void {\n    if ('speed' in options) {\n      // @ts-ignore\n      this.dracoEncoder.SetSpeedOptions(...options.speed);\n    }\n    if ('method' in options) {\n      const dracoMethod = this.draco[options.method || 'MESH_SEQUENTIAL_ENCODING'];\n      // assert(dracoMethod)\n      this.dracoEncoder.SetEncodingMethod(dracoMethod);\n    }\n    if ('quantization' in options) {\n      for (const attribute in options.quantization) {\n        const bits = options.quantization[attribute];\n        const dracoPosition = this.draco[attribute];\n        this.dracoEncoder.SetAttributeQuantization(dracoPosition, bits);\n      }\n    }\n  }\n\n  /**\n   * @param {Mesh} dracoMesh\n   * @param {object} attributes\n   * @returns {Mesh}\n   */\n  _createDracoMesh(dracoMesh: Mesh, attributes, options: DracoBuildOptions): Mesh {\n    const optionalMetadata = options.attributesMetadata || {};\n\n    try {\n      const positions = this._getPositionAttribute(attributes);\n      if (!positions) {\n        throw new Error('positions');\n      }\n      const vertexCount = positions.length / 3;\n\n      for (let attributeName in attributes) {\n        const attribute = attributes[attributeName];\n        attributeName = GLTF_TO_DRACO_ATTRIBUTE_NAME_MAP[attributeName] || attributeName;\n        const uniqueId = this._addAttributeToMesh(dracoMesh, attributeName, attribute, vertexCount);\n\n        if (uniqueId !== -1) {\n          this._addAttributeMetadata(dracoMesh, uniqueId, {\n            name: attributeName,\n            ...(optionalMetadata[attributeName] || {})\n          });\n        }\n      }\n    } catch (error) {\n      this.destroyEncodedObject(dracoMesh);\n      throw error;\n    }\n\n    return dracoMesh;\n  }\n\n  /**\n   * @param {} dracoPointCloud\n   * @param {object} attributes\n   */\n  _createDracoPointCloud(\n    dracoPointCloud: PointCloud,\n    attributes: object,\n    options: DracoBuildOptions\n  ): PointCloud {\n    const optionalMetadata = options.attributesMetadata || {};\n\n    try {\n      const positions = this._getPositionAttribute(attributes);\n      if (!positions) {\n        throw new Error('positions');\n      }\n      const vertexCount = positions.length / 3;\n\n      for (let attributeName in attributes) {\n        const attribute = attributes[attributeName];\n        attributeName = GLTF_TO_DRACO_ATTRIBUTE_NAME_MAP[attributeName] || attributeName;\n        const uniqueId = this._addAttributeToMesh(\n          dracoPointCloud,\n          attributeName,\n          attribute,\n          vertexCount\n        );\n        if (uniqueId !== -1) {\n          this._addAttributeMetadata(dracoPointCloud, uniqueId, {\n            name: attributeName,\n            ...(optionalMetadata[attributeName] || {})\n          });\n        }\n      }\n    } catch (error) {\n      this.destroyEncodedObject(dracoPointCloud);\n      throw error;\n    }\n\n    return dracoPointCloud;\n  }\n\n  /**\n   * @param mesh\n   * @param attributeName\n   * @param attribute\n   * @param vertexCount\n   */\n  _addAttributeToMesh(\n    mesh: PointCloud,\n    attributeName: string,\n    attribute: TypedArray,\n    vertexCount: number\n  ) {\n    if (!ArrayBuffer.isView(attribute)) {\n      return -1;\n    }\n\n    const type = this._getDracoAttributeType(attributeName);\n    // @ts-ignore TODO/fix types\n    const size = attribute.length / vertexCount;\n\n    if (type === 'indices') {\n      // @ts-ignore TODO/fix types\n      const numFaces = attribute.length / 3;\n      this.log(`Adding attribute ${attributeName}, size ${numFaces}`);\n\n      // @ts-ignore assumes mesh is a Mesh, not a point cloud\n      this.dracoMeshBuilder.AddFacesToMesh(mesh, numFaces, attribute);\n      return -1;\n    }\n\n    this.log(`Adding attribute ${attributeName}, size ${size}`);\n\n    const builder = this.dracoMeshBuilder;\n    const {buffer} = attribute;\n\n    switch (attribute.constructor) {\n      case Int8Array:\n        return builder.AddInt8Attribute(mesh, type, vertexCount, size, new Int8Array(buffer));\n\n      case Int16Array:\n        return builder.AddInt16Attribute(mesh, type, vertexCount, size, new Int16Array(buffer));\n\n      case Int32Array:\n        return builder.AddInt32Attribute(mesh, type, vertexCount, size, new Int32Array(buffer));\n      case Uint8Array:\n      case Uint8ClampedArray:\n        return builder.AddUInt8Attribute(mesh, type, vertexCount, size, new Uint8Array(buffer));\n\n      case Uint16Array:\n        return builder.AddUInt16Attribute(mesh, type, vertexCount, size, new Uint16Array(buffer));\n\n      case Uint32Array:\n        return builder.AddUInt32Attribute(mesh, type, vertexCount, size, new Uint32Array(buffer));\n\n      case Float32Array:\n      default:\n        return builder.AddFloatAttribute(mesh, type, vertexCount, size, new Float32Array(buffer));\n    }\n  }\n\n  /**\n   * DRACO can compress attributes of know type better\n   * TODO - expose an attribute type map?\n   * @param attributeName\n   */\n  _getDracoAttributeType(attributeName: string): draco_GeometryAttribute_Type | 'indices' {\n    switch (attributeName.toLowerCase()) {\n      case 'indices':\n        return 'indices';\n      case 'position':\n      case 'positions':\n      case 'vertices':\n        return this.draco.POSITION;\n      case 'normal':\n      case 'normals':\n        return this.draco.NORMAL;\n      case 'color':\n      case 'colors':\n        return this.draco.COLOR;\n      case 'texcoord':\n      case 'texcoords':\n        return this.draco.TEX_COORD;\n      default:\n        return this.draco.GENERIC;\n    }\n  }\n\n  _getPositionAttribute(attributes) {\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      const dracoType = this._getDracoAttributeType(attributeName);\n      if (dracoType === this.draco.POSITION) {\n        return attribute;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Add metadata for the geometry.\n   * @param dracoGeometry - WASM Draco Object\n   * @param metadata\n   */\n  _addGeometryMetadata(dracoGeometry: PointCloud, metadata: {[key: string]: string}) {\n    const dracoMetadata = new this.draco.Metadata();\n    this._populateDracoMetadata(dracoMetadata, metadata);\n    this.dracoMeshBuilder.AddMetadata(dracoGeometry, dracoMetadata);\n  }\n\n  /**\n   * Add metadata for an attribute to geometry.\n   * @param dracoGeometry - WASM Draco Object\n   * @param uniqueAttributeId\n   * @param metadata\n   */\n  _addAttributeMetadata(\n    dracoGeometry: PointCloud,\n    uniqueAttributeId: number,\n    metadata: Map<string, string> | {[key: string]: string}\n  ) {\n    // Note: Draco JS IDL doesn't seem to expose draco.AttributeMetadata, however it seems to\n    // create such objects automatically from draco.Metadata object.\n    const dracoAttributeMetadata = new this.draco.Metadata();\n    this._populateDracoMetadata(dracoAttributeMetadata, metadata);\n    // Draco3d doc note: Directly add attribute metadata to geometry.\n    // You can do this without explicitly adding |GeometryMetadata| to mesh.\n    this.dracoMeshBuilder.SetMetadataForAttribute(\n      dracoGeometry,\n      uniqueAttributeId,\n      dracoAttributeMetadata\n    );\n  }\n\n  /**\n   * Add contents of object or map to a WASM Draco Metadata Object\n   * @param dracoMetadata - WASM Draco Object\n   * @param metadata\n   */\n  _populateDracoMetadata(\n    dracoMetadata: Metadata,\n    metadata: Map<string, string> | {[key: string]: string}\n  ) {\n    for (const [key, value] of getEntries(metadata)) {\n      switch (typeof value) {\n        case 'number':\n          if (Math.trunc(value) === value) {\n            this.dracoMetadataBuilder.AddIntEntry(dracoMetadata, key, value);\n          } else {\n            this.dracoMetadataBuilder.AddDoubleEntry(dracoMetadata, key, value);\n          }\n          break;\n        case 'object':\n          if (value instanceof Int32Array) {\n            this.dracoMetadataBuilder.AddIntEntryArray(dracoMetadata, key, value, value.length);\n          }\n          break;\n        case 'string':\n        default:\n          this.dracoMetadataBuilder.AddStringEntry(dracoMetadata, key, value);\n      }\n    }\n  }\n}\n\n// HELPER FUNCTIONS\n\n/**\n * Copy encoded data to buffer\n * @param dracoData\n */\nfunction dracoInt8ArrayToArrayBuffer(dracoData: DracoInt8Array) {\n  const byteLength = dracoData.size();\n  const outputBuffer = new ArrayBuffer(byteLength);\n  const outputData = new Int8Array(outputBuffer);\n  for (let i = 0; i < byteLength; ++i) {\n    outputData[i] = dracoData.GetValue(i);\n  }\n  return outputBuffer;\n}\n\n/** Enable iteration over either an object or a map */\nfunction getEntries(container) {\n  const hasEntriesFunc = container.entries && !container.hasOwnProperty('entries');\n  return hasEntriesFunc ? container.entries() : Object.entries(container);\n}\n", "// Dynamic DRACO module loading inspired by THREE.DRACOLoader\n// https://github.com/mrdoob/three.js/blob/398c4f39ebdb8b23eefd4a7a5ec49ec0c96c7462/examples/jsm/loaders/DRACOLoader.js\n// by Don McCurdy / https://www.donmccurdy.com / MIT license\n\nimport {loadLibrary} from '@loaders.gl/worker-utils';\n\nconst DRACO_VERSION = '1.4.1';\nconst DRACO_JS_DECODER_URL = `https://www.gstatic.com/draco/versioned/decoders/${DRACO_VERSION}/draco_decoder.js`;\nconst DRACO_WASM_WRAPPER_URL = `https://www.gstatic.com/draco/versioned/decoders/${DRACO_VERSION}/draco_wasm_wrapper.js`;\nconst DRACO_WASM_DECODER_URL = `https://www.gstatic.com/draco/versioned/decoders/${DRACO_VERSION}/draco_decoder.wasm`;\n\nconst DRACO_ENCODER_URL = `https://raw.githubusercontent.com/google/draco/${DRACO_VERSION}/javascript/draco_encoder.js`;\n\nlet loadDecoderPromise;\nlet loadEncoderPromise;\n\nexport async function loadDracoDecoderModule(options) {\n  const modules = options.modules || {};\n\n  // Check if a bundled draco3d library has been supplied by application\n  if (modules.draco3d) {\n    loadDecoderPromise =\n      loadDecoderPromise ||\n      modules.draco3d.createDecoderModule({}).then((draco) => {\n        return {draco};\n      });\n  } else {\n    // If not, dynamically load the WASM script from our CDN\n    loadDecoderPromise = loadDecoderPromise || loadDracoDecoder(options);\n  }\n  return await loadDecoderPromise;\n}\n\nexport async function loadDracoEncoderModule(options) {\n  const modules = options.modules || {};\n\n  // Check if a bundled draco3d library has been supplied by application\n  if (modules.draco3d) {\n    loadEncoderPromise =\n      loadEncoderPromise ||\n      modules.draco3d.createEncoderModule({}).then((draco) => {\n        return {draco};\n      });\n  } else {\n    // If not, dynamically load the WASM script from our CDN\n    loadEncoderPromise = loadEncoderPromise || loadDracoEncoder(options);\n  }\n  return await loadEncoderPromise;\n}\n\n// DRACO DECODER LOADING\n\nasync function loadDracoDecoder(options) {\n  let DracoDecoderModule;\n  let wasmBinary;\n  switch (options.draco && options.draco.decoderType) {\n    case 'js':\n      DracoDecoderModule = await loadLibrary(DRACO_JS_DECODER_URL, 'draco', options);\n      break;\n\n    case 'wasm':\n    default:\n      [DracoDecoderModule, wasmBinary] = await Promise.all([\n        await loadLibrary(DRACO_WASM_WRAPPER_URL, 'draco', options),\n        await loadLibrary(DRACO_WASM_DECODER_URL, 'draco', options)\n      ]);\n  }\n  // Depends on how import happened...\n  // @ts-ignore\n  DracoDecoderModule = DracoDecoderModule || globalThis.DracoDecoderModule;\n  return await initializeDracoDecoder(DracoDecoderModule, wasmBinary);\n}\n\nfunction initializeDracoDecoder(DracoDecoderModule, wasmBinary) {\n  const options: {wasmBinary?: any} = {};\n  if (wasmBinary) {\n    options.wasmBinary = wasmBinary;\n  }\n\n  return new Promise((resolve) => {\n    DracoDecoderModule({\n      ...options,\n      onModuleLoaded: (draco) => resolve({draco}) // Module is Promise-like. Wrap in object to avoid loop.\n    });\n  });\n}\n\n// ENCODER\n\nasync function loadDracoEncoder(options) {\n  let DracoEncoderModule = await loadLibrary(DRACO_ENCODER_URL, 'draco', options);\n  // @ts-ignore\n  DracoEncoderModule = DracoEncoderModule || globalThis.DracoEncoderModule;\n\n  return new Promise((resolve) => {\n    DracoEncoderModule({\n      onModuleLoaded: (draco) => resolve({draco}) // Module is Promise-like. Wrap in object to avoid loop.\n    });\n  });\n}\n", "// Version constant cannot be imported, it needs to correspond to the build version of **this** module.\n// __VERSION__ is injected by babel-plugin-version-inline\n// @ts-ignore TS2304: Cannot find name '__VERSION__'.\nexport const VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'latest';\n", "import type {Writer, WriterOptions} from '@loaders.gl/loader-utils';\nimport type {DracoMesh} from './lib/draco-types';\nimport type {DracoBuildOptions} from './lib/draco-builder';\nimport DRACOBuilder from './lib/draco-builder';\nimport {loadDracoEncoderModule} from './lib/draco-module-loader';\nimport {VERSION} from './lib/utils/version';\n\nexport type DracoWriterOptions = WriterOptions & {\n  draco?: DracoBuildOptions & {\n    attributeNameEntry: string;\n  };\n};\n\nconst DEFAULT_DRACO_OPTIONS = {\n  pointcloud: false, // Set to true if pointcloud (mode: 0, no indices)\n  attributeNameEntry: 'name'\n  // Draco Compression Parameters\n  // method: 'MESH_EDGEBREAKER_ENCODING',\n  // speed: [5, 5],\n  // quantization: {\n  //   POSITION: 10\n  // }\n};\n\n/**\n * Exporter for Draco3D compressed geometries\n */\nexport const DracoWriter: Writer = {\n  name: 'DRACO',\n  id: 'draco',\n  module: 'draco',\n  version: VERSION,\n  extensions: ['drc'],\n  encode,\n  options: {\n    draco: DEFAULT_DRACO_OPTIONS\n  }\n};\n\nasync function encode(data: DracoMesh, options: DracoWriterOptions = {}): Promise<ArrayBuffer> {\n  // Dynamically load draco\n  const {draco} = await loadDracoEncoderModule(options);\n  const dracoBuilder = new DRACOBuilder(draco);\n\n  try {\n    return dracoBuilder.encodeSync(data, options.draco);\n  } finally {\n    dracoBuilder.destroy();\n  }\n}\n", "import {WorkerBody, WorkerMessagePayload} from '@loaders.gl/worker-utils';\nimport {DracoWriterNodeJS} from '../draco-writer-nodejs';\n\n(() => {\n  // Check that we are actually in a worker thread\n  if (!WorkerBody.inWorkerThread()) {\n    return;\n  }\n\n  WorkerBody.onmessage = async (type, payload: WorkerMessagePayload) => {\n    switch (type) {\n      case 'process':\n        try {\n          const {input, options} = payload;\n          const result = await DracoWriterNodeJS.encode!(input, options);\n          WorkerBody.postMessage('done', {result});\n        } catch (error) {\n          const message = error instanceof Error ? error.message : '';\n          WorkerBody.postMessage('error', {error: message});\n        }\n        break;\n      default:\n    }\n  };\n})();\n"],
  "mappings": "sgCAAA,2BAiBA,YAAgB,EAAQ,EAAI,CAC3B,MAAI,KAAO,QACV,GAAK,QAEC,GAAM,MAAO,GAAG,QAAW,WAAa,EAAG,OAAO,GAAU,EAUpE,GAAI,IAAY,GAAO,CAUtB,KAAM,YAYN,OAAQ,SAAU,EAAO,CACxB,MAAO,KAAU,GAAU,MAU5B,gBAAiB,kBASjB,SAAU,WAUV,sBAAuB,wBASvB,cAAe,kBAQZ,GAAY,GAAO,CAMtB,KAAM,+BASN,OAAQ,SAAU,EAAK,CACtB,MAAO,KAAQ,GAAU,MAQ1B,IAAK,6BAOL,IAAK,uCAOL,MAAO,kCAGR,GAAQ,OAAS,GACjB,GAAQ,UAAY,GACpB,GAAQ,UAAY,KC/IpB,iBAAI,IAAc,KAEd,GAAY,GAAY,UAO5B,YAAyB,EAAO,CAC/B,MAAO,KAAU,GASlB,YAAgC,EAAO,CAEtC,MAAO,GAAQ,EAAM,MAAM,gBAAgB,OAAO,IAAkB,GAUrE,YAA4B,EAAS,EAAS,CAC7C,MAAK,GAAQ,eAAe,IAC3B,GAAQ,GAAW,IAEb,EAQR,YAAsB,EAAO,CAC5B,GAAI,CAAC,EAAO,MAAO,GACnB,GAAI,GAAO,GAAuB,GAClC,MAAO,QAAO,KAAK,EAAK,OAAO,GAAmB,KAUnD,YAAwB,EAAM,CAC7B,MAAO,UAAS,EAAS,CACxB,MAAO,IAAQ,EAAK,QAAQ,KAAa,IAI3C,YAAc,EAAI,EAAK,CACtB,OAAQ,KAAK,GACZ,EAAK,GAAK,EAAI,GAQhB,YAAkB,EAAM,EAAM,CAC7B,GAAI,GAAK,EAAM,UACf,GAAG,CAAE,aAAc,IAAO,CACzB,GAAS,GAAT,UAAY,GAAH,QACT,EAAE,UAAY,EAAM,UACpB,EAAI,GAAI,GACR,GAAK,EAAG,GACR,EAAM,UAAY,EAAK,EAExB,AAAG,EAAG,aAAe,GACjB,OAAO,IAAS,YAClB,QAAQ,MAAM,iBAAiB,GAEhC,EAAG,YAAc,GAKnB,GAAI,IAAW,GACX,GAA8B,GAAS,aAA8B,EACrE,GAA8B,GAAS,eAA8B,EACrE,GAA8B,GAAS,UAA8B,EACrE,GAA8B,GAAS,mBAA8B,EACrE,GAA8B,GAAS,sBAA8B,EACrE,GAA8B,GAAS,YAA8B,EACrE,GAA8B,GAAS,4BAA8B,EACrE,GAA8B,GAAS,aAA8B,EACrE,GAA8B,GAAS,cAA8B,EACrE,GAA8B,GAAS,mBAA8B,GACrE,GAA8B,GAAS,uBAA8B,GACrE,GAA8B,GAAS,cAA8B,GAGrE,GAAgB,GAChB,GAAmB,GACnB,GAA8B,GAAc,eAAgC,IAAiB,GAAG,mBAAoB,GACpH,GAA8B,GAAc,mBAAgC,IAAiB,GAAG,uBAAwB,GACxH,GAA8B,GAAc,sBAAgC,IAAiB,GAAG,0BAA2B,GAC3H,GAA8B,GAAc,mBAAgC,IAAiB,GAAG,iBAAkB,GAClH,GAA8B,GAAc,sBAAgC,IAAiB,GAAG,oBAAqB,GACrH,GAA8B,GAAc,oBAAgC,IAAiB,GAAG,kBAAmB,GACnH,GAA8B,GAAc,4BAAgC,IAAiB,GAAG,0BAA2B,GAC3H,GAA8B,GAAc,cAAgC,IAAiB,GAAG,YAAa,GAC7G,GAA8B,GAAc,kBAAgC,IAAiB,GAAG,gBAAiB,GACjH,GAA8B,GAAc,oBAAgC,IAAiB,IAAI,mBAAoB,IAErH,GAA4B,GAAc,kBAA8B,IAAiB,IAAI,gBAAiB,IAC9G,GAA4B,GAAc,WAA8B,IAAiB,IAAI,eAAgB,IAC7G,GAA4B,GAAc,yBAA8B,IAAiB,IAAI,uBAAwB,IACrH,GAA4B,GAAc,cAA6B,IAAiB,IAAI,oBAAqB,IACjH,GAA4B,GAAc,mBAA6B,IAAiB,IAAI,iBAAkB,IAQlH,YAAsB,EAAM,EAAS,CACpC,GAAG,YAAmB,OACrB,GAAI,GAAQ,MAEZ,GAAQ,KACR,MAAM,KAAK,KAAM,GAAiB,IAClC,KAAK,QAAU,GAAiB,GAC7B,MAAM,mBAAmB,MAAM,kBAAkB,KAAM,IAE3D,SAAM,KAAO,EACV,GAAS,MAAK,QAAU,KAAK,QAAU,KAAO,GAC1C,EAER,GAAa,UAAY,MAAM,UAC/B,GAAK,GAAc,IAOnB,aAAoB,EAEpB,GAAS,UAAY,CAKpB,OAAO,EASP,KAAM,SAAS,EAAO,CACrB,MAAO,MAAK,IAAU,MAEvB,SAAS,SAAS,EAAO,EAAW,CACnC,OAAQ,GAAM,GAAI,EAAI,EAAE,EAAE,KAAK,OAAO,IACrC,GAAkB,KAAK,GAAG,EAAI,EAAO,GAEtC,MAAO,GAAI,KAAK,MAIlB,YAAsB,EAAK,EAAQ,CAClC,KAAK,MAAQ,EACb,KAAK,SAAW,EAChB,GAAgB,MAEjB,YAAyB,EAAK,CAC7B,GAAI,GAAM,EAAK,MAAM,MAAQ,EAAK,MAAM,cAAc,KACtD,GAAG,EAAK,MAAQ,EAAI,CACnB,GAAI,GAAK,EAAK,SAAS,EAAK,OAE5B,GAAQ,EAAK,SAAS,EAAG,QACzB,GAAK,EAAG,GACR,EAAK,KAAO,GAGd,GAAa,UAAU,KAAO,SAAS,EAAE,CACxC,UAAgB,MACT,KAAK,IAGb,GAAS,GAAa,IAatB,aAAwB,EAGxB,YAAwB,EAAK,EAAK,CAEjC,OADI,GAAI,EAAK,OACP,KACL,GAAG,EAAK,KAAO,EAAM,MAAO,GAI9B,YAAuB,EAAG,EAAK,EAAQ,EAAQ,CAM9C,GALA,AAAG,EACF,EAAK,GAAe,EAAK,IAAY,EAErC,EAAK,EAAK,UAAY,EAEpB,EAAG,CACL,EAAQ,aAAe,EACvB,GAAI,GAAM,EAAG,cACb,AAAG,GACF,IAAW,GAAmB,EAAI,EAAG,GACrC,GAAgB,EAAI,EAAG,KAI1B,YAA0B,EAAG,EAAK,EAAK,CAEtC,GAAI,GAAI,GAAe,EAAK,GAC5B,GAAG,GAAG,EAAE,CAEP,OADI,GAAY,EAAK,OAAO,EACtB,EAAE,GACP,EAAK,GAAK,EAAK,EAAE,GAGlB,GADA,EAAK,OAAS,EACX,EAAG,CACL,GAAI,GAAM,EAAG,cACb,AAAG,GACF,IAAmB,EAAI,EAAG,GAC1B,EAAK,aAAe,WAItB,MAAM,IAAa,GAAc,GAAI,OAAM,EAAG,QAAQ,IAAI,IAG5D,GAAa,UAAY,CACxB,OAAO,EACP,KAAK,GAAS,UAAU,KACxB,aAAc,SAAS,EAAK,CAM3B,OADI,GAAI,KAAK,OACP,KAAI,CACT,GAAI,GAAO,KAAK,GAEhB,GAAG,EAAK,UAAY,EACnB,MAAO,KAIV,aAAc,SAAS,EAAM,CAC5B,GAAI,GAAK,EAAK,aACd,GAAG,GAAM,GAAI,KAAK,cACjB,KAAM,IAAI,IAAa,IAExB,GAAI,GAAU,KAAK,aAAa,EAAK,UACrC,UAAc,KAAK,cAAc,KAAK,EAAK,GACpC,GAGR,eAAgB,SAAS,EAAM,CAC9B,GAAI,GAAK,EAAK,aAAc,EAC5B,GAAG,GAAM,GAAI,KAAK,cACjB,KAAM,IAAI,IAAa,IAExB,SAAU,KAAK,eAAe,EAAK,aAAa,EAAK,WACrD,GAAc,KAAK,cAAc,KAAK,EAAK,GACpC,GAIR,gBAAiB,SAAS,EAAK,CAC9B,GAAI,GAAO,KAAK,aAAa,GAC7B,UAAiB,KAAK,cAAc,KAAK,GAClC,GAMR,kBAAkB,SAAS,EAAa,EAAU,CACjD,GAAI,GAAO,KAAK,eAAe,EAAa,GAC5C,UAAiB,KAAK,cAAc,KAAK,GAClC,GAER,eAAgB,SAAS,EAAc,EAAW,CAEjD,OADI,GAAI,KAAK,OACP,KAAI,CACT,GAAI,GAAO,KAAK,GAChB,GAAG,EAAK,WAAa,GAAa,EAAK,cAAgB,EACtD,MAAO,GAGT,MAAO,QAmBT,aAA6B,EAG7B,GAAkB,UAAY,CAgB7B,WAAY,SAAS,EAAS,EAAS,CACrC,MAAO,IAwBT,eAAgB,SAAS,EAAe,EAAe,EAAQ,CAC9D,GAAI,GAAM,GAAI,IAOd,GANA,EAAI,eAAiB,KACrB,EAAI,WAAa,GAAI,IACrB,EAAI,QAAU,GAAW,KACrB,GACH,EAAI,YAAY,GAEb,EAAc,CACjB,GAAI,GAAO,EAAI,gBAAgB,EAAc,GAC7C,EAAI,YAAY,GAEjB,MAAO,IAuBR,mBAAoB,SAAS,EAAe,EAAU,EAAS,CAC9D,GAAI,GAAO,GAAI,IACf,SAAK,KAAO,EACZ,EAAK,SAAW,EAChB,EAAK,SAAW,GAAY,GAC5B,EAAK,SAAW,GAAY,GAErB,IAST,aAAgB,EAGhB,GAAK,UAAY,CAChB,WAAa,KACb,UAAY,KACZ,gBAAkB,KAClB,YAAc,KACd,WAAa,KACb,WAAa,KACb,WAAa,KACb,cAAgB,KAChB,UAAY,KACZ,aAAe,KACf,OAAS,KACT,UAAY,KAEZ,aAAa,SAAS,EAAU,EAAS,CACxC,MAAO,IAAc,KAAK,EAAS,IAEpC,aAAa,SAAS,EAAU,EAAS,CACxC,KAAK,aAAa,EAAS,GACxB,GACF,KAAK,YAAY,IAGnB,YAAY,SAAS,EAAS,CAC7B,MAAO,IAAa,KAAK,IAE1B,YAAY,SAAS,EAAS,CAC7B,MAAO,MAAK,aAAa,EAAS,OAEnC,cAAc,UAAU,CACvB,MAAO,MAAK,YAAc,MAE3B,UAAU,SAAS,EAAK,CACvB,MAAO,IAAU,KAAK,eAAe,KAAK,KAAK,IAGhD,UAAU,UAAU,CAEnB,OADI,GAAQ,KAAK,WACX,GAAM,CACX,GAAI,GAAO,EAAM,YACjB,AAAG,GAAQ,EAAK,UAAY,IAAa,EAAM,UAAY,GAC1D,MAAK,YAAY,GACjB,EAAM,WAAW,EAAK,OAEtB,GAAM,YACN,EAAQ,KAKX,YAAY,SAAS,EAAS,EAAQ,CACrC,MAAO,MAAK,cAAc,eAAe,WAAW,EAAQ,IAG1D,cAAc,UAAU,CACvB,MAAO,MAAK,WAAW,OAAO,GAgB/B,aAAa,SAAS,EAAa,CAElC,OADI,GAAK,KACH,GAAG,CACR,GAAI,GAAM,EAAG,OAEb,GAAG,GACF,OAAQ,KAAK,GACZ,GAAG,EAAI,IAAM,EACZ,MAAO,GAIV,EAAK,EAAG,UAAY,GAAe,EAAG,cAAgB,EAAG,WAE1D,MAAO,OAGR,mBAAmB,SAAS,EAAO,CAElC,OADI,GAAK,KACH,GAAG,CACR,GAAI,GAAM,EAAG,OAEb,GAAG,GACC,IAAU,GACZ,MAAO,GAAI,GAGb,EAAK,EAAG,UAAY,GAAe,EAAG,cAAgB,EAAG,WAE1D,MAAO,OAGR,mBAAmB,SAAS,EAAa,CACxC,GAAI,GAAS,KAAK,aAAa,GAC/B,MAAO,IAAU,OAKtB,YAAqB,EAAE,CACtB,MAAO,IAAK,KAAO,QACX,GAAK,KAAO,QACZ,GAAK,KAAO,SACZ,GAAK,KAAO,UACZ,KAAK,EAAE,aAAa,IAI7B,GAAK,GAAS,IACd,GAAK,GAAS,GAAK,WAMnB,YAAoB,EAAK,EAAS,CACjC,GAAG,EAAS,GACX,MAAO,GAER,GAAG,EAAO,EAAK,WACd,EACC,IAAG,GAAW,EAAK,GAAW,MAAO,SACzB,EAAK,EAAK,aAMzB,aAAmB,EAGnB,YAAyB,EAAI,EAAG,EAAQ,CACvC,GAAO,EAAI,OACX,GAAI,GAAK,EAAQ,aACjB,AAAG,IAAO,GAAU,OAEnB,GAAG,OAAO,EAAQ,OAAO,EAAQ,UAAU,IAAM,EAAQ,OAI3D,YAA4B,EAAI,EAAG,EAAQ,EAAO,CACjD,GAAO,EAAI,OACX,GAAI,GAAK,EAAQ,aACjB,AAAG,IAAO,GAAU,OAEnB,MAAO,GAAG,OAAO,EAAQ,OAAO,EAAQ,UAAU,IAIpD,YAAwB,EAAI,EAAG,EAAS,CACvC,GAAG,GAAO,EAAI,KAAK,CAClB,EAAI,OAEJ,GAAI,GAAK,EAAG,WACZ,GAAG,EACF,EAAG,EAAG,UAAY,MACd,CAIJ,OAFI,GAAQ,EAAG,WACX,EAAI,EACF,GACL,EAAG,KAAO,EACV,EAAO,EAAM,YAEd,EAAG,OAAS,IAaf,YAAsB,EAAW,EAAM,CACtC,GAAI,GAAW,EAAM,gBACjB,EAAO,EAAM,YACjB,MAAG,GACF,EAAS,YAAc,EAEvB,EAAW,WAAa,EAEzB,AAAG,EACF,EAAK,gBAAkB,EAEvB,EAAW,UAAY,EAExB,GAAe,EAAW,cAAc,GACjC,EAKR,YAAuB,EAAW,EAAS,EAAU,CACpD,GAAI,GAAK,EAAS,WAIlB,GAHG,GACF,EAAG,YAAY,GAEb,EAAS,WAAa,GAAuB,CAC/C,GAAI,GAAW,EAAS,WACxB,GAAI,GAAY,KACf,MAAO,GAER,GAAI,GAAU,EAAS,cAEvB,GAAW,EAAU,EAEtB,GAAI,GAAM,EAAY,EAAU,gBAAkB,EAAW,UAE7D,EAAS,gBAAkB,EAC3B,EAAQ,YAAc,EAGtB,AAAG,EACF,EAAI,YAAc,EAElB,EAAW,WAAa,EAEzB,AAAG,GAAa,KACf,EAAW,UAAY,EAEvB,EAAU,gBAAkB,EAE7B,EACC,GAAS,WAAa,QAChB,IAAa,GAAY,GAAU,EAAS,cACnD,UAAe,EAAW,eAAe,EAAW,GAEhD,EAAS,UAAY,IACxB,GAAS,WAAa,EAAS,UAAY,MAErC,EAER,YAA4B,EAAW,EAAS,CAC/C,GAAI,GAAK,EAAS,WAClB,GAAG,EAAG,CACL,GAAI,GAAM,EAAW,UACrB,EAAG,YAAY,GACf,GAAI,GAAM,EAAW,UAEtB,GAAI,GAAM,EAAW,UACrB,SAAS,WAAa,EACtB,EAAS,gBAAkB,EAC3B,EAAS,YAAc,KACvB,AAAG,EACF,EAAI,YAAc,EAElB,EAAW,WAAa,EAEzB,EAAW,UAAY,EACvB,GAAe,EAAW,cAAc,EAAW,GAC5C,EAGR,GAAS,UAAY,CAEpB,SAAY,YACZ,SAAY,GAOZ,QAAW,KACX,gBAAmB,KACnB,KAAO,EAEP,aAAgB,SAAS,EAAU,EAAS,CAC3C,GAAG,EAAS,UAAY,GAAuB,CAE9C,OADI,GAAQ,EAAS,WACf,GAAM,CACX,GAAI,GAAO,EAAM,YACjB,KAAK,aAAa,EAAM,GACxB,EAAQ,EAET,MAAO,GAER,MAAG,MAAK,iBAAmB,MAAQ,EAAS,UAAY,IACvD,MAAK,gBAAkB,GAGjB,GAAc,KAAK,EAAS,GAAW,EAAS,cAAgB,KAAM,GAE9E,YAAe,SAAS,EAAS,CAChC,MAAG,MAAK,iBAAmB,GAC1B,MAAK,gBAAkB,MAEjB,GAAa,KAAK,IAG1B,WAAa,SAAS,EAAa,EAAK,CACvC,MAAO,IAAW,KAAK,EAAa,IAGrC,eAAiB,SAAS,EAAG,CAC5B,GAAI,GAAM,KACV,UAAW,KAAK,gBAAgB,SAAS,EAAK,CAC7C,GAAG,EAAK,UAAY,IAChB,EAAK,aAAa,OAAS,EAC7B,SAAM,EACC,KAIH,GAoBR,uBAAwB,SAAS,EAAY,CAC5C,GAAI,GAAgB,GAAa,GACjC,MAAO,IAAI,IAAa,KAAM,SAAS,EAAM,CAC5C,GAAI,GAAK,GACT,MAAI,GAAc,OAAS,GAC1B,GAAW,EAAK,gBAAiB,SAAS,EAAM,CAC/C,GAAG,IAAS,GAAQ,EAAK,WAAa,GAAc,CACnD,GAAI,GAAiB,EAAK,aAAa,SAEvC,GAAI,EAAgB,CAEnB,GAAI,GAAU,IAAe,EAC7B,GAAI,CAAC,EAAS,CACb,GAAI,GAAoB,GAAa,GACrC,EAAU,EAAc,MAAM,GAAc,IAE7C,AAAG,GACF,EAAG,KAAK,OAMN,KAKT,cAAgB,SAAS,EAAQ,CAChC,GAAI,GAAO,GAAI,IACf,EAAK,cAAgB,KACrB,EAAK,SAAW,EAChB,EAAK,QAAU,EACf,EAAK,UAAY,EACjB,EAAK,WAAa,GAAI,IACtB,GAAI,GAAQ,EAAK,WAAa,GAAI,IAClC,SAAM,cAAgB,EACf,GAER,uBAAyB,UAAU,CAClC,GAAI,GAAO,GAAI,IACf,SAAK,cAAgB,KACrB,EAAK,WAAa,GAAI,IACf,GAER,eAAiB,SAAS,EAAK,CAC9B,GAAI,GAAO,GAAI,IACf,SAAK,cAAgB,KACrB,EAAK,WAAW,GACT,GAER,cAAgB,SAAS,EAAK,CAC7B,GAAI,GAAO,GAAI,IACf,SAAK,cAAgB,KACrB,EAAK,WAAW,GACT,GAER,mBAAqB,SAAS,EAAK,CAClC,GAAI,GAAO,GAAI,IACf,SAAK,cAAgB,KACrB,EAAK,WAAW,GACT,GAER,4BAA8B,SAAS,EAAO,EAAK,CAClD,GAAI,GAAO,GAAI,IACf,SAAK,cAAgB,KACrB,EAAK,QAAU,EAAK,OAAS,EAC7B,EAAK,UAAW,EAAK,KAAO,EACrB,GAER,gBAAkB,SAAS,EAAK,CAC/B,GAAI,GAAO,GAAI,IACf,SAAK,cAAgB,KACrB,EAAK,KAAO,EACZ,EAAK,SAAW,EAChB,EAAK,UAAY,EACjB,EAAK,UAAY,GACV,GAER,sBAAwB,SAAS,EAAK,CACrC,GAAI,GAAO,GAAI,IACf,SAAK,cAAgB,KACrB,EAAK,SAAW,EACT,GAGR,gBAAkB,SAAS,EAAa,EAAc,CACrD,GAAI,GAAO,GAAI,IACX,EAAK,EAAc,MAAM,KACzB,EAAQ,EAAK,WAAa,GAAI,IAClC,SAAK,WAAa,GAAI,IACtB,EAAK,cAAgB,KACrB,EAAK,SAAW,EAChB,EAAK,QAAU,EACf,EAAK,aAAe,EACpB,AAAG,EAAG,QAAU,EACf,GAAK,OAAS,EAAG,GACjB,EAAK,UAAY,EAAG,IAGpB,EAAK,UAAY,EAElB,EAAM,cAAgB,EACf,GAGR,kBAAoB,SAAS,EAAa,EAAc,CACvD,GAAI,GAAO,GAAI,IACX,EAAK,EAAc,MAAM,KAC7B,SAAK,cAAgB,KACrB,EAAK,SAAW,EAChB,EAAK,KAAO,EACZ,EAAK,aAAe,EACpB,EAAK,UAAY,GACjB,AAAG,EAAG,QAAU,EACf,GAAK,OAAS,EAAG,GACjB,EAAK,UAAY,EAAG,IAGpB,EAAK,UAAY,EAEX,IAGT,GAAS,GAAS,IAGlB,aAAmB,CAClB,KAAK,OAAS,GAEf,GAAQ,UAAY,CACnB,SAAW,GACX,aAAe,SAAS,EAAK,CAC5B,MAAO,MAAK,iBAAiB,IAAO,MAErC,aAAe,SAAS,EAAK,CAC5B,GAAI,GAAO,KAAK,iBAAiB,GACjC,MAAO,IAAQ,EAAK,OAAS,IAE9B,iBAAmB,SAAS,EAAK,CAChC,MAAO,MAAK,WAAW,aAAa,IAErC,aAAe,SAAS,EAAM,EAAM,CACnC,GAAI,GAAO,KAAK,cAAc,gBAAgB,GAC9C,EAAK,MAAQ,EAAK,UAAY,GAAK,EACnC,KAAK,iBAAiB,IAEvB,gBAAkB,SAAS,EAAK,CAC/B,GAAI,GAAO,KAAK,iBAAiB,GACjC,GAAQ,KAAK,oBAAoB,IAIlC,YAAY,SAAS,EAAS,CAC7B,MAAG,GAAS,WAAa,GACjB,KAAK,aAAa,EAAS,MAE3B,GAAmB,KAAK,IAGjC,iBAAmB,SAAS,EAAQ,CACnC,MAAO,MAAK,WAAW,aAAa,IAErC,mBAAqB,SAAS,EAAQ,CACrC,MAAO,MAAK,WAAW,eAAe,IAEvC,oBAAsB,SAAS,EAAQ,CAEtC,MAAO,MAAK,WAAW,gBAAgB,EAAQ,WAGhD,kBAAoB,SAAS,EAAc,EAAU,CACpD,GAAI,GAAM,KAAK,mBAAmB,EAAc,GAChD,GAAO,KAAK,oBAAoB,IAGjC,eAAiB,SAAS,EAAc,EAAU,CACjD,MAAO,MAAK,mBAAmB,EAAc,IAAY,MAE1D,eAAiB,SAAS,EAAc,EAAU,CACjD,GAAI,GAAO,KAAK,mBAAmB,EAAc,GACjD,MAAO,IAAQ,EAAK,OAAS,IAE9B,eAAiB,SAAS,EAAc,EAAe,EAAM,CAC5D,GAAI,GAAO,KAAK,cAAc,kBAAkB,EAAc,GAC9D,EAAK,MAAQ,EAAK,UAAY,GAAK,EACnC,KAAK,iBAAiB,IAEvB,mBAAqB,SAAS,EAAc,EAAU,CACrD,MAAO,MAAK,WAAW,eAAe,EAAc,IAGrD,qBAAuB,SAAS,EAAQ,CACvC,MAAO,IAAI,IAAa,KAAK,SAAS,EAAK,CAC1C,GAAI,GAAK,GACT,UAAW,EAAK,SAAS,EAAK,CAC7B,AAAG,IAAS,GAAQ,EAAK,UAAY,IAAiB,KAAY,KAAO,EAAK,SAAW,IACxF,EAAG,KAAK,KAGH,KAGT,uBAAyB,SAAS,EAAc,EAAU,CACzD,MAAO,IAAI,IAAa,KAAK,SAAS,EAAK,CAC1C,GAAI,GAAK,GACT,UAAW,EAAK,SAAS,EAAK,CAC7B,AAAG,IAAS,GAAQ,EAAK,WAAa,IAAiB,KAAiB,KAAO,EAAK,eAAiB,IAAkB,KAAc,KAAO,EAAK,WAAa,IAC7J,EAAG,KAAK,KAGH,MAKV,GAAS,UAAU,qBAAuB,GAAQ,UAAU,qBAC5D,GAAS,UAAU,uBAAyB,GAAQ,UAAU,uBAG9D,GAAS,GAAQ,IACjB,aAAgB,EAEhB,GAAK,UAAU,SAAW,GAC1B,GAAS,GAAK,IAGd,aAAyB,EAEzB,GAAc,UAAY,CACzB,KAAO,GACP,cAAgB,SAAS,EAAQ,EAAO,CACvC,MAAO,MAAK,KAAK,UAAU,EAAQ,EAAO,IAE3C,WAAY,SAAS,EAAM,CAC1B,EAAO,KAAK,KAAK,EACjB,KAAK,UAAY,KAAK,KAAO,EAC7B,KAAK,OAAS,EAAK,QAEpB,WAAY,SAAS,EAAO,EAAM,CACjC,KAAK,YAAY,EAAO,EAAE,IAG3B,YAAY,SAAS,EAAS,CAC7B,KAAM,IAAI,OAAM,GAAiB,MAElC,WAAY,SAAS,EAAQ,EAAO,CACnC,KAAK,YAAY,EAAO,EAAM,KAE/B,YAAa,SAAS,EAAQ,EAAO,EAAM,CAC1C,GAAI,GAAQ,KAAK,KAAK,UAAU,EAAE,GAC9B,EAAM,KAAK,KAAK,UAAU,EAAO,GACrC,EAAO,EAAQ,EAAO,EACtB,KAAK,UAAY,KAAK,KAAO,EAC7B,KAAK,OAAS,EAAK,SAGrB,GAAS,GAAc,IACvB,aAAgB,EAEhB,GAAK,UAAY,CAChB,SAAW,QACX,SAAW,GACX,UAAY,SAAS,EAAQ,CAC5B,GAAI,GAAO,KAAK,KACZ,EAAU,EAAK,UAAU,GAC7B,EAAO,EAAK,UAAU,EAAG,GACzB,KAAK,KAAO,KAAK,UAAY,EAC7B,KAAK,OAAS,EAAK,OACnB,GAAI,GAAU,KAAK,cAAc,eAAe,GAChD,MAAG,MAAK,YACP,KAAK,WAAW,aAAa,EAAS,KAAK,aAErC,IAGT,GAAS,GAAK,IACd,aAAmB,EAEnB,GAAQ,UAAY,CACnB,SAAW,WACX,SAAW,IAEZ,GAAS,GAAQ,IAEjB,aAAwB,EAExB,GAAa,UAAY,CACxB,SAAW,iBACX,SAAW,IAEZ,GAAS,GAAa,IAGtB,aAAwB,EAExB,GAAa,UAAU,SAAW,GAClC,GAAS,GAAa,IAEtB,aAAoB,EAEpB,GAAS,UAAU,SAAW,GAC9B,GAAS,GAAS,IAElB,aAAkB,EAElB,GAAO,UAAU,SAAW,GAC5B,GAAS,GAAO,IAEhB,aAA2B,EAE3B,GAAgB,UAAU,SAAW,GACrC,GAAS,GAAgB,IAEzB,aAA4B,EAE5B,GAAiB,UAAU,SAAW,qBACtC,GAAiB,UAAU,SAAW,GACtC,GAAS,GAAiB,IAG1B,aAAiC,EAEjC,GAAsB,UAAU,SAAW,GAC3C,GAAS,GAAsB,IAC/B,aAAwB,EACxB,GAAc,UAAU,kBAAoB,SAAS,EAAK,EAAO,EAAW,CAC3E,MAAO,IAAsB,KAAK,EAAK,EAAO,IAE/C,GAAK,UAAU,SAAW,GAC1B,YAA+B,EAAO,EAAW,CAChD,GAAI,GAAM,GACN,EAAU,KAAK,UAAY,GAAK,KAAK,iBAAmB,KACxD,EAAS,EAAQ,OACjB,EAAM,EAAQ,aAElB,GAAG,GAAO,GAAU,KAAK,CAExB,GAAI,GAAS,EAAQ,aAAa,GAClC,GAAG,GAAU,KAEZ,GAAI,GAAkB,CACtB,CAAC,UAAU,EAAI,OAAO,OAKxB,UAAkB,KAAK,EAAI,EAAO,EAAW,GAEtC,EAAI,KAAK,IAGjB,YAA6B,EAAM,EAAQ,EAAmB,CAC7D,GAAI,GAAS,EAAK,QAAU,GACxB,EAAM,EAAK,aAWf,GAHI,CAAC,GAGD,IAAW,OAAS,IAAQ,GAAU,KAAO,IAAQ,GAAU,MAClE,MAAO,GAIR,OADI,GAAI,EAAkB,OACnB,KAAK,CACX,GAAI,GAAK,EAAkB,GAE3B,GAAI,EAAG,SAAW,EACjB,MAAO,GAAG,YAAc,EAG1B,MAAO,GAQR,YAAgC,EAAK,EAAe,EAAO,CAC1D,EAAI,KAAK,IAAK,EAAe,KAAM,EAAM,QAAQ,SAAS,IAAc,KAGzE,YAA2B,EAAK,EAAI,EAAO,EAAW,EAAkB,CAKvE,GAJK,GACJ,GAAoB,IAGlB,EAEF,GADA,EAAO,EAAW,GACf,GACF,GAAG,MAAO,IAAQ,SAAS,CAC1B,EAAI,KAAK,GACT,YAGD,QAKF,OAAO,EAAK,cACP,IACJ,GAAI,GAAQ,EAAK,WACb,EAAM,EAAM,OACZ,EAAQ,EAAK,WACb,EAAW,EAAK,QAEpB,EAAS,GAAU,OAAO,EAAK,eAAiB,EAEhD,GAAI,GAAmB,EACvB,GAAI,CAAC,GAAU,CAAC,EAAK,QAAU,EAAK,aAAc,CAGjD,OAFI,GAEK,EAAK,EAAG,EAAK,EAAM,OAAQ,IACnC,GAAI,EAAM,KAAK,GAAI,OAAS,QAAS,CACpC,EAAY,EAAM,KAAK,GAAI,MAC3B,MAGF,GAAI,CAAC,EAEJ,OAAS,GAAM,EAAkB,OAAS,EAAG,GAAO,EAAG,IAAO,CAC7D,GAAI,GAAY,EAAkB,GAClC,GAAI,EAAU,SAAW,IAAM,EAAU,YAAc,EAAK,aAAc,CACzE,EAAY,EAAU,UACtB,OAIH,GAAI,IAAc,EAAK,aACtB,OAAS,GAAM,EAAkB,OAAS,EAAG,GAAO,EAAG,IAAO,CAC7D,GAAI,GAAY,EAAkB,GAClC,GAAI,EAAU,YAAc,EAAK,aAAc,CAC9C,AAAI,EAAU,QACb,GAAmB,EAAU,OAAS,IAAM,GAE7C,QAMJ,EAAI,KAAK,IAAK,GAEd,OAAQ,GAAE,EAAE,EAAE,EAAI,IAAI,CAErB,GAAI,GAAO,EAAM,KAAK,GACtB,AAAI,EAAK,QAAU,QAClB,EAAkB,KAAK,CAAE,OAAQ,EAAK,UAAW,UAAW,EAAK,QACzD,EAAK,UAAY,SACzB,EAAkB,KAAK,CAAE,OAAQ,GAAI,UAAW,EAAK,QAIvD,OAAQ,GAAE,EAAE,EAAE,EAAI,IAAI,CACrB,GAAI,GAAO,EAAM,KAAK,GACtB,GAAI,GAAoB,EAAK,EAAQ,GAAoB,CACxD,GAAI,GAAS,EAAK,QAAQ,GACtB,EAAM,EAAK,aACf,GAAuB,EAAK,EAAS,SAAW,EAAS,QAAS,GAClE,EAAkB,KAAK,CAAE,OAAQ,EAAQ,UAAU,IAEpD,GAAkB,EAAK,EAAI,EAAO,EAAW,GAI9C,GAAI,IAAa,GAAoB,GAAoB,EAAM,EAAQ,GAAoB,CAC1F,GAAI,GAAS,EAAK,QAAQ,GACtB,EAAM,EAAK,aACf,GAAuB,EAAK,EAAS,SAAW,EAAS,QAAS,GAClE,EAAkB,KAAK,CAAE,OAAQ,EAAQ,UAAU,IAGpD,GAAG,GAAS,GAAU,CAAC,mCAAmC,KAAK,GAAU,CAGxE,GAFA,EAAI,KAAK,KAEN,GAAU,YAAY,KAAK,GAC7B,KAAM,GACL,AAAG,EAAM,KACR,EAAI,KAAK,EAAM,MAEf,GAAkB,EAAO,EAAK,EAAQ,EAAY,EAAkB,SAErE,EAAQ,EAAM,gBAIf,MAAM,GACL,GAAkB,EAAO,EAAK,EAAQ,EAAY,EAAkB,SACpE,EAAQ,EAAM,YAGhB,EAAI,KAAK,KAAK,EAAiB,SAE/B,GAAI,KAAK,MAIV,WACI,QACA,IAEJ,OADI,GAAQ,EAAK,WACX,GACL,GAAkB,EAAO,EAAK,EAAQ,EAAY,EAAkB,SACpE,EAAQ,EAAM,YAEf,WACI,IACJ,MAAO,IAAuB,EAAK,EAAK,KAAM,EAAK,WAC/C,IAgBJ,MAAO,GAAI,KAAK,EAAK,KACnB,QAAQ,QAAQ,IAChB,QAAQ,OAAQ,eAEd,IACJ,MAAO,GAAI,KAAM,YAAY,EAAK,KAAK,WACnC,IACJ,MAAO,GAAI,KAAM,OAAO,EAAK,KAAK,WAC9B,IACJ,GAAI,GAAQ,EAAK,SACb,EAAQ,EAAK,SAEjB,GADA,EAAI,KAAK,aAAa,EAAK,MACxB,EACF,EAAI,KAAK,WAAY,GACjB,GAAS,GAAO,KACnB,EAAI,KAAK,IAAK,GAEf,EAAI,KAAK,aACD,GAAS,GAAO,IACxB,EAAI,KAAK,WAAY,EAAO,SACxB,CACJ,GAAI,GAAM,EAAK,eACf,AAAG,GACF,EAAI,KAAK,KAAK,EAAI,KAEnB,EAAI,KAAK,KAEV,WACI,IACJ,MAAO,GAAI,KAAM,KAAK,EAAK,OAAO,IAAI,EAAK,KAAK,UAC5C,IACJ,MAAO,GAAI,KAAM,IAAI,EAAK,SAAS,aAInC,EAAI,KAAK,KAAK,EAAK,WAGrB,YAAoB,EAAI,EAAK,EAAK,CACjC,GAAI,GACJ,OAAQ,EAAK,cACR,IACJ,EAAQ,EAAK,UAAU,IACvB,EAAM,cAAgB,MAMlB,IACJ,UACI,IACJ,EAAO,GACP,MAqBD,GALI,GACH,GAAQ,EAAK,UAAU,KAExB,EAAM,cAAgB,EACtB,EAAM,WAAa,KAChB,EAEF,OADI,GAAQ,EAAK,WACX,GACL,EAAM,YAAY,GAAW,EAAI,EAAM,IACvC,EAAQ,EAAM,YAGhB,MAAO,GAKR,YAAmB,EAAI,EAAK,EAAK,CAChC,GAAI,GAAQ,GAAI,GAAK,YACrB,OAAQ,KAAK,GAAK,CACjB,GAAI,GAAI,EAAK,GACb,AAAG,MAAO,IAAK,UACX,GAAK,EAAM,IACb,GAAM,GAAK,GAQd,OAJG,EAAK,YACP,GAAM,WAAa,GAAI,KAExB,EAAM,cAAgB,EACd,EAAM,cACT,IACJ,GAAI,GAAQ,EAAK,WACb,EAAS,EAAM,WAAa,GAAI,IAChC,EAAM,EAAM,OAChB,EAAO,cAAgB,EACvB,OAAQ,GAAE,EAAE,EAAE,EAAI,IACjB,EAAM,iBAAiB,GAAU,EAAI,EAAM,KAAK,GAAG,KAEpD,UACI,IACJ,EAAO,GAER,GAAG,EAEF,OADI,GAAQ,EAAK,WACX,GACL,EAAM,YAAY,GAAU,EAAI,EAAM,IACtC,EAAQ,EAAM,YAGhB,MAAO,GAGR,YAAiB,EAAO,EAAI,EAAM,CACjC,EAAO,GAAO,EAGf,GAAG,CACF,GAAG,OAAO,eAAe,CAiCxB,GAAS,GAAT,SAAwB,EAAK,CAC5B,OAAO,EAAK,cACP,QACA,IACJ,GAAI,GAAM,GAEV,IADA,EAAO,EAAK,WACN,GACL,AAAG,EAAK,WAAW,GAAK,EAAK,WAAY,GACxC,EAAI,KAAK,EAAe,IAEzB,EAAO,EAAK,YAEb,MAAO,GAAI,KAAK,YAEhB,MAAO,GAAK,YAdL,KAhCT,OAAO,eAAe,GAAa,UAAU,SAAS,CACrD,IAAI,UAAU,CACb,UAAgB,MACT,KAAK,YAId,OAAO,eAAe,GAAK,UAAU,cAAc,CAClD,IAAI,UAAU,CACb,MAAO,GAAe,OAGvB,IAAI,SAAS,EAAK,CACjB,OAAO,KAAK,cACP,QACA,IACJ,KAAM,KAAK,YACV,KAAK,YAAY,KAAK,YAEvB,AAAG,IAAQ,OAAO,KACjB,KAAK,YAAY,KAAK,cAAc,eAAe,IAEpD,cAGA,KAAK,KAAO,EACZ,KAAK,MAAQ,EACb,KAAK,UAAY,MAuBpB,GAAU,SAAS,EAAO,EAAI,EAAM,CAEnC,EAAO,KAAK,GAAO,SAGrB,EAvBU,OA2BV,GAAQ,aAAe,GACvB,GAAQ,aAAe,GACvB,GAAQ,kBAAoB,GAC5B,GAAQ,QAAU,GAClB,GAAQ,KAAO,GACf,GAAQ,SAAW,GACnB,GAAQ,cAAgB,KC19CzB,iBAAI,IAAS,KAAyB,OAStC,GAAQ,aAAe,GAAO,CAAC,IAAI,IAAK,KAAK,IAAK,GAAG,IAAK,GAAG,IAAK,KAAK,MAevE,GAAQ,cAAgB,GAAO,CACxB,GAAI,IACJ,GAAI,IACJ,IAAK,IACL,KAAM,IACN,KAAM,IACN,OAAQ,OACR,OAAQ,OACR,MAAO,OACP,OAAQ,OACR,KAAM,OACN,MAAO,OACP,MAAO,OACP,OAAQ,OACR,OAAQ,OACR,OAAQ,OACR,MAAO,OACP,KAAM,OACN,OAAQ,OACR,OAAQ,OACR,MAAO,OACP,KAAM,OACN,IAAK,OACL,OAAQ,OACR,OAAQ,OACR,OAAQ,OACR,MAAO,OACP,OAAQ,OACR,KAAM,OACN,OAAQ,OACR,OAAQ,OACR,OAAQ,OACR,MAAO,OACP,KAAM,OACN,OAAQ,OACR,MAAO,OACP,MAAO,OACP,OAAQ,OACR,OAAQ,OACR,MAAO,OACP,OAAQ,OACR,KAAM,OACN,MAAO,OACP,MAAO,OACP,OAAQ,OACR,OAAQ,OACR,OAAQ,OACR,MAAO,OACP,KAAM,OACN,OAAQ,OACR,OAAQ,OACR,MAAO,OACP,KAAM,OACN,IAAK,OACL,OAAQ,OACR,OAAQ,OACR,OAAQ,OACR,MAAO,OACP,OAAQ,OACR,KAAM,OACN,OAAQ,OACR,OAAQ,OACR,OAAQ,OACR,MAAO,OACP,KAAM,OACN,OAAQ,OACR,MAAO,OACP,KAAM,OACN,KAAM,OACN,MAAO,OACP,KAAM,OACN,MAAO,OACP,OAAQ,OACR,IAAK,OACL,OAAQ,OACR,KAAM,OACN,IAAK,OACL,KAAM,OACN,KAAM,OACN,MAAO,OACP,IAAK,OACL,IAAK,WACL,IAAK,OACL,KAAM,OACN,IAAK,OACL,OAAQ,OACR,KAAM,OACN,KAAM,OACN,MAAO,OACP,MAAO,OACP,KAAM,OACN,OAAQ,OACR,MAAO,OACP,KAAM,OACN,KAAM,OACN,MAAO,OACP,OAAQ,OACR,OAAQ,OACR,OAAQ,OACR,OAAQ,OACR,MAAO,OACP,OAAQ,OACR,OAAQ,SACR,KAAM,SACN,MAAO,SACP,MAAO,SACP,MAAO,SACP,KAAM,SACN,MAAO,SACP,GAAI,SACJ,KAAM,SACN,IAAK,SACL,MAAO,SACP,OAAQ,SACR,MAAO,SACP,KAAM,SACN,MAAO,SACP,IAAK,SACL,IAAK,SACL,GAAI,SACJ,IAAK,SACL,IAAK,SACL,IAAO,SACP,OAAQ,SACR,IAAK,SACL,KAAM,SACN,MAAO,SACP,GAAI,SACJ,MAAO,SACP,GAAI,SACJ,GAAI,SACJ,IAAK,SACL,IAAK,SACL,KAAM,SACN,KAAM,SACN,KAAM,SACN,MAAO,SACP,OAAQ,SACR,KAAM,SACN,KAAM,SACN,MAAO,SACP,KAAM,SACN,MAAO,SACP,MAAO,SACP,QAAS,SACT,KAAM,SACN,IAAK,SACL,MAAO,SACP,KAAM,SACN,MAAO,SACP,OAAQ,SACR,GAAI,SACJ,GAAI,SACJ,GAAI,SACJ,QAAS,SACT,GAAI,SACJ,IAAK,SACL,MAAO,SACP,IAAK,SACL,QAAS,SACT,IAAK,SACL,IAAK,SACL,IAAK,SACL,MAAO,SACP,MAAO,SACP,KAAM,SACN,MAAO,SACP,MAAO,SACP,QAAS,SACT,KAAM,SACN,IAAK,SACL,MAAO,SACP,KAAM,SACN,MAAO,SACP,OAAQ,SACR,GAAI,SACJ,GAAI,SACJ,GAAI,SACJ,QAAS,SACT,GAAI,SACJ,IAAK,SACL,OAAQ,SACR,MAAO,SACP,IAAK,SACL,QAAS,SACT,IAAK,SACL,IAAK,SACL,IAAK,SACL,MAAO,SACP,SAAU,SACV,MAAO,SACP,IAAK,SACL,MAAO,SACP,MAAO,SACP,OAAQ,SACR,OAAQ,SACR,KAAM,SACN,KAAM,SACN,KAAM,SACN,MAAO,SACP,KAAM,SACN,KAAM,SACN,OAAQ,SACR,KAAM,SACN,IAAK,SACL,IAAK,SACL,IAAK,SACL,MAAO,SACP,MAAO,SACP,MAAO,SACP,MAAO,SACP,MAAO,SACP,MAAO,SACP,MAAO,SACP,MAAO,SACP,OAAQ,SACR,OAAQ,SACR,KAAM,SACN,OAAQ,SACR,OAAQ,SACR,MAAO,SACP,MAAO,SACP,OAAQ,SACR,OAAQ,SACR,MAAO,SACP,KAAM,SACN,MAAO,SACP,KAAM,SACN,KAAM,SACN,KAAM,SACN,KAAM,SACN,KAAM,SACN,MAAO,SACP,MAAO,SACP,MAAO,SACP,OAAQ,SACR,OAAQ,SACR,IAAK,SACL,OAAQ,SACR,MAAO,SACP,OAAQ,SACR,MAAO,WAOd,GAAQ,UAAY,GAAQ,gBChR5B,iBAAI,IAAY,KAAyB,UAKrC,GAAgB,mJAChB,GAAW,GAAI,QAAO,aAAa,GAAc,OAAO,MAAM,EAAE,IAAI,0CACpE,GAAiB,GAAI,QAAO,IAAI,GAAc,OAAO,GAAS,OAAO,QAAS,GAAc,OAAO,GAAS,OAAO,QAMnH,GAAQ,EACR,GAAS,EACT,GAAa,EACb,GAAO,EACP,GAAsB,EACtB,GAAa,EACb,GAAc,EACd,GAAc,EASlB,YAAoB,EAAS,EAAS,CACrC,KAAK,QAAU,EACf,KAAK,QAAU,EACZ,MAAM,mBAAmB,MAAM,kBAAkB,KAAM,IAE3D,GAAW,UAAY,GAAI,OAC3B,GAAW,UAAU,KAAO,GAAW,KAEvC,aAAoB,EAIpB,GAAU,UAAY,CACrB,MAAM,SAAS,EAAO,EAAa,EAAU,CAC5C,GAAI,GAAa,KAAK,WACtB,EAAW,gBACX,GAAM,EAAc,EAAe,IACnC,GAAM,EAAO,EAAa,EACxB,EAAW,KAAK,cAClB,EAAW,gBAGb,YAAe,EAAO,EAAiB,EAAU,EAAW,EAAa,CACxE,WAA2B,GAAM,CAGhC,GAAI,GAAO,MAAQ,CAClB,IAAQ,MACR,GAAI,IAAa,MAAU,KAAQ,IAChC,GAAa,MAAU,IAAO,MAEjC,MAAO,QAAO,aAAa,GAAY,QAEvC,OAAO,QAAO,aAAa,IAG7B,WAAwB,GAAE,CACzB,GAAI,IAAI,GAAE,MAAM,EAAE,IAClB,MAAG,MAAK,GACA,EAAU,IACT,GAAE,OAAO,KAAO,IACjB,EAAkB,SAAS,GAAE,OAAO,GAAG,QAAQ,IAAI,QAE1D,GAAa,MAAM,oBAAoB,IAChC,IAGT,WAAoB,GAAI,CACvB,GAAG,GAAI,EAAM,CACZ,GAAI,IAAK,EAAO,UAAU,EAAM,IAAK,QAAQ,WAAW,GACxD,GAAS,EAAS,GAClB,EAAW,WAAW,GAAG,EAAE,GAAI,GAC/B,EAAQ,IAGV,WAAkB,GAAE,GAAE,CACrB,KAAM,IAAG,GAAY,IAAI,EAAY,KAAK,KACzC,EAAY,GAAE,MACd,EAAU,EAAY,GAAE,GAAG,OAC3B,EAAQ,aAGT,EAAQ,aAAe,GAAE,EAAU,EAUpC,OARI,GAAY,EACZ,EAAU,EACV,EAAc,sBACd,EAAU,EAAW,QAErB,EAAa,CAAC,CAAC,aAAa,IAC5B,EAAW,GACX,EAAQ,IACD,CACV,GAAG,CACF,GAAI,GAAW,EAAO,QAAQ,IAAI,GAClC,GAAG,EAAS,EAAE,CACb,GAAG,CAAC,EAAO,OAAO,GAAO,MAAM,SAAS,CACvC,GAAI,GAAM,EAAW,IACd,EAAO,EAAI,eAAe,EAAO,OAAO,IAC5C,EAAI,YAAY,GAChB,EAAW,eAAiB,EAEhC,OAKD,OAHG,EAAS,GACX,EAAW,GAEL,EAAO,OAAO,EAAS,QACzB,IACJ,GAAI,GAAM,EAAO,QAAQ,IAAI,EAAS,GAClC,EAAU,EAAO,UAAU,EAAW,EAAG,GAAK,QAAQ,eAAgB,IACtE,EAAS,EAAW,MACxB,AAAG,EAAI,EAEA,GAAU,EAAO,UAAU,EAAS,GAAG,QAAQ,UAAU,IACzD,EAAa,MAAM,iBAAiB,EAAQ,oBAAoB,EAAO,SACvE,EAAM,EAAS,EAAE,EAAQ,QACjB,EAAQ,MAAM,QACtB,GAAU,EAAQ,QAAQ,UAAU,IACpC,EAAa,MAAM,iBAAiB,EAAQ,uBAC5C,EAAM,EAAS,EAAE,EAAQ,QAEhC,GAAI,GAAa,EAAO,WACpB,EAAW,EAAO,SAAW,EAC7B,EAAoB,GAAY,EAAO,SAAS,EAAO,QAAQ,eAAiB,EAAQ,cACtF,GAAG,EAAkB,CAE1B,GADM,EAAW,WAAW,EAAO,IAAI,EAAO,UAAU,GACrD,EACF,OAAQ,KAAU,GACjB,EAAW,iBAAiB,GAG9B,AAAI,GACM,EAAa,WAAW,iBAAiB,EAAQ,2CAA2C,EAAO,aAGvG,GAAW,KAAK,GAGvB,IACA,UAEI,IACJ,GAAS,EAAS,GAClB,EAAM,GAAiB,EAAO,EAAS,GACvC,UACI,IACJ,GAAS,EAAS,GAClB,EAAM,GAAS,EAAO,EAAS,EAAW,GAC1C,cAEA,GAAS,EAAS,GAClB,GAAI,GAAK,GAAI,IACT,EAAe,EAAW,EAAW,OAAO,GAAG,aAE/C,EAAM,GAAsB,EAAO,EAAS,EAAG,EAAa,EAAe,GAC3E,EAAM,EAAG,OASb,GANG,CAAC,EAAG,QAAU,GAAc,EAAO,EAAI,EAAG,QAAQ,IACpD,GAAG,OAAS,GACR,EAAU,MACb,EAAa,QAAQ,2BAGpB,GAAW,EAAI,CAGjB,OAFI,GAAW,GAAY,EAAQ,IAE3B,EAAI,EAAE,EAAE,EAAI,IAAI,CACvB,GAAI,GAAI,EAAG,GACX,EAAS,EAAE,QACX,EAAE,QAAU,GAAY,EAAQ,IAEjC,EAAW,QAAU,EAClB,GAAc,EAAG,EAAW,IAC9B,EAAW,KAAK,GAEjB,EAAW,QAAU,MAErB,AAAG,IAAc,EAAG,EAAW,IAC9B,EAAW,KAAK,GAIlB,AAAI,GAAU,OAAO,EAAG,MAAQ,CAAC,EAAG,OACnC,EAAM,GAAwB,EAAO,EAAI,EAAG,QAAQ,EAAe,GAEnE,WAGI,GAAN,CACA,GAAI,aAAa,IAChB,KAAM,IAEP,EAAa,MAAM,wBAAwB,IAC3C,EAAM,GAEP,AAAG,EAAI,EACN,EAAQ,EAGR,EAAW,KAAK,IAAI,EAAS,GAAO,IAIvC,YAAqB,EAAE,EAAE,CACxB,SAAE,WAAa,EAAE,WACjB,EAAE,aAAe,EAAE,aACZ,EAOR,YAA+B,EAAO,EAAM,EAAG,EAAa,EAAe,EAAa,CAOvF,WAAsB,EAAO,EAAO,EAAY,CAC/C,AAAI,EAAG,eAAe,eAAe,IACpC,EAAa,WAAW,aAAe,EAAQ,cAEhD,EAAG,SAAS,EAAO,EAAO,GAM3B,OAJI,GACA,EACA,EAAI,EAAE,EACN,EAAI,KACG,CACV,GAAI,GAAI,EAAO,OAAO,GACtB,OAAO,OACF,IACJ,GAAG,IAAM,GACR,EAAW,EAAO,MAAM,EAAM,GAC9B,EAAI,WACI,IAAM,GACd,EAAI,OAGJ,MAAM,IAAI,OAAM,uCAEjB,UACI,QACA,IACJ,GAAG,IAAM,IAAQ,IAAM,GAQtB,GANG,IAAM,IACR,GAAa,QAAQ,kCACrB,EAAW,EAAO,MAAM,EAAM,IAE/B,EAAQ,EAAE,EACV,EAAI,EAAO,QAAQ,EAAE,GAClB,EAAE,EACJ,EAAQ,EAAO,MAAM,EAAM,GAAG,QAAQ,WAAW,GACjD,EAAa,EAAU,EAAO,EAAM,GACpC,EAAI,OAGJ,MAAM,IAAI,OAAM,2BAA4B,EAAE,mBAEvC,GAAK,GACb,EAAQ,EAAO,MAAM,EAAM,GAAG,QAAQ,WAAW,GAEjD,EAAa,EAAU,EAAO,GAE9B,EAAa,QAAQ,cAAc,EAAS,uBAAuB,EAAE,OACrE,EAAQ,EAAE,EACV,EAAI,OAGJ,MAAM,IAAI,OAAM,kCAEjB,UACI,IACJ,OAAO,OACF,IACJ,EAAG,WAAW,EAAO,MAAM,EAAM,QAC7B,QACA,QACA,IACJ,EAAG,GACH,EAAG,OAAS,OACR,QACA,QACA,IACJ,cAGA,KAAM,IAAI,OAAM,qCAEjB,UACI,GACJ,SAAa,MAAM,2BAChB,GAAK,IACP,EAAG,WAAW,EAAO,MAAM,EAAM,IAE3B,MACH,IACJ,OAAO,OACF,IACJ,EAAG,WAAW,EAAO,MAAM,EAAM,QAC7B,QACA,QACA,IACJ,UACI,QACA,IACJ,EAAQ,EAAO,MAAM,EAAM,GACxB,EAAM,MAAM,MAAQ,KACtB,GAAG,OAAU,GACb,EAAQ,EAAM,MAAM,EAAE,SAEnB,IACJ,AAAG,IAAM,IACR,GAAQ,GAET,AAAG,GAAK,GACP,GAAa,QAAQ,cAAc,EAAM,qBACzC,EAAa,EAAU,EAAM,QAAQ,WAAW,GAAiB,IAE9D,GAAC,GAAU,OAAO,EAAa,MAAQ,CAAC,EAAM,MAAM,sCACtD,EAAa,QAAQ,cAAc,EAAM,qBAAqB,EAAM,eAErE,EAAa,EAAO,EAAO,IAE5B,UACI,IACJ,KAAM,IAAI,OAAM,4BAGjB,MAAO,OAEH,OACJ,EAAI,YAEJ,GAAG,GAAI,IACN,OAAO,OACF,IACJ,EAAG,WAAW,EAAO,MAAM,EAAM,IACjC,EAAI,GACJ,UACI,IACJ,EAAW,EAAO,MAAM,EAAM,GAC9B,EAAI,GACJ,UACI,IACJ,GAAI,GAAQ,EAAO,MAAM,EAAM,GAAG,QAAQ,WAAW,GACrD,EAAa,QAAQ,cAAc,EAAM,sBACzC,EAAa,EAAU,EAAO,OAC1B,IACJ,EAAI,GACJ,UAWD,QAAO,OAIF,IACJ,GAAI,GAAW,EAAG,QAClB,AAAI,EAAC,GAAU,OAAO,EAAa,MAAQ,CAAC,EAAS,MAAM,sCAC1D,EAAa,QAAQ,cAAc,EAAS,qBAAqB,EAAS,gBAE3E,EAAa,EAAU,EAAU,GACjC,EAAQ,EACR,EAAI,GACJ,UACI,IACJ,EAAa,QAAQ,+BAA+B,EAAS,WACzD,IACJ,EAAI,GACJ,EAAQ,EACR,UACI,IACJ,EAAI,GACJ,EAAQ,EACR,UACI,IACJ,KAAM,IAAI,OAAM,+DAKnB,KAMF,YAAuB,EAAG,EAAW,EAAa,CAKjD,OAJI,GAAU,EAAG,QACb,EAAa,KAEb,EAAI,EAAG,OACL,KAAI,CACT,GAAI,GAAI,EAAG,GACP,EAAQ,EAAE,MACV,EAAQ,EAAE,MACV,EAAM,EAAM,QAAQ,KACxB,GAAG,EAAI,EACN,GAAI,GAAS,EAAE,OAAS,EAAM,MAAM,EAAE,GAClC,EAAY,EAAM,MAAM,EAAI,GAC5B,EAAW,IAAW,SAAW,MAErC,GAAY,EACZ,EAAS,KACT,EAAW,IAAU,SAAW,GAGjC,EAAE,UAAY,EAEX,IAAa,IACZ,IAAc,MAChB,GAAa,GAEb,GAAM,EAAa,EAAa,KAGjC,EAAa,GAAY,EAAW,GAAY,EAChD,EAAE,IAAM,GAAU,MAClB,EAAW,mBAAmB,EAAU,IAI1C,OADI,GAAI,EAAG,OACL,KAAI,CACT,EAAI,EAAG,GACP,GAAI,GAAS,EAAE,OACf,AAAG,GACC,KAAW,OACb,GAAE,IAAM,GAAU,KACf,IAAW,SACd,GAAE,IAAM,EAAa,GAAU,MAMlC,GAAI,GAAM,EAAQ,QAAQ,KAC1B,AAAG,EAAI,EACN,GAAS,EAAG,OAAS,EAAQ,MAAM,EAAE,GACrC,EAAY,EAAG,UAAY,EAAQ,MAAM,EAAI,IAE7C,GAAS,KACT,EAAY,EAAG,UAAY,GAG5B,GAAI,GAAK,EAAG,IAAM,EAAa,GAAU,IAIzC,GAHA,EAAW,aAAa,EAAG,EAAU,EAAQ,GAG1C,EAAG,QAEL,GADA,EAAW,WAAW,EAAG,EAAU,GAChC,EACF,IAAI,IAAU,GACb,EAAW,iBAAiB,OAI9B,UAAG,aAAe,EAClB,EAAG,WAAa,EAET,GAGT,YAAiC,EAAO,EAAW,EAAQ,EAAe,EAAW,CACpF,GAAG,yBAAyB,KAAK,GAAS,CACzC,GAAI,GAAc,EAAO,QAAQ,KAAK,EAAQ,IAAI,GAC9C,EAAO,EAAO,UAAU,EAAW,EAAE,GACzC,GAAG,OAAO,KAAK,GACd,MAAG,YAAY,KAAK,GAGlB,GAAW,WAAW,EAAK,EAAE,EAAK,QAE3B,GAGR,GAAO,EAAK,QAAQ,WAAW,GAC/B,EAAW,WAAW,EAAK,EAAE,EAAK,QAC3B,GAKV,MAAO,GAAW,EAEnB,YAAuB,EAAO,EAAW,EAAQ,EAAS,CAEzD,GAAI,GAAM,EAAS,GACnB,MAAG,IAAO,MAET,GAAO,EAAO,YAAY,KAAK,EAAQ,KACpC,EAAI,GACN,GAAM,EAAO,YAAY,KAAK,IAE/B,EAAS,GAAU,GAEb,EAAI,EAGZ,YAAe,EAAO,EAAO,CAC5B,OAAQ,KAAK,GAAQ,EAAO,GAAK,EAAO,GAEzC,YAAkB,EAAO,EAAM,EAAW,EAAa,CACtD,GAAI,GAAM,EAAO,OAAO,EAAM,GAC9B,OAAO,OACF,IACJ,GAAG,EAAO,OAAO,EAAQ,KAAO,IAAI,CACnC,GAAI,GAAM,EAAO,QAAQ,MAAM,EAAM,GAErC,MAAG,GAAI,EACN,GAAW,QAAQ,EAAO,EAAM,EAAE,EAAI,EAAM,GACrC,EAAI,GAEX,GAAa,MAAM,oBACZ,QAIR,OAAO,WAGR,GAAG,EAAO,OAAO,EAAM,EAAE,IAAM,SAAS,CACvC,GAAI,GAAM,EAAO,QAAQ,MAAM,EAAM,GACrC,SAAW,aACX,EAAW,WAAW,EAAO,EAAM,EAAE,EAAI,EAAM,GAC/C,EAAW,WACJ,EAAI,EAIZ,GAAI,GAAS,GAAM,EAAO,GACtB,EAAM,EAAO,OACjB,GAAG,EAAI,GAAK,YAAY,KAAK,EAAO,GAAG,IAAI,CAC1C,GAAI,GAAO,EAAO,GAAG,GACjB,EAAQ,GACR,EAAQ,GACZ,AAAG,EAAI,GACN,CAAG,YAAY,KAAK,EAAO,GAAG,IAC7B,GAAQ,EAAO,GAAG,GAClB,EAAQ,EAAI,GAAK,EAAO,GAAG,IACnB,YAAY,KAAK,EAAO,GAAG,KACnC,GAAQ,EAAO,GAAG,KAGpB,GAAI,GAAY,EAAO,EAAI,GAC3B,SAAW,SAAS,EAAM,EAAO,GACjC,EAAW,SAEJ,EAAU,MAAM,EAAU,GAAG,QAGtC,MAAO,GAKR,YAA0B,EAAO,EAAM,EAAW,CACjD,GAAI,GAAM,EAAO,QAAQ,KAAK,GAC9B,GAAG,EAAI,CACN,GAAI,GAAQ,EAAO,UAAU,EAAM,GAAK,MAAM,8BAC9C,GAAG,EAAM,CACR,GAAI,GAAM,EAAM,GAAG,OACnB,SAAW,sBAAsB,EAAM,GAAI,EAAM,IAC1C,EAAI,MAEX,OAAO,GAGT,MAAO,GAGR,aAA4B,CAC3B,KAAK,eAAiB,GAEvB,GAAkB,UAAY,CAC7B,WAAW,SAAS,EAAQ,CAC3B,GAAG,CAAC,GAAe,KAAK,GACvB,KAAM,IAAI,OAAM,mBAAmB,GAEpC,KAAK,QAAU,GAEhB,SAAS,SAAS,EAAO,EAAO,EAAQ,CACvC,GAAG,CAAC,GAAe,KAAK,GACvB,KAAM,IAAI,OAAM,qBAAqB,GAEtC,KAAK,eAAe,GAAS,KAAK,OAClC,KAAK,KAAK,UAAY,CAAC,MAAM,EAAM,MAAM,EAAM,OAAO,IAEvD,OAAO,EACP,aAAa,SAAS,EAAE,CAAC,MAAO,MAAK,GAAG,WACxC,WAAW,SAAS,EAAE,CAAC,MAAO,MAAK,GAAG,SACtC,SAAS,SAAS,EAAE,CAAC,MAAO,MAAK,GAAG,OACpC,OAAO,SAAS,EAAE,CAAC,MAAO,MAAK,GAAG,KAClC,SAAS,SAAS,EAAE,CAAC,MAAO,MAAK,GAAG,QAerC,YAAe,EAAO,EAAM,CAC3B,GAAI,GACA,EAAM,GACN,EAAM,6CAGV,IAFA,EAAI,UAAY,EAChB,EAAI,KAAK,GACH,EAAQ,EAAI,KAAK,IAEtB,GADA,EAAI,KAAK,GACN,EAAM,GAAG,MAAO,GAIrB,GAAQ,UAAY,GACpB,GAAQ,WAAa,KCnoBrB,iBAAI,IAAc,KACd,GAAM,KACN,GAAW,KACX,GAAM,KAEN,GAAoB,GAAI,kBAExB,GAAY,GAAY,UAExB,GAAa,GAAI,WACjB,GAAY,GAAI,UAEpB,YAAmB,EAAQ,CAC1B,KAAK,QAAU,GAAU,CAAC,QAAQ,IAGnC,GAAU,UAAU,gBAAkB,SAAS,EAAO,EAAS,CAC9D,GAAI,GAAU,KAAK,QACf,EAAO,GAAI,IACX,EAAa,EAAQ,YAAc,GAAI,IACvC,EAAe,EAAQ,aACvB,EAAU,EAAQ,QAClB,EAAe,EAAQ,OAAO,GAC9B,EAAS,aAAa,KAAK,GACzB,EAAY,EAAS,GAAS,cAAgB,GAAS,aAC7D,MAAG,IACF,EAAW,mBAAmB,GAG/B,EAAI,aAAe,GAAkB,EAAa,EAAW,GAC7D,EAAI,WAAa,EAAQ,YAAc,EACpC,GACF,GAAa,IAAM,GAAU,MAE9B,EAAa,IAAM,EAAa,KAAO,GAAU,IACjD,AAAG,GAAU,MAAO,IAAW,SAC9B,EAAI,MAAM,EAAO,EAAa,GAE9B,EAAI,aAAa,MAAM,sBAEjB,EAAW,KAEnB,YAA2B,EAAU,EAAW,EAAQ,CACvD,GAAG,CAAC,EAAU,CACb,GAAG,YAAsB,IACxB,MAAO,GAER,EAAY,EAEb,GAAI,GAAe,GACf,EAAa,YAAqB,UACtC,EAAU,GAAS,GACnB,WAAe,EAAI,CAClB,GAAI,GAAK,EAAU,GACnB,AAAG,CAAC,GAAM,GACT,GAAK,EAAU,QAAU,EAAE,SAAS,EAAI,CAAC,EAAU,EAAI,IAAM,GAE9D,EAAa,GAAO,GAAM,SAAS,EAAI,CACtC,EAAG,WAAW,EAAI,KAAM,EAAI,GAAS,MACnC,UAAU,GAEd,SAAM,WACN,EAAM,SACN,EAAM,cACC,EAaR,aAAsB,CAClB,KAAK,MAAQ,GAEjB,YAAkB,EAAQ,EAAK,CAC9B,EAAK,WAAa,EAAQ,WAC1B,EAAK,aAAe,EAAQ,aAM7B,GAAW,UAAY,CACtB,cAAgB,UAAW,CACvB,KAAK,IAAM,GAAI,MAAoB,eAAe,KAAM,KAAM,MAC1D,KAAK,SACL,MAAK,IAAI,YAAc,KAAK,QAAQ,WAG5C,aAAa,SAAS,EAAc,EAAW,EAAO,EAAO,CAC5D,GAAI,GAAM,KAAK,IACR,EAAK,EAAI,gBAAgB,EAAc,GAAO,GAC9C,EAAM,EAAM,OAChB,GAAc,KAAM,GACpB,KAAK,eAAiB,EAEzB,KAAK,SAAW,GAAS,KAAK,QAAQ,GACnC,OAAS,GAAI,EAAI,EAAI,EAAK,IAAK,CAC3B,GAAI,GAAe,EAAM,OAAO,GAC5B,EAAQ,EAAM,SAAS,GACvB,EAAQ,EAAM,SAAS,GAC7B,EAAO,EAAI,kBAAkB,EAAc,GAC/C,KAAK,SAAU,GAAS,EAAM,WAAW,GAAG,GAC5C,EAAK,MAAQ,EAAK,UAAY,EAC9B,EAAG,iBAAiB,KAGtB,WAAW,SAAS,EAAc,EAAW,EAAO,CACnD,GAAI,GAAU,KAAK,eACf,EAAU,EAAQ,QACtB,KAAK,eAAiB,EAAQ,YAE/B,mBAAmB,SAAS,EAAQ,EAAK,GAEzC,iBAAiB,SAAS,EAAQ,GAElC,sBAAsB,SAAS,EAAQ,EAAM,CACzC,GAAI,GAAM,KAAK,IAAI,4BAA4B,EAAQ,GACvD,KAAK,SAAW,GAAS,KAAK,QAAQ,GACtC,GAAc,KAAM,IAExB,oBAAoB,SAAS,EAAI,EAAO,EAAQ,GAEhD,WAAW,SAAS,EAAO,EAAO,EAAQ,CAGzC,GAFA,EAAQ,GAAU,MAAM,KAAK,WAE1B,EAAM,CACR,GAAI,KAAK,MACR,GAAI,GAAW,KAAK,IAAI,mBAAmB,OAE3C,IAAI,GAAW,KAAK,IAAI,eAAe,GAExC,AAAG,KAAK,eACP,KAAK,eAAe,YAAY,GACxB,QAAQ,KAAK,IACrB,KAAK,IAAI,YAAY,GAGtB,KAAK,SAAW,GAAS,KAAK,QAAQ,KAGxC,cAAc,SAAS,EAAM,GAE7B,YAAY,UAAW,CACtB,KAAK,IAAI,aAEV,mBAAmB,SAAU,EAAS,CAClC,AAAG,MAAK,QAAU,IACjB,GAAQ,WAAa,IAI1B,QAAQ,SAAS,EAAO,EAAO,EAAQ,CACtC,EAAQ,GAAU,MAAM,KAAK,WAC1B,GAAI,GAAO,KAAK,IAAI,cAAc,GAClC,KAAK,SAAW,GAAS,KAAK,QAAQ,GACtC,GAAc,KAAM,IAGxB,WAAW,UAAW,CAElB,KAAK,MAAQ,IAEjB,SAAS,UAAW,CAChB,KAAK,MAAQ,IAGjB,SAAS,SAAS,EAAM,EAAU,EAAU,CAC3C,GAAI,GAAO,KAAK,IAAI,eACjB,GAAI,GAAQ,EAAK,mBAAoB,CACjC,GAAI,GAAK,EAAK,mBAAmB,EAAM,EAAU,GACjD,KAAK,SAAW,GAAS,KAAK,QAAQ,GACtC,GAAc,KAAM,GACxB,KAAK,IAAI,QAAU,IAOvB,QAAQ,SAAS,EAAO,CACvB,QAAQ,KAAK,oBAAqB,EAAM,GAAS,KAAK,WAEvD,MAAM,SAAS,EAAO,CACrB,QAAQ,MAAM,kBAAmB,EAAM,GAAS,KAAK,WAEtD,WAAW,SAAS,EAAO,CAC1B,KAAM,IAAI,IAAW,EAAO,KAAK,WAGnC,YAAkB,EAAE,CACnB,GAAG,EACF,MAAO;AAAA,GAAO,GAAE,UAAW,IAAI,UAAU,EAAE,WAAW,QAAQ,EAAE,aAAa,IAG/E,YAAmB,EAAM,EAAM,EAAO,CACrC,MAAG,OAAO,IAAS,SACX,EAAM,OAAO,EAAM,GAEvB,EAAM,QAAU,EAAM,GAAU,EAC3B,GAAI,MAAK,KAAK,OAAO,EAAM,EAAM,GAAQ,GAE1C,EAmCT,+JAA+J,QAAQ,OAAO,SAAS,EAAI,CAC1L,GAAW,UAAU,GAAO,UAAU,CAAC,MAAO,SAI/C,YAAwB,EAAO,EAAM,CACjC,AAAK,EAAO,eAGR,EAAO,eAAe,YAAY,GAFlC,EAAO,IAAI,YAAY,GAM/B,GAAQ,aAAe,GACvB,GAAQ,UAAY,GAKpB,GAAQ,kBAAoB,GAAI,kBAKhC,GAAQ,cAAgB,GAAI,gBC3Q5B,iBAAI,IAAM,KACV,GAAQ,kBAAoB,GAAI,kBAChC,GAAQ,cAAgB,GAAI,cAC5B,GAAQ,UAAY,KAAwB,YCH5C,sBAAO,QAAU,MAAM,SAAW,SAAU,EAAK,CAC/C,MAAO,QAAO,UAAU,SAAS,KAAK,IAAQ,oBCDhD,cAwBA,YAAiB,EAAK,CACpB,MAAI,OAAM,QACD,MAAM,QAAQ,GAEhB,GAAe,KAAS,iBAEjC,GAAQ,QAAU,GAElB,YAAmB,EAAK,CACtB,MAAO,OAAO,IAAQ,UAExB,GAAQ,UAAY,GAEpB,YAAgB,EAAK,CACnB,MAAO,KAAQ,KAEjB,GAAQ,OAAS,GAEjB,YAA2B,EAAK,CAC9B,MAAO,IAAO,KAEhB,GAAQ,kBAAoB,GAE5B,YAAkB,EAAK,CACrB,MAAO,OAAO,IAAQ,SAExB,GAAQ,SAAW,GAEnB,YAAkB,EAAK,CACrB,MAAO,OAAO,IAAQ,SAExB,GAAQ,SAAW,GAEnB,YAAkB,EAAK,CACrB,MAAO,OAAO,IAAQ,SAExB,GAAQ,SAAW,GAEnB,YAAqB,EAAK,CACxB,MAAO,KAAQ,OAEjB,GAAQ,YAAc,GAEtB,YAAkB,EAAI,CACpB,MAAO,IAAe,KAAQ,kBAEhC,GAAQ,SAAW,GAEnB,YAAkB,EAAK,CACrB,MAAO,OAAO,IAAQ,UAAY,IAAQ,KAE5C,GAAQ,SAAW,GAEnB,YAAgB,EAAG,CACjB,MAAO,IAAe,KAAO,gBAE/B,GAAQ,OAAS,GAEjB,YAAiB,EAAG,CAClB,MAAQ,IAAe,KAAO,kBAAoB,YAAa,OAEjE,GAAQ,QAAU,GAElB,YAAoB,EAAK,CACvB,MAAO,OAAO,IAAQ,WAExB,GAAQ,WAAa,GAErB,YAAqB,EAAK,CACxB,MAAO,KAAQ,MACR,MAAO,IAAQ,WACf,MAAO,IAAQ,UACf,MAAO,IAAQ,UACf,MAAO,IAAQ,UACf,MAAO,IAAQ,YAExB,GAAQ,YAAc,GAEtB,GAAQ,SAAW,OAAO,SAE1B,YAAwB,EAAG,CACzB,MAAO,QAAO,UAAU,SAAS,KAAK,MCzGxC,mBAAI,MAAO,QAAO,QAAW,WAE3B,GAAO,QAAU,SAAkB,EAAM,EAAW,CAClD,AAAI,GACF,GAAK,OAAS,EACd,EAAK,UAAY,OAAO,OAAO,EAAU,UAAW,CAClD,YAAa,CACX,MAAO,EACP,WAAY,GACZ,SAAU,GACV,aAAc,QAOtB,GAAO,QAAU,SAAkB,EAAM,EAAW,CAClD,GAAI,EAAW,CACb,EAAK,OAAS,EACd,GAAI,GAAW,UAAY,GAC3B,EAAS,UAAY,EAAU,UAC/B,EAAK,UAAY,GAAI,GACrB,EAAK,UAAU,YAAc,MCvBnC,sBAAI,CAGF,GAFI,GAAO,QAAQ,QAEf,MAAO,IAAK,UAAa,WAAY,KAAM,GAC/C,GAAO,QAAU,GAAK,cACtB,CAEA,GAAO,QAAU,KANb,SCDN,cAqBA,GAAI,IAAS,QAAQ,UAAU,OAE3B,GAAmB,GAAO,YACzB,SAAS,EAAU,CACjB,OAAQ,GAAY,EAAS,mBACtB,UAAY,WAAa,YAAc,YAAc,aAAe,aAAe,WAAa,YAAc,cAAgB,eAAiB,MAAO,MAAO,WACzJ,MAAO,KAKzB,YAAwB,EAAU,CAChC,GAAI,GAAY,CAAC,GAAiB,GAChC,KAAM,IAAI,OAAM,qBAAuB,GAY3C,GAAI,IAAgB,GAAQ,cAAgB,SAAS,EAAU,CAG7D,OAFA,KAAK,SAAY,IAAY,QAAQ,cAAc,QAAQ,OAAQ,IACnE,GAAe,GACP,KAAK,cACN,OAEH,KAAK,cAAgB,EACrB,UACG,WACA,UAEH,KAAK,cAAgB,EACrB,KAAK,qBAAuB,GAC5B,UACG,SAEH,KAAK,cAAgB,EACrB,KAAK,qBAAuB,GAC5B,cAEA,KAAK,MAAQ,GACb,OAKJ,KAAK,WAAa,GAAI,IAAO,GAE7B,KAAK,aAAe,EAEpB,KAAK,WAAa,GAapB,GAAc,UAAU,MAAQ,SAAS,EAAQ,CAG/C,OAFI,GAAU,GAEP,KAAK,YAAY,CAEtB,GAAI,GAAa,EAAO,QAAU,KAAK,WAAa,KAAK,aACrD,KAAK,WAAa,KAAK,aACvB,EAAO,OAMX,GAHA,EAAO,KAAK,KAAK,WAAY,KAAK,aAAc,EAAG,GACnD,KAAK,cAAgB,EAEjB,KAAK,aAAe,KAAK,WAE3B,MAAO,GAIT,EAAS,EAAO,MAAM,EAAW,EAAO,QAGxC,EAAU,KAAK,WAAW,MAAM,EAAG,KAAK,YAAY,SAAS,KAAK,UAGlE,GAAI,GAAW,EAAQ,WAAW,EAAQ,OAAS,GACnD,GAAI,GAAY,OAAU,GAAY,MAAQ,CAC5C,KAAK,YAAc,KAAK,cACxB,EAAU,GACV,SAKF,GAHA,KAAK,aAAe,KAAK,WAAa,EAGlC,EAAO,SAAW,EACpB,MAAO,GAET,MAIF,KAAK,qBAAqB,GAE1B,GAAI,GAAM,EAAO,OACjB,AAAI,KAAK,YAEP,GAAO,KAAK,KAAK,WAAY,EAAG,EAAO,OAAS,KAAK,aAAc,GACnE,GAAO,KAAK,cAGd,GAAW,EAAO,SAAS,KAAK,SAAU,EAAG,GAE7C,GAAI,GAAM,EAAQ,OAAS,EACvB,EAAW,EAAQ,WAAW,GAElC,GAAI,GAAY,OAAU,GAAY,MAAQ,CAC5C,GAAI,GAAO,KAAK,cAChB,YAAK,YAAc,EACnB,KAAK,cAAgB,EACrB,KAAK,WAAW,KAAK,KAAK,WAAY,EAAM,EAAG,GAC/C,EAAO,KAAK,KAAK,WAAY,EAAG,EAAG,GAC5B,EAAQ,UAAU,EAAG,GAI9B,MAAO,IAOT,GAAc,UAAU,qBAAuB,SAAS,EAAQ,CAM9D,OAJI,GAAK,EAAO,QAAU,EAAK,EAAI,EAAO,OAInC,EAAI,EAAG,IAAK,CACjB,GAAI,GAAI,EAAO,EAAO,OAAS,GAK/B,GAAI,GAAK,GAAK,GAAK,GAAK,EAAM,CAC5B,KAAK,WAAa,EAClB,MAIF,GAAI,GAAK,GAAK,GAAK,GAAK,GAAM,CAC5B,KAAK,WAAa,EAClB,MAIF,GAAI,GAAK,GAAK,GAAK,GAAK,GAAM,CAC5B,KAAK,WAAa,EAClB,OAGJ,KAAK,aAAe,GAGtB,GAAc,UAAU,IAAM,SAAS,EAAQ,CAC7C,GAAI,GAAM,GAIV,GAHI,GAAU,EAAO,QACnB,GAAM,KAAK,MAAM,IAEf,KAAK,aAAc,CACrB,GAAI,GAAK,KAAK,aACV,EAAM,KAAK,WACX,EAAM,KAAK,SACf,GAAO,EAAI,MAAM,EAAG,GAAI,SAAS,GAGnC,MAAO,IAGT,YAA0B,EAAQ,CAChC,MAAO,GAAO,SAAS,KAAK,UAG9B,YAAmC,EAAQ,CACzC,KAAK,aAAe,EAAO,OAAS,EACpC,KAAK,WAAa,KAAK,aAAe,EAAI,EAG5C,YAAoC,EAAQ,CAC1C,KAAK,aAAe,EAAO,OAAS,EACpC,KAAK,WAAa,KAAK,aAAe,EAAI,KC3N5C,mBAqBA,GAAO,QAAU,GAGjB,GAAI,IAAU,KAKV,GAAS,QAAQ,UAAU,OAG/B,GAAS,cAAgB,GAEzB,GAAI,IAAK,QAAQ,UAAU,aAG3B,AAAK,GAAG,eAAe,IAAG,cAAgB,SAAS,EAAS,EAAM,CAChE,MAAO,GAAQ,UAAU,GAAM,SAIjC,GAAI,IAAS,QAAQ,UAGjB,GAAO,KACX,GAAK,SAAW,KAGhB,GAAI,IAEJ,GAAK,SAAS,GAAU,IAExB,YAAuB,EAAS,EAAQ,CACtC,EAAU,GAAW,GAIrB,GAAI,GAAM,EAAQ,cAClB,KAAK,cAAiB,GAAO,IAAQ,EAAK,EAAM,GAAK,KAGrD,KAAK,cAAgB,CAAC,CAAC,KAAK,cAE5B,KAAK,OAAS,GACd,KAAK,OAAS,EACd,KAAK,MAAQ,KACb,KAAK,WAAa,EAClB,KAAK,QAAU,GACf,KAAK,MAAQ,GACb,KAAK,WAAa,GAClB,KAAK,QAAU,GAMf,KAAK,WAAa,GAMlB,KAAK,KAAO,GAIZ,KAAK,aAAe,GACpB,KAAK,gBAAkB,GACvB,KAAK,kBAAoB,GAKzB,KAAK,WAAa,CAAC,CAAC,EAAQ,WAK5B,KAAK,gBAAkB,EAAQ,iBAAmB,OAIlD,KAAK,OAAS,GAGd,KAAK,WAAa,EAGlB,KAAK,YAAc,GAEnB,KAAK,QAAU,KACf,KAAK,SAAW,KACZ,EAAQ,UACL,KACH,IAAgB,KAA2B,eAC7C,KAAK,QAAU,GAAI,IAAc,EAAQ,UACzC,KAAK,SAAW,EAAQ,UAI5B,YAAkB,EAAS,CACzB,GAAI,CAAE,gBAAgB,KACpB,MAAO,IAAI,IAAS,GAEtB,KAAK,eAAiB,GAAI,IAAc,EAAS,MAGjD,KAAK,SAAW,GAEhB,GAAO,KAAK,MAOd,GAAS,UAAU,KAAO,SAAS,EAAO,EAAU,CAClD,GAAI,GAAQ,KAAK,eAEjB,MAAI,OAAO,IAAU,UAAY,CAAC,EAAM,YACtC,GAAW,GAAY,EAAM,gBACzB,IAAa,EAAM,UACrB,GAAQ,GAAI,IAAO,EAAO,GAC1B,EAAW,KAIR,GAAiB,KAAM,EAAO,EAAO,EAAU,KAIxD,GAAS,UAAU,QAAU,SAAS,EAAO,CAC3C,GAAI,GAAQ,KAAK,eACjB,MAAO,IAAiB,KAAM,EAAO,EAAO,GAAI,KAGlD,YAA0B,EAAQ,EAAO,EAAO,EAAU,EAAY,CACpE,GAAI,GAAK,GAAa,EAAO,GAC7B,GAAI,EACF,EAAO,KAAK,QAAS,WACZ,GAAU,KACnB,EAAM,QAAU,GACX,EAAM,OACT,GAAW,EAAQ,WACZ,EAAM,YAAc,GAAS,EAAM,OAAS,EACrD,GAAI,EAAM,OAAS,CAAC,EAAY,CAC9B,GAAI,GAAI,GAAI,OAAM,2BAClB,EAAO,KAAK,QAAS,WACZ,EAAM,YAAc,EAAY,CACzC,GAAI,GAAI,GAAI,OAAM,oCAClB,EAAO,KAAK,QAAS,OAErB,AAAI,GAAM,SAAW,CAAC,GAAc,CAAC,GACnC,GAAQ,EAAM,QAAQ,MAAM,IAG9B,EAAM,QAAU,EAAM,WAAa,EAAI,EAAM,OAC7C,AAAI,EACF,EAAM,OAAO,QAAQ,GAErB,GAAM,QAAU,GAChB,EAAM,OAAO,KAAK,IAGhB,EAAM,cACR,GAAa,GAEf,GAAc,EAAQ,OAEnB,AAAK,IACV,GAAM,QAAU,IAGlB,MAAO,IAAa,GAYtB,YAAsB,EAAO,CAC3B,MAAO,CAAC,EAAM,OACN,GAAM,cACN,EAAM,OAAS,EAAM,eACrB,EAAM,SAAW,GAI3B,GAAS,UAAU,YAAc,SAAS,EAAK,CAC7C,AAAK,IACH,IAAgB,KAA2B,eAC7C,KAAK,eAAe,QAAU,GAAI,IAAc,GAChD,KAAK,eAAe,SAAW,GAIjC,GAAI,IAAU,QACd,YAA+B,EAAG,CAChC,GAAI,GAAK,GACP,EAAI,OACC,CAEL,IACA,OAAS,GAAI,EAAG,EAAI,GAAI,IAAM,EAAG,GAAK,GAAK,EAC3C,IAEF,MAAO,GAGT,YAAuB,EAAG,EAAO,CAC/B,MAAI,GAAM,SAAW,GAAK,EAAM,MACvB,EAEL,EAAM,WACD,IAAM,EAAI,EAAI,EAEnB,IAAM,MAAQ,MAAM,GAElB,EAAM,SAAW,EAAM,OAAO,OACzB,EAAM,OAAO,GAAG,OAEhB,EAAM,OAGb,GAAK,EACA,EAML,GAAI,EAAM,eACZ,GAAM,cAAgB,GAAsB,IAG1C,EAAI,EAAM,OACP,EAAM,MAIF,EAAM,OAHb,GAAM,aAAe,GACd,GAKJ,GAIT,GAAS,UAAU,KAAO,SAAS,EAAG,CACpC,GAAI,GAAQ,KAAK,eACjB,EAAM,WAAa,GACnB,GAAI,GAAQ,EACR,EAQJ,GANI,OAAO,IAAM,UAAY,EAAI,IAC/B,GAAM,gBAAkB,IAKtB,IAAM,GACN,EAAM,cACL,GAAM,QAAU,EAAM,eAAiB,EAAM,OAChD,UAAa,MACN,KAMT,GAHA,EAAI,GAAc,EAAG,GAGjB,IAAM,GAAK,EAAM,MACnB,SAAM,KAaF,EAAM,OAAS,GAAK,EAAM,SAC5B,GAAM,GAAS,EAAG,GAClB,EAAM,QAAU,EAAI,QAGlB,EAAM,SAAW,GACnB,GAAY,MAEP,EA0BT,GAAI,GAAS,EAAM,aAGnB,MAAI,GAAM,OAAS,GAAK,EAAM,eAC5B,GAAS,IAIP,GAAM,OAAS,EAAM,UACvB,GAAS,IAEP,GACF,GAAM,QAAU,GAChB,EAAM,KAAO,GAET,EAAM,SAAW,GACnB,GAAM,aAAe,IAEvB,KAAK,MAAM,EAAM,eACjB,EAAM,KAAO,IAMX,GAAU,CAAC,EAAM,SACnB,GAAI,GAAc,EAAO,IAE3B,AAAI,EAAI,EACN,EAAM,GAAS,EAAG,GAElB,EAAM,KAEJ,IAAQ,MACV,GAAM,aAAe,GACrB,EAAI,GAGN,EAAM,QAAU,EAIZ,EAAM,SAAW,GAAK,CAAC,EAAM,OAC/B,GAAM,aAAe,IAKnB,EAAM,OAAS,CAAC,EAAM,YAAc,EAAM,SAAW,GACvD,GAAY,MAEP,GAGT,YAAsB,EAAO,EAAO,CAClC,GAAI,GAAK,KACT,MAAI,CAAC,GAAO,SAAS,IACjB,AAAa,MAAO,IAApB,UACA,IAAU,MACV,IAAU,QACV,CAAC,EAAM,YACT,GAAK,GAAI,WAAU,oCAEd,EAIT,YAAoB,EAAQ,EAAO,CACjC,GAAI,EAAM,SAAW,CAAC,EAAM,MAAO,CACjC,GAAI,GAAQ,EAAM,QAAQ,MAC1B,AAAI,GAAS,EAAM,QACjB,GAAM,OAAO,KAAK,GAClB,EAAM,QAAU,EAAM,WAAa,EAAI,EAAM,QAGjD,EAAM,MAAQ,GAId,AAAI,EAAM,OAAS,EACjB,GAAa,GAEb,GAAY,GAMhB,YAAsB,EAAQ,CAC5B,GAAI,GAAQ,EAAO,eAEnB,AADA,EAAM,aAAe,GACjB,GAAM,iBAGV,GAAM,gBAAkB,GACxB,AAAI,EAAM,KACR,QAAQ,SAAS,UAAW,CAC1B,GAAc,KAGhB,GAAc,IAGlB,YAAuB,EAAQ,CAC7B,EAAO,KAAK,YAUd,YAAuB,EAAQ,EAAO,CACpC,AAAK,EAAM,aACT,GAAM,YAAc,GACpB,QAAQ,SAAS,UAAW,CAC1B,GAAe,EAAQ,MAK7B,YAAwB,EAAQ,EAAO,CAErC,OADI,GAAM,EAAM,OACT,CAAC,EAAM,SAAW,CAAC,EAAM,SAAW,CAAC,EAAM,OAC3C,EAAM,OAAS,EAAM,eAC1B,GAAO,KAAK,GACR,IAAQ,EAAM,SAIhB,EAAM,EAAM,OAEhB,EAAM,YAAc,GAOtB,GAAS,UAAU,MAAQ,SAAS,EAAG,CACrC,KAAK,KAAK,QAAS,GAAI,OAAM,qBAG/B,GAAS,UAAU,KAAO,SAAS,EAAM,EAAU,CACjD,GAAI,GAAM,KACN,EAAQ,KAAK,eAEjB,OAAQ,EAAM,gBACP,GACH,EAAM,MAAQ,EACd,UACG,GACH,EAAM,MAAQ,CAAC,EAAM,MAAO,GAC5B,cAEA,EAAM,MAAM,KAAK,GACjB,MAEJ,EAAM,YAAc,EAEpB,GAAI,GAAS,EAAC,GAAY,EAAS,MAAQ,KAC/B,IAAS,QAAQ,QACjB,IAAS,QAAQ,OAEzB,EAAQ,EAAQ,EAAQ,EAC5B,AAAI,EAAM,WACR,QAAQ,SAAS,GAEjB,EAAI,KAAK,MAAO,GAElB,EAAK,GAAG,SAAU,GAClB,WAAkB,EAAU,CAC1B,AAAI,IAAa,GACjB,IAGF,YAAiB,CACf,EAAK,MAOP,GAAI,GAAU,GAAY,GAC1B,EAAK,GAAG,QAAS,GAEjB,YAAmB,CAEjB,EAAK,eAAe,QAAS,GAC7B,EAAK,eAAe,SAAU,GAC9B,EAAK,eAAe,QAAS,GAC7B,EAAK,eAAe,QAAS,GAC7B,EAAK,eAAe,SAAU,GAC9B,EAAI,eAAe,MAAO,GAC1B,EAAI,eAAe,MAAO,GAOtB,EAAC,EAAK,gBAAkB,EAAK,eAAe,YAC9C,IAKJ,WAAiB,EAAI,CACnB,IACA,EAAK,eAAe,QAAS,GACzB,GAAG,cAAc,EAAM,WAAa,GACtC,EAAK,KAAK,QAAS,GAIvB,AAAI,CAAC,EAAK,SAAW,CAAC,EAAK,QAAQ,MACjC,EAAK,GAAG,QAAS,GACd,AAAI,GAAQ,EAAK,QAAQ,OAC5B,EAAK,QAAQ,MAAM,QAAQ,GAE3B,EAAK,QAAQ,MAAQ,CAAC,EAAS,EAAK,QAAQ,OAK9C,YAAmB,CACjB,EAAK,eAAe,SAAU,GAC9B,IAEF,EAAK,KAAK,QAAS,GACnB,YAAoB,CAClB,EAAK,eAAe,QAAS,GAC7B,IAEF,EAAK,KAAK,SAAU,GAEpB,YAAkB,CAChB,EAAI,OAAO,GAIb,SAAK,KAAK,OAAQ,GAGb,EAAM,SAKT,MAAK,GAAG,WAAY,IAEpB,EAAM,QAAU,GAChB,QAAQ,SAAS,UAAW,CAC1B,GAAK,MAIF,GAGT,YAAqB,EAAK,CACxB,MAAO,WAAW,CAChB,GAAI,GAAO,KACP,EAAQ,EAAI,eAChB,EAAM,aACF,EAAM,aAAe,GACvB,GAAK,IAIX,YAAc,EAAK,CACjB,GAAI,GAAQ,EAAI,eACZ,EACJ,EAAM,WAAa,EAEnB,WAAe,EAAM,EAAG,EAAM,CAC5B,GAAI,GAAU,EAAK,MAAM,GACzB,AAAI,AAAU,IAAV,IACF,EAAM,aAIV,KAAO,EAAM,YAAc,AAAU,GAAQ,EAAI,UAAtB,MAUzB,GARA,AAAI,EAAM,aAAe,EACvB,EAAM,EAAM,MAAO,EAAG,MAEtB,GAAQ,EAAM,MAAO,GAEvB,EAAI,KAAK,OAAQ,GAGb,EAAM,WAAa,EACrB,OAOJ,GAAI,EAAM,aAAe,EAAG,CAC1B,EAAM,QAAU,GAGZ,GAAG,cAAc,EAAK,QAAU,GAClC,GAAe,GACjB,OAKF,EAAM,OAAS,GAGjB,aAA0B,CACxB,AAAI,KAAK,eAAe,QACtB,MAAK,eAAe,OAAS,GAC7B,GAAK,OAKT,GAAS,UAAU,OAAS,SAAS,EAAM,CACzC,GAAI,GAAQ,KAAK,eAGjB,GAAI,EAAM,aAAe,EACvB,MAAO,MAGT,GAAI,EAAM,aAAe,EAEvB,MAAI,IAAQ,IAAS,EAAM,MAClB,KAEJ,IACH,GAAO,EAAM,OAGf,EAAM,MAAQ,KACd,EAAM,WAAa,EACnB,KAAK,eAAe,WAAY,IAChC,EAAM,QAAU,GACZ,GACF,EAAK,KAAK,SAAU,MACf,MAKT,GAAI,CAAC,EAAM,CAET,GAAI,GAAQ,EAAM,MACd,EAAM,EAAM,WAChB,EAAM,MAAQ,KACd,EAAM,WAAa,EACnB,KAAK,eAAe,WAAY,IAChC,EAAM,QAAU,GAEhB,OAAS,GAAI,EAAG,EAAI,EAAK,IACvB,EAAM,GAAG,KAAK,SAAU,MAC1B,MAAO,MAIT,GAAI,GAAI,GAAQ,EAAM,MAAO,GAC7B,MAAI,KAAM,GACD,KAET,GAAM,MAAM,OAAO,EAAG,GACtB,EAAM,YAAc,EAChB,EAAM,aAAe,GACvB,GAAM,MAAQ,EAAM,MAAM,IAE5B,EAAK,KAAK,SAAU,MAEb,OAKT,GAAS,UAAU,GAAK,SAAS,EAAI,EAAI,CACvC,GAAI,GAAM,GAAO,UAAU,GAAG,KAAK,KAAM,EAAI,GAK7C,GAHI,IAAO,QAAU,CAAC,KAAK,eAAe,SACxC,GAAe,MAEb,IAAO,YAAc,KAAK,SAAU,CACtC,GAAI,GAAQ,KAAK,eACjB,AAAK,EAAM,mBACT,GAAM,kBAAoB,GAC1B,EAAM,gBAAkB,GACxB,EAAM,aAAe,GACrB,AAAK,EAAM,QAEA,EAAM,QACf,GAAa,KAAM,GAFnB,KAAK,KAAK,IAOhB,MAAO,IAET,GAAS,UAAU,YAAc,GAAS,UAAU,GAIpD,GAAS,UAAU,OAAS,UAAW,CACrC,GAAe,MACf,KAAK,KAAK,GACV,KAAK,KAAK,WAGZ,GAAS,UAAU,MAAQ,UAAW,CACpC,GAAe,KAAM,IACrB,KAAK,KAAK,UAGZ,YAAwB,EAAQ,EAAa,CAC3C,GAAI,GAAQ,EAAO,eAEnB,GAAI,EAAM,QAER,KAAM,IAAI,OAAM,kCAGlB,GAAI,GAAS,GAAe,GACxB,EAAW,GAGf,EAAO,SAAW,GAClB,EAAO,KAAO,GAAO,UAAU,KAC/B,EAAO,GAAK,EAAO,YAAc,GAAO,UAAU,GAElD,EAAO,GAAG,WAAY,UAAW,CAC/B,EAAW,GAGX,OADI,GACG,CAAC,GAAW,AAAU,GAAI,EAAO,UAArB,MACjB,EAAO,KAAK,OAAQ,GAEtB,AAAI,IAAM,MACR,GAAW,GACX,EAAO,eAAe,aAAe,MAIzC,EAAO,MAAQ,UAAW,CACxB,EAAS,GACT,KAAK,KAAK,UAGZ,EAAO,OAAS,UAAW,CACzB,EAAS,GACT,AAAI,EACF,QAAQ,SAAS,UAAW,CAC1B,EAAO,KAAK,cAGd,KAAK,KAAK,GACZ,KAAK,KAAK,WAIZ,EAAO,KAAK,YAMd,GAAS,UAAU,KAAO,SAAS,EAAQ,CACzC,GAAI,GAAQ,KAAK,eACb,EAAS,GAET,EAAO,KACX,EAAO,GAAG,MAAO,UAAW,CAC1B,GAAI,EAAM,SAAW,CAAC,EAAM,MAAO,CACjC,GAAI,GAAQ,EAAM,QAAQ,MAC1B,AAAI,GAAS,EAAM,QACjB,EAAK,KAAK,GAGd,EAAK,KAAK,QAGZ,EAAO,GAAG,OAAQ,SAAS,EAAO,CAMhC,GALI,EAAM,SACR,GAAQ,EAAM,QAAQ,MAAM,IAI1B,IAAM,YAAe,GAAU,OAE1B,GAAC,EAAM,YAAe,EAAC,GAAS,CAAC,EAAM,SAGhD,IAAI,GAAM,EAAK,KAAK,GACpB,AAAK,GACH,GAAS,GACT,EAAO,YAMX,OAAS,KAAK,GACZ,AAAI,MAAO,GAAO,IAAO,YACrB,MAAO,MAAK,IAAO,aACrB,MAAK,GAAK,SAAS,EAAQ,CAAE,MAAO,WAAW,CAC7C,MAAO,GAAO,GAAQ,MAAM,EAAQ,aACnC,IAKP,GAAI,GAAS,CAAC,QAAS,QAAS,UAAW,QAAS,UACpD,UAAQ,EAAQ,SAAS,EAAI,CAC3B,EAAO,GAAG,EAAI,EAAK,KAAK,KAAK,EAAM,MAKrC,EAAK,MAAQ,SAAS,EAAG,CACvB,AAAI,GACF,GAAS,GACT,EAAO,WAIJ,GAMT,GAAS,UAAY,GAIrB,YAAkB,EAAG,EAAO,CAC1B,GAAI,GAAO,EAAM,OACb,EAAS,EAAM,OACf,EAAa,CAAC,CAAC,EAAM,QACrB,EAAa,CAAC,CAAC,EAAM,WACrB,EAGJ,GAAI,EAAK,SAAW,EAClB,MAAO,MAET,GAAI,IAAW,EACb,EAAM,aACC,EACP,EAAM,EAAK,gBACJ,CAAC,GAAK,GAAK,EAElB,AAAI,EACF,EAAM,EAAK,KAAK,IAEhB,EAAM,GAAO,OAAO,EAAM,GAC5B,EAAK,OAAS,UAGV,EAAI,EAAK,GAAG,OAAQ,CAGtB,GAAI,GAAM,EAAK,GACf,EAAM,EAAI,MAAM,EAAG,GACnB,EAAK,GAAK,EAAI,MAAM,WACX,IAAM,EAAK,GAAG,OAEvB,EAAM,EAAK,YACN,CAGL,AAAI,EACF,EAAM,GAEN,EAAM,GAAI,IAAO,GAGnB,OADI,GAAI,EACC,EAAI,EAAG,EAAI,EAAK,OAAQ,EAAI,GAAK,EAAI,EAAG,IAAK,CACpD,GAAI,GAAM,EAAK,GACX,EAAM,KAAK,IAAI,EAAI,EAAG,EAAI,QAE9B,AAAI,EACF,GAAO,EAAI,MAAM,EAAG,GAEpB,EAAI,KAAK,EAAK,EAAG,EAAG,GAEtB,AAAI,EAAM,EAAI,OACZ,EAAK,GAAK,EAAI,MAAM,GAEpB,EAAK,QAEP,GAAK,GAKX,MAAO,GAGT,YAAqB,EAAQ,CAC3B,GAAI,GAAQ,EAAO,eAInB,GAAI,EAAM,OAAS,EACjB,KAAM,IAAI,OAAM,0CAElB,AAAI,CAAC,EAAM,YAAc,EAAM,YAC7B,GAAM,MAAQ,GACd,QAAQ,SAAS,UAAW,CAE1B,AAAI,CAAC,EAAM,YAAc,EAAM,SAAW,GACxC,GAAM,WAAa,GACnB,EAAO,SAAW,GAClB,EAAO,KAAK,WAMpB,YAAkB,EAAI,EAAG,CACvB,OAAS,GAAI,EAAG,EAAI,EAAG,OAAQ,EAAI,EAAG,IACpC,EAAE,EAAG,GAAI,GAIb,YAAkB,EAAI,EAAG,CACvB,OAAS,GAAI,EAAG,EAAI,EAAG,OAAQ,EAAI,EAAG,IACpC,GAAI,EAAG,KAAO,EAAG,MAAO,GAE1B,MAAO,MCp9BT,mBA0BA,GAAO,QAAU,GAGjB,GAAI,IAAa,OAAO,MAAQ,SAAU,EAAK,CAC7C,GAAI,GAAO,GACX,OAAS,KAAO,GAAK,EAAK,KAAK,GAC/B,MAAO,IAML,GAAO,KACX,GAAK,SAAW,KAGhB,GAAI,IAAW,KACX,GAAW,KAEf,GAAK,SAAS,GAAQ,IAEtB,GAAQ,GAAW,GAAS,WAAY,SAAS,EAAQ,CACvD,AAAK,GAAO,UAAU,IACpB,IAAO,UAAU,GAAU,GAAS,UAAU,MAGlD,YAAgB,EAAS,CACvB,GAAI,CAAE,gBAAgB,KACpB,MAAO,IAAI,IAAO,GAEpB,GAAS,KAAK,KAAM,GACpB,GAAS,KAAK,KAAM,GAEhB,GAAW,EAAQ,WAAa,IAClC,MAAK,SAAW,IAEd,GAAW,EAAQ,WAAa,IAClC,MAAK,SAAW,IAElB,KAAK,cAAgB,GACjB,GAAW,EAAQ,gBAAkB,IACvC,MAAK,cAAgB,IAEvB,KAAK,KAAK,MAAO,IAInB,aAAiB,CAGf,AAAI,KAAK,eAAiB,KAAK,eAAe,OAK9C,QAAQ,SAAS,KAAK,IAAI,KAAK,OAGjC,YAAkB,EAAI,EAAG,CACvB,OAAS,GAAI,EAAG,EAAI,EAAG,OAAQ,EAAI,EAAG,IACpC,EAAE,EAAG,GAAI,MCtFb,mBAyBA,GAAO,QAAU,GAGjB,GAAI,IAAS,QAAQ,UAAU,OAG/B,GAAS,cAAgB,GAIzB,GAAI,IAAO,KACX,GAAK,SAAW,KAGhB,GAAI,IAAS,QAAQ,UAErB,GAAK,SAAS,GAAU,IAExB,YAAkB,EAAO,EAAU,EAAI,CACrC,KAAK,MAAQ,EACb,KAAK,SAAW,EAChB,KAAK,SAAW,EAGlB,YAAuB,EAAS,EAAQ,CACtC,EAAU,GAAW,GAKrB,GAAI,GAAM,EAAQ,cAClB,KAAK,cAAiB,GAAO,IAAQ,EAAK,EAAM,GAAK,KAIrD,KAAK,WAAa,CAAC,CAAC,EAAQ,WAG5B,KAAK,cAAgB,CAAC,CAAC,KAAK,cAE5B,KAAK,UAAY,GAEjB,KAAK,OAAS,GAEd,KAAK,MAAQ,GAEb,KAAK,SAAW,GAKhB,GAAI,GAAW,EAAQ,gBAAkB,GACzC,KAAK,cAAgB,CAAC,EAKtB,KAAK,gBAAkB,EAAQ,iBAAmB,OAKlD,KAAK,OAAS,EAGd,KAAK,QAAU,GAMf,KAAK,KAAO,GAKZ,KAAK,iBAAmB,GAGxB,KAAK,QAAU,SAAS,EAAI,CAC1B,GAAQ,EAAQ,IAIlB,KAAK,QAAU,KAGf,KAAK,SAAW,EAEhB,KAAK,OAAS,GAGd,KAAK,aAAe,GAGtB,YAAkB,EAAS,CACzB,GAAI,GAAS,KAIb,GAAI,CAAE,gBAAgB,MAAa,CAAE,gBAAgB,IACnD,MAAO,IAAI,IAAS,GAEtB,KAAK,eAAiB,GAAI,IAAc,EAAS,MAGjD,KAAK,SAAW,GAEhB,GAAO,KAAK,MAId,GAAS,UAAU,KAAO,UAAW,CACnC,KAAK,KAAK,QAAS,GAAI,OAAM,gCAI/B,YAAuB,EAAQ,EAAO,EAAI,CACxC,GAAI,GAAK,GAAI,OAAM,mBAEnB,EAAO,KAAK,QAAS,GACrB,QAAQ,SAAS,UAAW,CAC1B,EAAG,KASP,YAAoB,EAAQ,EAAO,EAAO,EAAI,CAC5C,GAAI,GAAQ,GACZ,GAAI,CAAC,GAAO,SAAS,IACjB,AAAa,MAAO,IAApB,UACA,IAAU,MACV,IAAU,QACV,CAAC,EAAM,WAAY,CACrB,GAAI,GAAK,GAAI,WAAU,mCACvB,EAAO,KAAK,QAAS,GACrB,QAAQ,SAAS,UAAW,CAC1B,EAAG,KAEL,EAAQ,GAEV,MAAO,GAGT,GAAS,UAAU,MAAQ,SAAS,EAAO,EAAU,EAAI,CACvD,GAAI,GAAQ,KAAK,eACb,EAAM,GAEV,MAAI,OAAO,IAAa,YACtB,GAAK,EACL,EAAW,MAGb,AAAI,GAAO,SAAS,GAClB,EAAW,SACH,GACR,GAAW,EAAM,iBAEf,MAAO,IAAO,YAChB,GAAK,UAAW,IAElB,AAAI,EAAM,MACR,GAAc,KAAM,EAAO,GACpB,GAAW,KAAM,EAAO,EAAO,IACtC,GAAM,GAAc,KAAM,EAAO,EAAO,EAAU,IAE7C,GAGT,YAAqB,EAAO,EAAO,EAAU,CAC3C,MAAI,CAAC,EAAM,YACP,EAAM,gBAAkB,IACxB,MAAO,IAAU,UACnB,GAAQ,GAAI,IAAO,EAAO,IAErB,EAMT,YAAuB,EAAQ,EAAO,EAAO,EAAU,EAAI,CACzD,EAAQ,GAAY,EAAO,EAAO,GAC9B,GAAO,SAAS,IAClB,GAAW,UACb,GAAI,GAAM,EAAM,WAAa,EAAI,EAAM,OAEvC,EAAM,QAAU,EAEhB,GAAI,GAAM,EAAM,OAAS,EAAM,cAE/B,MAAK,IACH,GAAM,UAAY,IAEpB,AAAI,EAAM,QACR,EAAM,OAAO,KAAK,GAAI,IAAS,EAAO,EAAU,IAEhD,GAAQ,EAAQ,EAAO,EAAK,EAAO,EAAU,GAExC,EAGT,YAAiB,EAAQ,EAAO,EAAK,EAAO,EAAU,EAAI,CACxD,EAAM,SAAW,EACjB,EAAM,QAAU,EAChB,EAAM,QAAU,GAChB,EAAM,KAAO,GACb,EAAO,OAAO,EAAO,EAAU,EAAM,SACrC,EAAM,KAAO,GAGf,YAAsB,EAAQ,EAAO,EAAM,EAAI,EAAI,CACjD,AAAI,EACF,QAAQ,SAAS,UAAW,CAC1B,EAAG,KAGL,EAAG,GAEL,EAAO,eAAe,aAAe,GACrC,EAAO,KAAK,QAAS,GAGvB,YAA4B,EAAO,CACjC,EAAM,QAAU,GAChB,EAAM,QAAU,KAChB,EAAM,QAAU,EAAM,SACtB,EAAM,SAAW,EAGnB,YAAiB,EAAQ,EAAI,CAC3B,GAAI,GAAQ,EAAO,eACf,EAAO,EAAM,KACb,EAAK,EAAM,QAIf,GAFA,GAAmB,GAEf,EACF,GAAa,EAAQ,EAAO,EAAM,EAAI,OACnC,CAEH,GAAI,GAAW,GAAW,EAAQ,GAElC,AAAI,CAAC,GAAY,CAAC,EAAM,kBAAoB,EAAM,OAAO,QACvD,GAAY,EAAQ,GAEtB,AAAI,EACF,QAAQ,SAAS,UAAW,CAC1B,GAAW,EAAQ,EAAO,EAAU,KAGtC,GAAW,EAAQ,EAAO,EAAU,IAK1C,YAAoB,EAAQ,EAAO,EAAU,EAAI,CAC/C,AAAK,GACH,GAAa,EAAQ,GACvB,IACI,GACF,GAAY,EAAQ,GAMxB,YAAsB,EAAQ,EAAO,CACnC,AAAI,EAAM,SAAW,GAAK,EAAM,WAC9B,GAAM,UAAY,GAClB,EAAO,KAAK,UAMhB,YAAqB,EAAQ,EAAO,CAClC,EAAM,iBAAmB,GAEzB,OAAS,GAAI,EAAG,EAAI,EAAM,OAAO,OAAQ,IAAK,CAC5C,GAAI,GAAQ,EAAM,OAAO,GACrB,EAAQ,EAAM,MACd,EAAW,EAAM,SACjB,EAAK,EAAM,SACX,EAAM,EAAM,WAAa,EAAI,EAAM,OAQvC,GANA,GAAQ,EAAQ,EAAO,EAAK,EAAO,EAAU,GAMzC,EAAM,QAAS,CACjB,IACA,OAIJ,EAAM,iBAAmB,GACzB,AAAI,EAAI,EAAM,OAAO,OACnB,EAAM,OAAS,EAAM,OAAO,MAAM,GAElC,EAAM,OAAO,OAAS,EAG1B,GAAS,UAAU,OAAS,SAAS,EAAO,EAAU,EAAI,CACxD,EAAG,GAAI,OAAM,qBAGf,GAAS,UAAU,IAAM,SAAS,EAAO,EAAU,EAAI,CACrD,GAAI,GAAQ,KAAK,eAEjB,AAAI,MAAO,IAAU,WACnB,GAAK,EACL,EAAQ,KACR,EAAW,MACF,MAAO,IAAa,YAC7B,GAAK,EACL,EAAW,MAGT,MAAO,IAAU,aAAe,IAAU,MAC5C,KAAK,MAAM,EAAO,GAGhB,CAAC,EAAM,QAAU,CAAC,EAAM,UAC1B,GAAY,KAAM,EAAO,IAI7B,YAAoB,EAAQ,EAAO,CACjC,MAAQ,GAAM,QACN,EAAM,SAAW,GACjB,CAAC,EAAM,UACP,CAAC,EAAM,QAGjB,YAAqB,EAAQ,EAAO,CAClC,GAAI,GAAO,GAAW,EAAQ,GAC9B,MAAI,IACF,GAAM,SAAW,GACjB,EAAO,KAAK,WAEP,EAGT,YAAqB,EAAQ,EAAO,EAAI,CACtC,EAAM,OAAS,GACf,GAAY,EAAQ,GAChB,GACF,CAAI,EAAM,SACR,QAAQ,SAAS,GAEjB,EAAO,KAAK,SAAU,IAE1B,EAAM,MAAQ,MChYhB,mBAgEA,GAAO,QAAU,GAEjB,GAAI,IAAS,KAGT,GAAO,KACX,GAAK,SAAW,KAGhB,GAAK,SAAS,GAAW,IAGzB,YAAwB,EAAS,EAAQ,CACvC,KAAK,eAAiB,SAAS,EAAI,EAAM,CACvC,MAAO,IAAe,EAAQ,EAAI,IAGpC,KAAK,cAAgB,GACrB,KAAK,aAAe,GACpB,KAAK,QAAU,KACf,KAAK,WAAa,KAGpB,YAAwB,EAAQ,EAAI,EAAM,CACxC,GAAI,GAAK,EAAO,gBAChB,EAAG,aAAe,GAElB,GAAI,GAAK,EAAG,QAEZ,GAAI,CAAC,EACH,MAAO,GAAO,KAAK,QAAS,GAAI,OAAM,kCAExC,EAAG,WAAa,KAChB,EAAG,QAAU,KAET,GAAS,MACX,EAAO,KAAK,GAEV,GACF,EAAG,GAEL,GAAI,GAAK,EAAO,eAChB,EAAG,QAAU,GACT,GAAG,cAAgB,EAAG,OAAS,EAAG,gBACpC,EAAO,MAAM,EAAG,eAKpB,YAAmB,EAAS,CAC1B,GAAI,CAAE,gBAAgB,KACpB,MAAO,IAAI,IAAU,GAEvB,GAAO,KAAK,KAAM,GAElB,GAAI,GAAK,KAAK,gBAAkB,GAAI,IAAe,EAAS,MAGxD,EAAS,KAGb,KAAK,eAAe,aAAe,GAKnC,KAAK,eAAe,KAAO,GAE3B,KAAK,KAAK,SAAU,UAAW,CAC7B,AAAI,AAAe,MAAO,MAAK,QAA3B,WACF,KAAK,OAAO,SAAS,EAAI,CACvB,GAAK,EAAQ,KAGf,GAAK,KAIX,GAAU,UAAU,KAAO,SAAS,EAAO,EAAU,CACnD,YAAK,gBAAgB,cAAgB,GAC9B,GAAO,UAAU,KAAK,KAAK,KAAM,EAAO,IAajD,GAAU,UAAU,WAAa,SAAS,EAAO,EAAU,EAAI,CAC7D,KAAM,IAAI,OAAM,oBAGlB,GAAU,UAAU,OAAS,SAAS,EAAO,EAAU,EAAI,CACzD,GAAI,GAAK,KAAK,gBAId,GAHA,EAAG,QAAU,EACb,EAAG,WAAa,EAChB,EAAG,cAAgB,EACf,CAAC,EAAG,aAAc,CACpB,GAAI,GAAK,KAAK,eACd,AAAI,GAAG,eACH,EAAG,cACH,EAAG,OAAS,EAAG,gBACjB,KAAK,MAAM,EAAG,iBAOpB,GAAU,UAAU,MAAQ,SAAS,EAAG,CACtC,GAAI,GAAK,KAAK,gBAEd,AAAI,EAAG,aAAe,MAAQ,EAAG,SAAW,CAAC,EAAG,aAC9C,GAAG,aAAe,GAClB,KAAK,WAAW,EAAG,WAAY,EAAG,cAAe,EAAG,iBAIpD,EAAG,cAAgB,IAKvB,YAAc,EAAQ,EAAI,CACxB,GAAI,EACF,MAAO,GAAO,KAAK,QAAS,GAI9B,GAAI,GAAK,EAAO,eACZ,EAAK,EAAO,eACZ,EAAK,EAAO,gBAEhB,GAAI,EAAG,OACL,KAAM,IAAI,OAAM,8CAElB,GAAI,EAAG,aACL,KAAM,IAAI,OAAM,kDAElB,MAAO,GAAO,KAAK,SChNrB,mBAyBA,GAAO,QAAU,GAEjB,GAAI,IAAY,KAGZ,GAAO,KACX,GAAK,SAAW,KAGhB,GAAK,SAAS,GAAa,IAE3B,YAAqB,EAAS,CAC5B,GAAI,CAAE,gBAAgB,KACpB,MAAO,IAAI,IAAY,GAEzB,GAAU,KAAK,KAAM,GAGvB,GAAY,UAAU,WAAa,SAAS,EAAO,EAAU,EAAI,CAC/D,EAAG,KAAM,MC5CX,sBAAI,IAAS,QAAQ,UACrB,GAAU,GAAO,QAAU,KAC3B,GAAQ,OAAS,GACjB,GAAQ,SAAW,GACnB,GAAQ,SAAW,KACnB,GAAQ,OAAS,KACjB,GAAQ,UAAY,KACpB,GAAQ,YAAc,KACtB,AAAI,CAAC,QAAQ,SAAW,QAAQ,IAAI,kBAAoB,WACtD,IAAO,QAAU,QAAQ,aCT3B,mBAUA,aAMA,GAAI,IAAW,KAA2B,SACtC,GAAO,QAAQ,QAEnB,GAAO,QAAU,GAEjB,YAAuB,EAAK,EAAS,CACnC,GAAI,CAAE,gBAAgB,KACpB,MAAO,IAAI,IAAc,EAAK,GAEhC,GAAS,KAAK,KAAM,GAChB,GAAQ,MACV,GAAM,OAAO,IAEf,KAAK,KAAO,EAGd,GAAK,SAAS,GAAe,IAE7B,GAAc,UAAU,MAAQ,SAAU,EAAG,CAC3C,GAAI,GAAM,KAAK,KACf,AAAI,MAAO,IAAQ,SACjB,KAAK,KAAK,GAAI,QAAO,IAChB,AAAI,OAAO,SAAS,GACzB,KAAK,KAAK,GAEV,KAAK,KAAK,GAAI,QAAO,KAAK,UAAU,KAEtC,KAAK,KAAK,SC3CZ,sBAAO,QAAU,MAAM,SAAW,SAAU,EAAK,CAC/C,MAAO,QAAO,UAAU,SAAS,KAAK,IAAQ,oBCDhD,mBAyBA,GAAO,QAAU,GAGjB,GAAI,IAAS,QAAQ,UAAU,OAG/B,GAAS,cAAgB,GAIzB,GAAI,IAAO,KACX,GAAK,SAAW,KAGhB,GAAI,IAAS,QAAQ,UAErB,GAAK,SAAS,GAAU,IAExB,YAAkB,EAAO,EAAU,EAAI,CACrC,KAAK,MAAQ,EACb,KAAK,SAAW,EAChB,KAAK,SAAW,EAGlB,YAAuB,EAAS,EAAQ,CACtC,GAAI,GAAS,KAEb,EAAU,GAAW,GAKrB,GAAI,GAAM,EAAQ,cACd,EAAa,EAAQ,WAAa,GAAK,GAAK,KAChD,KAAK,cAAiB,GAAO,IAAQ,EAAK,EAAM,EAIhD,KAAK,WAAa,CAAC,CAAC,EAAQ,WAExB,YAAkB,IACpB,MAAK,WAAa,KAAK,YAAc,CAAC,CAAC,EAAQ,oBAGjD,KAAK,cAAgB,CAAC,CAAC,KAAK,cAE5B,KAAK,UAAY,GAEjB,KAAK,OAAS,GAEd,KAAK,MAAQ,GAEb,KAAK,SAAW,GAKhB,GAAI,GAAW,EAAQ,gBAAkB,GACzC,KAAK,cAAgB,CAAC,EAKtB,KAAK,gBAAkB,EAAQ,iBAAmB,OAKlD,KAAK,OAAS,EAGd,KAAK,QAAU,GAGf,KAAK,OAAS,EAMd,KAAK,KAAO,GAKZ,KAAK,iBAAmB,GAGxB,KAAK,QAAU,SAAS,EAAI,CAC1B,GAAQ,EAAQ,IAIlB,KAAK,QAAU,KAGf,KAAK,SAAW,EAEhB,KAAK,OAAS,GAId,KAAK,UAAY,EAIjB,KAAK,YAAc,GAGnB,KAAK,aAAe,GAGtB,YAAkB,EAAS,CACzB,GAAI,GAAS,KAIb,GAAI,CAAE,gBAAgB,MAAa,CAAE,gBAAgB,IACnD,MAAO,IAAI,IAAS,GAEtB,KAAK,eAAiB,GAAI,IAAc,EAAS,MAGjD,KAAK,SAAW,GAEhB,GAAO,KAAK,MAId,GAAS,UAAU,KAAO,UAAW,CACnC,KAAK,KAAK,QAAS,GAAI,OAAM,gCAI/B,YAAuB,EAAQ,EAAO,EAAI,CACxC,GAAI,GAAK,GAAI,OAAM,mBAEnB,EAAO,KAAK,QAAS,GACrB,QAAQ,SAAS,UAAW,CAC1B,EAAG,KASP,YAAoB,EAAQ,EAAO,EAAO,EAAI,CAC5C,GAAI,GAAQ,GACZ,GAAI,CAAC,GAAK,SAAS,IACf,CAAC,GAAK,SAAS,IACf,CAAC,GAAK,kBAAkB,IACxB,CAAC,EAAM,WAAY,CACrB,GAAI,GAAK,GAAI,WAAU,mCACvB,EAAO,KAAK,QAAS,GACrB,QAAQ,SAAS,UAAW,CAC1B,EAAG,KAEL,EAAQ,GAEV,MAAO,GAGT,GAAS,UAAU,MAAQ,SAAS,EAAO,EAAU,EAAI,CACvD,GAAI,GAAQ,KAAK,eACb,EAAM,GAEV,MAAI,IAAK,WAAW,IAClB,GAAK,EACL,EAAW,MAGb,AAAI,GAAK,SAAS,GAChB,EAAW,SACH,GACR,GAAW,EAAM,iBAEd,GAAK,WAAW,IACnB,GAAK,UAAW,IAElB,AAAI,EAAM,MACR,GAAc,KAAM,EAAO,GACpB,GAAW,KAAM,EAAO,EAAO,IACtC,GAAM,YACN,EAAM,GAAc,KAAM,EAAO,EAAO,EAAU,IAG7C,GAGT,GAAS,UAAU,KAAO,UAAW,CACnC,GAAI,GAAQ,KAAK,eAEjB,EAAM,UAGR,GAAS,UAAU,OAAS,UAAW,CACrC,GAAI,GAAQ,KAAK,eAEjB,AAAI,EAAM,QACR,GAAM,SAEF,CAAC,EAAM,SACP,CAAC,EAAM,QACP,CAAC,EAAM,UACP,CAAC,EAAM,kBACP,EAAM,OAAO,QACf,GAAY,KAAM,KAIxB,YAAqB,EAAO,EAAO,EAAU,CAC3C,MAAI,CAAC,EAAM,YACP,EAAM,gBAAkB,IACxB,GAAK,SAAS,IAChB,GAAQ,GAAI,IAAO,EAAO,IAErB,EAMT,YAAuB,EAAQ,EAAO,EAAO,EAAU,EAAI,CACzD,EAAQ,GAAY,EAAO,EAAO,GAC9B,GAAK,SAAS,IAChB,GAAW,UACb,GAAI,GAAM,EAAM,WAAa,EAAI,EAAM,OAEvC,EAAM,QAAU,EAEhB,GAAI,GAAM,EAAM,OAAS,EAAM,cAE/B,MAAK,IACH,GAAM,UAAY,IAEpB,AAAI,EAAM,SAAW,EAAM,OACzB,EAAM,OAAO,KAAK,GAAI,IAAS,EAAO,EAAU,IAEhD,GAAQ,EAAQ,EAAO,GAAO,EAAK,EAAO,EAAU,GAE/C,EAGT,YAAiB,EAAQ,EAAO,EAAQ,EAAK,EAAO,EAAU,EAAI,CAChE,EAAM,SAAW,EACjB,EAAM,QAAU,EAChB,EAAM,QAAU,GAChB,EAAM,KAAO,GACb,AAAI,EACF,EAAO,QAAQ,EAAO,EAAM,SAE5B,EAAO,OAAO,EAAO,EAAU,EAAM,SACvC,EAAM,KAAO,GAGf,YAAsB,EAAQ,EAAO,EAAM,EAAI,EAAI,CACjD,AAAI,EACF,QAAQ,SAAS,UAAW,CAC1B,EAAM,YACN,EAAG,KAGL,GAAM,YACN,EAAG,IAGL,EAAO,eAAe,aAAe,GACrC,EAAO,KAAK,QAAS,GAGvB,YAA4B,EAAO,CACjC,EAAM,QAAU,GAChB,EAAM,QAAU,KAChB,EAAM,QAAU,EAAM,SACtB,EAAM,SAAW,EAGnB,YAAiB,EAAQ,EAAI,CAC3B,GAAI,GAAQ,EAAO,eACf,EAAO,EAAM,KACb,EAAK,EAAM,QAIf,GAFA,GAAmB,GAEf,EACF,GAAa,EAAQ,EAAO,EAAM,EAAI,OACnC,CAEH,GAAI,GAAW,GAAW,EAAQ,GAElC,AAAI,CAAC,GACD,CAAC,EAAM,QACP,CAAC,EAAM,kBACP,EAAM,OAAO,QACf,GAAY,EAAQ,GAGtB,AAAI,EACF,QAAQ,SAAS,UAAW,CAC1B,GAAW,EAAQ,EAAO,EAAU,KAGtC,GAAW,EAAQ,EAAO,EAAU,IAK1C,YAAoB,EAAQ,EAAO,EAAU,EAAI,CAC/C,AAAK,GACH,GAAa,EAAQ,GACvB,EAAM,YACN,IACA,GAAY,EAAQ,GAMtB,YAAsB,EAAQ,EAAO,CACnC,AAAI,EAAM,SAAW,GAAK,EAAM,WAC9B,GAAM,UAAY,GAClB,EAAO,KAAK,UAMhB,YAAqB,EAAQ,EAAO,CAGlC,GAFA,EAAM,iBAAmB,GAErB,EAAO,SAAW,EAAM,OAAO,OAAS,EAAG,CAG7C,OADI,GAAM,GACD,EAAI,EAAG,EAAI,EAAM,OAAO,OAAQ,IACvC,EAAI,KAAK,EAAM,OAAO,GAAG,UAI3B,EAAM,YACN,GAAQ,EAAQ,EAAO,GAAM,EAAM,OAAQ,EAAM,OAAQ,GAAI,SAAS,EAAK,CACzE,OAAS,GAAI,EAAG,EAAI,EAAI,OAAQ,IAC9B,EAAM,YACN,EAAI,GAAG,KAKX,EAAM,OAAS,OACV,CAEL,OAAS,GAAI,EAAG,EAAI,EAAM,OAAO,OAAQ,IAAK,CAC5C,GAAI,GAAQ,EAAM,OAAO,GACrB,EAAQ,EAAM,MACd,EAAW,EAAM,SACjB,EAAK,EAAM,SACX,EAAM,EAAM,WAAa,EAAI,EAAM,OAQvC,GANA,GAAQ,EAAQ,EAAO,GAAO,EAAK,EAAO,EAAU,GAMhD,EAAM,QAAS,CACjB,IACA,OAIJ,AAAI,EAAI,EAAM,OAAO,OACnB,EAAM,OAAS,EAAM,OAAO,MAAM,GAElC,EAAM,OAAO,OAAS,EAG1B,EAAM,iBAAmB,GAG3B,GAAS,UAAU,OAAS,SAAS,EAAO,EAAU,EAAI,CACxD,EAAG,GAAI,OAAM,qBAIf,GAAS,UAAU,QAAU,KAE7B,GAAS,UAAU,IAAM,SAAS,EAAO,EAAU,EAAI,CACrD,GAAI,GAAQ,KAAK,eAEjB,AAAI,GAAK,WAAW,GAClB,GAAK,EACL,EAAQ,KACR,EAAW,MACF,GAAK,WAAW,IACzB,GAAK,EACL,EAAW,MAGR,GAAK,kBAAkB,IAC1B,KAAK,MAAM,EAAO,GAGhB,EAAM,QACR,GAAM,OAAS,EACf,KAAK,UAIH,CAAC,EAAM,QAAU,CAAC,EAAM,UAC1B,GAAY,KAAM,EAAO,IAI7B,YAAoB,EAAQ,EAAO,CACjC,MAAQ,GAAM,QACN,EAAM,SAAW,GACjB,CAAC,EAAM,UACP,CAAC,EAAM,QAGjB,YAAmB,EAAQ,EAAO,CAChC,AAAK,EAAM,aACT,GAAM,YAAc,GACpB,EAAO,KAAK,cAIhB,YAAqB,EAAQ,EAAO,CAClC,GAAI,GAAO,GAAW,EAAQ,GAC9B,MAAI,IACF,CAAI,EAAM,YAAc,EACtB,IAAU,EAAQ,GAClB,EAAM,SAAW,GACjB,EAAO,KAAK,WAEZ,GAAU,EAAQ,IAEf,EAGT,YAAqB,EAAQ,EAAO,EAAI,CACtC,EAAM,OAAS,GACf,GAAY,EAAQ,GAChB,GACF,CAAI,EAAM,SACR,QAAQ,SAAS,GAEjB,EAAO,KAAK,SAAU,IAE1B,EAAM,MAAQ,MC3dhB,mBA0BA,GAAO,QAAU,GAGjB,GAAI,IAAa,OAAO,MAAQ,SAAU,EAAK,CAC7C,GAAI,GAAO,GACX,OAAS,KAAO,GAAK,EAAK,KAAK,GAC/B,MAAO,IAML,GAAO,KACX,GAAK,SAAW,KAGhB,GAAI,IAAW,KACX,GAAW,KAEf,GAAK,SAAS,GAAQ,IAEtB,GAAQ,GAAW,GAAS,WAAY,SAAS,EAAQ,CACvD,AAAK,GAAO,UAAU,IACpB,IAAO,UAAU,GAAU,GAAS,UAAU,MAGlD,YAAgB,EAAS,CACvB,GAAI,CAAE,gBAAgB,KACpB,MAAO,IAAI,IAAO,GAEpB,GAAS,KAAK,KAAM,GACpB,GAAS,KAAK,KAAM,GAEhB,GAAW,EAAQ,WAAa,IAClC,MAAK,SAAW,IAEd,GAAW,EAAQ,WAAa,IAClC,MAAK,SAAW,IAElB,KAAK,cAAgB,GACjB,GAAW,EAAQ,gBAAkB,IACvC,MAAK,cAAgB,IAEvB,KAAK,KAAK,MAAO,IAInB,aAAiB,CAGf,AAAI,KAAK,eAAiB,KAAK,eAAe,OAK9C,QAAQ,SAAS,KAAK,IAAI,KAAK,OAGjC,YAAkB,EAAI,EAAG,CACvB,OAAS,GAAI,EAAG,EAAI,EAAG,OAAQ,EAAI,EAAG,IACpC,EAAE,EAAG,GAAI,MCtFb,mBAqBA,GAAO,QAAU,GAGjB,GAAI,IAAU,KAKV,GAAS,QAAQ,UAAU,OAG/B,GAAS,cAAgB,GAEzB,GAAI,IAAK,QAAQ,UAAU,aAG3B,AAAK,GAAG,eAAe,IAAG,cAAgB,SAAS,EAAS,EAAM,CAChE,MAAO,GAAQ,UAAU,GAAM,SAIjC,GAAI,IAAS,QAAQ,UAGjB,GAAO,KACX,GAAK,SAAW,KAGhB,GAAI,IAIA,GAAQ,QAAQ,QACpB,AAAI,IAAS,GAAM,SACjB,GAAQ,GAAM,SAAS,UAEvB,GAAQ,UAAY,GAKtB,GAAK,SAAS,GAAU,IAExB,YAAuB,EAAS,EAAQ,CACtC,GAAI,GAAS,KAEb,EAAU,GAAW,GAIrB,GAAI,GAAM,EAAQ,cACd,EAAa,EAAQ,WAAa,GAAK,GAAK,KAChD,KAAK,cAAiB,GAAO,IAAQ,EAAK,EAAM,EAGhD,KAAK,cAAgB,CAAC,CAAC,KAAK,cAE5B,KAAK,OAAS,GACd,KAAK,OAAS,EACd,KAAK,MAAQ,KACb,KAAK,WAAa,EAClB,KAAK,QAAU,KACf,KAAK,MAAQ,GACb,KAAK,WAAa,GAClB,KAAK,QAAU,GAMf,KAAK,KAAO,GAIZ,KAAK,aAAe,GACpB,KAAK,gBAAkB,GACvB,KAAK,kBAAoB,GAKzB,KAAK,WAAa,CAAC,CAAC,EAAQ,WAExB,YAAkB,IACpB,MAAK,WAAa,KAAK,YAAc,CAAC,CAAC,EAAQ,oBAKjD,KAAK,gBAAkB,EAAQ,iBAAmB,OAIlD,KAAK,OAAS,GAGd,KAAK,WAAa,EAGlB,KAAK,YAAc,GAEnB,KAAK,QAAU,KACf,KAAK,SAAW,KACZ,EAAQ,UACL,KACH,IAAgB,KAA2B,eAC7C,KAAK,QAAU,GAAI,IAAc,EAAQ,UACzC,KAAK,SAAW,EAAQ,UAI5B,YAAkB,EAAS,CACzB,GAAI,GAAS,KAEb,GAAI,CAAE,gBAAgB,KACpB,MAAO,IAAI,IAAS,GAEtB,KAAK,eAAiB,GAAI,IAAc,EAAS,MAGjD,KAAK,SAAW,GAEhB,GAAO,KAAK,MAOd,GAAS,UAAU,KAAO,SAAS,EAAO,EAAU,CAClD,GAAI,GAAQ,KAAK,eAEjB,MAAI,IAAK,SAAS,IAAU,CAAC,EAAM,YACjC,GAAW,GAAY,EAAM,gBACzB,IAAa,EAAM,UACrB,GAAQ,GAAI,IAAO,EAAO,GAC1B,EAAW,KAIR,GAAiB,KAAM,EAAO,EAAO,EAAU,KAIxD,GAAS,UAAU,QAAU,SAAS,EAAO,CAC3C,GAAI,GAAQ,KAAK,eACjB,MAAO,IAAiB,KAAM,EAAO,EAAO,GAAI,KAGlD,YAA0B,EAAQ,EAAO,EAAO,EAAU,EAAY,CACpE,GAAI,GAAK,GAAa,EAAO,GAC7B,GAAI,EACF,EAAO,KAAK,QAAS,WACZ,GAAK,kBAAkB,GAChC,EAAM,QAAU,GACX,EAAM,OACT,GAAW,EAAQ,WACZ,EAAM,YAAc,GAAS,EAAM,OAAS,EACrD,GAAI,EAAM,OAAS,CAAC,EAAY,CAC9B,GAAI,GAAI,GAAI,OAAM,2BAClB,EAAO,KAAK,QAAS,WACZ,EAAM,YAAc,EAAY,CACzC,GAAI,GAAI,GAAI,OAAM,oCAClB,EAAO,KAAK,QAAS,OAErB,AAAI,GAAM,SAAW,CAAC,GAAc,CAAC,GACnC,GAAQ,EAAM,QAAQ,MAAM,IAEzB,GACH,GAAM,QAAU,IAGlB,AAAI,EAAM,SAAW,EAAM,SAAW,GAAK,CAAC,EAAM,KAChD,GAAO,KAAK,OAAQ,GACpB,EAAO,KAAK,IAGZ,GAAM,QAAU,EAAM,WAAa,EAAI,EAAM,OAC7C,AAAI,EACF,EAAM,OAAO,QAAQ,GAErB,EAAM,OAAO,KAAK,GAEhB,EAAM,cACR,GAAa,IAGjB,GAAc,EAAQ,OAEnB,AAAK,IACV,GAAM,QAAU,IAGlB,MAAO,IAAa,GAYtB,YAAsB,EAAO,CAC3B,MAAO,CAAC,EAAM,OACN,GAAM,cACN,EAAM,OAAS,EAAM,eACrB,EAAM,SAAW,GAI3B,GAAS,UAAU,YAAc,SAAS,EAAK,CAC7C,MAAK,KACH,IAAgB,KAA2B,eAC7C,KAAK,eAAe,QAAU,GAAI,IAAc,GAChD,KAAK,eAAe,SAAW,EACxB,MAIT,GAAI,IAAU,QACd,YAA+B,EAAG,CAChC,GAAI,GAAK,GACP,EAAI,OACC,CAEL,IACA,OAAS,GAAI,EAAG,EAAI,GAAI,IAAM,EAAG,GAAK,GAAK,EAC3C,IAEF,MAAO,GAGT,YAAuB,EAAG,EAAO,CAC/B,MAAI,GAAM,SAAW,GAAK,EAAM,MACvB,EAEL,EAAM,WACD,IAAM,EAAI,EAAI,EAEnB,MAAM,IAAM,GAAK,OAAO,GAEtB,EAAM,SAAW,EAAM,OAAO,OACzB,EAAM,OAAO,GAAG,OAEhB,EAAM,OAGb,GAAK,EACA,EAML,GAAI,EAAM,eACZ,GAAM,cAAgB,GAAsB,IAG1C,EAAI,EAAM,OACP,EAAM,MAIF,EAAM,OAHb,GAAM,aAAe,GACd,GAKJ,GAIT,GAAS,UAAU,KAAO,SAAS,EAAG,CACpC,GAAM,OAAQ,GACd,GAAI,GAAQ,KAAK,eACb,EAAQ,EAQZ,GANI,EAAC,GAAK,SAAS,IAAM,EAAI,IAC3B,GAAM,gBAAkB,IAKtB,IAAM,GACN,EAAM,cACL,GAAM,QAAU,EAAM,eAAiB,EAAM,OAChD,UAAM,qBAAsB,EAAM,OAAQ,EAAM,OAChD,AAAI,EAAM,SAAW,GAAK,EAAM,MAC9B,GAAY,MAEZ,GAAa,MACR,KAMT,GAHA,EAAI,GAAc,EAAG,GAGjB,IAAM,GAAK,EAAM,MACnB,MAAI,GAAM,SAAW,GACnB,GAAY,MACP,KA0BT,GAAI,GAAS,EAAM,aACnB,GAAM,gBAAiB,GAGnB,GAAM,SAAW,GAAK,EAAM,OAAS,EAAI,EAAM,gBACjD,GAAS,GACT,GAAM,6BAA8B,IAKlC,GAAM,OAAS,EAAM,UACvB,GAAS,GACT,GAAM,mBAAoB,IAGxB,GACF,IAAM,WACN,EAAM,QAAU,GAChB,EAAM,KAAO,GAET,EAAM,SAAW,GACnB,GAAM,aAAe,IAEvB,KAAK,MAAM,EAAM,eACjB,EAAM,KAAO,IAKX,GAAU,CAAC,EAAM,SACnB,GAAI,GAAc,EAAO,IAE3B,GAAI,GACJ,MAAI,GAAI,EACN,EAAM,GAAS,EAAG,GAElB,EAAM,KAEJ,GAAK,OAAO,IACd,GAAM,aAAe,GACrB,EAAI,GAGN,EAAM,QAAU,EAIZ,EAAM,SAAW,GAAK,CAAC,EAAM,OAC/B,GAAM,aAAe,IAGnB,IAAU,GAAK,EAAM,OAAS,EAAM,SAAW,GACjD,GAAY,MAET,GAAK,OAAO,IACf,KAAK,KAAK,OAAQ,GAEb,GAGT,YAAsB,EAAO,EAAO,CAClC,GAAI,GAAK,KACT,MAAI,CAAC,GAAK,SAAS,IACf,CAAC,GAAK,SAAS,IACf,CAAC,GAAK,kBAAkB,IACxB,CAAC,EAAM,YACT,GAAK,GAAI,WAAU,oCAEd,EAIT,YAAoB,EAAQ,EAAO,CACjC,GAAI,EAAM,SAAW,CAAC,EAAM,MAAO,CACjC,GAAI,GAAQ,EAAM,QAAQ,MAC1B,AAAI,GAAS,EAAM,QACjB,GAAM,OAAO,KAAK,GAClB,EAAM,QAAU,EAAM,WAAa,EAAI,EAAM,QAGjD,EAAM,MAAQ,GAGd,GAAa,GAMf,YAAsB,EAAQ,CAC5B,GAAI,GAAQ,EAAO,eACnB,EAAM,aAAe,GAChB,EAAM,iBACT,IAAM,eAAgB,EAAM,SAC5B,EAAM,gBAAkB,GACxB,AAAI,EAAM,KACR,QAAQ,SAAS,UAAW,CAC1B,GAAc,KAGhB,GAAc,IAIpB,YAAuB,EAAQ,CAC7B,GAAM,iBACN,EAAO,KAAK,YACZ,GAAK,GAUP,YAAuB,EAAQ,EAAO,CACpC,AAAK,EAAM,aACT,GAAM,YAAc,GACpB,QAAQ,SAAS,UAAW,CAC1B,GAAe,EAAQ,MAK7B,YAAwB,EAAQ,EAAO,CAErC,OADI,GAAM,EAAM,OACT,CAAC,EAAM,SAAW,CAAC,EAAM,SAAW,CAAC,EAAM,OAC3C,EAAM,OAAS,EAAM,eAC1B,IAAM,wBACN,EAAO,KAAK,GACR,IAAQ,EAAM,SAIhB,EAAM,EAAM,OAEhB,EAAM,YAAc,GAOtB,GAAS,UAAU,MAAQ,SAAS,EAAG,CACrC,KAAK,KAAK,QAAS,GAAI,OAAM,qBAG/B,GAAS,UAAU,KAAO,SAAS,EAAM,EAAU,CACjD,GAAI,GAAM,KACN,EAAQ,KAAK,eAEjB,OAAQ,EAAM,gBACP,GACH,EAAM,MAAQ,EACd,UACG,GACH,EAAM,MAAQ,CAAC,EAAM,MAAO,GAC5B,cAEA,EAAM,MAAM,KAAK,GACjB,MAEJ,EAAM,YAAc,EACpB,GAAM,wBAAyB,EAAM,WAAY,GAEjD,GAAI,GAAS,EAAC,GAAY,EAAS,MAAQ,KAC/B,IAAS,QAAQ,QACjB,IAAS,QAAQ,OAEzB,EAAQ,EAAQ,EAAQ,EAC5B,AAAI,EAAM,WACR,QAAQ,SAAS,GAEjB,EAAI,KAAK,MAAO,GAElB,EAAK,GAAG,SAAU,GAClB,WAAkB,EAAU,CAC1B,GAAM,YACF,IAAa,GACf,IAIJ,YAAiB,CACf,GAAM,SACN,EAAK,MAOP,GAAI,GAAU,GAAY,GAC1B,EAAK,GAAG,QAAS,GAEjB,YAAmB,CACjB,GAAM,WAEN,EAAK,eAAe,QAAS,GAC7B,EAAK,eAAe,SAAU,GAC9B,EAAK,eAAe,QAAS,GAC7B,EAAK,eAAe,QAAS,GAC7B,EAAK,eAAe,SAAU,GAC9B,EAAI,eAAe,MAAO,GAC1B,EAAI,eAAe,MAAO,GAC1B,EAAI,eAAe,OAAQ,GAOvB,EAAM,YACL,EAAC,EAAK,gBAAkB,EAAK,eAAe,YAC/C,IAGJ,EAAI,GAAG,OAAQ,GACf,WAAgB,EAAO,CACrB,GAAM,UACN,GAAI,GAAM,EAAK,MAAM,GACrB,AAAI,AAAU,IAAV,IACF,IAAM,8BACA,EAAI,eAAe,YACzB,EAAI,eAAe,aACnB,EAAI,SAMR,WAAiB,EAAI,CACnB,GAAM,UAAW,GACjB,IACA,EAAK,eAAe,QAAS,GACzB,GAAG,cAAc,EAAM,WAAa,GACtC,EAAK,KAAK,QAAS,GAIvB,AAAI,CAAC,EAAK,SAAW,CAAC,EAAK,QAAQ,MACjC,EAAK,GAAG,QAAS,GACd,AAAI,GAAQ,EAAK,QAAQ,OAC5B,EAAK,QAAQ,MAAM,QAAQ,GAE3B,EAAK,QAAQ,MAAQ,CAAC,EAAS,EAAK,QAAQ,OAK9C,YAAmB,CACjB,EAAK,eAAe,SAAU,GAC9B,IAEF,EAAK,KAAK,QAAS,GACnB,YAAoB,CAClB,GAAM,YACN,EAAK,eAAe,QAAS,GAC7B,IAEF,EAAK,KAAK,SAAU,GAEpB,YAAkB,CAChB,GAAM,UACN,EAAI,OAAO,GAIb,SAAK,KAAK,OAAQ,GAGb,EAAM,SACT,IAAM,eACN,EAAI,UAGC,GAGT,YAAqB,EAAK,CACxB,MAAO,WAAW,CAChB,GAAI,GAAQ,EAAI,eAChB,GAAM,cAAe,EAAM,YACvB,EAAM,YACR,EAAM,aACJ,EAAM,aAAe,GAAK,GAAG,cAAc,EAAK,SAClD,GAAM,QAAU,GAChB,GAAK,KAMX,GAAS,UAAU,OAAS,SAAS,EAAM,CACzC,GAAI,GAAQ,KAAK,eAGjB,GAAI,EAAM,aAAe,EACvB,MAAO,MAGT,GAAI,EAAM,aAAe,EAEvB,MAAI,IAAQ,IAAS,EAAM,MAClB,KAEJ,IACH,GAAO,EAAM,OAGf,EAAM,MAAQ,KACd,EAAM,WAAa,EACnB,EAAM,QAAU,GACZ,GACF,EAAK,KAAK,SAAU,MACf,MAKT,GAAI,CAAC,EAAM,CAET,GAAI,GAAQ,EAAM,MACd,EAAM,EAAM,WAChB,EAAM,MAAQ,KACd,EAAM,WAAa,EACnB,EAAM,QAAU,GAEhB,OAAS,GAAI,EAAG,EAAI,EAAK,IACvB,EAAM,GAAG,KAAK,SAAU,MAC1B,MAAO,MAIT,GAAI,GAAI,GAAQ,EAAM,MAAO,GAC7B,MAAI,KAAM,GACD,KAET,GAAM,MAAM,OAAO,EAAG,GACtB,EAAM,YAAc,EAChB,EAAM,aAAe,GACvB,GAAM,MAAQ,EAAM,MAAM,IAE5B,EAAK,KAAK,SAAU,MAEb,OAKT,GAAS,UAAU,GAAK,SAAS,EAAI,EAAI,CACvC,GAAI,GAAM,GAAO,UAAU,GAAG,KAAK,KAAM,EAAI,GAQ7C,GAJI,IAAO,QAAU,AAAU,KAAK,eAAe,UAA9B,IACnB,KAAK,SAGH,IAAO,YAAc,KAAK,SAAU,CACtC,GAAI,GAAQ,KAAK,eACjB,GAAI,CAAC,EAAM,kBAIT,GAHA,EAAM,kBAAoB,GAC1B,EAAM,gBAAkB,GACxB,EAAM,aAAe,GAChB,EAAM,QAMJ,AAAI,EAAM,QACf,GAAa,KAAM,OAPD,CAClB,GAAI,GAAO,KACX,QAAQ,SAAS,UAAW,CAC1B,GAAM,4BACN,EAAK,KAAK,MAQlB,MAAO,IAET,GAAS,UAAU,YAAc,GAAS,UAAU,GAIpD,GAAS,UAAU,OAAS,UAAW,CACrC,GAAI,GAAQ,KAAK,eACjB,MAAK,GAAM,SACT,IAAM,UACN,EAAM,QAAU,GACX,EAAM,SACT,IAAM,iBACN,KAAK,KAAK,IAEZ,GAAO,KAAM,IAER,MAGT,YAAgB,EAAQ,EAAO,CAC7B,AAAK,EAAM,iBACT,GAAM,gBAAkB,GACxB,QAAQ,SAAS,UAAW,CAC1B,GAAQ,EAAQ,MAKtB,YAAiB,EAAQ,EAAO,CAC9B,EAAM,gBAAkB,GACxB,EAAO,KAAK,UACZ,GAAK,GACD,EAAM,SAAW,CAAC,EAAM,SAC1B,EAAO,KAAK,GAGhB,GAAS,UAAU,MAAQ,UAAW,CACpC,UAAM,wBAAyB,KAAK,eAAe,SAC/C,AAAU,KAAK,eAAe,UAA9B,IACF,IAAM,SACN,KAAK,eAAe,QAAU,GAC9B,KAAK,KAAK,UAEL,MAGT,YAAc,EAAQ,CACpB,GAAI,GAAQ,EAAO,eAEnB,GADA,GAAM,OAAQ,EAAM,SAChB,EAAM,QACR,EACE,IAAI,GAAQ,EAAO,aACZ,AAAS,IAAT,MAAkB,EAAM,SAOrC,GAAS,UAAU,KAAO,SAAS,EAAQ,CACzC,GAAI,GAAQ,KAAK,eACb,EAAS,GAET,EAAO,KACX,EAAO,GAAG,MAAO,UAAW,CAE1B,GADA,GAAM,eACF,EAAM,SAAW,CAAC,EAAM,MAAO,CACjC,GAAI,GAAQ,EAAM,QAAQ,MAC1B,AAAI,GAAS,EAAM,QACjB,EAAK,KAAK,GAGd,EAAK,KAAK,QAGZ,EAAO,GAAG,OAAQ,SAAS,EAAO,CAIhC,GAHA,GAAM,gBACF,EAAM,SACR,GAAQ,EAAM,QAAQ,MAAM,IAC1B,GAAC,GAAS,CAAC,EAAM,YAAc,CAAC,EAAM,QAG1C,IAAI,GAAM,EAAK,KAAK,GACpB,AAAK,GACH,GAAS,GACT,EAAO,YAMX,OAAS,KAAK,GACZ,AAAI,GAAK,WAAW,EAAO,KAAO,GAAK,YAAY,KAAK,KACtD,MAAK,GAAK,SAAS,EAAQ,CAAE,MAAO,WAAW,CAC7C,MAAO,GAAO,GAAQ,MAAM,EAAQ,aACnC,IAKP,GAAI,GAAS,CAAC,QAAS,QAAS,UAAW,QAAS,UACpD,UAAQ,EAAQ,SAAS,EAAI,CAC3B,EAAO,GAAG,EAAI,EAAK,KAAK,KAAK,EAAM,MAKrC,EAAK,MAAQ,SAAS,EAAG,CACvB,GAAM,gBAAiB,GACnB,GACF,GAAS,GACT,EAAO,WAIJ,GAMT,GAAS,UAAY,GAIrB,YAAkB,EAAG,EAAO,CAC1B,GAAI,GAAO,EAAM,OACb,EAAS,EAAM,OACf,EAAa,CAAC,CAAC,EAAM,QACrB,EAAa,CAAC,CAAC,EAAM,WACrB,EAGJ,GAAI,EAAK,SAAW,EAClB,MAAO,MAET,GAAI,IAAW,EACb,EAAM,aACC,EACP,EAAM,EAAK,gBACJ,CAAC,GAAK,GAAK,EAElB,AAAI,EACF,EAAM,EAAK,KAAK,IAEhB,EAAM,GAAO,OAAO,EAAM,GAC5B,EAAK,OAAS,UAGV,EAAI,EAAK,GAAG,OAAQ,CAGtB,GAAI,GAAM,EAAK,GACf,EAAM,EAAI,MAAM,EAAG,GACnB,EAAK,GAAK,EAAI,MAAM,WACX,IAAM,EAAK,GAAG,OAEvB,EAAM,EAAK,YACN,CAGL,AAAI,EACF,EAAM,GAEN,EAAM,GAAI,IAAO,GAGnB,OADI,GAAI,EACC,EAAI,EAAG,EAAI,EAAK,OAAQ,EAAI,GAAK,EAAI,EAAG,IAAK,CACpD,GAAI,GAAM,EAAK,GACX,EAAM,KAAK,IAAI,EAAI,EAAG,EAAI,QAE9B,AAAI,EACF,GAAO,EAAI,MAAM,EAAG,GAEpB,EAAI,KAAK,EAAK,EAAG,EAAG,GAEtB,AAAI,EAAM,EAAI,OACZ,EAAK,GAAK,EAAI,MAAM,GAEpB,EAAK,QAEP,GAAK,GAKX,MAAO,GAGT,YAAqB,EAAQ,CAC3B,GAAI,GAAQ,EAAO,eAInB,GAAI,EAAM,OAAS,EACjB,KAAM,IAAI,OAAM,0CAElB,AAAK,EAAM,YACT,GAAM,MAAQ,GACd,QAAQ,SAAS,UAAW,CAE1B,AAAI,CAAC,EAAM,YAAc,EAAM,SAAW,GACxC,GAAM,WAAa,GACnB,EAAO,SAAW,GAClB,EAAO,KAAK,WAMpB,YAAkB,EAAI,EAAG,CACvB,OAAS,GAAI,EAAG,EAAI,EAAG,OAAQ,EAAI,EAAG,IACpC,EAAE,EAAG,GAAI,GAIb,YAAkB,EAAI,EAAG,CACvB,OAAS,GAAI,EAAG,EAAI,EAAG,OAAQ,EAAI,EAAG,IACpC,GAAI,EAAG,KAAO,EAAG,MAAO,GAE1B,MAAO,MCr7BT,mBAgEA,GAAO,QAAU,GAEjB,GAAI,IAAS,KAGT,GAAO,KACX,GAAK,SAAW,KAGhB,GAAK,SAAS,GAAW,IAGzB,YAAwB,EAAS,EAAQ,CACvC,KAAK,eAAiB,SAAS,EAAI,EAAM,CACvC,MAAO,IAAe,EAAQ,EAAI,IAGpC,KAAK,cAAgB,GACrB,KAAK,aAAe,GACpB,KAAK,QAAU,KACf,KAAK,WAAa,KAGpB,YAAwB,EAAQ,EAAI,EAAM,CACxC,GAAI,GAAK,EAAO,gBAChB,EAAG,aAAe,GAElB,GAAI,GAAK,EAAG,QAEZ,GAAI,CAAC,EACH,MAAO,GAAO,KAAK,QAAS,GAAI,OAAM,kCAExC,EAAG,WAAa,KAChB,EAAG,QAAU,KAER,GAAK,kBAAkB,IAC1B,EAAO,KAAK,GAEV,GACF,EAAG,GAEL,GAAI,GAAK,EAAO,eAChB,EAAG,QAAU,GACT,GAAG,cAAgB,EAAG,OAAS,EAAG,gBACpC,EAAO,MAAM,EAAG,eAKpB,YAAmB,EAAS,CAC1B,GAAI,CAAE,gBAAgB,KACpB,MAAO,IAAI,IAAU,GAEvB,GAAO,KAAK,KAAM,GAElB,KAAK,gBAAkB,GAAI,IAAe,EAAS,MAGnD,GAAI,GAAS,KAGb,KAAK,eAAe,aAAe,GAKnC,KAAK,eAAe,KAAO,GAE3B,KAAK,KAAK,YAAa,UAAW,CAChC,AAAI,GAAK,WAAW,KAAK,QACvB,KAAK,OAAO,SAAS,EAAI,CACvB,GAAK,EAAQ,KAGf,GAAK,KAIX,GAAU,UAAU,KAAO,SAAS,EAAO,EAAU,CACnD,YAAK,gBAAgB,cAAgB,GAC9B,GAAO,UAAU,KAAK,KAAK,KAAM,EAAO,IAajD,GAAU,UAAU,WAAa,SAAS,EAAO,EAAU,EAAI,CAC7D,KAAM,IAAI,OAAM,oBAGlB,GAAU,UAAU,OAAS,SAAS,EAAO,EAAU,EAAI,CACzD,GAAI,GAAK,KAAK,gBAId,GAHA,EAAG,QAAU,EACb,EAAG,WAAa,EAChB,EAAG,cAAgB,EACf,CAAC,EAAG,aAAc,CACpB,GAAI,GAAK,KAAK,eACd,AAAI,GAAG,eACH,EAAG,cACH,EAAG,OAAS,EAAG,gBACjB,KAAK,MAAM,EAAG,iBAOpB,GAAU,UAAU,MAAQ,SAAS,EAAG,CACtC,GAAI,GAAK,KAAK,gBAEd,AAAI,CAAC,GAAK,OAAO,EAAG,aAAe,EAAG,SAAW,CAAC,EAAG,aACnD,GAAG,aAAe,GAClB,KAAK,WAAW,EAAG,WAAY,EAAG,cAAe,EAAG,iBAIpD,EAAG,cAAgB,IAKvB,YAAc,EAAQ,EAAI,CACxB,GAAI,EACF,MAAO,GAAO,KAAK,QAAS,GAI9B,GAAI,GAAK,EAAO,eACZ,EAAK,EAAO,gBAEhB,GAAI,EAAG,OACL,KAAM,IAAI,OAAM,8CAElB,GAAI,EAAG,aACL,KAAM,IAAI,OAAM,kDAElB,MAAO,GAAO,KAAK,SC/MrB,mBAyBA,GAAO,QAAU,GAEjB,GAAI,IAAY,KAGZ,GAAO,KACX,GAAK,SAAW,KAGhB,GAAK,SAAS,GAAa,IAE3B,YAAqB,EAAS,CAC5B,GAAI,CAAE,gBAAgB,KACpB,MAAO,IAAI,IAAY,GAEzB,GAAU,KAAK,KAAM,GAGvB,GAAY,UAAU,WAAa,SAAS,EAAO,EAAU,EAAI,CAC/D,EAAG,KAAM,MC5CX,sBAAU,GAAO,QAAU,KAC3B,GAAQ,OAAS,QAAQ,UACzB,GAAQ,SAAW,GACnB,GAAQ,SAAW,KACnB,GAAQ,OAAS,KACjB,GAAQ,UAAY,KACpB,GAAQ,YAAc,KACtB,AAAI,CAAC,QAAQ,SAAW,QAAQ,IAAI,kBAAoB,WACtD,IAAO,QAAU,QAAQ,aCR3B,mBAuBA,GAAI,IAAU,IACV,GAAU,IACV,GAAY,GAAU,EAGtB,GAAe,EACf,GAAe,GACf,GAAW,GAAK,GAChB,GAAa,GACb,GAAS,GAAK,GACd,GAAY,GACZ,GAAQ,IAAW,GACnB,GAAa,IAAY,GAAa,GAGtC,GAAW,IAAW,EACtB,GAAkB,EAClB,GAAc,GAAK,GACnB,GAAc,GAAU,GACxB,GAAY,GAGZ,GAAiB,GACjB,GAAa,GAAK,GAIlB,GAAe,EACf,GAAW,GAAK,GAChB,GAAkB,GAAiB,GACnC,GAAgB,GAAK,GAIrB,GAAS,IACT,GAAS,IACT,GAAS,IACT,GAAS,IACT,GAAmB,EAAI,GAc3B,YAAkB,EAAQ,EAAW,CACnC,GAAI,GACA,EAGA,EACA,EACA,EAOJ,YAAgB,CACd,EAAU,GACV,EAAW,GAAI,YAAW,KAC1B,EAAO,GAAI,YAAW,IACtB,EAAO,GAAI,YAAW,IACtB,EAAW,GAAI,YAAW,IAAW,GAErC,GAAI,GAAG,EACP,IAAK,EAAI,EAAG,EAAI,GAAS,IACvB,EAAK,IAAM,GAAe,GAAM,GAChC,EAAQ,GAAK,GAAI,cAAa,CAAC,EAAG,EAAG,EAAG,IAExC,EAAK,GAAK,GAAU,GACpB,EAAK,GAAK,EASd,YAAqB,CACnB,OAAS,GAAI,EAAG,EAAI,GAAS,IAC3B,EAAQ,GAAG,KAAO,GAClB,EAAQ,GAAG,KAAO,GAClB,EAAQ,GAAG,KAAO,GAClB,EAAQ,GAAG,GAAK,EASpB,WAAqB,EAAO,EAAG,EAAG,EAAG,EAAG,CACtC,EAAQ,GAAG,IAAO,EAAS,GAAQ,GAAG,GAAK,GAAM,GACjD,EAAQ,GAAG,IAAO,EAAS,GAAQ,GAAG,GAAK,GAAM,GACjD,EAAQ,GAAG,IAAO,EAAS,GAAQ,GAAG,GAAK,GAAM,GAQnD,WAAoB,EAAQ,EAAG,EAAG,EAAG,EAAG,CAStC,OARI,GAAK,KAAK,IAAI,EAAI,GAClB,EAAK,KAAK,IAAI,EAAI,EAAQ,IAE1B,EAAI,EAAI,EACR,EAAI,EAAI,EACR,EAAI,EAEJ,EAAG,EACC,EAAI,GAAQ,EAAI,GACtB,EAAI,EAAS,KAET,EAAI,GACN,GAAI,EAAQ,KACZ,EAAE,IAAO,EAAK,GAAE,GAAK,GAAM,GAC3B,EAAE,IAAO,EAAK,GAAE,GAAK,GAAM,GAC3B,EAAE,IAAO,EAAK,GAAE,GAAK,GAAM,IAGzB,EAAI,GACN,GAAI,EAAQ,KACZ,EAAE,IAAO,EAAK,GAAE,GAAK,GAAM,GAC3B,EAAE,IAAO,EAAK,GAAE,GAAK,GAAM,GAC3B,EAAE,IAAO,EAAK,GAAE,GAAK,GAAM,IAUjC,WAAiB,EAAG,EAAG,EAAG,CAQxB,GAAI,GAAQ,CAAE,IAAK,IACf,EAAY,EACZ,EAAU,GACV,EAAc,EAEd,EAAG,EAAG,EAAM,EAAU,EAC1B,IAAK,EAAI,EAAG,EAAI,GAAS,IACvB,EAAI,EAAQ,GAEZ,EAAO,KAAK,IAAI,EAAE,GAAK,GAAK,KAAK,IAAI,EAAE,GAAK,GAAK,KAAK,IAAI,EAAE,GAAK,GAC7D,EAAO,GACT,GAAQ,EACR,EAAU,GAGZ,EAAW,EAAS,GAAK,IAAQ,GAAe,IAC5C,EAAW,GACb,GAAY,EACZ,EAAc,GAGhB,EAAY,EAAK,IAAM,GACvB,EAAK,IAAM,EACX,EAAK,IAAO,GAAY,GAG1B,SAAK,IAAY,GACjB,EAAK,IAAY,GAEV,EAQT,YAAoB,CAClB,GAAI,GAAG,EAAG,EAAG,EAAG,EAAU,EAAU,EAAc,EAAG,EAAW,EAChE,IAAK,EAAI,EAAG,EAAI,GAAS,IAAK,CAK5B,IAJA,EAAI,EAAQ,GACZ,EAAW,EACX,EAAW,EAAE,GAER,EAAI,EAAI,EAAG,EAAI,GAAS,IAC3B,EAAI,EAAQ,GACR,EAAE,GAAK,GACT,GAAW,EACX,EAAW,EAAE,IAajB,GAVA,EAAI,EAAQ,GAER,GAAK,GACP,GAAI,EAAE,GAAM,EAAE,GAAK,EAAE,GAAM,EAAE,GAAK,EAClC,EAAI,EAAE,GAAM,EAAE,GAAK,EAAE,GAAM,EAAE,GAAK,EAClC,EAAI,EAAE,GAAM,EAAE,GAAK,EAAE,GAAM,EAAE,GAAK,EAClC,EAAI,EAAE,GAAM,EAAE,GAAK,EAAE,GAAM,EAAE,GAAK,GAIhC,GAAY,EAAa,CAE3B,IADA,EAAS,GAAgB,EAAW,GAAM,EACrC,EAAI,EAAc,EAAG,EAAI,EAAU,IACtC,EAAS,GAAK,EAChB,EAAc,EACd,EAAW,GAIf,IADA,EAAS,GAAgB,EAAW,IAAc,EAC7C,EAAI,EAAc,EAAG,EAAI,IAAK,IACjC,EAAS,GAAK,GAQlB,WAAmB,EAAG,EAAG,EAAG,CAS1B,OARI,GAAG,EAAG,EAEN,EAAQ,IACR,EAAO,GAEP,EAAI,EAAS,GACb,EAAI,EAAI,EAEJ,EAAI,IAAa,GAAK,GAC5B,AAAI,EAAI,IACN,GAAI,EAAQ,GACZ,EAAO,EAAE,GAAK,EACd,AAAI,GAAQ,EAAO,EAAI,GAErB,KACI,EAAO,GAAG,GAAO,CAAC,GACtB,EAAI,EAAE,GAAK,EAAO,EAAI,GAAG,GAAI,CAAC,GAC9B,GAAQ,EACJ,EAAO,GACT,GAAI,EAAE,GAAK,EAAO,EAAI,GAAG,GAAI,CAAC,GAC9B,GAAQ,EACJ,EAAO,GACT,GAAQ,EACR,EAAO,EAAE,OAKb,GAAK,GACP,GAAI,EAAQ,GACZ,EAAO,EAAI,EAAE,GACb,AAAI,GAAQ,EAAO,EAAI,GAErB,KACI,EAAO,GAAG,GAAO,CAAC,GACtB,EAAI,EAAE,GAAK,EAAO,EAAI,GAAG,GAAI,CAAC,GAC9B,GAAQ,EACJ,EAAO,GACT,GAAI,EAAE,GAAK,EAAO,EAAI,GAAG,GAAI,CAAC,GAC9B,GAAQ,EACJ,EAAO,GACT,GAAQ,EACR,EAAO,EAAE,OAOnB,MAAO,GAQT,YAAiB,CACf,GAAI,GAEA,EAAc,EAAO,OACrB,EAAW,GAAO,GAAY,GAAK,EACnC,EAAe,EAAe,GAAI,GAClC,EAAQ,CAAC,CAAE,GAAe,IAC1B,EAAQ,GACR,EAAS,GAET,EAAM,GAAU,GAGpB,IADI,GAAO,GAAG,GAAM,GACf,EAAI,EAAG,EAAI,EAAK,IACnB,EAAS,GAAK,EAAW,IAAM,EAAM,EAAI,GAAK,GAAY,GAAM,IAElE,GAAI,GACJ,AAAI,EAAc,GAChB,GAAY,EACZ,EAAO,GACF,AAAK,EAAc,IAAY,EACpC,EAAO,EAAI,GACN,AAAK,EAAc,IAAY,EACpC,EAAO,EAAI,GACN,AAAK,EAAc,IAAY,EACpC,EAAO,EAAI,GAEX,EAAO,EAAI,GAGb,GAAI,GAAG,EAAG,EAAG,EACT,EAAM,EAGV,IADA,EAAI,EACG,EAAI,GAgBT,GAfA,EAAK,GAAO,GAAO,MAAS,GAC5B,EAAK,GAAO,EAAM,GAAK,MAAS,GAChC,EAAK,GAAO,EAAM,GAAK,MAAS,GAEhC,EAAI,EAAQ,EAAG,EAAG,GAElB,EAAY,EAAO,EAAG,EAAG,EAAG,GACxB,IAAQ,GAAG,EAAW,EAAK,EAAG,EAAG,EAAG,GAExC,GAAO,EACH,GAAO,GAAa,IAAO,GAE/B,IAEI,IAAU,GAAG,GAAQ,GACrB,EAAI,GAAU,EAMhB,IALA,GAAS,EAAQ,EACjB,GAAU,EAAS,GACnB,EAAM,GAAU,GAEZ,GAAO,GAAG,GAAM,GACf,EAAI,EAAG,EAAI,EAAK,IACnB,EAAS,GAAK,EAAW,IAAM,EAAM,EAAI,GAAK,GAAY,GAAM,IAaxE,YAAyB,CACvB,IACA,IACA,IACA,IAEF,KAAK,cAAgB,EAarB,YAAuB,CAIrB,OAHI,GAAM,GACN,EAAQ,GAEH,EAAI,EAAG,EAAI,GAAS,IAC3B,EAAM,EAAQ,GAAG,IAAM,EAGzB,OADI,GAAI,EACC,EAAI,EAAG,EAAI,GAAS,IAAK,CAChC,GAAI,GAAI,EAAM,GACd,EAAI,KAAQ,EAAQ,GAAG,GACvB,EAAI,KAAQ,EAAQ,GAAG,GACvB,EAAI,KAAQ,EAAQ,GAAG,GAEzB,MAAO,GAET,KAAK,YAAc,EAQnB,KAAK,UAAY,EAGnB,GAAO,QAAU,KC9ajB,mBAsBA,GAAI,IAAM,GACN,GAAO,GACP,GAAQ,KACR,GAAQ,CAAC,EAAQ,EAAQ,EAAQ,EAAQ,GAAQ,GACxC,GAAQ,IAAQ,IAAQ,IAAQ,KAAQ,KACxC,KAAQ,KAAQ,MAAQ,MAAQ,OAE7C,YAAoB,EAAO,EAAQ,EAAQ,EAAY,CACrD,GAAI,GAAe,KAAK,IAAI,EAAG,GAE3B,EAAQ,GAAI,YAAW,KACvB,EAAO,GAAI,YAAW,IACtB,EAAU,GAAI,YAAW,IAEzB,EAAW,EAAW,EACtB,EACA,EAAW,EACX,EACA,EACA,EACA,EAIA,EAAY,GAaZ,EAAa,EAAW,EAI5B,WAAkB,EAAG,EAAM,CACzB,EAAM,KAAa,EACf,GAAW,KAAK,EAAW,GAKjC,WAAkB,EAAM,CACtB,EAAQ,IACR,EAAW,EAAY,EACvB,EAAY,GACZ,EAAO,EAAW,GAIpB,WAAiB,EAAO,CACtB,OAAS,GAAI,EAAG,EAAI,EAAO,EAAE,EAAG,EAAK,GAAK,GAG5C,WAAkB,EAAW,EAAM,CACjC,GAAI,GAAO,GAAG,GAAG,GAAK,GAAM,GAAW,GAmBvC,IAhBA,EAAc,EAGd,EAAY,GACZ,EAAS,EACT,EAAU,EAAQ,GAElB,EAAY,GAAM,EAAY,EAC9B,EAAU,EAAY,EACtB,EAAW,EAAY,EAEvB,EAAU,EAEV,GAAM,IAEN,GAAS,EACJ,EAAQ,GAAO,EAAQ,MAAO,GAAS,EAAG,EAAE,GACjD,GAAS,EAAI,GACb,GAAY,GACZ,EAAQ,IAER,EAAO,EAAW,GAElB,EAAY,KAAQ,IAAI,MAAgB,IAAK,CAG3C,GAFA,EAAS,KAAK,IAAQ,GACtB,GAAK,IAAK,GAAU,GAChB,EAAK,MAAO,EAAO,CACrB,GAAM,EAAQ,IACd,iBACS,EAAK,KAAM,EAAG,CACvB,GAAO,GAAY,GACf,KAAM,GAAG,IAAO,GACpB,EAEE,IADK,KAAK,IAAQ,GAAG,KAAK,IACtB,EAAK,MAAO,EAAO,CACrB,GAAM,EAAQ,IACd,iBAEK,EAAK,KAAM,GAEtB,EAAO,GAAK,GACZ,GAAM,GACN,AAAI,EAAW,GAAK,GAClB,GAAQ,IAAK,IACb,EAAK,IAAK,GAEV,EAAS,GAKb,EAAO,GAAK,GACZ,EAAO,EAAS,GAGlB,WAAgB,EAAM,CACpB,EAAK,UAAU,GACf,EAAY,EAAQ,EACpB,EAAW,EACX,EAAS,EAAe,EAAG,GAC3B,EAAK,UAAU,GAIjB,WAAoB,EAAM,CACxB,AAAI,EAAU,GACZ,GAAK,UAAU,GACf,EAAK,WAAW,EAAO,EAAG,GAC1B,EAAU,GAId,WAAiB,EAAQ,CACvB,MAAQ,IAAK,GAAU,EAIzB,YAAqB,CACnB,GAAI,IAAc,EAAG,MAAO,IAC5B,EAAE,EACF,GAAI,GAAM,EAAO,KACjB,MAAO,GAAM,IAGf,WAAgB,EAAM,EAAM,CAQ1B,IAPA,GAAa,GAAM,GAEnB,AAAI,EAAW,EAAG,GAAc,GAAQ,EACnC,EAAY,EAEjB,GAAY,EAEL,GAAY,GACjB,EAAU,EAAY,IAAO,GAC7B,IAAc,EACd,GAAY,EAgBd,GAXI,GAAW,GAAW,IACxB,CAAI,EACF,GAAU,EAAQ,EAAS,GAC3B,EAAY,IAEZ,GAAE,EACF,AAAI,GAAU,GAAM,EAAU,GAAK,GAC9B,EAAU,EAAQ,KAIvB,GAAQ,EAAS,CAEnB,KAAO,EAAW,GAChB,EAAU,EAAY,IAAO,GAC7B,IAAc,EACd,GAAY,EAEd,EAAW,IAIf,KAAK,OAAS,EAGhB,GAAO,QAAU,KCnNjB,mBAUA,GAAI,IAAS,QAAQ,UACjB,GAAe,QAAQ,UAAU,aACjC,GAAiB,KACjB,GAAO,QAAQ,QAEf,GAAW,KACX,GAAa,KAGjB,YAAuB,EAAS,CAE9B,GAAe,KAAK,KAAM,GAG1B,KAAK,WAAa,GAClB,KAAK,YAEP,GAAK,SAAS,GAAe,IAE7B,GAAc,UAAU,MAAQ,UAAY,CAG1C,KAAK,WAAa,IAGpB,GAAc,UAAU,UAAY,UAAY,CAC9C,KAAK,KAAO,IAGd,GAAc,UAAU,UAAY,UAAY,CAE9C,GAAI,CAAC,KAAK,WAAY,CACpB,GAAI,GAAM,GAAI,OAAM,mGACpB,MAAO,MAAK,KAAK,QAAS,GAI5B,GAAI,GAAO,GAAI,QAAO,KAAK,MAC3B,KAAK,YACL,KAAK,WAAa,KAAK,KAAK,IAG9B,GAAc,UAAU,UAAY,SAAU,EAAK,CACjD,KAAK,KAAK,KAAK,IAGjB,GAAc,UAAU,cAAgB,SAAU,EAAQ,CACxD,OAAS,GAAI,EAAO,OAAQ,EAAI,EAAG,EAAI,EAAG,IACxC,KAAK,UAAU,EAAO,WAAW,KAIrC,GAAc,UAAU,WAAa,SAAU,EAAO,EAAQ,EAAQ,CACpE,OAAS,GAAI,GAAU,EAAM,OAAQ,EAAI,GAAU,EAAG,EAAI,EAAG,IAC3D,KAAK,UAAU,EAAM,KAIzB,YAAoB,EAAO,EAAQ,EAAS,CAE1C,EAAU,GAAW,GAIrB,GAAI,GAAM,EAAQ,cAClB,GAAc,KAAK,KAAM,CAEvB,cAAgB,GAAO,IAAQ,EAAK,EAAM,GAAK,OAIjD,KAAK,MAAQ,CAAC,CAAC,EACf,KAAK,OAAS,CAAC,CAAC,EAGhB,KAAK,YAAc,KAGnB,KAAK,WAAa,EAGlB,KAAK,OAAS,GAGd,KAAK,MAAQ,EAEb,KAAK,OAAS,KACd,KAAK,cAAgB,KACrB,KAAK,WAAa,KAClB,KAAK,SAAW,KAChB,KAAK,UAAY,GACjB,KAAK,QAAU,EACf,KAAK,QAAU,GACf,KAAK,WAAa,GAClB,KAAK,OAAS,GAGd,GAAI,GAAO,KACX,YAAqB,CACnB,EAAK,YAEP,KAAK,GAAG,mBAAoB,GAC5B,KAAK,GAAG,aAAc,GACtB,KAAK,GAAG,cAAe,UAAsB,CAE3C,IAGA,EAAK,KAAK,QAGd,GAAK,SAAS,GAAY,IAM1B,GAAW,UAAU,SAAW,SAAS,EAAc,CACrD,KAAK,MAAQ,KAAK,MAAM,EAAe,KAMzC,GAAW,UAAU,aAAe,SAAS,EAAK,CAChD,KAAK,MAAQ,KAAK,MAAM,IAAM,IAShC,GAAW,UAAU,WAAa,SAAS,EAAc,CACvD,AAAI,GAAgB,GAAG,MAAK,QAAU,IAcxC,GAAW,UAAU,UAAY,SAAS,EAAQ,CAChD,KAAK,OAAS,GAUhB,GAAW,UAAU,eAAiB,SAAS,EAAO,CACpD,KAAK,YAAc,GAIrB,GAAW,UAAU,aAAe,SAAU,EAAW,CAEvD,KAAK,eAAe,KAAK,mBAAmB,IAC5C,KAAK,iBAGP,GAAW,UAAU,eAAiB,UAAY,CAChD,AAAI,KAAK,YACP,MAAK,WACL,KAAK,eACD,KAAK,QAAU,GAEjB,KAAK,oBAIT,KAAK,sBACL,KAAK,iBACA,KAAK,YAAY,KAAK,eAG3B,KAAK,WAAa,IAGpB,GAAW,UAAU,YAAc,UAAY,CAC7C,KAAK,eAQP,GAAW,UAAU,SAAW,SAAS,EAAW,CAClD,KAAK,KAAK,eAEV,KAAK,aAAa,GAClB,KAAK,iBACL,KAAK,cAEL,KAAK,KAAK,eAOZ,GAAW,UAAU,OAAS,UAAW,CACvC,KAAK,KAAK,gBACV,KAAK,UAAU,IACf,KAAK,KAAK,gBAUZ,GAAW,UAAU,WAAa,SAAS,EAAS,CAClD,AAAI,EAAU,GAAG,GAAU,GAC3B,KAAK,OAAS,GAMhB,GAAW,UAAU,YAAc,UAAW,CAC5C,KAAK,KAAK,qBACV,KAAK,cAAc,UACnB,KAAK,KAAK,qBAMZ,GAAW,UAAU,cAAgB,UAAW,CAC9C,GAAI,GAAM,KAAK,OAAO,OAClB,EAAO,EAAM,EAGjB,KAAK,cAAgB,GAAI,YAAW,GAEpC,GAAI,GAAO,GAAI,IAAS,KAAK,OAAQ,KAAK,QAC1C,EAAK,gBACL,KAAK,SAAW,EAAK,cAIrB,OADI,GAAI,EACC,EAAI,EAAG,EAAI,EAAM,IAAK,CAC7B,GAAI,GAAQ,EAAK,UACf,KAAK,OAAO,KAAO,IACnB,KAAK,OAAO,KAAO,IACnB,KAAK,OAAO,KAAO,KAErB,KAAK,UAAU,GAAS,GACxB,KAAK,cAAc,GAAK,EAG1B,KAAK,OAAS,KACd,KAAK,WAAa,EAClB,KAAK,QAAU,EAGX,KAAK,cAAgB,MACvB,MAAK,WAAa,KAAK,YAAY,KAAK,eAO5C,GAAW,UAAU,YAAc,SAAS,EAAG,CAC7C,GAAI,KAAK,WAAa,KAAM,MAAO,GASnC,OAPI,GAAK,GAAI,WAAa,GACtB,EAAK,GAAI,QAAa,EACtB,EAAK,EAAI,IACT,EAAS,EACT,EAAO,IAAM,IAAM,IACnB,EAAM,KAAK,SAAS,OAEf,EAAI,EAAG,EAAI,GAAM,CACxB,GAAI,GAAK,EAAK,MAAK,SAAS,KAAO,KAC/B,EAAK,EAAK,MAAK,SAAS,KAAO,KAC/B,EAAK,EAAK,MAAK,SAAS,GAAK,KAC7B,EAAI,EAAK,EAAK,EAAK,EAAK,EAAK,EAC7B,EAAQ,EAAI,EAChB,AAAI,KAAK,UAAU,IAAW,EAAI,GAChC,GAAO,EACP,EAAS,GAEX,IAGF,MAAO,IAOT,GAAW,UAAU,mBAAqB,SAAU,EAAM,CAOxD,OANI,GAAI,KAAK,MACT,EAAI,KAAK,OACT,EAAS,GAAI,YAAW,EAAI,EAAI,GAEhC,EAAQ,EAEH,EAAI,EAAG,EAAI,EAAG,IACrB,OAAS,GAAI,EAAG,EAAI,EAAG,IAAK,CAC1B,GAAI,GAAK,EAAI,EAAI,EAAK,EAAI,EAC1B,EAAO,KAAW,EAAK,GACvB,EAAO,KAAW,EAAK,EAAE,GACzB,EAAO,KAAW,EAAK,EAAE,GAI7B,MAAO,IAGT,GAAW,UAAU,eAAiB,SAAS,EAAQ,CACrD,KAAK,OAAS,GAMhB,GAAW,UAAU,oBAAsB,UAAW,CACpD,KAAK,UAAU,IACf,KAAK,UAAU,KACf,KAAK,UAAU,GAEf,GAAI,GAAQ,EACZ,AAAI,KAAK,cAAgB,KACvB,GAAS,EACT,EAAO,GAEP,GAAS,EACT,EAAO,GAGL,KAAK,SAAW,GAClB,GAAO,QAAU,GAEnB,IAAS,EAGT,KAAK,UACH,EACA,EACA,EACA,GAGF,KAAK,WAAW,KAAK,OACrB,KAAK,UAAU,KAAK,YACpB,KAAK,UAAU,IAMjB,GAAW,UAAU,eAAiB,UAAW,CAC/C,KAAK,UAAU,IACf,KAAK,WAAW,GAChB,KAAK,WAAW,GAChB,KAAK,WAAW,KAAK,OACrB,KAAK,WAAW,KAAK,QAGrB,AAAI,KAAK,WAEP,KAAK,UAAU,GAGf,KAAK,UACH,IACA,EACA,EACA,EACA,KAAK,UAQX,GAAW,UAAU,SAAW,UAAW,CAEzC,KAAK,WAAW,KAAK,OACrB,KAAK,WAAW,KAAK,QAGrB,KAAK,UACH,IACA,IACA,EACA,KAAK,SAGP,KAAK,UAAU,GACf,KAAK,UAAU,IAMjB,GAAW,UAAU,iBAAmB,UAAW,CACjD,KAAK,UAAU,IACf,KAAK,UAAU,KACf,KAAK,UAAU,IACf,KAAK,cAAc,eACnB,KAAK,UAAU,GACf,KAAK,UAAU,GACf,KAAK,WAAW,KAAK,QACrB,KAAK,UAAU,IAMjB,GAAW,UAAU,aAAe,UAAW,CAC7C,KAAK,WAAW,KAAK,UAErB,OADI,GAAK,EAAI,IAAO,KAAK,SAAS,OACzB,EAAI,EAAG,EAAI,EAAG,IACrB,KAAK,UAAU,IAGnB,GAAW,UAAU,WAAa,SAAS,EAAQ,CACjD,KAAK,UAAU,EAAS,KACxB,KAAK,UAAW,GAAU,EAAK,MAMjC,GAAW,UAAU,YAAc,UAAW,CAC5C,GAAI,GAAM,GAAI,IAAW,KAAK,MAAO,KAAK,OAAQ,KAAK,cAAe,KAAK,YAC3E,EAAI,OAAO,OAMb,GAAW,UAAU,OAAS,UAAW,CACvC,MAAO,OAGT,GAAW,cAAgB,GAE3B,GAAO,QAAU,KCpdjB,mBAqCA,GAAI,IAAO,IAAQ,SAAS,EAAK,CAC/B,MAAO,IAAI,QAAO,GAAK,SAAS,WAGlC,YAAqB,EAAS,CAC5B,GAAI,GAAO,KACR,EAAS,KAAK,MACd,EAAS,KAAK,MACd,EAAS,GAAI,OAAM,IACnB,EAAU,GAAI,OAAM,IACpB,EAAU,GAAI,OAAM,IACpB,EAAW,GAAI,OAAM,IACrB,EACA,EACA,EACA,EAEA,EAAU,GAAI,OAAM,OACpB,EAAW,GAAI,OAAM,OACrB,EAAkB,GAAI,OAAM,IAC5B,EAAK,GAAI,OAAM,IACf,EAAU,GACV,EAAU,EACV,EAAU,EAEV,EAAM,GAAI,OAAM,IAChB,EAAM,GAAI,OAAM,IAChB,EAAM,GAAI,OAAM,IAChB,EAAM,GAAI,OAAM,KAChB,EAAgB,GAAI,OAAM,MAC1B,EAEA,EAAS,CACV,EAAG,EAAG,EAAG,EAAE,GAAG,GAAG,GAAG,GACpB,EAAG,EAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GACpB,EAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GACpB,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GACrB,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GACrB,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GACrB,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GACrB,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAGnB,EAA2B,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAC5D,EAA0B,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,IAClD,EAA2B,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,KAC5D,EAA0B,CAC5B,EAAK,EAAK,EAAK,EAAK,EAAK,GAAK,EAAK,GACnC,GAAK,GAAK,GAAK,EAAK,GAAK,GAAK,GAAK,EACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,EACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,GAAK,GAAK,IAAK,IAAK,EAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,KAGH,EAA6B,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAC9D,EAA4B,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,IACpD,GAA6B,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,KAC9D,GAA4B,CAC9B,EAAK,EAAK,EAAK,EAAK,GAAK,EAAK,EAAK,GACnC,GAAK,EAAK,GAAK,GAAK,GAAK,EAAK,GAAK,IACnC,GAAK,GAAK,GAAK,IAAK,EAAK,GAAK,GAAK,IACnC,IAAK,IAAK,IAAK,EAAK,GAAK,GAAK,GAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,GAAK,GACnC,IAAK,GAAK,IAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,KAGP,YAAyB,EAAG,CAY1B,OAXI,IAAM,CACT,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAG,IAAI,IAAK,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAG,IAAI,IAAK,GAC5B,GAAI,GAAI,GAAI,GAAG,IAAI,IAAI,IAAI,IAC3B,GAAI,GAAI,GAAI,GAAG,IAAI,IAAI,IAAK,IAGpB,GAAI,EAAG,GAAI,GAAI,KAAK,CAC5B,GAAI,IAAI,EAAQ,IAAI,IAAG,EAAG,IAAI,KAC9B,AAAI,GAAI,EACP,GAAI,EACM,GAAI,KACd,IAAI,KAEL,EAAO,EAAO,KAAM,GAYrB,OAVI,IAAO,CACV,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAEpB,GAAI,EAAG,GAAI,GAAI,KAAK,CAC5B,GAAI,IAAI,EAAQ,IAAK,IAAG,EAAG,IAAI,KAC/B,AAAI,GAAI,EACP,GAAI,EACM,GAAI,KACd,IAAI,KAEL,EAAQ,EAAO,KAAM,GAOtB,OALI,IAAO,CACV,EAAK,YAAa,YAAa,YAC/B,EAAK,WAAa,SAAa,YAE5B,GAAI,EACC,GAAM,EAAG,GAAM,EAAG,KAE1B,OAAS,GAAM,EAAG,EAAM,EAAG,IAE1B,EAAQ,IAAO,EAAO,GAAQ,EAAO,KAAM,GAAK,IAAO,GAAK,GAAO,GACnE,EAAS,IAAM,EAAO,GAAQ,EAAO,KAAM,GAAK,IAAO,GAAK,GAAO,GACnE,KAKH,YAA2B,EAAS,GAAU,CAI7C,OAHI,IAAY,EACZ,GAAe,EACf,GAAK,GAAI,OACJ,GAAI,EAAG,IAAK,GAAI,KAAK,CAC7B,OAAS,IAAI,EAAG,IAAK,EAAQ,IAAI,KAChC,GAAG,GAAU,KAAiB,GAC9B,GAAG,GAAU,KAAe,GAAK,GACjC,GAAG,GAAU,KAAe,GAAK,GACjC,KACA,KAED,IAAW,EAEZ,MAAO,IAGR,aACA,CACC,EAAS,GAAkB,EAAyB,GACpD,EAAU,GAAkB,EAA2B,GACvD,EAAS,GAAkB,EAAyB,GACpD,EAAU,GAAkB,GAA2B,IAGxD,aACA,CAGC,OAFI,GAAU,EACV,GAAU,EACL,GAAM,EAAG,IAAO,GAAI,KAAO,CAEnC,OAAS,IAAK,EAAS,GAAG,GAAS,KAClC,EAAS,MAAM,IAAM,GACrB,EAAQ,MAAM,IAAM,GACpB,EAAQ,MAAM,IAAI,GAAK,GACvB,EAAQ,MAAM,IAAI,GAAK,GAGxB,OAAS,IAAO,CAAE,IAAQ,GAAI,IAAO,CAAC,EAAS,KAC9C,EAAS,MAAM,IAAS,GACxB,EAAQ,MAAM,IAAS,GACvB,EAAQ,MAAM,IAAO,GAAK,GAC1B,EAAQ,MAAM,IAAO,GAAK,GAAQ,EAAE,GAErC,IAAY,EACZ,KAAY,GAId,aAA2B,CAC1B,OAAQ,GAAI,EAAG,EAAI,IAAI,IACtB,EAAc,GAAa,MAAQ,EACnC,EAAe,EAAG,KAAM,GAAO,MAAQ,EACvC,EAAe,EAAG,KAAM,GAAQ,KAAO,EAAI,MAC3C,EAAe,EAAG,KAAM,GAAM,OAAS,EACvC,EAAe,EAAE,MAAO,GAAM,OAAS,EACvC,EAAe,EAAE,MAAO,GAAO,MAAQ,EAAI,QAC3C,EAAe,EAAE,MAAO,GAAM,OAAS,EACvC,EAAe,EAAE,MAAO,GAAM,MAAS,EAKzC,YAAmB,EACnB,CAGC,OAFI,IAAQ,EAAG,GACX,GAAS,EAAG,GAAG,EACX,IAAU,GACjB,AAAI,GAAS,GAAK,IACjB,IAAY,GAAK,GAElB,KACA,IACI,EAAU,GACb,CAAI,GAAW,IACd,GAAU,KACV,EAAU,IAGV,EAAU,GAEX,EAAQ,EACR,EAAQ,GAKX,WAAmB,EACnB,CAEI,EAAQ,KAAK,GAGjB,YAAmB,EACnB,CACC,EAAW,GAAO,EAAG,KACrB,EAAW,EAAU,KAItB,YAAmB,EAAM,GACzB,CACC,GAAI,IAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAE5B,EAAQ,EACR,GACJ,GAAM,IAAK,EACL,GAAM,GACZ,IAAK,GAAE,EAAG,GAAE,GAAI,EAAE,GAClB,CACC,GAAK,EAAK,GACV,GAAK,EAAK,EAAQ,GAClB,GAAK,EAAK,EAAQ,GAClB,GAAK,EAAK,EAAQ,GAClB,GAAK,EAAK,EAAQ,GAClB,GAAK,EAAK,EAAQ,GAClB,GAAK,EAAK,EAAQ,GAClB,GAAK,EAAK,EAAQ,GAElB,GAAI,IAAO,GAAK,GACZ,GAAO,GAAK,GACZ,GAAO,GAAK,GACZ,GAAO,GAAK,GACZ,GAAO,GAAK,GACZ,GAAO,GAAK,GACZ,GAAO,GAAK,GACZ,GAAO,GAAK,GAGZ,GAAQ,GAAO,GACf,GAAQ,GAAO,GACf,GAAQ,GAAO,GACf,GAAQ,GAAO,GAEnB,EAAK,GAAW,GAAQ,GACxB,EAAK,EAAQ,GAAK,GAAQ,GAE1B,GAAI,IAAM,IAAQ,IAAS,WAC3B,EAAK,EAAQ,GAAK,GAAQ,GAC1B,EAAK,EAAQ,GAAK,GAAQ,GAG1B,GAAQ,GAAO,GACf,GAAQ,GAAO,GACf,GAAQ,GAAO,GAGf,GAAI,IAAM,IAAQ,IAAS,WACvB,GAAK,SAAc,GAAQ,GAC3B,GAAK,YAAc,GAAQ,GAC3B,GAAK,GAAQ,WAEb,GAAM,GAAO,GACb,GAAM,GAAO,GAEjB,EAAK,EAAQ,GAAK,GAAM,GACxB,EAAK,EAAQ,GAAK,GAAM,GACxB,EAAK,EAAQ,GAAK,GAAM,GACxB,EAAK,EAAQ,GAAK,GAAM,GAExB,GAAW,EAKZ,IADA,EAAU,EACL,GAAE,EAAG,GAAE,GAAI,EAAE,GAClB,CACC,GAAK,EAAK,GACV,GAAK,EAAK,EAAU,GACpB,GAAK,EAAK,EAAU,IACpB,GAAK,EAAK,EAAU,IACpB,GAAK,EAAK,EAAU,IACpB,GAAK,EAAK,EAAU,IACpB,GAAK,EAAK,EAAU,IACpB,GAAK,EAAK,EAAU,IAEpB,GAAI,IAAS,GAAK,GACd,GAAS,GAAK,GACd,GAAS,GAAK,GACd,EAAS,GAAK,GACd,EAAS,GAAK,GACd,EAAS,GAAK,GACd,EAAS,GAAK,GACd,EAAS,GAAK,GAGd,EAAU,GAAS,EACnB,EAAU,GAAS,EACnB,GAAU,GAAS,EACnB,GAAU,GAAS,EAEvB,EAAK,GAAW,EAAU,GAC1B,EAAK,EAAQ,IAAM,EAAU,GAE7B,GAAI,IAAQ,IAAU,GAAW,WACjC,EAAK,EAAQ,IAAM,EAAU,GAC7B,EAAK,EAAQ,IAAM,EAAU,GAG7B,EAAU,EAAS,EACnB,GAAU,EAAS,EACnB,GAAU,EAAS,GAGnB,GAAI,IAAQ,GAAU,IAAW,WAC7B,GAAO,SAAc,EAAU,GAC/B,GAAO,YAAc,GAAU,GAC/B,GAAO,GAAU,WAEjB,GAAQ,GAAS,GACjB,GAAQ,GAAS,GAErB,EAAK,EAAQ,IAAM,GAAQ,GAC3B,EAAK,EAAQ,IAAM,GAAQ,GAC3B,EAAK,EAAS,GAAK,GAAQ,GAC3B,EAAK,EAAQ,IAAM,GAAQ,GAE3B,IAID,GAAI,IACJ,IAAK,GAAE,EAAG,GAAE,GAAK,EAAE,GAGlB,GAAY,EAAK,IAAG,GAAM,IAC1B,EAAgB,IAAM,GAAY,EAAS,GAAY,GAAK,EAAO,GAAY,GAAK,EAIrF,MAAO,GAGR,aACA,CACC,GAAU,OACV,GAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,GACV,EAAU,GACV,EAAU,GACV,EAAU,GACV,GAAU,GACV,GAAU,GACV,EAAU,GACV,EAAU,GAGX,YAAmB,EAAO,GAC1B,CACC,GAAU,OACV,GAAU,IACV,EAAU,GACV,GAAU,IACV,GAAU,GACV,EAAU,GACV,EAAU,GACV,EAAU,IACV,EAAU,GACV,EAAU,GACV,EAAU,IACV,EAAU,GACV,EAAU,GACV,EAAU,IACV,EAAU,GAGX,YACA,CACC,GAAU,OACV,GAAU,KACV,EAAU,GACV,OAAS,GAAE,EAAG,EAAE,GAAI,IACnB,EAAU,EAAO,IAElB,EAAU,GACV,OAAS,IAAE,EAAG,GAAE,GAAI,KACnB,EAAU,EAAQ,KAIpB,aACA,CACC,GAAU,OACV,GAAU,KAEV,EAAU,GACV,OAAS,GAAE,EAAG,EAAE,GAAI,IACnB,EAAU,EAAyB,EAAE,IAEtC,OAAS,IAAE,EAAG,IAAG,GAAI,KACpB,EAAU,EAAwB,KAGnC,EAAU,IACV,OAAS,IAAE,EAAG,GAAE,GAAI,KACnB,EAAU,EAAyB,GAAE,IAEtC,OAAS,IAAE,EAAG,IAAG,IAAK,KACrB,EAAU,EAAwB,KAGnC,EAAU,GACV,OAAS,IAAE,EAAG,GAAE,GAAI,KACnB,EAAU,EAA2B,GAAE,IAExC,OAAS,IAAE,EAAG,IAAG,GAAI,KACpB,EAAU,EAA0B,KAGrC,EAAU,IACV,OAAS,IAAE,EAAG,GAAE,GAAI,KACnB,EAAU,GAA2B,GAAE,IAExC,OAAS,IAAE,EAAG,IAAG,IAAK,KACrB,EAAU,GAA0B,KAItC,aACA,CACC,GAAU,OACV,GAAU,IACV,EAAU,GACV,EAAU,GACV,EAAU,GACV,EAAU,GACV,EAAU,IACV,EAAU,GACV,EAAU,IACV,EAAU,GACV,EAAU,IACV,EAAU,GAGX,YAAmB,EAAK,GAAO,GAAI,GAAM,GAAK,CAC7C,GAAI,IAAM,GAAK,GACX,GAAY,GAAK,KACjB,GACJ,GAAM,IAAM,GACN,GAAM,GACN,EAAM,GAGZ,OAFI,IAAS,GAAU,EAAK,IAEnB,GAAE,EAAE,GAAE,EAAI,EAAE,GACpB,EAAG,EAAO,KAAI,GAAO,IAEtB,GAAI,IAAO,EAAG,GAAK,GAAI,GAAK,EAAG,GAE/B,AAAI,IAAM,EACT,GAAU,GAAK,IAEf,IAAM,MAAM,GACZ,GAAU,GAAK,EAAS,MACxB,GAAU,EAAQ,MAInB,OADI,IAAU,GACN,GAAQ,GAAK,EAAG,KAAU,EAAI,KAAW,CAEjD,GAAK,IAAW,EACf,UAAU,IACH,GAIR,OAFI,IAAI,EACJ,GACI,IAAK,IAAU,CAEtB,OADI,IAAW,GACP,EAAG,KAAI,GAAO,IAAG,GAAU,EAAE,GAAG,CACxC,GAAI,IAAW,GAAE,GACjB,GAAK,IAAY,GAAM,CACtB,GAAM,IAAU,EAChB,OAAS,IAAS,EAAG,IAAY,GAAK,EAAE,GACvC,GAAU,IACX,GAAW,GAAS,GAErB,GAAM,MAAM,EAAG,IACf,GAAU,GAAM,KAAU,GAAG,EAAS,MACtC,GAAU,EAAQ,KAClB,KAED,MAAK,KAAW,IACf,GAAU,IAEJ,GAGR,aAA8B,CAE7B,OADI,GAAO,OAAO,aACV,GAAE,EAAG,GAAI,IAAK,KACrB,EAAI,IAAK,EAAK,IAIhB,KAAK,OAAS,SAAS,EAAM,GAC7B,CACC,GAAI,IAAa,GAAI,QAAO,UAE5B,AAAG,IAAS,GAAW,IAGvB,EAAU,GAAI,OACd,EAAQ,EACR,EAAQ,EAGR,GAAU,OACV,KACA,IACA,GAAU,EAAM,MAAM,EAAM,QAC5B,KACA,KAIA,GAAI,IAAI,EACJ,GAAI,EACJ,GAAI,EAER,EAAQ,EACR,EAAQ,EAGR,KAAK,OAAO,YAAc,WAY1B,OAVI,IAAY,EAAM,KAClB,GAAQ,EAAM,MACd,GAAS,EAAM,OAEf,GAAY,GAAM,EAClB,EAAc,GAAM,EAEpB,GAAG,GAAI,EACP,GAAG,GAAG,GACN,GAAM,GAAG,GAAI,GAAI,GACf,GAAI,IAAO,CAEhB,IADA,GAAI,EACE,GAAI,IAAU,CAMpB,IALA,GAAQ,GAAY,GAAI,GACxB,GAAI,GACJ,GAAM,GACN,GAAM,EAEF,GAAI,EAAG,GAAM,GAAI,KACpB,GAAM,IAAO,EACb,GAAQ,IAAM,GAAM,EACpB,GAAI,GAAU,GAAM,GAAc,GAE/B,GAAE,IAAO,IACX,KAAK,GAAW,IAAE,EAAE,GAAI,KAGtB,GAAE,IAAO,IACX,KAAM,GAAE,GAAO,GAAW,GAG3B,GAAI,GAAW,MACf,GAAI,GAAW,MACf,GAAI,GAAW,MAUf,EAAI,IAAS,GAAc,IAAiB,EAAe,GAAK,KAAM,GAAK,EAAe,GAAK,KAAM,IAAO,IAAI,IAChH,EAAI,IAAS,GAAe,GAAK,KAAM,GAAK,EAAe,GAAI,MAAO,GAAK,EAAe,GAAI,MAAO,IAAO,IAAI,IAChH,EAAI,IAAS,GAAe,GAAI,MAAO,GAAK,EAAe,GAAI,MAAO,GAAK,EAAe,GAAI,MAAO,IAAO,IAAI,IAIjH,GAAM,GAAU,EAAK,EAAS,GAAK,EAAQ,GAC3C,GAAM,GAAU,EAAK,EAAU,GAAK,EAAS,GAC7C,GAAM,GAAU,EAAK,EAAU,GAAK,EAAS,GAC7C,IAAG,GAEH,IAAG,EAOJ,GAAK,GAAW,EAAI,CACnB,GAAI,IAAW,GACf,GAAS,GAAK,EAAQ,EACtB,GAAS,GAAM,IAAI,EAAQ,GAAI,EAC/B,GAAU,IAGX,UAAU,OAGA,GAAI,QAAO,GAErB,GAAI,IAAc,0BAA4B,GAAK,EAAQ,KAAK,KAEhE,EAAU,GAGV,GAAI,IAAW,GAAI,QAAO,UAAY,GAItC,MAAO,KAGT,YAAoB,EAAQ,CAQ3B,GAPI,GAAW,GACd,GAAU,GAEP,EAAU,KACb,GAAU,KAGR,GAAkB,EAErB,IAAI,IAAK,EACT,AAAI,EAAU,GACb,GAAK,KAAK,MAAM,IAAO,GAEvB,GAAK,KAAK,MAAM,IAAM,EAAQ,GAG/B,GAAgB,IAChB,EAAiB,GAIlB,aAAe,CACd,GAAI,GAAa,GAAI,QAAO,UAC5B,AAAI,GAAS,GAAU,IAEvB,KACA,KACA,KACA,KAEA,GAAW,GACX,GAAI,IAAW,GAAI,QAAO,UAAY,EAIvC,KAGD,GAAO,QAAU,GAEjB,YAAgB,EAAS,EAAI,CAC3B,AAAI,MAAO,IAAO,aAAa,GAAK,IACpC,GAAI,GAAU,GAAI,IAAY,GAC3B,EAAO,EAAQ,OAAO,EAAS,GAClC,MAAO,CACL,KAAM,EACN,MAAO,EAAQ,MACf,OAAQ,EAAQ,WC/uBpB,mBA0BA,GAAI,IAAa,UAAqB,CACpC,aACA,GAAI,GAAY,GAAI,YAAW,CAC5B,EACA,EAAI,EACL,GAAK,EAAI,EACR,EAAG,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GAAI,EACf,EAAG,GAAI,GAAI,GAAI,GAAI,GACpB,GAAI,GAAI,GAAI,GAAI,GAAI,GAAK,EACxB,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxB,GAAI,GAAI,GAAI,GAAI,GAAI,GACpB,GAAI,GAAI,GAAI,GAAI,GAChB,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GACR,GAAI,GACJ,KAGE,EAAY,KACZ,EAAa,IACb,EAAY,KACZ,EAAY,KACZ,EAAY,KACZ,EAAY,KACZ,EAAY,KACZ,EAAa,KAEjB,YAAuB,EAGvB,WAA2B,EAAa,EAAQ,CAE9C,OADI,GAAI,EAAG,EAAO,GAAI,EAAG,EAAG,EAAS,GAC9B,EAAS,GAAK,CAAC,EAAY,EAAS,IACzC,IACF,EAAK,KAAK,CAAC,SAAU,GAAI,MAAO,IAChC,GAAI,GAAI,EAAK,GAAI,EACjB,IAAK,EAAI,EAAG,EAAI,EAAQ,IAAK,CAC3B,IAAK,EAAI,EAAG,EAAI,EAAY,GAAI,IAAK,CAGnC,IAFA,EAAI,EAAK,MACT,EAAE,SAAS,EAAE,OAAS,EAAO,GACtB,EAAE,MAAQ,GACf,EAAI,EAAK,MAIX,IAFA,EAAE,QACF,EAAK,KAAK,GACH,EAAK,QAAU,GACpB,EAAK,KAAK,EAAI,CAAC,SAAU,GAAI,MAAO,IACpC,EAAE,SAAS,EAAE,OAAS,EAAE,SACxB,EAAI,EAEN,IAEF,AAAI,EAAI,EAAI,GAEV,GAAK,KAAK,EAAI,CAAC,SAAU,GAAI,MAAO,IACpC,EAAE,SAAS,EAAE,OAAS,EAAE,SACxB,EAAI,GAGR,MAAO,GAAK,GAAG,SAGjB,WAAoB,EAAM,EACN,EAAO,EAAY,EACnB,EAAe,EACf,EAAgB,EAAY,CAC9C,GAAI,GAAY,EAAM,UAClB,EAAiB,EAAM,eACvB,EAAY,EAAM,UAClB,EAAc,EAAM,YACpB,EAAc,EAAM,YACpB,EAAO,EAAM,KAAM,EAAO,EAAM,KAEhC,EAAc,EAAQ,GAAW,EAAG,GAAY,EACpD,aAAmB,CACjB,GAAI,GAAY,EACd,YACQ,IAAY,GAAa,EAGnC,GADA,GAAW,EAAK,KACZ,IAAY,IAAM,CACpB,GAAI,IAAW,EAAK,KACpB,GAAI,GACF,KAAM,sBAA0B,KAAY,EAAK,IAAU,SAAS,IAIxE,UAAY,EACL,KAAa,EAEtB,YAAuB,GAAM,CAE3B,OADI,IAAO,GAAM,EACT,GAAM,QAAe,MAAM,CAEjC,GADA,GAAO,GAAK,GACR,MAAO,KAAS,SAClB,MAAO,IACT,GAAI,MAAO,KAAS,SAClB,KAAM,2BAEV,MAAO,MAET,YAAiB,GAAQ,CAEvB,OADI,IAAI,EACD,GAAS,GAAG,CACjB,GAAI,GAAM,KACV,GAAI,IAAQ,KAAM,OAClB,GAAK,IAAK,EAAK,EACf,KAEF,MAAO,IAET,YAA0B,GAAQ,CAChC,GAAI,IAAI,GAAQ,IAChB,MAAI,KAAK,GAAM,GAAS,EACf,GACF,GAAK,KAAM,IAAU,EAE9B,YAAwB,GAAW,GAAI,CACrC,GAAI,GAAI,GAAc,GAAU,gBAC5B,GAAO,IAAM,EAAI,EAAI,GAAiB,GAC1C,GAAG,GAAK,GAAU,MAAQ,GAE1B,OADI,IAAI,EACD,GAAI,IAAI,CACb,GAAI,IAAK,GAAc,GAAU,gBAC7B,GAAI,GAAK,GAAI,GAAI,IAAM,EAC3B,GAAI,KAAM,EAAG,CACX,GAAI,GAAI,GACN,MACF,IAAK,GACL,SAEF,IAAK,GACL,GAAI,IAAI,EAAU,IAClB,GAAG,IAAK,GAAiB,IACzB,MAGJ,YAAuB,GAAW,GAAI,CACpC,GAAI,GAAI,GAAc,GAAU,gBAC5B,GAAO,IAAM,EAAI,EAAK,GAAiB,IAAM,EACjD,GAAG,GAAM,GAAU,MAAQ,GAE7B,WAA4B,GAAW,GAAI,CACzC,GAAG,IAAM,MAAa,EAExB,GAAI,IAAS,EACb,YAAuB,GAAW,GAAI,CACpC,GAAI,GAAS,EAAG,CACd,KACA,OAGF,OADI,GAAI,EAAe,GAAI,EACpB,GAAK,IAAG,CACb,GAAI,IAAK,GAAc,GAAU,gBAC7B,GAAI,GAAK,GAAI,GAAI,IAAM,EAC3B,GAAI,KAAM,EAAG,CACX,GAAI,GAAI,GAAI,CACV,GAAS,GAAQ,IAAM,IAAK,IAAK,EACjC,MAEF,GAAK,GACL,SAEF,GAAK,GACL,GAAI,IAAI,EAAU,GAClB,GAAG,IAAK,GAAiB,IAAM,IAAK,GACpC,KAGJ,GAAI,IAAoB,EAAG,GAC3B,WAA4B,GAAW,GAAI,CAEzC,OADI,GAAI,EAAe,GAAI,EAAa,GAAI,EACrC,GAAK,IAAG,CACb,GAAI,IAAI,EAAU,GAClB,OAAQ,QACH,GACH,GAAI,IAAK,GAAc,GAAU,gBAC7B,GAAI,GAAK,GAAI,GAAI,IAAM,EAC3B,GAAI,KAAM,EACR,AAAI,GAAI,GACN,IAAS,GAAQ,IAAM,IAAK,IAC5B,GAAoB,GAEpB,IAAI,GACJ,GAAoB,OAEjB,CACL,GAAI,KAAM,EACR,KAAM,uBACR,GAAwB,GAAiB,IACzC,GAAoB,GAAI,EAAI,EAE9B,aACG,OACA,GACH,AAAI,GAAG,IACL,GAAG,KAAO,MAAa,EAEvB,MACI,KAAM,GACR,IAAoB,IAAqB,EAAI,EAAI,IAErD,UACG,GACH,AAAI,GAAG,IACL,GAAG,KAAO,MAAa,EAEvB,IAAG,IAAK,IAAyB,EACjC,GAAoB,GAEtB,UACG,GACH,AAAI,GAAG,KACL,IAAG,KAAO,MAAa,GACzB,MAEF,IAEF,AAAI,KAAsB,GACxB,MACI,KAAW,GACb,IAAoB,IAG1B,YAAmB,GAAW,GAAQ,EAAK,GAAK,GAAK,CACnD,GAAI,IAAU,EAAM,EAAe,EAC/B,GAAS,EAAM,EACf,GAAW,GAAS,GAAU,EAAI,GAClC,GAAW,GAAS,GAAU,EAAI,GACtC,GAAO,GAAW,GAAU,OAAO,IAAU,KAE/C,YAAqB,GAAW,GAAQ,EAAK,CAC3C,GAAI,IAAY,EAAM,GAAU,cAAiB,EAC7C,GAAW,EAAM,GAAU,cAC/B,GAAO,GAAW,GAAU,OAAO,IAAU,KAG/C,GAAI,IAAmB,EAAW,OAC9B,GAAW,GAAG,GAAG,EAAG,GACpB,GACJ,AAAI,EACF,AAAI,IAAkB,EACpB,GAAW,IAAmB,EAAI,GAAgB,EAElD,GAAW,IAAmB,EAAI,GAAgB,EAEpD,GAAW,GAGb,GAAI,IAAM,EAAG,GACT,GACJ,AAAI,IAAoB,EACtB,GAAc,EAAW,GAAG,cAAgB,EAAW,GAAG,gBAE1D,GAAc,EAAc,EAAM,cAE/B,GAAe,GAAgB,IAGpC,OADI,IAAG,GACA,GAAM,IAAa,CAExB,IAAK,GAAI,EAAG,GAAI,GAAkB,KAChC,EAAW,IAAG,KAAO,EAGvB,GAFA,GAAS,EAEL,IAAoB,EAEtB,IADA,GAAY,EAAW,GAClB,GAAI,EAAG,GAAI,EAAe,KAC7B,GAAY,GAAW,GAAU,IACjC,SAGF,KAAK,GAAI,EAAG,GAAI,EAAe,KAAK,CAClC,IAAK,GAAI,EAAG,GAAI,GAAkB,KAIhC,IAHA,GAAY,EAAW,IACvB,GAAI,GAAU,EACd,GAAI,GAAU,EACT,GAAI,EAAG,GAAI,GAAG,KACjB,IAAK,EAAI,EAAG,EAAI,GAAG,IACjB,GAAU,GAAW,GAAU,GAAK,GAAG,GAO7C,GAHA,KAGI,KAAQ,GAAa,MAO7B,GAFA,GAAY,EACZ,GAAU,EAAK,IAAW,EAAK,EAAK,EAAS,GACzC,GAAS,MACX,KAAM,uBAGR,GAAI,IAAU,OAAU,IAAU,MAChC,GAAU,MAGV,OAGJ,MAAO,GAAS,EAGlB,WAA4B,EAAO,EAAW,CAC5C,GAAI,GAAQ,GACR,EAAgB,EAAU,cAC1B,EAAkB,EAAU,gBAC5B,EAAiB,GAAiB,EAClC,EAAI,GAAI,YAAW,IAAK,EAAI,GAAI,YAAW,IAO/C,WAA4B,GAAI,GAAS,GAAQ,CAC/C,GAAI,IAAK,EAAU,kBACf,GAAI,GAAI,GAAI,GAAI,EAAI,GAAI,GAAI,GAAI,GAChC,EAAI,GACJ,GAGJ,IAAK,GAAI,EAAG,GAAI,GAAI,KAClB,EAAE,IAAK,GAAG,IAAK,GAAG,IAGpB,IAAK,GAAI,EAAG,GAAI,EAAG,EAAE,GAAG,CACtB,GAAI,IAAM,EAAI,GAGd,GAAI,EAAE,EAAI,KAAQ,GAAK,EAAE,EAAI,KAAQ,GAAK,EAAE,EAAI,KAAQ,GACpD,EAAE,EAAI,KAAQ,GAAK,EAAE,EAAI,KAAQ,GAAK,EAAE,EAAI,KAAQ,GACpD,EAAE,EAAI,KAAQ,EAAG,CACnB,GAAK,EAAW,EAAE,EAAI,IAAO,KAAQ,GACrC,EAAE,EAAI,IAAO,GACb,EAAE,EAAI,IAAO,GACb,EAAE,EAAI,IAAO,GACb,EAAE,EAAI,IAAO,GACb,EAAE,EAAI,IAAO,GACb,EAAE,EAAI,IAAO,GACb,EAAE,EAAI,IAAO,GACb,EAAE,EAAI,IAAO,GACb,SAIF,GAAM,EAAW,EAAE,EAAI,IAAO,KAAQ,EACtC,GAAM,EAAW,EAAE,EAAI,IAAO,KAAQ,EACtC,GAAK,EAAE,EAAI,IACX,GAAK,EAAE,EAAI,IACX,EAAM,EAAc,GAAE,EAAI,IAAO,EAAE,EAAI,KAAQ,KAAQ,EACvD,GAAM,EAAc,GAAE,EAAI,IAAO,EAAE,EAAI,KAAQ,KAAQ,EACvD,GAAK,EAAE,EAAI,KAAQ,EACnB,GAAK,EAAE,EAAI,KAAQ,EAGnB,GAAK,GAAK,GAAI,GAAM,EACpB,GAAM,GAAK,GAAK,GAAM,EACtB,GAAK,GACL,GAAK,GAAK,EAAU,GAAK,EAAU,KAAQ,EAC3C,GAAM,GAAK,EAAU,GAAK,EAAU,KAAQ,EAC5C,GAAK,GACL,GAAK,EAAK,GAAK,GAAM,EACrB,EAAM,EAAK,GAAK,GAAM,EACtB,GAAK,GACL,GAAK,GAAK,GAAK,GAAM,EACrB,GAAM,GAAK,GAAK,GAAM,EACtB,GAAK,GAGL,GAAK,GAAK,GAAK,GAAM,EACrB,GAAM,GAAK,GAAK,GAAM,EACtB,GAAK,GACL,GAAK,GAAK,GAAK,GAAM,EACrB,GAAM,GAAK,GAAK,GAAM,EACtB,GAAK,GACL,GAAK,EAAK,EAAU,GAAK,EAAU,MAAS,GAC5C,EAAM,EAAK,EAAU,GAAK,EAAU,MAAS,GAC7C,GAAK,GACL,GAAK,GAAK,EAAU,GAAK,EAAU,MAAS,GAC5C,GAAM,GAAK,EAAU,GAAK,EAAU,MAAS,GAC7C,GAAK,GAGL,EAAE,EAAI,IAAO,GAAK,GAClB,EAAE,EAAI,IAAO,GAAK,GAClB,EAAE,EAAI,IAAO,GAAK,GAClB,EAAE,EAAI,IAAO,GAAK,GAClB,EAAE,EAAI,IAAO,GAAK,GAClB,EAAE,EAAI,IAAO,GAAK,GAClB,EAAE,EAAI,IAAO,GAAK,EAClB,EAAE,EAAI,IAAO,GAAK,EAIpB,IAAK,GAAI,EAAG,GAAI,EAAG,EAAE,GAAG,CACtB,GAAI,IAAM,GAGV,GAAI,EAAE,EAAE,EAAI,KAAQ,GAAK,EAAE,EAAE,EAAI,KAAQ,GAAK,EAAE,EAAE,EAAI,KAAQ,GAC1D,EAAE,EAAE,EAAI,KAAQ,GAAK,EAAE,EAAE,EAAI,KAAQ,GAAK,EAAE,EAAE,EAAI,KAAQ,GAC1D,EAAE,EAAE,EAAI,KAAQ,EAAG,CACrB,GAAK,EAAW,GAAO,GAAE,GAAK,MAAS,GACvC,EAAE,EAAE,EAAI,IAAO,GACf,EAAE,EAAE,EAAI,IAAO,GACf,EAAE,EAAE,EAAI,IAAO,GACf,EAAE,EAAE,EAAI,IAAO,GACf,EAAE,EAAE,EAAI,IAAO,GACf,EAAE,EAAE,EAAI,IAAO,GACf,EAAE,EAAE,EAAI,IAAO,GACf,EAAE,EAAE,EAAI,IAAO,GACf,SAIF,GAAM,EAAW,EAAE,EAAE,EAAI,IAAO,MAAS,GACzC,GAAM,EAAW,EAAE,EAAE,EAAI,IAAO,MAAS,GACzC,GAAK,EAAE,EAAE,EAAI,IACb,GAAK,EAAE,EAAE,EAAI,IACb,EAAM,EAAc,GAAE,EAAE,EAAI,IAAO,EAAE,EAAE,EAAI,KAAQ,MAAS,GAC5D,GAAM,EAAc,GAAE,EAAE,EAAI,IAAO,EAAE,EAAE,EAAI,KAAQ,MAAS,GAC5D,GAAK,EAAE,EAAE,EAAI,IACb,GAAK,EAAE,EAAE,EAAI,IAGb,GAAK,GAAK,GAAK,GAAM,EACrB,GAAM,GAAK,GAAK,GAAM,EACtB,GAAK,GACL,GAAK,GAAK,EAAU,GAAK,EAAU,MAAS,GAC5C,GAAM,GAAK,EAAU,GAAK,EAAU,MAAS,GAC7C,GAAK,GACL,GAAK,EAAK,GAAK,GAAM,EACrB,EAAM,EAAK,GAAK,GAAM,EACtB,GAAK,GACL,GAAK,GAAK,GAAK,GAAM,EACrB,GAAM,GAAK,GAAK,GAAM,EACtB,GAAK,GAGL,GAAK,GAAK,GAAK,GAAM,EACrB,GAAM,GAAK,GAAK,GAAM,EACtB,GAAK,GACL,GAAK,GAAK,GAAK,GAAM,EACrB,GAAM,GAAK,GAAK,GAAM,EACtB,GAAK,GACL,GAAK,EAAK,EAAU,GAAK,EAAU,MAAS,GAC5C,EAAM,EAAK,EAAU,GAAK,EAAU,MAAS,GAC7C,GAAK,GACL,GAAK,GAAK,EAAU,GAAK,EAAU,MAAS,GAC5C,GAAM,GAAK,EAAU,GAAK,EAAU,MAAS,GAC7C,GAAK,GAGL,EAAE,EAAE,EAAI,IAAO,GAAK,GACpB,EAAE,EAAE,EAAI,IAAO,GAAK,GACpB,EAAE,EAAE,EAAI,IAAO,GAAK,GACpB,EAAE,EAAE,EAAI,IAAO,GAAK,GACpB,EAAE,EAAE,EAAI,IAAO,GAAK,GACpB,EAAE,EAAE,EAAI,IAAO,GAAK,GACpB,EAAE,EAAE,EAAI,IAAO,GAAK,EACpB,EAAE,EAAE,EAAI,IAAO,GAAK,EAItB,IAAK,GAAI,EAAG,GAAI,GAAI,EAAE,GAAG,CACvB,GAAI,IAAS,IAAQ,GAAE,IAAK,GAAM,GAClC,GAAQ,IAAK,GAAS,EAAI,EAAI,GAAS,IAAO,IAAO,IAKzD,OADI,GAAG,EACE,EAAW,EAAG,EAAW,EAAiB,IAAY,CAC7D,GAAI,GAAW,GAAY,EAC3B,IAAK,EAAI,EAAG,EAAI,EAAG,IACjB,EAAM,KAAK,GAAI,YAAW,IAC5B,OAAS,GAAW,EAAG,EAAW,EAAe,IAAY,CAC3D,EAAmB,EAAU,OAAO,GAAU,GAAW,EAAG,GAE5D,GAAI,GAAS,EAAG,EAAS,GAAY,EACrC,IAAK,EAAI,EAAG,EAAI,EAAG,IAAK,CACtB,GAAI,GAAO,EAAM,EAAW,GAC5B,IAAK,EAAI,EAAG,EAAI,EAAG,IACjB,EAAK,EAAS,GAAK,EAAE,OAI7B,MAAO,GAGT,WAAqB,EAAG,CACtB,MAAO,GAAI,EAAI,EAAI,EAAI,IAAM,IAAM,EAGrC,SAAY,UAAY,CACtB,KAAM,SAAc,EAAM,CACxB,GAAI,GAAM,GAAI,gBACd,EAAI,KAAK,MAAO,EAAM,IACtB,EAAI,aAAe,cACnB,EAAI,OAAU,UAAW,CAEvB,GAAI,GAAO,GAAI,YAAW,EAAI,UAAY,EAAI,wBAC9C,KAAK,MAAM,GACP,KAAK,QACP,KAAK,UACN,KAAK,MACR,EAAI,KAAK,OAEX,MAAO,SAAe,EAAM,CAC1B,GAAI,GAAS,EAAG,EAAS,EAAK,OAC9B,YAAsB,CACpB,GAAI,GAAS,EAAK,IAAW,EAAK,EAAK,EAAS,GAChD,UAAU,EACH,EAET,YAAyB,CACvB,GAAI,GAAS,IACT,GAAQ,EAAK,SAAS,EAAQ,EAAS,EAAS,GACpD,UAAU,GAAM,OACT,GAET,WAA2B,EAAO,CAChC,GAAI,IAAO,EAAG,GAAO,EACjB,GAAW,GACf,IAAK,KAAe,GAAM,WACxB,AAAI,EAAM,WAAW,eAAe,KAClC,IAAY,EAAM,WAAW,IACzB,GAAO,GAAU,GAAG,IAAO,GAAU,GACrC,GAAO,GAAU,GAAG,IAAO,GAAU,IAG7C,GAAI,IAAc,KAAK,KAAK,EAAM,eAAiB,EAAI,IACnD,GAAgB,KAAK,KAAK,EAAM,UAAY,EAAI,IACpD,IAAK,KAAe,GAAM,WACxB,GAAI,EAAM,WAAW,eAAe,IAAc,CAChD,GAAY,EAAM,WAAW,IAM7B,OALI,IAAgB,KAAK,KAAK,KAAK,KAAK,EAAM,eAAiB,GAAK,GAAU,EAAI,IAC9E,GAAkB,KAAK,KAAK,KAAK,KAAK,EAAM,UAAa,GAAK,GAAU,EAAI,IAC5E,GAAsB,GAAc,GAAU,EAC9C,GAAwB,GAAgB,GAAU,EAClD,GAAS,GACJ,GAAI,EAAG,GAAI,GAAuB,KAAK,CAE9C,OADI,IAAM,GACD,GAAI,EAAG,GAAI,GAAqB,KACvC,GAAI,KAAK,GAAI,YAAW,KAC1B,GAAO,KAAK,IAEd,GAAU,cAAgB,GAC1B,GAAU,gBAAkB,GAC5B,GAAU,OAAS,GAGvB,EAAM,KAAO,GACb,EAAM,KAAO,GACb,EAAM,YAAc,GACpB,EAAM,cAAgB,GAExB,GAAI,GAAO,KACP,EAAQ,KACR,EAAS,KACT,EAAO,EACP,EAAqB,GAAI,EAAS,GAClC,EAAkB,GAAI,EAAkB,GACxC,EAAa,IACjB,GAAI,GAAc,MAChB,KAAM,gBAIR,IADA,EAAa,IACN,GAAc,OAAQ,CAC3B,GAAI,IAAG,GAAG,GACV,OAAO,OACA,OAAQ,UACR,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,OACH,GAAI,IAAU,IAEd,AAAI,IAAe,OACb,GAAQ,KAAO,IAAQ,GAAQ,KAAO,IAAQ,GAAQ,KAAO,IAC/D,GAAQ,KAAO,IAAQ,GAAQ,KAAO,GACtC,GAAO,CACL,QAAS,CAAE,MAAO,GAAQ,GAAI,MAAO,GAAQ,IAC7C,aAAc,GAAQ,GACtB,SAAW,GAAQ,IAAM,EAAK,GAAQ,GACtC,SAAW,GAAQ,KAAO,EAAK,GAAQ,IACvC,WAAY,GAAQ,IACpB,YAAa,GAAQ,IACrB,UAAW,GAAQ,SAAS,GAAI,GAAK,EAAI,GAAQ,IAAM,GAAQ,OAKjE,IAAe,OACb,GAAQ,KAAO,IAAQ,GAAQ,KAAO,KAAQ,GAAQ,KAAO,KAC/D,GAAQ,KAAO,IAAQ,GAAQ,KAAO,KAAQ,GAAQ,KAAO,GAC7D,GAAQ,CACN,QAAS,GAAQ,GACjB,OAAS,GAAQ,IAAM,EAAK,GAAQ,GACpC,OAAS,GAAQ,IAAM,EAAK,GAAQ,IACpC,cAAe,GAAQ,MAI7B,UAEG,OAGH,OAFI,IAA2B,IAC3B,GAAwB,GAA2B,EAAS,EACzD,EAAS,IAAuB,CACrC,GAAI,IAAwB,EAAK,KAC7B,GAAY,GAAI,YAAW,IAC/B,GAAK,IAAyB,GAAO,EACnC,IAAK,GAAI,EAAG,GAAI,GAAI,KAAK,CACvB,GAAI,GAAI,EAAU,IAClB,GAAU,GAAK,EAAK,aAEZ,IAAyB,GAAO,EAC1C,IAAK,GAAI,EAAG,GAAI,GAAI,KAAK,CACvB,GAAI,GAAI,EAAU,IAClB,GAAU,GAAK,QAGjB,MAAM,0BACR,EAAmB,GAAwB,IAAM,GAEnD,UAEG,WACA,WACA,OACH,IACA,EAAQ,GACR,EAAM,SAAY,IAAe,MACjC,EAAM,YAAe,IAAe,MACpC,EAAM,UAAY,EAAK,KACvB,EAAM,UAAY,IAClB,EAAM,eAAiB,IACvB,EAAM,WAAa,GACnB,EAAM,gBAAkB,GACxB,GAAI,IAAkB,EAAK,KAAW,GAClC,GAAO,EAAG,GAAO,EACrB,IAAK,GAAI,EAAG,GAAI,GAAiB,KAAK,CACpC,GAAc,EAAK,GACnB,GAAI,GAAI,EAAK,EAAS,IAAM,EACxB,GAAI,EAAK,EAAS,GAAK,GACvB,GAAM,EAAK,EAAS,GACxB,EAAM,gBAAgB,KAAK,IAC3B,EAAM,WAAW,IAAe,CAC9B,EAAG,EACH,EAAG,GACH,kBAAmB,EAAmB,KAExC,GAAU,EAEZ,EAAkB,GAClB,EAAO,KAAK,GACZ,UAEG,OACH,GAAI,IAAgB,IACpB,IAAK,GAAI,EAAG,GAAI,IAAgB,CAC9B,GAAI,IAAmB,EAAK,KACxB,GAAc,GAAI,YAAW,IAC7B,GAAgB,EACpB,IAAK,GAAI,EAAG,GAAI,GAAI,KAAK,IACvB,IAAkB,GAAY,IAAK,EAAK,GAC1C,GAAI,GAAgB,GAAI,YAAW,IACnC,IAAK,GAAI,EAAG,GAAI,GAAe,KAAK,IAClC,EAAc,IAAK,EAAK,GAC1B,IAAK,GAAK,GAER,KAAoB,GAAO,EAC3B,EAAkB,GAAiB,GAAmB,IACtD,EAAkB,GAAa,GAEnC,UAEG,OACH,IACA,EAAgB,IAChB,UAEG,OACH,GAAI,IAAa,IACb,GAAiB,EAAK,KACtB,GAAa,GAAI,GACrB,IAAK,GAAI,EAAG,GAAI,GAAgB,KAAK,CACnC,GAAY,EAAM,WAAW,EAAK,MAClC,GAAI,IAAY,EAAK,KACrB,GAAU,eAAiB,EAAgB,IAAa,GACxD,GAAU,eAAiB,EAAgB,GAAY,IACvD,GAAW,KAAK,IAElB,GAAI,IAAgB,EAAK,KACrB,GAAc,EAAK,KACnB,GAA0B,EAAK,KAC/B,GAAY,EAAW,EAAM,EAC/B,EAAO,GAAY,EACnB,GAAe,GACf,IAA2B,EAAG,GAA0B,IAC1D,GAAU,GACV,cAEA,GAAI,EAAK,EAAS,IAAM,KACpB,EAAK,EAAS,IAAM,KAAQ,EAAK,EAAS,IAAM,IAAM,CAGxD,GAAU,EACV,MAEF,KAAM,uBAAyB,EAAW,SAAS,IAEvD,EAAa,IAEf,GAAI,EAAO,QAAU,EACnB,KAAM,oCAER,KAAK,MAAQ,EAAM,eACnB,KAAK,OAAS,EAAM,UACpB,KAAK,KAAO,EACZ,KAAK,MAAQ,EACb,KAAK,WAAa,GAClB,OAAS,IAAI,EAAG,GAAI,EAAM,gBAAgB,OAAQ,KAAK,CACrD,GAAI,IAAY,EAAM,WAAW,EAAM,gBAAgB,KACvD,KAAK,WAAW,KAAK,CACnB,MAAO,EAAmB,EAAO,IACjC,OAAQ,GAAU,EAAI,EAAM,KAC5B,OAAQ,GAAU,EAAI,EAAM,SAIlC,QAAS,SAAiB,EAAO,EAAQ,CACvC,GAAI,GAAS,KAAK,MAAQ,EAAO,EAAS,KAAK,OAAS,EAEpD,EAAY,EAAY,EAAY,EACpC,EAAgB,EAAgB,EAAgB,EAChD,EAAG,EACH,EAAS,EACT,EAAG,GAAI,GAAI,GAAG,GAAG,GAAG,GAAI,GAAG,GAAG,EAC9B,GACA,GAAa,EAAQ,EAAS,KAAK,WAAW,OAC9C,GAAO,GAAI,YAAW,IAC1B,OAAQ,KAAK,WAAW,YACjB,GAEH,IADA,EAAa,KAAK,WAAW,GACxB,EAAI,EAAG,EAAI,EAAQ,IAEtB,IADA,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC1D,EAAI,EAAG,EAAI,EAAO,IACrB,EAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAEhD,GAAK,KAAY,EAGrB,UACG,GAIH,IAFA,EAAa,KAAK,WAAW,GAC7B,EAAa,KAAK,WAAW,GACxB,EAAI,EAAG,EAAI,EAAQ,IAGtB,IAFA,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC/D,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC1D,EAAI,EAAG,EAAI,EAAO,IACrB,EAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAChD,GAAK,KAAY,EACjB,EAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAChD,GAAK,KAAY,EAGrB,UACG,GAYH,IAVA,GAAiB,GAEjB,AAAI,KAAK,OAAS,KAAK,MAAM,cAC3B,GAAiB,GACV,MAAO,MAAK,gBAAmB,aACtC,IAAiB,CAAC,CAAC,KAAK,gBAE1B,EAAa,KAAK,WAAW,GAC7B,EAAa,KAAK,WAAW,GAC7B,EAAa,KAAK,WAAW,GACxB,EAAI,EAAG,EAAI,EAAQ,IAItB,IAHA,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC/D,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC/D,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC1D,EAAI,EAAG,EAAI,EAAO,IACrB,AAAK,GAKH,GAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAChD,GAAK,EAAe,EAAK,EAAI,EAAW,OAAS,GACjD,GAAK,EAAe,EAAK,EAAI,EAAW,OAAS,GAEjD,GAAI,EAAY,EAAI,MAAS,IAAK,MAClC,GAAI,EAAY,EAAI,SAAa,IAAK,KAAO,UAAc,IAAK,MAChE,EAAI,EAAY,EAAI,MAAS,IAAK,OAVlC,IAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAChD,GAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAChD,EAAI,EAAe,EAAK,EAAI,EAAW,OAAS,IAWlD,GAAK,KAAY,GACjB,GAAK,KAAY,GACjB,GAAK,KAAY,EAGrB,UACG,GACH,GAAI,CAAC,KAAK,MACR,KAAM,wCAaR,IAXA,GAAiB,GAEjB,AAAI,KAAK,OAAS,KAAK,MAAM,cAC3B,GAAiB,GACV,MAAO,MAAK,gBAAmB,aACtC,IAAiB,CAAC,CAAC,KAAK,gBAE1B,EAAa,KAAK,WAAW,GAC7B,EAAa,KAAK,WAAW,GAC7B,EAAa,KAAK,WAAW,GAC7B,EAAa,KAAK,WAAW,GACxB,EAAI,EAAG,EAAI,EAAQ,IAKtB,IAJA,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC/D,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC/D,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC/D,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC1D,EAAI,EAAG,EAAI,EAAO,IACrB,AAAK,GAMH,GAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAChD,GAAK,EAAe,EAAK,EAAI,EAAW,OAAS,GACjD,GAAK,EAAe,EAAK,EAAI,EAAW,OAAS,GACjD,GAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAEhD,GAAI,IAAM,EAAY,EAAI,MAAS,IAAK,MACxC,GAAI,IAAM,EAAY,EAAI,SAAa,IAAK,KAAO,UAAc,IAAK,MACtE,GAAK,IAAM,EAAY,EAAI,MAAS,IAAK,OAZzC,IAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAChD,GAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAChD,GAAK,EAAe,EAAK,EAAI,EAAW,OAAS,GACjD,GAAI,EAAe,EAAK,EAAI,EAAW,OAAS,IAWlD,GAAK,KAAY,GACjB,GAAK,KAAY,GACjB,GAAK,KAAY,GACjB,GAAK,KAAY,GAGrB,cAEA,KAAM,yBAEV,MAAO,KAET,gBAAiB,SAAyB,EAAW,CACnD,GAAI,GAAQ,EAAU,MAAO,EAAS,EAAU,OAC5C,EAAiB,EAAU,KAC3B,EAAO,KAAK,QAAQ,EAAO,GAC3B,EAAI,EAAG,EAAI,EAAG,EAAG,EACjB,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACtB,OAAQ,KAAK,WAAW,YACjB,GACH,IAAK,EAAI,EAAG,EAAI,EAAQ,IACtB,IAAK,EAAI,EAAG,EAAI,EAAO,IACrB,EAAI,EAAK,KAET,EAAe,KAAO,EACtB,EAAe,KAAO,EACtB,EAAe,KAAO,EACtB,EAAe,KAAO,IAG1B,UACG,GACH,IAAK,EAAI,EAAG,EAAI,EAAQ,IACtB,IAAK,EAAI,EAAG,EAAI,EAAO,IACrB,EAAI,EAAK,KACT,EAAI,EAAK,KACT,EAAI,EAAK,KAET,EAAe,KAAO,EACtB,EAAe,KAAO,EACtB,EAAe,KAAO,EACtB,EAAe,KAAO,IAG1B,UACG,GACH,IAAK,EAAI,EAAG,EAAI,EAAQ,IACtB,IAAK,EAAI,EAAG,EAAI,EAAO,IACrB,EAAI,EAAK,KACT,EAAI,EAAK,KACT,EAAI,EAAK,KACT,EAAI,EAAK,KAET,EAAI,IAAM,EAAY,EAAK,GAAI,EAAI,KAAO,GAC1C,EAAI,IAAM,EAAY,EAAK,GAAI,EAAI,KAAO,GAC1C,EAAI,IAAM,EAAY,EAAK,GAAI,EAAI,KAAO,GAE1C,EAAe,KAAO,EACtB,EAAe,KAAO,EACtB,EAAe,KAAO,EACtB,EAAe,KAAO,IAG1B,cAEA,KAAM,4BAKP,KAET,GAAO,QAAU,GAEjB,YAAgB,EAAU,CACxB,GAAI,GAAM,GAAI,YAAW,GACrB,EAAU,GAAI,IAClB,EAAQ,MAAM,GAId,OAHI,GAAQ,EAAQ,QAAQ,EAAQ,MAAO,EAAQ,QAC/C,EAAM,GAAI,QAAO,EAAQ,MAAQ,EAAQ,OAAS,GAClD,EAAI,EACC,EAAI,EAAG,EAAI,EAAI,OAAQ,IAC9B,EAAI,EAAK,GAAE,EAAI,IAAM,EAAK,KACtB,EAAI,GAAK,GAAG,GAAI,GAAK,KAE3B,MAAO,CACL,KAAM,EACN,MAAO,EAAQ,MACf,OAAQ,EAAQ,WCh9BpB,sBAAI,IAAS,KACT,GAAS,KAEb,GAAO,QAAU,CACf,OAAQ,GACR,OAAQ,MCLV,gCAGA,GAAI,IAAO,QAAQ,QACf,GAAS,QAAQ,UAGjB,GAAc,GAAO,QAAU,UAAW,CAC5C,GAAO,KAAK,MAEZ,KAAK,SAAW,GAChB,KAAK,UAAY,EAEjB,KAAK,OAAS,GACd,KAAK,QAAU,GAEf,KAAK,UAAY,OACjB,KAAK,SAAW,IAElB,GAAK,SAAS,GAAa,IAG3B,GAAY,UAAU,KAAO,SAAS,EAAQ,EAAU,CAEtD,KAAK,OAAO,KAAK,CACf,OAAQ,KAAK,IAAI,GACjB,UAAW,EAAS,EACpB,KAAM,IAGR,QAAQ,SAAS,UAAW,CAC1B,KAAK,WAGD,KAAK,SAAW,KAAK,OAAO,OAAS,GACvC,MAAK,QAAU,GAEf,KAAK,KAAK,WAEZ,KAAK,QAGT,GAAY,UAAU,MAAQ,SAAS,EAAM,EAAU,CAErD,GAAI,CAAC,KAAK,SACR,YAAK,KAAK,QAAS,GAAI,OAAM,wBACtB,GAGT,GAAI,GACJ,MAAI,QAAO,SAAS,GAClB,EAAa,EAGb,EAAa,GAAI,QAAO,EAAM,GAAY,KAAK,WAGjD,KAAK,SAAS,KAAK,GACnB,KAAK,WAAa,EAAW,OAE7B,KAAK,WAGD,KAAK,QAAU,KAAK,OAAO,SAAW,GACxC,MAAK,QAAU,IAGV,KAAK,UAAY,CAAC,KAAK,SAGhC,GAAY,UAAU,IAAM,SAAS,EAAM,EAAU,CASnD,AAPI,GACF,KAAK,MAAM,EAAM,GAGnB,KAAK,SAAW,GAGZ,EAAC,KAAK,UAKV,CAAI,KAAK,SAAS,SAAW,EAC3B,KAAK,OAGL,MAAK,SAAS,KAAK,MACnB,KAAK,cAIT,GAAY,UAAU,YAAc,GAAY,UAAU,IAE1D,GAAY,UAAU,KAAO,UAAW,CAEtC,AAAI,KAAK,OAAO,OAAS,GACvB,KAAK,KAAK,QACR,GAAI,OAAM,2DAId,KAAK,WAGP,GAAY,UAAU,QAAU,UAAW,CAEzC,AAAI,CAAC,KAAK,UAIV,MAAK,SAAW,GAChB,KAAK,OAAS,KACd,KAAK,SAAW,KAEhB,KAAK,KAAK,WAGZ,GAAY,UAAU,yBAA2B,SAAS,EAAM,CAE9D,KAAK,OAAO,QAGZ,GAAI,GAAa,KAAK,SAAS,GAG/B,AAAI,EAAW,OAAS,EAAK,OAE3B,MAAK,WAAa,EAAK,OACvB,KAAK,SAAS,GAAK,EAAW,MAAM,EAAK,QAEzC,EAAK,KAAK,KAAK,KAAM,EAAW,MAAM,EAAG,EAAK,UAK9C,MAAK,WAAa,EAAW,OAC7B,KAAK,SAAS,QAEd,EAAK,KAAK,KAAK,KAAM,KAIzB,GAAY,UAAU,aAAe,SAAS,EAAM,CAClD,KAAK,OAAO,QAOZ,OALI,GAAM,EACN,EAAQ,EACR,EAAO,GAAI,QAAO,EAAK,QAGpB,EAAM,EAAK,QAAQ,CAExB,GAAI,GAAM,KAAK,SAAS,KACpB,EAAM,KAAK,IAAI,EAAI,OAAQ,EAAK,OAAS,GAE7C,EAAI,KAAK,EAAM,EAAK,EAAG,GACvB,GAAO,EAGH,IAAQ,EAAI,QACd,MAAK,SAAS,EAAE,GAAS,EAAI,MAAM,IAKvC,AAAI,EAAQ,GACV,KAAK,SAAS,OAAO,EAAG,GAG1B,KAAK,WAAa,EAAK,OAEvB,EAAK,KAAK,KAAK,KAAM,IAGvB,GAAY,UAAU,SAAW,UAAW,CAE1C,GAAI,CAEF,KAAO,KAAK,UAAY,GAAK,KAAK,QAAU,KAAK,OAAO,OAAS,GAAG,CAElE,GAAI,GAAO,KAAK,OAAO,GAGvB,GAAI,EAAK,UACP,KAAK,yBAAyB,WAGvB,KAAK,WAAa,EAAK,OAG9B,KAAK,aAAa,OAKlB,OAIJ,AAAI,KAAK,UAAY,KAAK,SAAS,OAAS,GAAK,KAAK,SAAS,KAAO,MACpE,KAAK,aAGF,EAAP,CACE,KAAK,KAAK,QAAS,OC9MvB,2BAcA,GAAI,IAAc,CAChB,CACE,EAAG,CAAC,GACJ,EAAG,CAAC,IAEN,CACE,EAAG,CAAC,GACJ,EAAG,CAAC,IAEN,CACE,EAAG,CAAC,EAAG,GACP,EAAG,CAAC,IAEN,CACE,EAAG,CAAC,EAAG,GACP,EAAG,CAAC,EAAG,IAET,CACE,EAAG,CAAC,EAAG,EAAG,EAAG,GACb,EAAG,CAAC,EAAG,IAET,CACE,EAAG,CAAC,EAAG,EAAG,EAAG,GACb,EAAG,CAAC,EAAG,EAAG,EAAG,IAEf,CACE,EAAG,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACzB,EAAG,CAAC,EAAG,EAAG,EAAG,KAIjB,GAAQ,eAAiB,SAAS,EAAO,EAAQ,CAM/C,OALI,GAAS,GACT,EAAY,EAAQ,EACpB,EAAY,EAAS,EACrB,EAAY,GAAQ,GAAa,EACjC,EAAY,GAAS,GAAa,EAC7B,EAAI,EAAG,EAAI,GAAY,OAAQ,IAAK,CAI3C,OAHI,GAAO,GAAY,GACnB,EAAY,EAAW,EAAK,EAAE,OAC9B,EAAa,EAAW,EAAK,EAAE,OAC1B,EAAI,EAAG,EAAI,EAAK,EAAE,QACrB,EAAK,EAAE,GAAK,EADiB,IAE/B,IAMJ,IAAK,EAAI,EAAG,EAAI,EAAK,EAAE,QACjB,EAAK,EAAE,GAAK,EADa,IAE3B,IAMJ,AAAI,EAAY,GAAK,EAAa,GAChC,EAAO,KAAK,CAAE,MAAO,EAAW,OAAQ,EAAY,MAAO,IAG/D,MAAO,IAGT,GAAQ,qBAAuB,SAAS,EAAO,CAC7C,MAAO,UAAS,EAAG,EAAG,EAAM,CAC1B,GAAI,GAAiB,EAAI,GAAY,GAAM,EAAE,OACzC,EAAY,GAAI,GAAkB,GAAY,GAAM,EAAE,OAAU,EAAK,GAAY,GAAM,EAAE,GACzF,EAAiB,EAAI,GAAY,GAAM,EAAE,OACzC,EAAY,GAAI,GAAkB,GAAY,GAAM,EAAE,OAAU,EAAK,GAAY,GAAM,EAAE,GAC7F,MAAQ,GAAS,EAAM,EAAS,EAAQ,MCpF5C,gCAEA,GAAO,QAAU,SAAwB,EAAM,EAAO,EAAQ,CAE5D,GAAI,GAAQ,EAAO,EAAQ,EACvB,EAAQ,KAAK,IAAI,EAAQ,GACzB,EAAS,KAAK,IAAI,EAAQ,GAC1B,EAAU,KAAK,IAAI,EAAQ,GAE/B,MAAI,IAAS,GAAU,GAAS,EACvB,EAEL,GAAU,EACL,EAEF,KCfT,gCAEA,GAAI,IAAiB,KACjB,GAAiB,KAErB,YAAsB,EAAO,EAAK,EAAO,CACvC,GAAI,GAAY,EAAQ,EACxB,MAAI,KAAU,GACZ,GAAY,KAAK,KAAK,EAAa,GAAI,KAElC,EAGT,GAAI,IAAS,GAAO,QAAU,SAAS,EAAY,EAAc,CAE/D,GAAI,GAAQ,EAAW,MACnB,EAAS,EAAW,OACpB,EAAY,EAAW,UACvB,EAAM,EAAW,IACjB,EAAQ,EAAW,MAQvB,GANA,KAAK,KAAO,EAAa,KACzB,KAAK,MAAQ,EAAa,MAC1B,KAAK,SAAW,EAAa,SAE7B,KAAK,YAAc,EACnB,KAAK,QAAU,GACX,EAEF,OADI,GAAS,GAAe,eAAe,EAAO,GACzC,EAAI,EAAG,EAAI,EAAO,OAAQ,IACjC,KAAK,QAAQ,KAAK,CAChB,UAAW,GAAa,EAAO,GAAG,MAAO,EAAK,GAC9C,OAAQ,EAAO,GAAG,OAClB,UAAW,QAKf,MAAK,QAAQ,KAAK,CAChB,UAAW,GAAa,EAAO,EAAK,GACpC,OAAQ,EACR,UAAW,IAQf,AAAI,IAAU,EACZ,KAAK,aAAe,EAEjB,AAAI,IAAU,GACjB,KAAK,aAAe,EAAM,EAG1B,KAAK,aAAe,GAIxB,GAAO,UAAU,MAAQ,UAAW,CAClC,KAAK,KAAK,KAAK,QAAQ,KAAK,aAAa,UAAY,EAAG,KAAK,mBAAmB,KAAK,QAGvF,GAAO,UAAU,eAAiB,SAAS,EAAS,EAAgB,EAAW,CAK7E,OAHI,GAAc,KAAK,aACnB,EAAc,EAAc,EAEvB,EAAI,EAAG,EAAI,EAAW,IAAK,CAClC,GAAI,GAAU,EAAQ,EAAI,GACtB,EAAS,EAAI,EAAc,EAAe,EAAI,GAAe,EACjE,EAAe,GAAK,EAAU,IAIlC,GAAO,UAAU,eAAiB,SAAS,EAAS,EAAgB,EAAW,CAI7E,OAFI,GAAW,KAAK,UAEX,EAAI,EAAG,EAAI,EAAW,IAAK,CAClC,GAAI,GAAU,EAAQ,EAAI,GACtB,EAAO,EAAW,EAAS,GAAK,EACpC,EAAe,GAAK,EAAU,IAIlC,GAAO,UAAU,eAAiB,SAAS,EAAS,EAAgB,EAAW,CAM7E,OAJI,GAAc,KAAK,aACnB,EAAc,EAAc,EAC5B,EAAW,KAAK,UAEX,EAAI,EAAG,EAAI,EAAW,IAAK,CAClC,GAAI,GAAU,EAAQ,EAAI,GACtB,EAAO,EAAW,EAAS,GAAK,EAChC,EAAS,EAAI,EAAc,EAAe,EAAI,GAAe,EAC7D,EAAQ,KAAK,MAAO,GAAS,GAAQ,GACzC,EAAe,GAAK,EAAU,IAIlC,GAAO,UAAU,eAAiB,SAAS,EAAS,EAAgB,EAAW,CAM7E,OAJI,GAAc,KAAK,aACnB,EAAc,EAAc,EAC5B,EAAW,KAAK,UAEX,EAAI,EAAG,EAAI,EAAW,IAAK,CAClC,GAAI,GAAU,EAAQ,EAAI,GACtB,EAAO,EAAW,EAAS,GAAK,EAChC,EAAS,EAAI,EAAc,EAAe,EAAI,GAAe,EAC7D,EAAW,EAAI,GAAe,EAAW,EAAS,EAAI,GAAe,EACrE,EAAQ,GAAe,EAAQ,EAAM,GACzC,EAAe,GAAK,EAAU,IAIlC,GAAO,UAAU,mBAAqB,SAAS,EAAS,CAEtD,GAAI,GAAS,EAAQ,GACjB,EACA,EAAe,KAAK,QAAQ,KAAK,aACjC,EAAY,EAAa,UAE7B,GAAI,IAAW,EACb,EAAiB,EAAQ,MAAM,EAAG,EAAY,OAM9C,QAFA,EAAiB,GAAI,QAAO,GAEpB,OACD,GACH,KAAK,eAAe,EAAS,EAAgB,GAC7C,UACG,GACH,KAAK,eAAe,EAAS,EAAgB,GAC7C,UACG,GACH,KAAK,eAAe,EAAS,EAAgB,GAC7C,UACG,GACH,KAAK,eAAe,EAAS,EAAgB,GAC7C,cAEA,KAAM,IAAI,OAAM,8BAAgC,GAItD,KAAK,MAAM,GAEX,EAAa,YACb,AAAI,EAAa,WAAa,EAAa,OACzC,MAAK,UAAY,KACjB,KAAK,cACL,EAAe,KAAK,QAAQ,KAAK,cAGjC,KAAK,UAAY,EAGnB,AAAI,EAEF,KAAK,KAAK,EAAa,UAAY,EAAG,KAAK,mBAAmB,KAAK,OAGnE,MAAK,UAAY,KACjB,KAAK,eCxKT,gCAEA,GAAI,IAAO,QAAQ,QACf,GAAc,KACd,GAAS,KAGT,GAAc,GAAO,QAAU,SAAS,EAAY,CACtD,GAAY,KAAK,MAEjB,GAAI,GAAU,GACV,EAAO,KACX,KAAK,QAAU,GAAI,IAAO,EAAY,CACpC,KAAM,KAAK,KAAK,KAAK,MACrB,MAAO,SAAS,EAAQ,CACtB,EAAQ,KAAK,IAEf,SAAU,UAAW,CACnB,EAAK,KAAK,WAAY,OAAO,OAAO,OAIxC,KAAK,QAAQ,SAEf,GAAK,SAAS,GAAa,MCxB3B,gCAGA,GAAO,QAAU,CAEf,cAAe,CAAC,IAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,IAE1D,UAAW,WACX,UAAW,WACX,UAAW,WACX,UAAW,WACX,UAAW,WACX,UAAW,WAGX,oBAAqB,EACrB,kBAAmB,EACnB,gBAAiB,EACjB,gBAAiB,EAGjB,wBAAyB,EACzB,sBAAuB,EAEvB,qBAAsB,CACpB,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,GAGL,eAAgB,OChClB,gCAEA,GAAI,IAAW,GAEf,AAAC,WAAW,CACV,OAAS,GAAI,EAAG,EAAI,IAAK,IAAK,CAE5B,OADI,GAAa,EACR,EAAI,EAAG,EAAI,EAAG,IACrB,AAAI,EAAa,EACf,EAAa,WAAc,IAAe,EAG1C,EAAa,IAAe,EAGhC,GAAS,GAAK,OAIlB,GAAI,IAAgB,GAAO,QAAU,UAAW,CAC9C,KAAK,KAAO,IAGd,GAAc,UAAU,MAAQ,SAAS,EAAM,CAE7C,OAAS,GAAI,EAAG,EAAI,EAAK,OAAQ,IAC/B,KAAK,KAAO,GAAU,MAAK,KAAO,EAAK,IAAM,KAAS,KAAK,OAAS,EAEtE,MAAO,IAGT,GAAc,UAAU,MAAQ,UAAW,CACzC,MAAO,MAAK,KAAO,IAIrB,GAAc,MAAQ,SAAS,EAAK,CAGlC,OADI,GAAM,GACD,EAAI,EAAG,EAAI,EAAI,OAAQ,IAC9B,EAAM,GAAU,GAAM,EAAI,IAAM,KAAS,IAAQ,EAEnD,MAAO,GAAM,MC1Cf,gCAEA,GAAI,IAAY,KACZ,GAAgB,KAGhB,GAAS,GAAO,QAAU,SAAS,EAAS,EAAc,CAE5D,KAAK,SAAW,EAChB,EAAQ,SAAW,EAAQ,WAAa,GAExC,KAAK,SAAW,GAChB,KAAK,SAAW,GAGhB,KAAK,SAAW,GAChB,KAAK,WAAa,EAElB,KAAK,QAAU,GACf,KAAK,QAAQ,GAAU,WAAa,KAAK,YAAY,KAAK,MAC1D,KAAK,QAAQ,GAAU,WAAa,KAAK,YAAY,KAAK,MAC1D,KAAK,QAAQ,GAAU,WAAa,KAAK,YAAY,KAAK,MAC1D,KAAK,QAAQ,GAAU,WAAa,KAAK,YAAY,KAAK,MAC1D,KAAK,QAAQ,GAAU,WAAa,KAAK,YAAY,KAAK,MAC1D,KAAK,QAAQ,GAAU,WAAa,KAAK,YAAY,KAAK,MAE1D,KAAK,KAAO,EAAa,KACzB,KAAK,MAAQ,EAAa,MAC1B,KAAK,SAAW,EAAa,SAC7B,KAAK,MAAQ,EAAa,MAC1B,KAAK,WAAa,EAAa,WAC/B,KAAK,QAAU,EAAa,QAC5B,KAAK,OAAS,EAAa,OAC3B,KAAK,YAAc,EAAa,YAChC,KAAK,YAAc,EAAa,YAChC,KAAK,SAAW,EAAa,UAG/B,GAAO,UAAU,MAAQ,UAAW,CAClC,KAAK,KAAK,GAAU,cAAc,OAChC,KAAK,gBAAgB,KAAK,QAI9B,GAAO,UAAU,gBAAkB,SAAS,EAAM,CAIhD,OAFI,GAAY,GAAU,cAEjB,EAAI,EAAG,EAAI,EAAU,OAAQ,IACpC,GAAI,EAAK,KAAO,EAAU,GAAI,CAC5B,KAAK,MAAM,GAAI,OAAM,2BACrB,OAGJ,KAAK,KAAK,EAAG,KAAK,iBAAiB,KAAK,QAG1C,GAAO,UAAU,iBAAmB,SAAS,EAAM,CAQjD,OALI,GAAS,EAAK,aAAa,GAG3B,EAAO,EAAK,aAAa,GACzB,EAAO,GACF,EAAI,EAAG,EAAI,EAAG,IACrB,GAAQ,OAAO,aAAa,EAAK,IAMnC,GAAI,GAAY,QAAQ,EAAK,GAAK,IAIlC,GAAI,CAAC,KAAK,UAAY,IAAS,GAAU,UAAW,CAClD,KAAK,MAAM,GAAI,OAAM,+BACrB,OAMF,GAHA,KAAK,KAAO,GAAI,IAChB,KAAK,KAAK,MAAM,GAAI,QAAO,IAEvB,KAAK,QAAQ,GACf,MAAO,MAAK,QAAQ,GAAM,GAG5B,GAAI,CAAC,EAAW,CACd,KAAK,MAAM,GAAI,OAAM,mCAAqC,IAC1D,OAGF,KAAK,KAAK,EAAS,EAAG,KAAK,WAAW,KAAK,QAG7C,GAAO,UAAU,WAAa,UAAmB,CAC/C,KAAK,KAAK,EAAG,KAAK,iBAAiB,KAAK,QAG1C,GAAO,UAAU,gBAAkB,UAAW,CAC5C,KAAK,KAAK,EAAG,KAAK,eAAe,KAAK,QAGxC,GAAO,UAAU,eAAiB,SAAS,EAAM,CAE/C,GAAI,GAAU,EAAK,YAAY,GAC3B,EAAU,KAAK,KAAK,QAGxB,GAAI,KAAK,SAAS,UAAY,IAAY,EAAS,CACjD,KAAK,MAAM,GAAI,OAAM,eAAiB,EAAU,MAAQ,IACxD,OAGF,AAAK,KAAK,UACR,KAAK,KAAK,EAAG,KAAK,iBAAiB,KAAK,QAI5C,GAAO,UAAU,YAAc,SAAS,EAAQ,CAC9C,KAAK,KAAK,EAAQ,KAAK,WAAW,KAAK,QAEzC,GAAO,UAAU,WAAa,SAAS,EAAM,CAE3C,KAAK,KAAK,MAAM,GAEhB,GAAI,GAAQ,EAAK,aAAa,GAC1B,EAAS,EAAK,aAAa,GAC3B,EAAQ,EAAK,GACb,EAAY,EAAK,GACjB,EAAQ,EAAK,IACb,EAAS,EAAK,IACd,EAAY,EAAK,IAOrB,GAAI,IAAU,GAAK,IAAU,GAAK,IAAU,GAAK,IAAU,GAAK,IAAU,GAAI,CAC5E,KAAK,MAAM,GAAI,OAAM,yBAA2B,IAChD,OAEF,GAAI,CAAE,KAAa,IAAU,sBAAuB,CAClD,KAAK,MAAM,GAAI,OAAM,2BACrB,OAEF,GAAI,IAAU,EAAG,CACf,KAAK,MAAM,GAAI,OAAM,mCACrB,OAEF,GAAI,IAAW,EAAG,CAChB,KAAK,MAAM,GAAI,OAAM,8BACrB,OAEF,GAAI,IAAc,GAAK,IAAc,EAAG,CACtC,KAAK,MAAM,GAAI,OAAM,iCACrB,OAGF,KAAK,WAAa,EAElB,GAAI,GAAM,GAAU,qBAAqB,KAAK,YAE9C,KAAK,SAAW,GAEhB,KAAK,SAAS,CACZ,MAAO,EACP,OAAQ,EACR,MAAO,EACP,UAAW,QAAQ,GACnB,QAAS,QAAQ,EAAY,GAAU,mBACvC,MAAO,QAAQ,EAAY,GAAU,iBACrC,MAAO,QAAQ,EAAY,GAAU,iBACrC,IAAK,EACL,UAAW,IAGb,KAAK,mBAIP,GAAO,UAAU,YAAc,SAAS,EAAQ,CAC9C,KAAK,KAAK,EAAQ,KAAK,WAAW,KAAK,QAEzC,GAAO,UAAU,WAAa,SAAS,EAAM,CAE3C,KAAK,KAAK,MAAM,GAKhB,OAHI,GAAU,KAAK,MAAM,EAAK,OAAS,GAG9B,EAAI,EAAG,EAAI,EAAS,IAC3B,KAAK,SAAS,KAAK,CACjB,EAAK,EAAI,GACT,EAAK,EAAI,EAAI,GACb,EAAK,EAAI,EAAI,GACb,MAIJ,KAAK,QAAQ,KAAK,UAElB,KAAK,mBAGP,GAAO,UAAU,YAAc,SAAS,EAAQ,CAC9C,KAAK,KAAK,EAAQ,KAAK,WAAW,KAAK,QAEzC,GAAO,UAAU,WAAa,SAAS,EAAM,CAK3C,GAHA,KAAK,KAAK,MAAM,GAGZ,KAAK,aAAe,GAAU,wBAAyB,CACzD,GAAI,KAAK,SAAS,SAAW,EAAG,CAC9B,KAAK,MAAM,GAAI,OAAM,6CACrB,OAEF,GAAI,EAAK,OAAS,KAAK,SAAS,OAAQ,CACtC,KAAK,MAAM,GAAI,OAAM,8CACrB,OAEF,OAAS,GAAI,EAAG,EAAI,EAAK,OAAQ,IAC/B,KAAK,SAAS,GAAG,GAAK,EAAK,GAE7B,KAAK,QAAQ,KAAK,UAKpB,AAAI,KAAK,aAAe,GAAU,qBAEhC,KAAK,WAAW,CAAC,EAAK,aAAa,KAEjC,KAAK,aAAe,GAAU,iBAChC,KAAK,WAAW,CAAC,EAAK,aAAa,GAAI,EAAK,aAAa,GAAI,EAAK,aAAa,KAGjF,KAAK,mBAGP,GAAO,UAAU,YAAc,SAAS,EAAQ,CAC9C,KAAK,KAAK,EAAQ,KAAK,WAAW,KAAK,QAEzC,GAAO,UAAU,WAAa,SAAS,EAAM,CAE3C,KAAK,KAAK,MAAM,GAChB,KAAK,MAAM,EAAK,aAAa,GAAK,GAAU,gBAE5C,KAAK,mBAGP,GAAO,UAAU,YAAc,SAAS,EAAQ,CAC9C,KAAK,KAAK,CAAC,EAAQ,KAAK,WAAW,KAAK,KAAM,KAEhD,GAAO,UAAU,WAAa,SAAS,EAAQ,EAAM,CAInD,GAFA,KAAK,KAAK,MAAM,GAEZ,KAAK,aAAe,GAAU,yBAA2B,KAAK,SAAS,SAAW,EACpF,KAAM,IAAI,OAAM,8BAGlB,KAAK,YAAY,GACjB,GAAI,GAAiB,EAAS,EAAK,OAEnC,AAAI,EAAiB,EACnB,KAAK,YAAY,GAGjB,KAAK,mBAIT,GAAO,UAAU,YAAc,SAAS,EAAQ,CAC9C,KAAK,KAAK,EAAQ,KAAK,WAAW,KAAK,QAEzC,GAAO,UAAU,WAAa,SAAS,EAAM,CAE3C,KAAK,KAAK,MAAM,GAEhB,KAAK,SAAW,GAChB,KAAK,kBAED,KAAK,UACP,KAAK,cC/RT,2BAEA,GAAI,IAAiB,KAEjB,GAAc,CAChB,EAAG,CACD,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,KAEL,EAAG,CACD,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,GAEL,EAAG,CACD,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,KAEL,EAAG,CACD,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,IAIP,YAAsB,EAAM,EAAO,CAEjC,GAAI,GAAW,GACX,EAAI,EAER,YAAiB,CACf,GAAI,IAAM,EAAK,OACb,KAAM,IAAI,OAAM,mBAElB,GAAI,GAAO,EAAK,GAChB,IACA,GAAI,GAAO,EAAO,EAAO,EAAO,EAAO,EAAO,EAAO,EACrD,OAAQ,WAEJ,KAAM,IAAI,OAAM,0BACb,IACH,EAAQ,EAAK,GACb,IACA,EAAS,KAAO,IAAQ,GAAK,GAC7B,UACG,GACH,EAAQ,EAAO,GACf,EAAQ,GAAQ,EAChB,EAAS,KAAK,EAAO,GACrB,UACG,GACH,EAAQ,EAAO,EACf,EAAQ,GAAQ,EAAI,EACpB,EAAQ,GAAQ,EAAI,EACpB,EAAQ,GAAQ,EAAI,EACpB,EAAS,KAAK,EAAO,EAAO,EAAO,GACnC,UACG,GACH,EAAQ,EAAO,EACf,EAAQ,GAAQ,EAAI,EACpB,EAAQ,GAAQ,EAAI,EACpB,EAAQ,GAAQ,EAAI,EACpB,EAAQ,GAAQ,EAAI,EACpB,EAAQ,GAAQ,EAAI,EACpB,EAAQ,GAAQ,EAAI,EACpB,EAAQ,GAAQ,EAAI,EACpB,EAAS,KAAK,EAAO,EAAO,EAAO,EAAO,EAAO,EAAO,EAAO,GAC/D,OAIN,MAAO,CACL,IAAK,SAAS,EAAO,CACnB,KAAO,EAAS,OAAS,GACvB,IAEF,GAAI,GAAW,EAAS,MAAM,EAAG,GACjC,SAAW,EAAS,MAAM,GACnB,GAET,eAAgB,UAAW,CACzB,EAAS,OAAS,GAEpB,IAAK,UAAW,CACd,GAAI,IAAM,EAAK,OACb,KAAM,IAAI,OAAM,sBAMxB,YAAsB,EAAO,EAAQ,EAAU,EAAK,EAAM,EAAQ,CAIhE,OAHI,GAAa,EAAM,MACnB,EAAc,EAAM,OACpB,EAAY,EAAM,MACb,EAAI,EAAG,EAAI,EAAa,IAC/B,OAAS,GAAI,EAAG,EAAI,EAAY,IAAK,CAGnC,OAFI,GAAQ,EAAS,EAAG,EAAG,GAElB,EAAI,EAAG,EAAI,EAAG,IAAK,CAC1B,GAAI,GAAM,GAAY,GAAK,GAC3B,GAAI,IAAM,EAAK,OACb,KAAM,IAAI,OAAM,mBAElB,EAAO,EAAQ,GAAK,IAAQ,IAAO,EAAK,EAAM,GAAU,IAE1D,GAAU,EAGd,MAAO,GAGT,YAA2B,EAAO,EAAQ,EAAU,EAAK,EAAM,EAAQ,CAIrE,OAHI,GAAa,EAAM,MACnB,EAAc,EAAM,OACpB,EAAY,EAAM,MACb,EAAI,EAAG,EAAI,EAAa,IAAK,CACpC,OAAS,GAAI,EAAG,EAAI,EAAY,IAI9B,OAHI,GAAY,EAAK,IAAI,GACrB,EAAQ,EAAS,EAAG,EAAG,GAElB,EAAI,EAAG,EAAI,EAAG,IAAK,CAC1B,GAAI,GAAM,GAAY,GAAK,GAC3B,EAAO,EAAQ,GAAK,IAAQ,IAAO,EAAU,GAAO,EAGxD,EAAK,kBAIT,GAAQ,aAAe,SAAS,EAAM,EAAY,CAEhD,GAAI,GAAQ,EAAW,MACnB,EAAS,EAAW,OACpB,EAAQ,EAAW,MACnB,EAAM,EAAW,IACjB,EAAY,EAAW,UAE3B,GAAI,IAAU,EACZ,GAAI,GAAO,GAAa,EAAM,GAEhC,GAAI,GACJ,AAAI,GAAS,EACX,EAAS,GAAI,QAAO,EAAQ,EAAS,GAGrC,EAAS,GAAI,aAAY,EAAQ,EAAS,GAE5C,GAAI,GAAS,KAAK,IAAI,EAAG,GAAS,EAC9B,EAAS,EACT,EACA,EAEJ,GAAI,EACF,EAAS,GAAe,eAAe,EAAO,GAC9C,EAAW,GAAe,qBAAqB,EAAO,OAEnD,CACH,GAAI,GAAqB,EACzB,EAAW,UAAW,CACpB,GAAI,GAAW,EACf,UAAsB,EACf,GAET,EAAS,CAAC,CAAE,MAAO,EAAO,OAAQ,IAGpC,OAAS,GAAa,EAAG,EAAa,EAAO,OAAQ,IACnD,AAAI,IAAU,EACZ,EAAS,GAAa,EAAO,GAAa,EAAQ,EAAU,EAAK,EAAM,GAGvE,GAAkB,EAAO,GAAa,EAAQ,EAAU,EAAK,EAAM,GAGvE,GAAI,IAAU,GACZ,GAAI,IAAW,EAAK,OAClB,KAAM,IAAI,OAAM,wBAIlB,GAAK,MAGP,MAAO,MC9LT,gCAEA,YAAmB,EAAQ,EAAS,EAAO,EAAQ,EAAS,CAG1D,OAFI,GAAQ,EAEH,EAAI,EAAG,EAAI,EAAQ,IAC1B,OAAS,GAAI,EAAG,EAAI,EAAO,IAAK,CAC9B,GAAI,GAAQ,EAAQ,EAAO,IAE3B,GAAI,CAAC,EACH,KAAM,IAAI,OAAM,SAAW,EAAO,GAAS,mBAG7C,OAAS,GAAI,EAAG,EAAI,EAAG,IACrB,EAAQ,EAAQ,GAAK,EAAM,GAE7B,GAAS,GAKf,YAAiC,EAAQ,EAAS,EAAO,EAAQ,EAAY,CAE3E,OADI,GAAQ,EACH,EAAI,EAAG,EAAI,EAAQ,IAC1B,OAAS,GAAI,EAAG,EAAI,EAAO,IAAK,CAC9B,GAAI,GAAY,GAUhB,GARA,AAAI,EAAW,SAAW,EACpB,EAAW,KAAO,EAAO,IAC3B,GAAY,IAGP,EAAW,KAAO,EAAO,IAAU,EAAW,KAAO,EAAO,EAAQ,IAAM,EAAW,KAAO,EAAO,EAAQ,IAClH,GAAY,IAEV,EACF,OAAS,GAAI,EAAG,EAAI,EAAG,IACrB,EAAQ,EAAQ,GAAK,EAGzB,GAAS,GAKf,YAAoB,EAAQ,EAAS,EAAO,EAAQ,EAAO,CAKzD,OAJI,GAAe,IACf,EAAc,KAAK,IAAI,EAAG,GAAS,EACnC,EAAQ,EAEH,EAAI,EAAG,EAAI,EAAQ,IAC1B,OAAS,GAAI,EAAG,EAAI,EAAO,IAAK,CAC9B,OAAS,GAAI,EAAG,EAAI,EAAG,IACrB,EAAQ,EAAQ,GAAK,KAAK,MAAO,EAAO,EAAQ,GAAK,EAAgB,EAAc,IAErF,GAAS,GAKf,GAAO,QAAU,SAAS,EAAQ,EAAW,CAE3C,GAAI,GAAQ,EAAU,MAClB,EAAQ,EAAU,MAClB,EAAS,EAAU,OACnB,EAAY,EAAU,UACtB,EAAa,EAAU,WACvB,EAAU,EAAU,QAEpB,EAAU,EAEd,MAAI,KAAc,EAChB,GAAU,EAAQ,EAAS,EAAO,EAAQ,GAGtC,IACF,GAAwB,EAAQ,EAAS,EAAO,EAAQ,GAGtD,IAAU,GAER,KAAU,IACZ,GAAU,GAAI,QAAO,EAAQ,EAAS,IAExC,GAAW,EAAQ,EAAS,EAAO,EAAQ,KAGxC,KCvFT,gCAEA,GAAI,IAAO,QAAQ,QACf,GAAO,QAAQ,QACf,GAAc,KACd,GAAc,KACd,GAAS,KACT,GAAY,KACZ,GAAmB,KAEnB,GAAc,GAAO,QAAU,SAAS,EAAS,CACnD,GAAY,KAAK,MAEjB,KAAK,QAAU,GAAI,IAAO,EAAS,CACjC,KAAM,KAAK,KAAK,KAAK,MACrB,MAAO,KAAK,aAAa,KAAK,MAC9B,SAAU,KAAK,gBAAgB,KAAK,MACpC,MAAO,KAAK,KAAK,KAAK,KAAM,SAC5B,QAAS,KAAK,eAAe,KAAK,MAClC,WAAY,KAAK,kBAAkB,KAAK,MACxC,SAAU,KAAK,UAAU,KAAK,MAC9B,YAAa,KAAK,aAAa,KAAK,QAEtC,KAAK,SAAW,EAChB,KAAK,SAAW,GAEhB,KAAK,QAAQ,SAEf,GAAK,SAAS,GAAa,IAG3B,GAAY,UAAU,aAAe,SAAS,EAAK,CAEjD,KAAK,KAAK,QAAS,GAEnB,KAAK,SAAW,GAEhB,KAAK,UAED,KAAK,UAAY,KAAK,SAAS,SACjC,KAAK,SAAS,UAGhB,KAAK,OAAS,IAGhB,GAAY,UAAU,aAAe,SAAS,EAAM,CAClD,AAAK,KAAK,UACR,MAAK,SAAW,GAAK,gBAErB,KAAK,SAAS,GAAG,QAAS,KAAK,KAAK,KAAK,KAAM,UAC/C,KAAK,QAAQ,GAAG,WAAY,KAAK,UAAU,KAAK,OAEhD,KAAK,SAAS,KAAK,KAAK,UAE1B,KAAK,SAAS,MAAM,IAGtB,GAAY,UAAU,gBAAkB,SAAS,EAAU,CAEzD,KAAK,KAAK,WAAY,GAEtB,KAAK,YAAc,OAAO,OAAO,GAEjC,KAAK,QAAU,GAAI,IAAY,KAAK,cAGtC,GAAY,UAAU,kBAAoB,SAAS,EAAY,CAC7D,KAAK,YAAY,WAAa,GAGhC,GAAY,UAAU,eAAiB,SAAS,EAAS,CACvD,KAAK,YAAY,QAAU,GAI7B,GAAY,UAAU,UAAY,UAAW,CAC3C,AAAI,KAAK,QAIT,CAAK,KAAK,SAKR,KAAK,SAAS,MAJd,KAAK,KAAK,QAAS,oBAMrB,KAAK,gBAGP,GAAY,UAAU,UAAY,SAAS,EAAc,CAEvD,GAAI,MAAK,OAIT,IAAI,CACF,GAAI,GAAa,GAAU,aAAa,EAAc,KAAK,aAEvD,EAAuB,GAAiB,EAAY,KAAK,aAC7D,EAAa,WAER,EAAP,CACE,KAAK,aAAa,GAClB,OAGF,KAAK,KAAK,SAAU,OC5GtB,gCAEA,GAAI,IAAY,KAEhB,GAAO,QAAU,SAAS,EAAM,EAAO,EAAQ,EAAS,CACtD,GAAI,GAAc,EAAQ,YAAc,GAAU,sBAIlD,GAHI,EAAQ,eAAiB,GAGzB,CAAC,EAAQ,eAAiB,CAAC,EAC7B,MAAO,GAGT,GAAI,GAAS,EAAc,EAAI,EAC3B,EAAU,GAAI,QAAO,EAAQ,EAAS,GACtC,EAAQ,EAAQ,cAAgB,EAAI,EACpC,EAAU,EACV,EAAW,EAEX,EAAU,EAAQ,SAAW,GACjC,AAAI,EAAQ,MAAQ,QAClB,GAAQ,IAAM,KAEZ,EAAQ,QAAU,QACpB,GAAQ,MAAQ,KAEd,EAAQ,OAAS,QACnB,GAAQ,KAAO,KAGjB,OAAS,GAAI,EAAG,EAAI,EAAQ,IAC1B,OAAS,GAAI,EAAG,EAAI,EAAO,IAAK,CAC9B,GAAI,GAAM,EAAK,GACX,EAAQ,EAAK,EAAU,GACvB,EAAO,EAAK,EAAU,GAEtB,EACJ,AAAI,EAAQ,cACV,GAAQ,EAAK,EAAU,GAClB,GACH,IAAS,IACT,EAAM,KAAK,IAAI,KAAK,IAAI,KAAK,MAAO,GAAI,GAAS,EAAQ,IAAM,EAAQ,GAAM,GAAI,KACjF,EAAQ,KAAK,IAAI,KAAK,IAAI,KAAK,MAAO,GAAI,GAAS,EAAQ,MAAQ,EAAQ,GAAQ,GAAI,KACvF,EAAO,KAAK,IAAI,KAAK,IAAI,KAAK,MAAO,GAAI,GAAS,EAAQ,KAAO,EAAQ,GAAO,GAAI,OAItF,EAAQ,IAGV,EAAQ,GAAY,EACpB,EAAQ,EAAW,GAAK,EACxB,EAAQ,EAAW,GAAK,EACpB,GACF,GAAQ,EAAW,GAAK,GAG1B,GAAW,EACX,GAAY,EAIhB,MAAO,MC9DT,gCAEA,GAAI,IAAiB,KAErB,YAAoB,EAAQ,EAAO,EAAW,EAAS,EAAQ,CAC7D,EAAO,KAAK,EAAS,EAAQ,EAAO,EAAQ,GAG9C,YAAuB,EAAQ,EAAO,EAAW,CAK/C,OAHI,GAAM,EACN,EAAS,EAAQ,EAEZ,EAAI,EAAO,EAAI,EAAQ,IAC9B,GAAO,KAAK,IAAI,EAAO,IAEzB,MAAO,GAGT,YAAmB,EAAQ,EAAO,EAAW,EAAS,EAAQ,EAAK,CAEjE,OAAS,GAAI,EAAG,EAAI,EAAW,IAAK,CAElC,GAAI,GAAO,GAAK,EAAM,EAAO,EAAQ,EAAI,GAAO,EAC5C,EAAM,EAAO,EAAQ,GAAK,EAE9B,EAAQ,EAAS,GAAK,GAI1B,YAAsB,EAAQ,EAAO,EAAW,EAAK,CAGnD,OADI,GAAM,EACD,EAAI,EAAG,EAAI,EAAW,IAAK,CAElC,GAAI,GAAO,GAAK,EAAM,EAAO,EAAQ,EAAI,GAAO,EAC5C,EAAM,EAAO,EAAQ,GAAK,EAE9B,GAAO,KAAK,IAAI,GAGlB,MAAO,GAGT,YAAkB,EAAQ,EAAO,EAAW,EAAS,EAAQ,CAE3D,OAAS,GAAI,EAAG,EAAI,EAAW,IAAK,CAElC,GAAI,GAAK,EAAQ,EAAI,EAAO,EAAQ,EAAI,GAAa,EACjD,EAAM,EAAO,EAAQ,GAAK,EAE9B,EAAQ,EAAS,GAAK,GAI1B,YAAqB,EAAQ,EAAO,EAAW,CAI7C,OAFI,GAAM,EACN,EAAS,EAAQ,EACZ,EAAI,EAAO,EAAI,EAAQ,IAAK,CAEnC,GAAI,GAAK,EAAQ,EAAI,EAAO,EAAI,GAAa,EACzC,EAAM,EAAO,GAAK,EAEtB,GAAO,KAAK,IAAI,GAGlB,MAAO,GAGT,YAAmB,EAAQ,EAAO,EAAW,EAAS,EAAQ,EAAK,CAEjE,OAAS,GAAI,EAAG,EAAI,EAAW,IAAK,CAElC,GAAI,GAAO,GAAK,EAAM,EAAO,EAAQ,EAAI,GAAO,EAC5C,EAAK,EAAQ,EAAI,EAAO,EAAQ,EAAI,GAAa,EACjD,EAAM,EAAO,EAAQ,GAAO,GAAO,GAAO,GAE9C,EAAQ,EAAS,GAAK,GAI1B,YAAsB,EAAQ,EAAO,EAAW,EAAK,CAGnD,OADI,GAAM,EACD,EAAI,EAAG,EAAI,EAAW,IAAK,CAElC,GAAI,GAAO,GAAK,EAAM,EAAO,EAAQ,EAAI,GAAO,EAC5C,EAAK,EAAQ,EAAI,EAAO,EAAQ,EAAI,GAAa,EACjD,EAAM,EAAO,EAAQ,GAAO,GAAO,GAAO,GAE9C,GAAO,KAAK,IAAI,GAGlB,MAAO,GAGT,YAAqB,EAAQ,EAAO,EAAW,EAAS,EAAQ,EAAK,CAEnE,OAAS,GAAI,EAAG,EAAI,EAAW,IAAK,CAElC,GAAI,GAAO,GAAK,EAAM,EAAO,EAAQ,EAAI,GAAO,EAC5C,EAAK,EAAQ,EAAI,EAAO,EAAQ,EAAI,GAAa,EACjD,EAAS,EAAQ,GAAK,GAAK,EAAM,EAAO,EAAQ,EAAK,GAAY,IAAQ,EACzE,EAAM,EAAO,EAAQ,GAAK,GAAe,EAAM,EAAI,GAEvD,EAAQ,EAAS,GAAK,GAI1B,YAAwB,EAAQ,EAAO,EAAW,EAAK,CAErD,OADI,GAAM,EACD,EAAI,EAAG,EAAI,EAAW,IAAK,CAElC,GAAI,GAAO,GAAK,EAAM,EAAO,EAAQ,EAAI,GAAO,EAC5C,EAAK,EAAQ,EAAI,EAAO,EAAQ,EAAI,GAAa,EACjD,EAAS,EAAQ,GAAK,GAAK,EAAM,EAAO,EAAQ,EAAK,GAAY,IAAQ,EACzE,EAAM,EAAO,EAAQ,GAAK,GAAe,EAAM,EAAI,GAEvD,GAAO,KAAK,IAAI,GAGlB,MAAO,GAGT,GAAI,IAAU,CACZ,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,IAGD,GAAa,CACf,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,IAGL,GAAO,QAAU,SAAS,EAAQ,EAAO,EAAQ,EAAS,EAAK,CAE7D,GAAI,GACJ,GAAI,CAAE,eAAgB,KAAY,EAAQ,aAAe,GACvD,EAAc,CAAC,EAAG,EAAG,EAAG,EAAG,WAEpB,MAAO,GAAQ,YAAe,SACrC,EAAc,CAAC,EAAQ,gBAGvB,MAAM,IAAI,OAAM,6BASlB,OANI,GAAY,EAAQ,EACpB,EAAS,EACT,EAAQ,EACR,EAAU,GAAI,QAAQ,GAAY,GAAK,GACvC,EAAM,EAAY,GAEb,EAAI,EAAG,EAAI,EAAQ,IAAK,CAE/B,GAAI,EAAY,OAAS,EAIvB,OAFI,GAAM,IAED,EAAI,EAAG,EAAI,EAAY,OAAQ,IAAK,CAC3C,GAAI,GAAM,GAAW,EAAY,IAAI,EAAQ,EAAO,EAAW,GAC/D,AAAI,EAAM,GACR,GAAM,EAAY,GAClB,EAAM,GAKZ,EAAQ,GAAU,EAClB,IACA,GAAQ,GAAK,EAAQ,EAAO,EAAW,EAAS,EAAQ,GACxD,GAAU,EACV,GAAS,EAEX,MAAO,MCrLT,gCAEA,GAAI,IAAY,KACZ,GAAY,KACZ,GAAY,KACZ,GAAS,KACT,GAAO,QAAQ,QAEf,GAAS,GAAO,QAAU,SAAS,EAAS,CAW9C,GAVA,KAAK,SAAW,EAEhB,EAAQ,iBAAmB,EAAQ,kBAAoB,GAAK,KAC5D,EAAQ,aAAe,EAAQ,cAAgB,KAAO,EAAQ,aAAe,EAC7E,EAAQ,gBAAkB,EAAQ,iBAAmB,KAAO,EAAQ,gBAAkB,EACtF,EAAQ,cAAgB,EAAQ,eAAiB,KAAO,EAAQ,cAAgB,GAChF,EAAQ,eAAiB,EAAQ,gBAAkB,GAAK,cACxD,EAAQ,SAAW,EAAQ,UAAY,EACvC,EAAQ,UAAa,MAAO,GAAQ,WAAc,SAAY,EAAQ,UAAY,GAAU,sBAExF,EAAQ,YAAc,GAAU,iBAAmB,EAAQ,YAAc,GAAU,sBACrF,KAAM,IAAI,OAAM,qBAAuB,EAAQ,UAAY,gCAE7D,GAAI,EAAQ,WAAa,EACvB,KAAM,IAAI,OAAM,oBAAsB,EAAQ,SAAW,iCAI7D,GAAO,UAAU,kBAAoB,UAAW,CAC9C,MAAO,CACL,UAAW,KAAK,SAAS,iBACzB,MAAO,KAAK,SAAS,aACrB,SAAU,KAAK,SAAS,kBAI5B,GAAO,UAAU,cAAgB,UAAW,CAC1C,MAAO,MAAK,SAAS,eAAe,KAAK,sBAG3C,GAAO,UAAU,WAAa,SAAS,EAAM,EAAO,EAAQ,CAE1D,GAAI,GAAa,GAAU,EAAM,EAAO,EAAQ,KAAK,UAGjD,EAAM,GAAU,qBAAqB,KAAK,SAAS,WACnD,EAAe,GAAO,EAAY,EAAO,EAAQ,KAAK,SAAU,GACpE,MAAO,IAGT,GAAO,UAAU,WAAa,SAAS,EAAM,EAAM,CAEjD,GAAI,GAAO,EAAO,EAAK,OAAS,EAC5B,EAAM,GAAI,QAAO,EAAM,IAE3B,SAAI,cAAc,EAAK,GACvB,EAAI,cAAc,EAAM,GAEpB,GACF,EAAK,KAAK,EAAK,GAGjB,EAAI,aAAa,GAAU,MAAM,EAAI,MAAM,EAAG,EAAI,OAAS,IAAK,EAAI,OAAS,GACtE,GAGT,GAAO,UAAU,SAAW,SAAS,EAAO,CAC1C,GAAI,GAAM,GAAI,QAAO,GACrB,SAAI,cAAc,KAAK,MAAM,EAAQ,GAAU,gBAAiB,GACzD,KAAK,WAAW,GAAU,UAAW,IAG9C,GAAO,UAAU,SAAW,SAAS,EAAO,EAAQ,CAElD,GAAI,GAAM,GAAI,QAAO,IACrB,SAAI,cAAc,EAAO,GACzB,EAAI,cAAc,EAAQ,GAC1B,EAAI,GAAK,KAAK,SAAS,SACvB,EAAI,GAAK,KAAK,SAAS,UACvB,EAAI,IAAM,EACV,EAAI,IAAM,EACV,EAAI,IAAM,EAEH,KAAK,WAAW,GAAU,UAAW,IAG9C,GAAO,UAAU,SAAW,SAAS,EAAM,CACzC,MAAO,MAAK,WAAW,GAAU,UAAW,IAG9C,GAAO,UAAU,SAAW,UAAW,CACrC,MAAO,MAAK,WAAW,GAAU,UAAW,SC1F9C,gCAEA,GAAI,IAAO,QAAQ,QACf,GAAS,QAAQ,UACjB,GAAY,KACZ,GAAS,KAET,GAAc,GAAO,QAAU,SAAS,EAAK,CAC/C,GAAO,KAAK,MAEZ,GAAI,GAAU,GAAO,GAErB,KAAK,QAAU,GAAI,IAAO,GAC1B,KAAK,SAAW,KAAK,QAAQ,gBAE7B,KAAK,SAAW,IAElB,GAAK,SAAS,GAAa,IAG3B,GAAY,UAAU,KAAO,SAAS,EAAM,EAAO,EAAQ,EAAO,CAEhE,KAAK,KAAK,OAAQ,GAAI,QAAO,GAAU,gBACvC,KAAK,KAAK,OAAQ,KAAK,QAAQ,SAAS,EAAO,IAE3C,GACF,KAAK,KAAK,OAAQ,KAAK,QAAQ,SAAS,IAG1C,GAAI,GAAe,KAAK,QAAQ,WAAW,EAAM,EAAO,GAGxD,KAAK,SAAS,GAAG,QAAS,KAAK,KAAK,KAAK,KAAM,UAE/C,KAAK,SAAS,GAAG,OAAQ,SAAS,EAAgB,CAChD,KAAK,KAAK,OAAQ,KAAK,QAAQ,SAAS,KACxC,KAAK,OAEP,KAAK,SAAS,GAAG,MAAO,UAAW,CACjC,KAAK,KAAK,OAAQ,KAAK,QAAQ,YAC/B,KAAK,KAAK,QACV,KAAK,OAEP,KAAK,SAAS,IAAI,MC3CpB,gCAEA,GAAI,IAAa,GAAO,QAAU,SAAS,EAAQ,CAEjD,KAAK,QAAU,EACf,KAAK,OAAS,IAGhB,GAAW,UAAU,KAAO,SAAS,EAAQ,EAAU,CAErD,KAAK,OAAO,KAAK,CACf,OAAQ,KAAK,IAAI,GACjB,UAAW,EAAS,EACpB,KAAM,KAIV,GAAW,UAAU,QAAU,UAAW,CAGxC,KAAO,KAAK,OAAO,OAAS,GAAK,KAAK,QAAQ,QAAQ,CAEpD,GAAI,GAAO,KAAK,OAAO,GAEvB,GAAI,KAAK,QAAQ,QAAW,MAAK,QAAQ,QAAU,EAAK,QAAU,EAAK,WAAY,CAGjF,KAAK,OAAO,QAEZ,GAAI,GAAM,KAAK,QAEf,KAAK,QAAU,EAAI,MAAM,EAAK,QAE9B,EAAK,KAAK,KAAK,KAAM,EAAI,MAAM,EAAG,EAAK,aAIvC,OAKJ,GAAI,KAAK,OAAO,OAAS,EACvB,MAAO,IAAI,OAAM,0DAGnB,GAAI,KAAK,QAAQ,OAAS,EACxB,MAAO,IAAI,OAAM,4CC/CrB,2BAEA,GAAI,IAAa,KACb,GAAS,KAGb,GAAQ,QAAU,SAAS,EAAU,EAAY,CAE/C,GAAI,GAAa,GACb,EAAS,GAAI,IAAW,GACxB,EAAS,GAAI,IAAO,EAAY,CAClC,KAAM,EAAO,KAAK,KAAK,GACvB,MAAO,SAAS,EAAY,CAC1B,EAAW,KAAK,IAElB,SAAU,UAAW,KAIvB,SAAO,QACP,EAAO,UAEA,OAAO,OAAO,MCtBvB,gCAEA,GAAI,IAAc,GACd,GAAO,QAAQ,QACnB,AAAK,GAAK,aACR,IAAc,IAEhB,GAAI,IAAa,KACb,GAAa,KACb,GAAS,KACT,GAAY,KACZ,GAAmB,KAGvB,GAAO,QAAU,SAAS,EAAQ,EAAS,CAEzC,GAAI,CAAC,GACH,KAAM,IAAI,OAAM,sHAGlB,GAAI,GACJ,WAAqB,EAAO,CAC1B,EAAM,EAGR,GAAI,GACJ,WAAwB,EAAY,CAClC,EAAW,EAGb,WAA0B,EAAY,CACpC,EAAS,WAAa,EAGxB,WAAuB,EAAS,CAC9B,EAAS,QAAU,EAGrB,GAAI,GACJ,WAAqB,EAAS,CAC5B,EAAQ,EAGV,GAAI,GAAkB,GACtB,WAA2B,EAAc,CACvC,EAAgB,KAAK,GAGvB,GAAI,GAAS,GAAI,IAAW,GAExB,EAAS,GAAI,IAAO,EAAS,CAC/B,KAAM,EAAO,KAAK,KAAK,GACvB,MAAO,EACP,SAAU,EACV,MAAO,EACP,QAAS,EACT,WAAY,EACZ,YAAa,IAMf,GAHA,EAAO,QACP,EAAO,UAEH,EACF,KAAM,GAIR,GAAI,GAAc,OAAO,OAAO,GAChC,EAAgB,OAAS,EAEzB,GAAI,GAAe,GAAK,YAAY,GAGpC,GAFA,EAAc,KAEV,CAAC,GAAgB,CAAC,EAAa,OACjC,KAAM,IAAI,OAAM,2CAGlB,GAAI,GAAiB,GAAW,QAAQ,EAAc,GACtD,EAAc,KAEd,GAAI,GAAa,GAAU,aAAa,EAAgB,GACxD,EAAiB,KAEjB,GAAI,GAAuB,GAAiB,EAAY,GAExD,SAAS,KAAO,EAChB,EAAS,MAAQ,GAAS,EAEnB,KCzFT,gCAEA,GAAI,IAAc,GACd,GAAO,QAAQ,QACnB,AAAK,GAAK,aACR,IAAc,IAEhB,GAAI,IAAY,KACZ,GAAS,KAEb,GAAO,QAAU,SAAS,EAAU,EAAK,CAEvC,GAAI,CAAC,GACH,KAAM,IAAI,OAAM,sHAGlB,GAAI,GAAU,GAAO,GAEjB,EAAS,GAAI,IAAO,GAEpB,EAAS,GAGb,EAAO,KAAK,GAAI,QAAO,GAAU,gBAGjC,EAAO,KAAK,EAAO,SAAS,EAAS,MAAO,EAAS,SAEjD,EAAS,OACX,EAAO,KAAK,EAAO,SAAS,EAAS,QAGvC,GAAI,GAAe,EAAO,WAAW,EAAS,KAAM,EAAS,MAAO,EAAS,QAGzE,EAAiB,GAAK,YAAY,EAAc,EAAO,qBAG3D,GAFA,EAAe,KAEX,CAAC,GAAkB,CAAC,EAAe,OACrC,KAAM,IAAI,OAAM,8CAElB,SAAO,KAAK,EAAO,SAAS,IAG5B,EAAO,KAAK,EAAO,YAEZ,OAAO,OAAO,MC9CvB,2BAGA,GAAI,IAAQ,KACR,GAAO,KAGX,GAAQ,KAAO,SAAS,EAAQ,EAAS,CAEvC,MAAO,IAAM,EAAQ,GAAW,KAGlC,GAAQ,MAAQ,SAAS,EAAK,CAE5B,MAAO,IAAK,MCdd,2BAEA,GAAI,IAAO,QAAQ,QACf,GAAS,QAAQ,UACjB,GAAS,KACT,GAAS,KACT,GAAU,KAGV,GAAM,GAAQ,IAAM,SAAS,EAAS,CACxC,GAAO,KAAK,MAEZ,EAAU,GAAW,GAErB,KAAK,MAAQ,EAAQ,OAAS,EAC9B,KAAK,OAAS,EAAQ,QAAU,EAEhC,KAAK,KAAO,KAAK,MAAQ,GAAK,KAAK,OAAS,EAC1C,GAAI,QAAO,EAAI,KAAK,MAAQ,KAAK,QAAU,KAEzC,EAAQ,MAAQ,KAAK,MACvB,KAAK,KAAK,KAAK,GAGjB,KAAK,MAAQ,EACb,KAAK,SAAW,KAAK,SAAW,GAEhC,KAAK,QAAU,GAAI,IAAO,GAE1B,KAAK,QAAQ,GAAG,QAAS,KAAK,KAAK,KAAK,KAAM,UAC9C,KAAK,QAAQ,GAAG,QAAS,KAAK,aAAa,KAAK,OAChD,KAAK,QAAQ,GAAG,WAAY,KAAK,UAAU,KAAK,OAChD,KAAK,QAAQ,GAAG,QAAS,KAAK,OAAO,KAAK,OAC1C,KAAK,QAAQ,GAAG,SAAU,SAAS,EAAM,CACvC,KAAK,KAAO,EACZ,KAAK,KAAK,SAAU,IACpB,KAAK,OAEP,KAAK,QAAU,GAAI,IAAO,GAC1B,KAAK,QAAQ,GAAG,OAAQ,KAAK,KAAK,KAAK,KAAM,SAC7C,KAAK,QAAQ,GAAG,MAAO,KAAK,KAAK,KAAK,KAAM,QAC5C,KAAK,QAAQ,GAAG,QAAS,KAAK,aAAa,KAAK,OAChD,KAAK,QAAQ,GAAG,QAAS,KAAK,KAAK,KAAK,KAAM,WAGhD,GAAK,SAAS,GAAK,IAEnB,GAAI,KAAO,GAEX,GAAI,UAAU,KAAO,UAAW,CAE9B,MAAI,CAAC,KAAK,MAAQ,CAAC,KAAK,KAAK,OAC3B,MAAK,KAAK,QAAS,oBACZ,MAGT,SAAQ,SAAS,UAAW,CAC1B,KAAK,QAAQ,KAAK,KAAK,KAAM,KAAK,MAAO,KAAK,OAAQ,KAAK,QAC3D,KAAK,OAEA,OAIT,GAAI,UAAU,MAAQ,SAAS,EAAM,EAAU,CAE7C,GAAI,EAAU,CACZ,GAAI,GAAU,EAEd,EAAW,SAAS,EAAY,CAC9B,KAAK,eAAe,QAAS,GAE7B,KAAK,KAAO,EACZ,EAAS,KAAM,OACf,KAAK,MAEP,EAAU,SAAS,EAAK,CACtB,KAAK,eAAe,SAAU,GAE9B,EAAS,EAAK,OACd,KAAK,MAEP,KAAK,KAAK,SAAU,GACpB,KAAK,KAAK,QAAS,GAGrB,YAAK,IAAI,GACF,MAGT,GAAI,UAAU,MAAQ,SAAS,EAAM,CACnC,YAAK,QAAQ,MAAM,GACZ,IAGT,GAAI,UAAU,IAAM,SAAS,EAAM,CACjC,KAAK,QAAQ,IAAI,IAGnB,GAAI,UAAU,UAAY,SAAS,EAAU,CAC3C,KAAK,MAAQ,EAAS,MACtB,KAAK,OAAS,EAAS,OAEvB,KAAK,KAAK,WAAY,IAGxB,GAAI,UAAU,OAAS,SAAS,EAAO,CACrC,KAAK,MAAQ,GAGf,GAAI,UAAU,aAAe,UAAW,CACtC,AAAI,CAAC,KAAK,QAAQ,UAAY,CAAC,KAAK,QAAQ,UAC1C,KAAK,KAAK,UAKd,GAAI,OAAS,SAAS,EAAK,EAAK,EAAM,EAAM,EAAO,EAAQ,EAAQ,EAAQ,CAEzE,GAAI,EAAO,EAAI,OAAS,EAAO,EAAI,QAAU,EAAO,EAAQ,EAAI,OAAS,EAAO,EAAS,EAAI,OAC3F,KAAM,IAAI,OAAM,gCAGlB,GAAI,EAAS,EAAI,OAAS,EAAS,EAAI,QAAU,EAAS,EAAQ,EAAI,OAAS,EAAS,EAAS,EAAI,OACnG,KAAM,IAAI,OAAM,gCAGlB,OAAS,GAAI,EAAG,EAAI,EAAQ,IAC1B,EAAI,KAAK,KAAK,EAAI,KACd,GAAS,GAAK,EAAI,MAAQ,GAAW,EACrC,GAAO,GAAK,EAAI,MAAQ,GAAS,EACjC,GAAO,GAAK,EAAI,MAAQ,EAAO,GAAU,IAMjD,GAAI,UAAU,OAAS,SAAS,EAAK,EAAM,EAAM,EAAO,EAAQ,EAAQ,EAAQ,CAE9E,UAAI,OAAO,KAAM,EAAK,EAAM,EAAM,EAAO,EAAQ,EAAQ,GAClD,MAGT,GAAI,YAAc,SAAS,EAAK,CAC9B,GAAI,EAAI,MAAO,CACb,OAAS,GAAI,EAAG,EAAI,EAAI,OAAQ,IAC9B,OAAS,GAAI,EAAG,EAAI,EAAI,MAAO,IAG7B,OAFI,GAAO,EAAI,MAAQ,EAAI,GAAM,EAExB,EAAI,EAAG,EAAI,EAAG,IAAK,CAC1B,GAAI,GAAS,EAAI,KAAK,EAAM,GAAK,IACjC,EAAS,KAAK,IAAI,EAAQ,EAAI,IAAM,EAAI,OACxC,EAAI,KAAK,EAAM,GAAK,KAAK,MAAM,EAAS,KAI9C,EAAI,MAAQ,IAIhB,GAAI,UAAU,YAAc,UAAW,CACrC,GAAI,YAAY,SCjKlB,gCAEA,YAAc,EAAG,CAEf,OADI,GAAS,GAAI,OAAM,GACf,EAAE,EAAG,EAAE,EAAG,EAAE,EAClB,EAAO,GAAK,EAEd,MAAO,GAGT,GAAO,QAAU,KCVjB,mBASA,GAAO,QAAU,SAAU,EAAK,CAC9B,MAAO,IAAO,MAAS,IAAS,IAAQ,GAAa,IAAQ,CAAC,CAAC,EAAI,YAGrE,YAAmB,EAAK,CACtB,MAAO,CAAC,CAAC,EAAI,aAAe,MAAO,GAAI,YAAY,UAAa,YAAc,EAAI,YAAY,SAAS,GAIzG,YAAuB,EAAK,CAC1B,MAAO,OAAO,GAAI,aAAgB,YAAc,MAAO,GAAI,OAAU,YAAc,GAAS,EAAI,MAAM,EAAG,OCnB3G,sBAAI,IAAO,KACP,GAAW,KAEX,GAAoB,MAAO,eAAkB,YAEjD,YAAoB,EAAG,EAAG,CACxB,MAAO,GAAE,GAAK,EAAE,GAGlB,aAAiB,CACf,GAAI,GAAS,KAAK,OACd,EAAQ,GAAI,OAAM,EAAO,QACzB,EACJ,IAAI,EAAE,EAAG,EAAE,EAAM,OAAQ,EAAE,EACzB,EAAM,GAAK,CAAC,KAAK,IAAI,EAAO,IAAK,GAEnC,EAAM,KAAK,IACX,GAAI,GAAS,GAAI,OAAM,EAAM,QAC7B,IAAI,EAAE,EAAG,EAAE,EAAO,OAAQ,EAAE,EAC1B,EAAO,GAAK,EAAM,GAAG,GAEvB,MAAO,GAGT,YAA4B,EAAO,EAAW,CAC5C,GAAI,GAAY,CAAC,OAAQ,EAAW,IAAK,GAAO,KAAK,IACrD,AAAG,EAAY,GACb,GAAY,WAAa,GAE3B,GAAI,GAAc,IAAU,UAE5B,GAAG,IAAc,GAAI,CAEnB,GAAI,GACF,YAAY,EAAU,+BAChB,EAAU,2BACP,EAAM,kLAMG,EAAU,+GAGN,EAAU,kBAAkB,EAAU,QAC1D,EAAY,GAAI,UAAS,GAC7B,MAAO,aACC,IAAc,EAAG,CAEzB,GAAI,GACF,YAAY,EAAU,mDAIhB,EAAU,2BACP,EAAM,6KAUC,EAAU,uBACnB,EAAU,gDAED,EAAU,6EAGG,EAAU,iBACnC,GAAa,6BAA+B,0BACtD,wBACqB,EAAU,kBACrB,GAAa,+BAAiC,4BAA4B,+BAExD,EAAU,wBAAwB,EAAU,SAChE,EAAY,GAAI,UAAS,eAAgB,GAC7C,MAAO,GAAU,GAAoB,GAAO,IAG9C,GAAI,GAAO,CAAC,gBAGR,EAAU,GAAK,GACf,EAAO,EAAQ,IAAI,SAAS,EAAG,CAAE,MAAO,IAAI,IAC5C,EAAY,eAAiB,EAAQ,IAAI,SAAS,EAAG,CACnD,MAAO,eAAiB,EAAI,MAAQ,IACnC,KAAK,KACR,EAAW,EAAQ,IAAI,SAAS,EAAG,CACnC,MAAO,IAAI,IACV,KAAK,KACN,EAAY,EAAQ,IAAI,SAAS,EAAG,CACpC,MAAO,IAAI,IACV,KAAK,KACV,EAAK,KACH,YAAY,EAAU,MAAQ,EAAW,IAAM,EAAY,kBACzD,eAAiB,EAAW,IAC5B,gBAAkB,EAAY,IAC9B,mBACF,aAAa,EAAU,aACvB,gBAAgB,EAAM,IACtB,mBAAmB,GAGrB,EAAK,KAAK,oDAAoD,EAAU,kBACjE,EAAQ,IAAI,SAAS,EAAG,CAAE,MAAO,cAAc,EAAE,MAAO,KAAK,KACtE,OAGE,AAAG,IAAc,EACf,EAAK,KAAK,mBAEV,GAAK,KAAK,6CACV,AAAG,EAAY,EACb,GAAK,KAAK,YAAY,EAAU,aAChC,AAAG,IAAc,EACf,EAAK,KAAK,6EACF,IAAc,GACtB,EAAK,KACb,4QAkBM,EAAK,KAAK,YAKd,EAAK,KACP,sBAAsB,EAAU,QAAQ,EAAK,KAAK,KAAK,QACrD,AAAG,EACD,EAAK,KAAK,wBAAwB,EAAU,QAE5C,EAAK,KAAK,oBAAoB,EAAU,QAI1C,EAAK,KAAK,sBAAsB,EAAU,QAAQ,EAAK,KAAK,KAAK,MACjE,AAAG,EACD,EAAK,KAAK,wBAAwB,EAAU,MAE5C,EAAK,KAAK,oBAAoB,EAAU,MAI1C,EAAK,KACH,wBAAwB,EAAU,UAAW,EAAK,OAAQ,YAAY,EAAU,KAGlF,EAAK,KAAK,qBAAqB,EAAU,OAAO,EAAK,KAAK,KAAK,gBAAgB,EAAU,cACvF,EAAQ,IAAI,SAAS,EAAG,CACtB,MAAO,CAAC,YAAY,EAAE,iBAAiB,EAAE,kBAAmB,EAAG,MAAO,EAAE,MAAM,KAAK,MAClF,KAAK,KAAK,IACb,EAAQ,IAAI,SAAS,EAAG,CACtB,MAAO,eAAe,EAAI,MACzB,KAAK,KAAK,kBAGf,GAAI,GAAS,EAAQ,IAAI,SAAS,EAAG,CAAE,MAAO,IAAI,EAAE,eAAe,EAAE,MACjE,EAAS,EAAQ,IAAI,SAAS,EAAG,CAAE,MAAO,IAAI,EAAE,gBAAgB,EAAE,MACtE,EAAK,KAAK,qBAAqB,EAAU,OAAO,EAAK,KAAK,KAAK,2BAA2B,EAAO,KAAK,KAAK,IAAI,EAAO,KAAK,MAC3H,OAAQ,GAAE,EAAG,EAAE,EAAW,EAAE,EAC1B,EAAK,KACT,cAAc,EAAE,iBAAiB,EAAE,WAC9B,EAAE,UACD,EAAE,OACL,EAAE,QAEH,EAAK,KAAK,cAAc,EAAU,cAChC,EAAQ,IAAI,SAAS,EAAG,CACtB,MAAO,IAAI,IACV,KAAK,KAAK,IACb,EAAQ,IAAI,SAAS,EAAG,CACtB,MAAO,IAAI,IACV,KAAK,KAAK,QAGf,EAAK,KAAK,uBAAuB,EAAU,SAAS,EAAK,KAAK,KAAK,SACjE,EAAQ,IAAI,SAAS,EAAG,CACtB,MAAO,IAAI,EAAE,eAAe,EAAE,MAC7B,KAAK,KAAK,IACb,EAAQ,IAAI,SAAS,EAAG,CACtB,MAAO,IAAI,EAAE,gBAAgB,EAAE,MAC9B,KAAK,KAAK,qCACf,OAAQ,GAAE,EAAG,EAAE,EAAW,EAAE,EAC1B,EAAK,KACT,cAAc,EAAE,mBACX,EAAE,kBAED,EAAE,MAAM,EAAE,QACb,EAAE,WAAW,EAAE,aAEf,EAAE,UAAU,EAAE,QAEd,EAAE,QAGH,EAAK,KAAK,cAAc,EAAU,cAChC,EAAQ,IAAI,SAAS,EAAG,CACtB,MAAO,IAAM,IACZ,KAAK,KAAK,IACb,EAAQ,IAAI,SAAS,EAAG,CACtB,MAAO,IAAM,IACZ,KAAK,KAAK,QAKf,OAFI,GAAS,GAAI,OAAM,GACnB,EAAU,GAAI,OAAM,GAChB,EAAE,EAAG,EAAE,EAAW,EAAE,EAC1B,EAAO,GAAK,MAAM,EAAE,IACpB,EAAQ,GAAK,MAAM,EAAE,IAEvB,EAAK,KAAK,4BAA4B,EAAU,cAAc,EAAK,KACjE,EAAK,IAAI,SAAS,EAAE,EAAK,CAAE,MAAO,GAAI,KAAO,EAAI,gBAAkB,EAAM,IAAM,EAAI,QAAQ,KAAK,KAChG,6CAA6C,EAAU,cAAc,EAAO,KAAK,KAAK,IAAI,EAAQ,KAAK,KAAK,kBAG9G,EAAK,KAAK,uBAAuB,EAAU,SAAS,EAAK,iCACzD,OAAQ,GAAE,EAAG,EAAE,EAAW,EAAE,EAC1B,EAAK,KAAK,cAAc,EAAE,iBAAiB,EAAE,yBAAyB,EAAE,MAAM,EAAE,8BAA8B,EAAE,yBAAyB,EAAE,OAE7I,EAAK,KAAK,gEAGV,EAAK,KAAK,6BAA6B,EAAU,yCAAyC,EAAU,SAClG,EAAQ,IAAI,SAAS,EAAG,CACtB,MAAO,SAAS,EAAE,MACjB,KAAK,KAAK,IACb,EAAQ,IAAI,SAAS,EAAG,CACtB,MAAO,UAAU,EAAE,MAClB,KAAK,KAAK,aAGf,GAAI,GAAY,GAAI,UAAS,YAAa,QAAS,EAAK,KAAK;AAAA,IAC7D,MAAO,GAAU,GAAoB,GAAQ,IAG/C,YAAoB,EAAM,CACxB,GAAG,GAAS,GACV,MAAO,SAET,GAAG,GACD,OAAO,OAAO,UAAU,SAAS,KAAK,QAC/B,wBACH,MAAO,cACJ,wBACH,MAAO,cACJ,qBACH,MAAO,WACJ,sBACH,MAAO,YACJ,sBACH,MAAO,YACJ,sBACH,MAAO,YACJ,uBACH,MAAO,aACJ,uBACH,MAAO,aACJ,6BACH,MAAO,oBACJ,yBACH,MAAO,eACJ,0BACH,MAAO,YAGb,MAAG,OAAM,QAAQ,GACR,QAEF,UAGT,GAAI,IAAsB,CACxB,QAAU,GACV,QAAU,GACV,KAAO,GACP,MAAQ,GACR,MAAQ,GACR,MAAQ,GACR,OAAS,GACT,OAAS,GACT,MAAQ,GACR,cAAgB,GAChB,SAAY,GACZ,UAAa,GACb,OAAS,GACT,QAAU,IASZ,YAA4B,EAAM,EAAO,EAAQ,EAAQ,CACvD,GAAG,IAAS,OAAW,CACrB,GAAI,GAAO,GAAoB,MAAM,GACrC,MAAO,GAAK,QACP,AAAG,OAAO,IAAS,UACxB,GAAO,CAAC,IAEV,AAAG,IAAU,QACX,GAAQ,CAAE,EAAK,SAEjB,GAAI,GAAI,EAAM,OACd,GAAG,IAAW,OAAW,CACvB,EAAS,GAAI,OAAM,GACnB,OAAQ,GAAE,EAAE,EAAG,EAAG,EAAG,GAAG,EAAG,EAAE,EAC3B,EAAO,GAAK,EACZ,GAAM,EAAM,GAGhB,GAAG,IAAW,OAAW,CACvB,EAAS,EACT,OAAQ,GAAE,EAAG,EAAE,EAAG,EAAE,EAClB,AAAG,EAAO,GAAK,GACb,IAAW,GAAM,GAAG,GAAG,EAAO,IAMpC,OAFI,GAAQ,GAAW,GACnB,EAAY,GAAoB,GAC9B,EAAU,QAAU,EAAE,GAC1B,EAAU,KAAK,GAAmB,EAAO,EAAU,OAAO,IAE5D,GAAI,GAAO,EAAU,EAAE,GACvB,MAAO,GAAK,EAAM,EAAO,EAAQ,GAGnC,GAAO,QAAU,KC5VjB,gCAEA,YAAqB,EAAM,EAAS,CAIlC,OAHI,GAAM,EACN,EAAM,EAAK,OACX,EAAE,EAAK,GAAI,EAAE,EAAK,GACd,EAAE,EAAG,EAAE,EAAK,EAAE,EAGpB,GAFA,EAAI,EACJ,EAAI,EAAK,GACN,EAAQ,EAAG,GAAI,CAChB,GAAG,IAAM,EAAK,CACZ,IACA,SAEF,EAAK,KAAS,EAGlB,SAAK,OAAS,EACP,EAGT,YAAmB,EAAM,CAIvB,OAHI,GAAM,EACN,EAAM,EAAK,OACX,EAAE,EAAK,GAAI,EAAI,EAAK,GAChB,EAAE,EAAG,EAAE,EAAK,EAAE,EAAG,EAAE,EAGzB,GAFA,EAAI,EACJ,EAAI,EAAK,GACN,IAAM,EAAG,CACV,GAAG,IAAM,EAAK,CACZ,IACA,SAEF,EAAK,KAAS,EAGlB,SAAK,OAAS,EACP,EAGT,YAAgB,EAAM,EAAS,EAAQ,CACrC,MAAG,GAAK,SAAW,EACV,EAEN,EACG,IACF,EAAK,KAAK,GAEL,GAAY,EAAM,IAEvB,IACF,EAAK,OAEA,GAAU,IAGnB,GAAO,QAAU,KCxDjB,gCAEA,GAAI,IAAO,KAIX,YAAmB,EAAO,EAAM,EAAM,CACpC,GAAI,GAAY,EAAM,OAClB,EAAQ,EAAK,UAAU,OACvB,EAAY,EAAK,UAAU,OAAO,EAClC,EAAO,GACP,EAAO,GACP,EAAI,EAAG,EAAK,EAAG,EAAG,EACtB,IAAI,EAAE,EAAG,EAAE,EAAW,EAAE,EACtB,EAAK,KAAK,CAAC,IAAI,EAAE,MAAM,KAAK,KAG9B,IAAI,EAAE,EAAG,EAAE,EAAO,EAAE,EAClB,IAAI,EAAE,EAAG,EAAE,EAAW,EAAE,EACtB,EAAO,EACP,EAAM,EAAM,GACZ,AAAG,IAAM,EACP,EAAK,KAAK,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,GAAK,KAAK,KAE5C,EAAK,KAAK,CAAC,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAI,KAAK,EAAK,KAAK,EAAE,IAAI,EAAK,KAAK,KAAK,KAQjF,IAJI,EAAK,OAAS,GAChB,EAAK,KAAK,OAAS,EAAK,KAAK,MAG3B,EAAE,EAAU,EAAG,GAAG,EAAG,EAAE,EACzB,EAAM,EAAM,GACZ,EAAK,KAAK,CAAC,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAI,OAAO,EAAE,MAAM,KAAK,KAK7D,IAFA,EAAK,KAAK,GAEN,EAAE,EAAG,EAAE,EAAW,EAAE,EAAG,CAGzB,IAFA,EAAO,EACP,EAAM,EAAM,GACR,EAAE,EAAG,EAAE,EAAO,EAAE,EAClB,EAAK,KAAK,CAAC,IAAI,EAAE,MAAM,EAAE,IAAI,GAAG,KAAK,KAEvC,AAAG,GACE,GAAI,GACL,EAAK,KAAK,CAAC,SAAS,EAAK,OAAO,GAAM,KAAK,KAE7C,EAAK,KAAK,CAAC,WAAW,EAAI,KAAK,KAAK,MAEtC,EAAK,KAAK,KAEZ,MAAO,GAAK,KAAK;AAAA,GAMnB,YAAmB,EAAS,EAAO,EAAM,EAAM,CAM7C,OALI,GAAY,EAAM,OAClB,EAAQ,EAAK,UAAU,OACvB,EAAY,EAAK,UACjB,EAAY,EAAK,UAAU,OAAS,EACpC,EAAO,GACH,EAAE,EAAG,EAAE,EAAO,EAAE,EACtB,EAAK,KAAK,CAAC,aAAa,EAAE,KAAK,GAAG,KAAK,KAKzC,OAAQ,GAAE,EAAS,EAAE,EAAW,EAAE,EAChC,EAAK,KAAK,CAAC,YAAY,EAAE,OAAQ,EAAM,GAAI,QAAS,EAAG,SAAS,KAAK,KACrE,EAAK,KAAK,CAAC,OAAO,EAAE,IAAI,EAAU,MAAM,KAAK,KAC7C,EAAK,KAAK,CAAC,IAAI,EAAM,GAAG,KAAK,GAAG,KAAK,KACrC,EAAK,KAAK,CAAC,IAAI,EAAE,MAAM,KAAK,KAC5B,EAAK,KAAK,CAAC,UAAU,EAAM,GAAG,IAAI,GAAW,KAAK,KAClD,EAAK,KAAK,CAAC,IAAI,EAAE,KAAK,EAAU,KAAK,KAAK,KACvC,GACD,EAAK,KAAK,CAAC,SAAS,EAAM,GAAG,MAAM,GAAG,KAAK,KAG/C,OAAQ,GAAE,EAAG,EAAE,EAAO,EAAE,EAAG,CAEzB,OADI,GAAW,CAAC,SAAS,GACjB,EAAE,EAAS,EAAE,EAAW,EAAE,EAChC,EAAS,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAM,IAAI,KAAK,KAEjD,EAAK,KAAK,CAAC,IAAI,EAAE,KAAK,EAAS,KAAK,KAAK,KAAK,KAAK,KAErD,EAAK,KAAK,GAAU,EAAO,EAAM,IACjC,OAAQ,GAAE,EAAS,EAAE,EAAW,EAAE,EAChC,EAAK,KAAK,KAEZ,MAAO,GAAK,KAAK;AAAA,GAOnB,YAAsB,EAAQ,CAE5B,OADI,GAAU,EAAG,EAAY,EAAO,GAAG,OACjC,EAAU,GAAW,CACzB,OAAQ,GAAE,EAAG,EAAE,EAAO,OAAQ,EAAE,EAC9B,GAAG,EAAO,GAAG,KAAa,EAAO,GAAG,GAClC,MAAO,GAGX,EAAE,EAEJ,MAAO,GAKT,YAAsB,EAAO,EAAM,EAAQ,CAIzC,OAHI,GAAO,EAAM,KACb,EAAM,GACN,EAAO,GACH,EAAE,EAAG,EAAE,EAAM,KAAK,OAAQ,EAAE,EAAG,CACrC,GAAI,GAAO,EAAM,KAAK,GACtB,GAAG,IAAK,OAAS,GAGjB,IAAI,GAAK,GAAI,QAAO,EAAK,KAAM,KAC3B,EAAS,GACT,EAAS,EAAK,UAAU,QAAQ,GACpC,OAAO,EAAK,SAAS,QACd,SACH,GAAI,GAAc,EAAK,eAAe,QAAQ,GAC1C,EAAS,EAAK,WAAW,GAC7B,EAAS,EAAO,MAChB,EAAS,KAAO,MACb,QACH,EAAS,IAAM,EAAS,EACxB,GAAI,GAAW,IAAM,EACjB,EAAS,IAAM,EACnB,GAAI,EAAK,kBAAkB,KAAY,EACrC,AAAG,EAAK,QAAU,EAChB,AAAG,EAAO,KAAY,UACpB,AAAG,EAAK,OACN,GAAI,KAAK,CAAC,OAAQ,EAAU,IAAK,EAAQ,QAAS,EAAQ,KAAK,KAAK,KACpE,EAAO,EAAK,QAAQ,EAAI,GACxB,EAAK,KAAK,CAAC,EAAQ,QAAS,EAAQ,IAAK,EAAS,KAAK,KAAK,MAE5D,EAAO,EAAK,QAAQ,EAAI,CAAC,EAAQ,QAAS,EAAQ,KAAK,KAAK,KAG9D,EAAO,EAAK,QAAQ,EAAI,CAAC,EAAQ,IAAK,EAAQ,KAAK,KAAK,KAErD,AAAG,EAAO,KAAY,UAC3B,GAAI,KAAK,CAAC,OAAQ,EAAU,IAAK,EAAQ,QAAS,EAAQ,KAAK,KAAK,KACpE,EAAO,EAAK,QAAQ,EAAI,GACrB,EAAK,QACN,EAAK,KAAK,CAAC,EAAQ,QAAS,EAAQ,IAAK,EAAS,KAAK,KAAK,MAG9D,GAAI,KAAK,CAAC,OAAQ,EAAU,IAAK,EAAQ,IAAK,EAAQ,KAAK,KAAK,KAChE,EAAO,EAAK,QAAQ,EAAI,GACrB,EAAK,QACN,EAAK,KAAK,CAAC,EAAQ,IAAK,EAAQ,KAAM,GAAU,KAAK,UAGpD,CAEL,OADI,GAAW,CAAC,EAAK,MAAO,EAAY,CAAC,GACjC,EAAE,EAAG,EAAE,KAAK,IAAI,EAAK,kBAAkB,IAAU,IACvD,EAAS,KAAK,uBACd,EAAU,KAAK,IAAO,GAAE,GAAK,KAAO,EAAS,IAAM,GAIrD,GAFA,EAAK,GAAI,QAAO,EAAS,KAAK,IAAK,KACnC,EAAS,EAAU,KAAK,KACrB,EAAO,KAAY,UAQpB,KAAM,IAAI,OAAM,mEAGhB,EAAO,EAAK,QAAQ,EAAI,CAAC,EAAQ,IAAK,EAAQ,KAAK,KAAK,KAG9D,UACK,SACH,EAAO,EAAK,QAAQ,EAAI,IAAM,EAAK,WAAW,QAAQ,IACxD,UACK,QACH,EAAO,EAAK,QAAQ,EAAI,SAC1B,UACK,QACH,EAAO,EAAK,QAAQ,EAAI,SAC1B,QAGJ,MAAO,CAAC,EAAI,KAAK;AAAA,GAAO,EAAM,EAAK,KAAK;AAAA,IAAO,KAAK;AAAA,GAAM,OAG5D,YAAqB,EAAQ,CAG3B,OAFI,GAAU,GAAI,OAAM,EAAO,QAC3B,EAAW,GACP,EAAE,EAAG,EAAE,EAAO,OAAQ,EAAE,EAAG,CACjC,GAAI,GAAI,EAAO,GACX,EAAS,EAAE,MAAM,OACrB,AAAI,EAGF,EAAS,EAAO,GAFhB,EAAS,GAIX,AAAG,EAAE,OAAO,KAAO,EACjB,EAAQ,GAAK,IAAM,EAAE,OAAO,GAAK,EAEjC,EAAQ,GAAK,EAAE,OAAO,GAAK,EAE1B,EAAI,GACL,GAAW,GAAY,EAAQ,KAAO,EAAQ,EAAE,IAGpD,MAAG,GACM,EAAQ,GAEV,EAAQ,KAAK,IAItB,YAAyB,EAAM,EAAS,CAOtC,OAHI,GAAa,EAAQ,GAAG,OAAS,KAAK,IAAI,EAAK,kBAAkB,IAAK,EACtE,EAAS,GAAI,OAAM,EAAK,UAAU,QAClC,EAAS,GAAI,OAAM,EAAK,UAAU,QAC9B,EAAE,EAAG,EAAE,EAAK,UAAU,OAAQ,EAAE,EACtC,EAAO,GAAK,EAAQ,EAAE,GACtB,EAAO,GAAK,EAAQ,EAAE,EAAE,GAO1B,OAHI,GAAa,GAAI,EAAW,GAC5B,EAAY,GAAI,EAAU,GAC1B,EAAa,GACT,EAAE,EAAG,EAAE,EAAK,UAAU,OAAQ,EAAE,EAAG,CACzC,AAAI,EAAK,kBAAkB,GAAG,EAC5B,GAAU,KAAK,GACf,EAAQ,KAAK,GACb,EAAW,KAAK,GAChB,EAAS,KAAK,EAAU,EAAK,kBAAkB,KAE/C,GAAU,KAAK,EAAK,kBAAkB,IACtC,EAAQ,KAAK,EAAK,kBAAkB,GAAG,GACvC,EAAW,KAAK,GAChB,EAAS,KAAK,EAAK,kBAAkB,KAGvC,OADI,GAAW,GACP,EAAE,EAAG,EAAE,EAAO,GAAG,OAAQ,IAC/B,AAAI,EAAU,IAAI,EAAO,GAAG,IAAM,EAAO,GAAG,GAAG,EAAQ,IACrD,EAAS,KAAK,EAAO,GAAG,GAAG,EAAU,IAGzC,EAAW,KAAK,GAQlB,OAJI,GAAU,CAAC,MACX,EAAO,CAAC,gBACR,EAAO,GAEH,EAAE,EAAG,EAAE,EAAW,EAAE,EAC1B,EAAK,KAAK,CAAC,IAAK,EAAG,OAAQ,EAAG,KAAK,KAAK,KAE1C,OAAQ,GAAE,EAAG,EAAE,EAAK,UAAU,OAAQ,EAAE,EAAG,CACzC,EAAQ,KAAK,IAAI,GACjB,EAAQ,KAAK,IAAI,GACjB,EAAQ,KAAK,IAAI,GAEjB,OAAQ,GAAE,EAAG,EAAE,EAAW,EAAE,EAC1B,EAAK,KAAK,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAU,GAAG,EAAE,KAAK,KAAK,KAG7D,OAAQ,GAAE,EAAG,EAAE,KAAK,IAAI,EAAK,kBAAkB,IAAK,EAAE,EACpD,EAAK,KAAK,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAW,GAAG,EAAE,KAAK,KAAK,KAGhE,OAAQ,GAAE,EAAG,EAAE,EAAK,WAAW,OAAQ,EAAE,EACvC,EAAQ,KAAK,IAAM,GAKrB,GAHG,EAAK,UAAU,OAAS,GACzB,EAAK,KAAK,qBAET,EAAK,UAAU,OAAS,EAAG,CAG5B,OADI,GAAQ,GAAI,OAAM,GACd,EAAE,EAAG,EAAE,EAAW,EAAE,EAC1B,EAAM,GAAK,IAEb,EAAK,KAAK,CAAC,UAAW,EAAM,KAAK,KAAM,KAAK,KAAK,KAEnD,OAAQ,GAAE,EAAG,EAAE,EAAK,WAAW,OAAQ,EAAE,EAAG,CAG1C,OAFI,GAAU,EAAK,WAAW,GAC1B,EAAc,GACV,EAAE,EAAG,EAAE,EAAQ,OAAO,OAAQ,EAAE,EACtC,AAAG,EAAQ,OAAO,KAAO,GAElB,CAAG,EAAQ,OAAO,KAAO,EAC9B,EAAY,KAAK,CAAC,IAAK,EAAQ,MAAO,IAAK,GAAG,KAAK,KAEnD,EAAY,KAAK,CAAC,EAAQ,OAAO,GAAI,KAAM,EAAQ,MAAO,IAAK,GAAG,KAAK,MAG3E,AAAG,EAAY,SAAW,EACxB,EAAK,KAAK,IAAM,EAAI,MAEpB,EAAK,KAAK,CAAC,IAAK,EAAG,IAAK,EAAY,KAAK,MAAM,KAAK,KAKxD,GAAI,GAAW,GAAK,GAAG,OAAO,EAAK,IAAI,UAClB,OAAO,EAAK,KAAK,UACjB,OAAO,EAAK,KAAK,WACtC,EAAO,EAAK,OAAO,GACf,EAAK,OAAS,GAChB,EAAK,KAAK,OAAS,EAAK,KAAK,MAE/B,OAAQ,GAAE,EAAG,EAAE,EAAK,UAAU,OAAQ,EAAE,EACtC,EAAK,KAAK,IAAI,EAAE,OAIlB,AAAG,EAAK,IAAI,KAAK,OAAS,GACxB,EAAK,KAAK,GAAa,EAAK,IAAK,EAAM,IAIzC,GAAI,GAAO,GAAa,EAAK,KAAM,EAAM,GACrC,EAAU,GAAa,GAC3B,AAAG,EAAU,EACX,EAAK,KAAK,GAAU,EAAS,EAAW,GAAI,EAAM,IAElD,EAAK,KAAK,GAAU,EAAW,GAAI,EAAM,IAIxC,EAAK,KAAK,KAAK,OAAS,GACzB,EAAK,KAAK,GAAa,EAAK,KAAM,EAAM,IAGvC,EAAK,OACN,QAAQ,IAAI,oCAAqC,EAAS;AAAA,EAAQ,EAAK,KAAK;AAAA,GAAQ;AAAA,aAGtF,GAAI,GAAW,CAAE,EAAK,UAAU,UAAY,eAAgB,EAAO,GAAG,KAAK,KAAK,IAAI,EAAQ,GAAY,IAAS,KAAK,IAClH,EAAI,GAAI,UAAS,CAAC,YAAY,EAAS,IAAK,EAAQ,KAAK,KAAK,KAAM,EAAK,KAAK;AAAA,GAAM,YAAa,GAAU,KAAK,KACpH,MAAO,KAET,GAAO,QAAU,KCrWjB,gCAyBA,GAAI,IAAU,KAEd,YAAqB,EAAM,CACzB,GAAI,GAAO,CAAC,eAAgB,iBACxB,EAAO,GACP,EAAY,EAAK,SAAW,eAGhC,EAAK,KAAK,CAAC,mBAAoB,EAAW,IAAK,EAAK,SAAS,KAAK,KAAM,MAAM,KAAK,KAOnF,OANI,GAAU,GACV,EAAiB,GACjB,EAAY,CAAC,CAAC,QAAQ,EAAK,UAAU,GAAG,gBAC1B,KAAK,IAAI,EAAE,EAAK,kBAAkB,IAAI,EAAK,kBAAkB,GAAG,EAAG,IAAI,EAAK,kBAAkB,GAAG,IAAK,KAAK,KAAK,KAC9H,EAAwB,GAAI,EAAkB,GAE1C,EAAE,EAAG,EAAE,EAAK,UAAU,OAAQ,EAAE,EAAG,CACzC,GAAI,GAAI,EAAK,UAAU,GACvB,EAAK,KAAK,CAAC,IAAK,EAAG,SAAU,EAAG,UACrB,IAAK,EAAG,SAAU,EAAG,UAAU,KAAK,KAC/C,EAAQ,KAAK,IAAM,GACnB,EAAQ,KAAK,IAAM,GACnB,EAAe,KAAK,IAAI,GACxB,EAAe,KAAK,IAAI,EAAE,WAC1B,EAAU,KAAK,QAAU,EAAI,SAC7B,EAAU,KAAK,QAAU,EAAI,WAC7B,EAAU,KAAK,QAAU,EAAI,aACzB,EAAE,GACJ,GAAsB,KAAK,QAAU,EAAK,UAAU,GAAK,wBAA0B,EAAI,iBAAoB,MAAK,IAAI,EAAK,kBAAkB,IAAI,KAAK,IAAI,EAAK,kBAAkB,MAC/K,EAAgB,KAAK,QAAU,EAAK,UAAU,GAAK,qBAAuB,KAAK,IAAI,EAAE,EAAK,kBAAkB,IAAM,YAAc,EAAI,qBAAuB,KAAK,IAAI,EAAE,EAAK,kBAAkB,IAAM,MAIvM,AAAI,EAAK,UAAU,OAAS,GAC1B,GAAK,KAAK,SAAW,EAAsB,KAAK,QAAU,gFAC1D,EAAK,KAAK,2BAA6B,EAAK,UAAU,GAAK,iBAAmB,KAAK,IAAI,EAAK,kBAAkB,IAAM,wBACpH,EAAK,KAAK,SAAW,EAAgB,KAAK,QAAU,uEACpD,EAAK,KAAK,MAGZ,OAAQ,GAAE,EAAG,EAAE,EAAK,WAAW,OAAQ,EAAE,EACvC,EAAU,KAAK,SAAW,EAAK,WAAW,IAG5C,EAAK,KAAK,CAAC,SAAU,EAAe,KAAK,KAAM,YAAY,KAAK,KAChE,EAAK,KAAK,qBACV,EAAK,KAAK,OAAS,EAAK,KAAK,MAE7B,EAAK,KAAK,CAAC,aACA,8BAA+B,EAAQ,KAAK,KAAM,MAClD,eAAgB,EAAU,KAAK,KAAM,MAAM,KAAK,KAExD,EAAK,OACN,QAAQ,IAAI;AAAA,EAA4B,EAAK,KAAK;AAAA,GAAQ;AAAA,aAI5D,GAAI,GAAQ,GAAI,UAAS,UAAW,EAAK,KAAK;AAAA,IAC9C,MAAO,GAAM,GAAQ,KAAK,OAAW,IAGvC,GAAO,QAAU,KCrFjB,gCAEA,GAAI,IAAc,KAElB,aAAqB,CACnB,KAAK,SAAW,GAChB,KAAK,SAAW,GAChB,KAAK,UAAY,GACjB,KAAK,kBAAoB,GACzB,KAAK,WAAa,GAClB,KAAK,WAAa,GAClB,KAAK,eAAiB,GACtB,KAAK,UAAY,GACjB,KAAK,UAAY,GACjB,KAAK,SAAW,GAChB,KAAK,IAAM,KACX,KAAK,KAAO,KACZ,KAAK,KAAO,KACZ,KAAK,MAAQ,GAGf,YAAsB,EAAW,CAE/B,GAAI,GAAO,GAAI,IAGf,EAAK,IAAS,EAAU,IACxB,EAAK,KAAS,EAAU,KACxB,EAAK,KAAS,EAAU,KAGxB,GAAI,GAAY,EAAU,KAAK,MAAM,GACrC,EAAK,SAAW,EAChB,OAAQ,GAAE,EAAG,EAAE,EAAU,OAAQ,EAAE,EAAG,CACpC,GAAI,GAAW,EAAU,GACzB,GAAG,IAAa,SAAY,MAAO,IAAa,UAAY,EAAS,aAAe,CAKlF,GAJA,EAAK,SAAS,GAAK,QACnB,EAAK,UAAU,KAAK,GACpB,EAAK,kBAAkB,KAAK,EAAS,aAAe,EAAS,aAAe,GAC5E,EAAK,SAAS,KAAK,QAAU,GAC1B,EAAI,EAAK,IAAI,KAAK,QAAU,EAAK,IAAI,KAAK,GAAG,MAAM,EACpD,KAAM,IAAI,OAAM,mDAElB,GAAG,EAAI,EAAK,KAAK,KAAK,QAAU,EAAK,KAAK,KAAK,GAAG,MAAM,EACtD,KAAM,IAAI,OAAM,4DAEV,IAAa,SACrB,EAAK,WAAW,KAAK,GACrB,EAAK,SAAS,KAAK,SAAW,WACtB,IAAa,QAAS,CAE9B,GADA,EAAK,UAAU,KAAK,GACjB,EAAI,EAAK,IAAI,KAAK,QAAU,EAAK,IAAI,KAAK,GAAG,MAAQ,EACtD,KAAM,IAAI,OAAM,oDAElB,GAAG,EAAI,EAAK,KAAK,KAAK,QAAU,EAAK,KAAK,KAAK,GAAG,OAChD,KAAM,IAAI,OAAM,oDAElB,GAAG,EAAI,EAAK,KAAK,KAAK,QAAU,EAAK,KAAK,KAAK,GAAG,MAAQ,EACxD,KAAM,IAAI,OAAM,6DAEV,IAAa,QAAS,CAE9B,GADA,EAAK,UAAU,KAAK,GACjB,EAAI,EAAK,IAAI,KAAK,QAAU,EAAK,IAAI,KAAK,GAAG,OAC9C,KAAM,IAAI,OAAM,mDAElB,GAAG,EAAI,EAAK,KAAK,KAAK,QAAU,EAAK,KAAK,KAAK,GAAG,OAChD,KAAM,IAAI,OAAM,oDAElB,GAAG,EAAI,EAAK,KAAK,KAAK,QAAU,EAAK,KAAK,KAAK,GAAG,OAChD,KAAM,IAAI,OAAM,4DAEV,MAAO,IAAa,UAAY,EAAS,OACjD,EAAK,SAAS,GAAK,SACnB,EAAK,WAAW,KAAK,CAAE,MAAO,EAAS,MAAO,OAAO,EAAS,SAC9D,EAAK,eAAe,KAAK,OAEzB,MAAM,IAAI,OAAM,gCAAkC,EAAU,IAKhE,GAAG,EAAK,UAAU,QAAU,EAC1B,KAAM,IAAI,OAAM,uCAIlB,GAAG,EAAK,IAAI,KAAK,OAAS,EAAU,OAClC,KAAM,IAAI,OAAM,4CAElB,GAAG,EAAK,KAAK,KAAK,OAAS,EAAU,OACnC,KAAM,IAAI,OAAM,6CAElB,GAAG,EAAK,KAAK,KAAK,OAAS,EAAU,OACnC,KAAM,IAAI,OAAM,6CAIlB,SAAK,MAAQ,CAAC,CAAC,EAAU,WAAa,CAAC,CAAC,EAAU,MAGlD,EAAK,SAAW,EAAU,UAAY,QAGtC,EAAK,UAAY,EAAU,WAAa,GAEjC,GAAY,GAGrB,GAAO,QAAU,KC5GjB,2BAEA,GAAI,IAAU,KAEV,GAAY,CACd,KAAM,GACN,KAAM,GACN,SAAU,GACV,UAAW,IAGb,YAAe,EAAG,CAChB,GAAG,CAAC,EACF,MAAO,IAET,OAAQ,GAAE,EAAG,EAAE,EAAE,KAAK,OAAQ,EAAE,EAAG,CACjC,GAAI,GAAI,EAAE,KAAK,GACf,AAAG,IAAM,EACP,EAAE,KAAK,GAAK,CAAC,KAAM,EAAG,OAAO,GAAM,OAAQ,CAAC,CAAC,EAAE,OAAQ,MAAM,EAAE,OAAO,GAEtE,EAAE,KAAK,GAAK,CAAC,KAAM,EAAG,OAAO,GAAO,OAAO,GAAM,MAAO,GAG5D,MAAI,GAAE,UACJ,GAAE,SAAW,IAEX,EAAE,WACJ,GAAE,UAAY,IAET,EAGT,YAAkB,EAAW,CAC3B,MAAO,IAAQ,CACb,KAAU,EAAU,KACpB,IAAU,GAAM,EAAU,KAC1B,KAAU,GAAM,EAAU,MAC1B,KAAU,GAAM,EAAU,MAC1B,SAAU,EAAU,WAIxB,YAAgB,EAAW,CAEzB,OADI,GAAO,GACH,EAAE,EAAG,EAAE,EAAU,KAAK,OAAQ,EAAE,EACtC,EAAK,KAAK,IAAI,GAEhB,GAAI,GAAU,GAAI,UAAS,IAAK,CAC9B,mBAAoB,EAAU,SAAU,eAAgB,EAAK,KAAK,KAAM,QAAS,EAAK,KAAK,KAAM,gBACjG,KAAK,KACP,MAAO,GAAQ,GAAS,IAG1B,GAAI,IAAa,CACf,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,KAAM,IACN,IAAM,IACN,KAAM,IACN,OAAQ,KACR,OAAQ,KACR,QAAS,OAEV,AAAC,WAAU,CACV,OAAQ,KAAM,IAAY,CACxB,GAAI,GAAK,GAAW,GACpB,GAAQ,GAAM,GAAO,CACnB,KAAM,CAAC,QAAQ,QAAQ,SACvB,KAAM,CAAC,KAAK,CAAC,IAAI,IAAI,KACd,KAAM,MAAM,EAAG,KACtB,SAAU,IAEZ,GAAQ,EAAG,MAAQ,GAAO,CACxB,KAAM,CAAC,QAAQ,SACf,KAAM,CAAC,KAAK,CAAC,IAAI,KACV,KAAK,IAAI,EAAG,MACnB,OAAQ,GACR,SAAU,EAAG,OAEf,GAAQ,EAAG,KAAO,GAAO,CACvB,KAAM,CAAC,QAAS,QAAS,UACzB,KAAM,CAAC,KAAK,CAAC,IAAI,IAAI,KACd,KAAK,MAAM,EAAG,KACrB,SAAU,EAAG,MAEf,GAAQ,EAAG,OAAS,GAAO,CACzB,KAAM,CAAC,QAAQ,UACf,KAAM,CAAC,KAAK,CAAC,IAAI,KACV,KAAK,IAAI,EAAG,MACnB,OAAQ,GACR,SAAU,EAAG,aAKnB,GAAI,IAAY,CACd,IAAK,IACL,KAAM,IACN,IAAK,IACL,MAAO,QAER,AAAC,WAAU,CACV,OAAQ,KAAM,IAAW,CACvB,GAAI,GAAK,GAAU,GACnB,GAAQ,GAAM,GAAO,CACnB,KAAM,CAAC,QAAS,SAChB,KAAM,CAAC,KAAK,CAAC,IAAI,KACV,KAAK,KAAK,EAAG,KACpB,SAAU,IAEZ,GAAQ,EAAG,MAAQ,GAAO,CACxB,KAAM,CAAC,SACP,KAAM,CAAC,KAAK,CAAC,KACN,KAAK,KAAK,EAAG,KACpB,OAAQ,GACR,MAAO,EACP,SAAU,EAAG,YAKnB,GAAI,IAAa,CACf,IAAK,KACL,GAAI,KACJ,GAAI,MACJ,IAAK,MACL,GAAI,IACJ,GAAI,IACJ,IAAK,KACL,IAAK,MAEN,AAAC,WAAW,CACX,OAAQ,KAAM,IAAY,CACxB,GAAI,GAAK,GAAW,GACpB,GAAQ,GAAM,GAAO,CACnB,KAAM,CAAC,QAAQ,QAAQ,SACvB,KAAM,CAAC,KAAK,CAAC,IAAK,IAAK,KAChB,KAAK,MAAM,EAAG,KACrB,SAAU,IAEZ,GAAQ,EAAG,KAAO,GAAO,CACvB,KAAM,CAAC,QAAQ,QAAQ,UACvB,KAAM,CAAC,KAAK,CAAC,IAAK,IAAK,KAChB,KAAK,MAAM,EAAG,KACrB,SAAU,EAAG,MAEf,GAAQ,EAAG,MAAQ,GAAO,CACxB,KAAM,CAAC,QAAS,SAChB,KAAM,CAAC,KAAK,CAAC,IAAK,KACX,KAAK,MAAM,EAAG,KACrB,OAAO,GACP,MAAM,EACN,SAAU,EAAG,OAEf,GAAQ,EAAG,OAAS,GAAO,CACzB,KAAM,CAAC,QAAS,UAChB,KAAM,CAAC,KAAK,CAAC,IAAI,KACV,KAAK,MAAM,EAAG,KACrB,OAAO,GACP,MAAM,EACN,SAAU,EAAG,aAKnB,GAAI,IAAa,CACf,MACA,OACA,OACA,OACA,OACA,MACA,MACA,QACA,MACA,QACA,MACA,OACA,OAED,AAAC,WAAW,CACX,OAAQ,GAAE,EAAG,EAAE,GAAW,OAAQ,EAAE,EAAG,CACrC,GAAI,GAAI,GAAW,GACnB,GAAQ,GAAK,GAAO,CACJ,KAAM,CAAC,QAAS,SAChB,IAAK,CAAC,KAAK,GAAI,KAAK,eAAe,EAAG,SAAS,CAAC,WAChD,KAAM,CAAC,KAAK,CAAC,IAAI,KAAM,KAAK,cAAe,SAAS,CAAC,WACrD,SAAU,IAE1B,GAAQ,EAAE,MAAQ,GAAO,CACP,KAAM,CAAC,SACP,IAAK,CAAC,KAAK,GAAI,KAAK,eAAe,EAAG,SAAS,CAAC,WAChD,KAAM,CAAC,KAAM,CAAC,KAAM,KAAK,cAAe,SAAS,CAAC,WAClD,OAAQ,GACR,MAAO,EACP,SAAU,EAAE,YAKlC,GAAI,IAAY,CACd,MACA,MACA,QACA,OAED,AAAC,WAAU,CACV,OAAQ,GAAE,EAAG,EAAE,GAAU,OAAQ,EAAE,EAAG,CACpC,GAAI,GAAG,GAAU,GACjB,GAAQ,GAAK,GAAO,CACN,KAAK,CAAC,QAAS,QAAS,SACxB,IAAK,CAAC,KAAK,GAAI,KAAK,eAAe,EAAG,SAAS,CAAC,WAChD,KAAM,CAAC,KAAK,CAAC,IAAI,IAAI,KAAM,KAAK,gBAAiB,SAAS,CAAC,WAC3D,SAAU,IAExB,GAAQ,EAAE,KAAO,GAAO,CACV,KAAK,CAAC,QAAS,QAAS,UACxB,IAAK,CAAC,KAAK,GAAI,KAAK,eAAe,EAAG,SAAS,CAAC,WAChD,KAAM,CAAC,KAAK,CAAC,IAAI,IAAI,KAAM,KAAK,gBAAiB,SAAS,CAAC,WAC3D,SAAU,EAAE,MAE1B,GAAQ,EAAE,MAAQ,GAAO,CAAE,KAAK,CAAC,QAAS,SAC5B,IAAK,CAAC,KAAK,GAAI,KAAK,eAAe,EAAG,SAAS,CAAC,WAChD,KAAM,CAAC,KAAK,CAAC,IAAI,KAAM,KAAK,gBAAiB,SAAS,CAAC,WACvD,OAAQ,GACR,MAAO,EACP,SAAU,EAAE,OAE1B,GAAQ,EAAE,OAAS,GAAO,CAAE,KAAK,CAAC,QAAS,UAC7B,IAAK,CAAC,KAAK,GAAI,KAAK,eAAe,EAAG,SAAS,CAAC,WAChD,KAAM,CAAC,KAAK,CAAC,IAAI,KAAM,KAAK,gBAAiB,SAAS,CAAC,WACvD,OAAO,GACP,MAAM,EACN,SAAU,EAAE,aAK9B,GAAI,IAAe,CACjB,QACA,OAED,AAAC,WAAU,CACV,OAAQ,GAAE,EAAG,EAAE,GAAa,OAAQ,EAAE,EAAG,CACvC,GAAI,GAAG,GAAa,GACpB,GAAQ,EAAE,MAAQ,GAAO,CACX,KAAK,CAAC,QAAS,QAAS,SACxB,IAAK,CAAC,KAAK,GAAI,KAAK,eAAe,EAAG,SAAS,CAAC,WAChD,KAAM,CAAC,KAAK,CAAC,IAAI,IAAI,KAAM,KAAK,gBAAiB,SAAS,CAAC,WAC3D,SAAU,EAAE,OAE1B,GAAQ,EAAE,OAAS,GAAO,CACZ,KAAK,CAAC,QAAS,QAAS,UACxB,IAAK,CAAC,KAAK,GAAI,KAAK,eAAe,EAAG,SAAS,CAAC,WAChD,KAAM,CAAC,KAAK,CAAC,IAAI,IAAI,KAAM,KAAK,gBAAiB,SAAS,CAAC,WAC3D,SAAU,EAAE,QAE1B,GAAQ,EAAE,QAAU,GAAO,CAAE,KAAK,CAAC,QAAS,SAC9B,IAAK,CAAC,KAAK,GAAI,KAAK,eAAe,EAAG,SAAS,CAAC,WAChD,KAAM,CAAC,KAAK,CAAC,IAAI,KAAM,KAAK,gBAAiB,SAAS,CAAC,WACvD,OAAQ,GACR,MAAO,EACP,SAAU,EAAE,SAE1B,GAAQ,EAAE,SAAW,GAAO,CAAE,KAAK,CAAC,QAAS,UAC/B,IAAK,CAAC,KAAK,GAAI,KAAK,eAAe,EAAG,SAAS,CAAC,WAChD,KAAM,CAAC,KAAK,CAAC,IAAI,KAAM,KAAK,gBAAiB,SAAS,CAAC,WACvD,OAAO,GACP,MAAM,EACN,SAAU,EAAE,eAK9B,GAAQ,IAAM,GAAQ,CACpB,KAAK,CAAC,SACN,IAAK,GACL,KAAM,CAAC,KAAK,CAAC,CAAC,KAAK,IAAK,OAAO,GAAO,OAAO,GAAM,MAAM,IAAK,KAAM,qBAAsB,UAAW,GAAI,SAAU,IACnH,KAAM,CAAC,KAAK,GAAI,UAAU,GAAI,SAAS,GAAI,KAAK,gBAChD,SAAU,QAGZ,GAAQ,IAAM,GAAQ,CACpB,KAAK,CAAC,SACN,IAAK,GACL,KAAM,CAAC,KAAK,CAAC,CAAC,KAAK,IAAK,OAAO,GAAO,OAAO,GAAM,MAAM,IAAK,KAAM,uBAAwB,UAAW,GAAI,SAAU,IACrH,KAAM,CAAC,KAAK,GAAI,UAAU,GAAI,SAAS,GAAI,KAAK,eAChD,SAAU,QAGZ,GAAQ,IAAM,GAAQ,CACpB,KAAK,CAAC,SACN,IAAK,CAAC,KAAK,GAAI,UAAU,GAAI,SAAS,CAAC,UAAW,KAAK,YACvD,KAAM,CAAC,KAAK,CAAC,CAAC,KAAK,IAAK,OAAO,GAAO,OAAO,GAAM,MAAM,IAAK,KAAM,YAAa,UAAW,GAAI,SAAU,CAAC,WAC3G,KAAM,CAAC,KAAK,GAAI,UAAU,GAAI,SAAS,CAAC,UAAW,KAAK,iBACxD,SAAU,QAGZ,GAAQ,KAAO,GAAQ,CACrB,KAAK,CAAC,SACN,IAAK,CAAC,KAAK,GAAI,UAAU,GAAI,SAAS,CAAC,UAAW,KAAK,YACvD,KAAM,CAAC,KAAK,CAAC,CAAC,KAAK,IAAK,OAAO,GAAO,OAAO,GAAM,MAAM,IAAK,KAAM,YAAa,UAAW,GAAI,SAAU,CAAC,WAC3G,KAAM,CAAC,KAAK,GAAI,UAAU,GAAI,SAAS,CAAC,UAAW,KAAK,iBACxD,SAAU,SAGZ,GAAQ,aAAe,GAAQ,CAC7B,KAAK,CAAC,SACN,IAAK,CAAC,KAAK,GAAI,UAAU,GAAI,SAAS,CAAC,UAAW,KAAK,YACvD,KAAM,CAAC,KAAK,CAAC,CAAC,KAAK,IAAK,OAAO,GAAO,OAAO,GAAM,MAAM,IAAK,KAAM,cAAe,UAAW,GAAI,SAAU,CAAC,WAC7G,KAAM,CAAC,KAAK,GAAI,UAAU,GAAI,SAAS,CAAC,UAAW,KAAK,iBACxD,SAAU,iBAGZ,GAAQ,MAAQ,GAAQ,CACtB,KAAK,CAAC,SACN,IAAK,CAAC,KAAK,GAAI,UAAU,GAAI,SAAS,CAAC,UAAW,KAAK,YACvD,KAAM,CAAC,KAAK,CAAC,CAAC,KAAK,IAAK,OAAO,GAAO,OAAO,GAAM,MAAM,IAAK,KAAM,cAAe,UAAW,GAAI,SAAU,CAAC,WAC7G,KAAM,CAAC,KAAK,GAAI,UAAU,GAAI,SAAS,CAAC,UAAW,KAAK,4BACxD,SAAU,UAIZ,GAAQ,QAAU,GAAQ,CACxB,KAAK,CAAC,SACN,IAAK,CAAC,KAAK,GAAI,UAAU,GAAI,SAAS,CAAC,UAAW,KAAK,YACvD,KAAM,CAAC,KAAK,CAAC,CAAC,KAAK,IAAK,OAAO,GAAO,OAAO,GAAM,MAAM,IAAK,KAAK,sDAAuD,UAAW,GAAI,SAAU,CAAC,WACpJ,KAAM,CAAC,KAAK,GAAI,UAAU,GAAI,SAAS,CAAC,UAAW,KAAK,iBACxD,SAAU,YAGZ,GAAQ,MAAQ,GAAQ,CACtB,KAAK,CAAC,SACN,IAAK,CAAC,KAAK,GAAI,UAAU,GAAI,SAAS,CAAC,UAAW,KAAK,YACvD,KAAM,CAAC,KAAK,CAAC,CAAC,KAAK,IAAK,OAAO,GAAO,OAAO,GAAM,MAAM,IAAK,KAAM,mBAAoB,UAAW,GAAI,SAAU,CAAC,WAClH,KAAM,CAAC,KAAK,GAAI,UAAU,GAAI,SAAS,CAAC,UAAW,KAAK,iBACxD,SAAU,UAGZ,GAAQ,IAAM,GAAQ,CACpB,KAAM,CAAE,SACR,IACC,CAAE,KAAM,mBACN,KAAM,GACN,SAAU,CAAE,UACZ,UAAW,IACd,KACC,CAAE,KAAM,mDACN,KAAM,CAAC,CAAC,KAAO,kBAAkB,OAAS,GAAM,OAAS,GAAK,MAAQ,IACtE,SAAU,CAAE,UACZ,UAAW,IACd,KACC,CAAE,KAAM,gBACN,KAAM,GACN,SAAU,CAAE,UACZ,UAAW,MAGhB,GAAQ,IAAM,GAAQ,CACpB,KAAM,CAAE,SACR,IACC,CAAE,KAAM,kBACN,KAAM,GACN,SAAU,CAAE,UACZ,UAAW,IACd,KACC,CAAE,KAAM,mDACN,KAAM,CAAC,CAAC,KAAO,kBAAkB,OAAS,GAAM,OAAS,GAAK,MAAQ,IACtE,SAAU,CAAE,UACZ,UAAW,IACd,KACC,CAAE,KAAM,gBACN,KAAM,GACN,SAAU,CAAE,UACZ,UAAW,MAGhB,GAAQ,OAAS,GAAQ,CACvB,KAAK,CAAC,QAAQ,QAAQ,SACtB,IAAI,CACF,KAAK,oDACL,KAAK,CACH,CAAC,KAAK,kBAAkB,OAAO,GAAM,OAAO,GAAM,MAAM,GACxD,CAAC,KAAK,kBAAkB,OAAO,GAAM,OAAO,GAAM,MAAM,GACxD,CAAC,KAAK,kBAAkB,OAAO,GAAM,OAAO,GAAK,MAAM,IAEzD,SAAS,CAAC,SAAS,UACnB,UAAU,IACZ,KAAK,CACH,KAAK,iLACL,KAAK,CACH,CAAC,KAAK,kBAAkB,OAAO,GAAM,OAAO,GAAK,MAAM,GACvD,CAAC,KAAK,kBAAkB,OAAO,GAAM,OAAO,GAAK,MAAM,IACzD,SAAS,CAAC,SAAS,UACnB,UAAU,CAAC,gBACb,KAAK,CACH,KAAK,kBACL,KAAK,GACL,SAAS,CAAC,UACV,UAAU,MAGd,GAAQ,OAAS,GAAQ,CACvB,KAAK,CAAC,QAAQ,QAAQ,SACtB,IAAI,CACF,KAAK,qDACL,KAAK,CACH,CAAC,KAAK,kBAAkB,OAAO,GAAM,OAAO,GAAM,MAAM,GACxD,CAAC,KAAK,kBAAkB,OAAO,GAAM,OAAO,GAAM,MAAM,GACxD,CAAC,KAAK,kBAAkB,OAAO,GAAM,OAAO,GAAK,MAAM,IAEzD,SAAS,CAAC,SAAS,UACnB,UAAU,IACZ,KAAK,CACH,KAAK,iLACL,KAAK,CACH,CAAC,KAAK,kBAAkB,OAAO,GAAM,OAAO,GAAK,MAAM,GACvD,CAAC,KAAK,kBAAkB,OAAO,GAAM,OAAO,GAAK,MAAM,IACzD,SAAS,CAAC,SAAS,UACnB,UAAU,CAAC,gBACb,KAAK,CACH,KAAK,kBACL,KAAK,GACL,SAAS,CAAC,UACV,UAAU,MAGd,GAAQ,OAAS,GAAO,CACtB,KAAM,CAAC,SACP,IAAK,CAAC,KAAK,GAAI,KAAK,qBAAsB,SAAS,CAAC,WACpD,KAAM,CAAC,KAAM,CAAC,KAAM,KAAK,aAAc,SAAS,CAAC,WACjD,SAAU,WAGZ,GAAQ,OAAS,GAAO,CACtB,KAAK,CAAC,QAAS,SACf,KAAM,CAAC,KAAK,CAAC,IAAK,KAAM,KAAK,OAC7B,SAAU,WAEZ,GAAQ,QAAU,GAAO,CACvB,KAAK,CAAC,QAAS,UACf,KAAM,CAAC,KAAK,CAAC,IAAK,KAAM,KAAK,OAC7B,SAAU,YAGZ,GAAQ,OAAS,GAAQ,CACvB,KAAK,CAAC,QAAS,SACf,IAAK,GACL,KAAM,CAAC,KAAK,CAAC,CAAC,KAAK,IAAK,OAAO,GAAO,OAAO,GAAM,MAAM,GAC5C,CAAC,KAAK,IAAK,OAAO,GAAO,OAAO,GAAM,MAAM,IACnD,KAAM,0BACN,UAAW,GACX,SAAU,IAChB,KAAM,CAAC,KAAK,GAAI,UAAU,GAAI,SAAS,GAAI,KAAK,eAChD,SAAU,aCzcZ,sBAAI,IAAS,QAAQ,UAOrB,GAAU,GAAO,QAAU,GAC3B,GAAQ,QAAU,GAIlB,YAAkB,EAAO,EAAK,EAAM,CAClC,EAAQ,GAAS,SAAU,EAAM,CAAE,KAAK,MAAM,IAC9C,EAAM,GAAO,UAAY,CAAE,KAAK,MAAM,OAEtC,GAAI,GAAQ,GAAO,EAAY,GAAO,EAAS,GAAI,EAAS,GACxD,EAAS,GAAI,IACjB,EAAO,SAAW,EAAO,SAAW,GACpC,EAAO,OAAS,GAGhB,EAAO,YAAc,CAAE,IAAQ,EAAK,cAAgB,IAEpD,EAAO,MAAQ,SAAU,EAAM,CAC7B,SAAM,KAAK,KAAM,GACV,CAAC,EAAO,QAGjB,YAAiB,CACf,KAAM,EAAO,QAAU,CAAC,EAAO,QAAQ,CACrC,GAAI,GAAO,EAAO,QAClB,GAAG,AAAS,IAAT,KACD,MAAO,GAAO,KAAK,OAEnB,EAAO,KAAK,OAAQ,IAI1B,EAAO,MAAQ,EAAO,KAAO,SAAU,EAAM,CAE3C,MAAG,IACA,KAAS,MAAM,GAAS,IAC3B,EAAO,KAAK,GACZ,KACO,GAST,EAAO,GAAG,MAAO,UAAY,CAC3B,EAAO,SAAW,GACf,CAAC,EAAO,UAAY,EAAO,aAC5B,QAAQ,SAAS,UAAY,CAC3B,EAAO,cAIb,YAAiB,CACf,EAAO,SAAW,GAClB,EAAI,KAAK,GACN,CAAC,EAAO,UAAY,EAAO,aAC5B,EAAO,UAGX,SAAO,IAAM,SAAU,EAAM,CAC3B,GAAG,GACH,SAAQ,GACL,UAAU,QAAQ,EAAO,MAAM,GAClC,IACO,GAGT,EAAO,QAAU,UAAY,CAC3B,GAAG,GACH,SAAY,GACZ,EAAQ,GACR,EAAO,OAAS,EAChB,EAAO,SAAW,EAAO,SAAW,GACpC,EAAO,KAAK,SACL,GAGT,EAAO,MAAQ,UAAY,CACzB,GAAG,GAAO,OACV,SAAO,OAAS,GACT,GAGT,EAAO,OAAS,UAAY,CAC1B,MAAG,GAAO,QACR,GAAO,OAAS,GAChB,EAAO,KAAK,WAEd,IAGI,EAAO,QACT,EAAO,KAAK,SACP,GAEF,KCzGT,gCAEA,GAAI,IAAgB,KAChB,GAAa,KACb,GAAS,KACT,GAAM,KAAwB,IAC9B,GAAU,KACV,GAAM,KACN,GAAU,KAEd,YAAqB,EAAO,EAAM,EAAO,CACvC,GAAI,GAAG,EAAG,EAAM,EAAG,EACnB,GAAI,EAAM,MAAM,SAAW,EACzB,MAAO,IAAW,EAAM,KAAK,GAAQ,EAAM,GACtC,GAAI,EAAM,MAAM,SAAW,EAChC,GAAI,EAAM,MAAM,KAAO,EACrB,GAAI,OACF,GAAQ,EACN,CAAC,EAAM,MAAM,GAAI,EAAM,MAAM,GAAI,GACjC,CAAC,EAAG,EAAI,EAAM,MAAM,GAAI,IAC1B,GACF,GAAI,QACF,GAAQ,EACN,CAAC,EAAM,MAAM,GAAK,EAAM,MAAM,IAC9B,CAAC,GACD,GACF,aACO,EAAM,MAAM,KAAO,EAC5B,GAAI,OACF,GAAQ,EACN,CAAC,EAAM,MAAM,GAAI,EAAM,MAAM,GAAI,GACjC,CAAC,EAAG,EAAM,MAAM,GAAK,EAAG,IAC1B,WACO,EAAM,MAAM,KAAO,EAC5B,GAAI,OACF,GAAQ,EACN,CAAC,EAAM,MAAM,GAAI,EAAM,MAAM,GAAI,GACjC,CAAC,EAAG,EAAI,EAAM,MAAM,GAAI,IAC1B,GAAQ,EAAM,KACZ,CAAC,EAAM,MAAM,GAAI,EAAM,MAAM,GAAI,GACjC,CAAC,EAAM,OAAO,GAAI,EAAM,OAAO,GAAI,GACnC,EAAM,SACV,GAAI,QACF,GAAQ,EACN,CAAC,EAAM,MAAM,GAAK,EAAM,MAAM,IAC9B,CAAC,GACD,GACF,SAEF,OAAO,IAAI,OAAM,oCAEV,EAAM,MAAM,SAAW,EAChC,GAAI,OACF,GAAQ,EACN,CAAC,EAAM,MAAM,GAAI,EAAM,MAAM,GAAI,GACjC,CAAC,EAAG,EAAI,EAAM,MAAM,GAAI,IAC1B,GAAQ,EAAM,KACZ,CAAC,EAAM,MAAM,GAAI,EAAM,MAAM,GAAI,GACjC,CAAC,EAAM,OAAO,GAAI,EAAM,OAAO,GAAI,GACnC,EAAM,SACV,GAAI,QACF,GAAQ,EACN,CAAC,EAAM,MAAM,GAAK,EAAM,MAAM,IAC9B,CAAC,GACD,GACF,SAEF,OAAO,IAAI,OAAM,4BAEnB,MAAO,GAGT,YAAmB,EAAK,CACtB,GAAI,GAAS,KACb,SAAO,KAAK,QAAS,GACd,EAGT,GAAO,QAAU,SAAqB,EAAO,EAAM,EAAS,CAE1D,OADA,EAAU,GAAW,GACb,EAAK,mBACN,UACA,WACA,WACA,YACA,UACA,OACH,GAAI,GAAQ,EAAM,MAAM,GACpB,EAAS,EAAM,MAAM,GACrB,EAAO,GAAI,QAAO,EAAQ,EAAS,GACvC,EAAO,GAAW,EAAO,GACzB,GAAI,GAAe,CACjB,KAAM,EACN,MAAO,EACP,OAAQ,GAEN,EAAgB,GAAO,OAAO,EAAc,EAAQ,SACxD,MAAO,IAAI,IAAc,EAAc,UAEpC,UACA,OACH,GAAI,GAAS,EAAM,MAAM,SAAW,EAAI,EAAM,MAAM,GAAK,EACrD,EAAQ,EAAM,MAAM,SAAW,EAAI,EAAM,MAAM,GAAK,EAAM,MAAM,GAChE,EAAS,EAAM,MAAM,SAAW,EAAI,EAAM,MAAM,GAAK,EAAM,MAAM,GACjE,EAAO,GAAI,QAAO,EAAQ,EAAS,GACnC,EAAM,GAAI,IAAW,EAAO,GAChC,EAAI,cACJ,OAAS,GAAI,EAAG,EAAI,EAAQ,IAC1B,EAAO,GAAW,EAAO,EAAM,GAC/B,EAAI,SAAS,GAEf,SAAI,SACG,MAEJ,UACA,OACH,GAAI,GAAM,GAAI,IAAI,CAChB,MAAO,EAAM,MAAM,GACnB,OAAQ,EAAM,MAAM,KAElB,EAAO,GAAW,EAAO,EAAI,MACjC,MAAI,OAAO,IAAS,QAAgB,GAAS,GAC7C,GAAI,KAAO,EACJ,EAAI,YAER,SACH,GAAI,GAAS,SAAS,cAAc,UAChC,EAAU,EAAO,WAAW,MAChC,EAAO,MAAQ,EAAM,MAAM,GAC3B,EAAO,OAAS,EAAM,MAAM,GAC5B,GAAI,GAAY,EAAQ,aAAa,EAAG,EAAG,EAAO,MAAO,EAAO,QAC5D,EAAO,EAAU,KAErB,MADA,GAAO,GAAW,EAAO,GACrB,MAAO,IAAS,QAAgB,GAAS,GAC7C,GAAQ,aAAa,EAAW,EAAG,GAC5B,WAGP,MAAO,IAAS,GAAI,OAAM,0BAA4B,QC1I5D,gCAGA,GAAI,IAAO,QAAQ,QACf,GAAS,QAAQ,UAGjB,GAAc,GAAO,QAAU,UAAW,CAC5C,GAAO,KAAK,MAEZ,KAAK,SAAW,GAChB,KAAK,UAAY,EAEjB,KAAK,OAAS,GACd,KAAK,QAAU,GAEf,KAAK,UAAY,OACjB,KAAK,SAAW,IAElB,GAAK,SAAS,GAAa,IAG3B,GAAY,UAAU,KAAO,SAAS,EAAQ,EAAU,CAEtD,KAAK,OAAO,KAAK,CACf,OAAQ,KAAK,IAAI,GACjB,UAAW,EAAS,EACpB,KAAM,IAGR,QAAQ,SAAS,UAAW,CAC1B,KAAK,WAGD,KAAK,SAAW,KAAK,OAAO,OAAS,GACvC,MAAK,QAAU,GAEf,KAAK,KAAK,WAEZ,KAAK,QAGT,GAAY,UAAU,MAAQ,SAAS,EAAM,EAAU,CAErD,GAAI,CAAC,KAAK,SACR,YAAK,KAAK,QAAS,GAAI,OAAM,wBACtB,GAGT,GAAI,GACJ,MAAI,QAAO,SAAS,GAClB,EAAa,EAGb,EAAa,GAAI,QAAO,EAAM,GAAY,KAAK,WAGjD,KAAK,SAAS,KAAK,GACnB,KAAK,WAAa,EAAW,OAE7B,KAAK,WAGD,KAAK,QAAU,KAAK,OAAO,SAAW,GACxC,MAAK,QAAU,IAGV,KAAK,UAAY,CAAC,KAAK,SAGhC,GAAY,UAAU,IAAM,SAAS,EAAM,EAAU,CASnD,AAPI,GACF,KAAK,MAAM,EAAM,GAGnB,KAAK,SAAW,GAGZ,EAAC,KAAK,UAKV,CAAI,KAAK,SAAS,SAAW,EAC3B,KAAK,OAGL,MAAK,SAAS,KAAK,MACnB,KAAK,cAIT,GAAY,UAAU,YAAc,GAAY,UAAU,IAE1D,GAAY,UAAU,KAAO,UAAW,CAEtC,AAAI,KAAK,OAAO,OAAS,GACvB,KAAK,KAAK,QACR,GAAI,OAAM,4BAId,KAAK,WAGP,GAAY,UAAU,QAAU,UAAW,CAEzC,AAAI,CAAC,KAAK,UAIV,MAAK,SAAW,GAChB,KAAK,OAAS,KACd,KAAK,SAAW,KAEhB,KAAK,KAAK,WAGZ,GAAY,UAAU,yBAA2B,SAAS,EAAM,CAE9D,KAAK,OAAO,QAGZ,GAAI,GAAa,KAAK,SAAS,GAG/B,AAAI,EAAW,OAAS,EAAK,OAE3B,MAAK,WAAa,EAAK,OACvB,KAAK,SAAS,GAAK,EAAW,MAAM,EAAK,QAEzC,EAAK,KAAK,KAAK,KAAM,EAAW,MAAM,EAAG,EAAK,UAK9C,MAAK,WAAa,EAAW,OAC7B,KAAK,SAAS,QAEd,EAAK,KAAK,KAAK,KAAM,KAIzB,GAAY,UAAU,aAAe,SAAS,EAAM,CAClD,KAAK,OAAO,QAOZ,OALI,GAAM,EACN,EAAQ,EACR,EAAO,GAAI,QAAO,EAAK,QAGpB,EAAM,EAAK,QAAQ,CAExB,GAAI,GAAM,KAAK,SAAS,KACpB,EAAM,KAAK,IAAI,EAAI,OAAQ,EAAK,OAAS,GAE7C,EAAI,KAAK,EAAM,EAAK,EAAG,GACvB,GAAO,EAGH,IAAQ,EAAI,QACd,MAAK,SAAS,EAAE,GAAS,EAAI,MAAM,IAKvC,AAAI,EAAQ,GACV,KAAK,SAAS,OAAO,EAAG,GAG1B,KAAK,WAAa,EAAK,OAEvB,EAAK,KAAK,KAAK,KAAM,IAGvB,GAAY,UAAU,SAAW,UAAW,CAE1C,GAAI,CAEF,KAAO,KAAK,UAAY,GAAK,KAAK,QAAU,KAAK,OAAO,OAAS,GAAG,CAElE,GAAI,GAAO,KAAK,OAAO,GAGvB,GAAI,EAAK,UACP,KAAK,yBAAyB,WAGvB,KAAK,WAAa,EAAK,OAG9B,KAAK,aAAa,OAKlB,OAIJ,AAAI,KAAK,UAAY,CAAC,KAAK,UACzB,KAAK,aAGF,EAAP,CACE,KAAK,KAAK,QAAS,OC9MvB,2BAcA,GAAI,IAAc,CAChB,CACE,EAAG,CAAC,GACJ,EAAG,CAAC,IAEN,CACE,EAAG,CAAC,GACJ,EAAG,CAAC,IAEN,CACE,EAAG,CAAC,EAAG,GACP,EAAG,CAAC,IAEN,CACE,EAAG,CAAC,EAAG,GACP,EAAG,CAAC,EAAG,IAET,CACE,EAAG,CAAC,EAAG,EAAG,EAAG,GACb,EAAG,CAAC,EAAG,IAET,CACE,EAAG,CAAC,EAAG,EAAG,EAAG,GACb,EAAG,CAAC,EAAG,EAAG,EAAG,IAEf,CACE,EAAG,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACzB,EAAG,CAAC,EAAG,EAAG,EAAG,KAIjB,GAAQ,eAAiB,SAAS,EAAO,EAAQ,CAM/C,OALI,GAAS,GACT,EAAY,EAAQ,EACpB,EAAY,EAAS,EACrB,EAAY,GAAQ,GAAa,EACjC,EAAY,GAAS,GAAa,EAC7B,EAAI,EAAG,EAAI,GAAY,OAAQ,IAAK,CAI3C,OAHI,GAAO,GAAY,GACnB,EAAY,EAAW,EAAK,EAAE,OAC9B,EAAa,EAAW,EAAK,EAAE,OAC1B,EAAI,EAAG,EAAI,EAAK,EAAE,QACrB,EAAK,EAAE,GAAK,EADiB,IAE/B,IAMJ,IAAK,EAAI,EAAG,EAAI,EAAK,EAAE,QACjB,EAAK,EAAE,GAAK,EADa,IAE3B,IAMJ,AAAI,EAAY,GAAK,EAAa,GAChC,EAAO,KAAK,CAAE,MAAO,EAAW,OAAQ,EAAY,MAAO,IAG/D,MAAO,IAGT,GAAQ,qBAAuB,SAAS,EAAO,CAC7C,MAAO,UAAS,EAAG,EAAG,EAAM,CAC1B,GAAI,GAAiB,EAAI,GAAY,GAAM,EAAE,OACzC,EAAY,GAAI,GAAkB,GAAY,GAAM,EAAE,OAAU,EAAK,GAAY,GAAM,EAAE,GACzF,EAAiB,EAAI,GAAY,GAAM,EAAE,OACzC,EAAY,GAAI,GAAkB,GAAY,GAAM,EAAE,OAAU,EAAK,GAAY,GAAM,EAAE,GAC7F,MAAQ,GAAS,EAAM,EAAS,EAAQ,MCpF5C,gCAEA,GAAO,QAAU,SAAwB,EAAM,EAAO,EAAQ,CAE5D,GAAI,GAAQ,EAAO,EAAQ,EACvB,EAAQ,KAAK,IAAI,EAAQ,GACzB,EAAS,KAAK,IAAI,EAAQ,GAC1B,EAAU,KAAK,IAAI,EAAQ,GAE/B,MAAI,IAAS,GAAU,GAAS,EACvB,EAEL,GAAU,EACL,EAEF,KCfT,gCAEA,GAAI,IAAiB,KACjB,GAAiB,KAErB,YAAsB,EAAO,EAAK,EAAO,CACvC,GAAI,GAAY,EAAQ,EACxB,MAAI,KAAU,GACZ,GAAY,KAAK,KAAK,EAAa,GAAI,KAElC,EAGT,GAAI,IAAS,GAAO,QAAU,SAAS,EAAY,EAAc,CAE/D,GAAI,GAAQ,EAAW,MACnB,EAAS,EAAW,OACpB,EAAY,EAAW,UACvB,EAAM,EAAW,IACjB,EAAQ,EAAW,MAQvB,GANA,KAAK,KAAO,EAAa,KACzB,KAAK,MAAQ,EAAa,MAC1B,KAAK,SAAW,EAAa,SAE7B,KAAK,YAAc,EACnB,KAAK,QAAU,GACX,EAEF,OADI,GAAS,GAAe,eAAe,EAAO,GACzC,EAAI,EAAG,EAAI,EAAO,OAAQ,IACjC,KAAK,QAAQ,KAAK,CAChB,UAAW,GAAa,EAAO,GAAG,MAAO,EAAK,GAC9C,OAAQ,EAAO,GAAG,OAClB,UAAW,QAKf,MAAK,QAAQ,KAAK,CAChB,UAAW,GAAa,EAAO,EAAK,GACpC,OAAQ,EACR,UAAW,IAQf,AAAI,IAAU,EACZ,KAAK,aAAe,EAEjB,AAAI,IAAU,GACjB,KAAK,aAAe,EAAM,EAG1B,KAAK,aAAe,GAIxB,GAAO,UAAU,MAAQ,UAAW,CAClC,KAAK,KAAK,KAAK,QAAQ,KAAK,aAAa,UAAY,EAAG,KAAK,mBAAmB,KAAK,QAGvF,GAAO,UAAU,eAAiB,SAAS,EAAS,EAAgB,EAAW,CAK7E,OAHI,GAAc,KAAK,aACnB,EAAc,EAAc,EAEvB,EAAI,EAAG,EAAI,EAAW,IAAK,CAClC,GAAI,GAAU,EAAQ,EAAI,GACtB,EAAS,EAAI,EAAc,EAAe,EAAI,GAAe,EACjE,EAAe,GAAK,EAAU,IAIlC,GAAO,UAAU,eAAiB,SAAS,EAAS,EAAgB,EAAW,CAI7E,OAFI,GAAW,KAAK,UAEX,EAAI,EAAG,EAAI,EAAW,IAAK,CAClC,GAAI,GAAU,EAAQ,EAAI,GACtB,EAAO,EAAW,EAAS,GAAK,EACpC,EAAe,GAAK,EAAU,IAIlC,GAAO,UAAU,eAAiB,SAAS,EAAS,EAAgB,EAAW,CAM7E,OAJI,GAAc,KAAK,aACnB,EAAc,EAAc,EAC5B,EAAW,KAAK,UAEX,EAAI,EAAG,EAAI,EAAW,IAAK,CAClC,GAAI,GAAU,EAAQ,EAAI,GACtB,EAAO,EAAW,EAAS,GAAK,EAChC,EAAS,EAAI,EAAc,EAAe,EAAI,GAAe,EAC7D,EAAQ,KAAK,MAAO,GAAS,GAAQ,GACzC,EAAe,GAAK,EAAU,IAIlC,GAAO,UAAU,eAAiB,SAAS,EAAS,EAAgB,EAAW,CAM7E,OAJI,GAAc,KAAK,aACnB,EAAc,EAAc,EAC5B,EAAW,KAAK,UAEX,EAAI,EAAG,EAAI,EAAW,IAAK,CAClC,GAAI,GAAU,EAAQ,EAAI,GACtB,EAAO,EAAW,EAAS,GAAK,EAChC,EAAS,EAAI,EAAc,EAAe,EAAI,GAAe,EAC7D,EAAW,EAAI,GAAe,EAAW,EAAS,EAAI,GAAe,EACrE,EAAQ,GAAe,EAAQ,EAAM,GACzC,EAAe,GAAK,EAAU,IAIlC,GAAO,UAAU,mBAAqB,SAAS,EAAS,CAEtD,GAAI,GAAS,EAAQ,GACjB,EACA,EAAe,KAAK,QAAQ,KAAK,aACjC,EAAY,EAAa,UAE7B,GAAI,IAAW,EACb,EAAiB,EAAQ,MAAM,EAAG,EAAY,OAM9C,QAFA,EAAiB,GAAI,QAAO,GAEpB,OACD,GACH,KAAK,eAAe,EAAS,EAAgB,GAC7C,UACG,GACH,KAAK,eAAe,EAAS,EAAgB,GAC7C,UACG,GACH,KAAK,eAAe,EAAS,EAAgB,GAC7C,UACG,GACH,KAAK,eAAe,EAAS,EAAgB,GAC7C,cAEA,KAAM,IAAI,OAAM,8BAAgC,GAItD,KAAK,MAAM,GAEX,EAAa,YACb,AAAI,EAAa,WAAa,EAAa,OACzC,MAAK,UAAY,KACjB,KAAK,cACL,EAAe,KAAK,QAAQ,KAAK,cAGjC,KAAK,UAAY,EAGnB,AAAI,EAEF,KAAK,KAAK,EAAa,UAAY,EAAG,KAAK,mBAAmB,KAAK,OAGnE,MAAK,UAAY,KACjB,KAAK,eCxKT,gCAEA,GAAI,IAAO,QAAQ,QACf,GAAc,KACd,GAAS,KAGT,GAAc,GAAO,QAAU,SAAS,EAAY,CACtD,GAAY,KAAK,MAEjB,GAAI,GAAU,GACV,EAAO,KACX,KAAK,QAAU,GAAI,IAAO,EAAY,CACpC,KAAM,KAAK,KAAK,KAAK,MACrB,MAAO,SAAS,EAAQ,CACtB,EAAQ,KAAK,IAEf,SAAU,UAAW,CACnB,EAAK,KAAK,WAAY,OAAO,OAAO,OAIxC,KAAK,QAAQ,SAEf,GAAK,SAAS,GAAa,MCxB3B,gCAGA,GAAO,QAAU,CAEf,cAAe,CAAC,IAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,IAE1D,UAAW,WACX,UAAW,WACX,UAAW,WACX,UAAW,WACX,UAAW,WACX,UAAW,WAGX,oBAAqB,EACrB,kBAAmB,EACnB,gBAAiB,EACjB,gBAAiB,EAGjB,wBAAyB,EACzB,sBAAuB,EAEvB,qBAAsB,CACpB,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,GAGL,eAAgB,OChClB,gCAEA,GAAI,IAAW,GAEf,AAAC,WAAW,CACV,OAAS,GAAI,EAAG,EAAI,IAAK,IAAK,CAE5B,OADI,GAAa,EACR,EAAI,EAAG,EAAI,EAAG,IACrB,AAAI,EAAa,EACf,EAAa,WAAc,IAAe,EAG1C,EAAa,IAAe,EAGhC,GAAS,GAAK,OAIlB,GAAI,IAAgB,GAAO,QAAU,UAAW,CAC9C,KAAK,KAAO,IAGd,GAAc,UAAU,MAAQ,SAAS,EAAM,CAE7C,OAAS,GAAI,EAAG,EAAI,EAAK,OAAQ,IAC/B,KAAK,KAAO,GAAU,MAAK,KAAO,EAAK,IAAM,KAAS,KAAK,OAAS,EAEtE,MAAO,IAGT,GAAc,UAAU,MAAQ,UAAW,CACzC,MAAO,MAAK,KAAO,IAIrB,GAAc,MAAQ,SAAS,EAAK,CAGlC,OADI,GAAM,GACD,EAAI,EAAG,EAAI,EAAI,OAAQ,IAC9B,EAAM,GAAU,GAAM,EAAI,IAAM,KAAS,IAAQ,EAEnD,MAAO,GAAM,MC1Cf,gCAEA,GAAI,IAAY,KACZ,GAAgB,KAGhB,GAAS,GAAO,QAAU,SAAS,EAAS,EAAc,CAE5D,KAAK,SAAW,EAChB,EAAQ,SAAW,EAAQ,WAAa,GAExC,KAAK,SAAW,GAChB,KAAK,SAAW,GAChB,KAAK,wBAA0B,GAG/B,KAAK,SAAW,GAChB,KAAK,WAAa,EAElB,KAAK,QAAU,GACf,KAAK,QAAQ,GAAU,WAAa,KAAK,YAAY,KAAK,MAC1D,KAAK,QAAQ,GAAU,WAAa,KAAK,YAAY,KAAK,MAC1D,KAAK,QAAQ,GAAU,WAAa,KAAK,YAAY,KAAK,MAC1D,KAAK,QAAQ,GAAU,WAAa,KAAK,YAAY,KAAK,MAC1D,KAAK,QAAQ,GAAU,WAAa,KAAK,YAAY,KAAK,MAC1D,KAAK,QAAQ,GAAU,WAAa,KAAK,YAAY,KAAK,MAE1D,KAAK,KAAO,EAAa,KACzB,KAAK,MAAQ,EAAa,MAC1B,KAAK,SAAW,EAAa,SAC7B,KAAK,MAAQ,EAAa,MAC1B,KAAK,WAAa,EAAa,WAC/B,KAAK,QAAU,EAAa,QAC5B,KAAK,OAAS,EAAa,OAC3B,KAAK,YAAc,EAAa,YAChC,KAAK,SAAW,EAAa,SAC7B,KAAK,mBAAqB,EAAa,mBACvC,KAAK,gBAAkB,EAAa,iBAAmB,UAAW,IAGpE,GAAO,UAAU,MAAQ,UAAW,CAClC,KAAK,KAAK,GAAU,cAAc,OAChC,KAAK,gBAAgB,KAAK,QAI9B,GAAO,UAAU,gBAAkB,SAAS,EAAM,CAIhD,OAFI,GAAY,GAAU,cAEjB,EAAI,EAAG,EAAI,EAAU,OAAQ,IACpC,GAAI,EAAK,KAAO,EAAU,GAAI,CAC5B,KAAK,MAAM,GAAI,OAAM,2BACrB,OAGJ,KAAK,KAAK,EAAG,KAAK,iBAAiB,KAAK,QAG1C,GAAO,UAAU,iBAAmB,SAAS,EAAM,CAQjD,OALI,GAAS,EAAK,aAAa,GAG3B,EAAO,EAAK,aAAa,GACzB,EAAO,GACF,EAAI,EAAG,EAAI,EAAG,IACrB,GAAQ,OAAO,aAAa,EAAK,IAMnC,GAAI,GAAY,QAAQ,EAAK,GAAK,IAIlC,GAAI,CAAC,KAAK,UAAY,IAAS,GAAU,UAAW,CAClD,KAAK,MAAM,GAAI,OAAM,+BACrB,OAMF,GAHA,KAAK,KAAO,GAAI,IAChB,KAAK,KAAK,MAAM,GAAI,QAAO,IAEvB,KAAK,QAAQ,GACf,MAAO,MAAK,QAAQ,GAAM,GAG5B,GAAI,CAAC,EAAW,CACd,KAAK,MAAM,GAAI,OAAM,mCAAqC,IAC1D,OAGF,KAAK,KAAK,EAAS,EAAG,KAAK,WAAW,KAAK,QAG7C,GAAO,UAAU,WAAa,UAAmB,CAC/C,KAAK,KAAK,EAAG,KAAK,iBAAiB,KAAK,QAG1C,GAAO,UAAU,gBAAkB,UAAW,CAC5C,KAAK,KAAK,EAAG,KAAK,eAAe,KAAK,QAGxC,GAAO,UAAU,eAAiB,SAAS,EAAM,CAE/C,GAAI,GAAU,EAAK,YAAY,GAC3B,EAAU,KAAK,KAAK,QAGxB,GAAI,KAAK,SAAS,UAAY,IAAY,EAAS,CACjD,KAAK,MAAM,GAAI,OAAM,eAAiB,EAAU,MAAQ,IACxD,OAGF,AAAK,KAAK,UACR,KAAK,KAAK,EAAG,KAAK,iBAAiB,KAAK,QAI5C,GAAO,UAAU,YAAc,SAAS,EAAQ,CAC9C,KAAK,KAAK,EAAQ,KAAK,WAAW,KAAK,QAEzC,GAAO,UAAU,WAAa,SAAS,EAAM,CAE3C,KAAK,KAAK,MAAM,GAEhB,GAAI,GAAQ,EAAK,aAAa,GAC1B,EAAS,EAAK,aAAa,GAC3B,EAAQ,EAAK,GACb,EAAY,EAAK,GACjB,EAAQ,EAAK,IACb,EAAS,EAAK,IACd,EAAY,EAAK,IAOrB,GAAI,IAAU,GAAK,IAAU,GAAK,IAAU,GAAK,IAAU,GAAK,IAAU,GAAI,CAC5E,KAAK,MAAM,GAAI,OAAM,yBAA2B,IAChD,OAEF,GAAI,CAAE,KAAa,IAAU,sBAAuB,CAClD,KAAK,MAAM,GAAI,OAAM,2BACrB,OAEF,GAAI,IAAU,EAAG,CACf,KAAK,MAAM,GAAI,OAAM,mCACrB,OAEF,GAAI,IAAW,EAAG,CAChB,KAAK,MAAM,GAAI,OAAM,8BACrB,OAEF,GAAI,IAAc,GAAK,IAAc,EAAG,CACtC,KAAK,MAAM,GAAI,OAAM,iCACrB,OAGF,KAAK,WAAa,EAElB,GAAI,GAAM,GAAU,qBAAqB,KAAK,YAE9C,KAAK,SAAW,GAEhB,KAAK,SAAS,CACZ,MAAO,EACP,OAAQ,EACR,MAAO,EACP,UAAW,QAAQ,GACnB,QAAS,QAAQ,EAAY,GAAU,mBACvC,MAAO,QAAQ,EAAY,GAAU,iBACrC,MAAO,QAAQ,EAAY,GAAU,iBACrC,IAAK,EACL,UAAW,IAGb,KAAK,mBAIP,GAAO,UAAU,YAAc,SAAS,EAAQ,CAC9C,KAAK,KAAK,EAAQ,KAAK,WAAW,KAAK,QAEzC,GAAO,UAAU,WAAa,SAAS,EAAM,CAE3C,KAAK,KAAK,MAAM,GAKhB,OAHI,GAAU,KAAK,MAAM,EAAK,OAAS,GAG9B,EAAI,EAAG,EAAI,EAAS,IAC3B,KAAK,SAAS,KAAK,CACjB,EAAK,EAAI,GACT,EAAK,EAAI,EAAI,GACb,EAAK,EAAI,EAAI,GACb,MAIJ,KAAK,QAAQ,KAAK,UAElB,KAAK,mBAGP,GAAO,UAAU,YAAc,SAAS,EAAQ,CAC9C,KAAK,qBACL,KAAK,KAAK,EAAQ,KAAK,WAAW,KAAK,QAEzC,GAAO,UAAU,WAAa,SAAS,EAAM,CAK3C,GAHA,KAAK,KAAK,MAAM,GAGZ,KAAK,aAAe,GAAU,wBAAyB,CACzD,GAAI,KAAK,SAAS,SAAW,EAAG,CAC9B,KAAK,MAAM,GAAI,OAAM,6CACrB,OAEF,GAAI,EAAK,OAAS,KAAK,SAAS,OAAQ,CACtC,KAAK,MAAM,GAAI,OAAM,8CACrB,OAEF,OAAS,GAAI,EAAG,EAAI,EAAK,OAAQ,IAC/B,KAAK,SAAS,GAAG,GAAK,EAAK,GAE7B,KAAK,QAAQ,KAAK,UAKpB,AAAI,KAAK,aAAe,GAAU,qBAEhC,KAAK,WAAW,CAAC,EAAK,aAAa,KAEjC,KAAK,aAAe,GAAU,iBAChC,KAAK,WAAW,CAAC,EAAK,aAAa,GAAI,EAAK,aAAa,GAAI,EAAK,aAAa,KAGjF,KAAK,mBAGP,GAAO,UAAU,YAAc,SAAS,EAAQ,CAC9C,KAAK,KAAK,EAAQ,KAAK,WAAW,KAAK,QAEzC,GAAO,UAAU,WAAa,SAAS,EAAM,CAE3C,KAAK,KAAK,MAAM,GAChB,KAAK,MAAM,EAAK,aAAa,GAAK,GAAU,gBAE5C,KAAK,mBAGP,GAAO,UAAU,YAAc,SAAS,EAAQ,CAC9C,AAAK,KAAK,yBACR,MAAK,wBAA0B,GAC/B,KAAK,mBAEP,KAAK,KAAK,CAAC,EAAQ,KAAK,WAAW,KAAK,KAAM,KAEhD,GAAO,UAAU,WAAa,SAAS,EAAQ,EAAM,CAInD,GAFA,KAAK,KAAK,MAAM,GAEZ,KAAK,aAAe,GAAU,yBAA2B,KAAK,SAAS,SAAW,EACpF,KAAM,IAAI,OAAM,8BAGlB,KAAK,YAAY,GACjB,GAAI,GAAiB,EAAS,EAAK,OAEnC,AAAI,EAAiB,EACnB,KAAK,YAAY,GAGjB,KAAK,mBAIT,GAAO,UAAU,YAAc,SAAS,EAAQ,CAC9C,KAAK,KAAK,EAAQ,KAAK,WAAW,KAAK,QAEzC,GAAO,UAAU,WAAa,SAAS,EAAM,CAE3C,KAAK,KAAK,MAAM,GAEhB,KAAK,SAAW,GAChB,KAAK,kBAED,KAAK,UACP,KAAK,cCtST,2BAEA,GAAI,IAAiB,KAEjB,GAAiB,CAEnB,UAAW,GAIX,SAAS,EAAQ,EAAM,EAAO,EAAQ,CACpC,GAAI,IAAW,EAAK,OAClB,KAAM,IAAI,OAAM,mBAGlB,GAAI,GAAQ,EAAK,GACjB,EAAO,GAAS,EAChB,EAAO,EAAQ,GAAK,EACpB,EAAO,EAAQ,GAAK,EACpB,EAAO,EAAQ,GAAK,KAKtB,SAAS,EAAQ,EAAM,EAAO,EAAQ,CACpC,GAAI,EAAS,GAAK,EAAK,OACrB,KAAM,IAAI,OAAM,mBAGlB,GAAI,GAAQ,EAAK,GACjB,EAAO,GAAS,EAChB,EAAO,EAAQ,GAAK,EACpB,EAAO,EAAQ,GAAK,EACpB,EAAO,EAAQ,GAAK,EAAK,EAAS,IAKpC,SAAS,EAAQ,EAAM,EAAO,EAAQ,CACpC,GAAI,EAAS,GAAK,EAAK,OACrB,KAAM,IAAI,OAAM,mBAGlB,EAAO,GAAS,EAAK,GACrB,EAAO,EAAQ,GAAK,EAAK,EAAS,GAClC,EAAO,EAAQ,GAAK,EAAK,EAAS,GAClC,EAAO,EAAQ,GAAK,KAKtB,SAAS,EAAQ,EAAM,EAAO,EAAQ,CACpC,GAAI,EAAS,GAAK,EAAK,OACrB,KAAM,IAAI,OAAM,mBAGlB,EAAO,GAAS,EAAK,GACrB,EAAO,EAAQ,GAAK,EAAK,EAAS,GAClC,EAAO,EAAQ,GAAK,EAAK,EAAS,GAClC,EAAO,EAAQ,GAAK,EAAK,EAAS,KAIlC,GAAuB,CAEzB,UAAW,GAIX,SAAS,EAAQ,EAAW,EAAO,EAAQ,CACzC,GAAI,GAAQ,EAAU,GACtB,EAAO,GAAS,EAChB,EAAO,EAAQ,GAAK,EACpB,EAAO,EAAQ,GAAK,EACpB,EAAO,EAAQ,GAAK,GAKtB,SAAS,EAAQ,EAAW,EAAO,CACjC,GAAI,GAAQ,EAAU,GACtB,EAAO,GAAS,EAChB,EAAO,EAAQ,GAAK,EACpB,EAAO,EAAQ,GAAK,EACpB,EAAO,EAAQ,GAAK,EAAU,IAKhC,SAAS,EAAQ,EAAW,EAAO,EAAQ,CACzC,EAAO,GAAS,EAAU,GAC1B,EAAO,EAAQ,GAAK,EAAU,GAC9B,EAAO,EAAQ,GAAK,EAAU,GAC9B,EAAO,EAAQ,GAAK,GAKtB,SAAS,EAAQ,EAAW,EAAO,CACjC,EAAO,GAAS,EAAU,GAC1B,EAAO,EAAQ,GAAK,EAAU,GAC9B,EAAO,EAAQ,GAAK,EAAU,GAC9B,EAAO,EAAQ,GAAK,EAAU,KAIlC,YAAsB,EAAM,EAAO,CAEjC,GAAI,GAAW,GACX,EAAI,EAER,YAAiB,CACf,GAAI,IAAM,EAAK,OACb,KAAM,IAAI,OAAM,mBAElB,GAAI,GAAO,EAAK,GAChB,IACA,GAAI,GAAO,EAAO,EAAO,EAAO,EAAO,EAAO,EAAO,EACrD,OAAQ,WAEJ,KAAM,IAAI,OAAM,0BACb,IACH,EAAQ,EAAK,GACb,IACA,EAAS,KAAO,IAAQ,GAAK,GAC7B,UACG,GACH,EAAQ,EAAO,GACf,EAAQ,GAAQ,EAChB,EAAS,KAAK,EAAO,GACrB,UACG,GACH,EAAQ,EAAO,EACf,EAAQ,GAAQ,EAAI,EACpB,EAAQ,GAAQ,EAAI,EACpB,EAAQ,GAAQ,EAAI,EACpB,EAAS,KAAK,EAAO,EAAO,EAAO,GACnC,UACG,GACH,EAAQ,EAAO,EACf,EAAQ,GAAQ,EAAI,EACpB,EAAQ,GAAQ,EAAI,EACpB,EAAQ,GAAQ,EAAI,EACpB,EAAQ,GAAQ,EAAI,EACpB,EAAQ,GAAQ,EAAI,EACpB,EAAQ,GAAQ,EAAI,EACpB,EAAQ,GAAQ,EAAI,EACpB,EAAS,KAAK,EAAO,EAAO,EAAO,EAAO,EAAO,EAAO,EAAO,GAC/D,OAIN,MAAO,CACL,IAAK,SAAS,EAAO,CACnB,KAAO,EAAS,OAAS,GACvB,IAEF,GAAI,GAAW,EAAS,MAAM,EAAG,GACjC,SAAW,EAAS,MAAM,GACnB,GAET,eAAgB,UAAW,CACzB,EAAS,OAAS,GAEpB,IAAK,UAAW,CACd,GAAI,IAAM,EAAK,OACb,KAAM,IAAI,OAAM,sBAMxB,YAAsB,EAAO,EAAQ,EAAU,EAAK,EAAM,EAAQ,CAIhE,OAHI,GAAa,EAAM,MACnB,EAAc,EAAM,OACpB,EAAY,EAAM,MACb,EAAI,EAAG,EAAI,EAAa,IAC/B,OAAS,GAAI,EAAG,EAAI,EAAY,IAAK,CACnC,GAAI,GAAQ,EAAS,EAAG,EAAG,GAC3B,GAAe,GAAK,EAAQ,EAAM,EAAO,GACzC,GAAU,EAGd,MAAO,GAGT,YAA2B,EAAO,EAAQ,EAAU,EAAK,EAAM,EAAQ,CAIrE,OAHI,GAAa,EAAM,MACnB,EAAc,EAAM,OACpB,EAAY,EAAM,MACb,EAAI,EAAG,EAAI,EAAa,IAAK,CACpC,OAAS,GAAI,EAAG,EAAI,EAAY,IAAK,CACnC,GAAI,GAAY,EAAK,IAAI,GACrB,EAAQ,EAAS,EAAG,EAAG,GAC3B,GAAqB,GAAK,EAAQ,EAAW,EAAO,GAEtD,EAAK,kBAIT,GAAQ,aAAe,SAAS,EAAM,EAAY,CAEhD,GAAI,GAAQ,EAAW,MACnB,EAAS,EAAW,OACpB,EAAQ,EAAW,MACnB,EAAM,EAAW,IACjB,EAAY,EAAW,UAE3B,GAAI,IAAU,EACZ,GAAI,GAAO,GAAa,EAAM,GAEhC,GAAI,GACJ,AAAI,GAAS,EACX,EAAS,GAAI,QAAO,EAAQ,EAAS,GAGrC,EAAS,GAAI,aAAY,EAAQ,EAAS,GAE5C,GAAI,GAAS,KAAK,IAAI,EAAG,GAAS,EAC9B,EAAS,EACT,EACA,EAEJ,GAAI,EACF,EAAS,GAAe,eAAe,EAAO,GAC9C,EAAW,GAAe,qBAAqB,EAAO,OAEnD,CACH,GAAI,GAAqB,EACzB,EAAW,UAAW,CACpB,GAAI,GAAW,EACf,UAAsB,EACf,GAET,EAAS,CAAC,CAAE,MAAO,EAAO,OAAQ,IAGpC,OAAS,GAAa,EAAG,EAAa,EAAO,OAAQ,IACnD,AAAI,IAAU,EACZ,EAAS,GAAa,EAAO,GAAa,EAAQ,EAAU,EAAK,EAAM,GAGvE,GAAkB,EAAO,GAAa,EAAQ,EAAU,EAAK,EAAM,GAGvE,GAAI,IAAU,GACZ,GAAI,IAAW,EAAK,OAClB,KAAM,IAAI,OAAM,wBAIlB,GAAK,MAGP,MAAO,MC9PT,gCAEA,YAAmB,EAAQ,EAAS,EAAO,EAAQ,EAAS,CAG1D,OAFI,GAAQ,EAEH,EAAI,EAAG,EAAI,EAAQ,IAC1B,OAAS,GAAI,EAAG,EAAI,EAAO,IAAK,CAC9B,GAAI,GAAQ,EAAQ,EAAO,IAE3B,GAAI,CAAC,EACH,KAAM,IAAI,OAAM,SAAW,EAAO,GAAS,mBAG7C,OAAS,GAAI,EAAG,EAAI,EAAG,IACrB,EAAQ,EAAQ,GAAK,EAAM,GAE7B,GAAS,GAKf,YAAiC,EAAQ,EAAS,EAAO,EAAQ,EAAY,CAE3E,OADI,GAAQ,EACH,EAAI,EAAG,EAAI,EAAQ,IAC1B,OAAS,GAAI,EAAG,EAAI,EAAO,IAAK,CAC9B,GAAI,GAAY,GAUhB,GARA,AAAI,EAAW,SAAW,EACpB,EAAW,KAAO,EAAO,IAC3B,GAAY,IAGP,EAAW,KAAO,EAAO,IAAU,EAAW,KAAO,EAAO,EAAQ,IAAM,EAAW,KAAO,EAAO,EAAQ,IAClH,GAAY,IAEV,EACF,OAAS,GAAI,EAAG,EAAI,EAAG,IACrB,EAAQ,EAAQ,GAAK,EAGzB,GAAS,GAKf,YAAoB,EAAQ,EAAS,EAAO,EAAQ,EAAO,CAKzD,OAJI,GAAe,IACf,EAAc,KAAK,IAAI,EAAG,GAAS,EACnC,EAAQ,EAEH,EAAI,EAAG,EAAI,EAAQ,IAC1B,OAAS,GAAI,EAAG,EAAI,EAAO,IAAK,CAC9B,OAAS,GAAI,EAAG,EAAI,EAAG,IACrB,EAAQ,EAAQ,GAAK,KAAK,MAAO,EAAO,EAAQ,GAAK,EAAgB,EAAc,IAErF,GAAS,GAKf,GAAO,QAAU,SAAS,EAAQ,EAAW,CAE3C,GAAI,GAAQ,EAAU,MAClB,EAAQ,EAAU,MAClB,EAAS,EAAU,OACnB,EAAY,EAAU,UACtB,EAAa,EAAU,WACvB,EAAU,EAAU,QAEpB,EAAU,EAEd,MAAI,KAAc,EAChB,GAAU,EAAQ,EAAS,EAAO,EAAQ,GAGtC,IACF,GAAwB,EAAQ,EAAS,EAAO,EAAQ,GAGtD,IAAU,GAER,KAAU,IACZ,GAAU,GAAI,QAAO,EAAQ,EAAS,IAExC,GAAW,EAAQ,EAAS,EAAO,EAAQ,KAGxC,KCvFT,gCAEA,GAAI,IAAO,QAAQ,QACf,GAAO,QAAQ,QACf,GAAc,KACd,GAAc,KACd,GAAS,KACT,GAAY,KACZ,GAAmB,KAEnB,GAAc,GAAO,QAAU,SAAS,EAAS,CACnD,GAAY,KAAK,MAEjB,KAAK,QAAU,GAAI,IAAO,EAAS,CACjC,KAAM,KAAK,KAAK,KAAK,MACrB,MAAO,KAAK,aAAa,KAAK,MAC9B,SAAU,KAAK,gBAAgB,KAAK,MACpC,MAAO,KAAK,KAAK,KAAK,KAAM,SAC5B,QAAS,KAAK,eAAe,KAAK,MAClC,WAAY,KAAK,kBAAkB,KAAK,MACxC,SAAU,KAAK,UAAU,KAAK,MAC9B,YAAa,KAAK,aAAa,KAAK,MACpC,mBAAoB,KAAK,oBAAoB,KAAK,MAClD,gBAAiB,KAAK,iBAAiB,KAAK,QAE9C,KAAK,SAAW,EAChB,KAAK,SAAW,GAEhB,KAAK,QAAQ,SAEf,GAAK,SAAS,GAAa,IAG3B,GAAY,UAAU,aAAe,SAAS,EAAK,CAEjD,KAAK,KAAK,QAAS,GAEnB,KAAK,SAAW,GAEhB,KAAK,UAED,KAAK,UAAY,KAAK,SAAS,SACjC,KAAK,SAAS,UAGZ,KAAK,SACP,MAAK,QAAQ,UAIb,KAAK,QAAQ,GAAG,QAAS,UAAW,KAGtC,KAAK,OAAS,IAGhB,GAAY,UAAU,aAAe,SAAS,EAAM,CAClD,GAAI,CAAC,KAAK,SACR,GAAI,KAAK,YAAY,UACnB,KAAK,SAAW,GAAK,gBAErB,KAAK,SAAS,GAAG,QAAS,KAAK,KAAK,KAAK,KAAM,UAC/C,KAAK,QAAQ,GAAG,WAAY,KAAK,UAAU,KAAK,OAEhD,KAAK,SAAS,KAAK,KAAK,aAErB,CACH,GAAI,GAAY,MAAK,YAAY,MAAQ,KAAK,YAAY,IAAM,KAAK,YAAY,MAAQ,GAAM,GAAK,EAChG,EAAY,EAAU,KAAK,YAAY,OACvC,EAAY,KAAK,IAAI,EAAW,GAAK,aAEzC,KAAK,SAAW,GAAK,cAAc,CAAE,UAAW,IAChD,GAAI,GAAgB,EAEhB,EAAY,KAAK,KAAK,KAAK,KAAM,SACrC,KAAK,SAAS,GAAG,QAAS,SAAS,EAAK,CACtC,AAAI,CAAC,GAIL,EAAU,KAEZ,KAAK,QAAQ,GAAG,WAAY,KAAK,UAAU,KAAK,OAEhD,GAAI,GAAc,KAAK,QAAQ,MAAM,KAAK,KAAK,SAC/C,KAAK,SAAS,GAAG,OAAQ,SAAS,EAAO,CACvC,AAAI,CAAC,GAID,GAAM,OAAS,GACjB,GAAQ,EAAM,MAAM,EAAG,IAGzB,GAAiB,EAAM,OAEvB,EAAY,MAGd,KAAK,SAAS,GAAG,MAAO,KAAK,QAAQ,IAAI,KAAK,KAAK,UAGvD,KAAK,SAAS,MAAM,IAGtB,GAAY,UAAU,gBAAkB,SAAS,EAAU,CACzD,KAAK,UAAY,EACjB,KAAK,YAAc,OAAO,OAAO,GAEjC,KAAK,QAAU,GAAI,IAAY,KAAK,cAGtC,GAAY,UAAU,kBAAoB,SAAS,EAAY,CAC7D,KAAK,YAAY,WAAa,GAGhC,GAAY,UAAU,eAAiB,SAAS,EAAS,CACvD,KAAK,YAAY,QAAU,GAG7B,GAAY,UAAU,oBAAsB,UAAW,CACrD,KAAK,UAAU,MAAQ,IAGzB,GAAY,UAAU,iBAAmB,UAAW,CAGlD,KAAK,KAAK,WAAY,KAAK,YAG7B,GAAY,UAAU,UAAY,UAAW,CAC3C,AAAI,KAAK,QAIT,CAAK,KAAK,SAKR,KAAK,SAAS,MAJd,KAAK,KAAK,QAAS,oBAMrB,KAAK,gBAGP,GAAY,UAAU,UAAY,SAAS,EAAc,CAEvD,GAAI,MAAK,OAIT,IAAI,CACF,GAAI,GAAa,GAAU,aAAa,EAAc,KAAK,aAEvD,EAAuB,GAAiB,EAAY,KAAK,aAC7D,EAAa,WAER,EAAP,CACE,KAAK,aAAa,GAClB,OAGF,KAAK,KAAK,SAAU,OClKtB,gCAEA,GAAI,IAAY,KAEhB,GAAO,QAAU,SAAS,EAAQ,EAAO,EAAQ,EAAS,CACxD,GAAI,GAAc,CAAC,GAAU,sBAAuB,GAAU,iBAAiB,QAAQ,EAAQ,aAAe,GAC9G,GAAI,EAAQ,YAAc,EAAQ,eAAgB,CAChD,GAAI,GAAa,UAAW,CAC1B,GAAI,GAAS,GAAI,aAAY,GAC7B,UAAI,UAAS,GAAQ,SAAS,EAAG,IAAK,IAE/B,GAAI,YAAW,GAAQ,KAAO,OAGvC,GAAI,EAAQ,WAAa,GAAM,EAAQ,WAAa,IAAM,EACxD,MAAO,GAKX,GAAI,GAAO,EAAQ,WAAa,GAAK,EAAS,GAAI,aAAY,EAAO,QAEjE,EAAW,IACX,EAAQ,GAAU,qBAAqB,EAAQ,gBACnD,AAAI,IAAU,GAAK,CAAC,EAAQ,eAC1B,GAAQ,GAEV,GAAI,GAAS,GAAU,qBAAqB,EAAQ,WACpD,AAAI,EAAQ,WAAa,IACvB,GAAW,MACX,GAAU,GAEZ,GAAI,GAAU,GAAI,QAAO,EAAQ,EAAS,GAEtC,EAAU,EACV,EAAW,EAEX,EAAU,EAAQ,SAAW,GACjC,AAAI,EAAQ,MAAQ,QAClB,GAAQ,IAAM,GAEZ,EAAQ,QAAU,QACpB,GAAQ,MAAQ,GAEd,EAAQ,OAAS,QACnB,GAAQ,KAAO,GAGjB,YAAmB,CACjB,GAAI,GACA,EACA,EACA,EAAQ,EACZ,OAAQ,EAAQ,oBACT,IAAU,sBACb,EAAQ,EAAK,EAAU,GACvB,EAAM,EAAK,GACX,EAAQ,EAAK,EAAU,GACvB,EAAO,EAAK,EAAU,GACtB,UACG,IAAU,gBACb,EAAM,EAAK,GACX,EAAQ,EAAK,EAAU,GACvB,EAAO,EAAK,EAAU,GACtB,UACG,IAAU,gBACb,EAAQ,EAAK,EAAU,GACvB,EAAM,EAAK,GACX,EAAQ,EACR,EAAO,EACP,UACG,IAAU,oBACb,EAAM,EAAK,GACX,EAAQ,EACR,EAAO,EACP,cAEA,KAAM,IAAI,OAAM,oBAAsB,EAAQ,eAAiB,gCAGnE,MAAI,GAAQ,eACL,IACH,IAAS,EACT,EAAM,KAAK,IAAI,KAAK,IAAI,KAAK,MAAO,GAAI,GAAS,EAAQ,IAAM,EAAQ,GAAM,GAAI,GACjF,EAAQ,KAAK,IAAI,KAAK,IAAI,KAAK,MAAO,GAAI,GAAS,EAAQ,MAAQ,EAAQ,GAAQ,GAAI,GACvF,EAAO,KAAK,IAAI,KAAK,IAAI,KAAK,MAAO,GAAI,GAAS,EAAQ,KAAO,EAAQ,GAAO,GAAI,KAGjF,CAAE,IAAK,EAAK,MAAO,EAAO,KAAM,EAAM,MAAO,GAGtD,OAAS,GAAI,EAAG,EAAI,EAAQ,IAC1B,OAAS,GAAI,EAAG,EAAI,EAAO,IAAK,CAC9B,GAAI,GAAO,EAAQ,EAAM,GAEzB,OAAQ,EAAQ,eACT,IAAU,0BACV,IAAU,gBACb,AAAI,EAAQ,WAAa,EACvB,GAAQ,GAAY,EAAK,IACzB,EAAQ,EAAW,GAAK,EAAK,MAC7B,EAAQ,EAAW,GAAK,EAAK,KACzB,GACF,GAAQ,EAAW,GAAK,EAAK,QAI/B,GAAQ,cAAc,EAAK,IAAK,GAChC,EAAQ,cAAc,EAAK,MAAO,EAAW,GAC7C,EAAQ,cAAc,EAAK,KAAM,EAAW,GACxC,GACF,EAAQ,cAAc,EAAK,MAAO,EAAW,IAGjD,UACG,IAAU,oBACV,IAAU,oBAEb,GAAI,GAAa,GAAK,IAAM,EAAK,MAAQ,EAAK,MAAQ,EACtD,AAAI,EAAQ,WAAa,EACvB,GAAQ,GAAY,EAChB,GACF,GAAQ,EAAW,GAAK,EAAK,QAI/B,GAAQ,cAAc,EAAW,GAC7B,GACF,EAAQ,cAAc,EAAK,MAAO,EAAW,IAGjD,cAEA,KAAM,IAAI,OAAM,2BAA6B,EAAQ,WAGzD,GAAW,EACX,GAAY,EAIhB,MAAO,MC7IT,gCAEA,GAAI,IAAiB,KAErB,YAAoB,EAAQ,EAAO,EAAW,EAAS,EAAQ,CAE7D,OAAS,GAAI,EAAG,EAAI,EAAW,IAC7B,EAAQ,EAAS,GAAK,EAAO,EAAQ,GAIzC,YAAuB,EAAQ,EAAO,EAAW,CAK/C,OAHI,GAAM,EACN,EAAS,EAAQ,EAEZ,EAAI,EAAO,EAAI,EAAQ,IAC9B,GAAO,KAAK,IAAI,EAAO,IAEzB,MAAO,GAGT,YAAmB,EAAQ,EAAO,EAAW,EAAS,EAAQ,EAAK,CAEjE,OAAS,GAAI,EAAG,EAAI,EAAW,IAAK,CAElC,GAAI,GAAO,GAAK,EAAM,EAAO,EAAQ,EAAI,GAAO,EAC5C,EAAM,EAAO,EAAQ,GAAK,EAE9B,EAAQ,EAAS,GAAK,GAI1B,YAAsB,EAAQ,EAAO,EAAW,EAAK,CAGnD,OADI,GAAM,EACD,EAAI,EAAG,EAAI,EAAW,IAAK,CAElC,GAAI,GAAO,GAAK,EAAM,EAAO,EAAQ,EAAI,GAAO,EAC5C,EAAM,EAAO,EAAQ,GAAK,EAE9B,GAAO,KAAK,IAAI,GAGlB,MAAO,GAGT,YAAkB,EAAQ,EAAO,EAAW,EAAS,EAAQ,CAE3D,OAAS,GAAI,EAAG,EAAI,EAAW,IAAK,CAElC,GAAI,GAAK,EAAQ,EAAI,EAAO,EAAQ,EAAI,GAAa,EACjD,EAAM,EAAO,EAAQ,GAAK,EAE9B,EAAQ,EAAS,GAAK,GAI1B,YAAqB,EAAQ,EAAO,EAAW,CAI7C,OAFI,GAAM,EACN,EAAS,EAAQ,EACZ,EAAI,EAAO,EAAI,EAAQ,IAAK,CAEnC,GAAI,GAAK,EAAQ,EAAI,EAAO,EAAI,GAAa,EACzC,EAAM,EAAO,GAAK,EAEtB,GAAO,KAAK,IAAI,GAGlB,MAAO,GAGT,YAAmB,EAAQ,EAAO,EAAW,EAAS,EAAQ,EAAK,CAEjE,OAAS,GAAI,EAAG,EAAI,EAAW,IAAK,CAElC,GAAI,GAAO,GAAK,EAAM,EAAO,EAAQ,EAAI,GAAO,EAC5C,EAAK,EAAQ,EAAI,EAAO,EAAQ,EAAI,GAAa,EACjD,EAAM,EAAO,EAAQ,GAAO,GAAO,GAAO,GAE9C,EAAQ,EAAS,GAAK,GAI1B,YAAsB,EAAQ,EAAO,EAAW,EAAK,CAGnD,OADI,GAAM,EACD,EAAI,EAAG,EAAI,EAAW,IAAK,CAElC,GAAI,GAAO,GAAK,EAAM,EAAO,EAAQ,EAAI,GAAO,EAC5C,EAAK,EAAQ,EAAI,EAAO,EAAQ,EAAI,GAAa,EACjD,EAAM,EAAO,EAAQ,GAAO,GAAO,GAAO,GAE9C,GAAO,KAAK,IAAI,GAGlB,MAAO,GAGT,YAAqB,EAAQ,EAAO,EAAW,EAAS,EAAQ,EAAK,CAEnE,OAAS,GAAI,EAAG,EAAI,EAAW,IAAK,CAElC,GAAI,GAAO,GAAK,EAAM,EAAO,EAAQ,EAAI,GAAO,EAC5C,EAAK,EAAQ,EAAI,EAAO,EAAQ,EAAI,GAAa,EACjD,EAAS,EAAQ,GAAK,GAAK,EAAM,EAAO,EAAQ,EAAK,GAAY,IAAQ,EACzE,EAAM,EAAO,EAAQ,GAAK,GAAe,EAAM,EAAI,GAEvD,EAAQ,EAAS,GAAK,GAI1B,YAAwB,EAAQ,EAAO,EAAW,EAAK,CAErD,OADI,GAAM,EACD,EAAI,EAAG,EAAI,EAAW,IAAK,CAElC,GAAI,GAAO,GAAK,EAAM,EAAO,EAAQ,EAAI,GAAO,EAC5C,EAAK,EAAQ,EAAI,EAAO,EAAQ,EAAI,GAAa,EACjD,EAAS,EAAQ,GAAK,GAAK,EAAM,EAAO,EAAQ,EAAK,GAAY,IAAQ,EACzE,EAAM,EAAO,EAAQ,GAAK,GAAe,EAAM,EAAI,GAEvD,GAAO,KAAK,IAAI,GAGlB,MAAO,GAGT,GAAI,IAAU,CACZ,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,IAGD,GAAa,CACf,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,IAGL,GAAO,QAAU,SAAS,EAAQ,EAAO,EAAQ,EAAS,EAAK,CAE7D,GAAI,GACJ,GAAI,CAAE,eAAgB,KAAY,EAAQ,aAAe,GACvD,EAAc,CAAC,EAAG,EAAG,EAAG,EAAG,WAEpB,MAAO,GAAQ,YAAe,SACrC,EAAc,CAAC,EAAQ,gBAGvB,MAAM,IAAI,OAAM,6BAGlB,AAAI,EAAQ,WAAa,IACvB,IAAO,GAST,OAPI,GAAY,EAAQ,EACpB,EAAS,EACT,EAAQ,EACR,EAAU,GAAI,QAAQ,GAAY,GAAK,GAEvC,EAAM,EAAY,GAEb,EAAI,EAAG,EAAI,EAAQ,IAAK,CAE/B,GAAI,EAAY,OAAS,EAIvB,OAFI,GAAM,IAED,EAAI,EAAG,EAAI,EAAY,OAAQ,IAAK,CAC3C,GAAI,GAAM,GAAW,EAAY,IAAI,EAAQ,EAAO,EAAW,GAC/D,AAAI,EAAM,GACR,GAAM,EAAY,GAClB,EAAM,GAKZ,EAAQ,GAAU,EAClB,IACA,GAAQ,GAAK,EAAQ,EAAO,EAAW,EAAS,EAAQ,GACxD,GAAU,EACV,GAAS,EAEX,MAAO,MC5LT,gCAEA,GAAI,IAAY,KACZ,GAAY,KACZ,GAAY,KACZ,GAAS,KACT,GAAO,QAAQ,QAEf,GAAS,GAAO,QAAU,SAAS,EAAS,CAa9C,GAZA,KAAK,SAAW,EAEhB,EAAQ,iBAAmB,EAAQ,kBAAoB,GAAK,KAC5D,EAAQ,aAAe,EAAQ,cAAgB,KAAO,EAAQ,aAAe,EAC7E,EAAQ,gBAAkB,EAAQ,iBAAmB,KAAO,EAAQ,gBAAkB,EACtF,EAAQ,cAAgB,EAAQ,eAAiB,KAAO,EAAQ,cAAgB,GAChF,EAAQ,eAAiB,EAAQ,gBAAkB,GAAK,cACxD,EAAQ,SAAW,EAAQ,UAAY,EAEvC,EAAQ,UAAa,MAAO,GAAQ,WAAc,SAAY,EAAQ,UAAY,GAAU,sBAC5F,EAAQ,eAAkB,MAAO,GAAQ,gBAAmB,SAAY,EAAQ,eAAiB,GAAU,sBAEvG,CACF,GAAU,oBACV,GAAU,gBACV,GAAU,sBACV,GAAU,iBACV,QAAQ,EAAQ,aAAe,GAC/B,KAAM,IAAI,OAAM,qBAAuB,EAAQ,UAAY,gCAE7D,GAAI,CACF,GAAU,oBACV,GAAU,gBACV,GAAU,sBACV,GAAU,iBACV,QAAQ,EAAQ,kBAAoB,GACpC,KAAM,IAAI,OAAM,2BAA6B,EAAQ,eAAiB,gCAExE,GAAI,EAAQ,WAAa,GAAK,EAAQ,WAAa,GACjD,KAAM,IAAI,OAAM,oBAAsB,EAAQ,SAAW,iCAI7D,GAAO,UAAU,kBAAoB,UAAW,CAC9C,MAAO,CACL,UAAW,KAAK,SAAS,iBACzB,MAAO,KAAK,SAAS,aACrB,SAAU,KAAK,SAAS,kBAI5B,GAAO,UAAU,cAAgB,UAAW,CAC1C,MAAO,MAAK,SAAS,eAAe,KAAK,sBAG3C,GAAO,UAAU,WAAa,SAAS,EAAM,EAAO,EAAQ,CAE1D,GAAI,GAAa,GAAU,EAAM,EAAO,EAAQ,KAAK,UAGjD,EAAM,GAAU,qBAAqB,KAAK,SAAS,WACnD,EAAe,GAAO,EAAY,EAAO,EAAQ,KAAK,SAAU,GACpE,MAAO,IAGT,GAAO,UAAU,WAAa,SAAS,EAAM,EAAM,CAEjD,GAAI,GAAO,EAAO,EAAK,OAAS,EAC5B,EAAM,GAAI,QAAO,EAAM,IAE3B,SAAI,cAAc,EAAK,GACvB,EAAI,cAAc,EAAM,GAEpB,GACF,EAAK,KAAK,EAAK,GAGjB,EAAI,aAAa,GAAU,MAAM,EAAI,MAAM,EAAG,EAAI,OAAS,IAAK,EAAI,OAAS,GACtE,GAGT,GAAO,UAAU,SAAW,SAAS,EAAO,CAC1C,GAAI,GAAM,GAAI,QAAO,GACrB,SAAI,cAAc,KAAK,MAAM,EAAQ,GAAU,gBAAiB,GACzD,KAAK,WAAW,GAAU,UAAW,IAG9C,GAAO,UAAU,SAAW,SAAS,EAAO,EAAQ,CAElD,GAAI,GAAM,GAAI,QAAO,IACrB,SAAI,cAAc,EAAO,GACzB,EAAI,cAAc,EAAQ,GAC1B,EAAI,GAAK,KAAK,SAAS,SACvB,EAAI,GAAK,KAAK,SAAS,UACvB,EAAI,IAAM,EACV,EAAI,IAAM,EACV,EAAI,IAAM,EAEH,KAAK,WAAW,GAAU,UAAW,IAG9C,GAAO,UAAU,SAAW,SAAS,EAAM,CACzC,MAAO,MAAK,WAAW,GAAU,UAAW,IAG9C,GAAO,UAAU,SAAW,UAAW,CACrC,MAAO,MAAK,WAAW,GAAU,UAAW,SCzG9C,gCAEA,GAAI,IAAO,QAAQ,QACf,GAAS,QAAQ,UACjB,GAAY,KACZ,GAAS,KAET,GAAc,GAAO,QAAU,SAAS,EAAK,CAC/C,GAAO,KAAK,MAEZ,GAAI,GAAU,GAAO,GAErB,KAAK,QAAU,GAAI,IAAO,GAC1B,KAAK,SAAW,KAAK,QAAQ,gBAE7B,KAAK,SAAW,IAElB,GAAK,SAAS,GAAa,IAG3B,GAAY,UAAU,KAAO,SAAS,EAAM,EAAO,EAAQ,EAAO,CAEhE,KAAK,KAAK,OAAQ,GAAI,QAAO,GAAU,gBACvC,KAAK,KAAK,OAAQ,KAAK,QAAQ,SAAS,EAAO,IAE3C,GACF,KAAK,KAAK,OAAQ,KAAK,QAAQ,SAAS,IAG1C,GAAI,GAAe,KAAK,QAAQ,WAAW,EAAM,EAAO,GAGxD,KAAK,SAAS,GAAG,QAAS,KAAK,KAAK,KAAK,KAAM,UAE/C,KAAK,SAAS,GAAG,OAAQ,SAAS,EAAgB,CAChD,KAAK,KAAK,OAAQ,KAAK,QAAQ,SAAS,KACxC,KAAK,OAEP,KAAK,SAAS,GAAG,MAAO,UAAW,CACjC,KAAK,KAAK,OAAQ,KAAK,QAAQ,YAC/B,KAAK,KAAK,QACV,KAAK,OAEP,KAAK,SAAS,IAAI,MC3CpB,gCAEA,GAAI,IAAS,QAAQ,UAAU,GAC3B,GAAO,QAAQ,QACf,GAAO,QAAQ,QAEf,GAAa,QAAQ,UAAU,WAEnC,YAAiB,EAAM,CACrB,GAAI,CAAE,gBAAgB,KACpB,MAAO,IAAI,IAAQ,GAGrB,AAAI,GAAQ,EAAK,UAAY,GAAK,aAChC,GAAK,UAAY,GAAK,aAGxB,GAAK,QAAQ,KAAK,KAAM,GAGxB,KAAK,QAAU,KAAK,UAAY,OAAY,KAAK,WAAa,KAAK,QACnE,KAAK,QAAU,KAAK,SAAW,KAAK,WAEhC,GAAQ,EAAK,WAAa,MAC5B,MAAK,WAAa,EAAK,WAI3B,YAAuB,EAAM,CAC3B,MAAO,IAAI,IAAQ,GAGrB,YAAgB,EAAQ,EAAU,CAMhC,AALI,GACF,QAAQ,SAAS,GAIf,EAAC,EAAO,SAIZ,GAAO,QAAQ,QACf,EAAO,QAAU,MAGnB,GAAQ,UAAU,cAAgB,SAAS,EAAO,EAAW,EAAS,CACpE,GAAI,MAAO,IAAY,WACrB,MAAO,IAAK,QAAQ,cAAc,KAAK,KAAM,EAAO,EAAW,GAGjE,GAAI,GAAO,KAEP,EAAgB,GAAS,EAAM,OAC/B,EAAiB,KAAK,WAAa,KAAK,QACxC,EAAgB,KAAK,WACrB,EAAQ,EAER,EAAU,GACV,EAAQ,EAER,EACJ,KAAK,GAAG,QAAS,SAAS,EAAK,CAC7B,EAAQ,IAGV,WAAqB,EAAc,EAAe,CAChD,GAAI,GAAK,UAIT,IAAI,GAAO,EAAiB,EAG5B,GAFA,GAAO,GAAQ,EAAG,2BAEd,EAAO,EAAG,CACZ,GAAI,GAAM,EAAK,QAAQ,MAAM,EAAK,QAAS,EAAK,QAAU,GAW1D,GAVA,EAAK,SAAW,EAEZ,EAAI,OAAS,GACf,GAAM,EAAI,MAAM,EAAG,IAGrB,EAAQ,KAAK,GACb,GAAS,EAAI,OACb,GAAiB,EAAI,OAEjB,IAAkB,EACpB,MAAO,GAUX,MANI,KAAkB,GAAK,EAAK,SAAW,EAAK,aAC9C,GAAiB,EAAK,WACtB,EAAK,QAAU,EACf,EAAK,QAAU,OAAO,YAAY,EAAK,aAGrC,IAAkB,EACpB,IAAU,EAAgB,EAC1B,EAAgB,EAET,IAGF,IAGT,GAAO,KAAK,QAAS,uBACrB,EAAG,CACD,GAAI,GAAM,KAAK,QAAQ,UAAU,EAC/B,EACA,EACA,EACA,KAAK,QACL,KAAK,QACL,GAEF,EAAM,GAAO,KAAK,kBACX,CAAC,KAAK,WAAa,EAAY,EAAI,GAAI,EAAI,KAEpD,GAAI,KAAK,UACP,KAAM,GAGR,GAAI,GAAS,GACX,SAAO,MACD,GAAI,YAAW,yDAA2D,GAAW,SAAS,IAAM,UAG5G,GAAI,GAAM,OAAO,OAAO,EAAS,GACjC,UAAO,MAEA,GAGT,GAAK,SAAS,GAAS,GAAK,SAE5B,YAAwB,EAAQ,EAAQ,CAItC,GAHI,MAAO,IAAW,UACpB,GAAS,OAAO,KAAK,IAEnB,CAAE,aAAkB,SACtB,KAAM,IAAI,WAAU,0BAGtB,GAAI,GAAY,EAAO,iBACvB,MAAI,IAAa,MACf,GAAY,GAAK,UAGZ,EAAO,cAAc,EAAQ,GAGtC,YAAqB,EAAQ,EAAM,CACjC,MAAO,IAAe,GAAI,IAAQ,GAAO,GAG3C,GAAO,QAAU,GAAU,GAC3B,GAAQ,QAAU,GAClB,GAAQ,cAAgB,GACxB,GAAQ,YAAc,KChKtB,gCAEA,GAAI,IAAa,GAAO,QAAU,SAAS,EAAQ,CAEjD,KAAK,QAAU,EACf,KAAK,OAAS,IAGhB,GAAW,UAAU,KAAO,SAAS,EAAQ,EAAU,CAErD,KAAK,OAAO,KAAK,CACf,OAAQ,KAAK,IAAI,GACjB,UAAW,EAAS,EACpB,KAAM,KAIV,GAAW,UAAU,QAAU,UAAW,CAGxC,KAAO,KAAK,OAAO,OAAS,GAAK,KAAK,QAAQ,QAAQ,CAEpD,GAAI,GAAO,KAAK,OAAO,GAEvB,GAAI,KAAK,QAAQ,QAAW,MAAK,QAAQ,QAAU,EAAK,QAAU,EAAK,WAAY,CAGjF,KAAK,OAAO,QAEZ,GAAI,GAAM,KAAK,QAEf,KAAK,QAAU,EAAI,MAAM,EAAK,QAE9B,EAAK,KAAK,KAAK,KAAM,EAAI,MAAM,EAAG,EAAK,aAIvC,OAKJ,GAAI,KAAK,OAAO,OAAS,EACvB,MAAO,IAAI,OAAM,0DAGnB,GAAI,KAAK,QAAQ,OAAS,EACxB,MAAO,IAAI,OAAM,4CC/CrB,2BAEA,GAAI,IAAa,KACb,GAAS,KAGb,GAAQ,QAAU,SAAS,EAAU,EAAY,CAE/C,GAAI,GAAa,GACb,EAAS,GAAI,IAAW,GACxB,EAAS,GAAI,IAAO,EAAY,CAClC,KAAM,EAAO,KAAK,KAAK,GACvB,MAAO,SAAS,EAAY,CAC1B,EAAW,KAAK,IAElB,SAAU,UAAW,KAIvB,SAAO,QACP,EAAO,UAEA,OAAO,OAAO,MCtBvB,gCAEA,GAAI,IAAc,GACd,GAAO,QAAQ,QACf,GAAc,KAClB,AAAK,GAAK,aACR,IAAc,IAEhB,GAAI,IAAa,KACb,GAAa,KACb,GAAS,KACT,GAAY,KACZ,GAAmB,KAGvB,GAAO,QAAU,SAAS,EAAQ,EAAS,CAEzC,GAAI,CAAC,GACH,KAAM,IAAI,OAAM,+FAGlB,GAAI,GACJ,WAAqB,EAAO,CAC1B,EAAM,EAGR,GAAI,GACJ,WAAwB,EAAY,CAClC,EAAW,EAGb,WAA0B,EAAY,CACpC,EAAS,WAAa,EAGxB,WAAuB,EAAS,CAC9B,EAAS,QAAU,EAGrB,YAAoC,CAClC,EAAS,MAAQ,GAGnB,GAAI,GACJ,WAAqB,EAAS,CAC5B,EAAQ,EAGV,GAAI,GAAkB,GACtB,WAA2B,EAAc,CACvC,EAAgB,KAAK,GAGvB,GAAI,GAAS,GAAI,IAAW,GAExB,EAAS,GAAI,IAAO,EAAS,CAC/B,KAAM,EAAO,KAAK,KAAK,GACvB,MAAO,EACP,SAAU,EACV,MAAO,EACP,QAAS,EACT,WAAY,EACZ,YAAa,EACb,mBAAoB,IAMtB,GAHA,EAAO,QACP,EAAO,UAEH,EACF,KAAM,GAIR,GAAI,GAAc,OAAO,OAAO,GAChC,EAAgB,OAAS,EAEzB,GAAI,GACJ,GAAI,EAAS,UACX,EAAe,GAAK,YAAY,OAE7B,CACH,GAAI,GAAY,GAAS,MAAQ,EAAS,IAAM,EAAS,MAAQ,GAAM,GAAK,EACxE,EAAY,EAAU,EAAS,OACnC,EAAe,GAAY,EAAa,CAAE,UAAW,EAAW,UAAW,IAI7E,GAFA,EAAc,KAEV,CAAC,GAAgB,CAAC,EAAa,OACjC,KAAM,IAAI,OAAM,2CAGlB,GAAI,GAAiB,GAAW,QAAQ,EAAc,GACtD,EAAc,KAEd,GAAI,GAAa,GAAU,aAAa,EAAgB,GACxD,EAAiB,KAEjB,GAAI,GAAuB,GAAiB,EAAY,GAExD,SAAS,KAAO,EAChB,EAAS,MAAQ,GAAS,EAEnB,KCvGT,gCAEA,GAAI,IAAc,GACd,GAAO,QAAQ,QACnB,AAAK,GAAK,aACR,IAAc,IAEhB,GAAI,IAAY,KACZ,GAAS,KAEb,GAAO,QAAU,SAAS,EAAU,EAAK,CAEvC,GAAI,CAAC,GACH,KAAM,IAAI,OAAM,+FAGlB,GAAI,GAAU,GAAO,GAEjB,EAAS,GAAI,IAAO,GAEpB,EAAS,GAGb,EAAO,KAAK,GAAI,QAAO,GAAU,gBAGjC,EAAO,KAAK,EAAO,SAAS,EAAS,MAAO,EAAS,SAEjD,EAAS,OACX,EAAO,KAAK,EAAO,SAAS,EAAS,QAGvC,GAAI,GAAe,EAAO,WAAW,EAAS,KAAM,EAAS,MAAO,EAAS,QAGzE,EAAiB,GAAK,YAAY,EAAc,EAAO,qBAG3D,GAFA,EAAe,KAEX,CAAC,GAAkB,CAAC,EAAe,OACrC,KAAM,IAAI,OAAM,8CAElB,SAAO,KAAK,EAAO,SAAS,IAG5B,EAAO,KAAK,EAAO,YAEZ,OAAO,OAAO,MC9CvB,2BAGA,GAAI,IAAQ,KACR,GAAO,KAGX,GAAQ,KAAO,SAAS,EAAQ,EAAS,CAEvC,MAAO,IAAM,EAAQ,GAAW,KAGlC,GAAQ,MAAQ,SAAS,EAAK,EAAS,CAErC,MAAO,IAAK,EAAK,MCdnB,2BAEA,GAAI,IAAO,QAAQ,QACf,GAAS,QAAQ,UACjB,GAAS,KACT,GAAS,KACT,GAAU,KAGV,GAAM,GAAQ,IAAM,SAAS,EAAS,CACxC,GAAO,KAAK,MAEZ,EAAU,GAAW,GAGrB,KAAK,MAAQ,EAAQ,MAAQ,EAC7B,KAAK,OAAS,EAAQ,OAAS,EAE/B,KAAK,KAAO,KAAK,MAAQ,GAAK,KAAK,OAAS,EAC1C,GAAI,QAAO,EAAI,KAAK,MAAQ,KAAK,QAAU,KAEzC,EAAQ,MAAQ,KAAK,MACvB,KAAK,KAAK,KAAK,GAGjB,KAAK,MAAQ,EACb,KAAK,SAAW,KAAK,SAAW,GAEhC,KAAK,QAAU,GAAI,IAAO,GAE1B,KAAK,QAAQ,GAAG,QAAS,KAAK,KAAK,KAAK,KAAM,UAC9C,KAAK,QAAQ,GAAG,QAAS,KAAK,aAAa,KAAK,OAChD,KAAK,QAAQ,GAAG,WAAY,KAAK,UAAU,KAAK,OAChD,KAAK,QAAQ,GAAG,QAAS,KAAK,OAAO,KAAK,OAC1C,KAAK,QAAQ,GAAG,SAAU,SAAS,EAAM,CACvC,KAAK,KAAO,EACZ,KAAK,KAAK,SAAU,IACpB,KAAK,OAEP,KAAK,QAAU,GAAI,IAAO,GAC1B,KAAK,QAAQ,GAAG,OAAQ,KAAK,KAAK,KAAK,KAAM,SAC7C,KAAK,QAAQ,GAAG,MAAO,KAAK,KAAK,KAAK,KAAM,QAC5C,KAAK,QAAQ,GAAG,QAAS,KAAK,aAAa,KAAK,OAChD,KAAK,QAAQ,GAAG,QAAS,KAAK,KAAK,KAAK,KAAM,WAGhD,GAAK,SAAS,GAAK,IAEnB,GAAI,KAAO,GAEX,GAAI,UAAU,KAAO,UAAW,CAE9B,MAAI,CAAC,KAAK,MAAQ,CAAC,KAAK,KAAK,OAC3B,MAAK,KAAK,QAAS,oBACZ,MAGT,SAAQ,SAAS,UAAW,CAC1B,KAAK,QAAQ,KAAK,KAAK,KAAM,KAAK,MAAO,KAAK,OAAQ,KAAK,QAC3D,KAAK,OAEA,OAIT,GAAI,UAAU,MAAQ,SAAS,EAAM,EAAU,CAE7C,GAAI,EAAU,CACZ,GAAI,GAAU,EAEd,EAAW,SAAS,EAAY,CAC9B,KAAK,eAAe,QAAS,GAE7B,KAAK,KAAO,EACZ,EAAS,KAAM,OACf,KAAK,MAEP,EAAU,SAAS,EAAK,CACtB,KAAK,eAAe,SAAU,GAE9B,EAAS,EAAK,OACd,KAAK,MAEP,KAAK,KAAK,SAAU,GACpB,KAAK,KAAK,QAAS,GAGrB,YAAK,IAAI,GACF,MAGT,GAAI,UAAU,MAAQ,SAAS,EAAM,CACnC,YAAK,QAAQ,MAAM,GACZ,IAGT,GAAI,UAAU,IAAM,SAAS,EAAM,CACjC,KAAK,QAAQ,IAAI,IAGnB,GAAI,UAAU,UAAY,SAAS,EAAU,CAC3C,KAAK,MAAQ,EAAS,MACtB,KAAK,OAAS,EAAS,OAEvB,KAAK,KAAK,WAAY,IAGxB,GAAI,UAAU,OAAS,SAAS,EAAO,CACrC,KAAK,MAAQ,GAGf,GAAI,UAAU,aAAe,UAAW,CACtC,AAAI,CAAC,KAAK,QAAQ,UAAY,CAAC,KAAK,QAAQ,UAC1C,KAAK,KAAK,UAKd,GAAI,OAAS,SAAS,EAAK,EAAK,EAAM,EAAM,EAAO,EAAQ,EAAQ,EAAQ,CAWzE,GARA,GAAQ,EACR,GAAQ,EACR,GAAS,EACT,GAAU,EACV,GAAU,EACV,GAAU,EAGN,EAAO,EAAI,OAAS,EAAO,EAAI,QAAU,EAAO,EAAQ,EAAI,OAAS,EAAO,EAAS,EAAI,OAC3F,KAAM,IAAI,OAAM,gCAGlB,GAAI,EAAS,EAAI,OAAS,EAAS,EAAI,QAAU,EAAS,EAAQ,EAAI,OAAS,EAAS,EAAS,EAAI,OACnG,KAAM,IAAI,OAAM,gCAGlB,OAAS,GAAI,EAAG,EAAI,EAAQ,IAC1B,EAAI,KAAK,KAAK,EAAI,KACd,GAAS,GAAK,EAAI,MAAQ,GAAW,EACrC,GAAO,GAAK,EAAI,MAAQ,GAAS,EACjC,GAAO,GAAK,EAAI,MAAQ,EAAO,GAAU,IAMjD,GAAI,UAAU,OAAS,SAAS,EAAK,EAAM,EAAM,EAAO,EAAQ,EAAQ,EAAQ,CAE9E,UAAI,OAAO,KAAM,EAAK,EAAM,EAAM,EAAO,EAAQ,EAAQ,GAClD,MAGT,GAAI,YAAc,SAAS,EAAK,CAC9B,GAAI,EAAI,MAAO,CACb,OAAS,GAAI,EAAG,EAAI,EAAI,OAAQ,IAC9B,OAAS,GAAI,EAAG,EAAI,EAAI,MAAO,IAG7B,OAFI,GAAO,EAAI,MAAQ,EAAI,GAAM,EAExB,EAAI,EAAG,EAAI,EAAG,IAAK,CAC1B,GAAI,GAAS,EAAI,KAAK,EAAM,GAAK,IACjC,EAAS,KAAK,IAAI,EAAQ,EAAI,IAAM,EAAI,OACxC,EAAI,KAAK,EAAM,GAAK,KAAK,MAAM,EAAS,KAI9C,EAAI,MAAQ,IAIhB,GAAI,UAAU,YAAc,UAAW,CACrC,GAAI,YAAY,SC3KlB,mBAqCA,GAAI,IAAO,IAAQ,SAAS,EAAK,CAC/B,MAAO,IAAI,QAAO,GAAK,SAAS,WAGlC,YAAqB,EAAS,CAC5B,GAAI,GAAO,KACR,EAAS,KAAK,MACd,EAAS,KAAK,MACd,EAAS,GAAI,OAAM,IACnB,EAAU,GAAI,OAAM,IACpB,EAAU,GAAI,OAAM,IACpB,EAAW,GAAI,OAAM,IACrB,EACA,EACA,EACA,EAEA,EAAU,GAAI,OAAM,OACpB,EAAW,GAAI,OAAM,OACrB,EAAkB,GAAI,OAAM,IAC5B,EAAK,GAAI,OAAM,IACf,EAAU,GACV,EAAU,EACV,EAAU,EAEV,EAAM,GAAI,OAAM,IAChB,EAAM,GAAI,OAAM,IAChB,EAAM,GAAI,OAAM,IAChB,EAAM,GAAI,OAAM,KAChB,EAAgB,GAAI,OAAM,MAC1B,EAEA,EAAS,CACV,EAAG,EAAG,EAAG,EAAE,GAAG,GAAG,GAAG,GACpB,EAAG,EAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GACpB,EAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GACpB,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GACrB,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GACrB,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GACrB,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GACrB,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAGnB,EAA2B,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAC5D,EAA0B,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,IAClD,EAA2B,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,KAC5D,EAA0B,CAC5B,EAAK,EAAK,EAAK,EAAK,EAAK,GAAK,EAAK,GACnC,GAAK,GAAK,GAAK,EAAK,GAAK,GAAK,GAAK,EACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,EACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,GAAK,GAAK,IAAK,IAAK,EAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,KAGH,EAA6B,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAC9D,EAA4B,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,IACpD,GAA6B,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,KAC9D,GAA4B,CAC9B,EAAK,EAAK,EAAK,EAAK,GAAK,EAAK,EAAK,GACnC,GAAK,EAAK,GAAK,GAAK,GAAK,EAAK,GAAK,IACnC,GAAK,GAAK,GAAK,IAAK,EAAK,GAAK,GAAK,IACnC,IAAK,IAAK,IAAK,EAAK,GAAK,GAAK,GAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,GAAK,GACnC,IAAK,GAAK,IAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,KAGP,YAAyB,EAAG,CAY1B,OAXI,IAAM,CACT,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAG,IAAI,IAAK,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAG,IAAI,IAAK,GAC5B,GAAI,GAAI,GAAI,GAAG,IAAI,IAAI,IAAI,IAC3B,GAAI,GAAI,GAAI,GAAG,IAAI,IAAI,IAAK,IAGpB,GAAI,EAAG,GAAI,GAAI,KAAK,CAC5B,GAAI,IAAI,EAAQ,IAAI,IAAG,EAAG,IAAI,KAC9B,AAAI,GAAI,EACP,GAAI,EACM,GAAI,KACd,IAAI,KAEL,EAAO,EAAO,KAAM,GAYrB,OAVI,IAAO,CACV,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAEpB,GAAI,EAAG,GAAI,GAAI,KAAK,CAC5B,GAAI,IAAI,EAAQ,IAAK,IAAG,EAAG,IAAI,KAC/B,AAAI,GAAI,EACP,GAAI,EACM,GAAI,KACd,IAAI,KAEL,EAAQ,EAAO,KAAM,GAOtB,OALI,IAAO,CACV,EAAK,YAAa,YAAa,YAC/B,EAAK,WAAa,SAAa,YAE5B,GAAI,EACC,GAAM,EAAG,GAAM,EAAG,KAE1B,OAAS,GAAM,EAAG,EAAM,EAAG,IAE1B,EAAQ,IAAO,EAAO,GAAQ,EAAO,KAAM,GAAK,IAAO,GAAK,GAAO,GACnE,EAAS,IAAM,EAAO,GAAQ,EAAO,KAAM,GAAK,IAAO,GAAK,GAAO,GACnE,KAKH,YAA2B,EAAS,GAAU,CAI7C,OAHI,IAAY,EACZ,GAAe,EACf,GAAK,GAAI,OACJ,GAAI,EAAG,IAAK,GAAI,KAAK,CAC7B,OAAS,IAAI,EAAG,IAAK,EAAQ,IAAI,KAChC,GAAG,GAAU,KAAiB,GAC9B,GAAG,GAAU,KAAe,GAAK,GACjC,GAAG,GAAU,KAAe,GAAK,GACjC,KACA,KAED,IAAW,EAEZ,MAAO,IAGR,aACA,CACC,EAAS,GAAkB,EAAyB,GACpD,EAAU,GAAkB,EAA2B,GACvD,EAAS,GAAkB,EAAyB,GACpD,EAAU,GAAkB,GAA2B,IAGxD,aACA,CAGC,OAFI,GAAU,EACV,GAAU,EACL,GAAM,EAAG,IAAO,GAAI,KAAO,CAEnC,OAAS,IAAK,EAAS,GAAG,GAAS,KAClC,EAAS,MAAM,IAAM,GACrB,EAAQ,MAAM,IAAM,GACpB,EAAQ,MAAM,IAAI,GAAK,GACvB,EAAQ,MAAM,IAAI,GAAK,GAGxB,OAAS,IAAO,CAAE,IAAQ,GAAI,IAAO,CAAC,EAAS,KAC9C,EAAS,MAAM,IAAS,GACxB,EAAQ,MAAM,IAAS,GACvB,EAAQ,MAAM,IAAO,GAAK,GAC1B,EAAQ,MAAM,IAAO,GAAK,GAAQ,EAAE,GAErC,IAAY,EACZ,KAAY,GAId,aAA2B,CAC1B,OAAQ,GAAI,EAAG,EAAI,IAAI,IACtB,EAAc,GAAa,MAAQ,EACnC,EAAe,EAAG,KAAM,GAAO,MAAQ,EACvC,EAAe,EAAG,KAAM,GAAQ,KAAO,EAAI,MAC3C,EAAe,EAAG,KAAM,GAAM,OAAS,EACvC,EAAe,EAAE,MAAO,GAAM,OAAS,EACvC,EAAe,EAAE,MAAO,GAAO,MAAQ,EAAI,QAC3C,EAAe,EAAE,MAAO,GAAM,OAAS,EACvC,EAAe,EAAE,MAAO,GAAM,MAAS,EAKzC,YAAmB,EACnB,CAGC,OAFI,IAAQ,EAAG,GACX,GAAS,EAAG,GAAG,EACX,IAAU,GACjB,AAAI,GAAS,GAAK,IACjB,IAAY,GAAK,GAElB,KACA,IACI,EAAU,GACb,CAAI,GAAW,IACd,GAAU,KACV,EAAU,IAGV,EAAU,GAEX,EAAQ,EACR,EAAQ,GAKX,WAAmB,EACnB,CAEI,EAAQ,KAAK,GAGjB,YAAmB,EACnB,CACC,EAAW,GAAO,EAAG,KACrB,EAAW,EAAU,KAItB,YAAmB,EAAM,GACzB,CACC,GAAI,IAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAE5B,EAAQ,EACR,GACA,GAAK,EACL,GAAM,GACV,IAAK,GAAE,EAAG,GAAE,GAAI,EAAE,GAClB,CACC,GAAK,EAAK,GACV,GAAK,EAAK,EAAQ,GAClB,GAAK,EAAK,EAAQ,GAClB,GAAK,EAAK,EAAQ,GAClB,GAAK,EAAK,EAAQ,GAClB,GAAK,EAAK,EAAQ,GAClB,GAAK,EAAK,EAAQ,GAClB,GAAK,EAAK,EAAQ,GAElB,GAAI,IAAO,GAAK,GACZ,GAAO,GAAK,GACZ,GAAO,GAAK,GACZ,GAAO,GAAK,GACZ,GAAO,GAAK,GACZ,GAAO,GAAK,GACZ,GAAO,GAAK,GACZ,GAAO,GAAK,GAGZ,GAAQ,GAAO,GACf,GAAQ,GAAO,GACf,GAAQ,GAAO,GACf,GAAQ,GAAO,GAEnB,EAAK,GAAW,GAAQ,GACxB,EAAK,EAAQ,GAAK,GAAQ,GAE1B,GAAI,IAAM,IAAQ,IAAS,WAC3B,EAAK,EAAQ,GAAK,GAAQ,GAC1B,EAAK,EAAQ,GAAK,GAAQ,GAG1B,GAAQ,GAAO,GACf,GAAQ,GAAO,GACf,GAAQ,GAAO,GAGf,GAAI,IAAM,IAAQ,IAAS,WACvB,GAAK,SAAc,GAAQ,GAC3B,GAAK,YAAc,GAAQ,GAC3B,GAAK,GAAQ,WAEb,GAAM,GAAO,GACb,GAAM,GAAO,GAEjB,EAAK,EAAQ,GAAK,GAAM,GACxB,EAAK,EAAQ,GAAK,GAAM,GACxB,EAAK,EAAQ,GAAK,GAAM,GACxB,EAAK,EAAQ,GAAK,GAAM,GAExB,GAAW,EAKZ,IADA,EAAU,EACL,GAAE,EAAG,GAAE,GAAI,EAAE,GAClB,CACC,GAAK,EAAK,GACV,GAAK,EAAK,EAAU,GACpB,GAAK,EAAK,EAAU,IACpB,GAAK,EAAK,EAAU,IACpB,GAAK,EAAK,EAAU,IACpB,GAAK,EAAK,EAAU,IACpB,GAAK,EAAK,EAAU,IACpB,GAAK,EAAK,EAAU,IAEpB,GAAI,IAAS,GAAK,GACd,GAAS,GAAK,GACd,GAAS,GAAK,GACd,EAAS,GAAK,GACd,EAAS,GAAK,GACd,EAAS,GAAK,GACd,EAAS,GAAK,GACd,EAAS,GAAK,GAGd,EAAU,GAAS,EACnB,EAAU,GAAS,EACnB,GAAU,GAAS,EACnB,GAAU,GAAS,EAEvB,EAAK,GAAW,EAAU,GAC1B,EAAK,EAAQ,IAAM,EAAU,GAE7B,GAAI,IAAQ,IAAU,GAAW,WACjC,EAAK,EAAQ,IAAM,EAAU,GAC7B,EAAK,EAAQ,IAAM,EAAU,GAG7B,EAAU,EAAS,EACnB,GAAU,EAAS,EACnB,GAAU,EAAS,GAGnB,GAAI,IAAQ,GAAU,IAAW,WAC7B,GAAO,SAAc,EAAU,GAC/B,GAAO,YAAc,GAAU,GAC/B,GAAO,GAAU,WAEjB,GAAQ,GAAS,GACjB,GAAQ,GAAS,GAErB,EAAK,EAAQ,IAAM,GAAQ,GAC3B,EAAK,EAAQ,IAAM,GAAQ,GAC3B,EAAK,EAAS,GAAK,GAAQ,GAC3B,EAAK,EAAQ,IAAM,GAAQ,GAE3B,IAID,GAAI,IACJ,IAAK,GAAE,EAAG,GAAE,GAAK,EAAE,GAGlB,GAAY,EAAK,IAAG,GAAM,IAC1B,EAAgB,IAAM,GAAY,EAAS,GAAY,GAAK,EAAO,GAAY,GAAK,EAIrF,MAAO,GAGR,aACA,CACC,GAAU,OACV,GAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,GACV,EAAU,GACV,EAAU,GACV,EAAU,GACV,GAAU,GACV,GAAU,GACV,EAAU,GACV,EAAU,GAGX,YAAmB,EAAO,GAC1B,CACC,GAAU,OACV,GAAU,IACV,EAAU,GACV,GAAU,IACV,GAAU,GACV,EAAU,GACV,EAAU,GACV,EAAU,IACV,EAAU,GACV,EAAU,GACV,EAAU,IACV,EAAU,GACV,EAAU,GACV,EAAU,IACV,EAAU,GAGX,YACA,CACC,GAAU,OACV,GAAU,KACV,EAAU,GACV,OAAS,GAAE,EAAG,EAAE,GAAI,IACnB,EAAU,EAAO,IAElB,EAAU,GACV,OAAS,IAAE,EAAG,GAAE,GAAI,KACnB,EAAU,EAAQ,KAIpB,aACA,CACC,GAAU,OACV,GAAU,KAEV,EAAU,GACV,OAAS,GAAE,EAAG,EAAE,GAAI,IACnB,EAAU,EAAyB,EAAE,IAEtC,OAAS,IAAE,EAAG,IAAG,GAAI,KACpB,EAAU,EAAwB,KAGnC,EAAU,IACV,OAAS,IAAE,EAAG,GAAE,GAAI,KACnB,EAAU,EAAyB,GAAE,IAEtC,OAAS,IAAE,EAAG,IAAG,IAAK,KACrB,EAAU,EAAwB,KAGnC,EAAU,GACV,OAAS,IAAE,EAAG,GAAE,GAAI,KACnB,EAAU,EAA2B,GAAE,IAExC,OAAS,IAAE,EAAG,IAAG,GAAI,KACpB,EAAU,EAA0B,KAGrC,EAAU,IACV,OAAS,IAAE,EAAG,GAAE,GAAI,KACnB,EAAU,GAA2B,GAAE,IAExC,OAAS,IAAE,EAAG,IAAG,IAAK,KACrB,EAAU,GAA0B,KAItC,aACA,CACC,GAAU,OACV,GAAU,IACV,EAAU,GACV,EAAU,GACV,EAAU,GACV,EAAU,GACV,EAAU,IACV,EAAU,GACV,EAAU,IACV,EAAU,GACV,EAAU,IACV,EAAU,GAGX,YAAmB,EAAK,GAAO,GAAI,GAAM,GAAK,CAS7C,OARI,IAAM,GAAK,GACX,GAAY,GAAK,KACjB,GACA,GAAM,GACN,GAAM,GACN,EAAM,GACN,GAAS,GAAU,EAAK,IAEnB,GAAE,EAAE,GAAE,EAAI,EAAE,GACpB,EAAG,EAAO,KAAI,GAAO,IAEtB,GAAI,IAAO,EAAG,GAAK,GAAI,GAAK,EAAG,GAE/B,AAAI,IAAM,EACT,GAAU,GAAK,IAEf,IAAM,MAAM,GACZ,GAAU,GAAK,EAAS,MACxB,GAAU,EAAQ,MAInB,OADI,IAAU,GACN,GAAQ,GAAK,EAAG,KAAU,EAAI,KAAW,CAEjD,GAAK,IAAW,EACf,UAAU,IACH,GAIR,OAFI,IAAI,EACJ,GACI,IAAK,IAAU,CAEtB,OADI,IAAW,GACP,EAAG,KAAI,GAAO,IAAG,GAAU,EAAE,GAAG,CACxC,GAAI,IAAW,GAAE,GACjB,GAAK,IAAY,GAAM,CACtB,GAAM,IAAU,EAChB,OAAS,IAAS,EAAG,IAAY,GAAK,EAAE,GACvC,GAAU,IACX,GAAW,GAAS,GAErB,GAAM,MAAM,EAAG,IACf,GAAU,GAAM,KAAU,GAAG,EAAS,MACtC,GAAU,EAAQ,KAClB,KAED,MAAK,KAAW,IACf,GAAU,IAEJ,GAGR,aAA8B,CAE7B,OADI,GAAO,OAAO,aACV,GAAE,EAAG,GAAI,IAAK,KACrB,EAAI,IAAK,EAAK,IAIhB,KAAK,OAAS,SAAS,EAAM,GAC7B,CACC,GAAI,IAAa,GAAI,QAAO,UAE5B,AAAG,IAAS,GAAW,IAGvB,EAAU,GAAI,OACd,EAAQ,EACR,EAAQ,EAGR,GAAU,OACV,KACA,IACA,GAAU,EAAM,MAAM,EAAM,QAC5B,KACA,KAIA,GAAI,IAAI,EACJ,GAAI,EACJ,GAAI,EAER,EAAQ,EACR,EAAQ,EAGR,KAAK,OAAO,YAAc,WAY1B,OAVI,IAAY,EAAM,KAClB,GAAQ,EAAM,MACd,GAAS,EAAM,OAEf,GAAY,GAAM,EAClB,EAAc,GAAM,EAEpB,GAAG,GAAI,EACP,GAAG,GAAG,GACN,GAAM,GAAG,GAAI,GAAI,GACf,GAAI,IAAO,CAEhB,IADA,GAAI,EACE,GAAI,IAAU,CAMpB,IALA,GAAQ,GAAY,GAAI,GACxB,GAAI,GACJ,GAAM,GACN,GAAM,EAEF,GAAI,EAAG,GAAM,GAAI,KACpB,GAAM,IAAO,EACb,GAAQ,IAAM,GAAM,EACpB,GAAI,GAAU,GAAM,GAAc,GAE/B,GAAE,IAAO,IACX,KAAK,GAAW,IAAE,EAAE,GAAI,KAGtB,GAAE,IAAO,IACX,KAAM,GAAE,GAAO,GAAW,GAG3B,GAAI,GAAW,MACf,GAAI,GAAW,MACf,GAAI,GAAW,MAUf,EAAI,IAAS,GAAc,IAAiB,EAAe,GAAK,KAAM,GAAK,EAAe,GAAK,KAAM,IAAO,IAAI,IAChH,EAAI,IAAS,GAAe,GAAK,KAAM,GAAK,EAAe,GAAI,MAAO,GAAK,EAAe,GAAI,MAAO,IAAO,IAAI,IAChH,EAAI,IAAS,GAAe,GAAI,MAAO,GAAK,EAAe,GAAI,MAAO,GAAK,EAAe,GAAI,MAAO,IAAO,IAAI,IAIjH,GAAM,GAAU,EAAK,EAAS,GAAK,EAAQ,GAC3C,GAAM,GAAU,EAAK,EAAU,GAAK,EAAS,GAC7C,GAAM,GAAU,EAAK,EAAU,GAAK,EAAS,GAC7C,IAAG,GAEH,IAAG,EAOJ,GAAK,GAAW,EAAI,CACnB,GAAI,IAAW,GACf,GAAS,GAAK,EAAQ,EACtB,GAAS,GAAM,IAAI,EAAQ,GAAI,EAC/B,GAAU,IAGX,UAAU,OAGA,GAAI,QAAO,GAErB,GAAI,IAAc,0BAA4B,GAAK,EAAQ,KAAK,KAEhE,EAAU,GAGV,GAAI,IAAW,GAAI,QAAO,UAAY,GAItC,MAAO,KAGT,YAAoB,EAAQ,CAQ3B,GAPI,GAAW,GACd,GAAU,GAEP,EAAU,KACb,GAAU,KAGR,GAAkB,EAErB,IAAI,IAAK,EACT,AAAI,EAAU,GACb,GAAK,KAAK,MAAM,IAAO,GAEvB,GAAK,KAAK,MAAM,IAAM,EAAQ,GAG/B,GAAgB,IAChB,EAAiB,GAIlB,aAAe,CACd,GAAI,GAAa,GAAI,QAAO,UAC5B,AAAI,GAAS,GAAU,IAEvB,KACA,KACA,KACA,KAEA,GAAW,GACX,GAAI,IAAW,GAAI,QAAO,UAAY,EAIvC,KAGD,AAAI,MAAO,MAAW,QACrB,IAAO,QAAU,IAGlB,YAAgB,EAAS,EAAI,CAC3B,AAAI,MAAO,IAAO,aAAa,GAAK,IACpC,GAAI,GAAU,GAAI,IAAY,GAC3B,EAAO,EAAQ,OAAO,EAAS,GAClC,MAAO,CACL,KAAM,EACN,MAAO,EAAQ,MACf,OAAQ,EAAQ,WCjvBpB,mBA0BA,GAAI,IAAa,UAAqB,CACpC,aACA,GAAI,GAAY,GAAI,YAAW,CAC5B,EACA,EAAI,EACL,GAAK,EAAI,EACR,EAAG,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GAAI,EACf,EAAG,GAAI,GAAI,GAAI,GAAI,GACpB,GAAI,GAAI,GAAI,GAAI,GAAI,GAAK,EACxB,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxB,GAAI,GAAI,GAAI,GAAI,GAAI,GACpB,GAAI,GAAI,GAAI,GAAI,GAChB,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GACR,GAAI,GACJ,KAGE,EAAY,KACZ,EAAa,IACb,EAAY,KACZ,EAAY,KACZ,EAAY,KACZ,EAAY,KACZ,EAAY,KACZ,EAAa,KAEjB,YAAuB,EAGvB,WAA2B,EAAa,EAAQ,CAE9C,OADI,GAAI,EAAG,EAAO,GAAI,EAAG,EAAG,EAAS,GAC9B,EAAS,GAAK,CAAC,EAAY,EAAS,IACzC,IACF,EAAK,KAAK,CAAC,SAAU,GAAI,MAAO,IAChC,GAAI,GAAI,EAAK,GAAI,EACjB,IAAK,EAAI,EAAG,EAAI,EAAQ,IAAK,CAC3B,IAAK,EAAI,EAAG,EAAI,EAAY,GAAI,IAAK,CAGnC,IAFA,EAAI,EAAK,MACT,EAAE,SAAS,EAAE,OAAS,EAAO,GACtB,EAAE,MAAQ,GAAG,CAClB,GAAI,EAAK,SAAW,EAClB,KAAM,IAAI,OAAM,oCAClB,EAAI,EAAK,MAIX,IAFA,EAAE,QACF,EAAK,KAAK,GACH,EAAK,QAAU,GACpB,EAAK,KAAK,EAAI,CAAC,SAAU,GAAI,MAAO,IACpC,EAAE,SAAS,EAAE,OAAS,EAAE,SACxB,EAAI,EAEN,IAEF,AAAI,EAAI,EAAI,GAEV,GAAK,KAAK,EAAI,CAAC,SAAU,GAAI,MAAO,IACpC,EAAE,SAAS,EAAE,OAAS,EAAE,SACxB,EAAI,GAGR,MAAO,GAAK,GAAG,SAGjB,WAAoB,EAAM,EACN,EAAO,EAAY,EACnB,EAAe,EACf,EAAgB,EAAY,CAC9C,GAAI,GAAY,EAAM,UAClB,EAAiB,EAAM,eACvB,EAAY,EAAM,UAClB,EAAc,EAAM,YACpB,EAAc,EAAM,YACpB,EAAO,EAAM,KAAM,EAAO,EAAM,KAEhC,EAAc,EAAQ,GAAW,EAAG,GAAY,EACpD,aAAmB,CACjB,GAAI,GAAY,EACd,YACQ,IAAY,GAAa,EAGnC,GADA,GAAW,EAAK,KACZ,IAAY,IAAM,CACpB,GAAI,IAAW,EAAK,KACpB,GAAI,GACF,KAAM,IAAI,OAAM,sBAA0B,KAAY,EAAK,IAAU,SAAS,KAIlF,UAAY,EACL,KAAa,EAEtB,YAAuB,GAAM,CAE3B,OADI,IAAO,GAAM,EACT,GAAM,QAAe,MAAM,CAEjC,GADA,GAAO,GAAK,GACR,MAAO,KAAS,SAClB,MAAO,IACT,GAAI,MAAO,KAAS,SAClB,KAAM,IAAI,OAAM,4BAEpB,MAAO,MAET,YAAiB,GAAQ,CAEvB,OADI,IAAI,EACD,GAAS,GAAG,CACjB,GAAI,GAAM,KACV,GAAI,IAAQ,KAAM,OAClB,GAAK,IAAK,EAAK,EACf,KAEF,MAAO,IAET,YAA0B,GAAQ,CAChC,GAAI,IAAI,GAAQ,IAChB,MAAI,KAAK,GAAM,GAAS,EACf,GACF,GAAK,KAAM,IAAU,EAE9B,YAAwB,GAAW,GAAI,CACrC,GAAI,GAAI,GAAc,GAAU,gBAC5B,GAAO,IAAM,EAAI,EAAI,GAAiB,GAC1C,GAAG,GAAK,GAAU,MAAQ,GAE1B,OADI,IAAI,EACD,GAAI,IAAI,CACb,GAAI,IAAK,GAAc,GAAU,gBAC7B,GAAI,GAAK,GAAI,GAAI,IAAM,EAC3B,GAAI,KAAM,EAAG,CACX,GAAI,GAAI,GACN,MACF,IAAK,GACL,SAEF,IAAK,GACL,GAAI,IAAI,EAAU,IAClB,GAAG,IAAK,GAAiB,IACzB,MAGJ,YAAuB,GAAW,GAAI,CACpC,GAAI,GAAI,GAAc,GAAU,gBAC5B,GAAO,IAAM,EAAI,EAAK,GAAiB,IAAM,EACjD,GAAG,GAAM,GAAU,MAAQ,GAE7B,WAA4B,GAAW,GAAI,CACzC,GAAG,IAAM,MAAa,EAExB,GAAI,IAAS,EACb,YAAuB,GAAW,GAAI,CACpC,GAAI,GAAS,EAAG,CACd,KACA,OAGF,OADI,GAAI,EAAe,GAAI,EACpB,GAAK,IAAG,CACb,GAAI,IAAK,GAAc,GAAU,gBAC7B,GAAI,GAAK,GAAI,GAAI,IAAM,EAC3B,GAAI,KAAM,EAAG,CACX,GAAI,GAAI,GAAI,CACV,GAAS,GAAQ,IAAM,IAAK,IAAK,EACjC,MAEF,GAAK,GACL,SAEF,GAAK,GACL,GAAI,IAAI,EAAU,GAClB,GAAG,IAAK,GAAiB,IAAM,IAAK,GACpC,KAGJ,GAAI,IAAoB,EAAG,GAC3B,WAA4B,GAAW,GAAI,CAEzC,OADI,GAAI,EAAe,GAAI,EAAa,GAAI,EACrC,GAAK,IAAG,CACb,GAAI,IAAI,EAAU,GACd,GAAY,GAAG,IAAK,EAAI,GAAK,EACjC,OAAQ,QACH,GACH,GAAI,IAAK,GAAc,GAAU,gBAC7B,GAAI,GAAK,GAAI,GAAI,IAAM,EAC3B,GAAI,KAAM,EACR,AAAI,GAAI,GACN,IAAS,GAAQ,IAAM,IAAK,IAC5B,GAAoB,GAEpB,IAAI,GACJ,GAAoB,OAEjB,CACL,GAAI,KAAM,EACR,KAAM,IAAI,OAAM,wBAClB,GAAwB,GAAiB,IACzC,GAAoB,GAAI,EAAI,EAE9B,aACG,OACA,GACH,AAAI,GAAG,IACL,GAAG,KAAO,OAAa,GAAc,GAErC,MACI,KAAM,GACR,IAAoB,IAAqB,EAAI,EAAI,IAErD,UACG,GACH,AAAI,GAAG,IACL,GAAG,KAAO,OAAa,GAAc,GAErC,IAAG,IAAK,IAAyB,EACjC,GAAoB,GAEtB,UACG,GACH,AAAI,GAAG,KACL,IAAG,KAAO,OAAa,GAAc,IACvC,MAEF,IAEF,AAAI,KAAsB,GACxB,MACI,KAAW,GACb,IAAoB,IAG1B,YAAmB,GAAW,GAAQ,EAAK,GAAK,GAAK,CACnD,GAAI,IAAU,EAAM,EAAe,EAC/B,GAAS,EAAM,EACf,GAAW,GAAS,GAAU,EAAI,GAClC,GAAW,GAAS,GAAU,EAAI,GACtC,GAAO,GAAW,GAAU,OAAO,IAAU,KAE/C,YAAqB,GAAW,GAAQ,EAAK,CAC3C,GAAI,IAAY,EAAM,GAAU,cAAiB,EAC7C,GAAW,EAAM,GAAU,cAC/B,GAAO,GAAW,GAAU,OAAO,IAAU,KAG/C,GAAI,IAAmB,EAAW,OAC9B,GAAW,GAAG,GAAG,EAAG,GACpB,GACJ,AAAI,EACF,AAAI,IAAkB,EACpB,GAAW,IAAmB,EAAI,GAAgB,EAElD,GAAW,IAAmB,EAAI,GAAgB,EAEpD,GAAW,GAGb,GAAI,IAAM,EAAG,GACT,GACJ,AAAI,IAAoB,EACtB,GAAc,EAAW,GAAG,cAAgB,EAAW,GAAG,gBAE1D,GAAc,EAAc,EAAM,cAE/B,GAAe,GAAgB,IAGpC,OADI,IAAG,GACA,GAAM,IAAa,CAExB,IAAK,GAAI,EAAG,GAAI,GAAkB,KAChC,EAAW,IAAG,KAAO,EAGvB,GAFA,GAAS,EAEL,IAAoB,EAEtB,IADA,GAAY,EAAW,GAClB,GAAI,EAAG,GAAI,EAAe,KAC7B,GAAY,GAAW,GAAU,IACjC,SAGF,KAAK,GAAI,EAAG,GAAI,EAAe,KAAK,CAClC,IAAK,GAAI,EAAG,GAAI,GAAkB,KAIhC,IAHA,GAAY,EAAW,IACvB,GAAI,GAAU,EACd,GAAI,GAAU,EACT,GAAI,EAAG,GAAI,GAAG,KACjB,IAAK,EAAI,EAAG,EAAI,GAAG,IACjB,GAAU,GAAW,GAAU,GAAK,GAAG,GAO7C,GAHA,KAGI,KAAQ,GAAa,MAO7B,GAFA,GAAY,EACZ,GAAU,EAAK,IAAW,EAAK,EAAK,EAAS,GACzC,GAAS,MACX,KAAM,IAAI,OAAM,wBAGlB,GAAI,IAAU,OAAU,IAAU,MAChC,GAAU,MAGV,OAGJ,MAAO,GAAS,EAGlB,WAA4B,EAAO,EAAW,CAC5C,GAAI,GAAQ,GACR,EAAgB,EAAU,cAC1B,EAAkB,EAAU,gBAC5B,EAAiB,GAAiB,EAClC,EAAI,GAAI,YAAW,IAAK,EAAI,GAAI,YAAW,IAO/C,WAA4B,GAAI,GAAS,GAAQ,CAC/C,GAAI,IAAK,EAAU,kBACf,GAAI,GAAI,GAAI,GAAI,EAAI,GAAI,GAAI,GAAI,GAChC,EAAI,GACJ,GAGJ,IAAK,GAAI,EAAG,GAAI,GAAI,KAClB,EAAE,IAAK,GAAG,IAAK,GAAG,IAGpB,IAAK,GAAI,EAAG,GAAI,EAAG,EAAE,GAAG,CACtB,GAAI,IAAM,EAAI,GAGd,GAAI,EAAE,EAAI,KAAQ,GAAK,EAAE,EAAI,KAAQ,GAAK,EAAE,EAAI,KAAQ,GACpD,EAAE,EAAI,KAAQ,GAAK,EAAE,EAAI,KAAQ,GAAK,EAAE,EAAI,KAAQ,GACpD,EAAE,EAAI,KAAQ,EAAG,CACnB,GAAK,EAAW,EAAE,EAAI,IAAO,KAAQ,GACrC,EAAE,EAAI,IAAO,GACb,EAAE,EAAI,IAAO,GACb,EAAE,EAAI,IAAO,GACb,EAAE,EAAI,IAAO,GACb,EAAE,EAAI,IAAO,GACb,EAAE,EAAI,IAAO,GACb,EAAE,EAAI,IAAO,GACb,EAAE,EAAI,IAAO,GACb,SAIF,GAAM,EAAW,EAAE,EAAI,IAAO,KAAQ,EACtC,GAAM,EAAW,EAAE,EAAI,IAAO,KAAQ,EACtC,GAAK,EAAE,EAAI,IACX,GAAK,EAAE,EAAI,IACX,EAAM,EAAc,GAAE,EAAI,IAAO,EAAE,EAAI,KAAQ,KAAQ,EACvD,GAAM,EAAc,GAAE,EAAI,IAAO,EAAE,EAAI,KAAQ,KAAQ,EACvD,GAAK,EAAE,EAAI,KAAQ,EACnB,GAAK,EAAE,EAAI,KAAQ,EAGnB,GAAK,GAAK,GAAI,GAAM,EACpB,GAAM,GAAK,GAAK,GAAM,EACtB,GAAK,GACL,GAAK,GAAK,EAAU,GAAK,EAAU,KAAQ,EAC3C,GAAM,GAAK,EAAU,GAAK,EAAU,KAAQ,EAC5C,GAAK,GACL,GAAK,EAAK,GAAK,GAAM,EACrB,EAAM,EAAK,GAAK,GAAM,EACtB,GAAK,GACL,GAAK,GAAK,GAAK,GAAM,EACrB,GAAM,GAAK,GAAK,GAAM,EACtB,GAAK,GAGL,GAAK,GAAK,GAAK,GAAM,EACrB,GAAM,GAAK,GAAK,GAAM,EACtB,GAAK,GACL,GAAK,GAAK,GAAK,GAAM,EACrB,GAAM,GAAK,GAAK,GAAM,EACtB,GAAK,GACL,GAAK,EAAK,EAAU,GAAK,EAAU,MAAS,GAC5C,EAAM,EAAK,EAAU,GAAK,EAAU,MAAS,GAC7C,GAAK,GACL,GAAK,GAAK,EAAU,GAAK,EAAU,MAAS,GAC5C,GAAM,GAAK,EAAU,GAAK,EAAU,MAAS,GAC7C,GAAK,GAGL,EAAE,EAAI,IAAO,GAAK,GAClB,EAAE,EAAI,IAAO,GAAK,GAClB,EAAE,EAAI,IAAO,GAAK,GAClB,EAAE,EAAI,IAAO,GAAK,GAClB,EAAE,EAAI,IAAO,GAAK,GAClB,EAAE,EAAI,IAAO,GAAK,GAClB,EAAE,EAAI,IAAO,GAAK,EAClB,EAAE,EAAI,IAAO,GAAK,EAIpB,IAAK,GAAI,EAAG,GAAI,EAAG,EAAE,GAAG,CACtB,GAAI,IAAM,GAGV,GAAI,EAAE,EAAE,EAAI,KAAQ,GAAK,EAAE,EAAE,EAAI,KAAQ,GAAK,EAAE,EAAE,EAAI,KAAQ,GAC1D,EAAE,EAAE,EAAI,KAAQ,GAAK,EAAE,EAAE,EAAI,KAAQ,GAAK,EAAE,EAAE,EAAI,KAAQ,GAC1D,EAAE,EAAE,EAAI,KAAQ,EAAG,CACrB,GAAK,EAAW,GAAO,GAAE,GAAK,MAAS,GACvC,EAAE,EAAE,EAAI,IAAO,GACf,EAAE,EAAE,EAAI,IAAO,GACf,EAAE,EAAE,EAAI,IAAO,GACf,EAAE,EAAE,EAAI,IAAO,GACf,EAAE,EAAE,EAAI,IAAO,GACf,EAAE,EAAE,EAAI,IAAO,GACf,EAAE,EAAE,EAAI,IAAO,GACf,EAAE,EAAE,EAAI,IAAO,GACf,SAIF,GAAM,EAAW,EAAE,EAAE,EAAI,IAAO,MAAS,GACzC,GAAM,EAAW,EAAE,EAAE,EAAI,IAAO,MAAS,GACzC,GAAK,EAAE,EAAE,EAAI,IACb,GAAK,EAAE,EAAE,EAAI,IACb,EAAM,EAAc,GAAE,EAAE,EAAI,IAAO,EAAE,EAAE,EAAI,KAAQ,MAAS,GAC5D,GAAM,EAAc,GAAE,EAAE,EAAI,IAAO,EAAE,EAAE,EAAI,KAAQ,MAAS,GAC5D,GAAK,EAAE,EAAE,EAAI,IACb,GAAK,EAAE,EAAE,EAAI,IAGb,GAAK,GAAK,GAAK,GAAM,EACrB,GAAM,GAAK,GAAK,GAAM,EACtB,GAAK,GACL,GAAK,GAAK,EAAU,GAAK,EAAU,MAAS,GAC5C,GAAM,GAAK,EAAU,GAAK,EAAU,MAAS,GAC7C,GAAK,GACL,GAAK,EAAK,GAAK,GAAM,EACrB,EAAM,EAAK,GAAK,GAAM,EACtB,GAAK,GACL,GAAK,GAAK,GAAK,GAAM,EACrB,GAAM,GAAK,GAAK,GAAM,EACtB,GAAK,GAGL,GAAK,GAAK,GAAK,GAAM,EACrB,GAAM,GAAK,GAAK,GAAM,EACtB,GAAK,GACL,GAAK,GAAK,GAAK,GAAM,EACrB,GAAM,GAAK,GAAK,GAAM,EACtB,GAAK,GACL,GAAK,EAAK,EAAU,GAAK,EAAU,MAAS,GAC5C,EAAM,EAAK,EAAU,GAAK,EAAU,MAAS,GAC7C,GAAK,GACL,GAAK,GAAK,EAAU,GAAK,EAAU,MAAS,GAC5C,GAAM,GAAK,EAAU,GAAK,EAAU,MAAS,GAC7C,GAAK,GAGL,EAAE,EAAE,EAAI,IAAO,GAAK,GACpB,EAAE,EAAE,EAAI,IAAO,GAAK,GACpB,EAAE,EAAE,EAAI,IAAO,GAAK,GACpB,EAAE,EAAE,EAAI,IAAO,GAAK,GACpB,EAAE,EAAE,EAAI,IAAO,GAAK,GACpB,EAAE,EAAE,EAAI,IAAO,GAAK,GACpB,EAAE,EAAE,EAAI,IAAO,GAAK,EACpB,EAAE,EAAE,EAAI,IAAO,GAAK,EAItB,IAAK,GAAI,EAAG,GAAI,GAAI,EAAE,GAAG,CACvB,GAAI,IAAS,IAAQ,GAAE,IAAK,GAAM,GAClC,GAAQ,IAAK,GAAS,EAAI,EAAI,GAAS,IAAO,IAAO,IAKzD,OADI,GAAG,EACE,EAAW,EAAG,EAAW,EAAiB,IAAY,CAC7D,GAAI,GAAW,GAAY,EAC3B,IAAK,EAAI,EAAG,EAAI,EAAG,IACjB,EAAM,KAAK,GAAI,YAAW,IAC5B,OAAS,GAAW,EAAG,EAAW,EAAe,IAAY,CAC3D,EAAmB,EAAU,OAAO,GAAU,GAAW,EAAG,GAE5D,GAAI,GAAS,EAAG,EAAS,GAAY,EACrC,IAAK,EAAI,EAAG,EAAI,EAAG,IAAK,CACtB,GAAI,GAAO,EAAM,EAAW,GAC5B,IAAK,EAAI,EAAG,EAAI,EAAG,IACjB,EAAK,EAAS,GAAK,EAAE,OAI7B,MAAO,GAGT,WAAqB,EAAG,CACtB,MAAO,GAAI,EAAI,EAAI,EAAI,IAAM,IAAM,EAGrC,SAAY,UAAY,CACtB,KAAM,SAAc,EAAM,CACxB,GAAI,GAAM,GAAI,gBACd,EAAI,KAAK,MAAO,EAAM,IACtB,EAAI,aAAe,cACnB,EAAI,OAAU,UAAW,CAEvB,GAAI,GAAO,GAAI,YAAW,EAAI,UAAY,EAAI,wBAC9C,KAAK,MAAM,GACP,KAAK,QACP,KAAK,UACN,KAAK,MACR,EAAI,KAAK,OAEX,MAAO,SAAe,EAAM,CAC1B,GAAI,GAAS,EAAG,EAAS,EAAK,OAC9B,YAAsB,CACpB,GAAI,IAAS,EAAK,IAAW,EAAK,EAAK,EAAS,GAChD,UAAU,EACH,GAET,YAAyB,CACvB,GAAI,IAAS,IACT,GAAQ,EAAK,SAAS,EAAQ,EAAS,GAAS,GACpD,UAAU,GAAM,OACT,GAET,WAA2B,GAAO,CAChC,GAAI,IAAO,EAAG,GAAO,EACjB,GAAW,GACf,IAAK,KAAe,IAAM,WACxB,AAAI,GAAM,WAAW,eAAe,KAClC,IAAY,GAAM,WAAW,IACzB,GAAO,GAAU,GAAG,IAAO,GAAU,GACrC,GAAO,GAAU,GAAG,IAAO,GAAU,IAG7C,GAAI,IAAc,KAAK,KAAK,GAAM,eAAiB,EAAI,IACnD,GAAgB,KAAK,KAAK,GAAM,UAAY,EAAI,IACpD,IAAK,KAAe,IAAM,WACxB,GAAI,GAAM,WAAW,eAAe,IAAc,CAChD,GAAY,GAAM,WAAW,IAM7B,OALI,IAAgB,KAAK,KAAK,KAAK,KAAK,GAAM,eAAiB,GAAK,GAAU,EAAI,IAC9E,GAAkB,KAAK,KAAK,KAAK,KAAK,GAAM,UAAa,GAAK,GAAU,EAAI,IAC5E,GAAsB,GAAc,GAAU,EAC9C,GAAwB,GAAgB,GAAU,EAClD,GAAS,GACJ,GAAI,EAAG,GAAI,GAAuB,KAAK,CAE9C,OADI,IAAM,GACD,GAAI,EAAG,GAAI,GAAqB,KACvC,GAAI,KAAK,GAAI,YAAW,KAC1B,GAAO,KAAK,IAEd,GAAU,cAAgB,GAC1B,GAAU,gBAAkB,GAC5B,GAAU,OAAS,GAGvB,GAAM,KAAO,GACb,GAAM,KAAO,GACb,GAAM,YAAc,GACpB,GAAM,cAAgB,GAExB,GAAI,GAAO,KACP,EAAQ,KACR,EAAS,KACT,EAAO,EACP,EAAqB,GAAI,EAAS,GAClC,EAAkB,GAAI,EAAkB,GACxC,EAAa,IACjB,GAAI,GAAc,MAChB,KAAM,IAAI,OAAM,iBAIlB,IADA,EAAa,IACN,GAAc,OAAQ,CAC3B,GAAI,IAAG,GAAG,GACV,OAAO,OACA,OAAQ,UACR,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,OACH,GAAI,IAAU,IAEd,AAAI,IAAe,OACb,GAAQ,KAAO,IAAQ,GAAQ,KAAO,IAAQ,GAAQ,KAAO,IAC/D,GAAQ,KAAO,IAAQ,GAAQ,KAAO,GACtC,GAAO,CACL,QAAS,CAAE,MAAO,GAAQ,GAAI,MAAO,GAAQ,IAC7C,aAAc,GAAQ,GACtB,SAAW,GAAQ,IAAM,EAAK,GAAQ,GACtC,SAAW,GAAQ,KAAO,EAAK,GAAQ,IACvC,WAAY,GAAQ,IACpB,YAAa,GAAQ,IACrB,UAAW,GAAQ,SAAS,GAAI,GAAK,EAAI,GAAQ,IAAM,GAAQ,OAKjE,IAAe,OACb,GAAQ,KAAO,IAAQ,GAAQ,KAAO,KAAQ,GAAQ,KAAO,KAC/D,GAAQ,KAAO,IAAQ,GAAQ,KAAO,KAAQ,GAAQ,KAAO,GAC7D,GAAQ,CACN,QAAS,GAAQ,GACjB,OAAS,GAAQ,IAAM,EAAK,GAAQ,GACpC,OAAS,GAAQ,IAAM,EAAK,GAAQ,IACpC,cAAe,GAAQ,MAI7B,UAEG,OAGH,OAFI,IAA2B,IAC3B,GAAwB,GAA2B,EAAS,EACzD,EAAS,IAAuB,CACrC,GAAI,IAAwB,EAAK,KAC7B,GAAY,GAAI,YAAW,IAC/B,GAAK,IAAyB,GAAO,EACnC,IAAK,GAAI,EAAG,GAAI,GAAI,KAAK,CACvB,GAAI,GAAI,EAAU,IAClB,GAAU,GAAK,EAAK,aAEZ,IAAyB,GAAO,EAC1C,IAAK,GAAI,EAAG,GAAI,GAAI,KAAK,CACvB,GAAI,GAAI,EAAU,IAClB,GAAU,GAAK,QAGjB,MAAM,IAAI,OAAM,2BAClB,EAAmB,GAAwB,IAAM,GAEnD,UAEG,WACA,WACA,OACH,IACA,EAAQ,GACR,EAAM,SAAY,IAAe,MACjC,EAAM,YAAe,IAAe,MACpC,EAAM,UAAY,EAAK,KACvB,EAAM,UAAY,IAClB,EAAM,eAAiB,IACvB,EAAM,WAAa,GACnB,EAAM,gBAAkB,GACxB,GAAI,IAAkB,EAAK,KAAW,GAClC,GAAO,EAAG,GAAO,EACrB,IAAK,GAAI,EAAG,GAAI,GAAiB,KAAK,CACpC,GAAc,EAAK,GACnB,GAAI,GAAI,EAAK,EAAS,IAAM,EACxB,GAAI,EAAK,EAAS,GAAK,GACvB,GAAM,EAAK,EAAS,GACxB,EAAM,gBAAgB,KAAK,IAC3B,EAAM,WAAW,IAAe,CAC9B,EAAG,EACH,EAAG,GACH,gBAAiB,IAEnB,GAAU,EAEZ,EAAkB,GAClB,EAAO,KAAK,GACZ,UAEG,OACH,GAAI,IAAgB,IACpB,IAAK,GAAI,EAAG,GAAI,IAAgB,CAC9B,GAAI,IAAmB,EAAK,KACxB,GAAc,GAAI,YAAW,IAC7B,GAAgB,EACpB,IAAK,GAAI,EAAG,GAAI,GAAI,KAAK,IACvB,IAAkB,GAAY,IAAK,EAAK,GAC1C,GAAI,GAAgB,GAAI,YAAW,IACnC,IAAK,GAAI,EAAG,GAAI,GAAe,KAAK,IAClC,EAAc,IAAK,EAAK,GAC1B,IAAK,GAAK,GAER,KAAoB,GAAO,EAC3B,EAAkB,GAAiB,GAAmB,IACtD,EAAkB,GAAa,GAEnC,UAEG,OACH,IACA,EAAgB,IAChB,UAEG,OACH,GAAI,IAAa,IACb,GAAiB,EAAK,KACtB,GAAa,GAAI,GACrB,IAAK,GAAI,EAAG,GAAI,GAAgB,KAAK,CACnC,GAAY,EAAM,WAAW,EAAK,MAClC,GAAI,IAAY,EAAK,KACrB,GAAU,eAAiB,EAAgB,IAAa,GACxD,GAAU,eAAiB,EAAgB,GAAY,IACvD,GAAW,KAAK,IAElB,GAAI,IAAgB,EAAK,KACrB,GAAc,EAAK,KACnB,GAA0B,EAAK,KAC/B,GAAY,EAAW,EAAM,EAC/B,EAAO,GAAY,EACnB,GAAe,GACf,IAA2B,EAAG,GAA0B,IAC1D,GAAU,GACV,UAEG,OACH,AAAI,EAAK,KAAY,KACnB,IAEF,cAGA,GAAI,EAAK,EAAS,IAAM,KACpB,EAAK,EAAS,IAAM,KAAQ,EAAK,EAAS,IAAM,IAAM,CAGxD,GAAU,EACV,MAEF,KAAM,IAAI,OAAM,uBAAyB,EAAW,SAAS,KAEjE,EAAa,IAEf,GAAI,EAAO,QAAU,EACnB,KAAM,IAAI,OAAM,qCAGlB,OAAS,IAAI,EAAG,GAAI,EAAO,OAAQ,KAAK,CACtC,GAAI,GAAK,EAAO,IAAG,WACnB,OAAS,MAAK,GACZ,EAAG,IAAG,kBAAoB,EAAmB,EAAG,IAAG,iBACnD,MAAO,GAAG,IAAG,gBAIjB,KAAK,MAAQ,EAAM,eACnB,KAAK,OAAS,EAAM,UACpB,KAAK,KAAO,EACZ,KAAK,MAAQ,EACb,KAAK,WAAa,GAClB,OAAS,IAAI,EAAG,GAAI,EAAM,gBAAgB,OAAQ,KAAK,CACrD,GAAI,IAAY,EAAM,WAAW,EAAM,gBAAgB,KACvD,KAAK,WAAW,KAAK,CACnB,MAAO,EAAmB,EAAO,IACjC,OAAQ,GAAU,EAAI,EAAM,KAC5B,OAAQ,GAAU,EAAI,EAAM,SAIlC,QAAS,SAAiB,EAAO,EAAQ,CACvC,GAAI,GAAS,KAAK,MAAQ,EAAO,EAAS,KAAK,OAAS,EAEpD,EAAY,EAAY,EAAY,EACpC,EAAgB,EAAgB,EAAgB,EAChD,EAAG,EACH,EAAS,EACT,EAAG,GAAI,GAAI,GAAG,GAAG,GAAG,GAAI,GAAG,GAAG,EAC9B,GACA,GAAa,EAAQ,EAAS,KAAK,WAAW,OAC9C,GAAO,GAAI,YAAW,IAC1B,OAAQ,KAAK,WAAW,YACjB,GAEH,IADA,EAAa,KAAK,WAAW,GACxB,EAAI,EAAG,EAAI,EAAQ,IAEtB,IADA,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC1D,EAAI,EAAG,EAAI,EAAO,IACrB,EAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAEhD,GAAK,KAAY,EAGrB,UACG,GAIH,IAFA,EAAa,KAAK,WAAW,GAC7B,EAAa,KAAK,WAAW,GACxB,EAAI,EAAG,EAAI,EAAQ,IAGtB,IAFA,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC/D,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC1D,EAAI,EAAG,EAAI,EAAO,IACrB,EAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAChD,GAAK,KAAY,EACjB,EAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAChD,GAAK,KAAY,EAGrB,UACG,GAYH,IAVA,GAAiB,GAEjB,AAAI,KAAK,OAAS,KAAK,MAAM,cAC3B,GAAiB,GACV,MAAO,MAAK,gBAAmB,aACtC,IAAiB,CAAC,CAAC,KAAK,gBAE1B,EAAa,KAAK,WAAW,GAC7B,EAAa,KAAK,WAAW,GAC7B,EAAa,KAAK,WAAW,GACxB,EAAI,EAAG,EAAI,EAAQ,IAItB,IAHA,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC/D,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC/D,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC1D,EAAI,EAAG,EAAI,EAAO,IACrB,AAAK,GAKH,GAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAChD,GAAK,EAAe,EAAK,EAAI,EAAW,OAAS,GACjD,GAAK,EAAe,EAAK,EAAI,EAAW,OAAS,GAEjD,GAAI,EAAY,EAAI,MAAS,IAAK,MAClC,GAAI,EAAY,EAAI,SAAa,IAAK,KAAO,UAAc,IAAK,MAChE,EAAI,EAAY,EAAI,MAAS,IAAK,OAVlC,IAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAChD,GAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAChD,EAAI,EAAe,EAAK,EAAI,EAAW,OAAS,IAWlD,GAAK,KAAY,GACjB,GAAK,KAAY,GACjB,GAAK,KAAY,EAGrB,UACG,GACH,GAAI,CAAC,KAAK,MACR,KAAM,IAAI,OAAM,yCAalB,IAXA,GAAiB,GAEjB,AAAI,KAAK,OAAS,KAAK,MAAM,cAC3B,GAAiB,GACV,MAAO,MAAK,gBAAmB,aACtC,IAAiB,CAAC,CAAC,KAAK,gBAE1B,EAAa,KAAK,WAAW,GAC7B,EAAa,KAAK,WAAW,GAC7B,EAAa,KAAK,WAAW,GAC7B,EAAa,KAAK,WAAW,GACxB,EAAI,EAAG,EAAI,EAAQ,IAKtB,IAJA,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC/D,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC/D,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC/D,EAAiB,EAAW,MAAM,EAAK,EAAI,EAAW,OAAS,GAC1D,EAAI,EAAG,EAAI,EAAO,IACrB,AAAK,GAMH,GAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAChD,GAAK,EAAe,EAAK,EAAI,EAAW,OAAS,GACjD,GAAK,EAAe,EAAK,EAAI,EAAW,OAAS,GACjD,GAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAEhD,GAAI,IAAM,EAAY,EAAI,MAAS,IAAK,MACxC,GAAI,IAAM,EAAY,EAAI,SAAa,IAAK,KAAO,UAAc,IAAK,MACtE,GAAK,IAAM,EAAY,EAAI,MAAS,IAAK,OAZzC,IAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAChD,GAAI,EAAe,EAAK,EAAI,EAAW,OAAS,GAChD,GAAK,EAAe,EAAK,EAAI,EAAW,OAAS,GACjD,GAAI,EAAe,EAAK,EAAI,EAAW,OAAS,IAWlD,GAAK,KAAY,IAAI,GACrB,GAAK,KAAY,IAAI,GACrB,GAAK,KAAY,IAAI,GACrB,GAAK,KAAY,IAAI,GAGzB,cAEA,KAAM,IAAI,OAAM,0BAEpB,MAAO,KAET,gBAAiB,SAAyB,EAAW,EAAc,CACjE,GAAI,GAAQ,EAAU,MAAO,EAAS,EAAU,OAC5C,EAAiB,EAAU,KAC3B,EAAO,KAAK,QAAQ,EAAO,GAC3B,EAAI,EAAG,EAAI,EAAG,EAAG,EACjB,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACtB,OAAQ,KAAK,WAAW,YACjB,GACH,IAAK,EAAI,EAAG,EAAI,EAAQ,IACtB,IAAK,EAAI,EAAG,EAAI,EAAO,IACrB,EAAI,EAAK,KAET,EAAe,KAAO,EACtB,EAAe,KAAO,EACtB,EAAe,KAAO,EAClB,GACF,GAAe,KAAO,KAI5B,UACG,GACH,IAAK,EAAI,EAAG,EAAI,EAAQ,IACtB,IAAK,EAAI,EAAG,EAAI,EAAO,IACrB,EAAI,EAAK,KACT,EAAI,EAAK,KACT,GAAI,EAAK,KAET,EAAe,KAAO,EACtB,EAAe,KAAO,EACtB,EAAe,KAAO,GAClB,GACF,GAAe,KAAO,KAI5B,UACG,GACH,IAAK,EAAI,EAAG,EAAI,EAAQ,IACtB,IAAK,EAAI,EAAG,EAAI,EAAO,IACrB,EAAI,EAAK,KACT,EAAI,EAAK,KACT,EAAI,EAAK,KACT,EAAI,EAAK,KAET,EAAI,IAAM,EAAY,EAAK,GAAI,EAAI,KAAO,GAC1C,EAAI,IAAM,EAAY,EAAK,GAAI,EAAI,KAAO,GAC1C,GAAI,IAAM,EAAY,EAAK,GAAI,EAAI,KAAO,GAE1C,EAAe,KAAO,EACtB,EAAe,KAAO,EACtB,EAAe,KAAO,GAClB,GACF,GAAe,KAAO,KAI5B,cAEA,KAAM,IAAI,OAAM,6BAKjB,KAET,GAAO,QAAU,GAEjB,YAAgB,EAAU,EAAM,CAC9B,GAAI,GAAc,CAChB,UAAW,GAEX,eAAgB,OAChB,aAAc,IAEhB,AAAI,EACF,AAAI,MAAO,IAAS,SAClB,EAAO,CACL,UAAY,MAAO,GAAK,WAAc,YAC1B,EAAY,UAAY,EAAK,UACzC,eAAiB,MAAO,GAAK,gBAAmB,YAC/B,EAAY,eAAiB,EAAK,eACnD,aAAe,MAAO,GAAK,cAAiB,YAC3B,EAAY,aAAe,EAAK,cAInD,GAAO,EACP,EAAK,UAAY,IAGnB,EAAO,EAGT,GAAI,GAAM,GAAI,YAAW,GACrB,EAAU,GAAI,IAClB,EAAQ,MAAM,GACd,EAAQ,eAAiB,EAAK,eAE9B,GAAI,GAAY,EAAK,aAAgB,EAAI,EACrC,EAAc,EAAQ,MAAQ,EAAQ,OAAS,EACnD,GAAI,CACF,GAAI,GAAQ,CACV,MAAO,EAAQ,MACf,OAAQ,EAAQ,OAChB,KAAM,EAAK,UACT,GAAI,YAAW,GACf,GAAI,QAAO,UAER,EAAP,CACA,KAAI,aAAe,YACX,GAAI,OAAM,6DACe,GAEzB,EAIV,SAAQ,gBAAgB,EAAO,EAAK,cAE7B,KC/gCT,sBAAI,IAAS,KACT,GAAS,KAEb,GAAO,QAAU,CACf,OAAQ,GACR,OAAQ,MCLV,sBAAO,QAAQ,KAA0B,CAAC,KAAO,CAAC,QAAQ,SAAS,SAAS,IAAM,CAAC,KAAO,KAAK,KAAO,GAAG,SAAW,GAAG,UAAY,IAAI,KAAO,CAAC,KAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA+P,KAAO,CAAC,CAAC,KAAO,kBAAkB,OAAS,GAAK,OAAS,GAAM,MAAQ,GAAG,CAAC,KAAO,kBAAkB,OAAS,GAAM,OAAS,GAAK,MAAQ,GAAG,CAAC,KAAO,kBAAkB,OAAS,GAAM,OAAS,GAAK,MAAQ,IAAI,SAAW,GAAG,UAAY,CAAC,cAAc,gBAAgB,KAAO,CAAC,KAAO,KAAK,KAAO,GAAG,SAAW,GAAG,UAAY,IAAI,SAAW,UAAU,UAAY,OCA1vB,gCAEA,GAAI,IAAU,KACV,GAAa,KAEjB,GAAO,QAAU,SAAiB,EAAK,EAAQ,CAE7C,OADI,GAAQ,GAAI,EAAI,EAAK,EAAK,EACxB,MAAM,QAAQ,IAClB,EAAM,KAAK,EAAE,QACb,GAAM,EAAE,OACR,EAAI,EAAE,GAER,MAAG,GAAM,SAAW,EACX,KAEL,IACF,GAAS,GAAQ,GAAI,cAAa,GAAK,IAEzC,GAAW,EAAQ,GACZ,MCnBT,cA0BA,aAEA,YAAmB,EAAK,EAAO,EAAQ,EAAO,CAC5C,GAAI,GAAI,EAEJ,EAAQ,IAAU,OAAY,GAAM,EACpC,EAAa,EAAM,OAAS,OAAY,KAAO,EAAM,KACrD,EAAiB,EAAM,UAAY,OAAY,KAAO,EAAM,QAEhE,GAAI,GAAS,GAAK,GAAU,GAAK,EAAQ,OAAS,EAAS,MACzD,KAAM,IAAI,OAAM,yBAElB,WAAsC,EAAS,CAC7C,GAAI,GAAa,EAAQ,OACzB,GAAI,EAAa,GAAK,EAAa,KAAQ,EAAc,EAAW,EAClE,KAAM,IAAI,OACN,+DAEN,MAAO,GAIT,EAAI,KAAO,GAAM,EAAI,KAAO,GAAM,EAAI,KAAO,GAC7C,EAAI,KAAO,GAAM,EAAI,KAAO,GAAM,EAAI,KAAO,GAG7C,GAAI,GAAqB,EACrB,EAAa,EACjB,GAAI,IAAmB,KAAM,CAE3B,OADI,GAAgB,EAA6B,GAC1C,IAAkB,GAAG,EAAE,EAG9B,GAFA,EAAgB,GAAK,EACrB,EAAE,EACE,EAAM,aAAe,OAAW,CAElC,GADA,EAAa,EAAM,WACf,GAAc,EAChB,KAAM,IAAI,OAAM,kCAKlB,GAAI,IAAe,EACjB,KAAM,IAAI,OAAM,6CAetB,GATA,EAAI,KAAO,EAAQ,IAAM,EAAI,KAAO,GAAS,EAAI,IACjD,EAAI,KAAO,EAAS,IAAM,EAAI,KAAO,GAAU,EAAI,IAEnD,EAAI,KAAQ,KAAmB,KAAO,IAAO,GAClC,EACX,EAAI,KAAO,EACX,EAAI,KAAO,EAGP,IAAmB,KACrB,OAAS,GAAI,EAAG,EAAK,EAAe,OAAQ,EAAI,EAAI,EAAE,EAAG,CACvD,GAAI,GAAM,EAAe,GACzB,EAAI,KAAO,GAAO,GAAK,IACvB,EAAI,KAAO,GAAO,EAAI,IACtB,EAAI,KAAO,EAAM,IAIrB,GAAI,IAAe,KAAM,CACvB,GAAI,EAAa,GAAK,EAAa,MACjC,KAAM,IAAI,OAAM,uBAElB,EAAI,KAAO,GAAM,EAAI,KAAO,IAAM,EAAI,KAAO,GAE7C,EAAI,KAAO,GAAM,EAAI,KAAO,GAAM,EAAI,KAAO,GAAM,EAAI,KAAO,GAC9D,EAAI,KAAO,GAAM,EAAI,KAAO,GAAM,EAAI,KAAO,GAAM,EAAI,KAAO,GAC9D,EAAI,KAAO,GAAM,EAAI,KAAO,GAAM,EAAI,KAAO,GAE7C,EAAI,KAAO,EAAM,EAAI,KAAO,EAC5B,EAAI,KAAO,EAAa,IAAM,EAAI,KAAO,GAAc,EAAI,IAC3D,EAAI,KAAO,EAIb,GAAI,GAAQ,GAEZ,KAAK,SAAW,SAAS,EAAG,EAAG,EAAG,EAAG,EAAgB,EAAM,CAOzD,GANI,IAAU,IAAQ,GAAE,EAAG,EAAQ,IAEnC,EAAO,IAAS,OAAY,GAAM,EAI9B,EAAI,GAAK,EAAI,GAAK,EAAI,OAAS,EAAI,MACrC,KAAM,IAAI,OAAM,gBAElB,GAAI,GAAK,GAAK,GAAK,GAAK,EAAI,OAAS,EAAI,MACvC,KAAM,IAAI,OAAM,yBAElB,GAAI,EAAe,OAAS,EAAI,EAC9B,KAAM,IAAI,OAAM,yCAElB,GAAI,GAAsB,GACtB,EAAU,EAAK,QAMnB,GALI,AAAyB,GAAY,MACvC,GAAsB,GACtB,EAAU,GAGR,AAAyB,GAAY,KACvC,KAAM,IAAI,OAAM,iDAMlB,OAJI,GAAa,EAA6B,GAG1C,EAAgB,EACb,IAAe,GAAG,EAAE,EAC3B,EAAa,GAAK,EAElB,GAAI,GAAQ,EAAK,QAAU,OAAY,EAAI,EAAK,MAe5C,EAAW,EAAK,WAAa,OAAY,EAAI,EAAK,SACtD,GAAI,EAAW,GAAK,EAAW,EAC7B,KAAM,IAAI,OAAM,0BAElB,GAAI,GAAmB,GACnB,EAAoB,EACxB,GAAI,EAAK,cAAgB,QAAa,EAAK,cAAgB,MACzD,GAAmB,GACnB,EAAoB,EAAK,YACrB,EAAoB,GAAK,GAAqB,GAChD,KAAM,IAAI,OAAM,4BAyBpB,GAtBI,KAAa,GAAK,GAAoB,IAAU,IAElD,GAAI,KAAO,GAAM,EAAI,KAAO,IAC5B,EAAI,KAAO,EAEX,EAAI,KAAO,GAAY,EAAK,KAAqB,GAAO,EAAI,GAC5D,EAAI,KAAO,EAAQ,IAAM,EAAI,KAAO,GAAS,EAAI,IACjD,EAAI,KAAO,EACX,EAAI,KAAO,GAIb,EAAI,KAAO,GACX,EAAI,KAAO,EAAI,IAAM,EAAI,KAAO,GAAK,EAAI,IACzC,EAAI,KAAO,EAAI,IAAM,EAAI,KAAO,GAAK,EAAI,IACzC,EAAI,KAAO,EAAI,IAAM,EAAI,KAAO,GAAK,EAAI,IACzC,EAAI,KAAO,EAAI,IAAM,EAAI,KAAO,GAAK,EAAI,IAGzC,EAAI,KAAO,IAAwB,GAAQ,IAAQ,EAAc,EAAM,EAGnE,IAAwB,GAC1B,OAAS,GAAI,EAAG,EAAK,EAAQ,OAAQ,EAAI,EAAI,EAAE,EAAG,CAChD,GAAI,GAAM,EAAQ,GAClB,EAAI,KAAO,GAAO,GAAK,IACvB,EAAI,KAAO,GAAO,EAAI,IACtB,EAAI,KAAO,EAAM,IAIrB,SAAI,GACI,EAAK,EAAG,EAAgB,EAAI,EAAI,EAAe,GAEhD,GAGT,KAAK,IAAM,UAAW,CACpB,MAAI,KAAU,IACZ,GAAI,KAAO,GACX,EAAQ,IAEH,GAGT,KAAK,gBAAkB,UAAW,CAAE,MAAO,IAC3C,KAAK,gBAAkB,SAAS,EAAG,CAAE,EAAM,GAC3C,KAAK,wBAA0B,UAAW,CAAE,MAAO,IACnD,KAAK,wBAA0B,SAAS,EAAG,CAAE,EAAI,GAKnD,YAAsC,EAAK,EAAG,EAAe,EAAc,CACzE,EAAI,KAAO,EACX,GAAI,GAAe,IAEf,EAAa,GAAK,EAClB,EAAY,EAAa,EACzB,EAAW,EAAa,EACxB,EAAY,EAAW,EAEvB,EAAgB,EAAgB,EAChC,EAAY,EAGZ,EAAM,EAEV,WAA8B,EAAgB,CAC5C,KAAO,GAAa,GAClB,EAAI,KAAO,EAAM,IACjB,IAAQ,EAAG,GAAa,EACpB,IAAM,EAAe,KACvB,GAAI,GAAgB,IACpB,EAAe,KAKrB,WAAmB,EAAG,CACpB,GAAO,GAAK,EACZ,GAAa,EACb,EAAqB,GAyCvB,GAAI,GAAU,EAAa,GAAK,EAC5B,EAAa,GAEjB,EAAU,GAGV,OAAS,GAAI,EAAG,EAAK,EAAa,OAAQ,EAAI,EAAI,EAAE,EAAG,CACrD,GAAI,GAAI,EAAa,GAAK,EACtB,EAAU,GAAW,EAAI,EACzB,EAAW,EAAW,GAG1B,GAAI,IAAa,OAAW,CAW1B,IAFA,GAAO,GAAW,EAClB,GAAa,EACN,GAAa,GAClB,EAAI,KAAO,EAAM,IACjB,IAAQ,EAAG,GAAa,EACpB,IAAM,EAAe,KACvB,GAAI,GAAgB,IACpB,EAAe,KAInB,AAAI,IAAc,KAChB,GAAU,GACV,EAAY,EAAW,EACvB,EAAgB,EAAgB,EAChC,EAAa,IAOT,IAAc,GAAK,GAAgB,EAAE,EACzC,EAAW,GAAW,KAGxB,EAAU,MAEV,GAAU,EAId,SAAU,GACV,EAAU,GAGV,EAAqB,GAKrB,AAAI,EAAe,IAAM,EACvB,EAAI,GAAgB,EAEpB,GAAI,GAAgB,EAAI,EAAe,EACvC,EAAI,KAAO,GAEN,EAGT,YAAmB,EAAK,CACtB,GAAI,GAAI,EAGR,GAAI,EAAI,OAAS,IAAmB,EAAI,OAAS,IAAQ,EAAI,OAAS,IAClE,EAAI,OAAS,IAAS,GAAI,KAAK,EAAI,MAAU,IAAQ,EAAI,OAAS,GACpE,KAAM,IAAI,OAAM,+BAIlB,GAAI,GAAQ,EAAI,KAAO,EAAI,MAAQ,EAC/B,EAAS,EAAI,KAAO,EAAI,MAAQ,EAChC,EAAM,EAAI,KACV,EAAsB,GAAO,EAC7B,EAAyB,EAAM,EAC/B,EAAoB,GAAM,EAAyB,EACnD,EAAa,EAAI,KACrB,EAAI,KAEJ,GAAI,GAAwB,KACxB,EAAwB,KAE5B,AAAI,GACF,GAAwB,EACxB,EAAsB,EACtB,GAAK,EAAoB,GAG3B,GAAI,GAAS,GAET,EAAS,GAET,EAAQ,EACR,EAAoB,KACpB,EAAW,EACX,EAAa,KAKjB,IAHA,KAAK,MAAQ,EACb,KAAK,OAAS,EAEP,GAAU,EAAI,EAAI,QACvB,OAAQ,EAAI,UACL,IACH,OAAQ,EAAI,UACL,KAEH,GAAI,EAAI,KAAU,IAEd,EAAI,EAAE,IAAO,IAAQ,EAAI,EAAE,IAAO,IAAQ,EAAI,EAAE,IAAO,IACvD,EAAI,EAAE,IAAO,IAAQ,EAAI,EAAE,IAAO,IAAQ,EAAI,EAAE,IAAO,IACvD,EAAI,EAAE,IAAO,IAAQ,EAAI,EAAE,IAAO,IAAQ,EAAI,EAAE,IAAO,IACvD,EAAI,EAAE,KAAO,IAAQ,EAAI,EAAE,KAAO,IAElC,EAAI,EAAE,KAAO,GAAQ,EAAI,EAAE,KAAO,GAAQ,EAAI,EAAE,KAAO,EACzD,GAAK,GACL,EAAa,EAAI,KAAO,EAAI,MAAQ,EACpC,QAGA,KADA,GAAK,KACQ,CACX,GAAI,GAAa,EAAI,KAErB,GAAI,CAAE,IAAc,GAAI,KAAM,OAAM,sBACpC,GAAI,IAAe,EAAG,MACtB,GAAK,EAGT,UAEG,KACH,GAAI,EAAI,OAAS,GAAO,EAAI,EAAE,KAAO,EACnC,KAAM,IAAI,OAAM,qCAClB,GAAI,GAAM,EAAI,KACd,EAAQ,EAAI,KAAO,EAAI,MAAQ,EAC/B,EAAoB,EAAI,KACnB,GAAM,IAAO,GAAG,GAAoB,MACzC,EAAW,GAAO,EAAI,EACtB,IACA,UAEG,KACH,OAAa,CACX,GAAI,GAAa,EAAI,KAErB,GAAI,CAAE,IAAc,GAAI,KAAM,OAAM,sBACpC,GAAI,IAAe,EAAG,MAEtB,GAAK,EAEP,cAGA,KAAM,IAAI,OACN,oCAAsC,EAAI,EAAE,GAAG,SAAS,KAEhE,UAEG,IACH,GAAI,GAAI,EAAI,KAAO,EAAI,MAAQ,EAC3B,EAAI,EAAI,KAAO,EAAI,MAAQ,EAC3B,EAAI,EAAI,KAAO,EAAI,MAAQ,EAC3B,EAAI,EAAI,KAAO,EAAI,MAAQ,EAC3B,EAAM,EAAI,KACV,EAAqB,GAAO,EAC5B,EAAiB,GAAO,EAAI,EAC5B,EAAwB,EAAM,EAC9B,EAAmB,GAAM,EAAwB,EACjD,EAAiB,EACjB,EAAe,EACf,EAAoB,GACxB,GAAI,EAAoB,CACtB,GAAI,GAAoB,GACxB,EAAiB,EACjB,EAAe,EACf,GAAK,EAAmB,EAG1B,GAAI,GAAc,EAGlB,IADA,MACa,CACX,GAAI,GAAa,EAAI,KAErB,GAAI,CAAE,IAAc,GAAI,KAAM,OAAM,sBACpC,GAAI,IAAe,EAAG,MACtB,GAAK,EAGP,EAAO,KAAK,CAAC,EAAG,EAAG,EAAG,EAAG,MAAO,EAAG,OAAQ,EAC9B,kBAAmB,EACnB,eAAgB,EAChB,aAAc,EACd,YAAa,EACb,YAAa,EAAI,EACjB,kBAAmB,EACnB,WAAY,CAAC,CAAC,EACd,MAAO,EACP,SAAU,IACvB,UAEG,IACH,EAAS,GACT,cAGA,KAAM,IAAI,OAAM,wBAA0B,EAAI,EAAE,GAAG,SAAS,KAKlE,KAAK,UAAY,UAAW,CAC1B,MAAO,GAAO,QAGhB,KAAK,UAAY,UAAW,CAC1B,MAAO,IAGT,KAAK,UAAY,SAAS,GAAW,CACnC,GAAI,GAAY,GAAK,IAAa,EAAO,OACvC,KAAM,IAAI,OAAM,6BAClB,MAAO,GAAO,KAGhB,KAAK,uBAAyB,SAAS,GAAW,GAAQ,CACxD,GAAI,IAAQ,KAAK,UAAU,IACvB,GAAa,GAAM,MAAQ,GAAM,OACjC,GAAe,GAAI,YAAW,IAClC,GACI,EAAK,GAAM,YAAa,GAAc,IAC1C,GAAI,IAAiB,GAAM,eAKvB,GAAQ,GAAM,kBAClB,AAAI,KAAU,MAAM,IAAQ,KAK5B,GAAI,IAAc,GAAM,MACpB,EAAc,EAAQ,GACtB,GAAc,GAGd,GAAU,IAAM,EAAI,EAAS,GAAM,GAAK,EACxC,GAAU,KAAM,EAAI,GAAM,QAAU,EAAQ,GAAM,GAAK,EACvD,GAAQ,GAER,EAAa,EAAc,EAI/B,AAAI,GAAM,aAAe,IACvB,IAAc,EAAQ,EAAI,GAK5B,OAFI,IAAgB,EAEX,GAAI,EAAG,GAAK,GAAa,OAAQ,GAAI,GAAI,EAAE,GAAG,CACrD,GAAI,IAAQ,GAAa,IAazB,GAXI,KAAU,GACZ,KAAM,EACN,GAAQ,GACJ,IAAM,IACR,GAAa,EAAc,EAAI,EAAQ,EAAK,IAAc,GAE1D,GAAK,GAAS,IAAa,GAAgB,KAAiB,GAC5D,KAAkB,IAIlB,KAAU,GACZ,IAAM,MACD,CACL,GAAI,IAAI,EAAI,GAAiB,GAAQ,GACjC,GAAI,EAAI,GAAiB,GAAQ,EAAI,GACrC,EAAI,EAAI,GAAiB,GAAQ,EAAI,GACzC,GAAO,MAAQ,EACf,GAAO,MAAQ,GACf,GAAO,MAAQ,GACf,GAAO,MAAQ,IAEjB,EAAE,KAKN,KAAK,uBAAyB,SAAS,GAAW,GAAQ,CACxD,GAAI,IAAQ,KAAK,UAAU,IACvB,GAAa,GAAM,MAAQ,GAAM,OACjC,GAAe,GAAI,YAAW,IAClC,GACI,EAAK,GAAM,YAAa,GAAc,IAC1C,GAAI,IAAiB,GAAM,eAKvB,GAAQ,GAAM,kBAClB,AAAI,KAAU,MAAM,IAAQ,KAK5B,GAAI,IAAc,GAAM,MACpB,EAAc,EAAQ,GACtB,GAAc,GAGd,GAAU,IAAM,EAAI,EAAS,GAAM,GAAK,EACxC,GAAU,KAAM,EAAI,GAAM,QAAU,EAAQ,GAAM,GAAK,EACvD,GAAQ,GAER,EAAa,EAAc,EAI/B,AAAI,GAAM,aAAe,IACvB,IAAc,EAAQ,EAAI,GAK5B,OAFI,IAAgB,EAEX,GAAI,EAAG,GAAK,GAAa,OAAQ,GAAI,GAAI,EAAE,GAAG,CACrD,GAAI,IAAQ,GAAa,IAazB,GAXI,KAAU,GACZ,KAAM,EACN,GAAQ,GACJ,IAAM,IACR,GAAa,EAAc,EAAI,EAAQ,EAAK,IAAc,GAE1D,GAAK,GAAS,IAAa,GAAgB,KAAiB,GAC5D,KAAkB,IAIlB,KAAU,GACZ,IAAM,MACD,CACL,GAAI,IAAI,EAAI,GAAiB,GAAQ,GACjC,GAAI,EAAI,GAAiB,GAAQ,EAAI,GACrC,EAAI,EAAI,GAAiB,GAAQ,EAAI,GACzC,GAAO,MAAQ,GACf,GAAO,MAAQ,GACf,GAAO,MAAQ,EACf,GAAO,MAAQ,IAEjB,EAAE,KAKR,YAAuC,EAAa,EAAG,EAAQ,EAAe,CAyB5E,OAxBI,GAAgB,EAAY,KAE5B,EAAa,GAAK,EAClB,EAAW,EAAa,EACxB,EAAY,EAAW,EAEvB,EAAgB,EAAgB,EAGhC,EAAa,IAAK,GAAiB,EACnC,EAAY,EACZ,EAAM,EAEN,EAAK,EAEL,EAAgB,EAAY,KAK5B,EAAa,GAAI,YAAW,MAE5B,EAAY,OAEH,CAEX,KAAO,EAAY,IACb,IAAkB,GAEtB,GAAO,EAAY,MAAQ,EAC3B,GAAa,EAEb,AAAI,IAAkB,EACpB,EAAgB,EAAY,KAE5B,EAAE,EAMN,GAAI,EAAY,EACd,MAEF,GAAI,GAAO,EAAM,EAOjB,GANA,IAAQ,EACR,GAAa,EAKT,IAAS,EAAY,CAKvB,EAAY,EAAW,EACvB,EAAgB,EAAgB,EAChC,EAAa,IAAK,GAAiB,EAGnC,EAAY,KACZ,iBACS,IAAS,EAClB,MA2BF,OALI,GAAa,EAAO,EAAY,EAAO,EAGvC,EAAe,EACf,EAAQ,EACL,EAAQ,GACb,EAAQ,EAAW,IAAU,EAC7B,EAAE,EAGJ,GAAI,GAAI,EAEJ,EAAS,EAAK,EAAgB,KAAe,EAAO,EAAI,GAC5D,GAAI,EAAS,EAAe,CAC1B,QAAQ,IAAI,6CACZ,OAIF,EAAO,KAAQ,EAEf,GAAM,EACN,GAAI,GAAI,EAMR,IAJI,IAAe,GACjB,GAAO,KAAQ,GAEjB,EAAQ,EACD,KACL,EAAQ,EAAW,GACnB,EAAO,EAAE,GAAK,EAAQ,IACtB,IAAU,EAGZ,AAAI,IAAc,MAAQ,EAAY,MACpC,GAAW,KAAe,GAAa,EAAI,EAMvC,GAAa,EAAU,GAAK,EAAgB,IAC9C,GAAE,EACF,EAAY,GAAa,EAAI,IAIjC,EAAY,EAGd,MAAI,KAAO,GACT,QAAQ,IAAI,8CAGP,EAIT,GAAI,CAAE,GAAQ,UAAY,GAAW,GAAQ,UAAY,QAAY,KCtyBrE,sBAAI,IAAS,GAAO,QAAU,GAAU,SAAS,EAAO,CACtD,KAAK,OAAS,EACd,KAAK,YAAc,GAEnB,KAAK,WAAa,KAClB,KAAK,WAAa,KAClB,KAAK,WAAa,KAClB,KAAK,aAAe,KACpB,KAAK,QAAU,IAEjB,GAAO,UAAU,qBAAuB,GACxC,GAAO,UAAU,qBAAuB,IACxC,GAAO,UAAU,qBAAuB,IACxC,GAAO,UAAU,iBAAmB,GACpC,GAAO,UAAU,iBAAmB,GACpC,GAAO,UAAU,iBAAmB,GAAO,UAAU,iBACrD,GAAO,UAAU,iBAAmB,GAAO,UAAU,qBACrD,GAAO,UAAU,kBAAoB,GAAO,UAAU,iBACtD,GAAO,UAAU,eAAiB,GAAO,UAAU,qBACnD,GAAO,UAAU,eAAiB,GAAO,UAAU,qBACnD,GAAO,UAAU,mBAAqB,EACtC,GAAO,UAAU,oBAAsB,EACvC,GAAO,UAAU,oBAAsB,EACvC,GAAO,UAAU,yBAA2B,EAC5C,GAAO,UAAU,oBAAsB,EACvC,GAAO,UAAU,mBAAqB,EACtC,GAAO,UAAU,WAAa,EAC9B,GAAO,UAAU,YAAc,EAC/B,GAAO,UAAU,aAAe,EAChC,GAAO,UAAU,eAAiB,GAClC,GAAO,UAAU,eAAiB,GAClC,GAAO,UAAU,eAAiB,GAClC,GAAO,UAAU,KAAO,UAAU,CAChC,KAAK,iBACL,KAAK,iBACL,KAAK,iBACL,KAAK,mBAEL,KAAK,cACL,KAAK,YAAc,IAErB,GAAO,UAAU,UAAY,UAAW,CACtC,GAAG,CAAC,KAAK,YACP,KAAM,IAAI,OAAM,oBAIpB,GAAO,UAAU,SAAW,UAAU,CAGpC,MAFA,MAAK,YAEF,AAAQ,KAAK,WAAW,QAAxB,MAKL,GAAO,UAAU,QAAU,UAAW,CAGpC,GAFA,KAAK,YAEF,KAAK,qBAAuB,KAAK,WAAW,gBAC7C,KAAM,IAAI,OAAM,8BAAgC,KAAK,WAAW,iBAGlE,GAAI,GAAW,KAAK,WAAW,aAC3B,EAAQ,KAAK,WACb,EAAS,KAAK,YAEd,EAAQ,EAAQ,EAAY,EAChC,AAAG,AAAM,EAAO,GAAb,GACD,GAAS,GAAO,EAAK,GAAK,GAK5B,OAFI,GAAW,GACX,EAAU,KAAK,QACX,EAAI,EAAG,EAAI,EAAQ,EAAE,EAAG,CAC9B,GAAI,GAAM,EAAW,EAAQ,GAAU,GAAI,IACvC,EAAM,KAAK,OAAO,MAAM,EAAK,EAAM,GACnC,EAAQ,KAAK,SAAS,EAAK,GAC/B,EAAS,KAAK,GAEhB,MAAO,IAET,GAAO,UAAU,SAAW,UAAW,CACrC,YAAK,YAEE,KAAK,WAAW,WAEzB,GAAO,UAAU,UAAY,UAAW,CACtC,YAAK,YAEE,KAAK,WAAW,YAEzB,GAAO,UAAU,KAAO,SAAS,EAAK,EAAQ,EAAM,CAElD,OADI,GAAO,GACH,EAAI,EAAQ,EAAM,EAAS,EAAO,EAAI,EAAK,EAAE,EACnD,EAAK,KAAK,EAAI,SAAS,IAEzB,MAAO,IAAI,QAAO,IAEpB,GAAO,UAAU,eAAiB,UAAU,CAC1C,GAAI,GAAS,KAAK,KAAK,KAAK,OAAQ,EAAG,GACnC,EAAS,KAAK,KAAK,KAAK,OAAQ,EAAG,GACnC,EAAc,KAAK,KAAK,KAAK,OAAQ,EAAG,GACxC,EAAc,KAAK,KAAK,KAAK,OAAQ,EAAG,GACxC,EAAY,KAAK,KAAK,KAAK,OAAQ,GAAI,GAE3C,KAAK,WAAa,CAChB,OAAQ,EAAO,SAAS,SACxB,QAAS,EACT,OAAQ,EAAO,aAAa,GAC5B,QAAS,EACT,YAAa,EACb,YAAa,EACb,UAAW,EAAU,aAAa,GAClC,WAAY,IAGhB,GAAO,UAAU,eAAiB,UAAW,CAC3C,KAAK,WAAa,KAAK,KAAK,KAAK,OAAQ,GAAI,IAE/C,GAAO,UAAU,eAAiB,UAAW,CAC3C,GAAI,GAAW,KAAK,WAAW,aAAa,GAC5C,OAAO,OACF,MAAK,iBACR,MAAO,MAAK,2BACT,MAAK,kBACR,MAAO,MAAK,2BACT,MAAK,eACR,MAAO,MAAK,+BACT,MAAK,eACR,MAAO,MAAK,+BACT,MAAK,iBACR,MAAO,MAAK,mCAEZ,KAAM,IAAI,OAAM,qBAAuB,KAG3C,GAAO,UAAU,yBAA2B,UAAW,CACrD,GAAI,GAAU,KAAK,KAAK,KAAK,OAAQ,GAAM,GACvC,EAAW,KAAK,KAAK,KAAK,OAAQ,GAAM,GACxC,EAAW,KAAK,KAAK,KAAK,OAAQ,GAAM,GACxC,EAAa,KAAK,KAAK,KAAK,OAAQ,GAAM,GAC1C,EAAgB,KAAK,KAAK,KAAK,OAAQ,GAAM,GAC7C,EAAc,KAAK,KAAK,KAAK,OAAQ,GAAM,GAC3C,EAAiB,KAAK,KAAK,KAAK,OAAQ,GAAM,GAC9C,EAAiB,KAAK,KAAK,KAAK,OAAQ,GAAM,GAC9C,EAAY,KAAK,KAAK,KAAK,OAAQ,GAAM,GACzC,EAAiB,KAAK,KAAK,KAAK,OAAQ,GAAM,GAElD,KAAK,WAAa,CAChB,gBAAiB,EAAc,aAAa,GAC5C,aAAc,EAAW,UAAU,GACnC,UAAW,EAAQ,aAAa,GAChC,WAAY,EAAS,aAAa,GAClC,QAAS,EAAQ,aAAa,GAC9B,SAAU,EACV,SAAU,EAAS,aAAa,GAChC,UAAW,EACX,SAAU,EAAS,UAAU,GAC7B,UAAW,EACX,WAAY,EAAW,UAAU,GACjC,YAAa,EACb,cAAe,EAAc,aAAa,GAC1C,eAAgB,EAChB,YAAa,EAAY,aAAa,GACtC,aAAc,EACd,eAAgB,EAAe,aAAa,GAC5C,gBAAiB,EACjB,eAAgB,EAAe,aAAa,GAC5C,gBAAiB,EACjB,UAAW,EAAU,aAAa,GAClC,WAAY,EACZ,eAAgB,EAAe,aAAa,GAC5C,gBAAiB,IAGrB,GAAO,UAAU,yBAA2B,UAAW,CACrD,KAAM,IAAI,OAAM,gBAEhB,GAAI,GACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GA+CN,GAAO,UAAU,yBAA2B,UAAW,CACrD,KAAM,IAAI,OAAM,gBAEhB,GAAI,GACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GAuDN,GAAO,UAAU,qBAAuB,UAAW,CACjD,KAAM,IAAI,OAAM,gBAEhB,GAAI,GACA,EACA,EACA,GAiBN,GAAO,UAAU,qBAAuB,UAAW,CACjD,KAAM,IAAI,OAAM,gBAEhB,GAAI,GACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GA6CN,GAAO,UAAU,iBAAmB,UAAW,CAC7C,GAAI,GAAW,KAAK,WAAW,aAC/B,GAAG,KAAK,gBAAkB,GAGvB,KAAK,gBAAkB,GAGvB,KAAK,gBAAkB,EAI1B,IAAI,GAAW,KAAK,WAAW,aAAa,GAC5C,OAAO,OACF,MAAK,iBACR,MAAO,MAAK,2BAA2B,EAAU,QAC9C,MAAK,kBACR,MAAO,MAAK,2BAA2B,EAAU,QAC5C,MAAK,eACV,MAAO,MAAK,yBAAyB,EAAU,SAC5C,MAAK,eACR,MAAO,MAAK,yBAAyB,EAAU,SAC5C,MAAK,iBACR,MAAO,MAAK,yBAAyB,EAAU,YAE/C,KAAM,IAAI,OAAM,yBAA2B,EAAW,IAAM,MAGhE,GAAO,UAAU,2BAA6B,SAAU,EAAU,EAAS,CACzE,KAAM,IAAI,OAAM,iBAElB,GAAO,UAAU,yBAA2B,SAAU,EAAU,EAAS,CACvE,GAAG,KAAK,YAAc,EACpB,MAAO,MAAK,YAAY,GAAK,KAAK,WAAY,GAEhD,GAAG,KAAK,aAAe,EACrB,MAAO,MAAK,YAAY,GAAK,KAAK,YAAa,GAEjD,GAAG,KAAK,cAAgB,EACtB,MAAO,MAAK,YAAY,GAAK,KAAK,aAAc,GAElD,KAAM,IAAI,OAAM,qBAAuB,IAEzC,GAAO,UAAU,YAAc,SAAS,EAAO,EAAS,CAEtD,OADI,GAAU,GACN,EAAI,EAAU,EAAM,EAAY,EAAI,EAAQ,EAAI,EAAK,GAAK,EAChE,EAAQ,KAAK,CACX,QAAS,KAAK,KAAK,KAAK,OAAQ,EAAG,GAAG,UAAU,GAChD,SAAU,KAAK,KAAK,KAAK,OAAQ,EAAI,EAAG,GAAG,UAAU,GACrD,OAAQ,KAAK,KAAK,KAAK,OAAQ,EAAI,EAAG,GAAG,UAAU,GACnD,YAAa,KAAK,KAAK,KAAK,OAAQ,EAAI,EAAG,GAAG,UAAU,KAG5D,KAAK,aAAe,GAEtB,GAAO,UAAU,YAAc,UAAU,CACvC,GAAI,GAAW,KAAK,WAAW,aAC3B,EAAa,GACjB,AAAG,KAAK,gBAAkB,GACxB,GAAa,IAEZ,KAAK,gBAAkB,GACxB,GAAa,IAEZ,KAAK,gBAAkB,GACxB,GAAa,IAGf,GAAI,GAAW,KAAK,WAAW,aAAa,GAC5C,OAAO,OACF,MAAK,iBACR,KAAK,QAAU,GACZ,GACD,MAAK,QAAU,KAAK,QAAW,EAAK,IAAK,IAE3C,UACG,MAAK,kBACR,KAAK,QAAU,GACZ,GACD,MAAK,QAAU,KAAK,QAAW,EAAK,IAAK,IAE3C,UACG,MAAK,eACR,KAAK,QAAU,IACZ,GACD,MAAK,QAAU,KAAK,QAAW,EAAK,IAAK,IAE3C,UACG,MAAK,eACR,KAAK,QAAU,IACZ,GACD,MAAK,QAAU,KAAK,QAAW,EAAK,IAAK,QAExC,MAAK,iBACR,KAAK,QAAU,GACZ,GACD,MAAK,QAAU,KAAK,QAAW,EAAK,IAAK,IAE3C,cAEA,KAAM,IAAI,OAAM,yBAA2B,EAAW,IAAM,KAGhE,GAAO,UAAU,QAAU,SAAS,EAAG,EAAG,EAAG,EAAE,CAC7C,GAAI,GAAM,GAEN,EAAS,SAAS,EAAM,CAC1B,GAAI,GAAI,EAAM,SAAS,IACvB,MAAG,GAAQ,GACF,IAAM,EAER,GAGT,SAAI,KAAK,EAAO,IAChB,EAAI,KAAK,EAAO,IAChB,EAAI,KAAK,EAAO,IAET,IAAM,EAAI,KAAK,KAExB,GAAO,UAAU,SAAW,SAAS,EAAQ,EAAS,CACpD,GAAI,GAAG,EAAG,EAAG,EACT,EAAS,EAAO,OAChB,EAAY,GAEhB,GAAG,KAAK,YAAc,EAAS,CAC7B,OAAQ,GAAI,EAAG,EAAI,EAAQ,EAAE,EAAE,CAC7B,GAAI,GAAe,EAAO,GACtB,EAAM,EAAa,SAAS,GAChC,EAAM,GAAI,OAAM,EAAI,EAAI,QAAQ,KAAK,KAAO,EAE5C,OAAQ,GAAI,EAAG,EAAI,EAAI,OAAQ,EAAE,EAAE,CACjC,GAAI,GAAe,SAAS,EAAI,UAAU,EAAG,EAAI,GAAI,IACjD,EAAU,KAAK,aAAa,GAChC,EAAU,KAAK,KAAK,QAAQ,EAAQ,OAAQ,EAAQ,SAAU,EAAQ,QAAS,MAGnF,MAAO,GAET,GAAG,KAAK,aAAe,EAAS,CAC9B,OAAQ,GAAI,EAAG,EAAI,EAAQ,GAAK,EAAE,CAChC,GAAI,GAAc,EAAO,UAAU,GAC/B,EAAa,EAAO,UAAU,EAAI,GAClC,EAAU,CAAC,EAAa,GAC5B,EAAQ,QAAQ,SAAS,EAAa,CACpC,GAAI,GAAU,KAAK,aAAa,GAChC,EAAU,KAAK,KAAK,QAAQ,EAAQ,OAAQ,EAAQ,SAAU,EAAQ,QAAS,OAInF,MAAO,GAET,GAAG,KAAK,cAAgB,EAAS,CAC/B,OAAQ,GAAI,EAAG,EAAI,EAAQ,EAAE,EAAE,CAC7B,GAAI,GAAe,EAAO,aAAa,GACnC,EAAU,KAAK,aAAa,GAChC,EAAU,KAAK,KAAK,QAAQ,EAAQ,OAAQ,EAAQ,SAAU,EAAQ,QAAS,KAEjF,MAAO,GAET,GAAG,KAAK,gBAAkB,EAAS,CACjC,OAAQ,GAAI,EAAG,EAAI,EAAQ,GAAK,EAC9B,EAAI,EAAO,GACX,EAAI,EAAO,EAAI,GACf,EAAI,EAAO,EAAI,GACf,EAAU,KAAK,KAAK,QAAQ,EAAG,EAAG,EAAG,KAEvC,MAAO,GAET,GAAG,KAAK,gBAAkB,EAAS,CACjC,OAAQ,GAAI,EAAG,EAAI,EAAQ,GAAK,EAC9B,EAAI,EAAO,GACX,EAAI,EAAO,EAAI,GACf,EAAI,EAAO,EAAI,GACf,EAAU,KAAK,KAAK,QAAQ,EAAG,EAAG,EAAG,KAEvC,MAAO,GAET,GAAG,KAAK,gBAAkB,EAAS,CACjC,OAAQ,GAAI,EAAG,EAAI,EAAQ,GAAK,EAC9B,EAAI,EAAO,GACX,EAAI,EAAO,EAAI,GACf,EAAI,EAAO,EAAI,GACf,EAAI,EAAO,EAAI,GACf,EAAU,KAAK,KAAK,QAAQ,EAAG,EAAG,EAAG,IAEvC,MAAO,GAET,KAAM,IAAI,OAAM,qBAAuB,MCvlBzC,sBAAO,QAAU,OCAjB,gCAEA,GAAI,IAAS,OAAO,UAAU,eAC1B,GAAQ,OAAO,UAAU,SACzB,GAAiB,OAAO,eACxB,GAAO,OAAO,yBAEd,GAAU,SAAiB,EAAK,CACnC,MAAI,OAAO,OAAM,SAAY,WACrB,MAAM,QAAQ,GAGf,GAAM,KAAK,KAAS,kBAGxB,GAAgB,SAAuB,EAAK,CAC/C,GAAI,CAAC,GAAO,GAAM,KAAK,KAAS,kBAC/B,MAAO,GAGR,GAAI,GAAoB,GAAO,KAAK,EAAK,eACrC,EAAmB,EAAI,aAAe,EAAI,YAAY,WAAa,GAAO,KAAK,EAAI,YAAY,UAAW,iBAE9G,GAAI,EAAI,aAAe,CAAC,GAAqB,CAAC,EAC7C,MAAO,GAKR,GAAI,GACJ,IAAK,IAAO,GAAK,CAEjB,MAAO,OAAO,IAAQ,aAAe,GAAO,KAAK,EAAK,IAInD,GAAc,SAAqB,EAAQ,EAAS,CACvD,AAAI,IAAkB,EAAQ,OAAS,YACtC,GAAe,EAAQ,EAAQ,KAAM,CACpC,WAAY,GACZ,aAAc,GACd,MAAO,EAAQ,SACf,SAAU,KAGX,EAAO,EAAQ,MAAQ,EAAQ,UAK7B,GAAc,SAAqB,EAAK,EAAM,CACjD,GAAI,IAAS,YACZ,GAAK,GAAO,KAAK,EAAK,IAEf,GAAI,GAGV,MAAO,IAAK,EAAK,GAAM,UAJvB,QAQF,MAAO,GAAI,IAGZ,GAAO,QAAU,YAAkB,CAClC,GAAI,GAAS,EAAM,EAAK,EAAM,EAAa,EACvC,EAAS,UAAU,GACnB,EAAI,EACJ,EAAS,UAAU,OACnB,EAAO,GAaX,IAVI,MAAO,IAAW,WACrB,GAAO,EACP,EAAS,UAAU,IAAM,GAEzB,EAAI,GAED,IAAU,MAAS,MAAO,IAAW,UAAY,MAAO,IAAW,aACtE,GAAS,IAGH,EAAI,EAAQ,EAAE,EAGpB,GAFA,EAAU,UAAU,GAEhB,GAAW,KAEd,IAAK,IAAQ,GACZ,EAAM,GAAY,EAAQ,GAC1B,EAAO,GAAY,EAAS,GAGxB,IAAW,GAEd,CAAI,GAAQ,GAAS,IAAc,IAAU,GAAc,GAAQ,KAClE,CAAI,EACH,GAAc,GACd,EAAQ,GAAO,GAAQ,GAAO,EAAM,IAEpC,EAAQ,GAAO,GAAc,GAAO,EAAM,GAI3C,GAAY,EAAQ,CAAE,KAAM,EAAM,SAAU,EAAO,EAAM,EAAO,MAGtD,MAAO,IAAS,aAC1B,GAAY,EAAQ,CAAE,KAAM,EAAM,SAAU,KAQjD,MAAO,qh0HCnHR,cACA,aAGA,GAAI,IAAW,QAAQ,YAGnB,GAAY,GAMhB,GAAU,MAAQ,KAA6B,IAAI,SAAU,EAAM,CAEjE,MAAO,CACL,KAAM,EACN,OAAQ,EAAK,QAAQ,aAAc,IACnC,WAAY,GACZ,SAAU,EAAK,OAAO,KAAO,IAC7B,UAAW,EAAK,OAAO,KAAO,OAQlC,GAAU,SAAW,SAAU,EAAK,EAAQ,CAE1C,MAAO,GAAI,QAAQ,EAAQ,EAAI,OAAS,EAAO,UAAY,IAO7D,GAAU,SAAW,SAAU,EAAQ,CAErC,GAAI,GAAa,GAAS,QAAQ,GAClC,MAAO,IAAU,MAAM,OAAO,SAAU,EAAM,EAAM,CAKlD,MAHI,GAAK,aAAe,IACtB,GAAK,WAAa,GAAS,QAAQ,EAAK,SAEtC,CAAC,GAAU,SAAS,EAAY,IAAM,EAAK,aAAe,IAAe,EAAK,WACzE,EAWF,GACN,OAOL,GAAQ,WAAa,CACnB,iBAAkB,yBAClB,gBAAiB,6DACjB,uBAAwB,+CACxB,qBAAsB,6CACtB,eAAgB,qDAChB,gBAAiB,yDACjB,oBAAqB,yEAuBvB,GAAU,SAAW,SAAU,EAAO,CAGpC,GAAI,GAAQ,GAAS,QAAQ,GAE7B,GAAI,EAAM,OAAS,EACjB,MAAO,mBAET,GAAI,EAAM,OAAS,IACjB,MAAO,kBAOT,OAHI,GAAS,EAAM,MAAM,KACrB,EAEK,EAAI,EAAG,EAAI,EAAO,OAAQ,EAAE,EAAG,CAEtC,GADA,EAAQ,EAAO,GACX,CAAC,EAAM,OACT,MAAO,kBAET,GAAI,EAAM,OAAS,GACjB,MAAO,iBAET,GAAI,EAAM,OAAO,KAAO,IACtB,MAAO,yBAET,GAAI,EAAM,OAAO,EAAM,OAAS,KAAO,IACrC,MAAO,uBAET,GAAI,CAAC,gBAAgB,KAAK,GACxB,MAAO,wBAcb,GAAQ,MAAQ,SAAU,EAAO,CAE/B,GAAI,MAAO,IAAU,SACnB,KAAM,IAAI,WAAU,iCAItB,GAAI,GAAS,EAAM,MAAM,GAAG,cAI5B,AAAI,EAAO,OAAO,EAAO,OAAS,KAAO,KACvC,GAAS,EAAO,MAAM,EAAG,EAAO,OAAS,IAI3C,GAAI,GAAQ,GAAU,SAAS,GAC/B,GAAI,EACF,MAAO,CACL,MAAO,EACP,MAAO,CACL,QAAS,GAAQ,WAAW,GAC5B,KAAM,IAKZ,GAAI,GAAS,CACX,MAAO,EACP,IAAK,KACL,IAAK,KACL,OAAQ,KACR,UAAW,KACX,OAAQ,IAGN,EAAc,EAAO,MAAM,KAG/B,GAAI,EAAY,EAAY,OAAS,KAAO,QAC1C,MAAO,GAGT,GAAI,GAAiB,UAAY,CAE/B,MAAK,OAAO,KAAK,IAGb,GAAO,QACT,GAAO,OAAS,GAAS,QAAQ,EAAO,SAEtC,EAAO,WACT,GAAO,UAAY,GAAS,QAAQ,EAAO,aAEtC,GAGL,EAAO,GAAU,SAAS,GAG9B,GAAI,CAAC,EACH,MAAI,GAAY,OAAS,EAChB,EAET,GAAO,IAAM,EAAY,MACzB,EAAO,IAAM,EAAY,MACzB,EAAO,OAAS,CAAC,EAAO,IAAK,EAAO,KAAK,KAAK,KAC1C,EAAY,QACd,GAAO,UAAY,EAAY,OAE1B,KAIT,EAAO,OAAS,GAEhB,GAAI,GAAW,EAAK,OAAO,MAAM,KAC7B,EAAe,EAAY,MAAM,EAAG,EAAY,OAAS,EAAS,QAiBtE,MAfI,GAAK,WACP,EAAa,KAAK,EAAS,SAG7B,EAAO,IAAM,EAAS,KAAK,KAEvB,CAAC,EAAa,QAId,GAAK,UACP,GAAS,QAAQ,EAAa,OAC9B,EAAO,IAAM,EAAS,KAAK,MAGzB,CAAC,EAAa,SAIlB,GAAO,IAAM,EAAa,MAC1B,EAAO,OAAS,CAAC,EAAO,IAAM,EAAO,KAAK,KAAK,KAE3C,EAAa,QACf,GAAO,UAAY,EAAa,KAAK,OAGhC,KAOT,GAAQ,IAAM,SAAU,EAAQ,CAE9B,MAAK,IAGE,GAAQ,MAAM,GAAQ,QAAU,MAOzC,GAAQ,QAAU,SAAU,EAAQ,CAElC,GAAI,GAAS,GAAQ,MAAM,GAC3B,MAAO,SAAQ,EAAO,QAAU,EAAO,WC3QzC,cA8BA,aACA,GAAI,IAAM,KAEV,YAAyB,EAAQ,CAC/B,MAAO,IAAI,IAAI,GAGjB,GAAQ,gBAAkB,KCrC1B,cA8BA,aAGA,aAAiB,EAEjB,GAAQ,MAAQ,GAKhB,GAAM,UAAU,YAAc,GAE9B,GAAM,UAAU,WAAa,SAAS,EAAQ,EAAM,EAAK,EAAI,CAC3D,KAAM,IAAI,OAAM,kCAGlB,GAAM,UAAU,YAAc,SAAS,EAAQ,EAAM,EAAI,CACvD,KAAM,IAAI,OAAM,mCAGlB,GAAM,UAAU,UAAY,SAAS,EAAQ,EAAI,CAC/C,KAAM,IAAI,OAAM,iCAGlB,GAAM,UAAU,aAAe,SAAS,EAAW,EAAW,EAAI,CAGhE,KAAM,IAAI,OAAM,oCAGlB,GAAM,UAAU,aAAe,SAAS,EAAQ,EAAM,EAAK,EAAI,CAC7D,KAAM,IAAI,OAAM,oCAGlB,GAAM,UAAU,cAAgB,SAAS,EAAQ,EAAM,EAAI,CACzD,KAAM,IAAI,OAAM,qCAGlB,GAAM,UAAU,iBAAmB,SAAS,EAAI,CAC9C,KAAM,IAAI,OAAM,wCAGlB,GAAM,UAAU,cAAgB,SAAS,EAAI,CAC3C,KAAM,IAAI,OAAM,4ECzElB,cA8BA,aACA,GAAI,IAAY,KAIhB,YAAwB,EAAQ,CAC9B,GAAI,GAAS,GAAU,gBAAgB,GACvC,GAAI,CAAC,EACH,MAAO,MAET,GAAI,GAAU,EACZ,MAAO,CAAC,GAOV,OAJI,GAAS,EAAO,MAAM,EAAG,CAAE,GAAO,OAAS,IAC3C,EAAQ,EAAO,MAAM,KAAK,UAC1B,EAAM,EACN,EAAe,CAAC,GACb,EAAM,QACX,EAAM,EAAM,QAAU,IAAM,EAC5B,EAAa,KAAK,GAEpB,MAAO,GAGT,GAAQ,cAAgB,KCvDxB,cA8BA,aAKA,YAAoB,EAAS,EAAY,CAEvC,GAAI,IAAe,EACjB,MAAO,GAGT,GAAI,GAAM,EAAQ,QAAQ,GAC1B,MAAI,KAAQ,GAGN,GAAW,OAAO,MAAQ,KAO1B,EAAQ,OAAO,EAAW,OAAQ,KAAO,KAQjD,GAAQ,UAAY,KC5DpB,cA8BA,aACA,GAAI,IAAQ,KAAmB,MAC3B,GAAgB,KAA2B,cAC3C,GAAY,KAAuB,UACnC,GAAO,QAAQ,QAEnB,aAA6B,CAC3B,GAAM,KAAK,MACX,KAAK,IAAM,GAEb,GAAK,SAAS,GAAmB,IACjC,GAAQ,kBAAoB,GAC5B,GAAkB,UAAU,IAAM,KAGlC,GAAkB,UAAU,YAAc,GAG1C,GAAkB,UAAU,QAAU,UAAW,CAC/C,MAAO,UAAU,GAAK,QAAQ,KAAK,IAAK,GAAO,GAAG,MAKpD,AAAI,GAAK,QAAQ,QACf,IAAkB,UAAU,GAAK,QAAQ,QAAU,GAAkB,UAAU,SAGjF,GAAkB,UAAU,WAAa,SAAS,EAAQ,EAAM,EAAK,EAAI,CAIvE,MAHI,CAAC,KAAK,IAAI,IAGV,CAAC,KAAK,IAAI,GAAQ,GACb,EAAG,KAAK,QAEV,EAAG,KAAK,KAAK,IAAI,GAAQ,GAAM,IAAM,OAG9C,GAAkB,UAAU,YAAc,SAAS,EAAQ,EAAM,EAAI,CACnE,GAAI,GAAU,GACd,GAAI,CAAC,EACH,MAAO,GAAG,KAAK,IAGjB,GAAI,GACJ,AAAK,EAYH,EAAc,SAAkB,EAAa,CAG1C,OAAO,KAAK,GAAa,QAAQ,SAAU,EAAY,CACrD,GAAI,GAAU,EAAM,GAAa,CAC/B,GAAI,GAAY,EAAY,GAE5B,OAAS,KAAO,GACd,EAAQ,KAAK,EAAU,QAlBhC,EAAc,SAAkB,EAAa,CAC3C,OAAS,KAAW,GAAa,CAC/B,GAAI,GAAY,EAAY,GAC5B,OAAS,KAAO,GACd,EAAQ,KAAK,EAAU,MAqB/B,GAAI,GAAU,GAAc,IAAW,CAAC,GACpC,EAAM,KAAK,IACf,EAAQ,QAAQ,SAAS,EAAW,CAClC,GAAI,GAAc,EAAI,GACtB,AAAI,CAAC,GAGL,EAAY,KAGd,EAAG,KAAK,IAGV,GAAkB,UAAU,UAAY,SAAS,EAAQ,EAAI,CAC3D,AAAK,KAAK,IAAI,EAAO,SACnB,MAAK,IAAI,EAAO,QAAU,IAEvB,KAAK,IAAI,EAAO,QAAQ,EAAO,OAClC,MAAK,IAAI,EAAO,QAAQ,EAAO,MAAQ,IAEzC,KAAK,IAAI,EAAO,QAAQ,EAAO,MAAM,EAAO,KAAO,EACnD,EAAG,OAGL,GAAkB,UAAU,aAAe,SAAS,EAAW,EAAW,EAAI,CAI5E,KAAK,UAAU,EAAU,IAG3B,GAAkB,UAAU,aAAe,SAAS,EAAQ,EAAM,EAAK,EAAI,CACzE,AAAI,KAAK,IAAI,IAAW,KAAK,IAAI,GAAQ,IAAS,KAAK,IAAI,GAAQ,GAAM,IACvE,MAAO,MAAK,IAAI,GAAQ,GAAM,GAEhC,EAAG,OAGL,GAAkB,UAAU,cAAgB,SAAS,EAAQ,EAAM,EAAI,CACrE,MAAI,MAAK,IAAI,IACX,CAAI,EACF,MAAO,MAAK,IAAI,GAAQ,GAExB,MAAO,MAAK,IAAI,IAGb,EAAG,OAGZ,GAAkB,UAAU,iBAAmB,SAAS,EAAI,CAC1D,YAAK,IAAM,GACJ,EAAG,OAGZ,GAAkB,UAAU,cAAgB,SAAS,EAAI,CACvD,GAAI,GAAU,GACV,EAAM,KAAK,IAEX,EAAU,OAAO,KAAK,GAC1B,EAAQ,QAAQ,SAAS,EAAQ,CAC/B,GAAI,GAAQ,OAAO,KAAK,EAAI,IAC5B,EAAM,QAAQ,SAAS,EAAM,CAC3B,GAAI,GAAO,OAAO,KAAK,EAAI,GAAQ,IACnC,EAAK,QAAQ,SAAS,EAAK,CACzB,AAAI,IAAQ,MACV,EAAQ,KAAK,EAAI,GAAQ,GAAM,UAQvC,EAAQ,KAAK,SAAS,EAAE,EAAG,CACzB,MAAQ,GAAE,eAAe,GAAM,GAAE,eAAe,KAGlD,EAAG,KAAM,MCnLX,mBACA,GAAO,QAAU,UCDjB,cA8BA,aACA,GAAI,IAAM,QAAQ,OACd,GAAW,QAAQ,OAAO,MAC1B,GAAO,QAAQ,QACf,GAAY,KACZ,GAAQ,KAAmB,MAC3B,GAAoB,KAAsB,kBAC1C,GAAY,KAAuB,UACnC,GAAU,KAEV,GACJ,GAAI,CACF,GAAW,QAAQ,iBACnB,CACA,QAAQ,KAAK,kFAKf,GAAI,IAAgB,gDAEhB,GAAgB,cAKhB,GAAc,CAAC;AAAA,EAAM,KAAM,MAI3B,GAAa,wBAIb,GAAa,6CAEb,GAAe,CACjB,IAAI,EAAG,IAAI,EAAG,IAAI,EAAG,IAAI,EAAG,IAAI,EAAG,IAAI,EACvC,IAAI,EAAG,IAAI,EAAG,IAAI,EAAG,IAAI,EAAG,IAAI,GAAI,IAAI,IAEtC,GAAe,CACjB,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAEhE,GAAa,CACf,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAGlC,GAAW,aACX,GAAW,EAYf,YAAqB,EAAO,EAAW,EAAW,EAAY,CAE5D,OADI,GAAQ,EACL,EAAQ,EAAM,QAAQ,CAC3B,GAAI,GAAI,EAAM,WAAW,GAEzB,GAAI,GAAK,IAAQ,GAAK,GACpB,MAEF,IAQF,MAJI,GAAQ,GAAa,EAAQ,GAI7B,CAAC,GAAc,GAAS,EAAM,OACzB,KAGF,SAAS,EAAM,OAAO,EAAE,GAAQ,IAGzC,YAAmB,EAAO,CACxB,GAAI,GAAQ,EAAM,MAAM,KACpB,EAAS,CAAC,EAAE,EAAE,GAQlB,GAAI,EAAM,SAAW,EACnB,MAAO,MAGT,OAAS,GAAI,EAAG,EAAI,EAAG,IAAK,CAI1B,GAAI,GAAc,GAAK,EACnB,EAAM,GAAY,EAAM,GAAI,EAAG,EAAG,GACtC,GAAI,IAAQ,KACV,MAAO,MAET,EAAO,GAAK,EAGd,MAAO,GAGT,YAAoB,EAAO,CACzB,EAAQ,OAAO,GAAO,OAAO,EAAE,GAAG,cAClC,GAAI,GAAM,GAAa,GACvB,MAAO,IAAO,EAAI,EAAM,KAM1B,YAAmB,EAAK,CACtB,GAAI,EAAC,EAQL,IAAI,GAAS,EAAI,MAAM,IACvB,GAAI,EAAC,EAWL,QAPI,GAAO,KACP,EAAS,KACT,EAAS,KACT,EAAa,KACb,EAAQ,KACR,EAAO,KAEF,EAAE,EAAG,EAAE,EAAO,OAAQ,IAAK,CAClC,GAAI,GAAQ,EAAO,GAAG,OACtB,GAAI,EAAC,EAAM,OAIX,IAAI,GAQJ,GAAI,IAAW,MACb,GAAS,GAAU,GACf,GAAQ,CACV,EAAO,EAAO,GACd,EAAS,EAAO,GAChB,EAAS,EAAO,GAChB,SASJ,GAAI,IAAe,MAEjB,GAAS,GAAY,EAAO,EAAG,EAAG,IAC9B,IAAW,MAAM,CACnB,EAAa,EACb,SASJ,GAAI,IAAU,MACZ,GAAS,GAAW,GAChB,IAAW,MAAM,CACnB,EAAQ,EACR,SASJ,AAAI,IAAS,MAEX,GAAS,GAAY,EAAO,EAAG,EAAG,IAC9B,IAAW,MACb,GAAO,EAOP,AAAI,GAAQ,IAAM,GAAQ,GACxB,GAAQ,KACC,GAAQ,GAAK,GAAQ,IAC9B,IAAQ,QAmBhB,GACE,MAAe,MAAQ,IAAU,MAAQ,IAAS,MAAQ,IAAW,MACrE,EAAa,GAAK,EAAa,IAC/B,EAAO,MACP,EAAO,IACP,EAAS,IACT,EAAS,IAKX,MAAO,IAAI,MAAK,KAAK,IAAI,EAAM,EAAO,EAAY,EAAM,EAAQ,MAGlE,YAAoB,EAAM,CACxB,GAAI,GAAI,EAAK,aAAc,EAAI,GAAK,GAAK,EAAI,IAAI,EACjD,GAAI,GAAI,EAAK,cAAe,EAAI,GAAK,GAAK,EAAI,IAAI,EAClD,GAAI,GAAI,EAAK,gBAAiB,EAAI,GAAK,GAAK,EAAI,IAAI,EACpD,GAAI,GAAI,EAAK,gBAAiB,SAAI,GAAK,GAAK,EAAI,IAAI,EAC7C,GAAW,EAAK,aAAe,KACpC,EAAE,IAAK,GAAa,EAAK,eAAgB,IAAK,EAAK,iBAAkB,IACrE,EAAE,IAAI,EAAE,IAAI,EAAE,OAIlB,YAAyB,EAAK,CAC5B,MAAI,IAAO,KACF,KAET,GAAM,EAAI,OAAO,QAAQ,MAAM,IAG3B,IAAY,mBAAmB,KAAK,IACtC,GAAM,GAAS,QAAQ,IAGlB,EAAI,eAIb,YAAqB,EAAK,EAAQ,EAAc,CAC9C,GAAI,GAAO,MAAQ,GAAU,KAC3B,MAAO,MAYT,GAVI,IAAiB,IACnB,GAAM,GAAgB,GACtB,EAAS,GAAgB,IAQvB,GAAO,EACT,MAAO,GAMT,GAAI,GAAI,KAAK,GACX,MAAO,GAIT,GAAI,GAAM,EAAI,QAAQ,GAatB,MAZI,KAAO,GAMP,EAAI,SAAW,EAAO,OAAS,GAM/B,EAAI,OAAO,EAAI,EAAE,KAAO,KAgB9B,YAAqB,EAAM,CAGzB,GAAI,CAAC,GAAQ,EAAK,OAAO,EAAE,KAAO,IAChC,MAAO,IAKT,GAAI,IAAS,IACX,MAAO,GAGT,GAAI,GAAa,EAAK,YAAY,KAClC,MAAI,KAAe,EACV,IAKF,EAAK,MAAM,EAAG,GAGvB,YAAwB,EAAK,CAC3B,OAAS,GAAI,EAAG,EAAI,GAAY,OAAQ,IAAK,CAC3C,GAAI,GAAgB,EAAI,QAAQ,GAAY,IAC5C,AAAI,IAAkB,IACpB,GAAM,EAAI,OAAO,EAAE,IAIvB,MAAO,GAGT,YAAyB,EAAY,EAAW,CAC9C,EAAa,GAAe,GAE5B,GAAI,GAAU,EAAW,QAAQ,KACjC,GAAI,EACF,AAAI,IAAY,GACd,GAAa,EAAW,OAAO,GAC/B,EAAU,EAAW,QAAQ,cAG3B,GAAW,EACb,OAIJ,GAAI,GAAY,EAShB,GARA,AAAI,GAAW,EACb,GAAa,GACb,EAAc,EAAW,QAEzB,GAAa,EAAW,OAAO,EAAG,GAAS,OAC3C,EAAc,EAAW,OAAO,EAAQ,GAAG,QAGzC,KAAc,KAAK,IAAe,GAAc,KAAK,IAIzD,IAAI,GAAI,GAAI,IACZ,SAAE,IAAM,EACR,EAAE,MAAQ,EACH,GAGT,YAAe,EAAK,EAAS,CAC3B,AAAI,EAAC,GAAW,MAAO,IAAY,WACjC,GAAU,IAEZ,EAAM,EAAI,OAGV,GAAI,GAAY,EAAI,QAAQ,KACxB,EAAc,IAAc,GAAM,EAAM,EAAI,OAAO,EAAG,GACtD,EAAI,GAAgB,EAAY,CAAC,CAAC,EAAQ,OAC9C,GAAI,EAAC,EAIL,IAAI,IAAc,GAChB,MAAO,GAMT,GAAI,GAAW,EAAI,MAAM,EAAY,GAAG,OAIxC,GAAI,EAAS,SAAW,EACtB,MAAO,GAYT,OADI,GAAa,EAAS,MAAM,KACzB,EAAW,QAAQ,CACxB,GAAI,GAAK,EAAW,QAAQ,OAC5B,GAAI,EAAG,SAAW,EAGlB,IAAI,GAAS,EAAG,QAAQ,KACpB,EAAQ,EAgBZ,OAdA,AAAI,IAAW,GACb,GAAS,EACT,EAAW,MAEX,GAAS,EAAG,OAAO,EAAE,GACrB,EAAW,EAAG,OAAO,EAAO,IAG9B,EAAS,EAAO,OAAO,cAEnB,GACF,GAAW,EAAS,QAGf,OACF,UACH,GAAI,EAAU,CACZ,GAAI,GAAM,GAAU,GAGpB,AAAI,GAGF,GAAE,QAAU,GAGhB,UAEG,UACH,GAAI,GAIE,aAAa,KAAK,GAAW,CAC/B,GAAI,GAAQ,SAAS,EAAU,IAG/B,EAAE,UAAU,GAGhB,UAEG,SAGH,GAAI,EAAU,CAGZ,GAAI,GAAS,EAAS,OAAO,QAAQ,MAAO,IAC5C,AAAI,GAEF,GAAE,OAAS,EAAO,eAGtB,UAEG,OAWH,EAAE,KAAO,GAAY,EAAS,KAAO,IAAM,EAAW,KACtD,UAEG,SAMH,EAAE,OAAS,GACX,UAEG,WACH,EAAE,SAAW,GACb,cAGA,EAAE,WAAa,EAAE,YAAc,GAC/B,EAAE,WAAW,KAAK,GAClB,QAIJ,MAAO,IAIT,YAAmB,EAAK,CACtB,GAAI,GACJ,GAAI,CACF,EAAM,KAAK,MAAM,SACV,EAAP,CACA,MAAO,GAET,MAAO,GAGT,YAAkB,EAAK,CACrB,GAAI,CAAC,EACH,MAAO,MAGT,GAAI,GACJ,GAAI,MAAO,IAAQ,UAEjB,GADA,EAAM,GAAU,GACZ,YAAe,OACjB,MAAO,UAIT,GAAM,EAIR,OADI,GAAI,GAAI,IACH,EAAE,EAAG,EAAE,GAAO,uBAAuB,OAAQ,IAAK,CACzD,GAAI,GAAO,GAAO,uBAAuB,GACzC,AAAI,EAAI,KAAU,QACd,EAAI,KAAU,GAAO,UAAU,IAKnC,CAAI,IAAS,WACT,IAAS,YACT,IAAS,eAEX,AAAI,EAAI,KAAU,KAChB,EAAE,GAAQ,KAEV,EAAE,GAAQ,EAAI,IAAS,WACrB,WAAa,GAAI,MAAK,EAAI,IAG9B,EAAE,GAAQ,EAAI,IAIlB,MAAO,GAYT,YAAuB,EAAE,EAAG,CAC1B,GAAI,GAAM,EAGN,EAAW,EAAE,KAAO,EAAE,KAAK,OAAS,EACpC,EAAW,EAAE,KAAO,EAAE,KAAK,OAAS,EAExC,GADA,EAAM,EAAW,EACb,IAAQ,EACV,MAAO,GAIT,GAAI,GAAQ,EAAE,SAAW,EAAE,SAAS,UAAY,GAC5C,EAAQ,EAAE,SAAW,EAAE,SAAS,UAAY,GAEhD,MADA,GAAM,EAAQ,EACV,IAAQ,GAKZ,GAAM,EAAE,cAAgB,EAAE,eAEnB,EAKT,YAAqB,EAAM,CACzB,GAAI,IAAS,IACX,MAAO,CAAC,KAEV,AAAI,EAAK,YAAY,OAAS,EAAK,OAAO,GACxC,GAAO,EAAK,OAAO,EAAE,EAAK,OAAO,IAGnC,OADI,GAAe,CAAC,GACb,EAAK,OAAS,GAAG,CACtB,GAAI,GAAS,EAAK,YAAY,KAC9B,GAAI,IAAW,EACb,MAEF,EAAO,EAAK,OAAO,EAAE,GACrB,EAAa,KAAK,GAEpB,SAAa,KAAK,KACX,EAGT,YAA0B,EAAK,CAC7B,GAAI,YAAe,QACjB,MAAO,GAIT,GAAI,CACF,EAAM,UAAU,QAElB,EAIA,MAAO,IAAS,GAGlB,YAAgB,EAAS,CACvB,EAAU,GAAW,GAErB,OAAO,KAAK,GAAS,QAAQ,SAAS,EAAM,CAC1C,AAAI,GAAO,UAAU,eAAe,IAChC,GAAO,UAAU,KAAU,EAAQ,IACnC,EAAK,OAAO,EAAE,KAAO,KAEvB,MAAK,GAAQ,EAAQ,KAEtB,MAEH,KAAK,SAAW,KAAK,UAAY,GAAI,MAGrC,OAAO,eAAe,KAAM,gBAAiB,CAC3C,aAAc,GACd,WAAY,GACZ,SAAU,GACV,MAAO,EAAE,GAAO,iBAIpB,GAAO,eAAiB,EAExB,GAAO,MAAQ,GACf,GAAO,SAAW,GAElB,GAAO,UAAU,IAAM,GACvB,GAAO,UAAU,MAAQ,GAGzB,GAAO,UAAU,QAAU,WAC3B,GAAO,UAAU,OAAS,KAC1B,GAAO,UAAU,OAAS,KAC1B,GAAO,UAAU,KAAO,KACxB,GAAO,UAAU,OAAS,GAC1B,GAAO,UAAU,SAAW,GAC5B,GAAO,UAAU,WAAa,KAG9B,GAAO,UAAU,SAAW,KAC5B,GAAO,UAAU,cAAgB,KACjC,GAAO,UAAU,SAAW,KAC5B,GAAO,UAAU,aAAe,KAChC,OAAO,eAAe,GAAO,UAAW,gBAAiB,CACvD,aAAc,GACd,WAAY,GACZ,SAAU,GACV,MAAO,IAGT,GAAO,uBAAyB,OAAO,KAAK,GAAO,WAChD,OAAO,SAAS,EAAM,CACrB,MAAO,CACL,IAAO,UAAU,YAAiB,WAClC,IAAS,iBACT,EAAK,OAAO,EAAE,KAAO,OAI3B,GAAO,UAAU,QAAU,UAAmB,CAC5C,GAAI,GAAM,KAAK,MACf,MAAO,WAAW,KAAK,WACrB,cAAe,MAAK,UAAY,KAAO,KAAK,SAAW,KACvD,UAAW,MAAK,aAAgB,EAAI,KAAK,aAAa,UAAW,KAAO,KACxE,UAAW,MAAK,SAAY,EAAI,KAAK,SAAS,UAAW,KAAO,KAChE,KAKJ,AAAI,GAAK,QAAQ,QACf,IAAO,UAAU,GAAK,QAAQ,QAAU,GAAO,UAAU,SAG3D,GAAO,UAAU,OAAS,UAAW,CAInC,OAHI,GAAM,GAEN,EAAQ,GAAO,uBACV,EAAE,EAAG,EAAE,EAAM,OAAQ,IAAK,CACjC,GAAI,GAAO,EAAM,GACjB,AAAI,KAAK,KAAU,GAAO,UAAU,IAIpC,CAAI,IAAS,WACT,IAAS,YACT,IAAS,eAEX,AAAI,KAAK,KAAU,KACjB,EAAI,GAAQ,KAEZ,EAAI,GAAQ,KAAK,IAAS,WACxB,WAAa,KAAK,GAAM,cAEvB,AAAI,IAAS,SACd,KAAK,KAAU,MAEjB,GAAI,GAAS,KAAK,IAAS,KAAY,KAAK,IAAS,KACnD,KAAK,GAAM,WAAa,KAAK,IAG7B,KAAK,KAAU,GAAO,UAAU,IAClC,GAAI,GAAQ,KAAK,KAKvB,MAAO,IAGT,GAAO,UAAU,MAAQ,UAAW,CAClC,MAAO,IAAS,KAAK,WAGvB,GAAO,UAAU,SAAW,UAAoB,CAU9C,GATI,CAAC,GAAc,KAAK,KAAK,QAGzB,KAAK,SAAW,KAAY,CAAE,MAAK,kBAAmB,QAAS,CAAC,GAAU,KAAK,UAG/E,KAAK,QAAU,MAAQ,KAAK,QAAU,GAGtC,KAAK,MAAQ,MAAQ,CAAC,GAAW,KAAK,KAAK,MAC7C,MAAO,GAGT,GAAI,GAAU,KAAK,UACnB,GAAI,EAAS,CACX,GAAI,EAAQ,MAAM,OAChB,MAAO,GAET,GAAI,GAAS,GAAU,gBAAgB,GACvC,GAAI,GAAU,KACZ,MAAO,GAGX,MAAO,IAGT,GAAO,UAAU,WAAa,SAAoB,EAAK,CACrD,AAAI,YAAe,MACjB,KAAK,QAAU,EAEf,KAAK,QAAU,GAAU,IAAQ,YAIrC,GAAO,UAAU,UAAY,SAAmB,EAAK,CACnD,AAAI,IAAQ,KAAY,IAAQ,KAC9B,KAAK,OAAS,EAAI,WAElB,KAAK,OAAS,GAKlB,GAAO,UAAU,aAAe,UAAwB,CACtD,GAAI,GAAM,KAAK,MAIf,MAHI,IAAO,MACT,GAAM,IAEJ,KAAK,MAAQ,GACR,EAEF,KAAK,IAAI,IAAI,GAItB,GAAO,UAAU,SAAW,UAAoB,CAC9C,GAAI,GAAM,KAAK,eAEf,MAAI,MAAK,SAAW,KAClB,CAAI,KAAK,kBAAmB,MAC1B,GAAO,aAAa,GAAW,KAAK,SAEpC,GAAO,aAAa,KAAK,SAIzB,KAAK,QAAU,MAAQ,KAAK,QAAU,KACxC,IAAO,aAAa,KAAK,QAGvB,KAAK,QAAU,CAAC,KAAK,UACvB,IAAO,YAAY,KAAK,QAEtB,KAAK,MACP,IAAO,UAAU,KAAK,MAGpB,KAAK,QACP,IAAO,YAEL,KAAK,UACP,IAAO,cAEL,KAAK,YACP,KAAK,WAAW,QAAQ,SAAS,EAAK,CACpC,GAAO,KAAK,IAIT,GAOT,GAAO,UAAU,IAAM,SAAa,EAAK,CAMvC,GAAI,KAAK,QAAU,KACjB,MAAO,MAAK,QAAQ,EAAI,EAAI,KAAK,OAAO,IAG1C,GAAI,GAAU,KAAK,QACnB,MAAI,IAAW,IACP,aAAmB,OACvB,GAAU,GAAU,IAAY,KAG9B,GAAW,IACN,IAGF,EAAQ,UAAa,IAAO,KAAK,QAGnC,KAKT,GAAO,UAAU,WAAa,SAAoB,EAAK,CACrD,GAAI,KAAK,QAAU,KAAM,CACvB,GAAI,GAAa,GAAO,KAAK,UAAY,GAAI,MACzC,EAAO,KAAK,QAAU,EAAK,KAAY,KAAK,OAAO,IACvD,MAAO,GAAW,UAAY,EAGhC,MAAI,MAAK,SAAW,IACX,IAEF,KAAK,QAAQ,WAKtB,GAAO,UAAU,WAAa,SAAoB,EAAK,CACrD,GAAI,GAAW,KAAK,WAAW,GAC/B,MAAI,IAAY,IACP,GAAI,MAAK,IACP,GAAY,KACd,GAAI,MAAK,IAET,GAAI,MAAK,IAKpB,GAAO,UAAU,aAAe,UAAwB,CACtD,MAAQ,MAAK,QAAU,MAAQ,KAAK,SAAW,KAIjD,GAAO,UAAU,QACjB,GAAO,UAAU,oBAAsB,UAA+B,CACpE,MAAI,MAAK,QAAU,KACV,KAEF,GAAgB,KAAK,SAG9B,YAAmB,EAAO,EAAS,CACjC,AAAI,MAAO,IAAY,UACrB,EAAU,CAAC,qBAAsB,GACxB,GAAW,MACpB,GAAU,IAER,EAAQ,sBAAwB,MAClC,MAAK,qBAAuB,EAAQ,sBAElC,EAAQ,WAAa,MACvB,MAAK,gBAAkB,EAAQ,WAG5B,GACH,GAAQ,GAAI,KAEd,KAAK,MAAQ,EAEf,GAAU,UAAU,MAAQ,KAC5B,GAAU,UAAU,qBAAuB,GAC3C,GAAU,UAAU,gBAAkB,GACtC,GAAI,IAAc,GAElB,GAAY,KAAK,aACjB,GAAU,UAAU,UAAY,SAAS,EAAQ,EAAK,EAAS,EAAI,CACjE,GAAI,GACA,EAAU,GAAiB,GAC/B,AAAI,YAAmB,WACrB,GAAK,EACL,EAAU,IAGZ,GAAI,GAAO,GAAgB,EAAQ,UAC/B,EAAQ,KAAK,gBASjB,GARI,EAAQ,OAAS,MACnB,GAAQ,EAAQ,OAIZ,YAAkB,KACtB,GAAS,GAAO,MAAM,EAAQ,CAAE,MAAO,KAErC,CAAC,EACH,SAAM,GAAI,OAAM,0BACT,EAAG,EAAQ,YAAc,KAAO,GAIzC,GAAI,GAAM,EAAQ,KAAO,GAAI,MAO7B,GAAI,KAAK,sBAAwB,EAAO,OAAQ,CAC9C,GAAI,GAAS,GAAU,gBAAgB,EAAO,WAC9C,GAAI,GAAU,KACZ,SAAM,GAAI,OAAM,4CACT,EAAG,EAAQ,YAAc,KAAO,GAK3C,GAAI,EAAO,OAAQ,CACjB,GAAI,CAAC,GAAY,EAAM,EAAO,UAAW,IACvC,SAAM,GAAI,OAAM,4CAA4C,EAAO,UAAU,YAAY,GAClF,EAAG,EAAQ,YAAc,KAAO,GAGzC,AAAI,EAAO,UAAY,MACrB,GAAO,SAAW,QAIpB,GAAO,SAAW,GAClB,EAAO,OAAS,EAelB,GATI,EAAC,EAAO,MAAQ,EAAO,KAAK,KAAO,MACrC,GAAO,KAAO,GAAY,EAAQ,UAClC,EAAO,cAAgB,IAOrB,EAAQ,OAAS,IAAS,EAAO,SACnC,SAAM,GAAI,OAAM,iDACT,EAAG,EAAQ,YAAc,KAAO,GAGzC,GAAI,GAAQ,KAAK,MAEjB,AAAK,EAAM,cACT,GAAM,aAAe,SAAS,EAAW,EAAW,EAAI,CACtD,KAAK,UAAU,EAAW,KAI9B,WAAoB,EAAK,EAAW,CAClC,GAAI,EACF,MAAO,GAAG,GAGZ,GAAI,GAAO,SAAS,EAAK,CACvB,GAAI,EACF,MAAO,GAAG,GAEV,EAAG,KAAM,IAIb,GAAI,EAAW,CAGb,GAAI,EAAQ,OAAS,IAAS,EAAU,SACtC,SAAM,GAAI,OAAM,qDACT,EAAG,EAAQ,YAAc,KAAO,GAEzC,EAAO,SAAW,EAAU,SAC5B,EAAO,cAAgB,EAAU,cACjC,EAAO,aAAe,EAEtB,EAAM,aAAa,EAAW,EAAQ,OAGtC,GAAO,SAAW,EAAO,aAAe,EACxC,EAAM,UAAU,EAAQ,GAI5B,EAAM,WAAW,EAAO,OAAQ,EAAO,KAAM,EAAO,IAAK,IAI3D,GAAY,KAAK,cACjB,GAAU,UAAU,WAAa,SAAS,EAAK,EAAS,EAAI,CAC1D,GAAI,GAAU,GAAiB,GAC/B,AAAI,YAAmB,WACrB,GAAK,EACL,EAAU,IAGZ,GAAI,GAAO,GAAgB,EAAQ,UAC/B,EAAO,EAAQ,UAAY,IAE3B,EAAS,EAAQ,OACrB,AAAI,GAAU,MAAQ,EAAQ,UACzB,GAAQ,UAAY,UAAY,EAAQ,UAAY,SAEvD,GAAS,IAGX,GAAI,GAAO,EAAQ,KACnB,AAAI,GAAQ,MACV,GAAO,IAGT,GAAI,GAAM,EAAQ,KAAO,KAAK,MAC1B,EAAc,EAAQ,SAAW,GACjC,EAAW,CAAC,CAAC,EAAQ,SACrB,EAAQ,KAAK,MAEjB,WAAwB,EAAG,CAOzB,GAAI,EAAE,UACJ,GAAI,EAAE,QAAU,EACd,MAAO,WAGL,CAAC,GAAY,EAAM,EAAE,OAAQ,IAC/B,MAAO,GAiBX,MAZI,CAAC,GAAY,CAAC,GAAU,EAAM,EAAE,OAMhC,EAAE,QAAU,CAAC,GAMb,EAAE,UAAY,CAAC,EACV,GAKL,GAAe,EAAE,cAAgB,EACnC,GAAM,aAAa,EAAE,OAAQ,EAAE,KAAM,EAAE,IAAK,UAAU,IAC/C,IAGF,GAGT,EAAM,YAAY,EAAM,EAAW,KAAO,EAAM,SAAS,EAAI,EAAS,CACpE,GAAI,EACF,MAAO,GAAG,GAGZ,EAAU,EAAQ,OAAO,GAGrB,EAAQ,OAAS,IACnB,GAAU,EAAQ,KAAK,KAIzB,GAAI,GAAM,GAAI,MACd,EAAQ,QAAQ,SAAS,EAAG,CAC1B,EAAE,aAAe,IAInB,EAAG,KAAK,MAIZ,GAAY,KAAK,mBACjB,GAAU,UAAU,gBAAkB,UAAsB,CAC1D,GAAI,GAAO,MAAM,UAAU,MAAM,KAAK,UAAU,GAC5C,EAAK,EAAK,MACV,EAAO,SAAS,EAAI,EAAS,CAC/B,AAAI,EACF,EAAG,GAEH,EAAG,KAAM,EACN,KAAK,IACL,IAAI,SAAS,EAAE,CACd,MAAO,GAAE,iBAEV,KAAK,QAGZ,EAAK,KAAK,GACV,KAAK,WAAW,MAAM,KAAK,IAG7B,GAAY,KAAK,uBACjB,GAAU,UAAU,oBAAsB,UAAsB,CAC9D,GAAI,GAAO,MAAM,UAAU,MAAM,KAAK,UAAU,GAC5C,EAAK,EAAK,MACV,EAAO,SAAS,EAAI,EAAS,CAC/B,AAAI,EACF,EAAG,GAEH,EAAG,KAAM,EAAQ,IAAI,SAAS,EAAE,CAC9B,MAAO,GAAE,eAIf,EAAK,KAAK,GACV,KAAK,WAAW,MAAM,KAAK,IAG7B,GAAY,KAAK,aACjB,GAAU,UAAU,UAAY,SAAS,EAAI,CAC3C,GAAI,GAAO,KAAK,MAAM,YAAY,KAClC,AAAI,IAAS,UACX,GAAO,MAIT,GAAI,GAAa,CAIf,QAAS,gBAAgB,GAGzB,UAAW,EAGX,qBAAsB,CAAC,CAAC,KAAK,qBAG7B,QAAS,IAGX,GAAI,CAAE,MAAK,MAAM,eACX,MAAO,MAAK,MAAM,eAAkB,YAExC,MAAO,GAAG,GAAI,OAAM,kEAGtB,KAAK,MAAM,cAAc,SAAS,EAAI,EAAS,CAC7C,MAAI,GACK,EAAG,GAGZ,GAAW,QAAU,EAAQ,IAAI,SAAS,EAAQ,CAEhD,SAAU,YAAkB,IAAU,EAAO,SAAW,EAGxD,MAAO,GAAO,cAEP,IAGF,EAAG,KAAM,OAKpB,GAAU,UAAU,OAAS,UAAW,CACtC,MAAO,MAAK,iBAId,GAAY,KAAK,kBACjB,GAAU,UAAU,eAAiB,SAAS,EAAY,EAAI,CAC5D,GAAI,GAAM,KACN,EAAU,EAAW,QACzB,GAAI,CAAC,GAAW,CAAC,MAAM,QAAQ,GAC7B,MAAO,GAAG,GAAI,OAAM,wCAEtB,EAAU,EAAQ,QAElB,WAAiB,EAAK,CACpB,GAAI,EACF,MAAO,GAAG,GAGZ,GAAI,CAAC,EAAQ,OACX,MAAO,GAAG,EAAK,GAGjB,GAAI,GACJ,GAAI,CACF,EAAS,GAAS,EAAQ,eACnB,EAAP,CACA,MAAO,GAAG,GAGZ,GAAI,IAAW,KACb,MAAO,GAAQ,MAGjB,EAAI,MAAM,UAAU,EAAQ,GAG9B,KAGF,GAAU,YAAc,SAAS,EAAU,EAAO,EAAI,CACpD,AAAI,UAAU,SAAW,GAEvB,GAAK,EACL,EAAQ,MAGV,GAAI,GACJ,GAAI,MAAO,IAAa,UAEtB,GADA,EAAa,GAAU,GACnB,YAAsB,OACxB,MAAO,GAAG,OAGZ,GAAa,EAGf,GAAI,GAAM,GAAI,IAAU,EAAO,EAAW,sBAC1C,EAAI,eAAe,EAAY,SAAS,EAAK,CAC3C,GAAI,EACF,MAAO,GAAG,GAEZ,EAAG,KAAM,MAIb,GAAU,gBAAkB,SAAS,EAAU,EAAO,CACpD,GAAI,GAAa,MAAO,IAAa,SACnC,KAAK,MAAM,GAAY,EACrB,EAAM,GAAI,IAAU,EAAO,EAAW,sBAG1C,GAAI,CAAC,EAAI,MAAM,YACb,KAAM,IAAI,OAAM,8DAGlB,SAAI,mBAAmB,GAChB,GAET,GAAU,SAAW,GAAU,gBAE/B,GAAU,UAAU,MAAQ,SAAS,EAAU,EAAI,CACjD,AAAI,UAAU,SAAW,GACvB,GAAK,EACL,EAAW,MAGb,KAAK,UAAU,SAAS,EAAI,EAAY,CACtC,GAAI,EACF,MAAO,GAAG,GAEZ,GAAU,YAAY,EAAY,EAAU,MAIhD,GAAY,KAAK,oBACjB,GAAU,UAAU,iBAAmB,SAAS,EAAI,CAClD,GAAI,GAAQ,KAAK,MAKjB,GAAI,EAAM,2BAA4B,WAClC,EAAM,mBAAqB,GAAM,UAAU,iBAE7C,MAAO,GAAM,iBAAiB,GAGhC,EAAM,cAAc,SAAS,EAAK,EAAS,CACzC,GAAI,EACF,MAAO,GAAG,GAGZ,GAAI,EAAQ,SAAW,EACrB,MAAO,GAAG,MAGZ,GAAI,GAAiB,EACjB,EAAe,GAEnB,WAAwB,EAAW,CAOjC,GANI,GACF,EAAa,KAAK,GAGpB,IAEI,IAAmB,EAAQ,OAC7B,MAAO,GAAG,EAAa,OAAS,EAAa,GAAK,MAItD,EAAQ,QAAQ,SAAS,EAAQ,CAC/B,EAAM,aAAa,EAAO,OAAQ,EAAO,KAAM,EAAO,IAAK,QAKjE,GAAU,UAAU,WAAa,GAAS,SAC1C,GAAU,UAAU,UAAY,SAAS,EAAU,CACjD,GAAI,CAAC,EAAS,YACZ,KAAM,IAAI,OAAM,gFAElB,MAAO,MAAK,WAAW,IAIzB,YAAkB,EAAQ,CACxB,MAAO,WAAW,CAChB,GAAI,CAAC,KAAK,MAAM,YACd,KAAM,IAAI,OAAM,8DAGlB,GAAI,GAAO,MAAM,UAAU,MAAM,KAAK,WAClC,EAAS,EAOb,GANA,EAAK,KAAK,SAAgB,EAAK,EAAQ,CACrC,EAAU,EACV,EAAa,IAEf,KAAK,GAAQ,MAAM,KAAM,GAErB,EACF,KAAM,GAER,MAAO,IAKX,GAAY,QAAQ,SAAS,EAAQ,CACnC,GAAU,UAAU,EAAO,QAAU,GAAS,KAGhD,GAAQ,QAAU,GAClB,GAAQ,UAAY,GACpB,GAAQ,OAAS,GACjB,GAAQ,MAAQ,GAChB,GAAQ,kBAAoB,GAC5B,GAAQ,UAAY,GACpB,GAAQ,WAAa,GACrB,GAAQ,MAAQ,GAChB,GAAQ,SAAW,GACnB,GAAQ,YAAc,GACtB,GAAQ,YAAc,GACtB,GAAQ,UAAY,GACpB,GAAQ,gBAAkB,GAAU,gBACpC,GAAQ,cAAgB,GACxB,GAAQ,cAAgB,KAA2B,cACnD,GAAQ,YAAc,GACtB,GAAQ,gBAAkB,KCz8C1B,2BAEA,GAAI,IAAQ,KAER,GAAS,GAAM,OACf,GAAY,GAAM,UAEtB,GAAQ,MAAQ,SAAU,EAAK,CAI7B,GAHI,GAAO,EAAI,KACb,GAAM,EAAI,KAER,MAAO,IAAQ,SACjB,KAAM,IAAI,OAAM,oDAElB,MAAO,IAAO,MAAM,EAAK,CAAC,MAAO,MAInC,YAAqB,EAAO,CAC1B,GAAI,GAAO,KACX,EAAK,KAAO,GAAI,IAAU,EAAO,CAAC,UAAW,KAE/C,GAAW,UAAU,UAAY,SAAU,EAAa,EAAK,EAAS,CACpE,GAAI,GAAO,KACX,MAAO,GAAK,KAAK,cAAc,EAAa,EAAK,GAAW,KAE9D,GAAW,UAAU,gBAAkB,SAAU,EAAK,CACpD,GAAI,GAAO,KACX,MAAO,GAAK,KAAK,oBAAoB,IAEvC,GAAW,UAAU,WAAa,SAAU,EAAK,CAC/C,GAAI,GAAO,KACX,MAAO,GAAK,KAAK,eAAe,IAGlC,GAAQ,IAAM,SAAU,EAAO,CAC7B,MAAO,IAAI,IAAW,MCpCxB,sBAAU,GAAO,QAAU,GAC3B,GAAQ,aAAe,GAEvB,YAAmB,EAAK,EAAU,EAAQ,EAAe,CACvD,MAAO,MAAK,UAAU,EAAK,GAAW,EAAU,GAAgB,GAGlE,YAAoB,EAAU,EAAe,CAC3C,GAAI,GAAQ,GAAI,EAAO,GAEvB,MAAI,IAAiB,MAAM,GAAgB,SAAS,EAAK,EAAO,CAC9D,MAAI,GAAM,KAAO,EAAc,eACxB,eAAiB,EAAK,MAAM,EAAG,EAAM,QAAQ,IAAQ,KAAK,KAAO,MAGnE,SAAS,EAAK,EAAO,CAC1B,GAAI,EAAM,OAAS,EAAG,CACpB,GAAI,GAAU,EAAM,QAAQ,MAC5B,CAAC,EAAU,EAAM,OAAO,EAAU,GAAK,EAAM,KAAK,MAClD,CAAC,EAAU,EAAK,OAAO,EAAS,IAAU,GAAO,EAAK,KAAK,GACvD,CAAC,EAAM,QAAQ,IAAQ,GAAQ,EAAc,KAAK,KAAM,EAAK,QAE9D,GAAM,KAAK,GAEhB,MAAO,IAAY,KAAO,EAAQ,EAAS,KAAK,KAAM,EAAK,OCxB/D,mBAEA,GAAI,IAAS,QAAQ,UACjB,GAAS,GAAO,OAGpB,YAAoB,EAAK,EAAK,CAC5B,OAAS,KAAO,GACd,EAAI,GAAO,EAAI,GAGnB,AAAI,GAAO,MAAQ,GAAO,OAAS,GAAO,aAAe,GAAO,gBAC9D,GAAO,QAAU,GAGjB,IAAU,GAAQ,IAClB,GAAQ,OAAS,IAGnB,YAAqB,EAAK,EAAkB,EAAQ,CAClD,MAAO,IAAO,EAAK,EAAkB,GAGvC,GAAW,UAAY,OAAO,OAAO,GAAO,WAG5C,GAAU,GAAQ,IAElB,GAAW,KAAO,SAAU,EAAK,EAAkB,EAAQ,CACzD,GAAI,MAAO,IAAQ,SACjB,KAAM,IAAI,WAAU,iCAEtB,MAAO,IAAO,EAAK,EAAkB,IAGvC,GAAW,MAAQ,SAAU,EAAM,EAAM,EAAU,CACjD,GAAI,MAAO,IAAS,SAClB,KAAM,IAAI,WAAU,6BAEtB,GAAI,GAAM,GAAO,GACjB,MAAI,KAAS,OACX,AAAI,MAAO,IAAa,SACtB,EAAI,KAAK,EAAM,GAEf,EAAI,KAAK,GAGX,EAAI,KAAK,GAEJ,GAGT,GAAW,YAAc,SAAU,EAAM,CACvC,GAAI,MAAO,IAAS,SAClB,KAAM,IAAI,WAAU,6BAEtB,MAAO,IAAO,IAGhB,GAAW,gBAAkB,SAAU,EAAM,CAC3C,GAAI,MAAO,IAAS,SAClB,KAAM,IAAI,WAAU,6BAEtB,MAAO,IAAO,WAAW,MC/D3B,2BAEA,GAAI,IAAoB,KACpB,GAAS,QAAQ,UACjB,GAAS,KAAuB,OAEhC,GAAQ,MAAO,eAAiB,YAChC,QAAQ,SACR,aAEJ,YAAgC,EAAQ,CACtC,MACE,GAAO,MACP,EAAO,mBACN,EAAO,MAAQ,MAAO,GAAO,MAAS,WACvC,EAAO,UAIX,YAAwB,EAAK,EAAU,CACrC,GAAI,GACJ,GAAI,CACF,EAAM,KAAK,UAAU,EAAK,QAC1B,CACA,EAAM,GAAkB,EAAK,GAE/B,MAAO,GAGT,YAAc,EAAK,CACjB,MAAO,IAAO,WAAW,OAAO,OAAO,GAAK,OAAO,OAGrD,YAAuB,EAAI,CACzB,MAAO,GAAG,UAAY,EAAG,MAAQ,EAAG,KAGtC,YAAmB,EAAK,CACtB,MAAO,IAAO,KAAK,GAAO,GAAI,QAAQ,SAAS,UAGjD,YAAe,EAAK,CAClB,GAAI,GAAI,GACR,cAAO,KAAK,GAAK,QAAQ,SAAU,EAAG,CACpC,EAAE,GAAK,EAAI,KAEN,EAGT,aAAoB,CAClB,GAAI,GAAU,QAAQ,QAAQ,QAAQ,IAAK,IAAI,MAAM,KACrD,MAAO,CACL,MAAO,SAAS,EAAQ,GAAI,IAC5B,MAAO,SAAS,EAAQ,GAAI,IAC5B,MAAO,SAAS,EAAQ,GAAI,KAIhC,GAAQ,sBAAwB,GAChC,GAAQ,cAAgB,GACxB,GAAQ,IAAM,GACd,GAAQ,aAAe,GACvB,GAAQ,SAAW,GACnB,GAAQ,KAAO,GACf,GAAQ,QAAU,GAClB,GAAQ,MAAQ,KCjEhB,mBACA,AAoBA,GAAI,IAAS,QAAQ,UACjB,GAAQ,QAAQ,OAAO,MAOvB,GACF,CAAE,MACA,WACA,UACA,eACA,aACA,SACA,iBACA,UACA,WACA,UACA,YACA,aACA,WACA,WAYJ,YAAwB,EAAS,CAC/B,MAAO,OAAS,EAAQ,IAAM,IAAM,GAAK,GAG3C,GAAO,QAAU,GACjB,GAAO,QAAQ,cAAgB,GAU/B,YAAmB,EAAS,CAC1B,MAAO,IAAO,WAAW,OAAQ,EAAQ,QAAQ,OAAO,EAAQ,SAAS,OAAO,UAGlF,GAAO,QAAQ,SAAW,GAU1B,YAAe,EAAS,CACtB,SAAQ,QAAU,GAAa,GACxB,GAAS,GAElB,GAAO,QAAQ,KAAO,GAYtB,YAAoB,EAAS,CAC3B,SAAQ,QAAU,GAAkB,GAC7B,GAAS,GAElB,GAAO,QAAQ,UAAW,GAmB1B,YAAuB,EAAS,CAC9B,GAAI,GAAU,EAAQ,eAAiB,GACvC,AAAI,GAAS,IAAW;AAAA,GACxB,GAAI,GACF,CAAE,EAAQ,KACR,EAAQ,IACR,EAAQ,YACR,EAAQ,KAAO,EAAQ,KAAK,cAAgB,GAC5C,EAAU,EAAQ,UAEtB,MAAO,GAAE,KAAK;AAAA,GAEhB,GAAO,QAAQ,aAAe,GAgB9B,YAA4B,EAAQ,CAClC,MAAO;AAAA;AAAA;AAAA,EAAc,EAAQ,KAAO;AAAA,EAAO,EAAQ,SAErD,GAAO,QAAQ,kBAAoB,GAgBnC,YAA8B,EAAS,CAIrC,OAHI,GAAM,GACN,EAAS,OAAO,KAAK,GAEhB,EAAI,EAAG,EAAM,EAAO,OAAQ,EAAI,EAAK,EAAE,EAAG,CACjD,GAAI,GAAQ,EAAO,GACf,EAAM,EAAQ,GACd,EAAQ,EAAM,cAElB,AAAI,AAAM,EAAM,QAAQ,WAApB,GACJ,EAAI,KAAK,EAAQ,IAAM,GAEzB,MAAO,GAAI,OAAO,KAAK;AAAA,GAEzB,GAAO,QAAQ,oBAAsB,GAarC,YAA+B,EAAU,CACvC,GAAI,GAAM,GAAM,EAAU,IACtB,EAAO,EAAI,SACX,EAAM,GAGV,cAAO,KAAK,EAAI,OAAO,QAAQ,SAAS,EAAI,CAC1C,GAAI,EAAC,CAAC,GAAK,QAAQ,GACnB,IAAI,GAAM,AAAM,EAAI,MAAM,IAAhB,GAAuB,GAAK,IAAM,mBAAmB,EAAI,MAAM,IACzE,EAAI,KAAK,EAAM,MAGV,EAAQ,GAAI,OAAS,IAAM,EAAI,OAAO,KAAK,KAAO,IAE3D,GAAO,QAAQ,qBAAuB,KCnNtC,sBAAO,QAAU,SAAS,EAAM,CAC9B,MAAO,IAAI,IAAS,IAGtB,YAAkB,EAAM,CACtB,KAAK,SAAW,EAAO,EACvB,KAAK,IAAM,OAAO,OAAO,MACzB,KAAK,KAAO,GAAI,IAGlB,GAAS,UAAU,IAAM,SAAS,EAAK,CACrC,GAAI,GAAO,KAAK,IAAI,GACpB,GAAI,GAAQ,KACZ,YAAK,KAAK,GACH,EAAK,KAGd,GAAS,UAAU,IAAM,SAAS,EAAK,EAAK,CAC1C,GAAI,GAAO,KAAK,IAAI,GACpB,GAAI,GAAQ,KACV,EAAK,IAAM,MACN,CAEL,GADK,KAAK,UAAU,KAAK,QACrB,CAAC,KAAK,SAAU,MAAO,GAC3B,EAAO,GAAI,IAAiB,EAAK,GACjC,KAAK,IAAI,GAAO,EAChB,KAAK,WAEP,YAAK,KAAK,GACH,IAGT,GAAS,UAAU,KAAO,SAAS,EAAM,CACvC,KAAK,KAAK,YAAY,IAGxB,GAAS,UAAU,MAAQ,UAAW,CACpC,GAAI,GAAO,KAAK,KAAK,MACrB,AAAI,GAAQ,MACV,OAAO,MAAK,IAAI,EAAK,KACrB,KAAK,aAKT,aAA4B,CAC1B,KAAK,UAAY,KACjB,KAAK,SAAW,KAGlB,GAAiB,UAAU,YAAc,SAAS,EAAM,CACtD,AAAI,KAAK,WAAa,GAEtB,MAAK,OAAO,GAEZ,AAAI,KAAK,WAAa,KACpB,MAAK,UAAY,EACjB,KAAK,SAAW,EAChB,EAAK,KAAO,KACZ,EAAK,KAAO,MAEZ,GAAK,KAAO,KACZ,EAAK,KAAO,KAAK,UACjB,EAAK,KAAK,KAAO,EACjB,KAAK,UAAY,KAIrB,GAAiB,UAAU,IAAM,UAAW,CAC1C,GAAI,GAAW,KAAK,SACpB,MAAI,IAAY,MACd,KAAK,OAAO,GAEP,GAGT,GAAiB,UAAU,OAAS,SAAS,EAAM,CACjD,AAAI,KAAK,WAAa,EACpB,KAAK,UAAY,EAAK,KACb,EAAK,MAAQ,MACtB,GAAK,KAAK,KAAO,EAAK,MAExB,AAAI,KAAK,UAAY,EACnB,KAAK,SAAW,EAAK,KACZ,EAAK,MAAQ,MACtB,GAAK,KAAK,KAAO,EAAK,OAK1B,YAA0B,EAAK,EAAK,CAClC,KAAK,IAAM,EACX,KAAK,IAAM,EACX,KAAK,KAAO,KACZ,KAAK,KAAO,QC9Fd,iBAAI,IAAO,GACP,GAAM,QAAQ,OACd,GAAc,QAAQ,eACtB,GAAS,QAAQ,UACjB,GAAM,KACN,GAAmB,GAAI,KAI3B,YAAc,EAAK,EAAQ,EAAU,CACnC,MAAO,IAAO,WAAW,SAAU,GAAK,OAAO,EAAQ,QAAQ,OAAO,GAGxE,YAAc,EAAQ,EAAU,CAC9B,MAAO,IAAO,WAAW,UAAU,OAAO,EAAQ,QAAQ,OAAO,GAInE,YAAuB,EAAkB,CACvC,MAAO,GAAiB,QAAQ,WAAY,SAAS,EAAG,CACtD,MAAO,IAAM,EAAE,WAAW,GAAG,SAAS,IAAI,gBAI9C,YAA2B,EAAK,CAC9B,MAAO,IAAc,mBAAmB,IAO1C,GAAI,IAAoB,CACtB,cAAiB,GACjB,WAAc,GACd,kBAAmB,GACnB,aAAc,GACd,OAAU,GACV,oBAAqB,GACrB,MAAS,IAKX,YAAuB,EAAS,EAAa,CAE3C,AAAI,MAAO,IAAY,UAAU,GAAU,GAAI,MAAM,IAErD,GAAI,GAAU,EAAQ,QAAW,EAAQ,SAAW,GAChD,EAAa,EAAC,KAAK,SAAW,CAAC,KAAK,SAAW,KAAK,UAAU,EAAQ,UAAY,EAAQ,MAAQ,EAAQ,MAAQ,EAAQ,MAE9H,KAAK,QAAU,EACf,KAAK,YAAc,GAAe,KAAK,qBAEvC,KAAK,QAAU,EAAQ,SAAW,EAAU,IAAM,GAClD,KAAK,OAAS,EAAQ,QAAU,EAAU,IAAM,YAG5C,KAAK,UAAY,SAAS,MAAK,QAAU,OAEzC,CAAC,EAAQ,QAAU,EAAQ,MAC7B,GAAQ,OAAS,QAEf,CAAC,EAAQ,MAAQ,CAAC,EAAQ,MAC5B,GAAQ,KAAO,EAAQ,UAAY,EAAQ,MAAQ,KAAK,aAGpD,EAAQ,MACV,GAAQ,MAAQ,IAAM,EAAQ,OAE9B,CAAC,EAAQ,UAAY,CAAC,EAAQ,MAChC,GAAQ,SAAW,EAAQ,MAAQ,EAAQ,MAE7C,KAAK,gBAAkB,KAAK,UAAY,cAAgB,EAAQ,SAAW,MAG7E,GAAc,UAAU,UAAY,SAAS,EAAM,CACjD,GAAI,GAAS,IAAQ,IAAI,MAAM,mDAC3B,EAAa,IAAS,IAAI,MAAM,EAAG,GAQvC,GAHI,EAAU,KAAO,MACnB,GAAY,EAAU,WAEpB,EAAU,IAAM,KAClB,EAAU,GAAK,KACf,EAAU,GAAK,gBAEf,QAAS,GAAI,EAAG,EAAI,EAAG,IACrB,GAAI,OAAO,KAAK,EAAU,IAAK,CAC7B,EAAU,GAAK,EAAU,GAAG,MAAM,GAClC,EAAU,GAAK,KACf,MAKN,MAAO,IAIT,GAAc,UAAU,eAAiB,UAAW,CAElD,MAAI,CAAC,KAAM,OAAO,QAAQ,KAAK,UAAY,GAAK,KAAK,SAAW,YAAoB,GAE7E,CAAC,aAAc,KAAM,UAAW,MAAO,eAAgB,OAC3D,QAAQ,KAAK,UAAY,GAG9B,GAAc,UAAU,WAAa,UAAW,CAC9C,GAAI,GAAS,KAAK,iBAAmB,GAAK,IAAM,KAAK,OACjD,EAAY,KAAK,UAAY,MAAQ,QAAU,KAAK,QACxD,MAAO,GAAY,EAAS,kBAG9B,GAAc,UAAU,eAAiB,UAAW,CAClD,KAAK,YAEL,GAAI,GAAU,KAAK,QAAS,EAAU,EAAQ,QAAS,EAEvD,AAAI,EAAQ,UAEV,MAAK,WAAW,MAAQ,EAAQ,KAAK,WAAW,OAAS,GAErD,KAAK,YAAY,cACnB,GAAM,wBAA0B,KAAK,YAAY,cAE/C,KAAK,UAAY,MAAQ,CAAC,EAAM,kBAClC,GAAM,iBAAmB,OAE3B,AAAI,EAAM,cACR,KAAK,SAAW,EAAM,cAEtB,EAAM,cAAgB,KAAK,cAE7B,EAAM,mBAAqB,mBAC3B,EAAM,oBAAsB,KAAK,YAAY,YAAc,IAAM,KAAK,mBACtE,EAAM,uBAAyB,KAAK,iBAIhC,EAAC,EAAQ,oBAAsB,CAAC,KAAK,iBACnC,GAAQ,MAAQ,CAAC,EAAQ,iBAAmB,CAAC,EAAQ,iBACvD,GAAQ,gBAAkB,oDAExB,EAAQ,MAAQ,CAAC,EAAQ,mBAAqB,CAAC,EAAQ,mBACzD,GAAQ,kBAAoB,OAAO,WAAW,EAAQ,OAEpD,KAAK,YAAY,cAAgB,CAAC,EAAQ,yBAA2B,CAAC,EAAQ,yBAChF,GAAQ,wBAA0B,KAAK,YAAY,cAEjD,KAAK,UAAY,MAAQ,CAAC,EAAQ,yBAA2B,CAAC,EAAQ,yBACxE,GAAQ,wBAA0B,GAAK,KAAK,QAAQ,MAAQ,GAAI,QAElE,AAAI,EAAQ,eAAiB,EAAQ,cACnC,KAAK,SAAW,EAAQ,eAAiB,EAAQ,cAEjD,EAAQ,cAAgB,KAAK,eAGjC,MAAO,GAAQ,cACf,MAAO,GAAQ,gBAInB,GAAc,UAAU,KAAO,UAAW,CACxC,MAAK,MAAK,YAAY,KAAK,iBAE3B,AAAI,KAAK,QAAQ,UACf,KAAK,WAAW,MAAM,mBAAqB,KAAK,YAEhD,KAAK,QAAQ,QAAQ,cAAgB,KAAK,aAG5C,KAAK,QAAQ,KAAO,KAAK,aAElB,KAAK,SAGd,GAAc,UAAU,YAAc,UAAW,CAC/C,GAAI,CAAC,KAAK,SAAU,CAClB,GAAI,GAAU,KAAK,QAAQ,QACzB,EAAO,GAAI,MAAK,EAAQ,MAAQ,EAAQ,MAAQ,GAAI,OAEtD,KAAK,SAAW,EAAK,cAAc,QAAQ,iBAAkB,IAGzD,KAAK,iBAAiB,MAAK,SAAW,KAAK,SAAS,MAAM,EAAG,KAEnE,MAAO,MAAK,UAGd,GAAc,UAAU,QAAU,UAAW,CAC3C,MAAO,MAAK,cAAc,OAAO,EAAG,IAGtC,GAAc,UAAU,WAAa,UAAW,CAC9C,MAAO,CACL,+BAAiC,KAAK,YAAY,YAAc,IAAM,KAAK,mBAC3E,iBAAmB,KAAK,gBACxB,aAAe,KAAK,aACpB,KAAK,OAGT,GAAc,UAAU,UAAY,UAAW,CAC7C,GAAI,GAAO,KAAK,UACZ,EAAW,CAAC,KAAK,YAAY,gBAAiB,EAAM,KAAK,OAAQ,KAAK,SAAS,OAC/E,EAAO,EAAS,EAAU,EAAe,GAAiB,IAAI,GAClE,MAAK,IACH,GAAQ,GAAK,OAAS,KAAK,YAAY,gBAAiB,GACxD,EAAU,GAAK,EAAO,KAAK,QAC3B,EAAW,GAAK,EAAS,KAAK,SAC9B,EAAe,GAAK,EAAU,gBAC9B,GAAiB,IAAI,EAAU,IAE1B,GAAK,EAAc,KAAK,eAAgB,QAGjD,GAAc,UAAU,aAAe,UAAW,CAChD,MAAO,CACL,mBACA,KAAK,cACL,KAAK,mBACL,GAAK,KAAK,kBAAmB,QAC7B,KAAK;AAAA,IAGT,GAAc,UAAU,gBAAkB,UAAW,CACnD,AAAK,KAAK,YAAY,KAAK,iBAE3B,GAAI,GAAU,KAAK,WAAW,KAC1B,EAAQ,KAAK,WAAW,MACxB,EAAU,KAAK,QAAQ,QACvB,EAAW,GACX,EAAgB,KAAK,UAAY,KACjC,EAAa,KAAK,UAAY,MAAQ,KAAK,QAAQ,gBACnD,EAAsB,KAAK,UAAY,KACvC,EAAe,KAAK,UAAY,KAChC,EAWJ,GATA,AAAI,KAAK,UAAY,MAAQ,KAAK,QAAQ,UACxC,EAAW,mBACN,AAAI,KAAK,gBACd,EAAW,GAEX,EAAW,EAAQ,yBAA2B,EAAQ,yBACpD,GAAK,KAAK,QAAQ,MAAQ,GAAI,OAG9B,EAAO,CACT,GAAI,GAAe,OAAO,KAAK,GAAO,OAAO,SAAS,EAAK,EAAK,CAC9D,MAAK,IACL,GAAI,GAAkB,IAAQ,AAAC,MAAM,QAAQ,EAAM,KAChD,EAAe,EAAM,GAAK,GAD8B,EAAM,IAE1D,GACN,IACC,EAAqB,GACzB,OAAO,KAAK,GAAc,OAAO,QAAQ,SAAS,EAAK,CACrD,AAAK,MAAM,QAAQ,EAAa,IAG9B,EAAa,GAAK,IAAI,IAAmB,OACtC,QAAQ,SAAS,EAAK,CAAE,EAAmB,KAAK,EAAM,IAAM,KAH/D,EAAmB,KAAK,EAAM,IAAM,GAAkB,EAAa,OAMvE,EAAW,EAAmB,KAAK,KAErC,MAAI,KAAY,KACV,IAAe,GAAU,EAAQ,QAAQ,UAAW,MACxD,EAAU,EAAQ,MAAM,KAAK,OAAO,SAAS,EAAM,EAAO,CACxD,MAAI,IAAiB,IAAU,KAC7B,EAAK,MACI,EAAC,GAAiB,IAAU,MACjC,IAAY,GAAQ,mBAAmB,EAAM,QAAQ,MAAO,OAChE,EAAK,KAAK,GAAkB,KAEvB,GACN,IAAI,KAAK,KACR,EAAQ,KAAO,KAAK,GAAU,IAAM,GACpC,GAAqB,GAAU,EAAQ,QAAQ,OAAQ,OAGtD,CACL,KAAK,QAAQ,QAAU,MACvB,EACA,EACA,KAAK,mBAAqB;AAAA,EAC1B,KAAK,gBACL,GACA,KAAK;AAAA,IAGT,GAAc,UAAU,iBAAmB,UAAW,CACpD,GAAI,GAAU,KAAK,QAAQ,QAC3B,WAAiB,EAAQ,CACvB,MAAO,GAAO,WAAW,OAAO,QAAQ,OAAQ,KAElD,MAAO,QAAO,KAAK,GAChB,OAAO,SAAS,EAAK,CAAE,MAAO,IAAkB,EAAI,gBAAkB,OACtE,KAAK,SAAS,EAAG,EAAG,CAAE,MAAO,GAAE,cAAgB,EAAE,cAAgB,GAAK,IACtE,IAAI,SAAS,EAAK,CAAE,MAAO,GAAI,cAAgB,IAAM,EAAQ,EAAQ,MACrE,KAAK;AAAA,IAGV,GAAc,UAAU,cAAgB,UAAW,CACjD,MAAO,QAAO,KAAK,KAAK,QAAQ,SAC7B,IAAI,SAAS,EAAK,CAAE,MAAO,GAAI,gBAC/B,OAAO,SAAS,EAAK,CAAE,MAAO,IAAkB,IAAQ,OACxD,OACA,KAAK,MAGV,GAAc,UAAU,iBAAmB,UAAW,CACpD,MAAO,CACL,KAAK,UACL,KAAK,OACL,KAAK,QACL,gBACA,KAAK,MAGT,GAAc,UAAU,mBAAqB,UAAW,CACtD,GAAI,GAAM,QAAQ,IAClB,MAAO,CACL,YAAa,EAAI,mBAAqB,EAAI,eAC1C,gBAAiB,EAAI,uBAAyB,EAAI,eAClD,aAAc,EAAI,oBAItB,GAAc,UAAU,UAAY,UAAW,CAC7C,GAAI,GAAO,KAAK,QAAQ,MAAQ,IAKhC,AAAI,qCAAqC,KAAK,IAC5C,GAAO,UAAU,UAAU,KAG7B,GAAI,GAAU,EAAK,QAAQ,KACvB,EAAQ,KAEZ,AAAI,GAAW,GACb,GAAQ,GAAY,MAAM,EAAK,MAAM,EAAU,IAC/C,EAAO,EAAK,MAAM,EAAG,IAGvB,KAAK,WAAa,CAChB,KAAM,EACN,MAAO,IAIX,GAAc,UAAU,WAAa,UAAW,CAC9C,GAAI,GAAO,KAAK,WAAW,KACvB,EAAQ,KAAK,WAAW,MAE5B,MAAK,GAGD,GAAM,KAAO,MAAM,MAAO,GAAM,IAE7B,EAAO,IAAM,GAAc,GAAY,UAAU,KALrC,GAQrB,GAAK,cAAgB,GAErB,GAAK,KAAO,SAAS,EAAS,EAAa,CACzC,MAAO,IAAI,IAAc,EAAS,GAAa,UCnXjD,mBAGA,GAAI,IAAS,QAAQ,UACjB,GAAS,QAAQ,UAAU,OAC3B,GAAO,QAAQ,QAMf,GAAc,gFAKlB,YAAqB,EAAK,CACtB,MAAQ,GAAI,OAAO,GAAG,cAAgB,EAAI,MAAM,GAGpD,YAAe,EAAM,EAAU,EAAM,EAAK,EAAQ,CAC9C,KAAM,IAAI,IAAO,eAAe,CAC5B,QAAS,GAAK,OAAO,sBAAuB,EAAM,GAClD,OAAS,IAAW,OAAa,MAAQ,GAAO,EAAO,GACvD,SAAU,EACV,SAAU,GAAQ,MAClB,mBAAoB,GAAM,SAIlC,YAAmB,EAAK,CACpB,MAAQ,QAAO,UAAU,SAAS,KAAK,GAAK,MAAM,EAAG,IAGzD,aAAgB,EAOhB,GAAI,IAAQ,CACR,KAAM,CACF,MAAO,SAAU,EAAK,CAAE,MAAO,OAAQ,IAAS,YAEpD,KAAM,CACF,MAAO,SAAU,EAAK,CAAE,MAAO,OAAQ,IAAS,aAEpD,OAAQ,CACJ,MAAO,SAAU,EAAK,CAAE,MAAO,OAAQ,IAAS,WAEpD,OAAQ,CACJ,MAAO,SAAU,EAAK,CAClB,MAAO,OAAQ,IAAS,UAAY,IAAQ,OAGpD,OAAQ,CACJ,MAAO,SAAU,EAAK,CAClB,MAAO,OAAQ,IAAS,UAAY,CAAC,MAAM,KAGnD,OAAQ,CACJ,MAAO,SAAU,EAAK,CAClB,MAAO,OAAQ,IAAS,UAAY,CAAC,MAAM,IAAQ,SAAS,KAGpE,OAAQ,CACJ,MAAO,SAAU,EAAK,CAAE,MAAO,QAAO,SAAS,IAC/C,SAAU,mBAEd,MAAO,CACH,MAAO,SAAU,EAAK,CAAE,MAAO,OAAM,QAAQ,IAC7C,SAAU,iBAEd,OAAQ,CACJ,MAAO,SAAU,EAAK,CAAE,MAAO,aAAe,KAC9C,SAAU,aACV,OAAQ,IAEZ,KAAM,CACF,MAAO,SAAU,EAAK,CAAE,MAAO,aAAe,OAC9C,SAAU,aACV,OAAQ,IAEZ,OAAQ,CACJ,MAAO,SAAU,EAAK,CAAE,MAAO,aAAe,SAC9C,SAAU,aACV,OAAQ,IAEZ,KAAM,CACF,MAAO,SAAU,EAAK,CAClB,MAAO,OAAQ,IAAS,UAAY,GAAY,KAAK,IAEzD,SAAU,WAIlB,YAAqB,EAAQ,CACzB,GAAI,GAAO,OAAO,KAAK,IACnB,EAGJ,MAAI,SAAQ,IAAI,YACZ,EAAM,GAEN,EAAM,SAAU,EAAK,EAAK,CACtB,AAAK,GACD,GAAM,EAAK,OAAQ,IAM/B,EAAK,QAAQ,SAAU,EAAG,CACtB,GAAI,EAAQ,CACR,EAAI,GAAK,GACT,OAEJ,GAAI,GAAO,GAAM,GACjB,EAAI,GAAK,SAAU,EAAK,EAAK,CACzB,AAAK,EAAK,MAAM,IACZ,GAAM,EAAK,EAAG,EAAK,SAAU,EAAK,EAAK,WAMnD,EAAK,QAAQ,SAAU,EAAG,CACtB,GAAI,GAAO,WAAa,GAAY,GACpC,GAAI,EAAQ,CACR,EAAI,GAAQ,GACZ,OAEJ,GAAI,GAAO,GAAM,GACjB,EAAI,GAAQ,SAAU,EAAK,EAAK,CAC5B,AAAI,AAAqB,GAAQ,MAG5B,GAAK,MAAM,IACZ,GAAM,EAAK,EAAG,EAAK,SAAU,EAAK,EAAK,YAMnD,EAAK,QAAQ,SAAU,EAAG,CACtB,GAAI,GAAO,UAAY,GAAY,GACnC,GAAI,EAAQ,CACR,EAAI,GAAQ,GACZ,OAEJ,GAAI,GAAO,GAAM,GACb,EAAW,IAAM,EAAI,IACzB,EAAI,GAAQ,SAAU,EAAK,EAAK,CAC5B,AAAK,MAAM,QAAQ,IACf,GAAM,EAAK,EAAU,EAAK,SAAU,EAAK,EAAK,QAElD,GAAI,GACJ,IAAK,EAAI,EAAG,EAAI,EAAI,OAAQ,IACxB,AAAK,EAAK,MAAM,EAAI,KAChB,GAAM,EAAK,EAAU,EAAK,SAAU,EAAK,EAAK,WAO9D,EAAK,QAAQ,SAAU,EAAG,CACtB,GAAI,GAAO,kBAAoB,GAAY,GAC3C,GAAI,EAAQ,CACR,EAAI,GAAQ,GACZ,OAEJ,GAAI,GAAO,GAAM,GACb,EAAW,IAAM,EAAI,IACzB,EAAI,GAAQ,SAAU,EAAK,EAAK,CAC5B,GAAI,AAAqB,GAAQ,KAGjC,CAAK,MAAM,QAAQ,IACf,GAAM,EAAK,EAAU,EAAK,SAAU,EAAK,EAAK,QAElD,GAAI,GACJ,IAAK,EAAI,EAAG,EAAI,EAAI,OAAQ,IACxB,AAAK,EAAK,MAAM,EAAI,KAChB,GAAM,EAAK,EAAU,EAAK,SAAU,EAAK,EAAK,YAO9D,OAAO,KAAK,IAAQ,QAAQ,SAAU,EAAG,CACrC,GAAI,IAAM,iBAAkB,CACxB,EAAI,GAAK,GAAO,GAChB,OAEJ,GAAI,EAAQ,CACR,EAAI,GAAK,GACT,OAEJ,EAAI,GAAK,GAAO,KAIpB,EAAI,YAAc,GAEX,EAGX,GAAO,QAAU,GAAY,QAAQ,IAAI,eClNzC,mBAEA,aAEA,GAAI,IAAS,QAAQ,UACjB,GAAS,GAAO,OAEhB,GAAQ,GAER,GAEJ,IAAK,KAAO,IACV,AAAI,CAAC,GAAO,eAAe,KACvB,KAAQ,cAAgB,KAAQ,UACpC,IAAM,IAAO,GAAO,KAGtB,GAAI,IAAQ,GAAM,OAAS,GAC3B,IAAK,KAAO,IACV,AAAI,CAAC,GAAO,eAAe,KACvB,KAAQ,eAAiB,KAAQ,mBACrC,IAAM,IAAO,GAAO,KAGtB,GAAM,OAAO,UAAY,GAAO,UAEhC,AAAI,EAAC,GAAM,MAAQ,GAAM,OAAS,WAAW,OAC3C,IAAM,KAAO,SAAU,EAAO,EAAkB,EAAQ,CACtD,GAAI,MAAO,IAAU,SACnB,KAAM,IAAI,WAAU,kEAAoE,MAAO,IAEjG,GAAI,GAAS,MAAO,GAAM,QAAW,YACnC,KAAM,IAAI,WAAU,kHAAoH,MAAO,IAEjJ,MAAO,IAAO,EAAO,EAAkB,KAI3C,AAAK,GAAM,OACT,IAAM,MAAQ,SAAU,EAAM,EAAM,EAAU,CAC5C,GAAI,MAAO,IAAS,SAClB,KAAM,IAAI,WAAU,6DAA+D,MAAO,IAE5F,GAAI,EAAO,GAAK,GAAQ,EAAK,IAAK,IAChC,KAAM,IAAI,YAAW,cAAgB,EAAO,kCAE9C,GAAI,GAAM,GAAO,GACjB,MAAI,CAAC,GAAQ,EAAK,SAAW,EAC3B,EAAI,KAAK,GACJ,AAAI,MAAO,IAAa,SAC7B,EAAI,KAAK,EAAM,GAEf,EAAI,KAAK,GAEJ,IAIX,GAAI,CAAC,GAAM,iBACT,GAAI,CACF,GAAM,iBAAmB,QAAQ,QAAQ,UAAU,sBACnD,EAMJ,AAAK,GAAM,WACT,IAAM,UAAY,CAChB,WAAY,GAAM,YAEhB,GAAM,kBACR,IAAM,UAAU,kBAAoB,GAAM,mBAI9C,GAAO,QAAU,KC5EjB,mBAEA,GAAI,IAAS,KAAwB,OAEjC,GAAU,CACb,IAAO,CACN,MAAO,CAAC,IAAK,IAAK,IAAK,KACvB,SAAU,KAEX,IAAO,CACN,MAAO,CAAC,IAAK,KACb,SAAU,KAEX,MAAS,CACR,MAAO,CAAC,QAAS,KACjB,SAAU,KAEX,QAAW,CACV,MAAO,CAAC,KACR,SAAU,MAGZ,GAAQ,WAAgB,GAAQ,QAEhC,GAAI,IAAc,CACjB,IAAO,CACN,MAAO,CAAC,IAAK,IAAK,IAAK,IAAK,MAE7B,IAAO,CACN,MAAO,CAAC,IAAK,IAAK,IAAK,OAAQ,IAAK,MAErC,MAAS,CACR,MAAO,CAAC,QAAS,IAAK,MAEvB,QAAW,CACV,MAAO,CAAC,IAAK,OAGf,GAAY,WAAgB,GAAY,QAExC,GAAI,IAAW,CACd,IAAO,GACP,KAAQ,GACR,OAAU,GACV,OAAU,GACV,OAAU,IAOP,GAAS,CACZ,SAAY,CACX,KAAM,IACN,SAAU,sBACV,EAAG,GAAO,KAAM,2EAGZ,QAAQ,KAAM,IAAK,OACvB,EAAG,GAAO,KAAM,2EAGZ,QAAQ,KAAM,IAAK,OACvB,EAAG,GAAO,KACN,yEAEA,QAAQ,KAAM,IAAK,OACvB,EAAG,GAAO,KAAM,gDAGZ,QAAQ,KAAM,IAAK,OACvB,EAAG,GAAO,KAAM,2EAGZ,QAAQ,KAAM,IAAK,OACvB,EAAG,GAAO,KAAM,iJAKZ,QAAQ,KAAM,IAAK,QAExB,SAAY,CACX,KAAM,IACN,SAAU,eACV,EAAG,GAAO,KAAM,8GAIZ,QAAQ,KAAM,IAAK,OACvB,EAAG,GAAO,KAAM,8GAIZ,QAAQ,KAAM,IAAK,OACvB,EAAG,GAAO,KACN,4GAGA,QAAQ,KAAM,IAAK,OACvB,EAAG,GAAO,KAAM,gDAGZ,QAAQ,KAAM,IAAK,OACvB,EAAG,GAAO,KAAM,8GAIZ,QAAQ,KAAM,IAAK,OACvB,EAAG,GAAO,KAAM,uNAOZ,QAAQ,KAAM,IAAK,QAExB,SAAY,CACX,KAAM,IACN,SAAU,eACV,EAAG,GAAO,KACN,mJAIQ,QAAQ,KAAM,IAAK,OAC/B,EAAG,GAAO,KAAM,mJAKZ,QAAQ,KAAM,IAAK,OACvB,EAAG,GAAO,KAAM,iJAKZ,QAAQ,KAAM,IAAK,OACvB,EAAG,GAAO,KAAM,gDAEA,QAAQ,KAAM,IAAK,OACnC,EAAG,GAAO,KAAM,mJAKZ,QAAQ,KAAM,IAAK,OACvB,EAAG,GAAO,KAAM,uSASZ,QAAQ,KAAM,IAAK,SAIzB,GAAO,QAAU,CAChB,KAAM,GACN,SAAU,GACV,SAAU,GACV,OAAQ,MCtKT,mBAEA,GAAI,IAAS,KACT,GAAO,QAAQ,QAEnB,YAAgC,EAAI,EAAQ,CAC3C,AAAI,MAAM,mBACT,MAAM,kBAAkB,KAAM,IAC/B,KAAK,KAAO,yBACZ,KAAK,YAAc,EACnB,KAAK,OAAS,EACd,KAAK,QAAU,uDACX,IAAO,QACV,MAAK,SAAW,kBAAoB,GACjC,IAAW,QACd,MAAK,SAAW,aAAe,GAEjC,GAAK,SAAS,GAAwB,OAEtC,YAA+B,EAAK,CACnC,AAAI,MAAM,mBACT,MAAM,kBAAkB,KAAM,IAC/B,KAAK,KAAO,wBACZ,KAAK,UAAY,EACjB,KAAK,QAAU,cAAgB,EAAM,qBAEtC,GAAK,SAAS,GAAuB,OAErC,YAAuB,EAAM,EAAQ,EAAU,CAC9C,AAAI,MAAM,mBACT,MAAM,kBAAkB,KAAM,IAC/B,KAAK,KAAO,gBACZ,KAAK,OAAS,EACd,KAAK,QAAU,EACf,KAAK,SAAW,EAChB,KAAK,QAAU,mBAAqB,EAAO,eAAiB,EACxD,gBAAkB,EAAS,QAEhC,GAAK,SAAS,GAAe,OAE7B,YAA6B,EAAM,EAAQ,EAAU,CACpD,AAAI,MAAM,mBACT,MAAM,kBAAkB,KAAM,IAC/B,KAAK,KAAO,sBACZ,KAAK,KAAO,EACZ,KAAK,OAAS,EACd,KAAK,SAAW,EAChB,KAAK,QAAU,uCAAyC,EACpD,iBAAmB,EAAS,YAAc,EAAS,QAExD,GAAK,SAAS,GAAqB,OAEnC,YAA+B,EAAM,EAAQ,EAAU,CACtD,AAAI,MAAM,mBACT,MAAM,kBAAkB,KAAM,IAC/B,KAAK,KAAO,wBACZ,KAAK,OAAS,EACd,KAAK,SAAW,EAChB,KAAK,SAAW,EAChB,KAAK,QAAU,mBAAqB,EAAO,eAAiB,EACxD,wBAA0B,EAAS,QAExC,GAAK,SAAS,GAAuB,OAErC,YAA2B,EAAM,EAAQ,CACxC,AAAI,MAAM,mBACT,MAAM,kBAAkB,KAAM,IAC/B,KAAK,KAAO,oBACZ,KAAK,OAAS,EACd,KAAK,QAAU,EACf,KAAK,QAAU,OAAS,EAAS,eAAiB,EAAO,kFAI1D,GAAK,SAAS,GAAmB,OAEjC,GAAO,QAAU,CAChB,uBAAwB,GACxB,sBAAuB,GACvB,cAAe,GACf,oBAAqB,GACrB,kBAAmB,GACnB,sBAAuB,MClFxB,mBAGA,GAAO,QAAU,CAEf,oBAAqB,SAAU,EAAK,CAClC,GAAI,GAAI,GAAI,OACZ,SAAE,KAAO,mBACT,EAAE,QAAU,GAAO,GACZ,MCTX,mBAGA,GAAO,QAAU,CACf,IAAK,EACL,QAAS,EACT,QAAS,EACT,UAAW,EACX,YAAa,EACb,KAAM,EACN,IAAK,EACL,iBAAkB,EAClB,SAAU,EACV,KAAM,EACN,YAAa,GACb,IAAK,GACL,WAAY,GACZ,YAAa,GACb,SAAU,GACV,IAAK,GACL,cAAe,GACf,gBAAiB,GACjB,UAAW,GACX,eAAgB,GAChB,UAAW,GACX,QAAS,GACT,gBAAiB,GACjB,cAAe,GACf,cAAe,GACf,cAAe,GACf,gBAAiB,GACjB,gBAAiB,GACjB,UAAW,GACX,YAAa,GACb,QAAS,OClCX,mBAEA,GAAI,IAAS,QAAQ,UACjB,GAAS,KAAwB,OAEjC,GAAO,KACP,GAAS,KAKT,GAAsB,GAAO,oBAMjC,YAAgB,EAAM,CACpB,GAAI,CAAC,GAAQ,CAAC,GAAO,SAAS,GAC5B,KAAM,IAAI,WAAU,8BAEtB,KAAK,KAAO,EACZ,KAAK,MAAQ,EAAK,OAGlB,KAAK,KAAO,EACZ,KAAK,QAAU,EAGjB,OAAO,eAAe,GAAO,UAAW,SAAU,CAChD,WAAY,GACZ,IAAK,UAAY,CAAE,MAAQ,MAAK,QAGlC,OAAO,eAAe,GAAO,UAAW,SAAU,CAChD,WAAY,GACZ,IAAK,UAAY,CAAE,MAAQ,MAAK,WAGlC,OAAO,eAAe,GAAO,UAAW,SAAU,CAChD,IAAK,UAAY,CAAE,MAAQ,MAAK,MAAQ,KAAK,WAG/C,OAAO,eAAe,GAAO,UAAW,SAAU,CAChD,IAAK,UAAY,CAAE,MAAQ,MAAK,KAAK,MAAM,KAAK,YAWlD,GAAO,UAAU,SAAW,SAAU,EAAM,CAC1C,GAAI,KAAK,MAAQ,KAAK,QAAU,EAC9B,MAAO,MAET,GAAI,GAAI,KAAK,KAAK,KAAK,SAAW,IAElC,MAAK,IACH,MAAK,SAAW,GAEX,GAIT,GAAO,UAAU,KAAO,UAAY,CAClC,MAAO,MAAK,SAAS,KAevB,GAAO,UAAU,WAAa,SAAU,EAAQ,CAI9C,GAHI,IAAW,QACb,GAAS,KAAK,SAEZ,GAAU,KAAK,MACjB,MAAO,MAET,GAAI,GAAO,KAAK,KAAK,KAAY,IACjC,GAAI,IAAS,KACX,MAAO,MAET,GAAK,GAAO,MAAU,IAAM,CAG1B,GAFA,GAAQ,IAEJ,IAAS,EACX,KAAM,IAAoB,mCAE5B,GAAI,EAAO,EACT,KAAM,IAAoB,qBAE5B,GAAI,KAAK,MAAQ,EAAS,EACxB,MAAO,MAET,KAAK,KAAO,EACZ,OAAS,GAAI,EAAG,EAAI,EAAM,IACxB,KAAK,KAAQ,MAAK,MAAQ,GAAM,MAAK,KAAK,KAAY,SAIxD,MAAK,KAAO,EAGd,MAAO,IAWT,GAAO,UAAU,aAAe,SAAU,EAAK,CAC7C,GAAI,GAAM,KAAK,OACf,GAAI,IAAQ,KACV,MAAO,MACT,GAAI,IAAQ,QAAa,IAAQ,EAC/B,KAAM,IAAoB,cAAgB,EAAI,SAAS,IAC7B,WAAa,EAAI,SAAS,KAEtD,GAAI,GAAI,KAAK,WAAW,KAAK,QAAU,GACvC,MAAI,KAAM,KACD,KAET,MAAK,QAAU,EACR,IAIT,GAAO,UAAU,QAAU,UAAY,CACrC,MAAO,MAAK,SAAS,GAAK,UAI5B,GAAO,UAAU,YAAc,UAAY,CACzC,MAAQ,MAAK,SAAS,GAAK,WAAa,GAI1C,GAAO,UAAU,gBAAkB,UAAY,CAC7C,MAAO,MAAK,SAAS,GAAK,cAI5B,GAAO,UAAU,WAAa,SAAU,EAAK,EAAQ,CACnD,AAAK,GACH,GAAM,GAAK,aAEb,GAAI,GAAI,KAAK,OACb,GAAI,IAAM,KACR,MAAO,MAET,GAAI,IAAM,EACR,KAAM,IAAoB,cAAgB,EAAI,SAAS,IAC7B,WAAa,EAAE,SAAS,KAEpD,GAAI,GAAI,KAAK,WAAW,KAAK,QAAU,GAKvC,GAHI,IAAM,MAGN,KAAK,OAAS,KAAK,MAAQ,EAC7B,MAAO,MAIT,GAFA,KAAK,QAAU,EAEX,KAAK,SAAW,EAClB,MAAO,GAAS,GAAO,MAAM,GAAK,GAEpC,GAAI,GAAM,KAAK,KAAK,MAAM,KAAK,QAAS,KAAK,QAAU,KAAK,QAC5D,YAAK,SAAW,KAAK,OAEd,EAAS,EAAM,EAAI,SAAS,SAGrC,GAAO,UAAU,QAAU,SAAU,EAAK,CACxC,AAAK,GACH,GAAM,GAAK,KAEb,GAAI,GAAI,KAAK,WAAW,EAAK,IAC7B,GAAI,IAAM,KACR,MAAO,MAKT,OAHI,GAAS,GACT,EAAQ,EAEH,EAAI,EAAG,EAAI,EAAE,OAAQ,IAAK,CACjC,GAAI,GAAO,EAAE,GAAK,IAElB,IAAU,EACV,GAAS,EAAO,IACX,GAAO,MAAU,GACpB,GAAO,KAAK,GACZ,EAAQ,GAIZ,SAAQ,EAAO,QACf,EAAO,QAAQ,EAAQ,IACvB,EAAO,QAAS,EAAQ,IAAO,GAExB,EAAO,KAAK,MAIrB,GAAO,UAAU,SAAW,SAAU,EAAK,CACzC,GAAO,GAAG,IAAQ,QAElB,GAAI,GAAI,KAAK,OAEb,GAAI,IAAM,KACR,MAAO,MAET,GAAI,IAAM,EACR,KAAM,IAAoB,cAAgB,EAAI,SAAS,IAC7B,WAAa,EAAE,SAAS,KAEpD,GAAI,GAAI,KAAK,WAAW,KAAK,QAAU,GACvC,GAAI,IAAM,KACR,MAAO,MAET,GAAI,KAAK,OAAS,EAChB,KAAM,IAAoB,qBAAuB,KAAK,QAExD,GAAI,KAAK,OAAS,KAAK,MAAQ,EAC7B,MAAO,MACT,KAAK,QAAU,EAKf,OAHI,GAAK,KAAK,KAAK,KAAK,SACpB,EAAQ,EAEH,EAAI,EAAG,EAAI,KAAK,OAAQ,IAC/B,IAAU,EACV,GAAU,KAAK,KAAK,KAAK,WAAa,IAGxC,MAAK,GAAK,MAAU,KAAQ,IAAM,GAChC,IAAU,GAAM,EAAI,GAEf,GAAS,GAOlB,GAAO,QAAU,KCrQjB,mBAEA,GAAI,IAAS,QAAQ,UACjB,GAAS,KAAwB,OACjC,GAAO,KACP,GAAS,KAKT,GAAsB,GAAO,oBAE7B,GAAe,CACjB,KAAM,KACN,aAAc,GAMhB,YAAe,EAAM,EAAI,CACvB,GAAO,GAAG,GACV,GAAO,MAAM,MAAQ,GAAO,UAC5B,GAAO,GAAG,GACV,GAAO,MAAM,MAAQ,GAAK,UAE1B,GAAI,GAAO,OAAO,oBAAoB,GACtC,SAAK,QAAQ,SAAU,EAAK,CAC1B,GAAI,GAAG,GAGP,IAAI,GAAQ,OAAO,yBAAyB,EAAM,GAClD,OAAO,eAAe,EAAI,EAAK,MAG1B,EAOT,YAAgB,EAAS,CACvB,EAAU,GAAM,GAAc,GAAW,IAEzC,KAAK,KAAO,GAAO,MAAM,EAAQ,MAAQ,MACzC,KAAK,MAAQ,KAAK,KAAK,OACvB,KAAK,QAAU,EACf,KAAK,SAAW,EAIhB,KAAK,KAAO,GAGd,OAAO,eAAe,GAAO,UAAW,SAAU,CAChD,IAAK,UAAY,CACf,GAAI,KAAK,KAAK,OACZ,KAAM,IAAoB,KAAK,KAAK,OAAS,wBAE/C,MAAQ,MAAK,KAAK,MAAM,EAAG,KAAK,YAIpC,GAAO,UAAU,UAAY,SAAU,EAAG,CACxC,GAAI,MAAQ,IAAO,SACjB,KAAM,IAAI,WAAU,6BAEtB,KAAK,QAAQ,GACb,KAAK,KAAK,KAAK,WAAa,GAI9B,GAAO,UAAU,SAAW,SAAU,EAAG,EAAK,CAC5C,GAAI,MAAQ,IAAO,SACjB,KAAM,IAAI,WAAU,6BACtB,AAAI,MAAQ,IAAS,UACnB,GAAM,GAAK,SAIb,OAFI,GAAK,EAEC,IAAI,aAAgB,GAAQ,GAAI,aAAgB,YAAc,IACjE,EAAK,GACV,IACA,IAAM,EAGR,GAAI,EAAK,EACP,KAAM,IAAoB,mCAM5B,IAJA,KAAK,QAAQ,EAAI,GACjB,KAAK,KAAK,KAAK,WAAa,EAC5B,KAAK,KAAK,KAAK,WAAa,EAErB,KAAO,GACZ,KAAK,KAAK,KAAK,WAAe,GAAI,cAAgB,GAClD,IAAM,GAMV,GAAO,UAAU,UAAY,UAAY,CACvC,KAAK,UAAU,GAAK,MACpB,KAAK,UAAU,IAIjB,GAAO,UAAU,iBAAmB,SAAU,EAAG,EAAK,CACpD,GAAI,MAAQ,IAAO,SACjB,KAAM,IAAI,WAAU,6BACtB,MAAI,OAAQ,IAAS,UACnB,GAAM,GAAK,aAEN,KAAK,SAAS,EAAG,IAI1B,GAAO,UAAU,aAAe,SAAU,EAAG,EAAK,CAChD,GAAI,MAAQ,IAAO,UACjB,KAAM,IAAI,WAAU,8BACtB,AAAI,MAAQ,IAAS,UACnB,GAAM,GAAK,SAEb,KAAK,QAAQ,GACb,KAAK,KAAK,KAAK,WAAa,EAC5B,KAAK,KAAK,KAAK,WAAa,EAC5B,KAAK,KAAK,KAAK,WAAa,EAAI,IAAO,GAIzC,GAAO,UAAU,YAAc,SAAU,EAAG,EAAK,CAC/C,GAAI,MAAQ,IAAO,SACjB,KAAM,IAAI,WAAU,mCAAqC,MAAQ,GAAK,KACxE,AAAI,MAAQ,IAAS,UACnB,GAAM,GAAK,aAEb,GAAI,GAAM,GAAO,WAAW,GAC5B,KAAK,UAAU,GACf,KAAK,YAAY,GACb,GACF,MAAK,QAAQ,GACb,KAAK,KAAK,MAAM,EAAG,KAAK,SACxB,KAAK,SAAW,IAKpB,GAAO,UAAU,YAAc,SAAU,EAAK,EAAK,CACjD,GAAI,MAAQ,IAAS,SACnB,KAAM,IAAI,WAAU,wBACtB,GAAI,CAAC,GAAO,SAAS,GACnB,KAAM,IAAI,WAAU,6BAEtB,KAAK,UAAU,GACf,KAAK,YAAY,EAAI,QACrB,KAAK,QAAQ,EAAI,QACjB,EAAI,KAAK,KAAK,KAAM,KAAK,QAAS,EAAG,EAAI,QACzC,KAAK,SAAW,EAAI,QAItB,GAAO,UAAU,iBAAmB,SAAU,EAAS,CACrD,GAAK,CAAC,YAAmB,OACvB,KAAM,IAAI,WAAU,qCAEtB,GAAI,GAAO,KACX,EAAQ,QAAQ,SAAU,EAAG,CAC3B,EAAK,YAAY,MAKrB,GAAO,UAAU,SAAW,SAAU,EAAG,EAAK,CAC5C,GAAI,MAAQ,IAAO,SACjB,KAAM,IAAI,WAAU,6BAItB,GAHI,MAAQ,IAAS,UACnB,GAAM,GAAK,KAET,CAAC,yBAAyB,KAAK,GACjC,KAAM,IAAI,OAAM,sCAElB,WAAqB,EAAO,EAAO,CACjC,AAAI,EAAQ,IACR,EAAM,KAAK,GACR,AAAI,EAAQ,MACf,GAAM,KAAM,IAAU,EAAK,KAC3B,EAAM,KAAK,EAAQ,MAChB,AAAI,EAAQ,QACjB,GAAM,KAAM,IAAU,GAAM,KAC5B,EAAM,KAAO,KAAU,EAAK,KAAQ,KACpC,EAAM,KAAK,EAAQ,MACd,AAAI,EAAQ,UACjB,GAAM,KAAM,IAAU,GAAM,KAC5B,EAAM,KAAO,KAAU,GAAM,KAAQ,KACrC,EAAM,KAAO,KAAU,EAAK,KAAQ,KACpC,EAAM,KAAK,EAAQ,MAEnB,GAAM,KAAO,KAAU,GAAM,KAAQ,KACrC,EAAM,KAAO,KAAU,GAAM,KAAQ,KACrC,EAAM,KAAO,KAAU,GAAM,KAAQ,KACrC,EAAM,KAAO,KAAU,EAAK,KAAQ,KACpC,EAAM,KAAK,EAAQ,MAIvB,GAAI,GAAM,EAAE,MAAM,KACd,EAAQ,GACZ,EAAM,KAAK,SAAS,EAAI,GAAI,IAAM,GAAK,SAAS,EAAI,GAAI,KACxD,EAAI,MAAM,GAAG,QAAQ,SAAU,EAAG,CAChC,EAAY,EAAO,SAAS,EAAG,OAGjC,GAAI,GAAO,KACX,KAAK,QAAQ,EAAI,EAAM,QACvB,KAAK,UAAU,GACf,KAAK,YAAY,EAAM,QACvB,EAAM,QAAQ,SAAU,EAAG,CACzB,EAAK,UAAU,MAKnB,GAAO,UAAU,YAAc,SAAU,EAAK,CAC5C,GAAI,MAAQ,IAAS,SACnB,KAAM,IAAI,WAAU,6BAItB,GAFA,KAAK,QAAQ,GAET,GAAO,IACT,KAAK,KAAK,KAAK,WAAa,UACnB,GAAO,IAChB,KAAK,KAAK,KAAK,WAAa,IAC5B,KAAK,KAAK,KAAK,WAAa,UACnB,GAAO,MAChB,KAAK,KAAK,KAAK,WAAa,IAC5B,KAAK,KAAK,KAAK,WAAa,GAAO,EACnC,KAAK,KAAK,KAAK,WAAa,UACnB,GAAO,SAChB,KAAK,KAAK,KAAK,WAAa,IAC5B,KAAK,KAAK,KAAK,WAAa,GAAO,GACnC,KAAK,KAAK,KAAK,WAAa,GAAO,EACnC,KAAK,KAAK,KAAK,WAAa,MAE5B,MAAM,IAAoB,gCAI9B,GAAO,UAAU,cAAgB,SAAU,EAAK,CAC9C,AAAI,MAAQ,IAAS,UACnB,GAAM,GAAK,SAAW,GAAK,aAE7B,KAAK,UAAU,GACf,KAAK,KAAK,KAAK,KAAK,SACpB,KAAK,QAAQ,GACb,KAAK,SAAW,GAIlB,GAAO,UAAU,YAAc,UAAY,CACzC,GAAI,GAAM,KAAK,KAAK,MAChB,EAAQ,EAAM,EACd,EAAM,KAAK,QAAU,EAEzB,GAAI,GAAO,IACT,KAAK,OAAO,EAAO,EAAK,IACxB,KAAK,KAAK,GAAO,UACR,GAAO,IAChB,KAAK,OAAO,EAAO,EAAK,IACxB,KAAK,KAAK,GAAO,IACjB,KAAK,KAAK,EAAM,GAAK,UACZ,GAAO,MAChB,KAAK,KAAK,GAAO,IACjB,KAAK,KAAK,EAAM,GAAK,GAAO,EAC5B,KAAK,KAAK,EAAM,GAAK,UACZ,GAAO,SAChB,KAAK,OAAO,EAAO,EAAK,GACxB,KAAK,KAAK,GAAO,IACjB,KAAK,KAAK,EAAM,GAAK,GAAO,GAC5B,KAAK,KAAK,EAAM,GAAK,GAAO,EAC5B,KAAK,KAAK,EAAM,GAAK,MAErB,MAAM,IAAoB,sBAK9B,GAAO,UAAU,OAAS,SAAU,EAAO,EAAK,EAAO,CACrD,GAAO,GAAG,IAAU,QACpB,GAAO,GAAG,IAAQ,QAClB,GAAO,GAAG,GAEV,KAAK,KAAK,KAAK,KAAK,KAAM,EAAQ,EAAO,EAAO,EAAQ,GACxD,KAAK,SAAW,GAGlB,GAAO,UAAU,QAAU,SAAU,EAAK,CAGxC,GAFA,GAAO,GAAG,GAEN,KAAK,MAAQ,KAAK,QAAU,EAAK,CACnC,GAAI,GAAK,KAAK,MAAQ,KAAK,SAAS,aACpC,AAAI,EAAK,KAAK,QAAU,GACtB,IAAM,GAER,GAAI,GAAM,GAAO,MAAM,GAEvB,KAAK,KAAK,KAAK,EAAK,EAAG,EAAG,KAAK,SAC/B,KAAK,KAAO,EACZ,KAAK,MAAQ,IAQjB,GAAO,QAAU,KC5TjB,mBAEA,GAAI,IAAS,KACT,GAAQ,KAER,GAAS,KACT,GAAS,KAKb,GAAO,QAAU,CAEf,OAAQ,GAER,OAAQ,IAIV,IAAS,KAAK,IACZ,AAAI,GAAM,eAAe,KACvB,IAAO,QAAQ,IAAK,GAAM,KAFrB,OAIT,IAAS,KAAK,IACZ,AAAI,GAAO,eAAe,KACxB,IAAO,QAAQ,IAAK,GAAO,KAFtB,SCvBT,mBAKA,GAAI,IAAM,KAMV,GAAO,QAAU,CAEf,IAAK,GAEL,UAAW,GAAI,OAEf,UAAW,GAAI,UCjBjB,mBAAC,WAAU,CASP,GAAI,GAGA,EAAS,gBACT,EAAS,GAAO,WAAW,SAG/B,WAAoB,EAAE,EAAE,EAAG,CACzB,AAAG,GAAK,MACN,CAAG,AAAY,MAAO,IAAnB,SAAsB,KAAK,WAAW,EAAE,EAAE,GACxC,AAAG,GAAK,MAAQ,AAAY,MAAO,IAAnB,SAAsB,KAAK,WAAW,EAAE,KACxD,KAAK,WAAW,EAAE,IAI3B,YAAe,CAAE,MAAO,IAAI,GAAW,MAUvC,WAAa,EAAE,EAAE,EAAE,EAAE,GAAE,GAAG,CACxB,KAAM,EAAE,IAAK,GAAG,CACd,GAAI,IAAI,EAAE,KAAK,KAAK,EAAE,GAAG,GACzB,GAAI,KAAK,MAAM,GAAE,UACjB,EAAE,KAAO,GAAE,SAEb,MAAO,IAKT,WAAa,EAAE,EAAE,EAAE,EAAE,GAAE,GAAG,CAExB,OADI,IAAK,EAAE,MAAQ,GAAK,GAAG,GACrB,EAAE,IAAK,GAAG,CACd,GAAI,IAAI,KAAK,GAAG,MACZ,GAAI,KAAK,MAAM,GACf,GAAI,GAAG,GAAE,GAAE,GACf,GAAI,GAAG,GAAI,KAAE,QAAS,IAAI,EAAE,GAAI,IAAE,YAClC,GAAK,MAAI,IAAK,MAAI,IAAI,GAAG,GAAG,MAAI,IAChC,EAAE,KAAO,GAAE,WAEb,MAAO,IAIT,WAAa,EAAE,EAAE,EAAE,EAAE,GAAE,GAAG,CAExB,OADI,IAAK,EAAE,MAAQ,GAAK,GAAG,GACrB,EAAE,IAAK,GAAG,CACd,GAAI,IAAI,KAAK,GAAG,MACZ,GAAI,KAAK,MAAM,GACf,GAAI,GAAG,GAAE,GAAE,GACf,GAAI,GAAG,GAAI,KAAE,QAAS,IAAI,EAAE,GAAG,GAC/B,GAAK,KAAG,IAAK,KAAG,IAAI,GAAG,GACvB,EAAE,KAAO,GAAE,UAEb,MAAO,IAET,GAAI,GAAY,MAAO,YAAc,YACrC,AAAG,GAAa,GAAS,UAAU,SAAW,8BAC5C,GAAW,UAAU,GAAK,EAC1B,EAAQ,IAEL,AAAG,GAAa,GAAS,UAAU,SAAW,WACjD,GAAW,UAAU,GAAK,EAC1B,EAAQ,IAGR,GAAW,UAAU,GAAK,EAC1B,EAAQ,IAGV,EAAW,UAAU,GAAK,EAC1B,EAAW,UAAU,GAAO,IAAG,GAAO,EACtC,EAAW,UAAU,GAAM,GAAG,EAE9B,GAAI,GAAQ,GACZ,EAAW,UAAU,GAAK,KAAK,IAAI,EAAE,GACrC,EAAW,UAAU,GAAK,EAAM,EAChC,EAAW,UAAU,GAAK,EAAE,EAAM,EAGlC,GAAI,GAAQ,uCACR,EAAQ,GAAI,OACZ,EAAG,EAEP,IADA,EAAK,IAAI,WAAW,GAChB,EAAK,EAAG,GAAM,EAAG,EAAE,EAAI,EAAM,KAAQ,EAEzC,IADA,EAAK,IAAI,WAAW,GAChB,EAAK,GAAI,EAAK,GAAI,EAAE,EAAI,EAAM,KAAQ,EAE1C,IADA,EAAK,IAAI,WAAW,GAChB,EAAK,GAAI,EAAK,GAAI,EAAE,EAAI,EAAM,KAAQ,EAE1C,WAAkB,EAAG,CAAE,MAAO,GAAM,OAAO,GAC3C,WAAe,EAAE,EAAG,CAClB,GAAI,GAAI,EAAM,EAAE,WAAW,IAC3B,MAAQ,IAAG,KAAM,GAAG,EAItB,WAAmB,EAAG,CACpB,OAAQ,GAAI,KAAK,EAAE,EAAG,GAAK,EAAG,EAAE,EAAG,EAAE,GAAK,KAAK,GAC/C,EAAE,EAAI,KAAK,EACX,EAAE,EAAI,KAAK,EAIb,WAAoB,EAAG,CACrB,KAAK,EAAI,EACT,KAAK,EAAK,EAAE,EAAG,GAAG,EAClB,AAAG,EAAI,EAAG,KAAK,GAAK,EACf,AAAG,EAAI,GAAI,KAAK,GAAK,EAAE,KAAK,GAC5B,KAAK,EAAI,EAIhB,WAAa,EAAG,CAAE,GAAI,GAAI,IAAO,SAAE,QAAQ,GAAW,EAGtD,WAAuB,EAAE,EAAG,CAC1B,GAAI,GACJ,GAAG,GAAK,GAAI,EAAI,UACR,GAAK,EAAG,EAAI,UACZ,GAAK,IAAK,EAAI,UACd,GAAK,EAAG,EAAI,UACZ,GAAK,GAAI,EAAI,UACb,GAAK,EAAG,EAAI,MACf,CAAE,KAAK,UAAU,EAAE,GAAI,OAC5B,KAAK,EAAI,EACT,KAAK,EAAI,EAET,OADI,GAAI,EAAE,OAAQ,GAAK,GAAO,GAAK,EAC7B,EAAE,GAAK,GAAG,CACd,GAAI,IAAK,GAAG,EAAG,EAAE,GAAG,IAAK,EAAM,EAAE,GACjC,GAAG,GAAI,EAAG,CACR,AAAG,EAAE,OAAO,IAAM,KAAK,IAAK,IAC5B,SAEF,GAAK,GACL,AAAG,IAAM,EACP,KAAK,KAAK,KAAO,GACd,AAAG,GAAG,EAAI,KAAK,GAClB,MAAK,KAAK,EAAE,IAAO,IAAI,IAAI,KAAK,GAAG,IAAK,IAAK,GAC7C,KAAK,KAAK,KAAQ,IAAI,KAAK,GAAG,IAG9B,KAAK,KAAK,EAAE,IAAM,IAAG,GACvB,IAAM,EACH,IAAM,KAAK,IAAI,KAAM,KAAK,IAE/B,AAAG,GAAK,GAAM,GAAE,GAAG,MAAS,GAC1B,MAAK,EAAI,GACN,GAAK,GAAG,MAAK,KAAK,EAAE,IAAQ,IAAI,KAAK,GAAG,IAAK,GAAI,KAEtD,KAAK,QACF,IAAI,EAAW,KAAK,MAAM,KAAK,MAIpC,YAAoB,CAElB,OADI,GAAI,KAAK,EAAE,KAAK,GACd,KAAK,EAAI,GAAK,KAAK,KAAK,EAAE,IAAM,GAAG,EAAE,KAAK,EAIlD,WAAoB,EAAG,CACrB,GAAG,KAAK,EAAI,EAAG,MAAO,IAAI,KAAK,SAAS,SAAS,GACjD,GAAI,GACJ,GAAG,GAAK,GAAI,EAAI,UACR,GAAK,EAAG,EAAI,UACZ,GAAK,EAAG,EAAI,UACZ,GAAK,GAAI,EAAI,UACb,GAAK,EAAG,EAAI,MACf,OAAO,MAAK,QAAQ,GACzB,GAAI,GAAM,IAAG,GAAG,EAAG,EAAG,GAAI,GAAO,GAAI,GAAI,GAAI,KAAK,EAC9C,GAAI,KAAK,GAAI,GAAE,KAAK,GAAI,EAC5B,GAAG,MAAM,EAEP,IADG,GAAI,KAAK,IAAO,GAAI,KAAK,KAAI,IAAK,GAAK,IAAI,GAAM,GAAI,EAAS,IAC3D,IAAK,GACT,AAAG,GAAI,EACL,GAAK,MAAK,IAAK,IAAG,IAAG,IAAM,EAAE,GAC7B,GAAK,KAAK,EAAE,KAAK,KAAG,KAAK,GAAG,IAG5B,GAAK,KAAK,KAAK,KAAG,GAAI,EACnB,IAAK,GAAK,KAAK,KAAK,GAAI,EAAE,KAE5B,EAAI,GAAG,IAAI,IACX,IAAG,KAAK,EAAS,IAGxB,MAAO,IAAE,GAAE,IAIb,YAAoB,CAAE,GAAI,GAAI,IAAO,SAAW,KAAK,MAAM,KAAK,GAAW,EAG3E,YAAiB,CAAE,MAAQ,MAAK,EAAE,EAAG,KAAK,SAAS,KAGnD,WAAqB,EAAG,CACtB,GAAI,GAAI,KAAK,EAAE,EAAE,EACjB,GAAG,GAAK,EAAG,MAAO,GAClB,GAAI,GAAI,KAAK,EAEb,GADA,EAAI,EAAE,EAAE,EACL,GAAK,EAAG,MAAQ,MAAK,EAAE,EAAG,CAAC,EAAE,EAChC,KAAM,EAAE,GAAK,GAAG,GAAI,GAAE,KAAK,GAAG,EAAE,KAAO,EAAG,MAAO,GACjD,MAAO,GAIT,WAAe,EAAG,CAChB,GAAI,GAAI,EAAG,EACX,MAAI,GAAE,IAAI,KAAO,GAAK,GAAI,EAAG,GAAK,IAC9B,GAAE,GAAG,IAAM,GAAK,GAAI,EAAG,GAAK,GAC5B,GAAE,GAAG,IAAM,GAAK,GAAI,EAAG,GAAK,GAC5B,GAAE,GAAG,IAAM,GAAK,GAAI,EAAG,GAAK,GAC5B,GAAE,GAAG,IAAM,GAAK,GAAI,EAAG,GAAK,GACzB,EAIT,YAAuB,CACrB,MAAG,MAAK,GAAK,EAAU,EAChB,KAAK,GAAI,MAAK,EAAE,GAAG,EAAM,KAAK,KAAK,EAAE,GAAI,KAAK,EAAE,KAAK,IAI9D,WAAsB,EAAE,EAAG,CACzB,GAAI,GACJ,IAAI,EAAI,KAAK,EAAE,EAAG,GAAK,EAAG,EAAE,EAAG,EAAE,EAAE,GAAK,KAAK,GAC7C,IAAI,EAAI,EAAE,EAAG,GAAK,EAAG,EAAE,EAAG,EAAE,GAAK,EACjC,EAAE,EAAI,KAAK,EAAE,EACb,EAAE,EAAI,KAAK,EAIb,WAAsB,EAAE,EAAG,CACzB,OAAQ,GAAI,EAAG,EAAI,KAAK,EAAG,EAAE,EAAG,EAAE,EAAE,GAAK,KAAK,GAC9C,EAAE,EAAI,KAAK,IAAI,KAAK,EAAE,EAAE,GACxB,EAAE,EAAI,KAAK,EAIb,WAAqB,EAAE,EAAG,CACxB,GAAI,GAAK,EAAE,KAAK,GACZ,EAAM,KAAK,GAAG,EACd,GAAM,IAAG,GAAK,EACd,GAAK,KAAK,MAAM,EAAE,KAAK,IAAK,GAAK,KAAK,GAAG,EAAI,KAAK,GAAI,GAC1D,IAAI,GAAI,KAAK,EAAE,EAAG,IAAK,EAAG,EAAE,GAC1B,EAAE,GAAE,GAAG,GAAM,KAAK,KAAI,EAAK,GAC3B,GAAK,MAAK,IAAG,KAAK,EAEpB,IAAI,GAAI,GAAG,EAAG,IAAK,EAAG,EAAE,GAAG,EAAE,IAAK,EAClC,EAAE,IAAM,GACR,EAAE,EAAI,KAAK,EAAE,GAAG,EAChB,EAAE,EAAI,KAAK,EACX,EAAE,QAIJ,WAAqB,EAAE,EAAG,CACxB,EAAE,EAAI,KAAK,EACX,GAAI,GAAK,KAAK,MAAM,EAAE,KAAK,IAC3B,GAAG,GAAM,KAAK,EAAG,CAAE,EAAE,EAAI,EAAG,OAC5B,GAAI,GAAK,EAAE,KAAK,GACZ,GAAM,KAAK,GAAG,EACd,GAAM,IAAG,GAAI,EACjB,EAAE,GAAK,KAAK,IAAK,EACjB,OAAQ,IAAI,EAAG,EAAG,GAAI,KAAK,EAAG,EAAE,GAC9B,EAAE,GAAE,EAAG,IAAO,MAAK,IAAG,KAAK,GAC3B,EAAE,GAAE,GAAM,KAAK,KAAI,EAErB,AAAG,EAAK,GAAG,GAAE,KAAK,EAAE,EAAG,IAAO,MAAK,EAAE,KAAK,IAC1C,EAAE,EAAI,KAAK,EAAE,EACb,EAAE,QAIJ,WAAkB,EAAE,EAAG,CAErB,OADI,GAAI,EAAG,EAAI,EAAG,GAAI,KAAK,IAAI,EAAE,EAAE,KAAK,GAClC,EAAI,IACR,GAAK,KAAK,GAAG,EAAE,GACf,EAAE,KAAO,EAAE,KAAK,GAChB,IAAM,KAAK,GAEb,GAAG,EAAE,EAAI,KAAK,EAAG,CAEf,IADA,GAAK,EAAE,EACD,EAAI,KAAK,GACb,GAAK,KAAK,GACV,EAAE,KAAO,EAAE,KAAK,GAChB,IAAM,KAAK,GAEb,GAAK,KAAK,MAEP,CAEH,IADA,GAAK,KAAK,EACJ,EAAI,EAAE,GACV,GAAK,EAAE,GACP,EAAE,KAAO,EAAE,KAAK,GAChB,IAAM,KAAK,GAEb,GAAK,EAAE,EAET,EAAE,EAAK,EAAE,EAAG,GAAG,EACf,AAAG,EAAI,GAAI,EAAE,KAAO,KAAK,GAAG,EACpB,EAAI,GAAG,GAAE,KAAO,GACxB,EAAE,EAAI,EACN,EAAE,QAKJ,YAAuB,EAAE,EAAG,CAC1B,GAAI,GAAI,KAAK,MAAO,EAAI,EAAE,MACtB,GAAI,EAAE,EAEV,IADA,EAAE,EAAI,GAAE,EAAE,EACJ,EAAE,IAAK,GAAG,EAAE,IAAK,EACvB,IAAI,GAAI,EAAG,GAAI,EAAE,EAAG,EAAE,GAAG,EAAE,GAAE,EAAE,GAAK,EAAE,GAAG,EAAE,EAAE,IAAG,EAAE,GAAE,EAAE,EAAE,GACxD,EAAE,EAAI,EACN,EAAE,QACC,KAAK,GAAK,EAAE,GAAG,EAAW,KAAK,MAAM,EAAE,GAI5C,YAAqB,EAAG,CAGtB,OAFI,GAAI,KAAK,MACT,EAAI,EAAE,EAAI,EAAE,EAAE,EACZ,EAAE,GAAK,GAAG,EAAE,GAAK,EACvB,IAAI,EAAI,EAAG,EAAI,EAAE,EAAE,EAAG,EAAE,EAAG,CACzB,GAAI,GAAI,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAC5B,AAAI,GAAE,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,KAAO,EAAE,IACrD,GAAE,EAAE,EAAE,IAAM,EAAE,GACd,EAAE,EAAE,EAAE,EAAE,GAAK,GAGjB,AAAG,EAAE,EAAI,GAAG,GAAE,EAAE,EAAE,IAAM,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,IAC5C,EAAE,EAAI,EACN,EAAE,QAKJ,YAAqB,EAAE,EAAE,EAAG,CAC1B,GAAI,GAAK,EAAE,MACX,GAAG,IAAG,GAAK,GACX,IAAI,IAAK,KAAK,MACd,GAAG,GAAG,EAAI,EAAG,EAAG,CACd,AAAG,GAAK,MAAM,EAAE,QAAQ,GACrB,GAAK,MAAM,KAAK,OAAO,GAC1B,OAEF,AAAG,GAAK,MAAM,GAAI,KAClB,GAAI,IAAI,IAAO,GAAK,KAAK,EAAG,GAAK,EAAE,EAC/B,GAAM,KAAK,GAAG,EAAM,EAAG,EAAG,EAAE,IAChC,AAAG,GAAM,EAAK,GAAG,SAAS,GAAI,IAAI,GAAG,SAAS,GAAI,IAC3C,GAAG,OAAO,IAAI,GAAG,OAAO,IAC/B,GAAI,IAAK,GAAE,EACP,GAAK,GAAE,GAAG,GACd,GAAG,IAAM,EACT,IAAI,IAAK,GAAI,IAAG,KAAK,IAAM,IAAG,EAAG,GAAE,GAAG,IAAI,KAAK,GAAG,GAC9C,GAAK,KAAK,GAAG,GAAI,GAAM,IAAG,KAAK,IAAI,GAAI,GAAI,GAAG,KAAK,GACnD,GAAI,EAAE,EAAG,GAAI,GAAE,GAAI,GAAK,GAAG,KAAM,IAAM,EAQ3C,IAPA,GAAE,UAAU,GAAE,IACX,EAAE,UAAU,KAAM,GACnB,GAAE,EAAE,KAAO,EACX,EAAE,MAAM,GAAE,IAEZ,EAAW,IAAI,UAAU,GAAG,IAC5B,GAAE,MAAM,GAAE,IACJ,GAAE,EAAI,IAAI,GAAE,GAAE,KAAO,EAC3B,KAAM,EAAE,IAAK,GAAG,CAEd,GAAI,IAAM,EAAE,EAAE,KAAI,GAAI,KAAK,GAAG,KAAK,MAAM,EAAE,IAAG,GAAI,GAAE,GAAE,GAAG,IAAG,IAC5D,GAAI,GAAE,KAAI,GAAE,GAAG,EAAE,GAAG,EAAE,GAAE,EAAE,KAAO,GAG/B,IAFA,GAAE,UAAU,GAAE,IACd,EAAE,MAAM,GAAE,GACJ,EAAE,IAAK,EAAE,IAAI,EAAE,MAAM,GAAE,GAGjC,AAAG,GAAK,MACN,GAAE,UAAU,GAAG,GACZ,IAAM,IAAI,EAAW,KAAK,MAAM,EAAE,IAEvC,EAAE,EAAI,GACN,EAAE,QACC,GAAM,GAAG,EAAE,SAAS,GAAI,GACxB,GAAK,GAAG,EAAW,KAAK,MAAM,EAAE,KAIrC,YAAe,EAAG,CAChB,GAAI,GAAI,IACR,YAAK,MAAM,SAAS,EAAE,KAAK,GACxB,KAAK,EAAI,GAAK,EAAE,UAAU,EAAW,MAAQ,GAAG,EAAE,MAAM,EAAE,GACtD,EAIT,YAAiB,EAAG,CAAE,KAAK,EAAI,EAC/B,YAAkB,EAAG,CACnB,MAAG,GAAE,EAAI,GAAK,EAAE,UAAU,KAAK,IAAM,EAAU,EAAE,IAAI,KAAK,GAC9C,EAEd,YAAiB,EAAG,CAAE,MAAO,GAC7B,YAAiB,EAAG,CAAE,EAAE,SAAS,KAAK,EAAE,KAAK,GAC7C,WAAgB,EAAE,EAAE,EAAG,CAAE,EAAE,WAAW,EAAE,GAAI,KAAK,OAAO,GACxD,YAAgB,EAAE,EAAG,CAAE,EAAE,SAAS,GAAI,KAAK,OAAO,GAElD,GAAQ,UAAU,QAAU,GAC5B,GAAQ,UAAU,OAAS,GAC3B,GAAQ,UAAU,OAAS,GAC3B,GAAQ,UAAU,MAAQ,EAC1B,GAAQ,UAAU,MAAQ,GAY1B,aAAuB,CACrB,GAAG,KAAK,EAAI,EAAG,MAAO,GACtB,GAAI,GAAI,KAAK,GACb,GAAI,GAAE,IAAM,EAAG,MAAO,GACtB,GAAI,GAAI,EAAE,EACV,SAAK,EAAG,GAAG,GAAE,IAAK,GAAI,GACtB,EAAK,EAAG,GAAG,GAAE,KAAM,GAAI,IACvB,EAAK,EAAG,GAAK,IAAE,OAAQ,EAAG,QAAU,MAGpC,EAAK,EAAG,GAAE,EAAE,EAAE,KAAK,IAAK,KAAK,GAErB,EAAE,EAAG,KAAK,GAAG,EAAE,CAAC,EAI1B,YAAoB,EAAG,CACrB,KAAK,EAAI,EACT,KAAK,GAAK,EAAE,WACZ,KAAK,IAAM,KAAK,GAAG,MACnB,KAAK,IAAM,KAAK,IAAI,GACpB,KAAK,GAAM,IAAI,EAAE,GAAG,IAAK,EACzB,KAAK,IAAM,EAAE,EAAE,EAIjB,YAAqB,EAAG,CACtB,GAAI,GAAI,IACR,SAAE,MAAM,UAAU,KAAK,EAAE,EAAE,GAC3B,EAAE,SAAS,KAAK,EAAE,KAAK,GACpB,EAAE,EAAI,GAAK,EAAE,UAAU,EAAW,MAAQ,GAAG,KAAK,EAAE,MAAM,EAAE,GACxD,EAIT,WAAoB,EAAG,CACrB,GAAI,GAAI,IACR,SAAE,OAAO,GACT,KAAK,OAAO,GACL,EAIT,YAAoB,EAAG,CACrB,KAAM,EAAE,GAAK,KAAK,KAChB,EAAE,EAAE,KAAO,EACb,OAAQ,GAAI,EAAG,EAAI,KAAK,EAAE,EAAG,EAAE,EAAG,CAEhC,GAAI,GAAI,EAAE,GAAG,MACT,EAAM,EAAE,KAAK,IAAO,IAAE,KAAK,IAAK,GAAE,IAAI,IAAI,KAAK,IAAK,KAAK,KAAK,IAAK,EAAE,GAKzE,IAHA,EAAI,EAAE,KAAK,EAAE,EACb,EAAE,IAAM,KAAK,EAAE,GAAG,EAAE,EAAG,EAAE,EAAE,EAAE,KAAK,EAAE,GAE9B,EAAE,IAAM,EAAE,IAAM,EAAE,IAAM,EAAE,GAAI,EAAE,EAAE,KAE1C,EAAE,QACF,EAAE,UAAU,KAAK,EAAE,EAAE,GAClB,EAAE,UAAU,KAAK,IAAM,GAAG,EAAE,MAAM,KAAK,EAAE,GAI9C,YAAmB,EAAE,EAAG,CAAE,EAAE,SAAS,GAAI,KAAK,OAAO,GAGrD,YAAmB,EAAE,EAAE,EAAG,CAAE,EAAE,WAAW,EAAE,GAAI,KAAK,OAAO,GAE3D,GAAW,UAAU,QAAU,GAC/B,GAAW,UAAU,OAAS,EAC9B,GAAW,UAAU,OAAS,GAC9B,GAAW,UAAU,MAAQ,GAC7B,GAAW,UAAU,MAAQ,GAG7B,aAAqB,CAAE,MAAS,MAAK,EAAE,EAAI,KAAK,GAAG,EAAG,KAAK,IAAM,EAGjE,YAAgB,EAAE,EAAG,CACnB,GAAG,EAAI,YAAc,EAAI,EAAG,MAAO,GAAW,IAC9C,GAAI,GAAI,IAAO,EAAK,IAAO,GAAI,EAAE,QAAQ,MAAO,GAAI,EAAM,GAAG,EAE7D,IADA,GAAE,OAAO,GACH,EAAE,IAAK,GAEX,GADA,EAAE,MAAM,EAAE,GACN,GAAG,GAAG,IAAM,EAAG,EAAE,MAAM,EAAG,GAAE,OAC3B,CAAE,GAAI,IAAI,EAAG,EAAI,EAAI,EAAK,GAEjC,MAAO,GAAE,OAAO,GAIlB,YAAqB,EAAE,EAAG,CACxB,GAAI,GACJ,MAAG,GAAI,KAAO,EAAE,SAAU,EAAI,GAAI,IAAQ,GAAS,EAAI,GAAI,IAAW,GAC/D,KAAK,IAAI,EAAE,GAIpB,EAAW,UAAU,OAAS,EAC9B,EAAW,UAAU,QAAU,EAC/B,EAAW,UAAU,WAAa,EAClC,EAAW,UAAU,MAAQ,EAC7B,EAAW,UAAU,UAAY,EACjC,EAAW,UAAU,UAAY,EACjC,EAAW,UAAU,SAAW,EAChC,EAAW,UAAU,SAAW,EAChC,EAAW,UAAU,MAAQ,EAC7B,EAAW,UAAU,WAAa,GAClC,EAAW,UAAU,SAAW,GAChC,EAAW,UAAU,SAAW,GAChC,EAAW,UAAU,SAAW,GAChC,EAAW,UAAU,OAAS,GAC9B,EAAW,UAAU,IAAM,GAG3B,EAAW,UAAU,SAAW,EAChC,EAAW,UAAU,OAAS,EAC9B,EAAW,UAAU,IAAM,EAC3B,EAAW,UAAU,UAAY,EACjC,EAAW,UAAU,UAAY,EACjC,EAAW,UAAU,IAAM,GAC3B,EAAW,UAAU,UAAY,GAGjC,EAAW,KAAO,EAAI,GACtB,EAAW,IAAM,EAAI,GAYrB,YAAmB,CAAE,GAAI,GAAI,IAAO,YAAK,OAAO,GAAW,EAG3D,aAAsB,CACpB,GAAG,KAAK,EAAI,EAAG,CACb,GAAG,KAAK,GAAK,EAAG,MAAO,MAAK,GAAG,KAAK,GAC/B,GAAG,KAAK,GAAK,EAAG,MAAO,OAEzB,IAAG,KAAK,GAAK,EAAG,MAAO,MAAK,GAC5B,GAAG,KAAK,GAAK,EAAG,MAAO,GAE5B,MAAS,MAAK,GAAK,IAAI,GAAG,KAAK,IAAK,IAAK,KAAK,GAAI,KAAK,GAIzD,aAAuB,CAAE,MAAQ,MAAK,GAAG,EAAG,KAAK,EAAG,KAAK,IAAI,IAAK,GAGlE,aAAwB,CAAE,MAAQ,MAAK,GAAG,EAAG,KAAK,EAAG,KAAK,IAAI,IAAK,GAGnE,YAAsB,EAAG,CAAE,MAAO,MAAK,MAAM,KAAK,IAAI,KAAK,GAAG,KAAK,IAAI,IAGvE,aAAoB,CAClB,MAAG,MAAK,EAAI,EAAU,GACd,KAAK,GAAK,GAAM,KAAK,GAAK,GAAK,KAAK,IAAM,EAAW,EACjD,EAId,YAAoB,EAAG,CAErB,GADG,GAAK,MAAM,GAAI,IACf,KAAK,UAAY,GAAK,EAAI,GAAK,EAAI,GAAI,MAAO,IACjD,GAAI,GAAK,KAAK,UAAU,GACpB,EAAI,KAAK,IAAI,EAAE,GACf,EAAI,EAAI,GAAI,GAAI,IAAO,GAAI,IAAO,GAAI,GAE1C,IADA,KAAK,SAAS,EAAE,GAAE,IACZ,GAAE,SAAW,GACjB,GAAK,GAAE,GAAE,YAAY,SAAS,GAAG,OAAO,GAAK,GAC7C,GAAE,SAAS,EAAE,GAAE,IAEjB,MAAO,IAAE,WAAW,SAAS,GAAK,GAIpC,YAAsB,EAAE,EAAG,CACzB,KAAK,QAAQ,GACV,GAAK,MAAM,GAAI,IAGlB,OAFI,GAAK,KAAK,UAAU,GACpB,EAAI,KAAK,IAAI,EAAE,GAAK,GAAK,GAAO,GAAI,EAAG,GAAI,EACvC,GAAI,EAAG,GAAI,EAAE,OAAQ,EAAE,GAAG,CAChC,GAAI,IAAI,EAAM,EAAE,IAChB,GAAG,GAAI,EAAG,CACR,AAAG,EAAE,OAAO,KAAM,KAAO,KAAK,UAAY,GAAG,IAAK,IAClD,SAEF,GAAI,EAAE,GAAE,GACL,EAAE,IAAK,GACR,MAAK,UAAU,GACf,KAAK,WAAW,GAAE,GAClB,GAAI,EACJ,GAAI,GAGR,AAAG,GAAI,GACL,MAAK,UAAU,KAAK,IAAI,EAAE,KAC1B,KAAK,WAAW,GAAE,IAEjB,IAAI,EAAW,KAAK,MAAM,KAAK,MAIpC,YAAuB,EAAE,EAAE,EAAG,CAC5B,GAAG,AAAY,MAAO,IAAnB,SAED,GAAG,EAAI,EAAG,KAAK,QAAQ,OAMrB,KAJA,KAAK,WAAW,EAAE,GACd,KAAK,QAAQ,EAAE,IACjB,KAAK,UAAU,EAAW,IAAI,UAAU,EAAE,GAAG,GAAM,MAClD,KAAK,UAAU,KAAK,WAAW,EAAE,GAC9B,CAAC,KAAK,gBAAgB,IAC1B,KAAK,WAAW,EAAE,GACf,KAAK,YAAc,GAAG,KAAK,MAAM,EAAW,IAAI,UAAU,EAAE,GAAG,UAInE,CAEH,GAAI,GAAI,GAAI,OAAS,GAAI,EAAE,EAC3B,EAAE,OAAU,IAAG,GAAG,EAClB,EAAE,UAAU,GACZ,AAAG,GAAI,EAAG,EAAE,IAAQ,IAAG,IAAG,EAAS,EAAE,GAAK,EAC1C,KAAK,WAAW,EAAE,MAKtB,aAAyB,CACvB,GAAI,GAAI,KAAK,EAAG,EAAI,GAAI,OACxB,EAAE,GAAK,KAAK,EACZ,GAAI,GAAI,KAAK,GAAI,EAAE,KAAK,GAAI,EAAG,EAAG,GAAI,EACtC,GAAG,KAAM,EAGP,IAFG,EAAI,KAAK,IAAO,GAAI,KAAK,IAAI,IAAO,MAAK,EAAE,KAAK,KAAK,GACtD,GAAE,MAAO,EAAG,KAAK,GAAI,KAAK,GAAG,GACzB,GAAK,GACT,AAAG,EAAI,EACL,GAAK,MAAK,GAAK,IAAG,GAAG,IAAM,EAAE,EAC7B,GAAK,KAAK,EAAE,IAAK,IAAG,KAAK,GAAG,IAG5B,GAAK,KAAK,IAAK,IAAG,GAAI,IACnB,GAAK,GAAK,IAAK,KAAK,GAAI,EAAE,IAE3B,GAAE,MAAS,GAAG,IAAK,MACpB,IAAK,GAAM,MAAK,EAAE,MAAU,GAAE,MAAO,EAAE,GACvC,IAAI,GAAK,GAAK,KAAK,IAAG,GAAE,MAAO,GAGtC,MAAO,GAGT,WAAkB,EAAG,CAAE,MAAO,MAAK,UAAU,IAAI,EACjD,YAAe,EAAG,CAAE,MAAO,MAAK,UAAU,GAAG,EAAG,KAAK,EACrD,YAAe,EAAG,CAAE,MAAO,MAAK,UAAU,GAAG,EAAG,KAAK,EAGrD,YAAsB,EAAE,EAAG,EAAG,CAC5B,GAAI,GAAG,GAAG,GAAI,KAAK,IAAI,EAAE,EAAE,KAAK,GAChC,IAAI,EAAI,EAAG,EAAI,GAAG,EAAE,EAAG,EAAE,GAAK,EAAG,KAAK,GAAG,EAAE,IAC3C,GAAG,EAAE,EAAI,KAAK,EAAG,CAEf,IADA,GAAI,EAAE,EAAE,KAAK,GACT,EAAI,GAAG,EAAI,KAAK,EAAG,EAAE,EAAG,EAAE,GAAK,EAAG,KAAK,GAAG,IAC9C,EAAE,EAAI,KAAK,MAER,CAEH,IADA,GAAI,KAAK,EAAE,KAAK,GACZ,EAAI,GAAG,EAAI,EAAE,EAAG,EAAE,EAAG,EAAE,GAAK,EAAG,GAAE,EAAE,IACvC,EAAE,EAAI,EAAE,EAEV,EAAE,EAAI,EAAG,KAAK,EAAE,EAAE,GAClB,EAAE,QAIJ,YAAgB,EAAE,EAAG,CAAE,MAAO,GAAE,EAChC,YAAe,EAAG,CAAE,GAAI,GAAI,IAAO,YAAK,UAAU,EAAE,GAAO,GAAW,EAGtE,YAAe,EAAE,EAAG,CAAE,MAAO,GAAE,EAC/B,YAAc,EAAG,CAAE,GAAI,GAAI,IAAO,YAAK,UAAU,EAAE,GAAM,GAAW,EAGpE,YAAgB,EAAE,EAAG,CAAE,MAAO,GAAE,EAChC,YAAe,EAAG,CAAE,GAAI,GAAI,IAAO,YAAK,UAAU,EAAE,GAAO,GAAW,EAGtE,YAAmB,EAAE,EAAG,CAAE,MAAO,GAAE,CAAC,EACpC,YAAkB,EAAG,CAAE,GAAI,GAAI,IAAO,YAAK,UAAU,EAAE,GAAU,GAAW,EAG5E,aAAiB,CAEf,OADI,GAAI,IACA,EAAI,EAAG,EAAI,KAAK,EAAG,EAAE,EAAG,EAAE,GAAK,KAAK,GAAG,CAAC,KAAK,GACrD,SAAE,EAAI,KAAK,EACX,EAAE,EAAI,CAAC,KAAK,EACL,EAIT,YAAqB,EAAG,CACtB,GAAI,GAAI,IACR,MAAG,GAAI,EAAG,KAAK,SAAS,CAAC,EAAE,GAAS,KAAK,SAAS,EAAE,GAC7C,EAIT,YAAsB,EAAG,CACvB,GAAI,GAAI,IACR,MAAG,GAAI,EAAG,KAAK,SAAS,CAAC,EAAE,GAAS,KAAK,SAAS,EAAE,GAC7C,EAIT,YAAc,EAAG,CACf,GAAG,GAAK,EAAG,MAAO,GAClB,GAAI,GAAI,EACR,MAAI,GAAE,QAAW,GAAK,KAAM,GAAI,GAAK,IACjC,GAAE,MAAS,GAAK,KAAM,EAAG,GAAK,GAC9B,GAAE,KAAQ,GAAK,KAAM,EAAG,GAAK,GAC7B,GAAE,IAAM,GAAK,KAAM,EAAG,GAAK,GAC3B,GAAE,IAAM,GAAG,EAAE,EACV,EAIT,aAA6B,CAC3B,OAAQ,GAAI,EAAG,EAAI,KAAK,EAAG,EAAE,EAC3B,GAAG,KAAK,IAAM,EAAG,MAAO,GAAE,KAAK,GAAG,GAAK,KAAK,IAC9C,MAAG,MAAK,EAAI,EAAU,KAAK,EAAE,KAAK,GAC3B,GAIT,YAAc,EAAG,CAEf,OADI,GAAI,EACF,GAAK,GAAK,GAAK,EAAE,EAAG,EAAE,EAC5B,MAAO,GAIT,aAAsB,CAEpB,OADI,GAAI,EAAG,EAAI,KAAK,EAAE,KAAK,GACnB,EAAI,EAAG,EAAI,KAAK,EAAG,EAAE,EAAG,GAAK,GAAK,KAAK,GAAG,GAClD,MAAO,GAIT,YAAmB,EAAG,CACpB,GAAI,GAAI,KAAK,MAAM,EAAE,KAAK,IAC1B,MAAG,IAAK,KAAK,EAAU,KAAK,GAAG,EACvB,MAAK,GAAI,GAAI,EAAE,KAAK,KAAO,EAIrC,YAAsB,EAAE,EAAI,CAC1B,GAAI,GAAI,EAAW,IAAI,UAAU,GACjC,YAAK,UAAU,EAAE,EAAG,GACb,EAIT,YAAkB,EAAG,CAAE,MAAO,MAAK,UAAU,EAAE,IAG/C,YAAoB,EAAG,CAAE,MAAO,MAAK,UAAU,EAAE,IAGjD,YAAmB,EAAG,CAAE,MAAO,MAAK,UAAU,EAAE,IAGhD,YAAkB,EAAE,EAAG,CAErB,OADI,GAAI,EAAG,EAAI,EAAG,GAAI,KAAK,IAAI,EAAE,EAAE,KAAK,GAClC,EAAI,IACR,GAAK,KAAK,GAAG,EAAE,GACf,EAAE,KAAO,EAAE,KAAK,GAChB,IAAM,KAAK,GAEb,GAAG,EAAE,EAAI,KAAK,EAAG,CAEf,IADA,GAAK,EAAE,EACD,EAAI,KAAK,GACb,GAAK,KAAK,GACV,EAAE,KAAO,EAAE,KAAK,GAChB,IAAM,KAAK,GAEb,GAAK,KAAK,MAEP,CAEH,IADA,GAAK,KAAK,EACJ,EAAI,EAAE,GACV,GAAK,EAAE,GACP,EAAE,KAAO,EAAE,KAAK,GAChB,IAAM,KAAK,GAEb,GAAK,EAAE,EAET,EAAE,EAAK,EAAE,EAAG,GAAG,EACf,AAAG,EAAI,EAAG,EAAE,KAAO,EACX,EAAI,IAAI,GAAE,KAAO,KAAK,GAAG,GACjC,EAAE,EAAI,EACN,EAAE,QAIJ,YAAe,EAAG,CAAE,GAAI,GAAI,IAAO,YAAK,MAAM,EAAE,GAAW,EAG3D,WAAoB,EAAG,CAAE,GAAI,GAAI,IAAO,YAAK,MAAM,EAAE,GAAW,EAGhE,WAAoB,EAAG,CAAE,GAAI,GAAI,IAAO,YAAK,WAAW,EAAE,GAAW,EAGrE,YAAoB,CAAE,GAAI,GAAI,IAAO,YAAK,SAAS,GAAW,EAG9D,WAAkB,EAAG,CAAE,GAAI,GAAI,IAAO,YAAK,SAAS,EAAE,EAAE,MAAc,EAGtE,WAAqB,EAAG,CAAE,GAAI,GAAI,IAAO,YAAK,SAAS,EAAE,KAAK,GAAW,EAGzE,WAA8B,EAAG,CAC/B,GAAI,GAAI,IAAO,EAAI,IACnB,YAAK,SAAS,EAAE,EAAE,GACX,GAAI,OAAM,EAAE,GAIrB,WAAsB,EAAG,CACvB,KAAK,KAAK,GAAK,KAAK,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,KAAK,GAC3C,EAAE,KAAK,EACP,KAAK,QAIP,YAAuB,EAAE,EAAG,CAC1B,GAAG,GAAK,EACR,MAAM,KAAK,GAAK,GAAG,KAAK,KAAK,KAAO,EAEpC,IADA,KAAK,IAAM,EACL,KAAK,IAAM,KAAK,IACpB,KAAK,IAAM,KAAK,GACb,EAAE,GAAK,KAAK,GAAG,MAAK,KAAK,KAAO,GACnC,EAAE,KAAK,IAKX,aAAmB,EACnB,YAAc,EAAG,CAAE,MAAO,GAC1B,YAAgB,EAAE,EAAE,EAAG,CAAE,EAAE,WAAW,EAAE,GACxC,YAAgB,EAAE,EAAG,CAAE,EAAE,SAAS,GAElC,GAAQ,UAAU,QAAU,GAC5B,GAAQ,UAAU,OAAS,GAC3B,GAAQ,UAAU,MAAQ,GAC1B,GAAQ,UAAU,MAAQ,GAG1B,YAAe,EAAG,CAAE,MAAO,MAAK,IAAI,EAAE,GAAI,KAI1C,YAA4B,EAAE,EAAE,EAAG,CACjC,GAAI,GAAI,KAAK,IAAI,KAAK,EAAE,EAAE,EAAE,GAG5B,IAFA,EAAE,EAAI,EACN,EAAE,EAAI,EACA,EAAI,GAAG,EAAE,EAAE,GAAK,EACtB,GAAI,IACJ,IAAI,GAAI,EAAE,EAAE,KAAK,EAAG,EAAI,GAAG,EAAE,EAAG,EAAE,EAAE,KAAK,GAAK,KAAK,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,GACxE,IAAI,GAAI,KAAK,IAAI,EAAE,EAAE,GAAI,EAAI,GAAG,EAAE,EAAG,KAAK,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAC5D,EAAE,QAKJ,YAA4B,EAAE,EAAE,EAAG,CACjC,EAAE,EACF,GAAI,GAAI,EAAE,EAAI,KAAK,EAAE,EAAE,EAAE,EAEzB,IADA,EAAE,EAAI,EACA,EAAE,GAAK,GAAG,EAAE,GAAK,EACvB,IAAI,EAAI,KAAK,IAAI,EAAE,KAAK,EAAE,GAAI,EAAI,EAAE,EAAG,EAAE,EACvC,EAAE,KAAK,EAAE,EAAE,GAAK,KAAK,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,GAClD,EAAE,QACF,EAAE,UAAU,EAAE,GAIhB,YAAiB,EAAG,CAElB,KAAK,GAAK,IACV,KAAK,GAAK,IACV,EAAW,IAAI,UAAU,EAAE,EAAE,EAAE,KAAK,IACpC,KAAK,GAAK,KAAK,GAAG,OAAO,GACzB,KAAK,EAAI,EAGX,YAAwB,EAAG,CACzB,GAAG,EAAE,EAAI,GAAK,EAAE,EAAI,EAAE,KAAK,EAAE,EAAG,MAAO,GAAE,IAAI,KAAK,GAC7C,GAAG,EAAE,UAAU,KAAK,GAAK,EAAG,MAAO,GACjC,GAAI,GAAI,IAAO,SAAE,OAAO,GAAI,KAAK,OAAO,GAAW,EAG5D,YAAuB,EAAG,CAAE,MAAO,GAGnC,YAAuB,EAAG,CAKxB,IAJA,EAAE,UAAU,KAAK,EAAE,EAAE,EAAE,KAAK,IACzB,EAAE,EAAI,KAAK,EAAE,EAAE,GAAK,GAAE,EAAI,KAAK,EAAE,EAAE,EAAG,EAAE,SAC3C,KAAK,GAAG,gBAAgB,KAAK,GAAG,KAAK,EAAE,EAAE,EAAE,KAAK,IAChD,KAAK,EAAE,gBAAgB,KAAK,GAAG,KAAK,EAAE,EAAE,EAAE,KAAK,IACzC,EAAE,UAAU,KAAK,IAAM,GAAG,EAAE,WAAW,EAAE,KAAK,EAAE,EAAE,GAExD,IADA,EAAE,MAAM,KAAK,GAAG,GACV,EAAE,UAAU,KAAK,IAAM,GAAG,EAAE,MAAM,KAAK,EAAE,GAIjD,YAAsB,EAAE,EAAG,CAAE,EAAE,SAAS,GAAI,KAAK,OAAO,GAGxD,YAAsB,EAAE,EAAE,EAAG,CAAE,EAAE,WAAW,EAAE,GAAI,KAAK,OAAO,GAE9D,GAAQ,UAAU,QAAU,GAC5B,GAAQ,UAAU,OAAS,GAC3B,GAAQ,UAAU,OAAS,GAC3B,GAAQ,UAAU,MAAQ,GAC1B,GAAQ,UAAU,MAAQ,GAG1B,YAAkB,EAAE,EAAG,CACrB,GAAI,GAAI,EAAE,YAAa,EAAG,GAAI,EAAI,GAAI,GACtC,GAAG,GAAK,EAAG,MAAO,IACb,AAAG,EAAI,GAAI,EAAI,EACf,AAAG,EAAI,GAAI,EAAI,EACf,AAAG,EAAI,IAAK,EAAI,EAChB,AAAG,EAAI,IAAK,EAAI,EAChB,EAAI,EACT,AAAG,EAAI,EACL,GAAI,GAAI,IAAQ,GACb,AAAG,EAAE,SACR,GAAI,GAAI,IAAQ,GAEhB,GAAI,GAAI,IAAW,GAGrB,GAAI,IAAI,GAAI,OAAS,GAAI,EAAG,GAAK,EAAE,EAAG,GAAM,IAAG,GAAG,EAElD,GADA,GAAE,GAAK,GAAE,QAAQ,MACd,EAAI,EAAG,CACR,GAAI,IAAK,IAET,IADA,GAAE,MAAM,GAAE,GAAG,IACP,IAAK,IACT,GAAE,IAAK,IACP,GAAE,MAAM,GAAG,GAAE,GAAE,GAAG,GAAE,KACpB,IAAK,EAIT,GAAI,IAAI,EAAE,EAAE,EAAG,GAAG,GAAM,GAAM,GAAK,IAAO,GAE1C,IADA,EAAI,EAAM,EAAE,KAAI,EACV,IAAK,GAAG,CAQZ,IAPA,AAAG,GAAK,GAAI,GAAK,EAAE,KAAK,EAAE,GAAK,GAE7B,IAAK,GAAE,IAAK,IAAI,EAAE,GAAI,IAAM,GAAG,EAC5B,GAAI,GAAG,KAAK,EAAE,GAAE,IAAK,KAAK,GAAG,EAAE,KAGpC,GAAI,EACG,IAAE,IAAM,GAAK,KAAM,EAAG,EAAE,GAE/B,GADI,IAAK,IAAK,GAAK,IAAK,KAAK,GAAI,EAAE,IAChC,GACD,GAAE,IAAG,OAAO,IACZ,GAAM,OAEH,CACH,KAAM,GAAI,GAAK,GAAE,MAAM,GAAE,IAAK,GAAE,MAAM,GAAG,IAAI,IAAK,EAClD,AAAG,GAAI,EAAG,GAAE,MAAM,GAAE,IAAY,IAAI,GAAG,GAAI,GAAI,GAAK,IACpD,GAAE,MAAM,GAAG,GAAE,IAAG,IAGlB,KAAM,IAAK,GAAM,GAAE,IAAI,GAAG,IAAO,GAC/B,GAAE,MAAM,GAAE,IAAK,GAAI,GAAG,GAAI,GAAI,GAAK,GAChC,EAAE,EAAI,GAAK,GAAI,KAAK,GAAG,EAAG,EAAE,IAGnC,MAAO,IAAE,OAAO,IAIlB,YAAe,EAAG,CAChB,GAAI,GAAK,KAAK,EAAE,EAAG,KAAK,SAAS,KAAK,QAClC,EAAK,EAAE,EAAE,EAAG,EAAE,SAAS,EAAE,QAC7B,GAAG,EAAE,UAAU,GAAK,EAAG,CAAE,GAAI,GAAI,EAAG,EAAI,EAAG,EAAI,EAC/C,GAAI,IAAI,EAAE,kBAAmB,GAAI,EAAE,kBACnC,GAAG,GAAI,EAAG,MAAO,GAMjB,IALG,GAAI,IAAG,IAAI,IACX,GAAI,GACL,GAAE,SAAS,GAAE,GACb,EAAE,SAAS,GAAE,IAET,EAAE,SAAW,GACjB,AAAI,IAAI,EAAE,mBAAqB,GAAG,EAAE,SAAS,GAAE,GAC3C,IAAI,EAAE,mBAAqB,GAAG,EAAE,SAAS,GAAE,GAC/C,AAAG,EAAE,UAAU,IAAM,EACnB,GAAE,MAAM,EAAE,GACV,EAAE,SAAS,EAAE,IAGb,GAAE,MAAM,EAAE,GACV,EAAE,SAAS,EAAE,IAGjB,MAAG,IAAI,GAAG,EAAE,SAAS,GAAE,GAChB,EAIT,YAAmB,EAAG,CACpB,GAAG,GAAK,EAAG,MAAO,GAClB,GAAI,GAAI,KAAK,GAAG,EAAG,EAAK,KAAK,EAAE,EAAG,EAAE,EAAE,EACtC,GAAG,KAAK,EAAI,EACV,GAAG,GAAK,EAAG,EAAI,KAAK,GAAG,MAClB,QAAQ,GAAI,KAAK,EAAE,EAAG,GAAK,EAAG,EAAE,EAAG,EAAK,GAAE,EAAE,KAAK,IAAI,EAC5D,MAAO,GAIT,YAAsB,EAAG,CACvB,GAAI,GAAK,EAAE,SACX,GAAI,KAAK,UAAY,GAAO,EAAE,UAAY,EAAG,MAAO,GAAW,KAG/D,OAFI,GAAI,EAAE,QAAS,EAAI,KAAK,QACxB,GAAI,EAAI,GAAI,GAAI,EAAI,GAAI,GAAI,EAAI,GAAI,GAAI,EAAI,GAC1C,EAAE,UAAY,GAAG,CACrB,KAAM,EAAE,UACN,EAAE,SAAS,EAAE,GACb,AAAG,EACE,GAAC,GAAE,UAAY,CAAC,GAAE,WAAY,IAAE,MAAM,KAAK,IAAI,GAAE,MAAM,EAAE,KAC5D,GAAE,SAAS,EAAE,KAEN,GAAE,UAAU,GAAE,MAAM,EAAE,IAC/B,GAAE,SAAS,EAAE,IAEf,KAAM,EAAE,UACN,EAAE,SAAS,EAAE,GACb,AAAG,EACE,GAAC,GAAE,UAAY,CAAC,GAAE,WAAY,IAAE,MAAM,KAAK,IAAI,GAAE,MAAM,EAAE,KAC5D,GAAE,SAAS,EAAE,KAEN,GAAE,UAAU,GAAE,MAAM,EAAE,IAC/B,GAAE,SAAS,EAAE,IAEf,AAAG,EAAE,UAAU,IAAM,EACnB,GAAE,MAAM,EAAE,GACP,GAAI,GAAE,MAAM,GAAE,IACjB,GAAE,MAAM,GAAE,KAGV,GAAE,MAAM,EAAE,GACP,GAAI,GAAE,MAAM,GAAE,IACjB,GAAE,MAAM,GAAE,KAGd,GAAG,EAAE,UAAU,EAAW,MAAQ,EAAG,MAAO,GAAW,KACvD,GAAG,GAAE,UAAU,IAAM,EAAG,MAAO,IAAE,SAAS,GAC1C,GAAG,GAAE,SAAW,EAAG,GAAE,MAAM,EAAE,QAAS,OAAO,IAC7C,MAAG,IAAE,SAAW,EAAU,GAAE,IAAI,GAAgB,GAGlD,GAAI,IAAY,CAAC,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAC5oB,GAAS,IAAG,IAAI,GAAU,GAAU,OAAO,GAG/C,YAA2B,EAAG,CAC5B,GAAI,GAAG,EAAI,KAAK,MAChB,GAAG,EAAE,GAAK,GAAK,EAAE,IAAM,GAAU,GAAU,OAAO,GAAI,CACpD,IAAI,EAAI,EAAG,EAAI,GAAU,OAAQ,EAAE,EACjC,GAAG,EAAE,IAAM,GAAU,GAAI,MAAO,GAClC,MAAO,GAET,GAAG,EAAE,SAAU,MAAO,GAEtB,IADA,EAAI,EACE,EAAI,GAAU,QAAQ,CAE1B,OADI,GAAI,GAAU,GAAI,GAAI,EAAE,EACtB,GAAI,GAAU,QAAU,EAAI,IAAO,GAAK,GAAU,MAExD,IADA,EAAI,EAAE,OAAO,GACP,EAAI,IAAG,GAAG,EAAE,GAAU,MAAQ,EAAG,MAAO,GAEhD,MAAO,GAAE,YAAY,GAIvB,YAAwB,EAAG,CACzB,GAAI,GAAK,KAAK,SAAS,EAAW,KAC9B,EAAI,EAAG,kBACX,GAAG,GAAK,EAAG,MAAO,GAClB,GAAI,GAAI,EAAG,WAAW,GACtB,EAAK,EAAE,GAAI,EACR,EAAI,GAAU,QAAQ,GAAI,GAAU,QAEvC,OADI,IAAI,IACA,GAAI,EAAG,GAAI,EAAG,EAAE,GAAG,CAEzB,GAAE,QAAQ,GAAU,KAAK,MAAM,KAAK,SAAS,GAAU,UACvD,GAAI,IAAI,GAAE,OAAO,EAAE,MACnB,GAAG,GAAE,UAAU,EAAW,MAAQ,GAAK,GAAE,UAAU,IAAO,EAAG,CAE3D,OADI,IAAI,EACF,KAAM,GAAK,GAAE,UAAU,IAAO,GAElC,GADA,GAAI,GAAE,UAAU,EAAE,MACf,GAAE,UAAU,EAAW,MAAQ,EAAG,MAAO,GAE9C,GAAG,GAAE,UAAU,IAAO,EAAG,MAAO,IAGpC,MAAO,GAIT,EAAW,UAAU,UAAY,GACjC,EAAW,UAAU,QAAU,GAC/B,EAAW,UAAU,UAAY,GACjC,EAAW,UAAU,WAAa,GAClC,EAAW,UAAU,UAAY,GACjC,EAAW,UAAU,UAAY,GACjC,EAAW,UAAU,MAAQ,GAC7B,EAAW,UAAU,UAAY,EACjC,EAAW,UAAU,WAAa,GAClC,EAAW,UAAU,gBAAkB,GACvC,EAAW,UAAU,gBAAkB,GACvC,EAAW,UAAU,OAAS,GAC9B,EAAW,UAAU,YAAc,GAGnC,EAAW,UAAU,MAAQ,EAC7B,EAAW,UAAU,SAAW,GAChC,EAAW,UAAU,UAAY,GACjC,EAAW,UAAU,WAAa,GAClC,EAAW,UAAU,OAAS,GAC9B,EAAW,UAAU,YAAc,GACnC,EAAW,UAAU,OAAS,EAC9B,EAAW,UAAU,IAAM,GAC3B,EAAW,UAAU,IAAM,GAC3B,EAAW,UAAU,IAAM,GAC3B,EAAW,UAAU,GAAK,GAC1B,EAAW,UAAU,IAAM,GAC3B,EAAW,UAAU,OAAS,GAC9B,EAAW,UAAU,IAAM,GAC3B,EAAW,UAAU,UAAY,GACjC,EAAW,UAAU,WAAa,GAClC,EAAW,UAAU,gBAAkB,GACvC,EAAW,UAAU,SAAW,GAChC,EAAW,UAAU,QAAU,GAC/B,EAAW,UAAU,OAAS,GAC9B,EAAW,UAAU,SAAW,GAChC,EAAW,UAAU,QAAU,GAC/B,EAAW,UAAU,IAAM,GAC3B,EAAW,UAAU,SAAW,EAChC,EAAW,UAAU,SAAW,EAChC,EAAW,UAAU,OAAS,EAC9B,EAAW,UAAU,UAAY,EACjC,EAAW,UAAU,mBAAqB,EAC1C,EAAW,UAAU,OAAS,GAC9B,EAAW,UAAU,WAAa,GAClC,EAAW,UAAU,IAAM,GAC3B,EAAW,UAAU,IAAM,GAC3B,EAAW,UAAU,gBAAkB,GAGvC,EAAW,UAAU,OAAS,EAG9B,EAAW,UAAU,QAAU,GAiBlC,GAAI,IACA,GACA,GAGJ,YAAsB,EAAG,CACvB,GAAS,OAAe,EAAI,IAC5B,GAAS,OAAgB,GAAK,EAAK,IACnC,GAAS,OAAgB,GAAK,GAAM,IACpC,GAAS,OAAgB,GAAK,GAAM,IACjC,IAAY,IAAW,KAAY,IAIxC,aAAyB,CACvB,GAAa,GAAI,QAAO,WAI1B,GAAG,IAAY,KAAM,CACnB,GAAW,GAAI,OACf,GAAW,EACX,GAAI,IACJ,GAAG,MAAO,SAAW,aAAe,OAAO,QAC5C,GAAI,OAAO,OAAO,gBAAiB,CAEjC,GAAI,IAAK,GAAI,YAAW,IAExB,IADA,OAAO,OAAO,gBAAgB,IAC1B,GAAI,EAAG,GAAI,GAAI,EAAE,GACtB,GAAS,MAAc,GAAG,YAEnB,UAAU,SAAW,YAAc,UAAU,WAAa,IAAK,CAErE,GAAI,GAAI,OAAO,OAAO,OAAO,IAC7B,IAAI,GAAI,EAAG,GAAI,EAAE,OAAQ,EAAE,GAC5B,GAAS,MAAc,EAAE,WAAW,IAAK,KAGzC,KAAM,GAAW,IAClB,GAAI,KAAK,MAAM,MAAQ,KAAK,UAC5B,GAAS,MAAc,KAAM,EAC7B,GAAS,MAAc,GAAI,IAE1B,GAAW,EACX,KAKF,aAAwB,CACtB,GAAG,IAAa,KAAM,CAIvB,IAHA,KACA,GAAY,KACZ,GAAU,KAAK,IACX,GAAW,EAAG,GAAW,GAAS,OAAQ,EAAE,GAC9C,GAAS,IAAY,EACvB,GAAW,EAIV,MAAO,IAAU,OAGnB,YAAuB,EAAI,CACzB,GAAI,GACJ,IAAI,EAAI,EAAG,EAAI,EAAG,OAAQ,EAAE,EAAG,EAAG,GAAK,KAGzC,aAAwB,EAExB,GAAa,UAAU,UAAY,GAInC,aAAmB,CACjB,KAAK,EAAI,EACT,KAAK,EAAI,EACT,KAAK,EAAI,GAAI,OAIf,YAAkB,EAAK,CACrB,GAAI,GAAG,EAAG,EACV,IAAI,EAAI,EAAG,EAAI,IAAK,EAAE,EACvB,KAAK,EAAE,GAAK,EAEX,IADA,EAAI,EACA,EAAI,EAAG,EAAI,IAAK,EAAE,EACvB,EAAK,EAAI,KAAK,EAAE,GAAK,EAAI,EAAI,EAAI,QAAW,IAC5C,EAAI,KAAK,EAAE,GACX,KAAK,EAAE,GAAK,KAAK,EAAE,GACnB,KAAK,EAAE,GAAK,EAEX,KAAK,EAAI,EACT,KAAK,EAAI,EAGX,aAAoB,CAClB,GAAI,GACJ,YAAK,EAAK,KAAK,EAAI,EAAK,IACxB,KAAK,EAAK,KAAK,EAAI,KAAK,EAAE,KAAK,GAAM,IACrC,EAAI,KAAK,EAAE,KAAK,GAChB,KAAK,EAAE,KAAK,GAAK,KAAK,EAAE,KAAK,GAC7B,KAAK,EAAE,KAAK,GAAK,EACV,KAAK,EAAG,EAAI,KAAK,EAAE,KAAK,GAAM,KAGvC,GAAQ,UAAU,KAAO,GACzB,GAAQ,UAAU,KAAO,GAGzB,aAAyB,CACvB,MAAO,IAAI,IAKb,GAAI,IAAY,IAEf,EAAW,aAAe,GAC1B,EAAW,WAAa,EACxB,AAAI,MAAO,KAAY,YACrB,GAAU,GAAO,QAAU,EAE3B,MAAK,WAAa,EAClB,KAAK,aAAe,MAGrB,KAAK,MC50CR,mBAKA,GAAI,IAAa,KAAgB,WAC7B,GAAU,GAAW,UAAU,QAMnC,YAA0B,EAAE,EAAG,CAC3B,KAAK,EAAI,EAET,KAAK,EAAI,EAGb,YAAoB,EAAO,CACvB,MAAG,IAAS,KAAa,GACjB,KAAK,EAAE,OAAO,EAAM,IAAM,KAAK,EAAE,OAAO,EAAM,GAG1D,aAA4B,CACxB,MAAO,MAAK,EAGhB,aAAsB,CAClB,MAAO,IAAI,IAAiB,KAAK,EAAG,KAAK,EAAE,SAAS,IAAI,KAAK,IAGjE,YAAiB,EAAG,CAChB,MAAO,IAAI,IAAiB,KAAK,EAAG,KAAK,EAAE,IAAI,EAAE,gBAAgB,IAAI,KAAK,IAG9E,YAAsB,EAAG,CACrB,MAAO,IAAI,IAAiB,KAAK,EAAG,KAAK,EAAE,SAAS,EAAE,gBAAgB,IAAI,KAAK,IAGnF,YAAsB,EAAG,CACrB,MAAO,IAAI,IAAiB,KAAK,EAAG,KAAK,EAAE,SAAS,EAAE,gBAAgB,IAAI,KAAK,IAGnF,aAAsB,CAClB,MAAO,IAAI,IAAiB,KAAK,EAAG,KAAK,EAAE,SAAS,IAAI,KAAK,IAGjE,YAAoB,EAAG,CACnB,MAAO,IAAI,IAAiB,KAAK,EAAG,KAAK,EAAE,SAAS,EAAE,eAAe,WAAW,KAAK,IAAI,IAAI,KAAK,IAGtG,GAAiB,UAAU,OAAS,GACpC,GAAiB,UAAU,aAAe,GAC1C,GAAiB,UAAU,OAAS,GACpC,GAAiB,UAAU,IAAM,GACjC,GAAiB,UAAU,SAAW,GACtC,GAAiB,UAAU,SAAW,GACtC,GAAiB,UAAU,OAAS,GACpC,GAAiB,UAAU,OAAS,GAMpC,YAAmB,EAAM,EAAE,EAAE,EAAG,CAC5B,KAAK,MAAQ,EACb,KAAK,EAAI,EACT,KAAK,EAAI,EAGT,AAAG,GAAK,KACN,KAAK,EAAI,GAAW,IAGpB,KAAK,EAAI,EAEX,KAAK,KAAO,KAIhB,aAAuB,CACnB,AAAG,KAAK,MAAQ,MACd,MAAK,KAAO,KAAK,EAAE,WAAW,KAAK,MAAM,IAE3C,GAAI,GAAI,KAAK,EAAE,eAAe,SAAS,KAAK,MAC5C,YAAK,MAAM,OAAO,GACX,KAAK,MAAM,eAAe,GAGrC,aAAuB,CACnB,AAAG,KAAK,MAAQ,MACd,MAAK,KAAO,KAAK,EAAE,WAAW,KAAK,MAAM,IAE3C,GAAI,GAAI,KAAK,EAAE,eAAe,SAAS,KAAK,MAC5C,YAAK,MAAM,OAAO,GACX,KAAK,MAAM,eAAe,GAGrC,YAAuB,EAAO,CAC1B,GAAG,GAAS,KAAM,MAAO,GACzB,GAAG,KAAK,aAAc,MAAO,GAAM,aACnC,GAAG,EAAM,aAAc,MAAO,MAAK,aACnC,GAAI,GAAG,EAGP,MADA,GAAI,EAAM,EAAE,eAAe,SAAS,KAAK,GAAG,SAAS,KAAK,EAAE,eAAe,SAAS,EAAM,IAAI,IAAI,KAAK,MAAM,GAC1G,AAAC,EAAE,OAAO,GAAW,MAExB,GAAI,EAAM,EAAE,eAAe,SAAS,KAAK,GAAG,SAAS,KAAK,EAAE,eAAe,SAAS,EAAM,IAAI,IAAI,KAAK,MAAM,GACtG,EAAE,OAAO,GAAW,OAHW,GAM1C,aAA6B,CACzB,MAAI,MAAK,GAAK,MAAU,KAAK,GAAK,KAAc,GACzC,KAAK,EAAE,OAAO,GAAW,OAAS,CAAC,KAAK,EAAE,eAAe,OAAO,GAAW,MAGtF,aAAyB,CACrB,MAAO,IAAI,IAAU,KAAK,MAAO,KAAK,EAAG,KAAK,EAAE,SAAU,KAAK,GAGnE,YAAoB,EAAG,CACnB,GAAG,KAAK,aAAc,MAAO,GAC7B,GAAG,EAAE,aAAc,MAAO,MAG1B,GAAI,GAAI,EAAE,EAAE,eAAe,SAAS,KAAK,GAAG,SAAS,KAAK,EAAE,eAAe,SAAS,EAAE,IAAI,IAAI,KAAK,MAAM,GAErG,EAAI,EAAE,EAAE,eAAe,SAAS,KAAK,GAAG,SAAS,KAAK,EAAE,eAAe,SAAS,EAAE,IAAI,IAAI,KAAK,MAAM,GAEzG,GAAG,GAAW,KAAK,OAAO,GACtB,MAAG,IAAW,KAAK,OAAO,GACf,KAAK,QAEhB,KAAK,MAAM,cAGf,GAAI,GAAQ,GAAI,IAAW,KACvB,EAAK,KAAK,EAAE,eACZ,EAAK,KAAK,EAAE,eACZ,EAAK,EAAE,EAAE,eACT,EAAK,EAAE,EAAE,eAET,EAAK,EAAE,SACP,EAAK,EAAG,SAAS,GACjB,EAAO,EAAG,SAAS,GACnB,EAAM,EAAE,SAAS,SAAS,KAAK,GAG/B,EAAK,EAAI,SAAS,EAAK,UAAU,IAAI,SAAS,EAAE,GAAG,SAAS,GAAI,SAAS,GAAG,IAAI,KAAK,MAAM,GAE3F,EAAK,EAAK,SAAS,GAAO,SAAS,GAAG,SAAS,EAAG,SAAS,IAAK,SAAS,EAAI,SAAS,IAAI,SAAS,EAAE,GAAG,IAAI,EAAE,SAAS,IAAK,IAAI,KAAK,MAAM,GAE3I,EAAK,EAAG,SAAS,KAAK,GAAG,SAAS,EAAE,GAAG,IAAI,KAAK,MAAM,GAE1D,MAAO,IAAI,IAAU,KAAK,MAAO,KAAK,MAAM,eAAe,GAAK,KAAK,MAAM,eAAe,GAAK,GAGnG,aAAwB,CACpB,GAAG,KAAK,aAAc,MAAO,MAC7B,GAAG,KAAK,EAAE,eAAe,UAAY,EAAG,MAAO,MAAK,MAAM,cAG1D,GAAI,GAAQ,GAAI,IAAW,KACvB,EAAK,KAAK,EAAE,eACZ,EAAK,KAAK,EAAE,eAEZ,EAAO,EAAG,SAAS,KAAK,GACxB,EAAS,EAAK,SAAS,GAAI,IAAI,KAAK,MAAM,GAC1C,EAAI,KAAK,MAAM,EAAE,eAGjB,EAAI,EAAG,SAAS,SAAS,GAC7B,AAAI,GAAW,KAAK,OAAO,IACzB,GAAI,EAAE,IAAI,KAAK,EAAE,SAAS,SAAS,KAErC,EAAI,EAAE,IAAI,KAAK,MAAM,GAGrB,GAAI,GAAK,EAAE,SAAS,SAAS,EAAG,UAAU,GAAG,SAAS,IAAS,UAAU,GAAG,SAAS,GAAM,IAAI,KAAK,MAAM,GAEtG,EAAK,EAAE,SAAS,GAAO,SAAS,GAAI,SAAS,EAAO,UAAU,IAAI,UAAU,GAAG,SAAS,GAAQ,SAAS,EAAE,SAAS,SAAS,IAAI,IAAI,KAAK,MAAM,GAEhJ,EAAK,EAAK,SAAS,SAAS,GAAM,UAAU,GAAG,IAAI,KAAK,MAAM,GAElE,MAAO,IAAI,IAAU,KAAK,MAAO,KAAK,MAAM,eAAe,GAAK,KAAK,MAAM,eAAe,GAAK,GAKnG,YAAyB,EAAG,CACxB,GAAG,KAAK,aAAc,MAAO,MAC7B,GAAG,EAAE,UAAY,EAAG,MAAO,MAAK,MAAM,cAEtC,GAAI,GAAI,EACJ,EAAI,EAAE,SAAS,GAAI,IAAW,MAE9B,EAAM,KAAK,SACX,EAAI,KAEJ,EACJ,IAAI,EAAI,EAAE,YAAc,EAAG,EAAI,EAAG,EAAE,EAAG,CAC1C,EAAI,EAAE,QAEN,GAAI,GAAO,EAAE,QAAQ,GACjB,EAAO,EAAE,QAAQ,GAErB,AAAI,GAAQ,GACR,GAAI,EAAE,IAAI,EAAO,KAAO,IAIzB,MAAO,GAIX,YAA4B,EAAE,EAAE,EAAG,CACjC,GAAI,GACJ,AAAG,EAAE,YAAc,EAAE,YACnB,EAAI,EAAE,YAAc,EAEpB,EAAI,EAAE,YAAc,EAItB,OAFI,GAAI,KAAK,MAAM,cACf,EAAO,KAAK,IAAI,GACd,GAAK,GACT,EAAI,EAAE,QACN,AAAG,EAAE,QAAQ,GACX,AAAG,EAAE,QAAQ,GACX,EAAI,EAAE,IAAI,GAGV,EAAI,EAAE,IAAI,MAIT,EAAE,QAAQ,IACX,GAAI,EAAE,IAAI,IAGd,EAAE,EAGJ,MAAO,GAGT,GAAU,UAAU,KAAO,GAC3B,GAAU,UAAU,KAAO,GAC3B,GAAU,UAAU,OAAS,GAC7B,GAAU,UAAU,WAAa,GACjC,GAAU,UAAU,OAAS,GAC7B,GAAU,UAAU,IAAM,GAC1B,GAAU,UAAU,MAAQ,GAC5B,GAAU,UAAU,SAAW,GAC/B,GAAU,UAAU,YAAc,GAMlC,YAAmB,EAAE,EAAE,EAAG,CACtB,KAAK,EAAI,EACT,KAAK,EAAI,KAAK,eAAe,GAC7B,KAAK,EAAI,KAAK,eAAe,GAC7B,KAAK,SAAW,GAAI,IAAU,KAAM,KAAM,MAC1C,KAAK,QAAU,GAAI,IAAQ,KAAK,GAGpC,aAAuB,CACnB,MAAO,MAAK,EAGhB,aAAuB,CACnB,MAAO,MAAK,EAGhB,aAAuB,CACnB,MAAO,MAAK,EAGhB,YAAuB,EAAO,CAC1B,MAAG,IAAS,KAAa,GAClB,KAAK,EAAE,OAAO,EAAM,IAAM,KAAK,EAAE,OAAO,EAAM,IAAM,KAAK,EAAE,OAAO,EAAM,GAGnF,aAA8B,CAC1B,MAAO,MAAK,SAGhB,YAA+B,EAAG,CAC9B,MAAO,IAAI,IAAiB,KAAK,EAAG,GAGxC,YAAqB,EAAG,CACpB,KAAK,QAAQ,OAAO,GA4BxB,YAA+B,EAAG,CACjC,GAAI,EAAE,aAAc,MAAO,KAC3B,GAAI,GAAO,EAAE,OAAO,eAAe,SAAS,IACxC,EAAO,EAAE,OAAO,eAAe,SAAS,IACxC,EAAO,KAAK,OAAO,SAAS,IAAI,OAEpC,IADK,EAAO,GAAM,GAAG,IACd,EAAK,OAAS,GACpB,EAAO,IAAM,EAEd,KAAO,EAAK,OAAS,GACpB,EAAO,IAAM,EAEd,MAAO,KAAO,EAAO,EAGtB,GAAU,UAAU,KAAO,GAC3B,GAAU,UAAU,KAAO,GAC3B,GAAU,UAAU,KAAO,GAC3B,GAAU,UAAU,OAAS,GAC7B,GAAU,UAAU,YAAc,GAClC,GAAU,UAAU,eAAiB,GACrC,GAAU,UAAU,OAAS,GAE7B,GAAU,UAAU,eAAiB,GAGrC,GAAU,UAAU,eAAiB,SAAS,EAC9C,CACC,GAAI,GACD,OAAO,SAAS,EAAE,OAAO,EAAE,GAAI,SAC1B,GACR,MAAO,MAAK,aACJ,GACR,EAAU,OACF,GACR,AAAG,GAAW,MAAW,GAAU,IACnC,GAAI,GAAM,EAAE,OAAS,EACjB,EAAO,EAAE,OAAO,EAAG,GACnB,EAAI,KAAK,eAAe,GAAI,IAAW,EAAK,KAC5C,EAAQ,EAAE,SAAS,EAAE,SAAS,IAAI,KAAK,SAAS,IAAI,KAAK,QACzD,EAAO,EAAM,OAEd,GAAI,GAAQ,KAAM,KAAM,4BAExB,GAAI,GAAY,EAAK,eACrB,MAAI,GAAU,QAAQ,IAAM,GAGxB,GAAO,KAAK,eAAe,KAAK,OAAO,SAAS,KAE7C,GAAI,IAAU,KAAK,EAAE,OACvB,OACA,OACA,GACR,GAAI,GAAO,GAAE,OAAS,GAAK,EACvB,EAAO,EAAE,OAAO,EAAG,GACnB,EAAO,EAAE,OAAO,EAAI,EAAG,GAE3B,MAAO,IAAI,IAAU,KACd,KAAK,eAAe,GAAI,IAAW,EAAM,KACzC,KAAK,eAAe,GAAI,IAAW,EAAM,cAGhD,MAAO,QAGR,GAAU,UAAU,yBAA2B,SAAS,EACxD,CACC,GAAI,EAAE,aAAc,MAAO,KAC3B,GAAI,GAAO,EAAE,OAAO,eAAe,SAAS,IACxC,EAAO,KAAK,OAAO,SAAS,IAAI,OAEpC,IADK,EAAO,GAAM,GAAG,IACd,EAAK,OAAS,GACpB,EAAO,IAAM,EACd,GAAI,GACJ,MAAG,GAAE,OAAO,eAAe,SAAU,EAAU,KACV,EAAU,KAExC,EAAU,GAIlB,GAAiB,UAAU,KAAO,UAClC,CACC,GAAG,KAAK,GAAK,KAAW,MAAO,MAAK,EAEjC,KAAK,EAAI,KACT,GAAI,GAAY,KAAK,EAAE,YACvB,GAAI,EAAY,IAChB,CACI,GAAI,GAAY,KAAK,EAAE,WAAW,EAAY,IAC9C,AAAI,EAAU,YAAc,IAExB,MAAK,EAAI,GAAW,IAAI,UAAU,GAAW,SAAS,KAAK,IAGnE,MAAO,MAAK,GAEhB,GAAiB,UAAU,QAAU,SAAS,EAAG,EACjD,CACI,MAAO,MAAK,UAAU,EAAG,SAAS,KAEtC,GAAiB,UAAU,UAAY,SAAS,EAChD,CACI,GAAI,KAAK,QAAU,KACnB,CAEI,OADI,GAAO,EAAE,YACN,EAAE,YAAe,EAAO,GAC/B,CACI,GAAI,GAAI,EAAE,WAAW,GACjB,EAAI,EAAE,SAAS,EAAE,UAAU,IAC/B,AAAK,KAAK,OAAO,OAAO,GAAW,MAE/B,GAAI,EAAE,SAAS,KAAK,SAExB,EAAI,EAAE,IAAI,GAEd,KAAO,EAAE,UAAU,IAAM,GAErB,EAAI,EAAE,SAAS,OAKnB,GAAI,EAAE,IAAI,GAEd,MAAO,IAEX,GAAiB,UAAU,KAAO,UAClC,CACI,GAAI,CAAC,KAAK,EAAE,QAAQ,GAAI,KAAM,cAG9B,GAAI,KAAK,EAAE,QAAQ,GACnB,CACC,GAAI,GAAI,GAAI,IAAiB,KAAK,EAAE,KAAK,EAAE,OAAO,KAAK,EAAE,WAAW,GAAG,IAAI,GAAW,KAAK,KAAK,IAChG,MAAO,GAAE,SAAS,OAAO,MAAQ,EAAI,KAItC,GAAI,GAAY,KAAK,EAAE,SAAS,GAAW,KAEvC,EAAmB,EAAU,WAAW,GAC5C,GAAI,CAAE,KAAK,EAAE,OAAO,EAAkB,KAAK,GAAG,OAAO,GAAW,KAE5D,MAAO,MAGX,GAAI,GAAI,EAAU,WAAW,GACzB,EAAI,EAAE,UAAU,GAAG,IAAI,GAAW,KAElC,EAAI,KAAK,EACT,EAAQ,UAAU,UAAU,IAE5B,EAAG,EACP,EACA,CACI,GAAI,GACJ,EAEI,GAAI,GAAI,IAAW,KAAK,EAAE,YAAa,GAAI,qBAExC,EAAE,UAAU,KAAK,IAAM,GACvB,CAAE,EAAE,SAAS,GAAG,SAAS,GAAO,OAAO,EAAkB,KAAK,GAAG,OAAO,IAE/E,GAAI,GAAS,KAAK,cAAc,EAAG,EAAG,GAItC,GAHA,EAAI,EAAO,GACX,EAAI,EAAO,GAEP,KAAK,QAAQ,EAAG,GAAG,OAAO,GAG1B,MAAI,GAAE,QAAQ,IAEV,GAAI,EAAE,IAAI,IAGd,EAAI,EAAE,WAAW,GAEV,GAAI,IAAiB,EAAE,SAG/B,EAAE,OAAO,GAAW,MAAQ,EAAE,OAAO,IAE5C,MAAO,OAEX,GAAiB,UAAU,cAAgB,SAAS,EAAE,EAAE,EACxD,CAUI,OATI,GAAI,EAAE,YACN,EAAI,EAAE,kBAEN,EAAK,GAAW,IAChB,EAAK,GAAW,IAChB,EAAK,EACL,EAAK,GAAW,IAChB,EAAK,GAAW,IAEX,EAAI,EAAI,EAAG,GAAK,EAAI,EAAG,EAAE,EAE9B,EAAK,KAAK,QAAQ,EAAI,GAEtB,AAAI,EAAE,QAAQ,GAEV,GAAK,KAAK,QAAQ,EAAI,GACtB,EAAK,KAAK,QAAQ,EAAI,GACtB,EAAK,KAAK,UAAU,EAAG,SAAS,GAAI,SAAS,EAAE,SAAS,KACxD,EAAK,KAAK,UAAU,EAAG,SAAS,GAAI,SAAS,EAAG,UAAU,MAI1D,GAAK,EACL,EAAK,KAAK,UAAU,EAAG,SAAS,GAAI,SAAS,IAC7C,EAAK,KAAK,UAAU,EAAG,SAAS,GAAI,SAAS,EAAE,SAAS,KACxD,EAAK,KAAK,UAAU,EAAG,SAAS,GAAI,SAAS,EAAG,UAAU,MAIlE,EAAK,KAAK,QAAQ,EAAI,GACtB,EAAK,KAAK,QAAQ,EAAI,GACtB,EAAK,KAAK,UAAU,EAAG,SAAS,GAAI,SAAS,IAC7C,EAAK,KAAK,UAAU,EAAG,SAAS,GAAI,SAAS,EAAE,SAAS,KACxD,EAAK,KAAK,QAAQ,EAAI,GAEtB,OAAS,GAAI,EAAG,GAAK,EAAG,EAAE,EAEtB,EAAK,KAAK,QAAQ,EAAI,GACtB,EAAK,KAAK,UAAU,EAAG,SAAS,GAAI,SAAS,EAAG,UAAU,KAC1D,EAAK,KAAK,QAAQ,EAAI,GAG1B,MAAO,CAAE,EAAI,IAGjB,GAAI,IAAU,CACZ,UAAW,GACX,UAAW,GACX,iBAAkB,IAGpB,GAAO,QAAU,KChjBjB,mBAAC,UAAS,EAAM,CAChB,aAQA,GAAI,GAAK,SAAS,EAAM,CACtB,GAAI,GAAG,EAAI,GAAI,cAAa,IAC5B,GAAI,EAAM,IAAK,EAAI,EAAG,EAAI,EAAK,OAAQ,IAAK,EAAE,GAAK,EAAK,GACxD,MAAO,IAIL,EAAc,UAAqB,CAAE,KAAM,IAAI,OAAM,YAErD,EAAK,GAAI,YAAW,IACpB,EAAK,GAAI,YAAW,IAAK,EAAG,GAAK,EAErC,GAAI,GAAM,IACN,EAAM,EAAG,CAAC,IACV,EAAU,EAAG,CAAC,MAAQ,IACtB,EAAI,EAAG,CAAC,MAAQ,KAAQ,MAAQ,MAAQ,MAAQ,MAAQ,KAAQ,IAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,QAChI,EAAK,EAAG,CAAC,MAAQ,KAAQ,MAAQ,MAAQ,MAAQ,MAAQ,KAAQ,IAAQ,MAAQ,MAAQ,MAAQ,KAAQ,MAAQ,MAAQ,MAAQ,OACjI,EAAI,EAAG,CAAC,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,OAChI,EAAI,EAAG,CAAC,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,QAChI,EAAI,EAAG,CAAC,MAAQ,MAAQ,KAAQ,MAAQ,MAAQ,MAAQ,KAAQ,MAAQ,MAAQ,MAAQ,IAAQ,MAAQ,MAAQ,MAAQ,KAAQ,QAEpI,WAAc,EAAG,EAAG,EAAG,EAAG,CACxB,EAAE,GAAQ,GAAK,GAAM,IACrB,EAAE,EAAE,GAAM,GAAK,GAAM,IACrB,EAAE,EAAE,GAAM,GAAM,EAAK,IACrB,EAAE,EAAE,GAAK,EAAI,IACb,EAAE,EAAE,GAAM,GAAK,GAAO,IACtB,EAAE,EAAE,GAAM,GAAK,GAAO,IACtB,EAAE,EAAE,GAAM,GAAM,EAAM,IACtB,EAAE,EAAE,GAAK,EAAI,IAGf,WAAY,EAAG,EAAI,EAAG,EAAI,EAAG,CAC3B,GAAI,GAAE,EAAI,EACV,IAAK,EAAI,EAAG,EAAI,EAAG,IAAK,GAAK,EAAE,EAAG,GAAG,EAAE,EAAG,GAC1C,MAAQ,GAAM,EAAI,IAAO,GAAM,EAGjC,WAA0B,EAAG,EAAI,EAAG,EAAI,CACtC,MAAO,GAAG,EAAE,EAAG,EAAE,EAAG,IAGtB,WAA0B,EAAG,EAAI,EAAG,EAAI,CACtC,MAAO,GAAG,EAAE,EAAG,EAAE,EAAG,IAGtB,WAAsB,EAAG,EAAG,EAAG,EAAG,CAsBhC,OArBI,GAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAG,GAAK,MAAO,GAAM,GAAG,GAAK,MAAO,GAC9E,EAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAG,GAAK,MAAO,GAAM,GAAG,GAAK,MAAO,GAC9E,EAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAG,GAAK,MAAO,GAAM,GAAG,GAAK,MAAO,GAC9E,GAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAE,IAAM,IAAQ,GAAE,IAAM,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAG,GAAK,MAAO,GAAM,GAAG,GAAK,MAAO,GAC9E,GAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAG,GAAK,MAAO,GAAM,GAAG,GAAK,MAAO,GAC9E,GAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAG,GAAK,MAAO,GAAM,GAAG,GAAK,MAAO,GAC9E,GAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAE,IAAM,IAAQ,GAAE,IAAM,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAE,IAAM,IAAQ,GAAE,IAAM,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAE,IAAM,IAAQ,GAAE,IAAM,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAE,IAAM,IAAQ,GAAE,IAAM,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAE,IAAM,IAAQ,GAAE,IAAM,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAE,IAAM,IAAQ,GAAE,IAAM,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAE9E,GAAK,EAAI,GAAK,EAAI,GAAK,EAAI,GAAK,GAAI,GAAK,GAAI,GAAK,GAAI,GAAK,GAAI,GAAK,GACpE,GAAK,GAAI,GAAK,GAAI,GAAM,GAAK,GAAM,GAAK,GAAM,GAAK,GAAM,GAAK,GAAM,GACpE,GAAM,GAAK,EAEN,GAAI,EAAG,GAAI,GAAI,IAAK,EAC3B,EAAI,GAAK,GAAM,EACf,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAK,EACd,IAAO,GAAG,GAAK,IAAK,GAAG,GACvB,EAAI,GAAM,GAAK,EACf,IAAM,GAAG,GAAK,IAAK,GAAG,GAEtB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAK,EACd,IAAO,GAAG,EAAI,IAAK,GAAG,EACtB,EAAI,GAAM,GAAK,EACf,IAAM,GAAG,GAAK,IAAK,GAAG,GACtB,EAAI,GAAK,GAAM,EACf,IAAM,GAAG,GAAK,IAAK,GAAG,GAEtB,EAAI,GAAM,GAAK,EACf,IAAO,GAAG,EAAI,IAAK,GAAG,EACtB,EAAI,GAAM,GAAM,EAChB,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAM,EACf,IAAM,GAAG,GAAK,IAAK,GAAG,GACtB,EAAI,GAAK,GAAK,EACd,IAAO,GAAG,GAAK,IAAK,GAAG,GAEvB,EAAI,GAAM,GAAM,EAChB,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAM,EACf,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAK,EACd,IAAO,GAAG,GAAK,IAAK,GAAG,GACvB,EAAI,GAAM,GAAK,EACf,IAAO,GAAG,GAAK,IAAK,GAAG,GAEvB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,GAAK,IAAK,GAAG,GACtB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,GAAK,IAAK,GAAG,GAEtB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,GAAK,IAAK,GAAG,GACtB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,GAAK,IAAK,GAAG,GAEtB,EAAI,GAAM,GAAK,EACf,IAAO,GAAG,EAAI,IAAK,GAAG,EACtB,EAAI,GAAM,GAAM,EAChB,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAM,EACf,IAAM,GAAG,GAAK,IAAK,GAAG,GACtB,EAAI,GAAK,GAAK,EACd,IAAO,GAAG,GAAK,IAAK,GAAG,GAEvB,EAAI,GAAM,GAAM,EAChB,IAAO,GAAG,EAAI,IAAK,GAAG,EACtB,EAAI,GAAM,GAAM,EAChB,IAAO,GAAG,EAAI,IAAK,GAAG,EACtB,EAAI,GAAM,GAAM,EAChB,IAAO,GAAG,GAAK,IAAK,GAAG,GACvB,EAAI,GAAM,GAAM,EAChB,IAAO,GAAG,GAAK,IAAK,GAAG,GAExB,GAAM,GAAM,EAAK,EACjB,GAAM,GAAM,EAAK,EACjB,GAAM,GAAM,EAAK,EACjB,GAAM,GAAM,GAAK,EACjB,GAAM,GAAM,GAAK,EACjB,GAAM,GAAM,GAAK,EACjB,GAAM,GAAM,GAAK,EACjB,GAAM,GAAM,GAAK,EACjB,GAAM,GAAM,GAAK,EACjB,GAAM,GAAM,GAAK,EAClB,GAAM,GAAM,GAAM,EAClB,GAAM,GAAM,GAAM,EAClB,GAAM,GAAM,GAAM,EAClB,GAAM,GAAM,GAAM,EAClB,GAAM,GAAM,GAAM,EAClB,GAAM,GAAM,GAAM,EAElB,EAAG,GAAK,KAAQ,EAAI,IACpB,EAAG,GAAK,KAAQ,EAAI,IACpB,EAAG,GAAK,KAAO,GAAK,IACpB,EAAG,GAAK,KAAO,GAAK,IAEpB,EAAG,GAAK,KAAQ,EAAI,IACpB,EAAG,GAAK,KAAQ,EAAI,IACpB,EAAG,GAAK,KAAO,GAAK,IACpB,EAAG,GAAK,KAAO,GAAK,IAEpB,EAAG,GAAK,KAAQ,EAAI,IACpB,EAAG,GAAK,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAO,GAAK,IACpB,EAAE,IAAM,KAAO,GAAK,IAEpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAO,GAAK,IACpB,EAAE,IAAM,KAAO,GAAK,IAEpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAO,GAAK,IACpB,EAAE,IAAM,KAAO,GAAK,IAEpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAO,GAAK,IACpB,EAAE,IAAM,KAAO,GAAK,IAEpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAO,GAAK,IACpB,EAAE,IAAM,KAAO,GAAK,IAEpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAO,GAAK,IACpB,EAAE,IAAM,KAAO,GAAK,IAEpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAO,GAAK,IACpB,EAAE,IAAM,KAAO,GAAK,IAEpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAO,GAAK,IACpB,EAAE,IAAM,KAAO,GAAK,IAEpB,EAAE,IAAM,KAAS,EAAI,IACrB,EAAE,IAAM,KAAS,EAAI,IACrB,EAAE,IAAM,KAAQ,GAAK,IACrB,EAAE,IAAM,KAAQ,GAAK,IAErB,EAAE,IAAM,KAAS,EAAI,IACrB,EAAE,IAAM,KAAS,EAAI,IACrB,EAAE,IAAM,KAAQ,GAAK,IACrB,EAAE,IAAM,KAAQ,GAAK,IAErB,EAAE,IAAM,KAAS,EAAI,IACrB,EAAE,IAAM,KAAS,EAAI,IACrB,EAAE,IAAM,KAAQ,GAAK,IACrB,EAAE,IAAM,KAAQ,GAAK,IAErB,EAAE,IAAM,KAAS,EAAI,IACrB,EAAE,IAAM,KAAS,EAAI,IACrB,EAAE,IAAM,KAAQ,GAAK,IACrB,EAAE,IAAM,KAAQ,GAAK,IAErB,EAAE,IAAM,KAAS,EAAI,IACrB,EAAE,IAAM,KAAS,EAAI,IACrB,EAAE,IAAM,KAAQ,GAAK,IACrB,EAAE,IAAM,KAAQ,GAAK,IAErB,EAAE,IAAM,KAAS,EAAI,IACrB,EAAE,IAAM,KAAS,EAAI,IACrB,EAAE,IAAM,KAAQ,GAAK,IACrB,EAAE,IAAM,KAAQ,GAAK,IAGvB,WAAuB,EAAE,EAAE,EAAE,EAAG,CAsB9B,OArBI,GAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAG,GAAK,MAAO,GAAM,GAAG,GAAK,MAAO,GAC9E,EAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAG,GAAK,MAAO,GAAM,GAAG,GAAK,MAAO,GAC9E,EAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAG,GAAK,MAAO,GAAM,GAAG,GAAK,MAAO,GAC9E,GAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAE,IAAM,IAAQ,GAAE,IAAM,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAG,GAAK,MAAO,GAAM,GAAG,GAAK,MAAO,GAC9E,GAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAG,GAAK,MAAO,GAAM,GAAG,GAAK,MAAO,GAC9E,GAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAG,GAAK,MAAO,GAAM,GAAG,GAAK,MAAO,GAC9E,GAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAE,IAAM,IAAQ,GAAE,IAAM,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAG,GAAK,IAAQ,GAAG,GAAK,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAE,IAAM,IAAQ,GAAE,IAAM,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAE,IAAM,IAAQ,GAAE,IAAM,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAE,IAAM,IAAQ,GAAE,IAAM,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAE,IAAM,IAAQ,GAAE,IAAM,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAC9E,GAAM,EAAE,IAAM,IAAQ,GAAE,IAAM,MAAO,EAAK,GAAE,IAAM,MAAO,GAAM,GAAE,IAAM,MAAO,GAE9E,GAAK,EAAI,GAAK,EAAI,GAAK,EAAI,GAAK,GAAI,GAAK,GAAI,GAAK,GAAI,GAAK,GAAI,GAAK,GACpE,GAAK,GAAI,GAAK,GAAI,GAAM,GAAK,GAAM,GAAK,GAAM,GAAK,GAAM,GAAK,GAAM,GACpE,GAAM,GAAK,EAEN,GAAI,EAAG,GAAI,GAAI,IAAK,EAC3B,EAAI,GAAK,GAAM,EACf,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAK,EACd,IAAO,GAAG,GAAK,IAAK,GAAG,GACvB,EAAI,GAAM,GAAK,EACf,IAAM,GAAG,GAAK,IAAK,GAAG,GAEtB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAK,EACd,IAAO,GAAG,EAAI,IAAK,GAAG,EACtB,EAAI,GAAM,GAAK,EACf,IAAM,GAAG,GAAK,IAAK,GAAG,GACtB,EAAI,GAAK,GAAM,EACf,IAAM,GAAG,GAAK,IAAK,GAAG,GAEtB,EAAI,GAAM,GAAK,EACf,IAAO,GAAG,EAAI,IAAK,GAAG,EACtB,EAAI,GAAM,GAAM,EAChB,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAM,EACf,IAAM,GAAG,GAAK,IAAK,GAAG,GACtB,EAAI,GAAK,GAAK,EACd,IAAO,GAAG,GAAK,IAAK,GAAG,GAEvB,EAAI,GAAM,GAAM,EAChB,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAM,EACf,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAK,EACd,IAAO,GAAG,GAAK,IAAK,GAAG,GACvB,EAAI,GAAM,GAAK,EACf,IAAO,GAAG,GAAK,IAAK,GAAG,GAEvB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,GAAK,IAAK,GAAG,GACtB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,GAAK,IAAK,GAAG,GAEtB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,GAAK,IAAK,GAAG,GACtB,EAAI,GAAK,GAAK,EACd,IAAM,GAAG,GAAK,IAAK,GAAG,GAEtB,EAAI,GAAM,GAAK,EACf,IAAO,GAAG,EAAI,IAAK,GAAG,EACtB,EAAI,GAAM,GAAM,EAChB,IAAM,GAAG,EAAI,IAAK,GAAG,EACrB,EAAI,GAAK,GAAM,EACf,IAAM,GAAG,GAAK,IAAK,GAAG,GACtB,EAAI,GAAK,GAAK,EACd,IAAO,GAAG,GAAK,IAAK,GAAG,GAEvB,EAAI,GAAM,GAAM,EAChB,IAAO,GAAG,EAAI,IAAK,GAAG,EACtB,EAAI,GAAM,GAAM,EAChB,IAAO,GAAG,EAAI,IAAK,GAAG,EACtB,EAAI,GAAM,GAAM,EAChB,IAAO,GAAG,GAAK,IAAK,GAAG,GACvB,EAAI,GAAM,GAAM,EAChB,IAAO,GAAG,GAAK,IAAK,GAAG,GAGzB,EAAG,GAAK,KAAQ,EAAI,IACpB,EAAG,GAAK,KAAQ,EAAI,IACpB,EAAG,GAAK,KAAO,GAAK,IACpB,EAAG,GAAK,KAAO,GAAK,IAEpB,EAAG,GAAK,KAAQ,EAAI,IACpB,EAAG,GAAK,KAAQ,EAAI,IACpB,EAAG,GAAK,KAAO,GAAK,IACpB,EAAG,GAAK,KAAO,GAAK,IAEpB,EAAG,GAAK,KAAS,EAAI,IACrB,EAAG,GAAK,KAAS,EAAI,IACrB,EAAE,IAAM,KAAQ,GAAK,IACrB,EAAE,IAAM,KAAQ,GAAK,IAErB,EAAE,IAAM,KAAS,EAAI,IACrB,EAAE,IAAM,KAAS,EAAI,IACrB,EAAE,IAAM,KAAQ,GAAK,IACrB,EAAE,IAAM,KAAQ,GAAK,IAErB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAO,GAAK,IACpB,EAAE,IAAM,KAAO,GAAK,IAEpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAO,GAAK,IACpB,EAAE,IAAM,KAAO,GAAK,IAEpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAO,GAAK,IACpB,EAAE,IAAM,KAAO,GAAK,IAEpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAQ,EAAI,IACpB,EAAE,IAAM,KAAO,GAAK,IACpB,EAAE,IAAM,KAAO,GAAK,IAGtB,WAA6B,EAAI,EAAI,EAAE,EAAG,CACxC,EAAa,EAAI,EAAI,EAAE,GAGzB,WAA8B,EAAI,EAAI,EAAE,EAAG,CACzC,EAAc,EAAI,EAAI,EAAE,GAG1B,GAAI,GAAQ,GAAI,YAAW,CAAC,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,MAGhG,WAAmC,EAAE,EAAK,EAAE,EAAK,EAAE,EAAE,EAAG,CACtD,GAAI,IAAI,GAAI,YAAW,IAAK,GAAI,GAAI,YAAW,IAC3C,GAAG,GACP,IAAK,GAAI,EAAG,GAAI,GAAI,KAAK,GAAE,IAAK,EAChC,IAAK,GAAI,EAAG,GAAI,EAAG,KAAK,GAAE,IAAK,EAAE,IACjC,KAAO,GAAK,IAAI,CAEd,IADA,EAAoB,GAAE,GAAE,EAAE,GACrB,GAAI,EAAG,GAAI,GAAI,KAAK,EAAE,EAAK,IAAK,EAAE,EAAK,IAAK,GAAE,IAEnD,IADA,GAAI,EACC,GAAI,EAAG,GAAI,GAAI,KAClB,GAAI,GAAK,IAAE,IAAK,KAAQ,EACxB,GAAE,IAAK,GAAI,IACX,MAAO,EAET,GAAK,GACL,GAAQ,GACR,GAAQ,GAEV,GAAI,EAAI,EAEN,IADA,EAAoB,GAAE,GAAE,EAAE,GACrB,GAAI,EAAG,GAAI,EAAG,KAAK,EAAE,EAAK,IAAK,EAAE,EAAK,IAAK,GAAE,IAEpD,MAAO,GAGT,WAA+B,EAAE,EAAK,EAAE,EAAE,EAAG,CAC3C,GAAI,GAAI,GAAI,YAAW,IAAK,EAAI,GAAI,YAAW,IAC3C,GAAG,GACP,IAAK,GAAI,EAAG,GAAI,GAAI,KAAK,EAAE,IAAK,EAChC,IAAK,GAAI,EAAG,GAAI,EAAG,KAAK,EAAE,IAAK,EAAE,IACjC,KAAO,GAAK,IAAI,CAEd,IADA,EAAoB,EAAE,EAAE,EAAE,GACrB,GAAI,EAAG,GAAI,GAAI,KAAK,EAAE,EAAK,IAAK,EAAE,IAEvC,IADA,GAAI,EACC,GAAI,EAAG,GAAI,GAAI,KAClB,GAAI,GAAK,GAAE,IAAK,KAAQ,EACxB,EAAE,IAAK,GAAI,IACX,MAAO,EAET,GAAK,GACL,GAAQ,GAEV,GAAI,EAAI,EAEN,IADA,EAAoB,EAAE,EAAE,EAAE,GACrB,GAAI,EAAG,GAAI,EAAG,KAAK,EAAE,EAAK,IAAK,EAAE,IAExC,MAAO,GAGT,WAAuB,EAAE,EAAK,EAAE,EAAE,EAAG,CACnC,GAAI,GAAI,GAAI,YAAW,IACvB,EAAqB,EAAE,EAAE,EAAE,GAE3B,OADI,GAAK,GAAI,YAAW,GACf,GAAI,EAAG,GAAI,EAAG,KAAK,EAAG,IAAK,EAAE,GAAE,IACxC,MAAO,GAAsB,EAAE,EAAK,EAAE,EAAG,GAG3C,WAA2B,EAAE,EAAK,EAAE,EAAK,EAAE,EAAE,EAAG,CAC9C,GAAI,IAAI,GAAI,YAAW,IACvB,EAAqB,GAAE,EAAE,EAAE,GAE3B,OADI,IAAK,GAAI,YAAW,GACf,GAAI,EAAG,GAAI,EAAG,KAAK,GAAG,IAAK,EAAE,GAAE,IACxC,MAAO,GAA0B,EAAE,EAAK,EAAE,EAAK,EAAE,GAAG,IAQtD,GAAI,GAAW,SAAS,EAAK,CAC3B,KAAK,OAAS,GAAI,YAAW,IAC7B,KAAK,EAAI,GAAI,aAAY,IACzB,KAAK,EAAI,GAAI,aAAY,IACzB,KAAK,IAAM,GAAI,aAAY,GAC3B,KAAK,SAAW,EAChB,KAAK,IAAM,EAEX,GAAI,GAAI,EAAI,EAAI,EAAI,EAAI,EAAI,GAAI,GAEhC,EAAK,EAAK,GAAK,IAAQ,GAAK,GAAK,MAAS,EAAG,KAAK,EAAE,GAAO,EAA2B,KACtF,EAAK,EAAK,GAAK,IAAQ,GAAK,GAAK,MAAS,EAAG,KAAK,EAAE,GAAO,KAAO,GAAO,GAAO,GAAM,KACtF,EAAK,EAAK,GAAK,IAAQ,GAAK,GAAK,MAAS,EAAG,KAAK,EAAE,GAAO,KAAO,GAAO,GAAO,GAAM,KACtF,EAAK,EAAK,GAAK,IAAQ,GAAK,GAAK,MAAS,EAAG,KAAK,EAAE,GAAO,KAAQ,EAAM,GAAO,GAAM,KACtF,EAAK,EAAK,GAAK,IAAQ,GAAK,GAAK,MAAS,EAAG,KAAK,EAAE,GAAO,KAAQ,EAAM,GAAM,IAAO,IACtF,KAAK,EAAE,GAAO,IAAQ,EAAM,KAC5B,EAAK,EAAI,IAAM,IAAQ,GAAI,IAAM,MAAS,EAAG,KAAK,EAAE,GAAO,KAAO,GAAO,GAAO,GAAM,KACtF,GAAK,EAAI,IAAM,IAAQ,GAAI,IAAM,MAAS,EAAG,KAAK,EAAE,GAAO,KAAO,GAAO,IAAO,GAAM,KACtF,GAAK,EAAI,IAAM,IAAQ,GAAI,IAAM,MAAS,EAAG,KAAK,EAAE,GAAO,MAAQ,EAAM,IAAO,GAAM,KACtF,KAAK,EAAE,GAAO,KAAQ,EAAM,IAE5B,KAAK,IAAI,GAAK,EAAI,IAAM,IAAQ,GAAI,IAAM,MAAS,EACnD,KAAK,IAAI,GAAK,EAAI,IAAM,IAAQ,GAAI,IAAM,MAAS,EACnD,KAAK,IAAI,GAAK,EAAI,IAAM,IAAQ,GAAI,IAAM,MAAS,EACnD,KAAK,IAAI,GAAK,EAAI,IAAM,IAAQ,GAAI,IAAM,MAAS,EACnD,KAAK,IAAI,GAAK,EAAI,IAAM,IAAQ,GAAI,IAAM,MAAS,EACnD,KAAK,IAAI,GAAK,EAAI,IAAM,IAAQ,GAAI,IAAM,MAAS,EACnD,KAAK,IAAI,GAAK,EAAI,IAAM,IAAQ,GAAI,IAAM,MAAS,EACnD,KAAK,IAAI,GAAK,EAAI,IAAM,IAAQ,GAAI,IAAM,MAAS,GAGrD,EAAS,UAAU,OAAS,SAAS,EAAG,EAAM,EAAO,CA2BnD,OA1BI,GAAQ,KAAK,IAAM,EAAK,GAAK,GAC7B,EAAI,EAAI,EAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAChC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAEpC,GAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GAEZ,GAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GACZ,EAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GACZ,GAAK,KAAK,EAAE,GAET,GAAS,IACd,EAAK,EAAE,EAAM,GAAK,IAAQ,GAAE,EAAM,GAAK,MAAS,EAAG,IAAQ,EAA2B,KACtF,EAAK,EAAE,EAAM,GAAK,IAAQ,GAAE,EAAM,GAAK,MAAS,EAAG,IAAQ,KAAO,GAAO,GAAO,GAAM,KACtF,EAAK,EAAE,EAAM,GAAK,IAAQ,GAAE,EAAM,GAAK,MAAS,EAAG,IAAQ,KAAO,GAAO,GAAO,GAAM,KACtF,GAAK,EAAE,EAAM,GAAK,IAAQ,GAAE,EAAM,GAAK,MAAS,EAAG,IAAQ,KAAQ,EAAM,IAAO,GAAM,KACtF,GAAK,EAAE,EAAM,GAAK,IAAQ,GAAE,EAAM,GAAK,MAAS,EAAG,IAAQ,MAAQ,EAAM,IAAM,IAAO,KACtF,IAAQ,KAAQ,EAAM,KACtB,GAAK,EAAE,EAAK,IAAM,IAAQ,GAAE,EAAK,IAAM,MAAS,EAAG,IAAQ,MAAO,GAAO,IAAO,GAAM,KACtF,GAAK,EAAE,EAAK,IAAM,IAAQ,GAAE,EAAK,IAAM,MAAS,EAAG,IAAQ,MAAO,GAAO,IAAO,GAAM,KACtF,GAAK,EAAE,EAAK,IAAM,IAAQ,GAAE,EAAK,IAAM,MAAS,EAAG,IAAQ,MAAQ,EAAM,IAAO,GAAM,KACtF,IAAQ,KAAO,EAAM,EAErB,GAAI,EAEJ,GAAK,GACL,IAAM,GAAK,GACX,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,GAAK,KAAO,GAAK,IAAM,KACvB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,GAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,KAAO,GAAK,IAAM,KAExB,GAAK,GACL,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,GAAK,KAAO,GAAK,IAAM,KACvB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,GAChB,IAAM,GAAM,GAAI,IAChB,IAAM,KAAO,GAAK,IAAM,KAExB,GAAK,GACL,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,GAAK,KAAO,GAAK,IAAM,KACvB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,GAChB,IAAM,KAAO,GAAK,IAAM,KAExB,GAAK,GACL,IAAM,GAAK,EACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAM,GAAI,IAChB,GAAK,KAAO,GAAK,IAAM,KACvB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,KAAO,GAAK,IAAM,KAExB,GAAK,GACL,IAAM,GAAK,GACX,IAAM,GAAK,EACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,GAAK,KAAO,GAAK,IAAM,KACvB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,KAAO,GAAK,IAAM,KAExB,GAAK,GACL,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,EACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,GAAK,KAAO,GAAK,IAAM,KACvB,IAAM,GAAK,GACX,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,KAAO,GAAK,IAAM,KAExB,GAAK,GACL,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,EACX,IAAM,GAAK,GACX,GAAK,KAAO,GAAK,IAAM,KACvB,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,KAAO,GAAK,IAAM,KAExB,GAAK,GACL,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,EACX,GAAK,KAAO,GAAK,IAAM,KACvB,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAM,GAAI,IAChB,IAAM,GAAM,GAAI,IAChB,IAAM,KAAO,GAAK,IAAM,KAExB,GAAK,GACL,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,GAAK,KAAO,GAAK,IAAM,KACvB,IAAM,GAAK,EACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAM,GAAI,IAChB,IAAM,KAAO,GAAK,IAAM,KAExB,GAAK,GACL,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,GAAK,KAAO,GAAK,IAAM,KACvB,IAAM,GAAK,GACX,IAAM,GAAK,EACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,GAAK,GACX,IAAM,KAAO,GAAK,IAAM,KAExB,GAAO,KAAK,GAAK,GAAM,EACvB,GAAK,GAAI,GAAM,EACf,GAAK,GAAI,KACT,GAAK,KAAM,GACX,IAAM,GAEN,GAAK,GACL,GAAK,GACL,GAAK,GACL,GAAK,GACL,GAAK,GACL,GAAK,GACL,GAAK,GACL,GAAK,GACL,GAAK,GACL,GAAK,GAEL,GAAQ,GACR,GAAS,GAEX,KAAK,EAAE,GAAK,GACZ,KAAK,EAAE,GAAK,GACZ,KAAK,EAAE,GAAK,GACZ,KAAK,EAAE,GAAK,GACZ,KAAK,EAAE,GAAK,GACZ,KAAK,EAAE,GAAK,GACZ,KAAK,EAAE,GAAK,GACZ,KAAK,EAAE,GAAK,GACZ,KAAK,EAAE,GAAK,GACZ,KAAK,EAAE,GAAK,IAGd,EAAS,UAAU,OAAS,SAAS,EAAK,EAAQ,CAChD,GAAI,GAAI,GAAI,aAAY,IACpB,EAAG,EAAM,EAAG,EAEhB,GAAI,KAAK,SAAU,CAGjB,IAFA,EAAI,KAAK,SACT,KAAK,OAAO,KAAO,EACZ,EAAI,GAAI,IAAK,KAAK,OAAO,GAAK,EACrC,KAAK,IAAM,EACX,KAAK,OAAO,KAAK,OAAQ,EAAG,IAK9B,IAFA,EAAI,KAAK,EAAE,KAAO,GAClB,KAAK,EAAE,IAAM,KACR,EAAI,EAAG,EAAI,GAAI,IAClB,KAAK,EAAE,IAAM,EACb,EAAI,KAAK,EAAE,KAAO,GAClB,KAAK,EAAE,IAAM,KAaf,IAXA,KAAK,EAAE,IAAO,EAAI,EAClB,EAAI,KAAK,EAAE,KAAO,GAClB,KAAK,EAAE,IAAM,KACb,KAAK,EAAE,IAAM,EACb,EAAI,KAAK,EAAE,KAAO,GAClB,KAAK,EAAE,IAAM,KACb,KAAK,EAAE,IAAM,EAEb,EAAE,GAAK,KAAK,EAAE,GAAK,EACnB,EAAI,EAAE,KAAO,GACb,EAAE,IAAM,KACH,EAAI,EAAG,EAAI,GAAI,IAClB,EAAE,GAAK,KAAK,EAAE,GAAK,EACnB,EAAI,EAAE,KAAO,GACb,EAAE,IAAM,KAKV,IAHA,EAAE,IAAO,GAAK,GAEd,EAAQ,GAAI,GAAK,EACZ,EAAI,EAAG,EAAI,GAAI,IAAK,EAAE,IAAM,EAEjC,IADA,EAAO,CAAC,EACH,EAAI,EAAG,EAAI,GAAI,IAAK,KAAK,EAAE,GAAM,KAAK,EAAE,GAAK,EAAQ,EAAE,GAa5D,IAXA,KAAK,EAAE,GAAO,MAAK,EAAE,GAAc,KAAK,EAAE,IAAM,IAA2B,MAC3E,KAAK,EAAE,GAAO,MAAK,EAAE,KAAQ,EAAM,KAAK,EAAE,IAAM,IAA2B,MAC3E,KAAK,EAAE,GAAO,MAAK,EAAE,KAAQ,EAAM,KAAK,EAAE,IAAO,GAA0B,MAC3E,KAAK,EAAE,GAAO,MAAK,EAAE,KAAQ,EAAM,KAAK,EAAE,IAAO,GAA0B,MAC3E,KAAK,EAAE,GAAO,MAAK,EAAE,KAAO,GAAO,KAAK,EAAE,IAAO,EAAM,KAAK,EAAE,IAAM,IAAO,MAC3E,KAAK,EAAE,GAAO,MAAK,EAAE,KAAQ,EAAM,KAAK,EAAE,IAAM,IAA2B,MAC3E,KAAK,EAAE,GAAO,MAAK,EAAE,KAAQ,EAAM,KAAK,EAAE,IAAO,GAA0B,MAC3E,KAAK,EAAE,GAAO,MAAK,EAAE,KAAQ,EAAM,KAAK,EAAE,IAAO,GAA0B,MAE3E,EAAI,KAAK,EAAE,GAAK,KAAK,IAAI,GACzB,KAAK,EAAE,GAAK,EAAI,MACX,EAAI,EAAG,EAAI,EAAG,IACjB,EAAO,MAAK,EAAE,GAAK,KAAK,IAAI,GAAM,GAAM,KAAM,IAAO,EACrD,KAAK,EAAE,GAAK,EAAI,MAGlB,EAAI,EAAQ,GAAM,KAAK,EAAE,KAAO,EAAK,IACrC,EAAI,EAAQ,GAAM,KAAK,EAAE,KAAO,EAAK,IACrC,EAAI,EAAQ,GAAM,KAAK,EAAE,KAAO,EAAK,IACrC,EAAI,EAAQ,GAAM,KAAK,EAAE,KAAO,EAAK,IACrC,EAAI,EAAQ,GAAM,KAAK,EAAE,KAAO,EAAK,IACrC,EAAI,EAAQ,GAAM,KAAK,EAAE,KAAO,EAAK,IACrC,EAAI,EAAQ,GAAM,KAAK,EAAE,KAAO,EAAK,IACrC,EAAI,EAAQ,GAAM,KAAK,EAAE,KAAO,EAAK,IACrC,EAAI,EAAQ,GAAM,KAAK,EAAE,KAAO,EAAK,IACrC,EAAI,EAAQ,GAAM,KAAK,EAAE,KAAO,EAAK,IACrC,EAAI,EAAO,IAAO,KAAK,EAAE,KAAO,EAAK,IACrC,EAAI,EAAO,IAAO,KAAK,EAAE,KAAO,EAAK,IACrC,EAAI,EAAO,IAAO,KAAK,EAAE,KAAO,EAAK,IACrC,EAAI,EAAO,IAAO,KAAK,EAAE,KAAO,EAAK,IACrC,EAAI,EAAO,IAAO,KAAK,EAAE,KAAO,EAAK,IACrC,EAAI,EAAO,IAAO,KAAK,EAAE,KAAO,EAAK,KAGvC,EAAS,UAAU,OAAS,SAAS,EAAG,EAAM,EAAO,CACnD,GAAI,GAAG,EAEP,GAAI,KAAK,SAAU,CAIjB,IAHA,EAAQ,GAAK,KAAK,SACd,EAAO,GACT,GAAO,GACJ,EAAI,EAAG,EAAI,EAAM,IACpB,KAAK,OAAO,KAAK,SAAW,GAAK,EAAE,EAAK,GAI1C,GAHA,GAAS,EACT,GAAQ,EACR,KAAK,UAAY,EACb,KAAK,SAAW,GAClB,OACF,KAAK,OAAO,KAAK,OAAQ,EAAG,IAC5B,KAAK,SAAW,EAUlB,GAPI,GAAS,IACX,GAAO,EAAS,EAAQ,GACxB,KAAK,OAAO,EAAG,EAAM,GACrB,GAAQ,EACR,GAAS,GAGP,EAAO,CACT,IAAK,EAAI,EAAG,EAAI,EAAO,IACrB,KAAK,OAAO,KAAK,SAAW,GAAK,EAAE,EAAK,GAC1C,KAAK,UAAY,IAIrB,WAA4B,EAAK,EAAQ,EAAG,EAAM,EAAG,EAAG,CACtD,GAAI,GAAI,GAAI,GAAS,GACrB,SAAE,OAAO,EAAG,EAAM,GAClB,EAAE,OAAO,EAAK,GACP,EAGT,WAAmC,EAAG,EAAM,EAAG,EAAM,EAAG,EAAG,CACzD,GAAI,GAAI,GAAI,YAAW,IACvB,SAAmB,EAAE,EAAE,EAAE,EAAK,EAAE,GACzB,EAAiB,EAAE,EAAK,EAAE,GAGnC,WAA0B,EAAE,EAAE,EAAE,EAAE,EAAG,CACnC,GAAI,GACJ,GAAI,EAAI,GAAI,MAAO,GAGnB,IAFA,EAAkB,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAC9B,EAAmB,EAAG,GAAI,EAAG,GAAI,EAAI,GAAI,GACpC,EAAI,EAAG,EAAI,GAAI,IAAK,EAAE,GAAK,EAChC,MAAO,GAGT,WAA+B,EAAE,EAAE,EAAE,EAAE,EAAG,CACxC,GAAI,GACA,EAAI,GAAI,YAAW,IAGvB,GAFI,EAAI,IACR,GAAc,EAAE,EAAE,GAAG,EAAE,GACnB,EAA0B,EAAG,GAAG,EAAG,GAAG,EAAI,GAAG,KAAO,GAAG,MAAO,GAElE,IADA,EAAkB,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GACzB,EAAI,EAAG,EAAI,GAAI,IAAK,EAAE,GAAK,EAChC,MAAO,GAGT,WAAkB,EAAG,EAAG,CACtB,GAAI,GACJ,IAAK,EAAI,EAAG,EAAI,GAAI,IAAK,EAAE,GAAK,EAAE,GAAG,EAGvC,YAAkB,EAAG,CACnB,GAAI,GAAG,EAAG,EAAI,EACd,IAAK,EAAI,EAAG,EAAI,GAAI,IAClB,EAAI,EAAE,GAAK,EAAI,MACf,EAAI,KAAK,MAAM,EAAI,OACnB,EAAE,GAAK,EAAI,EAAI,MAEjB,EAAE,IAAM,EAAE,EAAI,GAAM,GAAE,GAGxB,YAAkB,EAAG,EAAG,EAAG,CAEzB,OADI,GAAG,EAAI,CAAE,GAAE,GACN,EAAI,EAAG,EAAI,GAAI,IACtB,EAAI,EAAK,GAAE,GAAK,EAAE,IAClB,EAAE,IAAM,EACR,EAAE,IAAM,EAIZ,YAAmB,EAAG,EAAG,CACvB,GAAI,GAAG,EAAG,EACN,EAAI,IAAM,EAAI,IAClB,IAAK,EAAI,EAAG,EAAI,GAAI,IAAK,EAAE,GAAK,EAAE,GAIlC,IAHA,GAAS,GACT,GAAS,GACT,GAAS,GACJ,EAAI,EAAG,EAAI,EAAG,IAAK,CAEtB,IADA,EAAE,GAAK,EAAE,GAAK,MACT,EAAI,EAAG,EAAI,GAAI,IAClB,EAAE,GAAK,EAAE,GAAK,MAAW,GAAE,EAAE,IAAI,GAAM,GACvC,EAAE,EAAE,IAAM,MAEZ,EAAE,IAAM,EAAE,IAAM,MAAW,GAAE,KAAK,GAAM,GACxC,EAAK,EAAE,KAAK,GAAM,EAClB,EAAE,KAAO,MACT,GAAS,EAAG,EAAG,EAAE,GAEnB,IAAK,EAAI,EAAG,EAAI,GAAI,IAClB,EAAE,EAAE,GAAK,EAAE,GAAK,IAChB,EAAE,EAAE,EAAE,GAAK,EAAE,IAAI,EAIrB,YAAkB,EAAG,EAAG,CACtB,GAAI,GAAI,GAAI,YAAW,IAAK,EAAI,GAAI,YAAW,IAC/C,UAAU,EAAG,GACb,GAAU,EAAG,GACN,EAAiB,EAAG,EAAG,EAAG,GAGnC,YAAkB,EAAG,CACnB,GAAI,GAAI,GAAI,YAAW,IACvB,UAAU,EAAG,GACN,EAAE,GAAK,EAGhB,YAAqB,EAAG,EAAG,CACzB,GAAI,GACJ,IAAK,EAAI,EAAG,EAAI,GAAI,IAAK,EAAE,GAAK,EAAE,EAAE,GAAM,GAAE,EAAE,EAAE,IAAM,GACtD,EAAE,KAAO,MAGX,YAAW,EAAG,EAAG,EAAG,CAClB,OAAS,GAAI,EAAG,EAAI,GAAI,IAAK,EAAE,GAAK,EAAE,GAAK,EAAE,GAG/C,YAAW,EAAG,EAAG,EAAG,CAClB,OAAS,GAAI,EAAG,EAAI,GAAI,IAAK,EAAE,GAAK,EAAE,GAAK,EAAE,GAG/C,WAAW,EAAG,EAAG,EAAG,CAClB,GAAI,GAAG,EACJ,EAAK,EAAI,EAAK,EAAI,GAAK,EAAI,GAAK,EAAI,GAAK,EAAI,GAAK,EAAI,GAAK,EAAI,GAAK,EACpE,GAAK,EAAI,GAAK,EAAG,GAAM,EAAG,GAAM,EAAG,GAAM,EAAG,GAAM,EAAG,GAAM,EAAG,GAAM,EACrE,GAAM,EAAG,GAAM,EAAG,GAAM,EAAG,GAAM,EAAG,GAAM,EAAG,GAAM,EAAG,GAAM,EAAG,GAAM,EACrE,GAAM,EAAG,GAAM,EAAG,GAAM,EAAG,GAAM,EAAG,GAAM,EAAG,GAAM,EAAG,GAAM,EAC5D,EAAK,EAAE,GACP,GAAK,EAAE,GACP,GAAK,EAAE,GACP,GAAK,EAAE,GACP,GAAK,EAAE,GACP,GAAK,EAAE,GACP,GAAK,EAAE,GACP,GAAK,EAAE,GACP,GAAK,EAAE,GACP,EAAK,EAAE,GACP,EAAM,EAAE,IACR,EAAM,EAAE,IACR,EAAM,EAAE,IACR,GAAM,EAAE,IACR,GAAM,EAAE,IACR,GAAM,EAAE,IAEV,EAAI,EAAE,GACN,GAAM,EAAI,EACV,GAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,EACV,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,EAAI,EAAE,GACN,GAAM,EAAI,EACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,EAAI,EAAE,GACN,IAAM,EAAI,EACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAO,EAAI,GACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,EAAI,EAAE,GACN,IAAM,EAAI,EACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,EAAI,EAAE,GACN,IAAM,EAAI,EACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,EAAI,EAAE,GACN,IAAM,EAAI,EACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,EAAI,EAAE,GACN,IAAM,EAAI,EACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,EAAI,EAAE,GACN,IAAM,EAAI,EACV,IAAM,EAAI,GACV,IAAM,EAAI,GACV,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,EAAI,EAAE,GACN,IAAM,EAAI,EACV,IAAM,EAAI,GACV,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,EAAI,EAAE,GACN,IAAM,EAAI,EACV,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,EAAI,EAAE,IACN,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,EAAI,EAAE,IACN,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,EAAI,EAAE,IACN,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,EAAI,EAAE,IACN,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,EAAI,EAAE,IACN,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,EAAI,EAAE,IACN,IAAO,EAAI,EACX,IAAO,EAAI,GACX,IAAO,EAAI,GACX,IAAO,EAAI,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AK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,IAAI,KAAK,KACloB,aAAa,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAC1gB,aAAa,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KACjhB,aAAa,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAC1gB,aAAa,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,MACtmB,aAAa,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MACtmB,aAAa,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,IAAI,KAAK,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,MACjhB,aAAa,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAC3kB,cAAc,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAC5gB,cAAc,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,MAC9gB,cAAc,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,IAAI,IAAI,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KACjiB,cAAc,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAC5gB,cAAc,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAC9gB,SAAS,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAC/nB,SAAS,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAC/nB,UAAY,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,MAAM,MAAM,KAAK,IAAI,KAAK,KAAK,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAC7iB,cAAc,CAAC,KAAK,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAClnB,eAAe,CAAC,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAC7hB,eAAe,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,KAAK,KAAK,KAAK,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAC3nB,eAAe,CAAC,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAC7hB,eAAe,CAAC,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,MAChiB,eAAe,CAAC,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAC7hB,eAAe,CAAC,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAC7lB,eAAe,CAAC,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,KAAK,KAAK,MAC5lB,eAAe,CAAC,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAC/hB,eAAe,CAAC,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAC9hB,iBAAiB,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAA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",
  "names": []
}
