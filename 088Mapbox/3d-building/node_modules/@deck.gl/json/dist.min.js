!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.deck=n():e.deck=n()}(window,(function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=6)}([function(e,n){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t},function(e,n){e.exports=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}},function(e,n){function t(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}},function(e,n){e.exports=function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}},function(e,n,t){const r=t(10),o={"||":function(e,n){return e||n},"&&":function(e,n){return e&&n},"|":function(e,n){return e|n},"^":function(e,n){return e^n},"&":function(e,n){return e&n},"==":function(e,n){return e==n},"!=":function(e,n){return e!=n},"===":function(e,n){return e===n},"!==":function(e,n){return e!==n},"<":function(e,n){return e<n},">":function(e,n){return e>n},"<=":function(e,n){return e<=n},">=":function(e,n){return e>=n},"<<":function(e,n){return e<<n},">>":function(e,n){return e>>n},">>>":function(e,n){return e>>>n},"+":function(e,n){return e+n},"-":function(e,n){return e-n},"*":function(e,n){return e*n},"/":function(e,n){return e/n},"%":function(e,n){return e%n}},i={"-":function(e){return-e},"+":function(e){return+e},"~":function(e){return~e},"!":function(e){return!e}};function u(e,n){return e.map((function(e){return f(e,n)}))}async function a(e,n){return await Promise.all(e.map(e=>l(e,n)))}function c(e,n){const t=f(e.object,n);return e.computed?[t,t[f(e.property,n)]]:[t,t[e.property.name]]}async function s(e,n){const t=await l(e.object,n);return e.computed?[t,t[await l(e.property,n)]]:[t,t[e.property.name]]}function f(e,n){switch(e.type){case"ArrayExpression":return u(e.elements,n);case"BinaryExpression":return o[e.operator](f(e.left,n),f(e.right,n));case"CallExpression":let t,r,a;if("MemberExpression"===e.callee.type?(a=c(e.callee,n),t=a[0],r=a[1]):r=f(e.callee,n),"function"!=typeof r)return;return r.apply(t,u(e.arguments,n));case"ConditionalExpression":return f(e.test,n)?f(e.consequent,n):f(e.alternate,n);case"Identifier":return n[e.name];case"Literal":return e.value;case"LogicalExpression":return"||"===e.operator?f(e.left,n)||f(e.right,n):"&&"===e.operator?f(e.left,n)&&f(e.right,n):o[e.operator](f(e.left,n),f(e.right,n));case"MemberExpression":return c(e,n)[1];case"ThisExpression":return n;case"UnaryExpression":return i[e.operator](f(e.argument,n));default:return}}async function l(e,n){switch(e.type){case"ArrayExpression":return await a(e.elements,n);case"BinaryExpression":{const[t,r]=await Promise.all([l(e.left,n),l(e.right,n)]);return o[e.operator](t,r)}case"CallExpression":let t,r,u;if("MemberExpression"===e.callee.type?(u=await s(e.callee,n),t=u[0],r=u[1]):r=await l(e.callee,n),"function"!=typeof r)return;return await r.apply(t,await a(e.arguments,n));case"ConditionalExpression":return await l(e.test,n)?await l(e.consequent,n):await l(e.alternate,n);case"Identifier":return n[e.name];case"Literal":return e.value;case"LogicalExpression":{if("||"===e.operator)return await l(e.left,n)||await l(e.right,n);if("&&"===e.operator)return await l(e.left,n)&&await l(e.right,n);const[t,r]=await Promise.all([l(e.left,n),l(e.right,n)]);return o[e.operator](t,r)}case"MemberExpression":return(await s(e,n))[1];case"ThisExpression":return n;case"UnaryExpression":return i[e.operator](await l(e.argument,n));default:return}}e.exports={parse:r,eval:f,evalAsync:l,compile:function(e){return f.bind(null,r(e))},compileAsync:function(e){return l.bind(null,r(e))}}},function(e,n,t){var r=t(7),o=t(8),i=t(9);e.exports=function(e,n){return r(e)||o(e,n)||i()}},function(e,n,t){var r=t(11),o=globalThis.deck||{};if(!o.Layer)throw new Error("@deck.gl/core is not found");e.exports=Object.assign(o,r)},function(e,n){e.exports=function(e){if(Array.isArray(e))return e}},function(e,n){e.exports=function(e,n){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var t=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(t.push(u.value),!n||t.length!==n);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return t}}},function(e,n){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,n,t){!function(t){"use strict";var r=function(e,n){var t=new Error(e+" at character "+n);throw t.index=n,t.description=e,t},o={"-":!0,"!":!0,"~":!0,"+":!0},i={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},u=function(e){var n,t=0;for(var r in e)(n=r.length)>t&&e.hasOwnProperty(r)&&(t=n);return t},a=u(o),c=u(i),s={true:!0,false:!1,null:null},f=function(e){return i[e]||0},l=function(e,n,t){return{type:"||"===e||"&&"===e?"LogicalExpression":"BinaryExpression",operator:e,left:n,right:t}},p=function(e){return e>=48&&e<=57},y=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=128&&!i[String.fromCharCode(e)]},h=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e>=128&&!i[String.fromCharCode(e)]},v=function(e){for(var n,t,u=0,v=e.charAt,d=e.charCodeAt,g=function(n){return v.call(e,n)},b=function(n){return d.call(e,n)},m=e.length,O=function(){for(var e=b(u);32===e||9===e||10===e||13===e;)e=b(++u)},x=function(){var e,n,t=j();return O(),63!==b(u)?t:(u++,(e=x())||r("Expected expression",u),O(),58===b(u)?(u++,(n=x())||r("Expected expression",u),{type:"ConditionalExpression",test:t,consequent:e,alternate:n}):void r("Expected :",u))},w=function(){O();for(var n=e.substr(u,c),t=n.length;t>0;){if(i.hasOwnProperty(n)&&(!y(b(u))||u+n.length<e.length&&!h(b(u+n.length))))return u+=t,n;n=n.substr(0,--t)}return!1},j=function(){var e,n,t,o,i,a,c,s;if(a=E(),!(n=w()))return a;for(i={value:n,prec:f(n)},(c=E())||r("Expected expression after "+n,u),o=[a,i,c];(n=w())&&0!==(t=f(n));){for(i={value:n,prec:t};o.length>2&&t<=o[o.length-2].prec;)c=o.pop(),n=o.pop().value,a=o.pop(),e=l(n,a,c),o.push(e);(e=E())||r("Expected expression after "+n,u),o.push(i,e)}for(e=o[s=o.length-1];s>1;)e=l(o[s-1].value,o[s-2],e),s-=2;return e},E=function(){var n,t,r;if(O(),n=b(u),p(n)||46===n)return S();if(39===n||34===n)return P();if(91===n)return M();for(r=(t=e.substr(u,a)).length;r>0;){if(o.hasOwnProperty(t)&&(!y(b(u))||u+t.length<e.length&&!h(b(u+t.length))))return u+=r,{type:"UnaryExpression",operator:t,argument:E(),prefix:!0};t=t.substr(0,--r)}return!(!y(n)&&40!==n)&&A()},S=function(){for(var e,n,t="";p(b(u));)t+=g(u++);if(46===b(u))for(t+=g(u++);p(b(u));)t+=g(u++);if("e"===(e=g(u))||"E"===e){for(t+=g(u++),"+"!==(e=g(u))&&"-"!==e||(t+=g(u++));p(b(u));)t+=g(u++);p(b(u-1))||r("Expected exponent ("+t+g(u)+")",u)}return n=b(u),y(n)?r("Variable names cannot start with a number ("+t+g(u)+")",u):46===n&&r("Unexpected period",u),{type:"Literal",value:parseFloat(t),raw:t}},P=function(){for(var e,n="",t=g(u++),o=!1;u<m;){if((e=g(u++))===t){o=!0;break}if("\\"===e)switch(e=g(u++)){case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"b":n+="\b";break;case"f":n+="\f";break;case"v":n+="\v";break;default:n+=e}else n+=e}return o||r('Unclosed quote after "'+n+'"',u),{type:"Literal",value:n,raw:t+n+t}},k=function(){var n,t=b(u),o=u;for(y(t)?u++:r("Unexpected "+g(u),u);u<m&&(t=b(u),h(t));)u++;return n=e.slice(o,u),s.hasOwnProperty(n)?{type:"Literal",value:s[n],raw:n}:"this"===n?{type:"ThisExpression"}:{type:"Identifier",name:n}},C=function(e){for(var n,t,o=[],i=!1;u<m;){if(O(),(n=b(u))===e){i=!0,u++;break}44===n?u++:((t=x())&&"Compound"!==t.type||r("Expected comma",u),o.push(t))}return i||r("Expected "+String.fromCharCode(e),u),o},A=function(){var e,n;for(n=40===(e=b(u))?J():k(),O(),e=b(u);46===e||91===e||40===e;)u++,46===e?(O(),n={type:"MemberExpression",computed:!1,object:n,property:k()}):91===e?(n={type:"MemberExpression",computed:!0,object:n,property:x()},O(),93!==(e=b(u))&&r("Unclosed [",u),u++):40===e&&(n={type:"CallExpression",arguments:C(41),callee:n}),O(),e=b(u);return n},J=function(){u++;var e=x();if(O(),41===b(u))return u++,e;r("Unclosed (",u)},M=function(){return u++,{type:"ArrayExpression",elements:C(93)}},N=[];u<m;)59===(n=b(u))||44===n?u++:(t=x())?N.push(t):u<m&&r('Unexpected "'+g(u)+'"',u);return 1===N.length?N[0]:{type:"Compound",body:N}};v.version="0.3.4",v.toString=function(){return"JavaScript Expression Parser (JSEP) v"+v.version},v.addUnaryOp=function(e){return a=Math.max(e.length,a),o[e]=!0,this},v.addBinaryOp=function(e,n){return c=Math.max(e.length,c),i[e]=n,this},v.addLiteral=function(e,n){return s[e]=n,this},v.removeUnaryOp=function(e){return delete o[e],e.length===a&&(a=u(o)),this},v.removeAllUnaryOps=function(){return o={},a=0,this},v.removeBinaryOp=function(e){return delete i[e],e.length===c&&(c=u(i)),this},v.removeAllBinaryOps=function(){return i={},c=0,this},v.removeLiteral=function(e){return delete s[e],this},v.removeAllLiterals=function(){return s={},this},e.exports?n=e.exports=v:n.parse=v}()},function(e,n,t){"use strict";t.r(n);var r=t(5),o=t.n(r),i=t(3),u=t.n(i),a=t(1),c=t.n(a),s=t(2),f=t.n(s),l=t(0),p=t.n(l);function y(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)throw new Error("JSON conversion error ".concat(n))}function h(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return v(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return v(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){a=!0,i=e},f:function(){try{u||null==t.return||t.return()}finally{if(a)throw i}}}}function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function d(e,n){var t,r=e,o=h(function(e){if("string"==typeof e){var n=b[e];return n||(n=e.split("."),b[e]=n),n}return Array.isArray(e)?e:[e]}(n));try{for(o.s();!(t=o.n()).done;){var i=t.value;r=g(r)?r[i]:void 0}}catch(e){o.e(e)}finally{o.f()}return r}function g(e){return null!==e&&"object"===p()(e)}var b={};var m=t(4),O=t.n(m),x={"-":function(e){return e}};function w(e,n){if(e in x)return x[e];var t,r=O.a.parse(e);return r.right||r.left||"Identifier"!==r.type?(!function e(n,t){if(Array.isArray(n))n.forEach((function(n){return e(n,t)}));else if(n&&"object"===p()(n))for(var r in n.type&&t(n),n)e(n[r],t)}(r,(function(e){if("CallExpression"===e.type)throw new Error("Function calls not allowed in JSON expressions")})),t=function(e){return O.a.eval(r,e)}):t=function(n){return d(n,e)},x[e]=t,t}var j=function(e){return e&&"object"===p()(e)},E=function(){function e(){c()(this,e),this.typeKey="@@type",this.functionKey="@@function",this.log=console,this.classes={},this.reactComponents={},this.enumerations={},this.constants={},this.functions={},this.convertFunction=w,this.preProcessClassProps=function(e,n){return n},this.postProcessConvertedJson=function(e){return e};for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];for(var o=0,i=t;o<i.length;o++){var u=i[o];this.merge(u)}}return f()(e,[{key:"merge",value:function(e){for(var n in e)switch(n){case"layers":case"views":Object.assign(this.classes,e[n]);break;default:if(n in this){var t=e[n];this[n]=j(this[n])?Object.assign(this[n],t):t}}}},{key:"validate",value:function(e){return y(!this.typeKey||"string"==typeof this.typeKey),y(j(this.classes)),!0}}]),e}();function S(e){return e.replace("@@=","")}function P(e,n){var t,r={};for(var o in e){var i=e[o];"string"==typeof(t=i)&&t.startsWith("@@=")&&(i=w(i=S(i))),r[o]=i}return r}function k(e,n,t){var r=t.classes[e],o=t.reactComponents[e];if(!r&&!o){var i=t.log,u=JSON.stringify(n,null,0).slice(0,40);return i&&i.warn("JSON converter: No registered class of type ".concat(e,"(").concat(u,"...)  ")),null}return r?function(e,n,t){t.preProcessClassProps&&(n=t.preProcessClassProps(e,n,t));return n=P(n),new e(n)}(r,n,t):function(e,n,t){var r=t.React,o=n.children,i=void 0===o?[]:o;delete n.children,t.preProcessClassProps&&(n=t.preProcessClassProps(e,n,t));return n=P(n),r.createElement(e,n,i)}(o,n,t)}function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){u()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var J=function(e){return e&&"object"===p()(e)},M=function(){function e(n){c()(this,e),this.log=console,this.configuration={},this.onJSONChange=function(){},this.json=null,this.convertedJson=null,this.setProps(n)}return f()(e,[{key:"finalize",value:function(){}},{key:"setProps",value:function(e){"configuration"in e&&(this.configuration=e.configuration instanceof E?e.configuration:new E(e.configuration)),"onJSONChange"in e&&(this.onJSONChange=e.onJSONChange)}},{key:"mergeConfiguration",value:function(e){this.configuration.merge(e)}},{key:"convert",value:function(e){if(!e||e===this.json)return this.convertedJson;this.json=e;var n=function(e,n){return n=new E(n),N(e,"",n)}(function(e){return"string"==typeof e?JSON.parse(e):e}(e),this.configuration);return n=this.configuration.postProcessConvertedJson(n),this.convertedJson=n,n}},{key:"convertJson",value:function(e){return this.convert(e)}}]),e}();function N(e,n,t){return Array.isArray(e)?e.map((function(e,n){return N(e,String(n),t)})):function(e,n){var t=n.typeKey;return J(e)&&Boolean(e[t])}(e,t)?function(e,n){var t=n.typeKey,r=e[t],o=A({},e);return delete o[t],o=_(o,n),k(r,o,n)}(e,t):J(e)?"@@function"in e?function(e,n){var t=n.functionKey,r=A({},e);delete r[t],r=_(r,n);var o=e[t],i=n.functions[o];return y(i,"Function ".concat(o," not found.")),i(r)}(e,t):_(e,t):"string"==typeof e?function(e,n,t){if(e.startsWith("@@=")&&t.convertFunction)return e=e.replace("@@=",""),t.convertFunction(e,t);if(e.startsWith("@@#")){if(e=e.replace("@@#",""),t.constants[e])return t.constants[e];var r=e.split("."),i=o()(r,2),u=i[0],a=i[1];return t.enumerations[u][a]}return e}(e,0,t):e}function _(e,n){y(J(e));var t={};for(var r in e){var o=e[r];t[r]=N(o,0,n)}return t}function U(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?U(Object(t),!0).forEach((function(n){u()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var L={onIninitialize:function(e){return e},onFinalize:function(e){return e},onMessage:null},z=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Transport";c()(this,e),this.name=n,this._messageQueue=[],this.userData={}}return f()(e,[{key:"getRootDOMElement",value:function(){return"undefined"!=typeof document?document.body:null}},{key:"sendJSONMessage",value:function(){console.error("Back-channel not implemented for this transport")}},{key:"sendBinaryMessage",value:function(){console.error("Back-channel not implemented for this transport")}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=I({transport:this},e);L.onInitialize(n)}},{key:"_finalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=I({transport:this},e);L.onFinalize(n),this._destroyed=!0}},{key:"_messageReceived",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=I({transport:this},e),console.debug("Delivering transport message",e),L.onMessage(e)}}],[{key:"setCallbacks",value:function(e){var n=e.onInitialize,t=e.onFinalize,r=e.onMessage;n&&(L.onInitialize=n),t&&(L.onFinalize=t),r&&(L.onMessage=r)}},{key:"_stringifyJSONSafe",value:function(e){var n=new Set;return JSON.stringify(e,(function(e,t){if("object"===p()(t)&&null!==t){if(n.has(t))try{return JSON.parse(JSON.stringify(t))}catch(e){return}n.add(t)}return t}))}}]),e}();function D(e,n){if(e===n)return!0;if("object"!==p()(e)||null===e||"object"!==p()(n)||null===n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var t in e)if(!(t in n)||e[t]!==n[t])return!1;for(var r in n)if(!(r in e))return!1;return!0}t.d(n,"JSONConverter",(function(){return M})),t.d(n,"JSONConfiguration",(function(){return E})),t.d(n,"Transport",(function(){return z})),t.d(n,"_convertFunctions",(function(){return P})),t.d(n,"_parseExpressionString",(function(){return w})),t.d(n,"_shallowEqualObjects",(function(){return D}))}])}));