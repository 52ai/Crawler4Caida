{"version":3,"sources":["../../../src/helpers/instantiate-class.js"],"names":["convertFunctions","instantiateClass","type","props","configuration","Class","classes","Component","reactComponents","log","stringProps","JSON","stringify","slice","warn","instantiateJavaScriptClass","instantiateReactComponent","preProcessClassProps","React","children","createElement"],"mappings":"AAAA,OAAOA,gBAAP,MAA6B,qBAA7B;AAGA,OAAO,SAASC,gBAAT,CAA0BC,IAA1B,EAAgCC,KAAhC,EAAuCC,aAAvC,EAAsD;AAE3D,QAAMC,KAAK,GAAGD,aAAa,CAACE,OAAd,CAAsBJ,IAAtB,CAAd;AACA,QAAMK,SAAS,GAAGH,aAAa,CAACI,eAAd,CAA8BN,IAA9B,CAAlB;;AAGA,MAAI,CAACG,KAAD,IAAU,CAACE,SAAf,EAA0B;AACxB,UAAM;AAACE,MAAAA;AAAD,QAAQL,aAAd;AACA,UAAMM,WAAW,GAAGC,IAAI,CAACC,SAAL,CAAeT,KAAf,EAAsB,IAAtB,EAA4B,CAA5B,EAA+BU,KAA/B,CAAqC,CAArC,EAAwC,EAAxC,CAApB;;AACA,QAAIJ,GAAJ,EAAS;AACPA,MAAAA,GAAG,CAACK,IAAJ,uDAAwDZ,IAAxD,cAAgEQ,WAAhE;AACD;;AACD,WAAO,IAAP;AACD;;AAED,MAAIL,KAAJ,EAAW;AACT,WAAOU,0BAA0B,CAACV,KAAD,EAAQF,KAAR,EAAeC,aAAf,CAAjC;AACD;;AAED,SAAOY,yBAAyB,CAACT,SAAD,EAAYJ,KAAZ,EAAmBC,aAAnB,CAAhC;AACD;;AAED,SAASW,0BAAT,CAAoCV,KAApC,EAA2CF,KAA3C,EAAkDC,aAAlD,EAAiE;AAC/D,MAAIA,aAAa,CAACa,oBAAlB,EAAwC;AACtCd,IAAAA,KAAK,GAAGC,aAAa,CAACa,oBAAd,CAAmCZ,KAAnC,EAA0CF,KAA1C,EAAiDC,aAAjD,CAAR;AACD;;AACDD,EAAAA,KAAK,GAAGH,gBAAgB,CAACG,KAAD,EAAQC,aAAR,CAAxB;AACA,SAAO,IAAIC,KAAJ,CAAUF,KAAV,CAAP;AACD;;AAED,SAASa,yBAAT,CAAmCT,SAAnC,EAA8CJ,KAA9C,EAAqDC,aAArD,EAAoE;AAClE,QAAM;AAACc,IAAAA;AAAD,MAAUd,aAAhB;AACA,QAAM;AAACe,IAAAA,QAAQ,GAAG;AAAZ,MAAkBhB,KAAxB;AACA,SAAOA,KAAK,CAACgB,QAAb;;AACA,MAAIf,aAAa,CAACa,oBAAlB,EAAwC;AACtCd,IAAAA,KAAK,GAAGC,aAAa,CAACa,oBAAd,CAAmCV,SAAnC,EAA8CJ,KAA9C,EAAqDC,aAArD,CAAR;AACD;;AAEDD,EAAAA,KAAK,GAAGH,gBAAgB,CAACG,KAAD,EAAQC,aAAR,CAAxB;AAEA,SAAOc,KAAK,CAACE,aAAN,CAAoBb,SAApB,EAA+BJ,KAA/B,EAAsCgB,QAAtC,CAAP;AACD","sourcesContent":["import convertFunctions from './convert-functions';\n\n// This attempts to instantiate a class, either as a class or as a React component\nexport function instantiateClass(type, props, configuration) {\n  // Find the class\n  const Class = configuration.classes[type];\n  const Component = configuration.reactComponents[type];\n\n  // Check that the class is in the configuration.\n  if (!Class && !Component) {\n    const {log} = configuration; // eslint-disable-line\n    const stringProps = JSON.stringify(props, null, 0).slice(0, 40);\n    if (log) {\n      log.warn(`JSON converter: No registered class of type ${type}(${stringProps}...)  `);\n    }\n    return null;\n  }\n\n  if (Class) {\n    return instantiateJavaScriptClass(Class, props, configuration);\n  }\n\n  return instantiateReactComponent(Component, props, configuration);\n}\n\nfunction instantiateJavaScriptClass(Class, props, configuration) {\n  if (configuration.preProcessClassProps) {\n    props = configuration.preProcessClassProps(Class, props, configuration);\n  }\n  props = convertFunctions(props, configuration);\n  return new Class(props);\n}\n\nfunction instantiateReactComponent(Component, props, configuration) {\n  const {React} = configuration;\n  const {children = []} = props;\n  delete props.children;\n  if (configuration.preProcessClassProps) {\n    props = configuration.preProcessClassProps(Component, props, configuration);\n  }\n\n  props = convertFunctions(props, configuration);\n\n  return React.createElement(Component, props, children);\n}\n"],"file":"instantiate-class.js"}