{"version":3,"sources":["../../../src/node/node-asciify-image.ts"],"names":["nodeAsciifyImage","image","message","scale","asciify","module","require","error","fit","width","Math","round","data","console","log"],"mappings":";;;;;;;;;;;;;AAMO,SAASA,gBAAT,OAAiF;AAAA,MAAtDC,KAAsD,QAAtDA,KAAsD;AAAA,0BAA/CC,OAA+C;AAAA,MAA/CA,OAA+C,6BAArC,EAAqC;AAAA,wBAAjCC,KAAiC;AAAA,MAAjCA,KAAiC,2BAAzB,CAAyB;AAEtF,MAAIC,OAAO,GAAG,IAAd;;AACA,MAAI;AACFA,IAAAA,OAAO,GAAGC,MAAM,CAACC,OAAP,CAAe,eAAf,CAAV;AACD,GAFD,CAEE,OAAOC,KAAP,EAAc,CAEf;;AACD,MAAIH,OAAJ,EAAa;AACX,qEAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACcA,OAAO,CAACH,KAAD,EAAQ;AAACO,gBAAAA,GAAG,EAAE,KAAN;AAAaC,gBAAAA,KAAK,YAAKC,IAAI,CAACC,KAAL,CAAW,KAAKR,KAAhB,CAAL;AAAlB,eAAR,CADrB;;AAAA;AACCS,cAAAA,IADD;AAELC,cAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;;AAFK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;AAID;;AAED,mEAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAP;AACD","sourcesContent":["// probe.gl, MIT license\n// This file \"quarantines\" the dynamic import of asciify-image\n// in a separate source file that can be excluded in browser builds via package.json\n// browser statement. https://github.com/uber-web/probe.gl/issues/196\n\n/** Use the asciify-image module, if installed, to log an image under node.js */\nexport function nodeAsciifyImage({image, message = '', scale = 1}): () => Promise<void> {\n  // Note: Runtime load of the \"asciify-image\" module, avoids including in browser bundles\n  let asciify = null;\n  try {\n    asciify = module.require('asciify-image');\n  } catch (error) {\n    // asciify not installed, silently ignore\n  }\n  if (asciify) {\n    return async () => {\n      const data = await asciify(image, {fit: 'box', width: `${Math.round(80 * scale)}%`});\n      console.log(data); // eslint-disable-line no-console\n    };\n  }\n\n  return async () => {};\n}\n"],"file":"node-asciify-image.js"}