{"version":3,"sources":["../../../../src/lib/texture-api/deep-load.ts"],"names":["deepLoad","urlTree","load","options","url","shallowLoad","fetch","response","arrayBuffer"],"mappings":";;;;;;;;;;;;;;AACA;;SAKsBA,Q;;;;;wEAAf,iBAAwBC,OAAxB,EAA0CC,IAA1C,EAAsDC,OAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACQ,gCAAaF,OAAb,EAAsB,UAACG,GAAD;AAAA,qBAAiBC,WAAW,CAACD,GAAD,EAAMF,IAAN,EAAYC,OAAZ,CAA5B;AAAA,aAAtB,CADR;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;SAIeE,W;;;;;2EAAf,kBAA2BD,GAA3B,EAAwCF,IAAxC,EAAoDC,OAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEkBG,KAAK,CAACF,GAAD,EAAMD,OAAO,CAACG,KAAd,CAFvB;;AAAA;AAECC,YAAAA,QAFD;AAAA;AAAA,mBAGqBA,QAAQ,CAACC,WAAT,EAHrB;;AAAA;AAGCA,YAAAA,WAHD;AAAA;AAAA,mBAIQN,IAAI,CAACM,WAAD,EAAcL,OAAd,CAJZ;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["// loaders.gl, MIT license\nimport {asyncDeepMap} from './async-deep-map';\n\nexport type LoadOptions = Record<string, any>;\nexport type Load = (data: ArrayBuffer, options: Record<string, any>) => Promise<any>;\n\nexport async function deepLoad(urlTree: unknown, load: Load, options: LoadOptions) {\n  return await asyncDeepMap(urlTree, (url: string) => shallowLoad(url, load, options));\n}\n\nexport async function shallowLoad(url: string, load: Load, options: LoadOptions): Promise<any> {\n  // console.error('loading', url);\n  const response = await fetch(url, options.fetch);\n  const arrayBuffer = await response.arrayBuffer();\n  return await load(arrayBuffer, options);\n}\n"],"file":"deep-load.js"}