{"version":3,"sources":["../../../src/workers/ktx2-basis-writer-worker.ts"],"names":["WorkerBody","inWorkerThread","onmessage","type","payload","input","options","KTX2BasisWriter","encode","result","postMessage","message","Error","error"],"mappings":";;;;;;;;AAAA;;AACA;;AAEA,CAAC,YAAM;AAEL,MAAI,CAACA,wBAAWC,cAAX,EAAL,EAAkC;AAChC;AACD;;AAEDD,0BAAWE,SAAX;AAAA,yEAAuB,iBAAOC,IAAP,EAAaC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BACbD,IADa;AAAA,8CAEd,SAFc;AAAA;;AAAA;AAAA;AAIRE,cAAAA,KAJQ,GAIUD,OAJV,CAIRC,KAJQ,EAIDC,OAJC,GAIUF,OAJV,CAIDE,OAJC;AAAA;AAAA,qBAKMC,iCAAgBC,MAAhB,CAAuBH,KAAvB,EAA8BC,OAA9B,CALN;;AAAA;AAKTG,cAAAA,MALS;;AAMfT,sCAAWU,WAAX,CAAuB,MAAvB,EAA+B;AAACD,gBAAAA,MAAM,EAANA;AAAD,eAA/B;;AANe;AAAA;;AAAA;AAAA;AAAA;AAQTE,cAAAA,OARS,GAQC,uBAAiBC,KAAjB,GAAyB,YAAMD,OAA/B,GAAyC,EAR1C;;AASfX,sCAAWU,WAAX,CAAuB,OAAvB,EAAgC;AAACG,gBAAAA,KAAK,EAAEF;AAAR,eAAhC;;AATe;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAvB;;AAAA;AAAA;AAAA;AAAA;AAeD,CArBD","sourcesContent":["import {WorkerBody, WorkerMessagePayload} from '@loaders.gl/worker-utils';\nimport {KTX2BasisWriter} from '../ktx2-basis-writer';\n\n(() => {\n  // Check that we are actually in a worker thread\n  if (!WorkerBody.inWorkerThread()) {\n    return;\n  }\n\n  WorkerBody.onmessage = async (type, payload: WorkerMessagePayload) => {\n    switch (type) {\n      case 'process':\n        try {\n          const {input, options} = payload;\n          const result = await KTX2BasisWriter.encode(input, options);\n          WorkerBody.postMessage('done', {result});\n        } catch (error) {\n          const message = error instanceof Error ? error.message : '';\n          WorkerBody.postMessage('error', {error: message});\n        }\n        break;\n      default:\n    }\n  };\n})();\n"],"file":"ktx2-basis-writer-worker.js"}