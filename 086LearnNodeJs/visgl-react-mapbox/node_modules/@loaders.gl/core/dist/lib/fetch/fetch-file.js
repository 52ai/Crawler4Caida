"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.fetchFile = void 0;
const loader_utils_1 = require("@loaders.gl/loader-utils");
const response_utils_1 = require("../utils/response-utils");
// import {getErrorMessageFromResponse} from './fetch-error-message';
/**
 * fetch compatible function
 * Reads file data from:
 * - http/http urls
 * - data urls
 * - File/Blob objects
 * Leverages `@loaders.gl/polyfills` for Node.js support
 * Respects pathPrefix and file aliases
 */
async function fetchFile(url, options) {
    if (typeof url === 'string') {
        url = (0, loader_utils_1.resolvePath)(url);
        let fetchOptions = options;
        if (options?.fetch && typeof options?.fetch !== 'function') {
            fetchOptions = options.fetch;
        }
        return await fetch(url, fetchOptions);
    }
    return await (0, response_utils_1.makeResponse)(url);
}
exports.fetchFile = fetchFile;
