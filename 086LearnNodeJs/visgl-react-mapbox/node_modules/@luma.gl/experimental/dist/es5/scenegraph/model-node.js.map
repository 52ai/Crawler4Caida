{"version":3,"file":"model-node.js","names":["ModelNode","gl","props","onBeforeRender","AfterRender","Model","model","_setModelNodeProps","managedResources","delete","forEach","resource","draw","setUniforms","setAttributes","updateModuleSettings","setProps","ScenegraphNode"],"sources":["../../../src/scenegraph/model-node.js"],"sourcesContent":["import {Model} from '@luma.gl/engine';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class ModelNode extends ScenegraphNode {\n  constructor(gl, props = {}) {\n    super(props);\n\n    // pverride callbacks to make sure we call them with this\n    this.onBeforeRender = null;\n    this.AfterRender = null;\n\n    // Create new Model or used supplied Model\n    if (gl instanceof Model) {\n      this.model = gl;\n      this._setModelNodeProps(props);\n    } else {\n      this.model = new Model(gl, props);\n    }\n\n    this.managedResources = props.managedResources || [];\n  }\n\n  setProps(props) {\n    super.setProps(props);\n    this._setModelNodeProps(props);\n    return this;\n  }\n\n  delete() {\n    if (this.model) {\n      this.model.delete();\n      this.model = null;\n    }\n\n    this.managedResources.forEach(resource => resource.delete());\n    this.managedResources = [];\n  }\n\n  // Forward node methods\n  draw(...args) {\n    // Return value indicates if something was actually drawn\n    return this.model.draw(...args);\n  }\n\n  setUniforms(...args) {\n    this.model.setUniforms(...args);\n    return this;\n  }\n\n  setAttributes(...args) {\n    this.model.setAttributes(...args);\n    return this;\n  }\n\n  updateModuleSettings(...args) {\n    this.model.updateModuleSettings(...args);\n    return this;\n  }\n\n  // PRIVATE\n\n  _setModelNodeProps(props) {\n    this.model.setProps(props);\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;;;;;IAEqBA,S;;;;;EACnB,mBAAYC,EAAZ,EAA4B;IAAA;;IAAA,IAAZC,KAAY,uEAAJ,EAAI;IAAA;IAC1B,0BAAMA,KAAN;IAGA,MAAKC,cAAL,GAAsB,IAAtB;IACA,MAAKC,WAAL,GAAmB,IAAnB;;IAGA,IAAIH,EAAE,YAAYI,aAAlB,EAAyB;MACvB,MAAKC,KAAL,GAAaL,EAAb;;MACA,MAAKM,kBAAL,CAAwBL,KAAxB;IACD,CAHD,MAGO;MACL,MAAKI,KAAL,GAAa,IAAID,aAAJ,CAAUJ,EAAV,EAAcC,KAAd,CAAb;IACD;;IAED,MAAKM,gBAAL,GAAwBN,KAAK,CAACM,gBAAN,IAA0B,EAAlD;IAf0B;EAgB3B;;;;WAED,kBAASN,KAAT,EAAgB;MACd,oGAAeA,KAAf;;MACA,KAAKK,kBAAL,CAAwBL,KAAxB;;MACA,OAAO,IAAP;IACD;;;WAED,mBAAS;MACP,IAAI,KAAKI,KAAT,EAAgB;QACd,KAAKA,KAAL,CAAWG,MAAX;QACA,KAAKH,KAAL,GAAa,IAAb;MACD;;MAED,KAAKE,gBAAL,CAAsBE,OAAtB,CAA8B,UAAAC,QAAQ;QAAA,OAAIA,QAAQ,CAACF,MAAT,EAAJ;MAAA,CAAtC;MACA,KAAKD,gBAAL,GAAwB,EAAxB;IACD;;;WAGD,gBAAc;MAAA;;MAEZ,OAAO,oBAAKF,KAAL,EAAWM,IAAX,8BAAP;IACD;;;WAED,uBAAqB;MAAA;;MACnB,qBAAKN,KAAL,EAAWO,WAAX;;MACA,OAAO,IAAP;IACD;;;WAED,yBAAuB;MAAA;;MACrB,qBAAKP,KAAL,EAAWQ,aAAX;;MACA,OAAO,IAAP;IACD;;;WAED,gCAA8B;MAAA;;MAC5B,qBAAKR,KAAL,EAAWS,oBAAX;;MACA,OAAO,IAAP;IACD;;;WAID,4BAAmBb,KAAnB,EAA0B;MACxB,KAAKI,KAAL,CAAWU,QAAX,CAAoBd,KAApB;IACD;;;EA5DoCe,uB"}