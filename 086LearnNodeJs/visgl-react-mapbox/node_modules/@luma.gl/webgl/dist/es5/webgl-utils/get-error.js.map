{"version":3,"file":"get-error.js","names":["GL_NO_ERROR","GL_INVALID_ENUM","GL_INVALID_VALUE","GL_INVALID_OPERATION","GL_OUT_OF_MEMORY","GL_CONTEXT_LOST_WEBGL","GL_INVALID_FRAMEBUFFER_OPERATION","GL_ERROR_MESSAGES","glGetErrorMessage","gl","glError","glGetError","errorStack","getError","push","length","Error","join","glCheckError","debug","error"],"sources":["../../../src/webgl-utils/get-error.js"],"sourcesContent":["// Helper definitions for validation of webgl parameters\n/* eslint-disable no-inline-comments, max-len */\n\n// Errors - Constants returned from getError().\nconst GL_NO_ERROR = 0; // Returned from getError.\nconst GL_INVALID_ENUM = 0x0500; //  Returned from getError.\nconst GL_INVALID_VALUE = 0x0501; //  Returned from getError.\nconst GL_INVALID_OPERATION = 0x0502; //  Returned from getError.\nconst GL_OUT_OF_MEMORY = 0x0505; //  Returned from getError.\nconst GL_CONTEXT_LOST_WEBGL = 0x9242; //  Returned from getError.\nconst GL_INVALID_FRAMEBUFFER_OPERATION = 0x0506;\n\n// GL errors\n\nconst GL_ERROR_MESSAGES = {\n  //  If the WebGL context is lost, this error is returned on the\n  // first call to getError. Afterwards and until the context has been\n  // restored, it returns gl.NO_ERROR.\n  [GL_CONTEXT_LOST_WEBGL]: 'WebGL context lost',\n  // An unacceptable value has been specified for an enumerated argument.\n  [GL_INVALID_ENUM]: 'WebGL invalid enumerated argument',\n  // A numeric argument is out of range.\n  [GL_INVALID_VALUE]: 'WebGL invalid value',\n  // The specified command is not allowed for the current state.\n  [GL_INVALID_OPERATION]: 'WebGL invalid operation',\n  // The currently bound framebuffer is not framebuffer complete\n  // when trying to render to or to read from it.\n  [GL_INVALID_FRAMEBUFFER_OPERATION]: 'WebGL invalid framebuffer operation',\n  // Not enough memory is left to execute the command.\n  [GL_OUT_OF_MEMORY]: 'WebGL out of memory'\n};\n\nfunction glGetErrorMessage(gl, glError) {\n  return GL_ERROR_MESSAGES[glError] || `WebGL unknown error ${glError}`;\n}\n\n// Returns an Error representing the Latest webGl error or null\nexport function glGetError(gl) {\n  // Loop to ensure all errors are cleared\n  const errorStack = [];\n  let glError = gl.getError();\n  while (glError !== GL_NO_ERROR) {\n    errorStack.push(glGetErrorMessage(gl, glError));\n    glError = gl.getError();\n  }\n  return errorStack.length ? new Error(errorStack.join('\\n')) : null;\n}\n\nexport function glCheckError(gl) {\n  if (gl.debug) {\n    const error = glGetError(gl);\n    if (error) {\n      throw error;\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;AAIA,IAAMA,WAAW,GAAG,CAApB;AACA,IAAMC,eAAe,GAAG,MAAxB;AACA,IAAMC,gBAAgB,GAAG,MAAzB;AACA,IAAMC,oBAAoB,GAAG,MAA7B;AACA,IAAMC,gBAAgB,GAAG,MAAzB;AACA,IAAMC,qBAAqB,GAAG,MAA9B;AACA,IAAMC,gCAAgC,GAAG,MAAzC;AAIA,IAAMC,iBAAiB,+EAIpBF,qBAJoB,EAII,oBAJJ,qDAMpBJ,eANoB,EAMF,mCANE,qDAQpBC,gBARoB,EAQD,qBARC,qDAUpBC,oBAVoB,EAUG,yBAVH,qDAapBG,gCAboB,EAae,qCAbf,qDAepBF,gBAfoB,EAeD,qBAfC,sBAAvB;;AAkBA,SAASI,iBAAT,CAA2BC,EAA3B,EAA+BC,OAA/B,EAAwC;EACtC,OAAOH,iBAAiB,CAACG,OAAD,CAAjB,kCAAqDA,OAArD,CAAP;AACD;;AAGM,SAASC,UAAT,CAAoBF,EAApB,EAAwB;EAE7B,IAAMG,UAAU,GAAG,EAAnB;EACA,IAAIF,OAAO,GAAGD,EAAE,CAACI,QAAH,EAAd;;EACA,OAAOH,OAAO,KAAKV,WAAnB,EAAgC;IAC9BY,UAAU,CAACE,IAAX,CAAgBN,iBAAiB,CAACC,EAAD,EAAKC,OAAL,CAAjC;IACAA,OAAO,GAAGD,EAAE,CAACI,QAAH,EAAV;EACD;;EACD,OAAOD,UAAU,CAACG,MAAX,GAAoB,IAAIC,KAAJ,CAAUJ,UAAU,CAACK,IAAX,CAAgB,IAAhB,CAAV,CAApB,GAAuD,IAA9D;AACD;;AAEM,SAASC,YAAT,CAAsBT,EAAtB,EAA0B;EAC/B,IAAIA,EAAE,CAACU,KAAP,EAAc;IACZ,IAAMC,KAAK,GAAGT,UAAU,CAACF,EAAD,CAAxB;;IACA,IAAIW,KAAJ,EAAW;MACT,MAAMA,KAAN;IACD;EACF;AACF"}