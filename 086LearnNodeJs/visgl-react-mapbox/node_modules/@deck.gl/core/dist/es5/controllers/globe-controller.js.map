{"version":3,"sources":["../../../src/controllers/globe-controller.ts"],"names":["GlobeState","props","maxZoom","minZoom","zoom","longitude","latitude","MapState","GlobeController","transitionDuration","transitionInterpolator","LinearInterpolator","dragRotate","touchRotate","Controller"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AAEA;;AACA;;AACA;;;;;;IAEMA,U;;;;;;;;;;;;WAEJ,0BAAiBC,KAAjB,EAA0E;AAExE,UAAOC,OAAP,GAAiCD,KAAjC,CAAOC,OAAP;AAAA,UAAgBC,OAAhB,GAAiCF,KAAjC,CAAgBE,OAAhB;AAAA,UAAyBC,IAAzB,GAAiCH,KAAjC,CAAyBG,IAAzB;AACAH,MAAAA,KAAK,CAACG,IAAN,GAAa,iBAAMA,IAAN,EAAYD,OAAZ,EAAqBD,OAArB,CAAb;AAEA,UAAOG,SAAP,GAA8BJ,KAA9B,CAAOI,SAAP;AAAA,UAAkBC,QAAlB,GAA8BL,KAA9B,CAAkBK,QAAlB;;AACA,UAAID,SAAS,GAAG,CAAC,GAAb,IAAoBA,SAAS,GAAG,GAApC,EAAyC;AACvCJ,QAAAA,KAAK,CAACI,SAAN,GAAkB,oBAAIA,SAAS,GAAG,GAAhB,EAAqB,GAArB,IAA4B,GAA9C;AACD;;AACDJ,MAAAA,KAAK,CAACK,QAAN,GAAiB,iBAAMA,QAAN,EAAgB,CAAC,EAAjB,EAAqB,EAArB,CAAjB;AAEA,aAAOL,KAAP;AACD;;;EAdsBM,uB;;IAiBJC,e;;;;;;;;;;;;;;;kGACDR,U;6FAEL;AACXS,MAAAA,kBAAkB,EAAE,GADT;AAEXC,MAAAA,sBAAsB,EAAE,IAAIC,2BAAJ,CAAuB,CAAC,WAAD,EAAc,UAAd,EAA0B,MAA1B,CAAvB;AAFb,K;2FAKgB,K;;;;;;WAE7B,kBAASV,KAAT,EAAiC;AAC/B,gHAAeA,KAAf;AAGA,WAAKW,UAAL,GAAkB,KAAlB;AACA,WAAKC,WAAL,GAAmB,KAAnB;AACD;;;EAhB0CC,mB","sourcesContent":["import {clamp} from '@math.gl/core';\nimport Controller, {ControllerProps} from './controller';\n\nimport {MapState, MapStateProps} from './map-controller';\nimport {mod} from '../utils/math-utils';\nimport LinearInterpolator from '../transitions/linear-interpolator';\n\nclass GlobeState extends MapState {\n  // Apply any constraints (mathematical or defined by _viewportProps) to map state\n  applyConstraints(props: Required<MapStateProps>): Required<MapStateProps> {\n    // Ensure zoom is within specified range\n    const {maxZoom, minZoom, zoom} = props;\n    props.zoom = clamp(zoom, minZoom, maxZoom);\n\n    const {longitude, latitude} = props;\n    if (longitude < -180 || longitude > 180) {\n      props.longitude = mod(longitude + 180, 360) - 180;\n    }\n    props.latitude = clamp(latitude, -89, 89);\n\n    return props;\n  }\n}\n\nexport default class GlobeController extends Controller<MapState> {\n  ControllerState = GlobeState;\n\n  transition = {\n    transitionDuration: 300,\n    transitionInterpolator: new LinearInterpolator(['longitude', 'latitude', 'zoom'])\n  };\n\n  dragMode: 'pan' | 'rotate' = 'pan';\n\n  setProps(props: ControllerProps) {\n    super.setProps(props);\n\n    // TODO - support pitching?\n    this.dragRotate = false;\n    this.touchRotate = false;\n  }\n}\n"],"file":"globe-controller.js"}