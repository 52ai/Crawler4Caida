{"version":3,"sources":["../../../src/utils/color.ts"],"names":["parseColor","color","target","index","Array","isArray","ArrayBuffer","isView","length","parseHexColor","value","parseInt","substring","Math","floor","applyOpacity","opacity"],"mappings":"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","sourcesContent":["// deck.gl, MIT license\n\nimport {NumericArray} from '../types/types';\n\n/** Parse array or string color */\nfunction parseColor(\n  color: NumericArray,\n  target: NumericArray = [],\n  index: number = 0\n): NumericArray {\n  if (Array.isArray(color) || ArrayBuffer.isView(color)) {\n    if (!target && color.length === 4) {\n      return color;\n    }\n\n    target[index + 0] = color[0];\n    target[index + 1] = color[1];\n    target[index + 2] = color[2];\n    target[index + 3] = color.length === 4 ? color[3] : 255;\n    return target;\n  }\n\n  if (typeof color === 'string') {\n    target = target || [];\n    parseHexColor(color, target, index);\n    return target;\n  }\n\n  return [0, 0, 0, 255];\n}\n\n/** Parse a hex color */\nfunction parseHexColor(color: string, target: NumericArray, index: number): number {\n  if (color.length === 7) {\n    const value = parseInt(color.substring(1), 16);\n    target[index + 0] = Math.floor(value / 65536);\n    target[index + 1] = Math.floor((value / 256) % 256);\n    target[index + 2] = value % 256;\n    target[index + 3] = 255;\n  } else if (color.length === 9) {\n    const value = parseInt(color.substring(1), 16);\n    target[index + 0] = Math.floor(value / 16777216);\n    target[index + 1] = Math.floor((value / 65536) % 256);\n    target[index + 2] = Math.floor((value / 256) % 256);\n    target[index + 3] = value % 256;\n  }\n  return index + 4;\n}\n\nfunction applyOpacity(color: NumericArray, opacity: number = 127): NumericArray {\n  return [color[0], color[1], color[2], opacity];\n}\n\n// Named exports have a small perf hit in webpack, normally OK\n// but for utils that will be called in tight inner loops, export as object\n// TODO - this perf hit is mainly an issue for dev builds?\nexport default {parseColor, applyOpacity};\n"],"file":"color.js"}