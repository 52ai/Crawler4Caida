{"version":3,"sources":["../../../../src/layers/schema/tile-loader-utils.ts"],"names":["Protobuf","parsePbf","buffer","TileReader","pbf","tile","read","unpackProperties","properties","length","map","item","currentRecord","data","forEach","key","value"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,KAArB;AAIA,OAAO,SAASC,QAAT,CAAkBC,MAAlB,EAAuCC,UAAvC,EAAmD;AACxD,QAAMC,GAAG,GAAG,IAAIJ,QAAJ,CAAaE,MAAb,CAAZ;AACA,QAAMG,IAAI,GAAGF,UAAU,CAACG,IAAX,CAAgBF,GAAhB,CAAb;AACA,SAAOC,IAAP;AACD;AAED,OAAO,SAASE,gBAAT,CAA0BC,UAA1B,EAA0E;AAC/E,MAAI,CAACA,UAAD,IAAe,CAACA,UAAU,CAACC,MAA/B,EAAuC;AACrC,WAAO,EAAP;AACD;;AACD,SAAOD,UAAU,CAACE,GAAX,CAAeC,IAAI,IAAI;AAC5B,UAAMC,aAAyB,GAAG,EAAlC;AACAD,IAAAA,IAAI,CAACE,IAAL,CAAUC,OAAV,CAAkB,CAAC;AAACC,MAAAA,GAAD;AAAMC,MAAAA;AAAN,KAAD,KAAkB;AAClCJ,MAAAA,aAAa,CAACG,GAAD,CAAb,GAAqBC,KAArB;AACD,KAFD;AAGA,WAAOJ,aAAP;AACD,GANM,CAAP;AAOD","sourcesContent":["import Protobuf from 'pbf';\nimport {KeyValueProperties} from './carto-tile';\nimport {Properties} from './spatialjson-utils';\n\nexport function parsePbf(buffer: ArrayBuffer, TileReader) {\n  const pbf = new Protobuf(buffer);\n  const tile = TileReader.read(pbf);\n  return tile;\n}\n\nexport function unpackProperties(properties: KeyValueProperties[]): Properties[] {\n  if (!properties || !properties.length) {\n    return [];\n  }\n  return properties.map(item => {\n    const currentRecord: Properties = {};\n    item.data.forEach(({key, value}) => {\n      currentRecord[key] = value;\n    });\n    return currentRecord;\n  });\n}\n"],"file":"tile-loader-utils.js"}