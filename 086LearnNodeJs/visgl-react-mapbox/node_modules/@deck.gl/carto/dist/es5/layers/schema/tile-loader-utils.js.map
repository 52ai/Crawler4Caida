{"version":3,"sources":["../../../../src/layers/schema/tile-loader-utils.ts"],"names":["parsePbf","buffer","TileReader","pbf","Protobuf","tile","read","unpackProperties","properties","length","map","item","currentRecord","data","forEach","key","value"],"mappings":";;;;;;;;;;AAAA;;AAIO,SAASA,QAAT,CAAkBC,MAAlB,EAAuCC,UAAvC,EAAmD;AACxD,MAAMC,GAAG,GAAG,IAAIC,YAAJ,CAAaH,MAAb,CAAZ;AACA,MAAMI,IAAI,GAAGH,UAAU,CAACI,IAAX,CAAgBH,GAAhB,CAAb;AACA,SAAOE,IAAP;AACD;;AAEM,SAASE,gBAAT,CAA0BC,UAA1B,EAA0E;AAC/E,MAAI,CAACA,UAAD,IAAe,CAACA,UAAU,CAACC,MAA/B,EAAuC;AACrC,WAAO,EAAP;AACD;;AACD,SAAOD,UAAU,CAACE,GAAX,CAAe,UAAAC,IAAI,EAAI;AAC5B,QAAMC,aAAyB,GAAG,EAAlC;AACAD,IAAAA,IAAI,CAACE,IAAL,CAAUC,OAAV,CAAkB,gBAAkB;AAAA,UAAhBC,GAAgB,QAAhBA,GAAgB;AAAA,UAAXC,KAAW,QAAXA,KAAW;AAClCJ,MAAAA,aAAa,CAACG,GAAD,CAAb,GAAqBC,KAArB;AACD,KAFD;AAGA,WAAOJ,aAAP;AACD,GANM,CAAP;AAOD","sourcesContent":["import Protobuf from 'pbf';\nimport {KeyValueProperties} from './carto-tile';\nimport {Properties} from './spatialjson-utils';\n\nexport function parsePbf(buffer: ArrayBuffer, TileReader) {\n  const pbf = new Protobuf(buffer);\n  const tile = TileReader.read(pbf);\n  return tile;\n}\n\nexport function unpackProperties(properties: KeyValueProperties[]): Properties[] {\n  if (!properties || !properties.length) {\n    return [];\n  }\n  return properties.map(item => {\n    const currentRecord: Properties = {};\n    item.data.forEach(({key, value}) => {\n      currentRecord[key] = value;\n    });\n    return currentRecord;\n  });\n}\n"],"file":"tile-loader-utils.js"}