{"version":3,"sources":["../../../src/helpers/convert-functions.js"],"names":["hasFunctionIdentifier","value","startsWith","FUNCTION_IDENTIFIER","trimFunctionIdentifier","replace","convertFunctions","props","configuration","replacedProps","propName","propValue","isFunction"],"mappings":";;;;;;;;;AAAA;;AAEA;;AAEA,SAASA,qBAAT,CAA+BC,KAA/B,EAAsC;AACpC,SAAO,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,CAACC,UAAN,CAAiBC,mCAAjB,CAApC;AACD;;AAED,SAASC,sBAAT,CAAgCH,KAAhC,EAAuC;AACrC,SAAOA,KAAK,CAACI,OAAN,CAAcF,mCAAd,EAAmC,EAAnC,CAAP;AACD;;AAIc,SAASG,gBAAT,CAA0BC,KAA1B,EAAiCC,aAAjC,EAAgD;AAE7D,MAAMC,aAAa,GAAG,EAAtB;;AACA,OAAK,IAAMC,QAAX,IAAuBH,KAAvB,EAA8B;AAC5B,QAAII,SAAS,GAAGJ,KAAK,CAACG,QAAD,CAArB;AAGA,QAAME,UAAU,GAAGZ,qBAAqB,CAACW,SAAD,CAAxC;;AAEA,QAAIC,UAAJ,EAAgB;AAEdD,MAAAA,SAAS,GAAGP,sBAAsB,CAACO,SAAD,CAAlC;AACAA,MAAAA,SAAS,GAAG,oCAAsBA,SAAtB,EAAiCH,aAAjC,CAAZ;AACD;;AAEDC,IAAAA,aAAa,CAACC,QAAD,CAAb,GAA0BC,SAA1B;AACD;;AAED,SAAOF,aAAP;AACD","sourcesContent":["import parseExpressionString from './parse-expression-string';\n\nimport {FUNCTION_IDENTIFIER} from '../syntactic-sugar';\n\nfunction hasFunctionIdentifier(value) {\n  return typeof value === 'string' && value.startsWith(FUNCTION_IDENTIFIER);\n}\n\nfunction trimFunctionIdentifier(value) {\n  return value.replace(FUNCTION_IDENTIFIER, '');\n}\n\n// Try to determine if any props are function valued\n// and if so convert their string values to functions\nexport default function convertFunctions(props, configuration) {\n  // Use deck.gl prop types if available.\n  const replacedProps = {};\n  for (const propName in props) {\n    let propValue = props[propName];\n\n    // Parse string valued expressions\n    const isFunction = hasFunctionIdentifier(propValue);\n\n    if (isFunction) {\n      // Parse string as \"expression\", return equivalent JavaScript function\n      propValue = trimFunctionIdentifier(propValue);\n      propValue = parseExpressionString(propValue, configuration);\n    }\n\n    replacedProps[propName] = propValue;\n  }\n\n  return replacedProps;\n}\n"],"file":"convert-functions.js"}