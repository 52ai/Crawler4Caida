{"version":3,"sources":["../../../src/helpers/convert-functions.js"],"names":["parseExpressionString","FUNCTION_IDENTIFIER","hasFunctionIdentifier","value","startsWith","trimFunctionIdentifier","replace","convertFunctions","props","configuration","replacedProps","propName","propValue","isFunction"],"mappings":"AAAA,OAAOA,qBAAP,MAAkC,2BAAlC;AAEA,SAAQC,mBAAR,QAAkC,oBAAlC;;AAEA,SAASC,qBAAT,CAA+BC,KAA/B,EAAsC;AACpC,SAAO,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,CAACC,UAAN,CAAiBH,mBAAjB,CAApC;AACD;;AAED,SAASI,sBAAT,CAAgCF,KAAhC,EAAuC;AACrC,SAAOA,KAAK,CAACG,OAAN,CAAcL,mBAAd,EAAmC,EAAnC,CAAP;AACD;;AAID,eAAe,SAASM,gBAAT,CAA0BC,KAA1B,EAAiCC,aAAjC,EAAgD;AAE7D,QAAMC,aAAa,GAAG,EAAtB;;AACA,OAAK,MAAMC,QAAX,IAAuBH,KAAvB,EAA8B;AAC5B,QAAII,SAAS,GAAGJ,KAAK,CAACG,QAAD,CAArB;AAGA,UAAME,UAAU,GAAGX,qBAAqB,CAACU,SAAD,CAAxC;;AAEA,QAAIC,UAAJ,EAAgB;AAEdD,MAAAA,SAAS,GAAGP,sBAAsB,CAACO,SAAD,CAAlC;AACAA,MAAAA,SAAS,GAAGZ,qBAAqB,CAACY,SAAD,EAAYH,aAAZ,CAAjC;AACD;;AAEDC,IAAAA,aAAa,CAACC,QAAD,CAAb,GAA0BC,SAA1B;AACD;;AAED,SAAOF,aAAP;AACD","sourcesContent":["import parseExpressionString from './parse-expression-string';\n\nimport {FUNCTION_IDENTIFIER} from '../syntactic-sugar';\n\nfunction hasFunctionIdentifier(value) {\n  return typeof value === 'string' && value.startsWith(FUNCTION_IDENTIFIER);\n}\n\nfunction trimFunctionIdentifier(value) {\n  return value.replace(FUNCTION_IDENTIFIER, '');\n}\n\n// Try to determine if any props are function valued\n// and if so convert their string values to functions\nexport default function convertFunctions(props, configuration) {\n  // Use deck.gl prop types if available.\n  const replacedProps = {};\n  for (const propName in props) {\n    let propValue = props[propName];\n\n    // Parse string valued expressions\n    const isFunction = hasFunctionIdentifier(propValue);\n\n    if (isFunction) {\n      // Parse string as \"expression\", return equivalent JavaScript function\n      propValue = trimFunctionIdentifier(propValue);\n      propValue = parseExpressionString(propValue, configuration);\n    }\n\n    replacedProps[propName] = propValue;\n  }\n\n  return replacedProps;\n}\n"],"file":"convert-functions.js"}